(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[131],{68167:function(p,d,t){"use strict";t.r(d),t.d(d,{default:function(){return o}});var c=t(86582),u=t(2824),l=t(67294),v=t(74857),e=t(85893);function o(){var n=(0,v.Z)({list:[],path:""}),x=(0,l.useState)(!1),C=(0,u.Z)(x,2),_=C[0],f=C[1],a=(0,l.useRef)(null),s=(0,l.useRef)(null),O=(0,l.useRef)(null),j=function(){var r=document.getElementById("video");return new Promise(function(g,i){var m,b="",M=document.createElement("canvas"),D=r==null?void 0:r.width,w=r==null?void 0:r.height;M.width=D,M.height=w,(m=M.getContext("2d"))===null||m===void 0||m.drawImage(r,0,0,D,w),setTimeout(function(){b=M.toDataURL("image/jpeg"),console.log(b),document.getElementById("testImg").src=b,g(b)},0)})},E=function(r){var g=[];return r?g=r:g=n.list,g.length<1?"":g.map(function(i,m){return i?m===0?"M ".concat(i[0]," ").concat(i[1]):m===1?"L ".concat(i[0]," ").concat(i[1]):m===g.length-1?"".concat(i[0]," ").concat(i[1]," Z"):"".concat(i[0]," ").concat(i[1]):""}).join(",")},P=function(r){n.list.push([r.layerX,r.layerY]),n.path=E()},y=function(r){n.path=E([].concat((0,c.Z)(n.list),[[r.layerX,r.layerY]]))},L=function(r){n.list.push([r.offsetX,r.offsetY]),n.path=E()},R=function(){n.path=E()};return(0,l.useEffect)(function(){var h,r,g,i;if(!!a.current)return(h=a.current)===null||h===void 0||h.addEventListener("click",P),(r=a.current)===null||r===void 0||r.addEventListener("mousemove",y),(g=s.current)===null||g===void 0||g.addEventListener("click",L),(i=O.current)===null||i===void 0||i.addEventListener("mouseleave",R),function(){var m,b,M,D;(m=a.current)===null||m===void 0||m.removeEventListener("click",P),(b=a.current)===null||b===void 0||b.removeEventListener("mousemove",y),(M=s.current)===null||M===void 0||M.removeEventListener("click",L),(D=O.current)===null||D===void 0||D.removeEventListener("mouseleave",R)}},[]),(0,e.jsxs)("div",{children:[(0,e.jsx)("button",{onClick:j,children:"\u622A\u56FE"}),(0,e.jsx)("button",{onClick:function(){return f(!0)},children:"\u6807\u8BB0\u70B9"}),(0,e.jsx)("button",{onClick:function(){console.log(n.list),f(!1),n.list=[],n.path=""},children:"\u63D0\u4EA4"}),(0,e.jsx)("br",{}),(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"500",height:"300",ref:O,children:[(0,e.jsxs)("foreignObject",{x:"0",y:"0",width:"500",height:"300",children:[(0,e.jsx)("div",{ref:a,className:"video-marker-cover",style:{width:"500px",height:"300px",display:_?"block":"none"}}),(0,e.jsx)("video",{autoPlay:!0,muted:!0,src:"/antdpro-base-demo/public/video/big_buck_bunny.mp4",width:500,height:300,id:"video",controls:!0})]}),(0,e.jsx)("path",{ref:s,fill:"none",stroke:"red",d:n.path})]}),(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"500",height:"300",children:[(0,e.jsx)("foreignObject",{x:"0",y:"0",width:"500",height:"300",children:(0,e.jsx)("div",{children:(0,e.jsx)("img",{src:"",width:"500",height:"300",id:"testImg",alt:""})})}),(0,e.jsx)("path",{fill:"none",stroke:"red",d:n.path})]})]})}},52827:function(p,d,t){"use strict";t.d(d,{Z:function(){return l}});var c=t(67294);function u(v,e){if(v===e)return!0;for(var o=0;o<v.length;o++)if(!Object.is(v[o],e[o]))return!1;return!0}function l(v,e){var o=(0,c.useRef)({deps:e,obj:void 0,initialized:!1}).current;return(o.initialized===!1||!u(o.deps,e))&&(o.deps=e,o.obj=v(),o.initialized=!0),o.obj}},74857:function(p,d,t){"use strict";var c=t(67294),u=t(68630),l=t.n(u),v=t(52827),e=t(90105),o=new WeakMap,n=new WeakMap;function x(_,f){var a=o.get(_);if(a)return a;if(n.has(_))return _;var s=new Proxy(_,{get:function(O,j,E){var P=Reflect.get(O,j,E),y=Reflect.getOwnPropertyDescriptor(O,j);return!(y==null?void 0:y.configurable)&&!(y==null?void 0:y.writable)?P:l()(P)||Array.isArray(P)?x(P,f):P},set:function(O,j,E){var P=Reflect.set(O,j,E);return f(),P},deleteProperty:function(O,j){var E=Reflect.deleteProperty(O,j);return f(),E}});return o.set(_,s),n.set(s,_),s}function C(_){var f=(0,e.Z)(),a=(0,c.useRef)(_),s=(0,v.Z)(function(){return x(a.current,function(){f()})},[]);return s}d.Z=C},90105:function(p,d,t){"use strict";var c=t(65353),u=t(67294),l=function(){var v=(0,c.__read)((0,u.useState)({}),2),e=v[1];return(0,u.useCallback)(function(){return e({})},[])};d.Z=l},85924:function(p,d,t){var c=t(5569),u=c(Object.getPrototypeOf,Object);p.exports=u},5569:function(p){function d(t,c){return function(u){return t(c(u))}}p.exports=d},68630:function(p,d,t){var c=t(44239),u=t(85924),l=t(37005),v="[object Object]",e=Function.prototype,o=Object.prototype,n=e.toString,x=o.hasOwnProperty,C=n.call(Object);function _(f){if(!l(f)||c(f)!=v)return!1;var a=u(f);if(a===null)return!0;var s=x.call(a,"constructor")&&a.constructor;return typeof s=="function"&&s instanceof s&&n.call(s)==C}p.exports=_}}]);
