(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[62],{25782:function(wn,se,Nt){"use strict";Nt.d(se,{Z:function(){return ct}});var xe=Nt(28991),Ut=Nt(67294),ce={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},Gt=ce,Ot=Nt(27029),ue=function(bt,Ht){return Ut.createElement(Ot.Z,(0,xe.Z)((0,xe.Z)({},bt),{},{ref:Ht,icon:Gt}))},ve=Ut.forwardRef(ue),ct=ve},69816:function(wn,se,Nt){"use strict";Nt.d(se,{Z:function(){return ct}});var xe=Nt(28991),Ut=Nt(67294),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"},Gt=ce,Ot=Nt(27029),ue=function(bt,Ht){return Ut.createElement(Ot.Z,(0,xe.Z)((0,xe.Z)({},bt),{},{ref:Ht,icon:Gt}))},ve=Ut.forwardRef(ue),ct=ve},34294:function(){},52827:function(wn,se,Nt){"use strict";Nt.d(se,{Z:function(){return ce}});var xe=Nt(67294);function Ut(Gt,Ot){if(Gt===Ot)return!0;for(var ue=0;ue<Gt.length;ue++)if(!Object.is(Gt[ue],Ot[ue]))return!1;return!0}function ce(Gt,Ot){var ue=(0,xe.useRef)({deps:Ot,obj:void 0,initialized:!1}).current;return(ue.initialized===!1||!Ut(ue.deps,Ot))&&(ue.deps=Ot,ue.obj=Gt(),ue.initialized=!0),ue.obj}},58580:function(wn,se,Nt){"use strict";var xe=Nt(65353),Ut=Nt(67294),ce=Nt(85980);function Gt(Ot,ue){var ve=(0,xe.__read)((0,Ut.useState)(Ot),2),ct=ve[0],kt=ve[1],bt=(0,ce.Z)(function(){kt(Ot)},ue).run;return(0,Ut.useEffect)(function(){bt()},[Ot]),ct}se.Z=Gt},74857:function(wn,se,Nt){"use strict";var xe=Nt(67294),Ut=Nt(68630),ce=Nt.n(Ut),Gt=Nt(52827),Ot=Nt(90105),ue=new WeakMap,ve=new WeakMap;function ct(bt,Ht){var Zt=ue.get(bt);if(Zt)return Zt;if(ve.has(bt))return bt;var he=new Proxy(bt,{get:function(Ee,gt,Qe){var Rn=Reflect.get(Ee,gt,Qe),An=Reflect.getOwnPropertyDescriptor(Ee,gt);return!(An==null?void 0:An.configurable)&&!(An==null?void 0:An.writable)?Rn:ce()(Rn)||Array.isArray(Rn)?ct(Rn,Ht):Rn},set:function(Ee,gt,Qe){var Rn=Reflect.set(Ee,gt,Qe);return Ht(),Rn},deleteProperty:function(Ee,gt){var Qe=Reflect.deleteProperty(Ee,gt);return Ht(),Qe}});return ue.set(bt,he),ve.set(he,bt),he}function kt(bt){var Ht=(0,Ot.Z)(),Zt=(0,xe.useRef)(bt),he=(0,Gt.Z)(function(){return ct(Zt.current,function(){Ht()})},[]);return he}se.Z=kt},90105:function(wn,se,Nt){"use strict";var xe=Nt(65353),Ut=Nt(67294),ce=function(){var Gt=(0,xe.__read)((0,Ut.useState)({}),2),Ot=Gt[1];return(0,Ut.useCallback)(function(){return Ot({})},[])};se.Z=ce},99177:function(wn,se,Nt){"use strict";Nt.d(se,{Z:function(){return $i}});var xe=Nt(90484),Ut=Nt(96156),ce=Nt(22122),Gt=Nt(28481),Ot=Nt(94184),ue=Nt.n(Ot),ve=Nt(85061),ct=Nt(67294),kt=Nt(96774),bt=Nt.n(kt),Ht=Nt(21770),Zt=Nt(81253),he=Nt(28991),Ee=Nt(15105),gt=ct.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0}),Qe=gt;function Rn(ge,rn,ze){return(ge-rn)/(ze-rn)}function An(ge,rn,ze,Sr){var ar=Rn(rn,ze,Sr),gr={};switch(ge){case"rtl":gr.right="".concat(ar*100,"%"),gr.transform="translateX(50%)";break;case"btt":gr.bottom="".concat(ar*100,"%"),gr.transform="translateY(50%)";break;case"ttb":gr.top="".concat(ar*100,"%"),gr.transform="translateY(-50%)";break;default:gr.left="".concat(ar*100,"%"),gr.transform="translateX(-50%)";break}return gr}function Oe(ge,rn){return Array.isArray(ge)?ge[rn]:ge}var Nn=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],hi=ct.forwardRef(function(ge,rn){var ze,Sr,ar=ge.prefixCls,gr=ge.value,un=ge.valueIndex,Wr=ge.onStartMove,Yr=ge.style,ri=ge.render,Vn=ge.dragging,Pn=ge.onOffsetChange,bn=(0,Zt.Z)(ge,Nn),Zr=ct.useContext(Qe),jr=Zr.min,qr=Zr.max,nn=Zr.direction,Sn=Zr.disabled,wr=Zr.range,Xn=Zr.tabIndex,Di=Zr.ariaLabelForHandle,xi=Zr.ariaLabelledByForHandle,to=Zr.ariaValueTextFormatterForHandle,ai="".concat(ar,"-handle"),Wi=function(Fe){Sn||Wr(Fe,un)},Ei=function(Fe){if(!Sn){var Ci=null;switch(Fe.which||Fe.keyCode){case Ee.Z.LEFT:Ci=nn==="ltr"||nn==="btt"?-1:1;break;case Ee.Z.RIGHT:Ci=nn==="ltr"||nn==="btt"?1:-1;break;case Ee.Z.UP:Ci=nn!=="ttb"?1:-1;break;case Ee.Z.DOWN:Ci=nn!=="ttb"?-1:1;break;case Ee.Z.HOME:Ci="min";break;case Ee.Z.END:Ci="max";break;case Ee.Z.PAGE_UP:Ci=2;break;case Ee.Z.PAGE_DOWN:Ci=-2;break}Ci!==null&&(Fe.preventDefault(),Pn(Ci,un))}},Ai=An(nn,gr,jr,qr),Oi=ct.createElement("div",(0,ce.Z)({ref:rn,className:ue()(ai,(ze={},(0,Ut.Z)(ze,"".concat(ai,"-").concat(un+1),wr),(0,Ut.Z)(ze,"".concat(ai,"-dragging"),Vn),ze)),style:(0,he.Z)((0,he.Z)({},Ai),Yr),onMouseDown:Wi,onTouchStart:Wi,onKeyDown:Ei,tabIndex:Sn?null:Oe(Xn,un),role:"slider","aria-valuemin":jr,"aria-valuemax":qr,"aria-valuenow":gr,"aria-disabled":Sn,"aria-label":Oe(Di,un),"aria-labelledby":Oe(xi,un),"aria-valuetext":(Sr=Oe(to,un))===null||Sr===void 0?void 0:Sr(gr)},bn));return ri&&(Oi=ri(Oi,{index:un,prefixCls:ar,value:gr,dragging:Vn})),Oi}),Bi=hi,mo=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],ns=ct.forwardRef(function(ge,rn){var ze=ge.prefixCls,Sr=ge.style,ar=ge.onStartMove,gr=ge.onOffsetChange,un=ge.values,Wr=ge.handleRender,Yr=ge.draggingIndex,ri=(0,Zt.Z)(ge,mo),Vn=ct.useRef({});return ct.useImperativeHandle(rn,function(){return{focus:function(bn){var Zr;(Zr=Vn.current[bn])===null||Zr===void 0||Zr.focus()}}}),ct.createElement(ct.Fragment,null,un.map(function(Pn,bn){return ct.createElement(Bi,(0,ce.Z)({ref:function(jr){jr?Vn.current[bn]=jr:delete Vn.current[bn]},dragging:Yr===bn,prefixCls:ze,style:Oe(Sr,bn),key:bn,value:Pn,valueIndex:bn,onStartMove:ar,onOffsetChange:gr,render:Wr},ri))}))}),ci=ns;function Ui(ge){var rn="touches"in ge?ge.touches[0]:ge;return{pageX:rn.pageX,pageY:rn.pageY}}function Je(ge,rn,ze,Sr,ar,gr,un,Wr,Yr){var ri=ct.useState(null),Vn=(0,Gt.Z)(ri,2),Pn=Vn[0],bn=Vn[1],Zr=ct.useState(-1),jr=(0,Gt.Z)(Zr,2),qr=jr[0],nn=jr[1],Sn=ct.useState(ze),wr=(0,Gt.Z)(Sn,2),Xn=wr[0],Di=wr[1],xi=ct.useState(ze),to=(0,Gt.Z)(xi,2),ai=to[0],Wi=to[1],Ei=ct.useRef(null),Ai=ct.useRef(null);ct.useEffect(function(){qr===-1&&Di(ze)},[ze,qr]),ct.useEffect(function(){return function(){document.removeEventListener("mousemove",Ei.current),document.removeEventListener("mouseup",Ai.current),document.removeEventListener("touchmove",Ei.current),document.removeEventListener("touchend",Ai.current)}},[]);var Oi=function(Ii,vo){Xn.some(function(Fo,bo){return Fo!==Ii[bo]})&&(vo!==void 0&&bn(vo),Di(Ii),un(Ii))},wi=function(Ii,vo){if(Ii===-1){var Fo=ai[0],bo=ai[ai.length-1],WA=Sr-Fo,rA=ar-bo,$r=vo*(ar-Sr);$r=Math.max($r,WA),$r=Math.min($r,rA);var Is=gr(Fo+$r);$r=Is-Fo;var fa=ai.map(function(nA){return nA+$r});Oi(fa)}else{var ko=(ar-Sr)*vo,Mi=(0,ve.Z)(Xn);Mi[Ii]=ai[Ii];var Co=Yr(Mi,ko,Ii,"dist");Oi(Co.values,Co.value)}},Fe=ct.useRef(wi);Fe.current=wi;var Ci=function(Ii,vo){Ii.stopPropagation();var Fo=ze[vo];nn(vo),bn(Fo),Wi(ze);var bo=Ui(Ii),WA=bo.pageX,rA=bo.pageY,$r=function(ko){ko.preventDefault();var Mi=Ui(ko),Co=Mi.pageX,nA=Mi.pageY,jA=Co-WA,mu=nA-rA,IA=ge.current.getBoundingClientRect(),XA=IA.width,pa=IA.height,Ro;switch(rn){case"btt":Ro=-mu/pa;break;case"ttb":Ro=mu/pa;break;case"rtl":Ro=-jA/XA;break;default:Ro=jA/XA}Fe.current(vo,Ro)},Is=function fa(ko){ko.preventDefault(),document.removeEventListener("mouseup",fa),document.removeEventListener("mousemove",$r),document.removeEventListener("touchend",fa),document.removeEventListener("touchmove",$r),Ei.current=null,Ai.current=null,nn(-1),Wr()};document.addEventListener("mouseup",Is),document.addEventListener("mousemove",$r),document.addEventListener("touchend",Is),document.addEventListener("touchmove",$r),Ei.current=$r,Ai.current=Is},Hi=ct.useMemo(function(){var Ni=(0,ve.Z)(ze).sort(function(vo,Fo){return vo-Fo}),Ii=(0,ve.Z)(Xn).sort(function(vo,Fo){return vo-Fo});return Ni.every(function(vo,Fo){return vo===Ii[Fo]})?Xn:ze},[ze,Xn]);return[qr,Pn,Hi,Ci]}function ks(ge){var rn=ge.prefixCls,ze=ge.style,Sr=ge.start,ar=ge.end,gr=ge.index,un=ge.onStartMove,Wr=ct.useContext(Qe),Yr=Wr.direction,ri=Wr.min,Vn=Wr.max,Pn=Wr.disabled,bn=Wr.range,Zr="".concat(rn,"-track"),jr=Rn(Sr,ri,Vn),qr=Rn(ar,ri,Vn),nn=function(Xn){!Pn&&un&&un(Xn,-1)},Sn={};switch(Yr){case"rtl":Sn.right="".concat(jr*100,"%"),Sn.width="".concat(qr*100-jr*100,"%");break;case"btt":Sn.bottom="".concat(jr*100,"%"),Sn.height="".concat(qr*100-jr*100,"%");break;case"ttb":Sn.top="".concat(jr*100,"%"),Sn.height="".concat(qr*100-jr*100,"%");break;default:Sn.left="".concat(jr*100,"%"),Sn.width="".concat(qr*100-jr*100,"%")}return ct.createElement("div",{className:ue()(Zr,bn&&"".concat(Zr,"-").concat(gr+1)),style:(0,he.Z)((0,he.Z)({},Sn),ze),onMouseDown:nn,onTouchStart:nn})}function MA(ge){var rn=ge.prefixCls,ze=ge.style,Sr=ge.values,ar=ge.startPoint,gr=ge.onStartMove,un=ct.useContext(Qe),Wr=un.included,Yr=un.range,ri=un.min,Vn=ct.useMemo(function(){if(!Yr){if(Sr.length===0)return[];var Pn=ar!=null?ar:ri,bn=Sr[0];return[{start:Math.min(Pn,bn),end:Math.max(Pn,bn)}]}for(var Zr=[],jr=0;jr<Sr.length-1;jr+=1)Zr.push({start:Sr[jr],end:Sr[jr+1]});return Zr},[Sr,Yr,ar,ri]);return Wr?Vn.map(function(Pn,bn){var Zr=Pn.start,jr=Pn.end;return ct.createElement(ks,{index:bn,prefixCls:rn,style:Oe(ze,bn),start:Zr,end:jr,key:bn,onStartMove:gr})}):null}function eA(ge){var rn=ge.prefixCls,ze=ge.style,Sr=ge.children,ar=ge.value,gr=ge.onClick,un=ct.useContext(Qe),Wr=un.min,Yr=un.max,ri=un.direction,Vn=un.includedStart,Pn=un.includedEnd,bn=un.included,Zr="".concat(rn,"-text"),jr=An(ri,ar,Wr,Yr);return ct.createElement("span",{className:ue()(Zr,(0,Ut.Z)({},"".concat(Zr,"-active"),bn&&Vn<=ar&&ar<=Pn)),style:(0,he.Z)((0,he.Z)({},jr),ze),onMouseDown:function(nn){nn.stopPropagation()},onClick:function(){gr(ar)}},Sr)}function _A(ge){var rn=ge.prefixCls,ze=ge.marks,Sr=ge.onClick,ar="".concat(rn,"-mark");return ze.length?ct.createElement("div",{className:ar},ze.map(function(gr){var un=gr.value,Wr=gr.style,Yr=gr.label;return ct.createElement(eA,{key:un,prefixCls:ar,style:Wr,value:un,onClick:Sr},Yr)})):null}function hn(ge){var rn=ge.prefixCls,ze=ge.value,Sr=ge.style,ar=ge.activeStyle,gr=ct.useContext(Qe),un=gr.min,Wr=gr.max,Yr=gr.direction,ri=gr.included,Vn=gr.includedStart,Pn=gr.includedEnd,bn="".concat(rn,"-dot"),Zr=ri&&Vn<=ze&&ze<=Pn,jr=(0,he.Z)((0,he.Z)({},An(Yr,ze,un,Wr)),typeof Sr=="function"?Sr(ze):Sr);return Zr&&(jr=(0,he.Z)((0,he.Z)({},jr),typeof ar=="function"?ar(ze):ar)),ct.createElement("span",{className:ue()(bn,(0,Ut.Z)({},"".concat(bn,"-active"),Zr)),style:jr})}function Qo(ge){var rn=ge.prefixCls,ze=ge.marks,Sr=ge.dots,ar=ge.style,gr=ge.activeStyle,un=ct.useContext(Qe),Wr=un.min,Yr=un.max,ri=un.step,Vn=ct.useMemo(function(){var Pn=new Set;if(ze.forEach(function(Zr){Pn.add(Zr.value)}),Sr&&ri!==null)for(var bn=Wr;bn<=Yr;)Pn.add(bn),bn+=ri;return Array.from(Pn)},[Wr,Yr,ri,Sr,ze]);return ct.createElement("div",{className:"".concat(rn,"-step")},Vn.map(function(Pn){return ct.createElement(hn,{prefixCls:rn,key:Pn,value:Pn,style:ar,activeStyle:gr})}))}function Kr(ge,rn,ze,Sr,ar,gr){var un=ct.useCallback(function(Zr){var jr=isFinite(Zr)?Zr:ge;return jr=Math.min(rn,Zr),jr=Math.max(ge,jr),jr},[ge,rn]),Wr=ct.useCallback(function(Zr){if(ze!==null){var jr=ge+Math.round((un(Zr)-ge)/ze)*ze,qr=function(Xn){return(String(Xn).split(".")[1]||"").length},nn=Math.max(qr(ze),qr(rn),qr(ge)),Sn=Number(jr.toFixed(nn));return ge<=Sn&&Sn<=rn?Sn:null}return null},[ze,ge,rn,un]),Yr=ct.useCallback(function(Zr){var jr=un(Zr),qr=Sr.map(function(wr){return wr.value});ze!==null&&qr.push(Wr(Zr)),qr.push(ge,rn);var nn=qr[0],Sn=rn-ge;return qr.forEach(function(wr){var Xn=Math.abs(jr-wr);Xn<=Sn&&(nn=wr,Sn=Xn)}),nn},[ge,rn,Sr,ze,un,Wr]),ri=function Zr(jr,qr,nn){var Sn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof qr=="number"){var wr,Xn=jr[nn],Di=Xn+qr,xi=[];Sr.forEach(function(Ai){xi.push(Ai.value)}),xi.push(ge,rn),xi.push(Wr(Xn));var to=qr>0?1:-1;Sn==="unit"?xi.push(Wr(Xn+to*ze)):xi.push(Wr(Di)),xi=xi.filter(function(Ai){return Ai!==null}).filter(function(Ai){return qr<0?Ai<=Xn:Ai>=Xn}),Sn==="unit"&&(xi=xi.filter(function(Ai){return Ai!==Xn}));var ai=Sn==="unit"?Xn:Di;wr=xi[0];var Wi=Math.abs(wr-ai);if(xi.forEach(function(Ai){var Oi=Math.abs(Ai-ai);Oi<Wi&&(wr=Ai,Wi=Oi)}),wr===void 0)return qr<0?ge:rn;if(Sn==="dist")return wr;if(Math.abs(qr)>1){var Ei=(0,ve.Z)(jr);return Ei[nn]=wr,Zr(Ei,qr-to,nn,Sn)}return wr}else{if(qr==="min")return ge;if(qr==="max")return rn}},Vn=function(jr,qr,nn){var Sn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",wr=jr[nn],Xn=ri(jr,qr,nn,Sn);return{value:Xn,changed:Xn!==wr}},Pn=function(jr){return gr===null&&jr===0||typeof gr=="number"&&jr<gr},bn=function(jr,qr,nn){var Sn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",wr=jr.map(Yr),Xn=wr[nn],Di=ri(wr,qr,nn,Sn);if(wr[nn]=Di,ar===!1){var xi=gr||0;nn>0&&wr[nn-1]!==Xn&&(wr[nn]=Math.max(wr[nn],wr[nn-1]+xi)),nn<wr.length-1&&wr[nn+1]!==Xn&&(wr[nn]=Math.min(wr[nn],wr[nn+1]-xi))}else if(typeof gr=="number"||gr===null){for(var to=nn+1;to<wr.length;to+=1)for(var ai=!0;Pn(wr[to]-wr[to-1])&&ai;){var Wi=Vn(wr,1,to);wr[to]=Wi.value,ai=Wi.changed}for(var Ei=nn;Ei>0;Ei-=1)for(var Ai=!0;Pn(wr[Ei]-wr[Ei-1])&&Ai;){var Oi=Vn(wr,-1,Ei-1);wr[Ei-1]=Oi.value,Ai=Oi.changed}for(var wi=wr.length-1;wi>0;wi-=1)for(var Fe=!0;Pn(wr[wi]-wr[wi-1])&&Fe;){var Ci=Vn(wr,-1,wi-1);wr[wi-1]=Ci.value,Fe=Ci.changed}for(var Hi=0;Hi<wr.length-1;Hi+=1)for(var Ni=!0;Pn(wr[Hi+1]-wr[Hi])&&Ni;){var Ii=Vn(wr,1,Hi+1);wr[Hi+1]=Ii.value,Ni=Ii.changed}}return{value:wr[nn],values:wr}};return[Yr,bn]}var $f=Nt(80334),gu=ct.forwardRef(function(ge,rn){var ze,Sr=ge.prefixCls,ar=Sr===void 0?"rc-slider":Sr,gr=ge.className,un=ge.style,Wr=ge.disabled,Yr=Wr===void 0?!1:Wr,ri=ge.autoFocus,Vn=ge.onFocus,Pn=ge.onBlur,bn=ge.min,Zr=bn===void 0?0:bn,jr=ge.max,qr=jr===void 0?100:jr,nn=ge.step,Sn=nn===void 0?1:nn,wr=ge.value,Xn=ge.defaultValue,Di=ge.range,xi=ge.count,to=ge.onChange,ai=ge.onBeforeChange,Wi=ge.onAfterChange,Ei=ge.allowCross,Ai=Ei===void 0?!0:Ei,Oi=ge.pushable,wi=Oi===void 0?!1:Oi,Fe=ge.draggableTrack,Ci=ge.reverse,Hi=ge.vertical,Ni=ge.included,Ii=Ni===void 0?!0:Ni,vo=ge.startPoint,Fo=ge.trackStyle,bo=ge.handleStyle,WA=ge.railStyle,rA=ge.dotStyle,$r=ge.activeDotStyle,Is=ge.marks,fa=ge.dots,ko=ge.handleRender,Mi=ge.tabIndex,Co=Mi===void 0?0:Mi,nA=ge.ariaLabelForHandle,jA=ge.ariaLabelledByForHandle,mu=ge.ariaValueTextFormatterForHandle,IA=ct.useRef(),XA=ct.useRef(),pa=ct.useMemo(function(){return Hi?Ci?"ttb":"btt":Ci?"rtl":"ltr"},[Ci,Hi]),Ro=ct.useMemo(function(){return isFinite(Zr)?Zr:0},[Zr]),vu=ct.useMemo(function(){return isFinite(qr)?qr:100},[qr]),Da=ct.useMemo(function(){return Sn!==null&&Sn<=0?1:Sn},[Sn]),tp=ct.useMemo(function(){return wi===!0?Da:wi>=0?wi:!1},[wi,Da]),Ts=ct.useMemo(function(){var Po=Object.keys(Is||{});return Po.map(function(fi){var Wn=Is[fi],yo={value:Number(fi)};return Wn&&(0,xe.Z)(Wn)==="object"&&!ct.isValidElement(Wn)&&("label"in Wn||"style"in Wn)?(yo.style=Wn.style,yo.label=Wn.label):yo.label=Wn,yo}).filter(function(fi){var Wn=fi.label;return Wn||typeof Wn=="number"}).sort(function(fi,Wn){return fi.value-Wn.value})},[Is]),ep=Kr(Ro,vu,Da,Ts,Ai,tp),Vl=(0,Gt.Z)(ep,2),is=Vl[0],zh=Vl[1],Wl=(0,Ht.Z)(Xn,{value:wr}),Qh=(0,Gt.Z)(Wl,2),Ss=Qh[0],rp=Qh[1],iA=ct.useMemo(function(){var Po=Ss==null?[]:Array.isArray(Ss)?Ss:[Ss],fi=(0,Gt.Z)(Po,1),Wn=fi[0],yo=Wn===void 0?Ro:Wn,Cn=Ss===null?[]:[yo];if(Di){if(Cn=(0,ve.Z)(Po),xi||Ss===void 0){var Ln=xi>=0?xi+1:2;for(Cn=Cn.slice(0,Ln);Cn.length<Ln;){var Na;Cn.push((Na=Cn[Cn.length-1])!==null&&Na!==void 0?Na:Ro)}}Cn.sort(function(SA,Kl){return SA-Kl})}return Cn.forEach(function(SA,Kl){Cn[Kl]=is(SA)}),Cn},[Ss,Di,Ro,xi,is]),yu=ct.useRef(iA);yu.current=iA;var da=function(fi){return Di?fi:fi[0]},bh=function(fi){var Wn=(0,ve.Z)(fi).sort(function(yo,Cn){return yo-Cn});to&&!bt()(Wn,yu.current)&&to(da(Wn)),rp(Wn)},ga=function(fi){if(!Yr){var Wn=0,yo=vu-Ro;iA.forEach(function(Ln,Na){var SA=Math.abs(fi-Ln);SA<=yo&&(yo=SA,Wn=Na)});var Cn=(0,ve.Z)(iA);Cn[Wn]=fi,Di&&!iA.length&&xi===void 0&&Cn.push(fi),ai==null||ai(da(Cn)),bh(Cn),Wi==null||Wi(da(Cn))}},np=function(fi){fi.preventDefault();var Wn=XA.current.getBoundingClientRect(),yo=Wn.width,Cn=Wn.height,Ln=Wn.left,Na=Wn.top,SA=Wn.bottom,Kl=Wn.right,za=fi.clientX,Ko=fi.clientY,LA;switch(pa){case"btt":LA=(SA-Ko)/Cn;break;case"ttb":LA=(Ko-Na)/Cn;break;case"rtl":LA=(Kl-za)/yo;break;default:LA=(za-Ln)/yo}var ap=Ro+LA*(vu-Ro);ga(is(ap))},jl=ct.useState(null),qu=(0,Gt.Z)(jl,2),Oa=qu[0],ip=qu[1],Vs=function(fi,Wn){if(!Yr){var yo=zh(iA,fi,Wn);ai==null||ai(da(iA)),bh(yo.values),Wi==null||Wi(da(yo.values)),ip(yo.value)}};ct.useEffect(function(){if(Oa!==null){var Po=iA.indexOf(Oa);Po>=0&&IA.current.focus(Po)}ip(null)},[Oa]);var Mo=ct.useMemo(function(){return Fe&&Da===null?!1:Fe},[Fe,Da]),Xl=function(){Wi==null||Wi(da(yu.current))},kh=Je(XA,pa,iA,Ro,vu,is,bh,Xl,zh),$u=(0,Gt.Z)(kh,4),Gh=$u[0],fr=$u[1],ma=$u[2],op=$u[3],Ti=function(fi,Wn){op(fi,Wn),ai==null||ai(da(yu.current))},sp=Gh!==-1;ct.useEffect(function(){if(!sp){var Po=iA.lastIndexOf(fr);IA.current.focus(Po)}},[sp]);var ra=ct.useMemo(function(){return(0,ve.Z)(ma).sort(function(Po,fi){return Po-fi})},[ma]),bc=ct.useMemo(function(){return Di?[ra[0],ra[ra.length-1]]:[Ro,ra[0]]},[ra,Di,Ro]),Ha=(0,Gt.Z)(bc,2),kc=Ha[0],Vh=Ha[1];ct.useImperativeHandle(rn,function(){return{focus:function(){IA.current.focus(0)},blur:function(){var fi=document,Wn=fi.activeElement;XA.current.contains(Wn)&&(Wn==null||Wn.blur())}}}),ct.useEffect(function(){ri&&IA.current.focus(0)},[]);var TA=ct.useMemo(function(){return{min:Ro,max:vu,direction:pa,disabled:Yr,step:Da,included:Ii,includedStart:kc,includedEnd:Vh,range:Di,tabIndex:Co,ariaLabelForHandle:nA,ariaLabelledByForHandle:jA,ariaValueTextFormatterForHandle:mu}},[Ro,vu,pa,Yr,Da,Ii,kc,Vh,Di,Co,nA,jA,mu]);return ct.createElement(Qe.Provider,{value:TA},ct.createElement("div",{ref:XA,className:ue()(ar,gr,(ze={},(0,Ut.Z)(ze,"".concat(ar,"-disabled"),Yr),(0,Ut.Z)(ze,"".concat(ar,"-vertical"),Hi),(0,Ut.Z)(ze,"".concat(ar,"-horizontal"),!Hi),(0,Ut.Z)(ze,"".concat(ar,"-with-marks"),Ts.length),ze)),style:un,onMouseDown:np},ct.createElement("div",{className:"".concat(ar,"-rail"),style:WA}),ct.createElement(MA,{prefixCls:ar,style:Fo,values:ra,startPoint:vo,onStartMove:Mo?Ti:null}),ct.createElement(Qo,{prefixCls:ar,marks:Ts,dots:fa,style:rA,activeStyle:$r}),ct.createElement(ci,{ref:IA,prefixCls:ar,style:bo,values:ma,draggingIndex:Gh,onStartMove:Ti,onOffsetChange:Vs,onFocus:Vn,onBlur:Pn,handleRender:ko}),ct.createElement(_A,{prefixCls:ar,marks:Ts,onClick:ga})))}),Gl=gu,Hh=Gl,BA=Nt(53124),EA=Nt(75164),Ju=Nt(42550),or=Nt(45777),wo=ct.forwardRef(function(ge,rn){var ze=ge.open,Sr=(0,ct.useRef)(null),ar=(0,ct.useRef)(null);function gr(){EA.Z.cancel(ar.current),ar.current=null}function un(){ar.current=(0,EA.Z)(function(){var Wr;(Wr=Sr.current)===null||Wr===void 0||Wr.forcePopupAlign(),ar.current=null})}return ct.useEffect(function(){return ze?un():gr(),gr},[ze,ge.title]),ct.createElement(or.Z,(0,ce.Z)({ref:(0,Ju.sQ)(Sr,rn)},ge))}),Gs=wo,Nh=function(ge,rn){var ze={};for(var Sr in ge)Object.prototype.hasOwnProperty.call(ge,Sr)&&rn.indexOf(Sr)<0&&(ze[Sr]=ge[Sr]);if(ge!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ar=0,Sr=Object.getOwnPropertySymbols(ge);ar<Sr.length;ar++)rn.indexOf(Sr[ar])<0&&Object.prototype.propertyIsEnumerable.call(ge,Sr[ar])&&(ze[Sr[ar]]=ge[Sr[ar]]);return ze},sr=ct.forwardRef(function(ge,rn){var ze=ct.useContext(BA.E_),Sr=ze.getPrefixCls,ar=ze.direction,gr=ze.getPopupContainer,un=ct.useState({}),Wr=(0,Gt.Z)(un,2),Yr=Wr[0],ri=Wr[1],Vn=function(Wi,Ei){ri(function(Ai){return(0,ce.Z)((0,ce.Z)({},Ai),(0,Ut.Z)({},Wi,Ei))})},Pn=function(Wi,Ei){return Wi||(Ei?ar==="rtl"?"left":"right":"top")},bn=ge.prefixCls,Zr=ge.range,jr=ge.className,qr=Nh(ge,["prefixCls","range","className"]),nn=Sr("slider",bn),Sn=ue()(jr,(0,Ut.Z)({},"".concat(nn,"-rtl"),ar==="rtl"));ar==="rtl"&&!qr.vertical&&(qr.reverse=!qr.reverse);var wr=ct.useMemo(function(){return Zr?(0,xe.Z)(Zr)==="object"?[!0,Zr.draggableTrack]:[!0,!1]:[!1]},[Zr]),Xn=(0,Gt.Z)(wr,2),Di=Xn[0],xi=Xn[1],to=function(Wi,Ei){var Ai,Oi=Ei.index,wi=Ei.dragging,Fe=Sr(),Ci=ge.tooltip,Hi=Ci===void 0?{}:Ci,Ni=ge.vertical,Ii=(0,ce.Z)({formatter:(Ai=ge.tipFormatter)!==null&&Ai!==void 0?Ai:function(Mi){return typeof Mi=="number"?Mi.toString():""},open:ge.tooltipVisible,placement:ge.tooltipPlacement,getPopupContainer:ge.getTooltipPopupContainer},Hi),vo=Ii.open,Fo=Ii.placement,bo=Ii.getPopupContainer,WA=Ii.prefixCls,rA=Ii.formatter,$r=rA?Yr[Oi]||wi:!1,Is=vo||vo===void 0&&$r,fa=(0,ce.Z)((0,ce.Z)({},Wi.props),{onMouseEnter:function(){return Vn(Oi,!0)},onMouseLeave:function(){return Vn(Oi,!1)}}),ko=Sr("tooltip",WA);return ct.createElement(Gs,{prefixCls:ko,title:rA?rA(Ei.value):"",open:Is,placement:Pn(Fo,Ni),transitionName:"".concat(Fe,"-zoom-down"),key:Oi,overlayClassName:"".concat(nn,"-tooltip"),getPopupContainer:bo||gr},ct.cloneElement(Wi,fa))};return ct.createElement(Hh,(0,ce.Z)({},qr,{step:qr.step,range:Di,draggableTrack:xi,className:Sn,ref:rn,prefixCls:nn,handleRender:to}))}),$i=sr},66126:function(wn,se,Nt){"use strict";var xe=Nt(38663),Ut=Nt.n(xe),ce=Nt(34294),Gt=Nt.n(ce),Ot=Nt(22385)},61120:function(wn){/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */(function(se,Nt){wn.exports=Nt()})(this,function(){"use strict";/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var se=function(H,P){return se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,Q){b.__proto__=Q}||function(b,Q){for(var q in Q)Object.prototype.hasOwnProperty.call(Q,q)&&(b[q]=Q[q])},se(H,P)};function Nt(H,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");se(H,P);function b(){this.constructor=H}H.prototype=P===null?Object.create(P):(b.prototype=P.prototype,new b)}var xe=function(){return xe=Object.assign||function(P){for(var b,Q=1,q=arguments.length;Q<q;Q++){b=arguments[Q];for(var nt in b)Object.prototype.hasOwnProperty.call(b,nt)&&(P[nt]=b[nt])}return P},xe.apply(this,arguments)};function Ut(H,P,b,Q){function q(nt){return nt instanceof b?nt:new b(function(ft){ft(nt)})}return new(b||(b=Promise))(function(nt,ft){function St($t){try{Wt(Q.next($t))}catch(me){ft(me)}}function Tt($t){try{Wt(Q.throw($t))}catch(me){ft(me)}}function Wt($t){$t.done?nt($t.value):q($t.value).then(St,Tt)}Wt((Q=Q.apply(H,P||[])).next())})}function ce(H,P){var b={label:0,sent:function(){if(nt[0]&1)throw nt[1];return nt[1]},trys:[],ops:[]},Q,q,nt,ft;return ft={next:St(0),throw:St(1),return:St(2)},typeof Symbol=="function"&&(ft[Symbol.iterator]=function(){return this}),ft;function St(Wt){return function($t){return Tt([Wt,$t])}}function Tt(Wt){if(Q)throw new TypeError("Generator is already executing.");for(;b;)try{if(Q=1,q&&(nt=Wt[0]&2?q.return:Wt[0]?q.throw||((nt=q.return)&&nt.call(q),0):q.next)&&!(nt=nt.call(q,Wt[1])).done)return nt;switch(q=0,nt&&(Wt=[Wt[0]&2,nt.value]),Wt[0]){case 0:case 1:nt=Wt;break;case 4:return b.label++,{value:Wt[1],done:!1};case 5:b.label++,q=Wt[1],Wt=[0];continue;case 7:Wt=b.ops.pop(),b.trys.pop();continue;default:if(nt=b.trys,!(nt=nt.length>0&&nt[nt.length-1])&&(Wt[0]===6||Wt[0]===2)){b=0;continue}if(Wt[0]===3&&(!nt||Wt[1]>nt[0]&&Wt[1]<nt[3])){b.label=Wt[1];break}if(Wt[0]===6&&b.label<nt[1]){b.label=nt[1],nt=Wt;break}if(nt&&b.label<nt[2]){b.label=nt[2],b.ops.push(Wt);break}nt[2]&&b.ops.pop(),b.trys.pop();continue}Wt=P.call(H,b)}catch($t){Wt=[6,$t],q=0}finally{Q=nt=0}if(Wt[0]&5)throw Wt[1];return{value:Wt[0]?Wt[1]:void 0,done:!0}}}function Gt(H,P,b){if(b||arguments.length===2)for(var Q=0,q=P.length,nt;Q<q;Q++)(nt||!(Q in P))&&(nt||(nt=Array.prototype.slice.call(P,0,Q)),nt[Q]=P[Q]);return H.concat(nt||P)}for(var Ot=function(){function H(P,b,Q,q){this.left=P,this.top=b,this.width=Q,this.height=q}return H.prototype.add=function(P,b,Q,q){return new H(this.left+P,this.top+b,this.width+Q,this.height+q)},H.fromClientRect=function(P,b){return new H(b.left+P.windowBounds.left,b.top+P.windowBounds.top,b.width,b.height)},H.fromDOMRectList=function(P,b){var Q=Array.from(b).find(function(q){return q.width!==0});return Q?new H(Q.left+P.windowBounds.left,Q.top+P.windowBounds.top,Q.width,Q.height):H.EMPTY},H.EMPTY=new H(0,0,0,0),H}(),ue=function(H,P){return Ot.fromClientRect(H,P.getBoundingClientRect())},ve=function(H){var P=H.body,b=H.documentElement;if(!P||!b)throw new Error("Unable to get document size");var Q=Math.max(Math.max(P.scrollWidth,b.scrollWidth),Math.max(P.offsetWidth,b.offsetWidth),Math.max(P.clientWidth,b.clientWidth)),q=Math.max(Math.max(P.scrollHeight,b.scrollHeight),Math.max(P.offsetHeight,b.offsetHeight),Math.max(P.clientHeight,b.clientHeight));return new Ot(0,0,Q,q)},ct=function(H){for(var P=[],b=0,Q=H.length;b<Q;){var q=H.charCodeAt(b++);if(q>=55296&&q<=56319&&b<Q){var nt=H.charCodeAt(b++);(nt&64512)==56320?P.push(((q&1023)<<10)+(nt&1023)+65536):(P.push(q),b--)}else P.push(q)}return P},kt=function(){for(var H=[],P=0;P<arguments.length;P++)H[P]=arguments[P];if(String.fromCodePoint)return String.fromCodePoint.apply(String,H);var b=H.length;if(!b)return"";for(var Q=[],q=-1,nt="";++q<b;){var ft=H[q];ft<=65535?Q.push(ft):(ft-=65536,Q.push((ft>>10)+55296,ft%1024+56320)),(q+1===b||Q.length>16384)&&(nt+=String.fromCharCode.apply(String,Q),Q.length=0)}return nt},bt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ht=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),Zt=0;Zt<bt.length;Zt++)Ht[bt.charCodeAt(Zt)]=Zt;for(var he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ee=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),gt=0;gt<he.length;gt++)Ee[he.charCodeAt(gt)]=gt;for(var Qe=function(H){var P=H.length*.75,b=H.length,Q,q=0,nt,ft,St,Tt;H[H.length-1]==="="&&(P--,H[H.length-2]==="="&&P--);var Wt=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint8Array.prototype.slice!="undefined"?new ArrayBuffer(P):new Array(P),$t=Array.isArray(Wt)?Wt:new Uint8Array(Wt);for(Q=0;Q<b;Q+=4)nt=Ee[H.charCodeAt(Q)],ft=Ee[H.charCodeAt(Q+1)],St=Ee[H.charCodeAt(Q+2)],Tt=Ee[H.charCodeAt(Q+3)],$t[q++]=nt<<2|ft>>4,$t[q++]=(ft&15)<<4|St>>2,$t[q++]=(St&3)<<6|Tt&63;return Wt},Rn=function(H){for(var P=H.length,b=[],Q=0;Q<P;Q+=2)b.push(H[Q+1]<<8|H[Q]);return b},An=function(H){for(var P=H.length,b=[],Q=0;Q<P;Q+=4)b.push(H[Q+3]<<24|H[Q+2]<<16|H[Q+1]<<8|H[Q]);return b},Oe=5,Nn=6+5,hi=2,Bi=Nn-Oe,mo=65536>>Oe,ns=1<<Oe,ci=ns-1,Ui=1024>>Oe,Je=mo+Ui,ks=Je,MA=2048>>6,eA=ks+MA,_A=65536>>Nn,hn=1<<Bi,Qo=hn-1,Kr=function(H,P,b){return H.slice?H.slice(P,b):new Uint16Array(Array.prototype.slice.call(H,P,b))},$f=function(H,P,b){return H.slice?H.slice(P,b):new Uint32Array(Array.prototype.slice.call(H,P,b))},gu=function(H,P){var b=Qe(H),Q=Array.isArray(b)?An(b):new Uint32Array(b),q=Array.isArray(b)?Rn(b):new Uint16Array(b),nt=24,ft=Kr(q,nt/2,Q[4]/2),St=Q[5]===2?Kr(q,(nt+Q[4])/2):$f(Q,Math.ceil((nt+Q[4])/4));return new Gl(Q[0],Q[1],Q[2],Q[3],ft,St)},Gl=function(){function H(P,b,Q,q,nt,ft){this.initialValue=P,this.errorValue=b,this.highStart=Q,this.highValueIndex=q,this.index=nt,this.data=ft}return H.prototype.get=function(P){var b;if(P>=0){if(P<55296||P>56319&&P<=65535)return b=this.index[P>>Oe],b=(b<<hi)+(P&ci),this.data[b];if(P<=65535)return b=this.index[mo+(P-55296>>Oe)],b=(b<<hi)+(P&ci),this.data[b];if(P<this.highStart)return b=eA-_A+(P>>Nn),b=this.index[b],b+=P>>Oe&Qo,b=this.index[b],b=(b<<hi)+(P&ci),this.data[b];if(P<=1114111)return this.data[this.highValueIndex]}return this.errorValue},H}(),Hh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BA=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),EA=0;EA<Hh.length;EA++)BA[Hh.charCodeAt(EA)]=EA;var Ju="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",or=50,wo=1,Gs=2,Nh=3,sr=4,$i=5,ge=7,rn=8,ze=9,Sr=10,ar=11,gr=12,un=13,Wr=14,Yr=15,ri=16,Vn=17,Pn=18,bn=19,Zr=20,jr=21,qr=22,nn=23,Sn=24,wr=25,Xn=26,Di=27,xi=28,to=29,ai=30,Wi=31,Ei=32,Ai=33,Oi=34,wi=35,Fe=36,Ci=37,Hi=38,Ni=39,Ii=40,vo=41,Fo=42,bo=43,WA=[9001,65288],rA="!",$r="\xD7",Is="\xF7",fa=gu(Ju),ko=[ai,Fe],Mi=[wo,Gs,Nh,$i],Co=[Sr,rn],nA=[Di,Xn],jA=Mi.concat(Co),mu=[Hi,Ni,Ii,Oi,wi],IA=[Yr,un],XA=function(H,P){P===void 0&&(P="strict");var b=[],Q=[],q=[];return H.forEach(function(nt,ft){var St=fa.get(nt);if(St>or?(q.push(!0),St-=or):q.push(!1),["normal","auto","loose"].indexOf(P)!==-1&&[8208,8211,12316,12448].indexOf(nt)!==-1)return Q.push(ft),b.push(ri);if(St===sr||St===ar){if(ft===0)return Q.push(ft),b.push(ai);var Tt=b[ft-1];return jA.indexOf(Tt)===-1?(Q.push(Q[ft-1]),b.push(Tt)):(Q.push(ft),b.push(ai))}if(Q.push(ft),St===Wi)return b.push(P==="strict"?jr:Ci);if(St===Fo||St===to)return b.push(ai);if(St===bo)return nt>=131072&&nt<=196605||nt>=196608&&nt<=262141?b.push(Ci):b.push(ai);b.push(St)}),[Q,b,q]},pa=function(H,P,b,Q){var q=Q[b];if(Array.isArray(H)?H.indexOf(q)!==-1:H===q)for(var nt=b;nt<=Q.length;){nt++;var ft=Q[nt];if(ft===P)return!0;if(ft!==Sr)break}if(q===Sr)for(var nt=b;nt>0;){nt--;var St=Q[nt];if(Array.isArray(H)?H.indexOf(St)!==-1:H===St)for(var Tt=b;Tt<=Q.length;){Tt++;var ft=Q[Tt];if(ft===P)return!0;if(ft!==Sr)break}if(St!==Sr)break}return!1},Ro=function(H,P){for(var b=H;b>=0;){var Q=P[b];if(Q===Sr)b--;else return Q}return 0},vu=function(H,P,b,Q,q){if(b[Q]===0)return $r;var nt=Q-1;if(Array.isArray(q)&&q[nt]===!0)return $r;var ft=nt-1,St=nt+1,Tt=P[nt],Wt=ft>=0?P[ft]:0,$t=P[St];if(Tt===Gs&&$t===Nh)return $r;if(Mi.indexOf(Tt)!==-1)return rA;if(Mi.indexOf($t)!==-1||Co.indexOf($t)!==-1)return $r;if(Ro(nt,P)===rn)return Is;if(fa.get(H[nt])===ar||(Tt===Ei||Tt===Ai)&&fa.get(H[St])===ar||Tt===ge||$t===ge||Tt===ze||[Sr,un,Yr].indexOf(Tt)===-1&&$t===ze||[Vn,Pn,bn,Sn,xi].indexOf($t)!==-1||Ro(nt,P)===qr||pa(nn,qr,nt,P)||pa([Vn,Pn],jr,nt,P)||pa(gr,gr,nt,P))return $r;if(Tt===Sr)return Is;if(Tt===nn||$t===nn)return $r;if($t===ri||Tt===ri)return Is;if([un,Yr,jr].indexOf($t)!==-1||Tt===Wr||Wt===Fe&&IA.indexOf(Tt)!==-1||Tt===xi&&$t===Fe||$t===Zr||ko.indexOf($t)!==-1&&Tt===wr||ko.indexOf(Tt)!==-1&&$t===wr||Tt===Di&&[Ci,Ei,Ai].indexOf($t)!==-1||[Ci,Ei,Ai].indexOf(Tt)!==-1&&$t===Xn||ko.indexOf(Tt)!==-1&&nA.indexOf($t)!==-1||nA.indexOf(Tt)!==-1&&ko.indexOf($t)!==-1||[Di,Xn].indexOf(Tt)!==-1&&($t===wr||[qr,Yr].indexOf($t)!==-1&&P[St+1]===wr)||[qr,Yr].indexOf(Tt)!==-1&&$t===wr||Tt===wr&&[wr,xi,Sn].indexOf($t)!==-1)return $r;if([wr,xi,Sn,Vn,Pn].indexOf($t)!==-1)for(var me=nt;me>=0;){var we=P[me];if(we===wr)return $r;if([xi,Sn].indexOf(we)!==-1)me--;else break}if([Di,Xn].indexOf($t)!==-1)for(var me=[Vn,Pn].indexOf(Tt)!==-1?ft:nt;me>=0;){var we=P[me];if(we===wr)return $r;if([xi,Sn].indexOf(we)!==-1)me--;else break}if(Hi===Tt&&[Hi,Ni,Oi,wi].indexOf($t)!==-1||[Ni,Oi].indexOf(Tt)!==-1&&[Ni,Ii].indexOf($t)!==-1||[Ii,wi].indexOf(Tt)!==-1&&$t===Ii||mu.indexOf(Tt)!==-1&&[Zr,Xn].indexOf($t)!==-1||mu.indexOf($t)!==-1&&Tt===Di||ko.indexOf(Tt)!==-1&&ko.indexOf($t)!==-1||Tt===Sn&&ko.indexOf($t)!==-1||ko.concat(wr).indexOf(Tt)!==-1&&$t===qr&&WA.indexOf(H[St])===-1||ko.concat(wr).indexOf($t)!==-1&&Tt===Pn)return $r;if(Tt===vo&&$t===vo){for(var Lr=b[nt],Ye=1;Lr>0&&(Lr--,P[Lr]===vo);)Ye++;if(Ye%2!=0)return $r}return Tt===Ei&&$t===Ai?$r:Is},Da=function(H,P){P||(P={lineBreak:"normal",wordBreak:"normal"});var b=XA(H,P.lineBreak),Q=b[0],q=b[1],nt=b[2];(P.wordBreak==="break-all"||P.wordBreak==="break-word")&&(q=q.map(function(St){return[wr,ai,Fo].indexOf(St)!==-1?Ci:St}));var ft=P.wordBreak==="keep-all"?nt.map(function(St,Tt){return St&&H[Tt]>=19968&&H[Tt]<=40959}):void 0;return[Q,q,ft]},tp=function(){function H(P,b,Q,q){this.codePoints=P,this.required=b===rA,this.start=Q,this.end=q}return H.prototype.slice=function(){return kt.apply(void 0,this.codePoints.slice(this.start,this.end))},H}(),Ts=function(H,P){var b=ct(H),Q=Da(b,P),q=Q[0],nt=Q[1],ft=Q[2],St=b.length,Tt=0,Wt=0;return{next:function(){if(Wt>=St)return{done:!0,value:null};for(var $t=$r;Wt<St&&($t=vu(b,nt,q,++Wt,ft))===$r;);if($t!==$r||Wt===St){var me=new tp(b,$t,Tt,Wt);return Tt=Wt,{value:me,done:!1}}return{done:!0,value:null}}}},ep=1<<0,Vl=1<<1,is=1<<2,zh=1<<3,Wl=10,Qh=47,Ss=92,rp=9,iA=32,yu=34,da=61,bh=35,ga=36,np=37,jl=39,qu=40,Oa=41,ip=95,Vs=45,Mo=33,Xl=60,kh=62,$u=64,Gh=91,fr=93,ma=61,op=123,Ti=63,sp=125,ra=124,bc=126,Ha=128,kc=65533,Vh=42,TA=43,Po=44,fi=58,Wn=59,yo=46,Cn=0,Ln=8,Na=11,SA=14,Kl=31,za=127,Ko=-1,LA=48,ap=97,Xg=101,Kg=102,Wh=117,va=122,FA=65,Yo=69,Ls=70,Ws=85,KA=90,Ki=function(H){return H>=LA&&H<=57},ya=function(H){return H>=55296&&H<=57343},Qa=function(H){return Ki(H)||H>=FA&&H<=Ls||H>=ap&&H<=Kg},tl=function(H){return H>=ap&&H<=va},Yl=function(H){return H>=FA&&H<=KA},Ap=function(H){return tl(H)||Yl(H)},js=function(H){return H>=Ha},xa=function(H){return H===Wl||H===rp||H===iA},na=function(H){return Ap(H)||js(H)||H===ip},os=function(H){return na(H)||Ki(H)||H===Vs},Xr=function(H){return H>=Cn&&H<=Ln||H===Na||H>=SA&&H<=Kl||H===za},pi=function(H,P){return H!==Ss?!1:P!==Wl},Xs=function(H,P,b){return H===Vs?na(P)||pi(P,b):na(H)?!0:!!(H===Ss&&pi(H,P))},uo=function(H,P,b){return H===TA||H===Vs?Ki(P)?!0:P===yo&&Ki(b):Ki(H===yo?P:H)},_o=function(H){var P=0,b=1;(H[P]===TA||H[P]===Vs)&&(H[P]===Vs&&(b=-1),P++);for(var Q=[];Ki(H[P]);)Q.push(H[P++]);var q=Q.length?parseInt(kt.apply(void 0,Q),10):0;H[P]===yo&&P++;for(var nt=[];Ki(H[P]);)nt.push(H[P++]);var ft=nt.length,St=ft?parseInt(kt.apply(void 0,nt),10):0;(H[P]===Yo||H[P]===Xg)&&P++;var Tt=1;(H[P]===TA||H[P]===Vs)&&(H[P]===Vs&&(Tt=-1),P++);for(var Wt=[];Ki(H[P]);)Wt.push(H[P++]);var $t=Wt.length?parseInt(kt.apply(void 0,Wt),10):0;return b*(q+St*Math.pow(10,-ft))*Math.pow(10,Tt*$t)},ba={type:2},xu={type:3},jh={type:4},Yg={type:13},Gc={type:8},up={type:21},ln={type:9},Vc={type:10},lp={type:11},Xh={type:12},hp={type:14},Zo={type:23},Er={type:1},Wc={type:25},cp={type:24},wa={type:26},Bo={type:27},jc={type:28},mr={type:29},Ca={type:31},Kh={type:32},el=function(){function H(){this._value=[]}return H.prototype.write=function(P){this._value=this._value.concat(ct(P))},H.prototype.read=function(){for(var P=[],b=this.consumeToken();b!==Kh;)P.push(b),b=this.consumeToken();return P},H.prototype.consumeToken=function(){var P=this.consumeCodePoint();switch(P){case yu:return this.consumeStringToken(yu);case bh:var b=this.peekCodePoint(0),Q=this.peekCodePoint(1),q=this.peekCodePoint(2);if(os(b)||pi(Q,q)){var nt=Xs(b,Q,q)?Vl:ep,ft=this.consumeName();return{type:5,value:ft,flags:nt}}break;case ga:if(this.peekCodePoint(0)===da)return this.consumeCodePoint(),Yg;break;case jl:return this.consumeStringToken(jl);case qu:return ba;case Oa:return xu;case Vh:if(this.peekCodePoint(0)===da)return this.consumeCodePoint(),hp;break;case TA:if(uo(P,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(P),this.consumeNumericToken();break;case Po:return jh;case Vs:var St=P,Tt=this.peekCodePoint(0),Wt=this.peekCodePoint(1);if(uo(St,Tt,Wt))return this.reconsumeCodePoint(P),this.consumeNumericToken();if(Xs(St,Tt,Wt))return this.reconsumeCodePoint(P),this.consumeIdentLikeToken();if(Tt===Vs&&Wt===kh)return this.consumeCodePoint(),this.consumeCodePoint(),cp;break;case yo:if(uo(P,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(P),this.consumeNumericToken();break;case Qh:if(this.peekCodePoint(0)===Vh)for(this.consumeCodePoint();;){var $t=this.consumeCodePoint();if($t===Vh&&($t=this.consumeCodePoint(),$t===Qh))return this.consumeToken();if($t===Ko)return this.consumeToken()}break;case fi:return wa;case Wn:return Bo;case Xl:if(this.peekCodePoint(0)===Mo&&this.peekCodePoint(1)===Vs&&this.peekCodePoint(2)===Vs)return this.consumeCodePoint(),this.consumeCodePoint(),Wc;break;case $u:var me=this.peekCodePoint(0),we=this.peekCodePoint(1),Lr=this.peekCodePoint(2);if(Xs(me,we,Lr)){var ft=this.consumeName();return{type:7,value:ft}}break;case Gh:return jc;case Ss:if(pi(P,this.peekCodePoint(0)))return this.reconsumeCodePoint(P),this.consumeIdentLikeToken();break;case fr:return mr;case ma:if(this.peekCodePoint(0)===da)return this.consumeCodePoint(),Gc;break;case op:return lp;case sp:return Xh;case Wh:case Ws:var Ye=this.peekCodePoint(0),lr=this.peekCodePoint(1);return Ye===TA&&(Qa(lr)||lr===Ti)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(P),this.consumeIdentLikeToken();case ra:if(this.peekCodePoint(0)===da)return this.consumeCodePoint(),ln;if(this.peekCodePoint(0)===ra)return this.consumeCodePoint(),up;break;case bc:if(this.peekCodePoint(0)===da)return this.consumeCodePoint(),Vc;break;case Ko:return Kh}return xa(P)?(this.consumeWhiteSpace(),Ca):Ki(P)?(this.reconsumeCodePoint(P),this.consumeNumericToken()):na(P)?(this.reconsumeCodePoint(P),this.consumeIdentLikeToken()):{type:6,value:kt(P)}},H.prototype.consumeCodePoint=function(){var P=this._value.shift();return typeof P=="undefined"?-1:P},H.prototype.reconsumeCodePoint=function(P){this._value.unshift(P)},H.prototype.peekCodePoint=function(P){return P>=this._value.length?-1:this._value[P]},H.prototype.consumeUnicodeRangeToken=function(){for(var P=[],b=this.consumeCodePoint();Qa(b)&&P.length<6;)P.push(b),b=this.consumeCodePoint();for(var Q=!1;b===Ti&&P.length<6;)P.push(b),b=this.consumeCodePoint(),Q=!0;if(Q){var q=parseInt(kt.apply(void 0,P.map(function(Tt){return Tt===Ti?LA:Tt})),16),nt=parseInt(kt.apply(void 0,P.map(function(Tt){return Tt===Ti?Ls:Tt})),16);return{type:30,start:q,end:nt}}var ft=parseInt(kt.apply(void 0,P),16);if(this.peekCodePoint(0)===Vs&&Qa(this.peekCodePoint(1))){this.consumeCodePoint(),b=this.consumeCodePoint();for(var St=[];Qa(b)&&St.length<6;)St.push(b),b=this.consumeCodePoint();var nt=parseInt(kt.apply(void 0,St),16);return{type:30,start:ft,end:nt}}else return{type:30,start:ft,end:ft}},H.prototype.consumeIdentLikeToken=function(){var P=this.consumeName();return P.toLowerCase()==="url"&&this.peekCodePoint(0)===qu?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===qu?(this.consumeCodePoint(),{type:19,value:P}):{type:20,value:P}},H.prototype.consumeUrlToken=function(){var P=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ko)return{type:22,value:""};var b=this.peekCodePoint(0);if(b===jl||b===yu){var Q=this.consumeStringToken(this.consumeCodePoint());return Q.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ko||this.peekCodePoint(0)===Oa)?(this.consumeCodePoint(),{type:22,value:Q.value}):(this.consumeBadUrlRemnants(),Zo)}for(;;){var q=this.consumeCodePoint();if(q===Ko||q===Oa)return{type:22,value:kt.apply(void 0,P)};if(xa(q))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ko||this.peekCodePoint(0)===Oa?(this.consumeCodePoint(),{type:22,value:kt.apply(void 0,P)}):(this.consumeBadUrlRemnants(),Zo);if(q===yu||q===jl||q===qu||Xr(q))return this.consumeBadUrlRemnants(),Zo;if(q===Ss)if(pi(q,this.peekCodePoint(0)))P.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Zo;else P.push(q)}},H.prototype.consumeWhiteSpace=function(){for(;xa(this.peekCodePoint(0));)this.consumeCodePoint()},H.prototype.consumeBadUrlRemnants=function(){for(;;){var P=this.consumeCodePoint();if(P===Oa||P===Ko)return;pi(P,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},H.prototype.consumeStringSlice=function(P){for(var b=5e4,Q="";P>0;){var q=Math.min(b,P);Q+=kt.apply(void 0,this._value.splice(0,q)),P-=q}return this._value.shift(),Q},H.prototype.consumeStringToken=function(P){var b="",Q=0;do{var q=this._value[Q];if(q===Ko||q===void 0||q===P)return b+=this.consumeStringSlice(Q),{type:0,value:b};if(q===Wl)return this._value.splice(0,Q),Er;if(q===Ss){var nt=this._value[Q+1];nt!==Ko&&nt!==void 0&&(nt===Wl?(b+=this.consumeStringSlice(Q),Q=-1,this._value.shift()):pi(q,nt)&&(b+=this.consumeStringSlice(Q),b+=kt(this.consumeEscapedCodePoint()),Q=-1))}Q++}while(!0)},H.prototype.consumeNumber=function(){var P=[],b=is,Q=this.peekCodePoint(0);for((Q===TA||Q===Vs)&&P.push(this.consumeCodePoint());Ki(this.peekCodePoint(0));)P.push(this.consumeCodePoint());Q=this.peekCodePoint(0);var q=this.peekCodePoint(1);if(Q===yo&&Ki(q))for(P.push(this.consumeCodePoint(),this.consumeCodePoint()),b=zh;Ki(this.peekCodePoint(0));)P.push(this.consumeCodePoint());Q=this.peekCodePoint(0),q=this.peekCodePoint(1);var nt=this.peekCodePoint(2);if((Q===Yo||Q===Xg)&&((q===TA||q===Vs)&&Ki(nt)||Ki(q)))for(P.push(this.consumeCodePoint(),this.consumeCodePoint()),b=zh;Ki(this.peekCodePoint(0));)P.push(this.consumeCodePoint());return[_o(P),b]},H.prototype.consumeNumericToken=function(){var P=this.consumeNumber(),b=P[0],Q=P[1],q=this.peekCodePoint(0),nt=this.peekCodePoint(1),ft=this.peekCodePoint(2);if(Xs(q,nt,ft)){var St=this.consumeName();return{type:15,number:b,flags:Q,unit:St}}return q===np?(this.consumeCodePoint(),{type:16,number:b,flags:Q}):{type:17,number:b,flags:Q}},H.prototype.consumeEscapedCodePoint=function(){var P=this.consumeCodePoint();if(Qa(P)){for(var b=kt(P);Qa(this.peekCodePoint(0))&&b.length<6;)b+=kt(this.consumeCodePoint());xa(this.peekCodePoint(0))&&this.consumeCodePoint();var Q=parseInt(b,16);return Q===0||ya(Q)||Q>1114111?kc:Q}return P===Ko?kc:P},H.prototype.consumeName=function(){for(var P="";;){var b=this.consumeCodePoint();if(os(b))P+=kt(b);else if(pi(b,this.peekCodePoint(0)))P+=kt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(b),P}},H}(),Zl=function(){function H(P){this._tokens=P}return H.create=function(P){var b=new el;return b.write(P),new H(b.read())},H.parseValue=function(P){return H.create(P).parseComponentValue()},H.parseValues=function(P){return H.create(P).parseComponentValues()},H.prototype.parseComponentValue=function(){for(var P=this.consumeToken();P.type===31;)P=this.consumeToken();if(P.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(P);var b=this.consumeComponentValue();do P=this.consumeToken();while(P.type===31);if(P.type===32)return b;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},H.prototype.parseComponentValues=function(){for(var P=[];;){var b=this.consumeComponentValue();if(b.type===32)return P;P.push(b),P.push()}},H.prototype.consumeComponentValue=function(){var P=this.consumeToken();switch(P.type){case 11:case 28:case 2:return this.consumeSimpleBlock(P.type);case 19:return this.consumeFunction(P)}return P},H.prototype.consumeSimpleBlock=function(P){for(var b={type:P,values:[]},Q=this.consumeToken();;){if(Q.type===32||Zg(Q,P))return b;this.reconsumeToken(Q),b.values.push(this.consumeComponentValue()),Q=this.consumeToken()}},H.prototype.consumeFunction=function(P){for(var b={name:P.value,values:[],type:18};;){var Q=this.consumeToken();if(Q.type===32||Q.type===3)return b;this.reconsumeToken(Q),b.values.push(this.consumeComponentValue())}},H.prototype.consumeToken=function(){var P=this._tokens.shift();return typeof P=="undefined"?Kh:P},H.prototype.reconsumeToken=function(P){this._tokens.unshift(P)},H}(),wu=function(H){return H.type===15},RA=function(H){return H.type===17},di=function(H){return H.type===20},Cu=function(H){return H.type===0},eo=function(H,P){return di(H)&&H.value===P},Yh=function(H){return H.type!==31},Jl=function(H){return H.type!==31&&H.type!==4},Ks=function(H){var P=[],b=[];return H.forEach(function(Q){if(Q.type===4){if(b.length===0)throw new Error("Error parsing function args, zero tokens for arg");P.push(b),b=[];return}Q.type!==31&&b.push(Q)}),b.length&&P.push(b),P},Zg=function(H,P){return P===11&&H.type===12||P===28&&H.type===29?!0:P===2&&H.type===3},YA=function(H){return H.type===17||H.type===15},Uo=function(H){return H.type===16||YA(H)},Mu=function(H){return H.length>1?[H[0],H[1]]:[H[0]]},Zn={type:17,number:0,flags:is},rl={type:16,number:50,flags:is},_u={type:16,number:100,flags:is},ia=function(H,P,b){var Q=H[0],q=H[1];return[ji(Q,P),ji(typeof q!="undefined"?q:Q,b)]},ji=function(H,P){if(H.type===16)return H.number/100*P;if(wu(H))switch(H.unit){case"rem":case"em":return 16*H.number;case"px":default:return H.number}return H.number},ql="deg",Xc="grad",Kc="rad",$l="turn",nl={name:"angle",parse:function(H,P){if(P.type===15)switch(P.unit){case ql:return Math.PI*P.number/180;case Xc:return Math.PI/200*P.number;case Kc:return P.number;case $l:return Math.PI*2*P.number}throw new Error("Unsupported angle type")}},Zh=function(H){return H.type===15&&(H.unit===ql||H.unit===Xc||H.unit===Kc||H.unit===$l)},Fd=function(H){var P=H.filter(di).map(function(b){return b.value}).join(" ");switch(P){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Zn,Zn];case"to top":case"bottom":return Go(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Zn,_u];case"to right":case"left":return Go(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[_u,_u];case"to bottom":case"top":return Go(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[_u,Zn];case"to left":case"right":return Go(270)}return 0},Go=function(H){return Math.PI*H/180},ss={name:"color",parse:function(H,P){if(P.type===18){var b=Zc[P.name];if(typeof b=="undefined")throw new Error('Attempting to parse an unsupported color function "'+P.name+'"');return b(H,P.values)}if(P.type===5){if(P.value.length===3){var Q=P.value.substring(0,1),q=P.value.substring(1,2),nt=P.value.substring(2,3);return Ma(parseInt(Q+Q,16),parseInt(q+q,16),parseInt(nt+nt,16),1)}if(P.value.length===4){var Q=P.value.substring(0,1),q=P.value.substring(1,2),nt=P.value.substring(2,3),ft=P.value.substring(3,4);return Ma(parseInt(Q+Q,16),parseInt(q+q,16),parseInt(nt+nt,16),parseInt(ft+ft,16)/255)}if(P.value.length===6){var Q=P.value.substring(0,2),q=P.value.substring(2,4),nt=P.value.substring(4,6);return Ma(parseInt(Q,16),parseInt(q,16),parseInt(nt,16),1)}if(P.value.length===8){var Q=P.value.substring(0,2),q=P.value.substring(2,4),nt=P.value.substring(4,6),ft=P.value.substring(6,8);return Ma(parseInt(Q,16),parseInt(q,16),parseInt(nt,16),parseInt(ft,16)/255)}}if(P.type===20){var St=oa[P.value.toUpperCase()];if(typeof St!="undefined")return St}return oa.TRANSPARENT}},Bu=function(H){return(255&H)==0},Eo=function(H){var P=255&H,b=255&H>>8,Q=255&H>>16,q=255&H>>24;return P<255?"rgba("+q+","+Q+","+b+","+P/255+")":"rgb("+q+","+Q+","+b+")"},Ma=function(H,P,b,Q){return(H<<24|P<<16|b<<8|Math.round(Q*255)<<0)>>>0},Yc=function(H,P){if(H.type===17)return H.number;if(H.type===16){var b=P===3?1:255;return P===3?H.number/100*b:Math.round(H.number/100*b)}return 0},il=function(H,P){var b=P.filter(Jl);if(b.length===3){var Q=b.map(Yc),q=Q[0],nt=Q[1],ft=Q[2];return Ma(q,nt,ft,1)}if(b.length===4){var St=b.map(Yc),q=St[0],nt=St[1],ft=St[2],Tt=St[3];return Ma(q,nt,ft,Tt)}return 0};function th(H,P,b){return b<0&&(b+=1),b>=1&&(b-=1),b<1/6?(P-H)*b*6+H:b<1/2?P:b<2/3?(P-H)*6*(2/3-b)+H:H}var Jh=function(H,P){var b=P.filter(Jl),Q=b[0],q=b[1],nt=b[2],ft=b[3],St=(Q.type===17?Go(Q.number):nl.parse(H,Q))/(Math.PI*2),Tt=Uo(q)?q.number/100:0,Wt=Uo(nt)?nt.number/100:0,$t=typeof ft!="undefined"&&Uo(ft)?ji(ft,1):1;if(Tt===0)return Ma(Wt*255,Wt*255,Wt*255,1);var me=Wt<=.5?Wt*(Tt+1):Wt+Tt-Wt*Tt,we=Wt*2-me,Lr=th(we,me,St+1/3),Ye=th(we,me,St),lr=th(we,me,St-1/3);return Ma(Lr*255,Ye*255,lr*255,$t)},Zc={hsl:Jh,hsla:Jh,rgb:il,rgba:il},ZA=function(H,P){return ss.parse(H,Zl.create(P).parseComponentValue())},oa={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Eu={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(H,P){return P.map(function(b){if(di(b))switch(b.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Jg={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ol=function(H,P){var b=ss.parse(H,P[0]),Q=P[1];return Q&&Uo(Q)?{color:b,stop:Q}:{color:b,stop:null}},ka=function(H,P){var b=H[0],Q=H[H.length-1];b.stop===null&&(b.stop=Zn),Q.stop===null&&(Q.stop=_u);for(var q=[],nt=0,ft=0;ft<H.length;ft++){var St=H[ft].stop;if(St!==null){var Tt=ji(St,P);Tt>nt?q.push(Tt):q.push(nt),nt=Tt}else q.push(null)}for(var Wt=null,ft=0;ft<q.length;ft++){var $t=q[ft];if($t===null)Wt===null&&(Wt=ft);else if(Wt!==null){for(var me=ft-Wt,we=q[Wt-1],Lr=($t-we)/(me+1),Ye=1;Ye<=me;Ye++)q[Wt+Ye-1]=Lr*Ye;Wt=null}}return H.map(function(lr,mn){var Ar=lr.color;return{color:Ar,stop:Math.max(Math.min(1,q[mn]/P),0)}})},Iu=function(H,P,b){var Q=P/2,q=b/2,nt=ji(H[0],P)-Q,ft=q-ji(H[1],b);return(Math.atan2(ft,nt)+Math.PI*2)%(Math.PI*2)},Fs=function(H,P,b){var Q=typeof H=="number"?H:Iu(H,P,b),q=Math.abs(P*Math.sin(Q))+Math.abs(b*Math.cos(Q)),nt=P/2,ft=b/2,St=q/2,Tt=Math.sin(Q-Math.PI/2)*St,Wt=Math.cos(Q-Math.PI/2)*St;return[q,nt-Wt,nt+Wt,ft-Tt,ft+Tt]},Rs=function(H,P){return Math.sqrt(H*H+P*P)},sl=function(H,P,b,Q,q){var nt=[[0,0],[0,P],[H,0],[H,P]];return nt.reduce(function(ft,St){var Tt=St[0],Wt=St[1],$t=Rs(b-Tt,Q-Wt);return(q?$t<ft.optimumDistance:$t>ft.optimumDistance)?{optimumCorner:St,optimumDistance:$t}:ft},{optimumDistance:q?Infinity:-Infinity,optimumCorner:null}).optimumCorner},gs=function(H,P,b,Q,q){var nt=0,ft=0;switch(H.size){case 0:H.shape===0?nt=ft=Math.min(Math.abs(P),Math.abs(P-Q),Math.abs(b),Math.abs(b-q)):H.shape===1&&(nt=Math.min(Math.abs(P),Math.abs(P-Q)),ft=Math.min(Math.abs(b),Math.abs(b-q)));break;case 2:if(H.shape===0)nt=ft=Math.min(Rs(P,b),Rs(P,b-q),Rs(P-Q,b),Rs(P-Q,b-q));else if(H.shape===1){var St=Math.min(Math.abs(b),Math.abs(b-q))/Math.min(Math.abs(P),Math.abs(P-Q)),Tt=sl(Q,q,P,b,!0),Wt=Tt[0],$t=Tt[1];nt=Rs(Wt-P,($t-b)/St),ft=St*nt}break;case 1:H.shape===0?nt=ft=Math.max(Math.abs(P),Math.abs(P-Q),Math.abs(b),Math.abs(b-q)):H.shape===1&&(nt=Math.max(Math.abs(P),Math.abs(P-Q)),ft=Math.max(Math.abs(b),Math.abs(b-q)));break;case 3:if(H.shape===0)nt=ft=Math.max(Rs(P,b),Rs(P,b-q),Rs(P-Q,b),Rs(P-Q,b-q));else if(H.shape===1){var St=Math.max(Math.abs(b),Math.abs(b-q))/Math.max(Math.abs(P),Math.abs(P-Q)),me=sl(Q,q,P,b,!1),Wt=me[0],$t=me[1];nt=Rs(Wt-P,($t-b)/St),ft=St*nt}break}return Array.isArray(H.size)&&(nt=ji(H.size[0],Q),ft=H.size.length===2?ji(H.size[1],q):nt),[nt,ft]},eh=function(H,P){var b=Go(180),Q=[];return Ks(P).forEach(function(q,nt){if(nt===0){var ft=q[0];if(ft.type===20&&ft.value==="to"){b=Fd(q);return}else if(Zh(ft)){b=nl.parse(H,ft);return}}var St=ol(H,q);Q.push(St)}),{angle:b,stops:Q,type:1}},al=function(H,P){var b=Go(180),Q=[];return Ks(P).forEach(function(q,nt){if(nt===0){var ft=q[0];if(ft.type===20&&["top","left","right","bottom"].indexOf(ft.value)!==-1){b=Fd(q);return}else if(Zh(ft)){b=(nl.parse(H,ft)+Go(270))%Go(360);return}}var St=ol(H,q);Q.push(St)}),{angle:b,stops:Q,type:1}},ms=function(H,P){var b=Go(180),Q=[],q=1,nt=0,ft=3,St=[];return Ks(P).forEach(function(Tt,Wt){var $t=Tt[0];if(Wt===0){if(di($t)&&$t.value==="linear"){q=1;return}else if(di($t)&&$t.value==="radial"){q=2;return}}if($t.type===18){if($t.name==="from"){var me=ss.parse(H,$t.values[0]);Q.push({stop:Zn,color:me})}else if($t.name==="to"){var me=ss.parse(H,$t.values[0]);Q.push({stop:_u,color:me})}else if($t.name==="color-stop"){var we=$t.values.filter(Jl);if(we.length===2){var me=ss.parse(H,we[1]),Lr=we[0];RA(Lr)&&Q.push({stop:{type:16,number:Lr.number*100,flags:Lr.flags},color:me})}}}}),q===1?{angle:(b+Go(180))%Go(360),stops:Q,type:q}:{size:ft,shape:nt,stops:Q,position:St,type:q}},Ys="closest-side",_a="farthest-side",Ps="closest-corner",oA="farthest-corner",Tu="circle",Su="ellipse",Lu="cover",Zs="contain",Jc=function(H,P){var b=0,Q=3,q=[],nt=[];return Ks(P).forEach(function(ft,St){var Tt=!0;if(St===0){var Wt=!1;Tt=ft.reduce(function(me,we){if(Wt)if(di(we))switch(we.value){case"center":return nt.push(rl),me;case"top":case"left":return nt.push(Zn),me;case"right":case"bottom":return nt.push(_u),me}else(Uo(we)||YA(we))&&nt.push(we);else if(di(we))switch(we.value){case Tu:return b=0,!1;case Su:return b=1,!1;case"at":return Wt=!0,!1;case Ys:return Q=0,!1;case Lu:case _a:return Q=1,!1;case Zs:case Ps:return Q=2,!1;case oA:return Q=3,!1}else if(YA(we)||Uo(we))return Array.isArray(Q)||(Q=[]),Q.push(we),!1;return me},Tt)}if(Tt){var $t=ol(H,ft);q.push($t)}}),{size:Q,shape:b,stops:q,position:nt,type:2}},JA=function(H,P){var b=0,Q=3,q=[],nt=[];return Ks(P).forEach(function(ft,St){var Tt=!0;if(St===0?Tt=ft.reduce(function($t,me){if(di(me))switch(me.value){case"center":return nt.push(rl),!1;case"top":case"left":return nt.push(Zn),!1;case"right":case"bottom":return nt.push(_u),!1}else if(Uo(me)||YA(me))return nt.push(me),!1;return $t},Tt):St===1&&(Tt=ft.reduce(function($t,me){if(di(me))switch(me.value){case Tu:return b=0,!1;case Su:return b=1,!1;case Zs:case Ys:return Q=0,!1;case _a:return Q=1,!1;case Ps:return Q=2,!1;case Lu:case oA:return Q=3,!1}else if(YA(me)||Uo(me))return Array.isArray(Q)||(Q=[]),Q.push(me),!1;return $t},Tt)),Tt){var Wt=ol(H,ft);q.push(Wt)}}),{size:Q,shape:b,stops:q,position:nt,type:2}},fp=function(H){return H.type===1},Js=function(H){return H.type===2},qh={name:"image",parse:function(H,P){if(P.type===22){var b={url:P.value,type:0};return H.cache.addImage(P.value),b}if(P.type===18){var Q=Al[P.name];if(typeof Q=="undefined")throw new Error('Attempting to parse an unsupported image function "'+P.name+'"');return Q(H,P.values)}throw new Error("Unsupported image type "+P.type)}};function pp(H){return!(H.type===20&&H.value==="none")&&(H.type!==18||!!Al[H.name])}var Al={"linear-gradient":eh,"-moz-linear-gradient":al,"-ms-linear-gradient":al,"-o-linear-gradient":al,"-webkit-linear-gradient":al,"radial-gradient":Jc,"-moz-radial-gradient":JA,"-ms-radial-gradient":JA,"-o-radial-gradient":JA,"-webkit-radial-gradient":JA,"-webkit-gradient":ms},dp={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(H,P){if(P.length===0)return[];var b=P[0];return b.type===20&&b.value==="none"?[]:P.filter(function(Q){return Jl(Q)&&pp(Q)}).map(function(Q){return qh.parse(H,Q)})}},$h={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(H,P){return P.map(function(b){if(di(b))switch(b.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},gp={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(H,P){return Ks(P).map(function(b){return b.filter(Uo)}).map(Mu)}},rh={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(H,P){return Ks(P).map(function(b){return b.filter(di).map(function(Q){return Q.value}).join(" ")}).map(sA)}},sA=function(H){switch(H){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},qA;(function(H){H.AUTO="auto",H.CONTAIN="contain",H.COVER="cover"})(qA||(qA={}));var qg={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(H,P){return Ks(P).map(function(b){return b.filter(nh)})}},nh=function(H){return di(H)||Uo(H)},Mn=function(H){return{name:"border-"+H+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Ba=Mn("top"),on=Mn("right"),$g=Mn("bottom"),tm=Mn("left"),Fu=function(H){return{name:"border-radius-"+H,initialValue:"0 0",prefix:!1,type:1,parse:function(P,b){return Mu(b.filter(Uo))}}},Rd=Fu("top-left"),qc=Fu("top-right"),fn=Fu("bottom-right"),aA=Fu("bottom-left"),ul=function(H){return{name:"border-"+H+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(P,b){switch(b){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},tn=ul("top"),sa=ul("right"),em=ul("bottom"),ll=ul("left"),hl=function(H){return{name:"border-"+H+"-width",initialValue:"0",type:0,prefix:!1,parse:function(P,b){return wu(b)?b.number:0}}},$A=hl("top"),Ga=hl("right"),Va=hl("bottom"),AA=hl("left"),tu={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Wa={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(H,P){switch(P){case"rtl":return 1;case"ltr":default:return 0}}},aa={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(H,P){return P.filter(di).reduce(function(b,Q){return b|cl(Q.value)},0)}},cl=function(H){switch(H){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ni={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(H,P){switch(P){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},fl={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(H,P){return P.type===20&&P.value==="normal"?0:P.type===17||P.type===15?P.number:0}},Yi;(function(H){H.NORMAL="normal",H.STRICT="strict"})(Yi||(Yi={}));var mp={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(H,P){switch(P){case"strict":return Yi.STRICT;case"normal":default:return Yi.NORMAL}}},PA={name:"line-height",initialValue:"normal",prefix:!1,type:4},$c=function(H,P){return di(H)&&H.value==="normal"?1.2*P:H.type===17?P*H.number:Uo(H)?ji(H,P):P},tf={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(H,P){return P.type===20&&P.value==="none"?null:qh.parse(H,P)}},Pd={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(H,P){switch(P){case"inside":return 0;case"outside":default:return 1}}},eu={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(H,P){switch(P){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ea=function(H){return{name:"margin-"+H,initialValue:"0",prefix:!1,type:4}},Ud=Ea("top"),Fn=Ea("right"),Dd=Ea("bottom"),Od=Ea("left"),Hd={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(H,P){return P.filter(di).map(function(b){switch(b.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},uA={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(H,P){switch(P){case"break-word":return"break-word";case"normal":default:return"normal"}}},ih=function(H){return{name:"padding-"+H,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},vp=ih("top"),Nd=ih("right"),oh=ih("bottom"),ja=ih("left"),rm={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(H,P){switch(P){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},nm={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(H,P){switch(P){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},im={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(H,P){return P.length===1&&eo(P[0],"none")?[]:Ks(P).map(function(b){for(var Q={color:oa.TRANSPARENT,offsetX:Zn,offsetY:Zn,blur:Zn},q=0,nt=0;nt<b.length;nt++){var ft=b[nt];YA(ft)?(q===0?Q.offsetX=ft:q===1?Q.offsetY=ft:Q.blur=ft,q++):Q.color=ss.parse(H,ft)}return Q})}},tc={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(H,P){switch(P){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Io={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(H,P){if(P.type===20&&P.value==="none")return null;if(P.type===18){var b=Ru[P.name];if(typeof b=="undefined")throw new Error('Attempting to parse an unsupported transform function "'+P.name+'"');return b(P.values)}return null}},ec=function(H){var P=H.filter(function(b){return b.type===17}).map(function(b){return b.number});return P.length===6?P:null},rc=function(H){var P=H.filter(function(Tt){return Tt.type===17}).map(function(Tt){return Tt.number}),b=P[0],Q=P[1];P[2],P[3];var q=P[4],nt=P[5];P[6],P[7],P[8],P[9],P[10],P[11];var ft=P[12],St=P[13];return P[14],P[15],P.length===16?[b,Q,q,nt,ft,St]:null},Ru={matrix:ec,matrix3d:rc},zd={type:16,number:50,flags:is},ru=[zd,zd],Ia={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(H,P){var b=P.filter(Uo);return b.length!==2?ru:[b[0],b[1]]}},yp={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(H,P){switch(P){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},sh;(function(H){H.NORMAL="normal",H.BREAK_ALL="break-all",H.KEEP_ALL="keep-all"})(sh||(sh={}));for(var xp={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(H,P){switch(P){case"break-all":return sh.BREAK_ALL;case"keep-all":return sh.KEEP_ALL;case"normal":default:return sh.NORMAL}}},as={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(H,P){if(P.type===20)return{auto:!0,order:0};if(RA(P))return{auto:!1,order:P.number};throw new Error("Invalid z-index number parsed")}},Qd={name:"time",parse:function(H,P){if(P.type===15)switch(P.unit.toLowerCase()){case"s":return 1e3*P.number;case"ms":return P.number}throw new Error("Unsupported time type")}},wp={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(H,P){return RA(P)?P.number:1}},Pu={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Cp={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(H,P){return P.filter(di).map(function(b){switch(b.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(b){return b!==0})}},nc={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(H,P){var b=[],Q=[];return P.forEach(function(q){switch(q.type){case 20:case 0:b.push(q.value);break;case 17:b.push(q.number.toString());break;case 4:Q.push(b.join(" ")),b.length=0;break}}),b.length&&Q.push(b.join(" ")),Q.map(function(q){return q.indexOf(" ")===-1?q:"'"+q+"'"})}},bd={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ah={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(H,P){if(RA(P))return P.number;if(di(P))switch(P.value){case"bold":return 700;case"normal":default:return 400}return 400}},kd={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(H,P){return P.filter(di).map(function(b){return b.value})}},Mp={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(H,P){switch(P){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},lo=function(H,P){return(H&P)!=0},ef={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(H,P){if(P.length===0)return[];var b=P[0];return b.type===20&&b.value==="none"?[]:P}},Gd={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(H,P){if(P.length===0)return null;var b=P[0];if(b.type===20&&b.value==="none")return null;for(var Q=[],q=P.filter(Yh),nt=0;nt<q.length;nt++){var ft=q[nt],St=q[nt+1];if(ft.type===20){var Tt=St&&RA(St)?St.number:1;Q.push({counter:ft.value,increment:Tt})}}return Q}},Ta={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(H,P){if(P.length===0)return[];for(var b=[],Q=P.filter(Yh),q=0;q<Q.length;q++){var nt=Q[q],ft=Q[q+1];if(di(nt)&&nt.value!=="none"){var St=ft&&RA(ft)?ft.number:0;b.push({counter:nt.value,reset:St})}}return b}},Uu={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(H,P){return P.filter(wu).map(function(b){return Qd.parse(H,b)})}},UA={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(H,P){if(P.length===0)return null;var b=P[0];if(b.type===20&&b.value==="none")return null;var Q=[],q=P.filter(Cu);if(q.length%2!=0)return null;for(var nt=0;nt<q.length;nt+=2){var ft=q[nt].value,St=q[nt+1].value;Q.push({open:ft,close:St})}return Q}},pl=function(H,P,b){if(!H)return"";var Q=H[Math.min(P,H.length-1)];return Q?b?Q.open:Q.close:""},rf={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(H,P){return P.length===1&&eo(P[0],"none")?[]:Ks(P).map(function(b){for(var Q={color:255,offsetX:Zn,offsetY:Zn,blur:Zn,spread:Zn,inset:!1},q=0,nt=0;nt<b.length;nt++){var ft=b[nt];eo(ft,"inset")?Q.inset=!0:YA(ft)?(q===0?Q.offsetX=ft:q===1?Q.offsetY=ft:q===2?Q.blur=ft:Q.spread=ft,q++):Q.color=ss.parse(H,ft)}return Q})}},dl={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(H,P){var b=[0,1,2],Q=[];return P.filter(di).forEach(function(q){switch(q.value){case"stroke":Q.push(1);break;case"fill":Q.push(0);break;case"markers":Q.push(2);break}}),b.forEach(function(q){Q.indexOf(q)===-1&&Q.push(q)}),Q}},nf={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Do={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(H,P){return wu(P)?P.number:0}},gl=function(){function H(P,b){var Q,q;this.animationDuration=nr(P,Uu,b.animationDuration),this.backgroundClip=nr(P,Eu,b.backgroundClip),this.backgroundColor=nr(P,Jg,b.backgroundColor),this.backgroundImage=nr(P,dp,b.backgroundImage),this.backgroundOrigin=nr(P,$h,b.backgroundOrigin),this.backgroundPosition=nr(P,gp,b.backgroundPosition),this.backgroundRepeat=nr(P,rh,b.backgroundRepeat),this.backgroundSize=nr(P,qg,b.backgroundSize),this.borderTopColor=nr(P,Ba,b.borderTopColor),this.borderRightColor=nr(P,on,b.borderRightColor),this.borderBottomColor=nr(P,$g,b.borderBottomColor),this.borderLeftColor=nr(P,tm,b.borderLeftColor),this.borderTopLeftRadius=nr(P,Rd,b.borderTopLeftRadius),this.borderTopRightRadius=nr(P,qc,b.borderTopRightRadius),this.borderBottomRightRadius=nr(P,fn,b.borderBottomRightRadius),this.borderBottomLeftRadius=nr(P,aA,b.borderBottomLeftRadius),this.borderTopStyle=nr(P,tn,b.borderTopStyle),this.borderRightStyle=nr(P,sa,b.borderRightStyle),this.borderBottomStyle=nr(P,em,b.borderBottomStyle),this.borderLeftStyle=nr(P,ll,b.borderLeftStyle),this.borderTopWidth=nr(P,$A,b.borderTopWidth),this.borderRightWidth=nr(P,Ga,b.borderRightWidth),this.borderBottomWidth=nr(P,Va,b.borderBottomWidth),this.borderLeftWidth=nr(P,AA,b.borderLeftWidth),this.boxShadow=nr(P,rf,b.boxShadow),this.color=nr(P,tu,b.color),this.direction=nr(P,Wa,b.direction),this.display=nr(P,aa,b.display),this.float=nr(P,ni,b.cssFloat),this.fontFamily=nr(P,nc,b.fontFamily),this.fontSize=nr(P,bd,b.fontSize),this.fontStyle=nr(P,Mp,b.fontStyle),this.fontVariant=nr(P,kd,b.fontVariant),this.fontWeight=nr(P,ah,b.fontWeight),this.letterSpacing=nr(P,fl,b.letterSpacing),this.lineBreak=nr(P,mp,b.lineBreak),this.lineHeight=nr(P,PA,b.lineHeight),this.listStyleImage=nr(P,tf,b.listStyleImage),this.listStylePosition=nr(P,Pd,b.listStylePosition),this.listStyleType=nr(P,eu,b.listStyleType),this.marginTop=nr(P,Ud,b.marginTop),this.marginRight=nr(P,Fn,b.marginRight),this.marginBottom=nr(P,Dd,b.marginBottom),this.marginLeft=nr(P,Od,b.marginLeft),this.opacity=nr(P,wp,b.opacity);var nt=nr(P,Hd,b.overflow);this.overflowX=nt[0],this.overflowY=nt[nt.length>1?1:0],this.overflowWrap=nr(P,uA,b.overflowWrap),this.paddingTop=nr(P,vp,b.paddingTop),this.paddingRight=nr(P,Nd,b.paddingRight),this.paddingBottom=nr(P,oh,b.paddingBottom),this.paddingLeft=nr(P,ja,b.paddingLeft),this.paintOrder=nr(P,dl,b.paintOrder),this.position=nr(P,nm,b.position),this.textAlign=nr(P,rm,b.textAlign),this.textDecorationColor=nr(P,Pu,(Q=b.textDecorationColor)!==null&&Q!==void 0?Q:b.color),this.textDecorationLine=nr(P,Cp,(q=b.textDecorationLine)!==null&&q!==void 0?q:b.textDecoration),this.textShadow=nr(P,im,b.textShadow),this.textTransform=nr(P,tc,b.textTransform),this.transform=nr(P,Io,b.transform),this.transformOrigin=nr(P,Ia,b.transformOrigin),this.visibility=nr(P,yp,b.visibility),this.webkitTextStrokeColor=nr(P,nf,b.webkitTextStrokeColor),this.webkitTextStrokeWidth=nr(P,Do,b.webkitTextStrokeWidth),this.wordBreak=nr(P,xp,b.wordBreak),this.zIndex=nr(P,as,b.zIndex)}return H.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},H.prototype.isTransparent=function(){return Bu(this.backgroundColor)},H.prototype.isTransformed=function(){return this.transform!==null},H.prototype.isPositioned=function(){return this.position!==0},H.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},H.prototype.isFloating=function(){return this.float!==0},H.prototype.isInlineLevel=function(){return lo(this.display,4)||lo(this.display,33554432)||lo(this.display,268435456)||lo(this.display,536870912)||lo(this.display,67108864)||lo(this.display,134217728)},H}(),ml=function(){function H(P,b){this.content=nr(P,ef,b.content),this.quotes=nr(P,UA,b.quotes)}return H}(),vs=function(){function H(P,b){this.counterIncrement=nr(P,Gd,b.counterIncrement),this.counterReset=nr(P,Ta,b.counterReset)}return H}(),nr=function(H,P,b){var Q=new el,q=b!==null&&typeof b!="undefined"?b.toString():P.initialValue;Q.write(q);var nt=new Zl(Q.read());switch(P.type){case 2:var ft=nt.parseComponentValue();return P.parse(H,di(ft)?ft.value:P.initialValue);case 0:return P.parse(H,nt.parseComponentValue());case 1:return P.parse(H,nt.parseComponentValues());case 4:return nt.parseComponentValue();case 3:switch(P.format){case"angle":return nl.parse(H,nt.parseComponentValue());case"color":return ss.parse(H,nt.parseComponentValue());case"image":return qh.parse(H,nt.parseComponentValue());case"length":var St=nt.parseComponentValue();return YA(St)?St:Zn;case"length-percentage":var Tt=nt.parseComponentValue();return Uo(Tt)?Tt:Zn;case"time":return Qd.parse(H,nt.parseComponentValue())}break}},_p="data-html2canvas-debug",Vd=function(H){var P=H.getAttribute(_p);switch(P){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},DA=function(H,P){var b=Vd(H);return b===1||P===b},Xa=function(){function H(P,b){if(this.context=P,this.textNodes=[],this.elements=[],this.flags=0,DA(b,3))debugger;this.styles=new gl(P,window.getComputedStyle(b,null)),df(b)&&(this.styles.animationDuration.some(function(Q){return Q>0})&&(b.style.animationDuration="0s"),this.styles.transform!==null&&(b.style.transform="none")),this.bounds=ue(this.context,b),DA(b,4)&&(this.flags|=16)}return H}(),Aa="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",OA=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),ic=0;ic<of.length;ic++)OA[of.charCodeAt(ic)]=ic;for(var om=function(H){var P=H.length*.75,b=H.length,Q,q=0,nt,ft,St,Tt;H[H.length-1]==="="&&(P--,H[H.length-2]==="="&&P--);var Wt=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint8Array.prototype.slice!="undefined"?new ArrayBuffer(P):new Array(P),$t=Array.isArray(Wt)?Wt:new Uint8Array(Wt);for(Q=0;Q<b;Q+=4)nt=OA[H.charCodeAt(Q)],ft=OA[H.charCodeAt(Q+1)],St=OA[H.charCodeAt(Q+2)],Tt=OA[H.charCodeAt(Q+3)],$t[q++]=nt<<2|ft>>4,$t[q++]=(ft&15)<<4|St>>2,$t[q++]=(St&3)<<6|Tt&63;return Wt},sm=function(H){for(var P=H.length,b=[],Q=0;Q<P;Q+=2)b.push(H[Q+1]<<8|H[Q]);return b},ys=function(H){for(var P=H.length,b=[],Q=0;Q<P;Q+=4)b.push(H[Q+3]<<24|H[Q+2]<<16|H[Q+1]<<8|H[Q]);return b},vl=5,ho=6+5,co=2,Wd=ho-vl,As=65536>>vl,To=1<<vl,Tn=To-1,_n=1024>>vl,Jn=As+_n,Ah=Jn,xs=2048>>6,ro=Ah+xs,Us=65536>>ho,Ds=1<<Wd,Sa=Ds-1,Os=function(H,P,b){return H.slice?H.slice(P,b):new Uint16Array(Array.prototype.slice.call(H,P,b))},Bp=function(H,P,b){return H.slice?H.slice(P,b):new Uint32Array(Array.prototype.slice.call(H,P,b))},Ep=function(H,P){var b=om(H),Q=Array.isArray(b)?ys(b):new Uint32Array(b),q=Array.isArray(b)?sm(b):new Uint16Array(b),nt=24,ft=Os(q,nt/2,Q[4]/2),St=Q[5]===2?Os(q,(nt+Q[4])/2):Bp(Q,Math.ceil((nt+Q[4])/4));return new sf(Q[0],Q[1],Q[2],Q[3],ft,St)},sf=function(){function H(P,b,Q,q,nt,ft){this.initialValue=P,this.errorValue=b,this.highStart=Q,this.highValueIndex=q,this.index=nt,this.data=ft}return H.prototype.get=function(P){var b;if(P>=0){if(P<55296||P>56319&&P<=65535)return b=this.index[P>>vl],b=(b<<co)+(P&Tn),this.data[b];if(P<=65535)return b=this.index[As+(P-55296>>vl)],b=(b<<co)+(P&Tn),this.data[b];if(P<this.highStart)return b=ro-Us+(P>>ho),b=this.index[b],b+=P>>vl&Sa,b=this.index[b],b=(b<<co)+(P&Tn),this.data[b];if(P<=1114111)return this.data[this.highValueIndex]}return this.errorValue},H}(),am="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qs=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),HA=0;HA<am.length;HA++)qs[am.charCodeAt(HA)]=HA;var nu=1,jd=2,zi=3,Jo=4,pr=5,yl=7,ua=8,lA=9,oo=10,kn=11,oc=12,Xd=13,iu=14,af=15,Du=function(H){for(var P=[],b=0,Q=H.length;b<Q;){var q=H.charCodeAt(b++);if(q>=55296&&q<=56319&&b<Q){var nt=H.charCodeAt(b++);(nt&64512)==56320?P.push(((q&1023)<<10)+(nt&1023)+65536):(P.push(q),b--)}else P.push(q)}return P},Xv=function(){for(var H=[],P=0;P<arguments.length;P++)H[P]=arguments[P];if(String.fromCodePoint)return String.fromCodePoint.apply(String,H);var b=H.length;if(!b)return"";for(var Q=[],q=-1,nt="";++q<b;){var ft=H[q];ft<=65535?Q.push(ft):(ft-=65536,Q.push((ft>>10)+55296,ft%1024+56320)),(q+1===b||Q.length>16384)&&(nt+=String.fromCharCode.apply(String,Q),Q.length=0)}return nt},Kv=Ep(Aa),qo="\xD7",Ip="\xF7",Am=function(H){return Kv.get(H)},Af=function(H,P,b){var Q=b-2,q=P[Q],nt=P[b-1],ft=P[b];if(nt===jd&&ft===zi)return qo;if(nt===jd||nt===zi||nt===Jo||ft===jd||ft===zi||ft===Jo)return Ip;if(nt===ua&&[ua,lA,kn,oc].indexOf(ft)!==-1||(nt===kn||nt===lA)&&(ft===lA||ft===oo)||(nt===oc||nt===oo)&&ft===oo||ft===Xd||ft===pr||ft===yl||nt===nu)return qo;if(nt===Xd&&ft===iu){for(;q===pr;)q=P[--Q];if(q===iu)return qo}if(nt===af&&ft===af){for(var St=0;q===af;)St++,q=P[--Q];if(St%2==0)return qo}return Ip},sc=function(H){var P=Du(H),b=P.length,Q=0,q=0,nt=P.map(Am);return{next:function(){if(Q>=b)return{done:!0,value:null};for(var ft=qo;Q<b&&(ft=Af(P,nt,++Q))===qo;);if(ft!==qo||Q===b){var St=Xv.apply(null,P.slice(q,Q));return q=Q,{value:St,done:!1}}return{done:!0,value:null}}}},ac=function(H){for(var P=sc(H),b=[],Q;!(Q=P.next()).done;)Q.value&&b.push(Q.value.slice());return b},um=function(H){var P=123;if(H.createRange){var b=H.createRange();if(b.getBoundingClientRect){var Q=H.createElement("boundtest");Q.style.height=P+"px",Q.style.display="block",H.body.appendChild(Q),b.selectNode(Q);var q=b.getBoundingClientRect(),nt=Math.round(q.height);if(H.body.removeChild(Q),nt===P)return!0}}return!1},uf=function(H){var P=H.createElement("boundtest");P.style.width="50px",P.style.display="block",P.style.fontSize="12px",P.style.letterSpacing="0px",P.style.wordSpacing="0px",H.body.appendChild(P);var b=H.createRange();P.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var Q=P.firstChild,q=ct(Q.data).map(function(Tt){return kt(Tt)}),nt=0,ft={},St=q.every(function(Tt,Wt){b.setStart(Q,nt),b.setEnd(Q,nt+Tt.length);var $t=b.getBoundingClientRect();nt+=Tt.length;var me=$t.x>ft.x||$t.y>ft.y;return ft=$t,Wt===0?!0:me});return H.body.removeChild(P),St},Ou=function(){return typeof new Image().crossOrigin!="undefined"},xl=function(){return typeof new XMLHttpRequest().responseType=="string"},uh=function(H){var P=new Image,b=H.createElement("canvas"),Q=b.getContext("2d");if(!Q)return!1;P.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{Q.drawImage(P,0,0),b.toDataURL()}catch(q){return!1}return!0},Tp=function(H){return H[0]===0&&H[1]===255&&H[2]===0&&H[3]===255},lm=function(H){var P=H.createElement("canvas"),b=100;P.width=b,P.height=b;var Q=P.getContext("2d");if(!Q)return Promise.reject(!1);Q.fillStyle="rgb(0, 255, 0)",Q.fillRect(0,0,b,b);var q=new Image,nt=P.toDataURL();q.src=nt;var ft=lf(b,b,0,0,q);return Q.fillStyle="red",Q.fillRect(0,0,b,b),hm(ft).then(function(St){Q.drawImage(St,0,0);var Tt=Q.getImageData(0,0,b,b).data;Q.fillStyle="red",Q.fillRect(0,0,b,b);var Wt=H.createElement("div");return Wt.style.backgroundImage="url("+nt+")",Wt.style.height=b+"px",Tp(Tt)?hm(lf(b,b,0,0,Wt)):Promise.reject(!1)}).then(function(St){return Q.drawImage(St,0,0),Tp(Q.getImageData(0,0,b,b).data)}).catch(function(){return!1})},lf=function(H,P,b,Q,q){var nt="http://www.w3.org/2000/svg",ft=document.createElementNS(nt,"svg"),St=document.createElementNS(nt,"foreignObject");return ft.setAttributeNS(null,"width",H.toString()),ft.setAttributeNS(null,"height",P.toString()),St.setAttributeNS(null,"width","100%"),St.setAttributeNS(null,"height","100%"),St.setAttributeNS(null,"x",b.toString()),St.setAttributeNS(null,"y",Q.toString()),St.setAttributeNS(null,"externalResourcesRequired","true"),ft.appendChild(St),St.appendChild(q),ft},hm=function(H){return new Promise(function(P,b){var Q=new Image;Q.onload=function(){return P(Q)},Q.onerror=b,Q.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(H))})},us={get SUPPORT_RANGE_BOUNDS(){var H=um(document);return Object.defineProperty(us,"SUPPORT_RANGE_BOUNDS",{value:H}),H},get SUPPORT_WORD_BREAKING(){var H=us.SUPPORT_RANGE_BOUNDS&&uf(document);return Object.defineProperty(us,"SUPPORT_WORD_BREAKING",{value:H}),H},get SUPPORT_SVG_DRAWING(){var H=uh(document);return Object.defineProperty(us,"SUPPORT_SVG_DRAWING",{value:H}),H},get SUPPORT_FOREIGNOBJECT_DRAWING(){var H=typeof Array.from=="function"&&typeof window.fetch=="function"?lm(document):Promise.resolve(!1);return Object.defineProperty(us,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:H}),H},get SUPPORT_CORS_IMAGES(){var H=Ou();return Object.defineProperty(us,"SUPPORT_CORS_IMAGES",{value:H}),H},get SUPPORT_RESPONSE_TYPE(){var H=xl();return Object.defineProperty(us,"SUPPORT_RESPONSE_TYPE",{value:H}),H},get SUPPORT_CORS_XHR(){var H="withCredentials"in new XMLHttpRequest;return Object.defineProperty(us,"SUPPORT_CORS_XHR",{value:H}),H},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var H=!!(typeof Intl!="undefined"&&Intl.Segmenter);return Object.defineProperty(us,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:H}),H}},NA=function(){function H(P,b){this.text=P,this.bounds=b}return H}(),wl=function(H,P,b,Q){var q=Kd(P,b),nt=[],ft=0;return q.forEach(function(St){if(b.textDecorationLine.length||St.trim().length>0)if(us.SUPPORT_RANGE_BOUNDS){var Tt=cm(Q,ft,St.length).getClientRects();if(Tt.length>1){var Wt=Sp(St),$t=0;Wt.forEach(function(we){nt.push(new NA(we,Ot.fromDOMRectList(H,cm(Q,$t+ft,we.length).getClientRects()))),$t+=we.length})}else nt.push(new NA(St,Ot.fromDOMRectList(H,Tt)))}else{var me=Q.splitText(St.length);nt.push(new NA(St,Yv(H,Q))),Q=me}else us.SUPPORT_RANGE_BOUNDS||(Q=Q.splitText(St.length));ft+=St.length}),nt},Yv=function(H,P){var b=P.ownerDocument;if(b){var Q=b.createElement("html2canvaswrapper");Q.appendChild(P.cloneNode(!0));var q=P.parentNode;if(q){q.replaceChild(Q,P);var nt=ue(H,Q);return Q.firstChild&&q.replaceChild(Q.firstChild,Q),nt}}return Ot.EMPTY},cm=function(H,P,b){var Q=H.ownerDocument;if(!Q)throw new Error("Node has no owner document");var q=Q.createRange();return q.setStart(H,P),q.setEnd(H,P+b),q},Sp=function(H){if(us.SUPPORT_NATIVE_TEXT_SEGMENTATION){var P=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(P.segment(H)).map(function(b){return b.segment})}return ac(H)},pt=function(H,P){if(us.SUPPORT_NATIVE_TEXT_SEGMENTATION){var b=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(b.segment(H)).map(function(Q){return Q.segment})}return Fp(H,P)},Kd=function(H,P){return P.letterSpacing!==0?Sp(H):pt(H,P)},Lp=[32,160,4961,65792,65793,4153,4241],Fp=function(H,P){for(var b=Ts(H,{lineBreak:P.lineBreak,wordBreak:P.overflowWrap==="break-word"?"break-word":P.wordBreak}),Q=[],q,nt=function(){if(q.value){var ft=q.value.slice(),St=ct(ft),Tt="";St.forEach(function(Wt){Lp.indexOf(Wt)===-1?Tt+=kt(Wt):(Tt.length&&Q.push(Tt),Q.push(kt(Wt)),Tt="")}),Tt.length&&Q.push(Tt)}};!(q=b.next()).done;)nt();return Q},Ac=function(){function H(P,b,Q){this.text=fm(b.data,Q.textTransform),this.textBounds=wl(P,this.text,Q,b)}return H}(),fm=function(H,P){switch(P){case 1:return H.toLowerCase();case 3:return H.replace(Zv,dt);case 2:return H.toUpperCase();default:return H}},Zv=/(^|\s|:|-|\(|\))([a-z])/g,dt=function(H,P,b){return H.length>0?P+b.toUpperCase():H},Cl=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this;return q.src=Q.currentSrc||Q.src,q.intrinsicWidth=Q.naturalWidth,q.intrinsicHeight=Q.naturalHeight,q.context.cache.addImage(q.src),q}return P}(Xa),pm=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this;return q.canvas=Q,q.intrinsicWidth=Q.width,q.intrinsicHeight=Q.height,q}return P}(Xa),dm=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this,nt=new XMLSerializer,ft=ue(b,Q);return Q.setAttribute("width",ft.width+"px"),Q.setAttribute("height",ft.height+"px"),q.svg="data:image/svg+xml,"+encodeURIComponent(nt.serializeToString(Q)),q.intrinsicWidth=Q.width.baseVal.value,q.intrinsicHeight=Q.height.baseVal.value,q.context.cache.addImage(q.svg),q}return P}(Xa),Oo=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this;return q.value=Q.value,q}return P}(Xa),Ho=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this;return q.start=Q.start,q.reversed=typeof Q.reversed=="boolean"&&Q.reversed===!0,q}return P}(Xa),gm=[{type:15,flags:0,unit:"px",number:3}],mm=[{type:16,flags:0,number:50}],Ml=function(H){return H.width>H.height?new Ot(H.left+(H.width-H.height)/2,H.top,H.height,H.height):H.width<H.height?new Ot(H.left,H.top+(H.height-H.width)/2,H.width,H.width):H},Yd=function(H){var P=H.type===vm?new Array(H.value.length+1).join("\u2022"):H.value;return P.length===0?H.placeholder||"":P},hf="checkbox",uc="radio",vm="password",Rp=707406591,lc=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this;switch(q.type=Q.type.toLowerCase(),q.checked=Q.checked,q.value=Yd(Q),(q.type===hf||q.type===uc)&&(q.styles.backgroundColor=3739148031,q.styles.borderTopColor=q.styles.borderRightColor=q.styles.borderBottomColor=q.styles.borderLeftColor=2779096575,q.styles.borderTopWidth=q.styles.borderRightWidth=q.styles.borderBottomWidth=q.styles.borderLeftWidth=1,q.styles.borderTopStyle=q.styles.borderRightStyle=q.styles.borderBottomStyle=q.styles.borderLeftStyle=1,q.styles.backgroundClip=[0],q.styles.backgroundOrigin=[0],q.bounds=Ml(q.bounds)),q.type){case hf:q.styles.borderTopRightRadius=q.styles.borderTopLeftRadius=q.styles.borderBottomRightRadius=q.styles.borderBottomLeftRadius=gm;break;case uc:q.styles.borderTopRightRadius=q.styles.borderTopLeftRadius=q.styles.borderBottomRightRadius=q.styles.borderBottomLeftRadius=mm;break}return q}return P}(Xa),hc=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this,nt=Q.options[Q.selectedIndex||0];return q.value=nt&&nt.text||"",q}return P}(Xa),Pp=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this;return q.value=Q.value,q}return P}(Xa),cf=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this;q.src=Q.src,q.width=parseInt(Q.width,10)||0,q.height=parseInt(Q.height,10)||0,q.backgroundColor=q.styles.backgroundColor;try{if(Q.contentWindow&&Q.contentWindow.document&&Q.contentWindow.document.documentElement){q.tree=Zd(b,Q.contentWindow.document.documentElement);var nt=Q.contentWindow.document.documentElement?ZA(b,getComputedStyle(Q.contentWindow.document.documentElement).backgroundColor):oa.TRANSPARENT,ft=Q.contentWindow.document.body?ZA(b,getComputedStyle(Q.contentWindow.document.body).backgroundColor):oa.TRANSPARENT;q.backgroundColor=Bu(nt)?Bu(ft)?q.styles.backgroundColor:ft:nt}}catch(St){}return q}return P}(Xa),Hu=["OL","UL","MENU"],ff=function(H,P,b,Q){for(var q=P.firstChild,nt=void 0;q;q=nt)if(nt=q.nextSibling,lh(q)&&q.data.trim().length>0)b.textNodes.push(new Ac(H,q,b.styles));else if(_l(q))if(en(q)&&q.assignedNodes)q.assignedNodes().forEach(function(St){return ff(H,St,b,Q)});else{var ft=Up(H,q);ft.styles.isVisible()&&(Jv(q,ft,Q)?ft.flags|=4:pf(ft.styles)&&(ft.flags|=2),Hu.indexOf(q.tagName)!==-1&&(ft.flags|=8),b.elements.push(ft),q.slot,q.shadowRoot?ff(H,q.shadowRoot,ft,Q):!ls(q)&&!fc(q)&&!Si(q)&&ff(H,q,ft,Q))}},Up=function(H,P){return ch(P)?new Cl(H,P):gf(P)?new pm(H,P):fc(P)?new dm(H,P):ym(P)?new Oo(H,P):Jd(P)?new Ho(H,P):zA(P)?new lc(H,P):Si(P)?new hc(H,P):ls(P)?new Pp(H,P):pc(P)?new cf(H,P):new Xa(H,P)},Zd=function(H,P){var b=Up(H,P);return b.flags|=4,ff(H,P,b,b),b},Jv=function(H,P,b){return P.styles.isPositionedWithZIndex()||P.styles.opacity<1||P.styles.isTransformed()||hA(H)&&b.styles.isTransparent()},pf=function(H){return H.isPositioned()||H.isFloating()},lh=function(H){return H.nodeType===Node.TEXT_NODE},_l=function(H){return H.nodeType===Node.ELEMENT_NODE},df=function(H){return _l(H)&&typeof H.style!="undefined"&&!hh(H)},hh=function(H){return typeof H.className=="object"},ym=function(H){return H.tagName==="LI"},Jd=function(H){return H.tagName==="OL"},zA=function(H){return H.tagName==="INPUT"},cc=function(H){return H.tagName==="HTML"},fc=function(H){return H.tagName==="svg"},hA=function(H){return H.tagName==="BODY"},gf=function(H){return H.tagName==="CANVAS"},mf=function(H){return H.tagName==="VIDEO"},ch=function(H){return H.tagName==="IMG"},pc=function(H){return H.tagName==="IFRAME"},Dp=function(H){return H.tagName==="STYLE"},Op=function(H){return H.tagName==="SCRIPT"},ls=function(H){return H.tagName==="TEXTAREA"},Si=function(H){return H.tagName==="SELECT"},en=function(H){return H.tagName==="SLOT"},zn=function(H){return H.tagName.indexOf("-")>0},qv=function(){function H(){this.counters={}}return H.prototype.getCounterValue=function(P){var b=this.counters[P];return b&&b.length?b[b.length-1]:1},H.prototype.getCounterValues=function(P){var b=this.counters[P];return b||[]},H.prototype.pop=function(P){var b=this;P.forEach(function(Q){return b.counters[Q].pop()})},H.prototype.parse=function(P){var b=this,Q=P.counterIncrement,q=P.counterReset,nt=!0;Q!==null&&Q.forEach(function(St){var Tt=b.counters[St.counter];Tt&&St.increment!==0&&(nt=!1,Tt.length||Tt.push(1),Tt[Math.max(0,Tt.length-1)]+=St.increment)});var ft=[];return nt&&q.forEach(function(St){var Tt=b.counters[St.counter];ft.push(St.counter),Tt||(Tt=b.counters[St.counter]=[]),Tt.push(St.reset)}),ft},H}(),dc={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ur={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054F","\u054E","\u054D","\u054C","\u054B","\u054A","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053F","\u053E","\u053D","\u053C","\u053B","\u053A","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},xm={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05D9\u05F3","\u05D8\u05F3","\u05D7\u05F3","\u05D6\u05F3","\u05D5\u05F3","\u05D4\u05F3","\u05D3\u05F3","\u05D2\u05F3","\u05D1\u05F3","\u05D0\u05F3","\u05EA","\u05E9","\u05E8","\u05E7","\u05E6","\u05E4","\u05E2","\u05E1","\u05E0","\u05DE","\u05DC","\u05DB","\u05D9\u05D8","\u05D9\u05D7","\u05D9\u05D6","\u05D8\u05D6","\u05D8\u05D5","\u05D9","\u05D8","\u05D7","\u05D6","\u05D5","\u05D4","\u05D3","\u05D2","\u05D1","\u05D0"]},wm={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10F5","\u10F0","\u10EF","\u10F4","\u10EE","\u10ED","\u10EC","\u10EB","\u10EA","\u10E9","\u10E8","\u10E7","\u10E6","\u10E5","\u10E4","\u10F3","\u10E2","\u10E1","\u10E0","\u10DF","\u10DE","\u10DD","\u10F2","\u10DC","\u10DB","\u10DA","\u10D9","\u10D8","\u10D7","\u10F1","\u10D6","\u10D5","\u10D4","\u10D3","\u10D2","\u10D1","\u10D0"]},Bl=function(H,P,b,Q,q,nt){return H<P||H>b?Tl(H,q,nt.length>0):Q.integers.reduce(function(ft,St,Tt){for(;H>=St;)H-=St,ft+=Q.values[Tt];return ft},"")+nt},Hp=function(H,P,b,Q){var q="";do b||H--,q=Q(H)+q,H/=P;while(H*P>=P);return q},Ur=function(H,P,b,Q,q){var nt=b-P+1;return(H<0?"-":"")+(Hp(Math.abs(H),nt,Q,function(ft){return kt(Math.floor(ft%nt)+P)})+q)},hs=function(H,P,b){b===void 0&&(b=". ");var Q=P.length;return Hp(Math.abs(H),Q,!1,function(q){return P[Math.floor(q%Q)]})+b},El=1<<0,ir=1<<1,Nu=1<<2,Li=1<<3,Zi=function(H,P,b,Q,q,nt){if(H<-9999||H>9999)return Tl(H,4,q.length>0);var ft=Math.abs(H),St=q;if(ft===0)return P[0]+St;for(var Tt=0;ft>0&&Tt<=4;Tt++){var Wt=ft%10;Wt===0&&lo(nt,El)&&St!==""?St=P[Wt]+St:Wt>1||Wt===1&&Tt===0||Wt===1&&Tt===1&&lo(nt,ir)||Wt===1&&Tt===1&&lo(nt,Nu)&&H>100||Wt===1&&Tt>1&&lo(nt,Li)?St=P[Wt]+(Tt>0?b[Tt-1]:"")+St:Wt===1&&Tt>0&&(St=b[Tt-1]+St),ft=Math.floor(ft/10)}return(H<0?Q:"")+St},Il="\u5341\u767E\u5343\u842C",Np="\u62FE\u4F70\u4EDF\u842C",zp="\u30DE\u30A4\u30CA\u30B9",Qp="\uB9C8\uC774\uB108\uC2A4",Tl=function(H,P,b){var Q=b?". ":"",q=b?"\u3001":"",nt=b?", ":"",ft=b?" ":"";switch(P){case 0:return"\u2022"+ft;case 1:return"\u25E6"+ft;case 2:return"\u25FE"+ft;case 5:var St=Ur(H,48,57,!0,Q);return St.length<4?"0"+St:St;case 4:return hs(H,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",q);case 6:return Bl(H,1,3999,dc,3,Q).toLowerCase();case 7:return Bl(H,1,3999,dc,3,Q);case 8:return Ur(H,945,969,!1,Q);case 9:return Ur(H,97,122,!1,Q);case 10:return Ur(H,65,90,!1,Q);case 11:return Ur(H,1632,1641,!0,Q);case 12:case 49:return Bl(H,1,9999,ur,3,Q);case 35:return Bl(H,1,9999,ur,3,Q).toLowerCase();case 13:return Ur(H,2534,2543,!0,Q);case 14:case 30:return Ur(H,6112,6121,!0,Q);case 15:return hs(H,"\u5B50\u4E11\u5BC5\u536F\u8FB0\u5DF3\u5348\u672A\u7533\u9149\u620C\u4EA5",q);case 16:return hs(H,"\u7532\u4E59\u4E19\u4E01\u620A\u5DF1\u5E9A\u8F9B\u58EC\u7678",q);case 17:case 48:return Zi(H,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",Il,"\u8CA0",q,ir|Nu|Li);case 47:return Zi(H,"\u96F6\u58F9\u8CB3\u53C3\u8086\u4F0D\u9678\u67D2\u634C\u7396",Np,"\u8CA0",q,El|ir|Nu|Li);case 42:return Zi(H,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D",Il,"\u8D1F",q,ir|Nu|Li);case 41:return Zi(H,"\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396",Np,"\u8D1F",q,El|ir|Nu|Li);case 26:return Zi(H,"\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u4E07",zp,q,0);case 25:return Zi(H,"\u96F6\u58F1\u5F10\u53C2\u56DB\u4F0D\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343\u4E07",zp,q,El|ir|Nu);case 31:return Zi(H,"\uC601\uC77C\uC774\uC0BC\uC0AC\uC624\uC721\uCE60\uD314\uAD6C","\uC2ED\uBC31\uCC9C\uB9CC",Qp,nt,El|ir|Nu);case 33:return Zi(H,"\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u5341\u767E\u5343\u842C",Qp,nt,0);case 32:return Zi(H,"\u96F6\u58F9\u8CB3\u53C3\u56DB\u4E94\u516D\u4E03\u516B\u4E5D","\u62FE\u767E\u5343",Qp,nt,El|ir|Nu);case 18:return Ur(H,2406,2415,!0,Q);case 20:return Bl(H,1,19999,wm,3,Q);case 21:return Ur(H,2790,2799,!0,Q);case 22:return Ur(H,2662,2671,!0,Q);case 22:return Bl(H,1,10999,xm,3,Q);case 23:return hs(H,"\u3042\u3044\u3046\u3048\u304A\u304B\u304D\u304F\u3051\u3053\u3055\u3057\u3059\u305B\u305D\u305F\u3061\u3064\u3066\u3068\u306A\u306B\u306C\u306D\u306E\u306F\u3072\u3075\u3078\u307B\u307E\u307F\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308A\u308B\u308C\u308D\u308F\u3090\u3091\u3092\u3093");case 24:return hs(H,"\u3044\u308D\u306F\u306B\u307B\u3078\u3068\u3061\u308A\u306C\u308B\u3092\u308F\u304B\u3088\u305F\u308C\u305D\u3064\u306D\u306A\u3089\u3080\u3046\u3090\u306E\u304A\u304F\u3084\u307E\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304D\u3086\u3081\u307F\u3057\u3091\u3072\u3082\u305B\u3059");case 27:return Ur(H,3302,3311,!0,Q);case 28:return hs(H,"\u30A2\u30A4\u30A6\u30A8\u30AA\u30AB\u30AD\u30AF\u30B1\u30B3\u30B5\u30B7\u30B9\u30BB\u30BD\u30BF\u30C1\u30C4\u30C6\u30C8\u30CA\u30CB\u30CC\u30CD\u30CE\u30CF\u30D2\u30D5\u30D8\u30DB\u30DE\u30DF\u30E0\u30E1\u30E2\u30E4\u30E6\u30E8\u30E9\u30EA\u30EB\u30EC\u30ED\u30EF\u30F0\u30F1\u30F2\u30F3",q);case 29:return hs(H,"\u30A4\u30ED\u30CF\u30CB\u30DB\u30D8\u30C8\u30C1\u30EA\u30CC\u30EB\u30F2\u30EF\u30AB\u30E8\u30BF\u30EC\u30BD\u30C4\u30CD\u30CA\u30E9\u30E0\u30A6\u30F0\u30CE\u30AA\u30AF\u30E4\u30DE\u30B1\u30D5\u30B3\u30A8\u30C6\u30A2\u30B5\u30AD\u30E6\u30E1\u30DF\u30B7\u30F1\u30D2\u30E2\u30BB\u30B9",q);case 34:return Ur(H,3792,3801,!0,Q);case 37:return Ur(H,6160,6169,!0,Q);case 38:return Ur(H,4160,4169,!0,Q);case 39:return Ur(H,2918,2927,!0,Q);case 40:return Ur(H,1776,1785,!0,Q);case 43:return Ur(H,3046,3055,!0,Q);case 44:return Ur(H,3174,3183,!0,Q);case 45:return Ur(H,3664,3673,!0,Q);case 46:return Ur(H,3872,3881,!0,Q);case 3:default:return Ur(H,48,57,!0,Q)}},vf="data-html2canvas-ignore",qd=function(){function H(P,b,Q){if(this.context=P,this.options=Q,this.scrolledElements=[],this.referenceElement=b,this.counters=new qv,this.quoteDepth=0,!b.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(b.ownerDocument.documentElement,!1)}return H.prototype.toIFrame=function(P,b){var Q=this,q=fh(P,b);if(!q.contentWindow)return Promise.reject("Unable to find iframe window");var nt=P.defaultView.pageXOffset,ft=P.defaultView.pageYOffset,St=q.contentWindow,Tt=St.document,Wt=Mm(q).then(function(){return Ut(Q,void 0,void 0,function(){var $t,me;return ce(this,function(we){switch(we.label){case 0:return this.scrolledElements.forEach($d),St&&(St.scrollTo(b.left,b.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(St.scrollY!==b.top||St.scrollX!==b.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(St.scrollX-b.left,St.scrollY-b.top,0,0))),$t=this.options.onclone,me=this.clonedReferenceElement,typeof me=="undefined"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:Tt.fonts&&Tt.fonts.ready?[4,Tt.fonts.ready]:[3,2];case 1:we.sent(),we.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Cm(Tt)]:[3,4];case 3:we.sent(),we.label=4;case 4:return typeof $t=="function"?[2,Promise.resolve().then(function(){return $t(Tt,me)}).then(function(){return q})]:[2,q]}})})});return Tt.open(),Tt.write(ph(document.doctype)+"<html></html>"),Bm(this.referenceElement.ownerDocument,nt,ft),Tt.replaceChild(Tt.adoptNode(this.documentElement),Tt.documentElement),Tt.close(),Wt},H.prototype.createElementClone=function(P){if(DA(P,2))debugger;if(gf(P))return this.createCanvasClone(P);if(mf(P))return this.createVideoClone(P);if(Dp(P))return this.createStyleClone(P);var b=P.cloneNode(!1);return ch(b)&&(ch(P)&&P.currentSrc&&P.currentSrc!==P.src&&(b.src=P.currentSrc,b.srcset=""),b.loading==="lazy"&&(b.loading="eager")),zn(b)?this.createCustomElementClone(b):b},H.prototype.createCustomElementClone=function(P){var b=document.createElement("html2canvascustomelement");return kp(P.style,b),b},H.prototype.createStyleClone=function(P){try{var b=P.sheet;if(b&&b.cssRules){var Q=[].slice.call(b.cssRules,0).reduce(function(nt,ft){return ft&&typeof ft.cssText=="string"?nt+ft.cssText:nt},""),q=P.cloneNode(!1);return q.textContent=Q,q}}catch(nt){if(this.context.logger.error("Unable to access cssRules property",nt),nt.name!=="SecurityError")throw nt}return P.cloneNode(!1)},H.prototype.createCanvasClone=function(P){var b;if(this.options.inlineImages&&P.ownerDocument){var Q=P.ownerDocument.createElement("img");try{return Q.src=P.toDataURL(),Q}catch(Wt){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",P)}}var q=P.cloneNode(!1);try{q.width=P.width,q.height=P.height;var nt=P.getContext("2d"),ft=q.getContext("2d");if(ft)if(!this.options.allowTaint&&nt)ft.putImageData(nt.getImageData(0,0,P.width,P.height),0,0);else{var St=(b=P.getContext("webgl2"))!==null&&b!==void 0?b:P.getContext("webgl");if(St){var Tt=St.getContextAttributes();(Tt==null?void 0:Tt.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",P)}ft.drawImage(P,0,0)}return q}catch(Wt){this.context.logger.info("Unable to clone canvas as it is tainted",P)}return q},H.prototype.createVideoClone=function(P){var b=P.ownerDocument.createElement("canvas");b.width=P.offsetWidth,b.height=P.offsetHeight;var Q=b.getContext("2d");try{return Q&&(Q.drawImage(P,0,0,b.width,b.height),this.options.allowTaint||Q.getImageData(0,0,b.width,b.height)),b}catch(nt){this.context.logger.info("Unable to clone video as it is tainted",P)}var q=P.ownerDocument.createElement("canvas");return q.width=P.offsetWidth,q.height=P.offsetHeight,q},H.prototype.appendChildNode=function(P,b,Q){(!_l(b)||!Op(b)&&!b.hasAttribute(vf)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(b)))&&(!this.options.copyStyles||!_l(b)||!Dp(b))&&P.appendChild(this.cloneNode(b,Q))},H.prototype.cloneChildNodes=function(P,b,Q){for(var q=this,nt=P.shadowRoot?P.shadowRoot.firstChild:P.firstChild;nt;nt=nt.nextSibling)if(_l(nt)&&en(nt)&&typeof nt.assignedNodes=="function"){var ft=nt.assignedNodes();ft.length&&ft.forEach(function(St){return q.appendChildNode(b,St,Q)})}else this.appendChildNode(b,nt,Q)},H.prototype.cloneNode=function(P,b){if(lh(P))return document.createTextNode(P.data);if(!P.ownerDocument)return P.cloneNode(!1);var Q=P.ownerDocument.defaultView;if(Q&&_l(P)&&(df(P)||hh(P))){var q=this.createElementClone(P);q.style.transitionProperty="none";var nt=Q.getComputedStyle(P),ft=Q.getComputedStyle(P,":before"),St=Q.getComputedStyle(P,":after");this.referenceElement===P&&df(q)&&(this.clonedReferenceElement=q),hA(q)&&Gp(q);var Tt=this.counters.parse(new vs(this.context,nt)),Wt=this.resolvePseudoContent(P,q,ft,gc.BEFORE);zn(P)&&(b=!0),mf(P)||this.cloneChildNodes(P,q,b),Wt&&q.insertBefore(Wt,q.firstChild);var $t=this.resolvePseudoContent(P,q,St,gc.AFTER);return $t&&q.appendChild($t),this.counters.pop(Tt),(nt&&(this.options.copyStyles||hh(P))&&!pc(P)||b)&&kp(nt,q),(P.scrollTop!==0||P.scrollLeft!==0)&&this.scrolledElements.push([q,P.scrollLeft,P.scrollTop]),(ls(P)||Si(P))&&(ls(q)||Si(q))&&(q.value=P.value),q}return P.cloneNode(!1)},H.prototype.resolvePseudoContent=function(P,b,Q,q){var nt=this;if(!!Q){var ft=Q.content,St=b.ownerDocument;if(!(!St||!ft||ft==="none"||ft==="-moz-alt-content"||Q.display==="none")){this.counters.parse(new vs(this.context,Q));var Tt=new ml(this.context,Q),Wt=St.createElement("html2canvaspseudoelement");kp(Q,Wt),Tt.content.forEach(function(me){if(me.type===0)Wt.appendChild(St.createTextNode(me.value));else if(me.type===22){var we=St.createElement("img");we.src=me.value,we.style.opacity="1",Wt.appendChild(we)}else if(me.type===18){if(me.name==="attr"){var Lr=me.values.filter(di);Lr.length&&Wt.appendChild(St.createTextNode(P.getAttribute(Lr[0].value)||""))}else if(me.name==="counter"){var Ye=me.values.filter(Jl),lr=Ye[0],mn=Ye[1];if(lr&&di(lr)){var Ar=nt.counters.getCounterValue(lr.value),qe=mn&&di(mn)?eu.parse(nt.context,mn.value):3;Wt.appendChild(St.createTextNode(Tl(Ar,qe,!1)))}}else if(me.name==="counters"){var gi=me.values.filter(Jl),lr=gi[0],Fr=gi[1],mn=gi[2];if(lr&&di(lr)){var Fi=nt.counters.getCounterValues(lr.value),vr=mn&&di(mn)?eu.parse(nt.context,mn.value):3,qn=Fr&&Fr.type===0?Fr.value:"",Gi=Fi.map(function($o){return Tl($o,vr,!1)}).join(qn);Wt.appendChild(St.createTextNode(Gi))}}}else if(me.type===20)switch(me.value){case"open-quote":Wt.appendChild(St.createTextNode(pl(Tt.quotes,nt.quoteDepth++,!0)));break;case"close-quote":Wt.appendChild(St.createTextNode(pl(Tt.quotes,--nt.quoteDepth,!1)));break;default:Wt.appendChild(St.createTextNode(me.value))}}),Wt.className=mc+" "+yf;var $t=q===gc.BEFORE?" "+mc:" "+yf;return hh(b)?b.className.baseValue+=$t:b.className+=$t,Wt}}},H.destroy=function(P){return P.parentNode?(P.parentNode.removeChild(P),!0):!1},H}(),gc;(function(H){H[H.BEFORE=0]="BEFORE",H[H.AFTER=1]="AFTER"})(gc||(gc={}));var fh=function(H,P){var b=H.createElement("iframe");return b.className="html2canvas-container",b.style.visibility="hidden",b.style.position="fixed",b.style.left="-10000px",b.style.top="0px",b.style.border="0",b.width=P.width.toString(),b.height=P.height.toString(),b.scrolling="no",b.setAttribute(vf,"true"),H.body.appendChild(b),b},bp=function(H){return new Promise(function(P){if(H.complete){P();return}if(!H.src){P();return}H.onload=P,H.onerror=P})},Cm=function(H){return Promise.all([].slice.call(H.images,0).map(bp))},Mm=function(H){return new Promise(function(P,b){var Q=H.contentWindow;if(!Q)return b("No window assigned for iframe");var q=Q.document;Q.onload=H.onload=function(){Q.onload=H.onload=null;var nt=setInterval(function(){q.body.childNodes.length>0&&q.readyState==="complete"&&(clearInterval(nt),P(H))},50)}})},_m=["all","d","content"],kp=function(H,P){for(var b=H.length-1;b>=0;b--){var Q=H.item(b);_m.indexOf(Q)===-1&&P.style.setProperty(Q,H.getPropertyValue(Q))}return P},ph=function(H){var P="";return H&&(P+="<!DOCTYPE ",H.name&&(P+=H.name),H.internalSubset&&(P+=H.internalSubset),H.publicId&&(P+='"'+H.publicId+'"'),H.systemId&&(P+='"'+H.systemId+'"'),P+=">"),P},Bm=function(H,P,b){H&&H.defaultView&&(P!==H.defaultView.pageXOffset||b!==H.defaultView.pageYOffset)&&H.defaultView.scrollTo(P,b)},$d=function(H){var P=H[0],b=H[1],Q=H[2];P.scrollLeft=b,P.scrollTop=Q},cA=":before",ui=":after",mc="___html2canvas___pseudoelement_before",yf="___html2canvas___pseudoelement_after",vc=`{
    content: "" !important;
    display: none !important;
}`,Gp=function(H){Em(H,"."+mc+cA+vc+`
         .`+yf+ui+vc)},Em=function(H,P){var b=H.ownerDocument;if(b){var Q=b.createElement("style");Q.textContent=P,H.appendChild(Q)}},Ka=function(){function H(){}return H.getOrigin=function(P){var b=H._link;return b?(b.href=P,b.href=b.href,b.protocol+b.hostname+b.port):"about:blank"},H.isSameOrigin=function(P){return H.getOrigin(P)===H._origin},H.setContext=function(P){H._link=P.document.createElement("a"),H._origin=H.getOrigin(P.location.href)},H._origin="about:blank",H}(),Im=function(){function H(P,b){this.context=P,this._options=b,this._cache={}}return H.prototype.addImage=function(P){var b=Promise.resolve();return this.has(P)||(tg(P)||Vp(P))&&(this._cache[P]=this.loadImage(P)).catch(function(){}),b},H.prototype.match=function(P){return this._cache[P]},H.prototype.loadImage=function(P){return Ut(this,void 0,void 0,function(){var b,Q,q,nt,ft=this;return ce(this,function(St){switch(St.label){case 0:return b=Ka.isSameOrigin(P),Q=!Wp(P)&&this._options.useCORS===!0&&us.SUPPORT_CORS_IMAGES&&!b,q=!Wp(P)&&!b&&!tg(P)&&typeof this._options.proxy=="string"&&us.SUPPORT_CORS_XHR&&!Q,!b&&this._options.allowTaint===!1&&!Wp(P)&&!tg(P)&&!q&&!Q?[2]:(nt=P,q?[4,this.proxy(nt)]:[3,2]);case 1:nt=St.sent(),St.label=2;case 2:return this.context.logger.debug("Added image "+P.substring(0,256)),[4,new Promise(function(Tt,Wt){var $t=new Image;$t.onload=function(){return Tt($t)},$t.onerror=Wt,(jp(nt)||Q)&&($t.crossOrigin="anonymous"),$t.src=nt,$t.complete===!0&&setTimeout(function(){return Tt($t)},500),ft._options.imageTimeout>0&&setTimeout(function(){return Wt("Timed out ("+ft._options.imageTimeout+"ms) loading image")},ft._options.imageTimeout)})];case 3:return[2,St.sent()]}})})},H.prototype.has=function(P){return typeof this._cache[P]!="undefined"},H.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},H.prototype.proxy=function(P){var b=this,Q=this._options.proxy;if(!Q)throw new Error("No proxy defined");var q=P.substring(0,256);return new Promise(function(nt,ft){var St=us.SUPPORT_RESPONSE_TYPE?"blob":"text",Tt=new XMLHttpRequest;Tt.onload=function(){if(Tt.status===200)if(St==="text")nt(Tt.response);else{var me=new FileReader;me.addEventListener("load",function(){return nt(me.result)},!1),me.addEventListener("error",function(we){return ft(we)},!1),me.readAsDataURL(Tt.response)}else ft("Failed to proxy resource "+q+" with status code "+Tt.status)},Tt.onerror=ft;var Wt=Q.indexOf("?")>-1?"&":"?";if(Tt.open("GET",""+Q+Wt+"url="+encodeURIComponent(P)+"&responseType="+St),St!=="text"&&Tt instanceof XMLHttpRequest&&(Tt.responseType=St),b._options.imageTimeout){var $t=b._options.imageTimeout;Tt.timeout=$t,Tt.ontimeout=function(){return ft("Timed out ("+$t+"ms) proxying "+q)}}Tt.send()})},H}(),$v=/^data:image\/svg\+xml/i,zu=/^data:image\/.*;base64,/i,Sl=/^data:image\/.*/i,Vp=function(H){return us.SUPPORT_SVG_DRAWING||!Tm(H)},Wp=function(H){return Sl.test(H)},jp=function(H){return zu.test(H)},tg=function(H){return H.substr(0,4)==="blob"},Tm=function(H){return H.substr(-3).toLowerCase()==="svg"||$v.test(H)},Ve=function(){function H(P,b){this.type=0,this.x=P,this.y=b}return H.prototype.add=function(P,b){return new H(this.x+P,this.y+b)},H}(),Hs=function(H,P,b){return new Ve(H.x+(P.x-H.x)*b,H.y+(P.y-H.y)*b)},fA=function(){function H(P,b,Q,q){this.type=1,this.start=P,this.startControl=b,this.endControl=Q,this.end=q}return H.prototype.subdivide=function(P,b){var Q=Hs(this.start,this.startControl,P),q=Hs(this.startControl,this.endControl,P),nt=Hs(this.endControl,this.end,P),ft=Hs(Q,q,P),St=Hs(q,nt,P),Tt=Hs(ft,St,P);return b?new H(this.start,Q,ft,Tt):new H(Tt,St,nt,this.end)},H.prototype.add=function(P,b){return new H(this.start.add(P,b),this.startControl.add(P,b),this.endControl.add(P,b),this.end.add(P,b))},H.prototype.reverse=function(){return new H(this.end,this.endControl,this.startControl,this.start)},H}(),Vo=function(H){return H.type===1},t0=function(){function H(P){var b=P.styles,Q=P.bounds,q=ia(b.borderTopLeftRadius,Q.width,Q.height),nt=q[0],ft=q[1],St=ia(b.borderTopRightRadius,Q.width,Q.height),Tt=St[0],Wt=St[1],$t=ia(b.borderBottomRightRadius,Q.width,Q.height),me=$t[0],we=$t[1],Lr=ia(b.borderBottomLeftRadius,Q.width,Q.height),Ye=Lr[0],lr=Lr[1],mn=[];mn.push((nt+Tt)/Q.width),mn.push((Ye+me)/Q.width),mn.push((ft+lr)/Q.height),mn.push((Wt+we)/Q.height);var Ar=Math.max.apply(Math,mn);Ar>1&&(nt/=Ar,ft/=Ar,Tt/=Ar,Wt/=Ar,me/=Ar,we/=Ar,Ye/=Ar,lr/=Ar);var qe=Q.width-Tt,gi=Q.height-we,Fr=Q.width-me,Fi=Q.height-lr,vr=b.borderTopWidth,qn=b.borderRightWidth,Gi=b.borderBottomWidth,Dn=b.borderLeftWidth,cs=ji(b.paddingTop,P.bounds.width),$o=ji(b.paddingRight,P.bounds.width),ws=ji(b.paddingBottom,P.bounds.width),Cs=ji(b.paddingLeft,P.bounds.width);this.topLeftBorderDoubleOuterBox=nt>0||ft>0?bi(Q.left+Dn/3,Q.top+vr/3,nt-Dn/3,ft-vr/3,Qi.TOP_LEFT):new Ve(Q.left+Dn/3,Q.top+vr/3),this.topRightBorderDoubleOuterBox=nt>0||ft>0?bi(Q.left+qe,Q.top+vr/3,Tt-qn/3,Wt-vr/3,Qi.TOP_RIGHT):new Ve(Q.left+Q.width-qn/3,Q.top+vr/3),this.bottomRightBorderDoubleOuterBox=me>0||we>0?bi(Q.left+Fr,Q.top+gi,me-qn/3,we-Gi/3,Qi.BOTTOM_RIGHT):new Ve(Q.left+Q.width-qn/3,Q.top+Q.height-Gi/3),this.bottomLeftBorderDoubleOuterBox=Ye>0||lr>0?bi(Q.left+Dn/3,Q.top+Fi,Ye-Dn/3,lr-Gi/3,Qi.BOTTOM_LEFT):new Ve(Q.left+Dn/3,Q.top+Q.height-Gi/3),this.topLeftBorderDoubleInnerBox=nt>0||ft>0?bi(Q.left+Dn*2/3,Q.top+vr*2/3,nt-Dn*2/3,ft-vr*2/3,Qi.TOP_LEFT):new Ve(Q.left+Dn*2/3,Q.top+vr*2/3),this.topRightBorderDoubleInnerBox=nt>0||ft>0?bi(Q.left+qe,Q.top+vr*2/3,Tt-qn*2/3,Wt-vr*2/3,Qi.TOP_RIGHT):new Ve(Q.left+Q.width-qn*2/3,Q.top+vr*2/3),this.bottomRightBorderDoubleInnerBox=me>0||we>0?bi(Q.left+Fr,Q.top+gi,me-qn*2/3,we-Gi*2/3,Qi.BOTTOM_RIGHT):new Ve(Q.left+Q.width-qn*2/3,Q.top+Q.height-Gi*2/3),this.bottomLeftBorderDoubleInnerBox=Ye>0||lr>0?bi(Q.left+Dn*2/3,Q.top+Fi,Ye-Dn*2/3,lr-Gi*2/3,Qi.BOTTOM_LEFT):new Ve(Q.left+Dn*2/3,Q.top+Q.height-Gi*2/3),this.topLeftBorderStroke=nt>0||ft>0?bi(Q.left+Dn/2,Q.top+vr/2,nt-Dn/2,ft-vr/2,Qi.TOP_LEFT):new Ve(Q.left+Dn/2,Q.top+vr/2),this.topRightBorderStroke=nt>0||ft>0?bi(Q.left+qe,Q.top+vr/2,Tt-qn/2,Wt-vr/2,Qi.TOP_RIGHT):new Ve(Q.left+Q.width-qn/2,Q.top+vr/2),this.bottomRightBorderStroke=me>0||we>0?bi(Q.left+Fr,Q.top+gi,me-qn/2,we-Gi/2,Qi.BOTTOM_RIGHT):new Ve(Q.left+Q.width-qn/2,Q.top+Q.height-Gi/2),this.bottomLeftBorderStroke=Ye>0||lr>0?bi(Q.left+Dn/2,Q.top+Fi,Ye-Dn/2,lr-Gi/2,Qi.BOTTOM_LEFT):new Ve(Q.left+Dn/2,Q.top+Q.height-Gi/2),this.topLeftBorderBox=nt>0||ft>0?bi(Q.left,Q.top,nt,ft,Qi.TOP_LEFT):new Ve(Q.left,Q.top),this.topRightBorderBox=Tt>0||Wt>0?bi(Q.left+qe,Q.top,Tt,Wt,Qi.TOP_RIGHT):new Ve(Q.left+Q.width,Q.top),this.bottomRightBorderBox=me>0||we>0?bi(Q.left+Fr,Q.top+gi,me,we,Qi.BOTTOM_RIGHT):new Ve(Q.left+Q.width,Q.top+Q.height),this.bottomLeftBorderBox=Ye>0||lr>0?bi(Q.left,Q.top+Fi,Ye,lr,Qi.BOTTOM_LEFT):new Ve(Q.left,Q.top+Q.height),this.topLeftPaddingBox=nt>0||ft>0?bi(Q.left+Dn,Q.top+vr,Math.max(0,nt-Dn),Math.max(0,ft-vr),Qi.TOP_LEFT):new Ve(Q.left+Dn,Q.top+vr),this.topRightPaddingBox=Tt>0||Wt>0?bi(Q.left+Math.min(qe,Q.width-qn),Q.top+vr,qe>Q.width+qn?0:Math.max(0,Tt-qn),Math.max(0,Wt-vr),Qi.TOP_RIGHT):new Ve(Q.left+Q.width-qn,Q.top+vr),this.bottomRightPaddingBox=me>0||we>0?bi(Q.left+Math.min(Fr,Q.width-Dn),Q.top+Math.min(gi,Q.height-Gi),Math.max(0,me-qn),Math.max(0,we-Gi),Qi.BOTTOM_RIGHT):new Ve(Q.left+Q.width-qn,Q.top+Q.height-Gi),this.bottomLeftPaddingBox=Ye>0||lr>0?bi(Q.left+Dn,Q.top+Math.min(Fi,Q.height-Gi),Math.max(0,Ye-Dn),Math.max(0,lr-Gi),Qi.BOTTOM_LEFT):new Ve(Q.left+Dn,Q.top+Q.height-Gi),this.topLeftContentBox=nt>0||ft>0?bi(Q.left+Dn+Cs,Q.top+vr+cs,Math.max(0,nt-(Dn+Cs)),Math.max(0,ft-(vr+cs)),Qi.TOP_LEFT):new Ve(Q.left+Dn+Cs,Q.top+vr+cs),this.topRightContentBox=Tt>0||Wt>0?bi(Q.left+Math.min(qe,Q.width+Dn+Cs),Q.top+vr+cs,qe>Q.width+Dn+Cs?0:Tt-Dn+Cs,Wt-(vr+cs),Qi.TOP_RIGHT):new Ve(Q.left+Q.width-(qn+$o),Q.top+vr+cs),this.bottomRightContentBox=me>0||we>0?bi(Q.left+Math.min(Fr,Q.width-(Dn+Cs)),Q.top+Math.min(gi,Q.height+vr+cs),Math.max(0,me-(qn+$o)),we-(Gi+ws),Qi.BOTTOM_RIGHT):new Ve(Q.left+Q.width-(qn+$o),Q.top+Q.height-(Gi+ws)),this.bottomLeftContentBox=Ye>0||lr>0?bi(Q.left+Dn+Cs,Q.top+Fi,Math.max(0,Ye-(Dn+Cs)),lr-(Gi+ws),Qi.BOTTOM_LEFT):new Ve(Q.left+Dn+Cs,Q.top+Q.height-(Gi+ws))}return H}(),Qi;(function(H){H[H.TOP_LEFT=0]="TOP_LEFT",H[H.TOP_RIGHT=1]="TOP_RIGHT",H[H.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",H[H.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Qi||(Qi={}));var bi=function(H,P,b,Q,q){var nt=4*((Math.sqrt(2)-1)/3),ft=b*nt,St=Q*nt,Tt=H+b,Wt=P+Q;switch(q){case Qi.TOP_LEFT:return new fA(new Ve(H,Wt),new Ve(H,Wt-St),new Ve(Tt-ft,P),new Ve(Tt,P));case Qi.TOP_RIGHT:return new fA(new Ve(H,P),new Ve(H+ft,P),new Ve(Tt,Wt-St),new Ve(Tt,Wt));case Qi.BOTTOM_RIGHT:return new fA(new Ve(Tt,P),new Ve(Tt,P+St),new Ve(H+ft,Wt),new Ve(H,Wt));case Qi.BOTTOM_LEFT:default:return new fA(new Ve(Tt,Wt),new Ve(Tt-ft,Wt),new Ve(H,P+St),new Ve(H,P))}},dh=function(H){return[H.topLeftBorderBox,H.topRightBorderBox,H.bottomRightBorderBox,H.bottomLeftBorderBox]},e0=function(H){return[H.topLeftContentBox,H.topRightContentBox,H.bottomRightContentBox,H.bottomLeftContentBox]},Ll=function(H){return[H.topLeftPaddingBox,H.topRightPaddingBox,H.bottomRightPaddingBox,H.bottomLeftPaddingBox]},Sm=function(){function H(P,b,Q){this.offsetX=P,this.offsetY=b,this.matrix=Q,this.type=0,this.target=2|4}return H}(),la=function(){function H(P,b){this.path=P,this.target=b,this.type=1}return H}(),La=function(){function H(P){this.opacity=P,this.type=2,this.target=2|4}return H}(),r0=function(H){return H.type===0},xf=function(H){return H.type===1},Lm=function(H){return H.type===2},eg=function(H,P){return H.length===P.length?H.some(function(b,Q){return b===P[Q]}):!1},rg=function(H,P,b,Q,q){return H.map(function(nt,ft){switch(ft){case 0:return nt.add(P,b);case 1:return nt.add(P+Q,b);case 2:return nt.add(P+Q,b+q);case 3:return nt.add(P,b+q)}return nt})},ng=function(){function H(P){this.element=P,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return H}(),wf=function(){function H(P,b){if(this.container=P,this.parent=b,this.effects=[],this.curves=new t0(this.container),this.container.styles.opacity<1&&this.effects.push(new La(this.container.styles.opacity)),this.container.styles.transform!==null){var Q=this.container.bounds.left+this.container.styles.transformOrigin[0].number,q=this.container.bounds.top+this.container.styles.transformOrigin[1].number,nt=this.container.styles.transform;this.effects.push(new Sm(Q,q,nt))}if(this.container.styles.overflowX!==0){var ft=dh(this.curves),St=Ll(this.curves);eg(ft,St)?this.effects.push(new la(ft,2|4)):(this.effects.push(new la(ft,2)),this.effects.push(new la(St,4)))}}return H.prototype.getEffects=function(P){for(var b=[2,3].indexOf(this.container.styles.position)===-1,Q=this.parent,q=this.effects.slice(0);Q;){var nt=Q.effects.filter(function(Tt){return!xf(Tt)});if(b||Q.container.styles.position!==0||!Q.parent){if(q.unshift.apply(q,nt),b=[2,3].indexOf(Q.container.styles.position)===-1,Q.container.styles.overflowX!==0){var ft=dh(Q.curves),St=Ll(Q.curves);eg(ft,St)||q.unshift(new la(St,2|4))}}else q.unshift.apply(q,nt);Q=Q.parent}return q.filter(function(Tt){return lo(Tt.target,P)})},H}(),yc=function(H,P,b,Q){H.container.elements.forEach(function(q){var nt=lo(q.flags,4),ft=lo(q.flags,2),St=new wf(q,H);lo(q.styles.display,2048)&&Q.push(St);var Tt=lo(q.flags,8)?[]:Q;if(nt||ft){var Wt=nt||q.styles.isPositioned()?b:P,$t=new ng(St);if(q.styles.isPositioned()||q.styles.opacity<1||q.styles.isTransformed()){var me=q.styles.zIndex.order;if(me<0){var we=0;Wt.negativeZIndex.some(function(Ye,lr){return me>Ye.element.container.styles.zIndex.order?(we=lr,!1):we>0}),Wt.negativeZIndex.splice(we,0,$t)}else if(me>0){var Lr=0;Wt.positiveZIndex.some(function(Ye,lr){return me>=Ye.element.container.styles.zIndex.order?(Lr=lr+1,!1):Lr>0}),Wt.positiveZIndex.splice(Lr,0,$t)}else Wt.zeroOrAutoZIndexOrTransformedOrOpacity.push($t)}else q.styles.isFloating()?Wt.nonPositionedFloats.push($t):Wt.nonPositionedInlineLevel.push($t);yc(St,$t,nt?$t:b,Tt)}else q.styles.isInlineLevel()?P.inlineLevel.push(St):P.nonInlineLevel.push(St),yc(St,P,b,Tt);lo(q.flags,8)&&Fm(q,Tt)})},Fm=function(H,P){for(var b=H instanceof Ho?H.start:1,Q=H instanceof Ho?H.reversed:!1,q=0;q<P.length;q++){var nt=P[q];nt.container instanceof Oo&&typeof nt.container.value=="number"&&nt.container.value!==0&&(b=nt.container.value),nt.listValue=Tl(b,nt.container.styles.listStyleType,!0),b+=Q?-1:1}},Xp=function(H){var P=new wf(H,null),b=new ng(P),Q=[];return yc(P,b,b,Q),Fm(P.container,Q),b},ou=function(H,P){switch(P){case 0:return ki(H.topLeftBorderBox,H.topLeftPaddingBox,H.topRightBorderBox,H.topRightPaddingBox);case 1:return ki(H.topRightBorderBox,H.topRightPaddingBox,H.bottomRightBorderBox,H.bottomRightPaddingBox);case 2:return ki(H.bottomRightBorderBox,H.bottomRightPaddingBox,H.bottomLeftBorderBox,H.bottomLeftPaddingBox);case 3:default:return ki(H.bottomLeftBorderBox,H.bottomLeftPaddingBox,H.topLeftBorderBox,H.topLeftPaddingBox)}},Rm=function(H,P){switch(P){case 0:return ki(H.topLeftBorderBox,H.topLeftBorderDoubleOuterBox,H.topRightBorderBox,H.topRightBorderDoubleOuterBox);case 1:return ki(H.topRightBorderBox,H.topRightBorderDoubleOuterBox,H.bottomRightBorderBox,H.bottomRightBorderDoubleOuterBox);case 2:return ki(H.bottomRightBorderBox,H.bottomRightBorderDoubleOuterBox,H.bottomLeftBorderBox,H.bottomLeftBorderDoubleOuterBox);case 3:default:return ki(H.bottomLeftBorderBox,H.bottomLeftBorderDoubleOuterBox,H.topLeftBorderBox,H.topLeftBorderDoubleOuterBox)}},Fa=function(H,P){switch(P){case 0:return ki(H.topLeftBorderDoubleInnerBox,H.topLeftPaddingBox,H.topRightBorderDoubleInnerBox,H.topRightPaddingBox);case 1:return ki(H.topRightBorderDoubleInnerBox,H.topRightPaddingBox,H.bottomRightBorderDoubleInnerBox,H.bottomRightPaddingBox);case 2:return ki(H.bottomRightBorderDoubleInnerBox,H.bottomRightPaddingBox,H.bottomLeftBorderDoubleInnerBox,H.bottomLeftPaddingBox);case 3:default:return ki(H.bottomLeftBorderDoubleInnerBox,H.bottomLeftPaddingBox,H.topLeftBorderDoubleInnerBox,H.topLeftPaddingBox)}},Kp=function(H,P){switch(P){case 0:return su(H.topLeftBorderStroke,H.topRightBorderStroke);case 1:return su(H.topRightBorderStroke,H.bottomRightBorderStroke);case 2:return su(H.bottomRightBorderStroke,H.bottomLeftBorderStroke);case 3:default:return su(H.bottomLeftBorderStroke,H.topLeftBorderStroke)}},su=function(H,P){var b=[];return Vo(H)?b.push(H.subdivide(.5,!1)):b.push(H),Vo(P)?b.push(P.subdivide(.5,!0)):b.push(P),b},ki=function(H,P,b,Q){var q=[];return Vo(H)?q.push(H.subdivide(.5,!1)):q.push(H),Vo(b)?q.push(b.subdivide(.5,!0)):q.push(b),Vo(Q)?q.push(Q.subdivide(.5,!0).reverse()):q.push(Q),Vo(P)?q.push(P.subdivide(.5,!1).reverse()):q.push(P),q},ig=function(H){var P=H.bounds,b=H.styles;return P.add(b.borderLeftWidth,b.borderTopWidth,-(b.borderRightWidth+b.borderLeftWidth),-(b.borderTopWidth+b.borderBottomWidth))},Cf=function(H){var P=H.styles,b=H.bounds,Q=ji(P.paddingLeft,b.width),q=ji(P.paddingRight,b.width),nt=ji(P.paddingTop,b.width),ft=ji(P.paddingBottom,b.width);return b.add(Q+P.borderLeftWidth,nt+P.borderTopWidth,-(P.borderRightWidth+P.borderLeftWidth+Q+q),-(P.borderTopWidth+P.borderBottomWidth+nt+ft))},Mf=function(H,P){return H===0?P.bounds:H===2?Cf(P):ig(P)},au=function(H,P){return H===0?P.bounds:H===2?Cf(P):ig(P)},Qu=function(H,P,b){var Q=Mf(uu(H.styles.backgroundOrigin,P),H),q=au(uu(H.styles.backgroundClip,P),H),nt=_f(uu(H.styles.backgroundSize,P),b,Q),ft=nt[0],St=nt[1],Tt=ia(uu(H.styles.backgroundPosition,P),Q.width-ft,Q.height-St),Wt=gh(uu(H.styles.backgroundRepeat,P),Tt,nt,Q,q),$t=Math.round(Q.left+Tt[0]),me=Math.round(Q.top+Tt[1]);return[Wt,$t,me,ft,St]},Ns=function(H){return di(H)&&H.value===qA.AUTO},Au=function(H){return typeof H=="number"},_f=function(H,P,b){var Q=P[0],q=P[1],nt=P[2],ft=H[0],St=H[1];if(!ft)return[0,0];if(Uo(ft)&&St&&Uo(St))return[ji(ft,b.width),ji(St,b.height)];var Tt=Au(nt);if(di(ft)&&(ft.value===qA.CONTAIN||ft.value===qA.COVER)){if(Au(nt)){var Wt=b.width/b.height;return Wt<nt!=(ft.value===qA.COVER)?[b.width,b.width/nt]:[b.height*nt,b.height]}return[b.width,b.height]}var $t=Au(Q),me=Au(q),we=$t||me;if(Ns(ft)&&(!St||Ns(St))){if($t&&me)return[Q,q];if(!Tt&&!we)return[b.width,b.height];if(we&&Tt){var Lr=$t?Q:q*nt,Ye=me?q:Q/nt;return[Lr,Ye]}var lr=$t?Q:b.width,mn=me?q:b.height;return[lr,mn]}if(Tt){var Ar=0,qe=0;return Uo(ft)?Ar=ji(ft,b.width):Uo(St)&&(qe=ji(St,b.height)),Ns(ft)?Ar=qe*nt:(!St||Ns(St))&&(qe=Ar/nt),[Ar,qe]}var gi=null,Fr=null;if(Uo(ft)?gi=ji(ft,b.width):St&&Uo(St)&&(Fr=ji(St,b.height)),gi!==null&&(!St||Ns(St))&&(Fr=$t&&me?gi/Q*q:b.height),Fr!==null&&Ns(ft)&&(gi=$t&&me?Fr/q*Q:b.width),gi!==null&&Fr!==null)return[gi,Fr];throw new Error("Unable to calculate background-size for element")},uu=function(H,P){var b=H[P];return typeof b=="undefined"?H[0]:b},gh=function(H,P,b,Q,q){var nt=P[0],ft=P[1],St=b[0],Tt=b[1];switch(H){case 2:return[new Ve(Math.round(Q.left),Math.round(Q.top+ft)),new Ve(Math.round(Q.left+Q.width),Math.round(Q.top+ft)),new Ve(Math.round(Q.left+Q.width),Math.round(Tt+Q.top+ft)),new Ve(Math.round(Q.left),Math.round(Tt+Q.top+ft))];case 3:return[new Ve(Math.round(Q.left+nt),Math.round(Q.top)),new Ve(Math.round(Q.left+nt+St),Math.round(Q.top)),new Ve(Math.round(Q.left+nt+St),Math.round(Q.height+Q.top)),new Ve(Math.round(Q.left+nt),Math.round(Q.height+Q.top))];case 1:return[new Ve(Math.round(Q.left+nt),Math.round(Q.top+ft)),new Ve(Math.round(Q.left+nt+St),Math.round(Q.top+ft)),new Ve(Math.round(Q.left+nt+St),Math.round(Q.top+ft+Tt)),new Ve(Math.round(Q.left+nt),Math.round(Q.top+ft+Tt))];default:return[new Ve(Math.round(q.left),Math.round(q.top)),new Ve(Math.round(q.left+q.width),Math.round(q.top)),new Ve(Math.round(q.left+q.width),Math.round(q.height+q.top)),new Ve(Math.round(q.left),Math.round(q.height+q.top))]}},xc="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Bf="Hidden Text",Fl=function(){function H(P){this._data={},this._document=P}return H.prototype.parseMetrics=function(P,b){var Q=this._document.createElement("div"),q=this._document.createElement("img"),nt=this._document.createElement("span"),ft=this._document.body;Q.style.visibility="hidden",Q.style.fontFamily=P,Q.style.fontSize=b,Q.style.margin="0",Q.style.padding="0",Q.style.whiteSpace="nowrap",ft.appendChild(Q),q.src=xc,q.width=1,q.height=1,q.style.margin="0",q.style.padding="0",q.style.verticalAlign="baseline",nt.style.fontFamily=P,nt.style.fontSize=b,nt.style.margin="0",nt.style.padding="0",nt.appendChild(this._document.createTextNode(Bf)),Q.appendChild(nt),Q.appendChild(q);var St=q.offsetTop-nt.offsetTop+2;Q.removeChild(nt),Q.appendChild(this._document.createTextNode(Bf)),Q.style.lineHeight="normal",q.style.verticalAlign="super";var Tt=q.offsetTop-Q.offsetTop+2;return ft.removeChild(Q),{baseline:St,middle:Tt}},H.prototype.getMetrics=function(P,b){var Q=P+" "+b;return typeof this._data[Q]=="undefined"&&(this._data[Q]=this.parseMetrics(P,b)),this._data[Q]},H}(),Yp=function(){function H(P,b){this.context=P,this.options=b}return H}(),Pm=1e4,Zp=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this;return q._activeEffects=[],q.canvas=Q.canvas?Q.canvas:document.createElement("canvas"),q.ctx=q.canvas.getContext("2d"),Q.canvas||(q.canvas.width=Math.floor(Q.width*Q.scale),q.canvas.height=Math.floor(Q.height*Q.scale),q.canvas.style.width=Q.width+"px",q.canvas.style.height=Q.height+"px"),q.fontMetrics=new Fl(document),q.ctx.scale(q.options.scale,q.options.scale),q.ctx.translate(-Q.x,-Q.y),q.ctx.textBaseline="bottom",q._activeEffects=[],q.context.logger.debug("Canvas renderer initialized ("+Q.width+"x"+Q.height+") with scale "+Q.scale),q}return P.prototype.applyEffects=function(b){for(var Q=this;this._activeEffects.length;)this.popEffect();b.forEach(function(q){return Q.applyEffect(q)})},P.prototype.applyEffect=function(b){this.ctx.save(),Lm(b)&&(this.ctx.globalAlpha=b.opacity),r0(b)&&(this.ctx.translate(b.offsetX,b.offsetY),this.ctx.transform(b.matrix[0],b.matrix[1],b.matrix[2],b.matrix[3],b.matrix[4],b.matrix[5]),this.ctx.translate(-b.offsetX,-b.offsetY)),xf(b)&&(this.path(b.path),this.ctx.clip()),this._activeEffects.push(b)},P.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},P.prototype.renderStack=function(b){return Ut(this,void 0,void 0,function(){var Q;return ce(this,function(q){switch(q.label){case 0:return Q=b.element.container.styles,Q.isVisible()?[4,this.renderStackContent(b)]:[3,2];case 1:q.sent(),q.label=2;case 2:return[2]}})})},P.prototype.renderNode=function(b){return Ut(this,void 0,void 0,function(){return ce(this,function(Q){switch(Q.label){case 0:if(lo(b.container.flags,16))debugger;return b.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(b)]:[3,3];case 1:return Q.sent(),[4,this.renderNodeContent(b)];case 2:Q.sent(),Q.label=3;case 3:return[2]}})})},P.prototype.renderTextWithLetterSpacing=function(b,Q,q){var nt=this;if(Q===0)this.ctx.fillText(b.text,b.bounds.left,b.bounds.top+q);else{var ft=Sp(b.text);ft.reduce(function(St,Tt){return nt.ctx.fillText(Tt,St,b.bounds.top+q),St+nt.ctx.measureText(Tt).width},b.bounds.left)}},P.prototype.createFontStyle=function(b){var Q=b.fontVariant.filter(function(ft){return ft==="normal"||ft==="small-caps"}).join(""),q=Ef(b.fontFamily).join(", "),nt=wu(b.fontSize)?""+b.fontSize.number+b.fontSize.unit:b.fontSize.number+"px";return[[b.fontStyle,Q,b.fontWeight,nt,q].join(" "),q,nt]},P.prototype.renderTextNode=function(b,Q){return Ut(this,void 0,void 0,function(){var q,nt,ft,St,Tt,Wt,$t,me,we=this;return ce(this,function(Lr){return q=this.createFontStyle(Q),nt=q[0],ft=q[1],St=q[2],this.ctx.font=nt,this.ctx.direction=Q.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",Tt=this.fontMetrics.getMetrics(ft,St),Wt=Tt.baseline,$t=Tt.middle,me=Q.paintOrder,b.textBounds.forEach(function(Ye){me.forEach(function(lr){switch(lr){case 0:we.ctx.fillStyle=Eo(Q.color),we.renderTextWithLetterSpacing(Ye,Q.letterSpacing,Wt);var mn=Q.textShadow;mn.length&&Ye.text.trim().length&&(mn.slice(0).reverse().forEach(function(Ar){we.ctx.shadowColor=Eo(Ar.color),we.ctx.shadowOffsetX=Ar.offsetX.number*we.options.scale,we.ctx.shadowOffsetY=Ar.offsetY.number*we.options.scale,we.ctx.shadowBlur=Ar.blur.number,we.renderTextWithLetterSpacing(Ye,Q.letterSpacing,Wt)}),we.ctx.shadowColor="",we.ctx.shadowOffsetX=0,we.ctx.shadowOffsetY=0,we.ctx.shadowBlur=0),Q.textDecorationLine.length&&(we.ctx.fillStyle=Eo(Q.textDecorationColor||Q.color),Q.textDecorationLine.forEach(function(Ar){switch(Ar){case 1:we.ctx.fillRect(Ye.bounds.left,Math.round(Ye.bounds.top+Wt),Ye.bounds.width,1);break;case 2:we.ctx.fillRect(Ye.bounds.left,Math.round(Ye.bounds.top),Ye.bounds.width,1);break;case 3:we.ctx.fillRect(Ye.bounds.left,Math.ceil(Ye.bounds.top+$t),Ye.bounds.width,1);break}}));break;case 1:Q.webkitTextStrokeWidth&&Ye.text.trim().length&&(we.ctx.strokeStyle=Eo(Q.webkitTextStrokeColor),we.ctx.lineWidth=Q.webkitTextStrokeWidth,we.ctx.lineJoin=window.chrome?"miter":"round",we.ctx.strokeText(Ye.text,Ye.bounds.left,Ye.bounds.top+Wt)),we.ctx.strokeStyle="",we.ctx.lineWidth=0,we.ctx.lineJoin="miter";break}})}),[2]})})},P.prototype.renderReplacedElement=function(b,Q,q){if(q&&b.intrinsicWidth>0&&b.intrinsicHeight>0){var nt=Cf(b),ft=Ll(Q);this.path(ft),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(q,0,0,b.intrinsicWidth,b.intrinsicHeight,nt.left,nt.top,nt.width,nt.height),this.ctx.restore()}},P.prototype.renderNodeContent=function(b){return Ut(this,void 0,void 0,function(){var Q,q,nt,ft,St,Tt,Wt,Wt,$t,me,we,Lr,Ye,lr,mn,Ar,qe,gi,Fr,Wt,Fi,Ye,Ar;return ce(this,function(vr){switch(vr.label){case 0:this.applyEffects(b.getEffects(4)),Q=b.container,q=b.curves,nt=Q.styles,ft=0,St=Q.textNodes,vr.label=1;case 1:return ft<St.length?(Tt=St[ft],[4,this.renderTextNode(Tt,nt)]):[3,4];case 2:vr.sent(),vr.label=3;case 3:return ft++,[3,1];case 4:if(!(Q instanceof Cl))return[3,8];vr.label=5;case 5:return vr.trys.push([5,7,,8]),[4,this.context.cache.match(Q.src)];case 6:return Wt=vr.sent(),this.renderReplacedElement(Q,q,Wt),[3,8];case 7:return vr.sent(),this.context.logger.error("Error loading image "+Q.src),[3,8];case 8:if(Q instanceof pm&&this.renderReplacedElement(Q,q,Q.canvas),!(Q instanceof dm))return[3,12];vr.label=9;case 9:return vr.trys.push([9,11,,12]),[4,this.context.cache.match(Q.svg)];case 10:return Wt=vr.sent(),this.renderReplacedElement(Q,q,Wt),[3,12];case 11:return vr.sent(),this.context.logger.error("Error loading svg "+Q.svg.substring(0,255)),[3,12];case 12:return Q instanceof cf&&Q.tree?($t=new P(this.context,{scale:this.options.scale,backgroundColor:Q.backgroundColor,x:0,y:0,width:Q.width,height:Q.height}),[4,$t.render(Q.tree)]):[3,14];case 13:me=vr.sent(),Q.width&&Q.height&&this.ctx.drawImage(me,0,0,Q.width,Q.height,Q.bounds.left,Q.bounds.top,Q.bounds.width,Q.bounds.height),vr.label=14;case 14:if(Q instanceof lc&&(we=Math.min(Q.bounds.width,Q.bounds.height),Q.type===hf?Q.checked&&(this.ctx.save(),this.path([new Ve(Q.bounds.left+we*.39363,Q.bounds.top+we*.79),new Ve(Q.bounds.left+we*.16,Q.bounds.top+we*.5549),new Ve(Q.bounds.left+we*.27347,Q.bounds.top+we*.44071),new Ve(Q.bounds.left+we*.39694,Q.bounds.top+we*.5649),new Ve(Q.bounds.left+we*.72983,Q.bounds.top+we*.23),new Ve(Q.bounds.left+we*.84,Q.bounds.top+we*.34085),new Ve(Q.bounds.left+we*.39363,Q.bounds.top+we*.79)]),this.ctx.fillStyle=Eo(Rp),this.ctx.fill(),this.ctx.restore()):Q.type===uc&&Q.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(Q.bounds.left+we/2,Q.bounds.top+we/2,we/4,0,Math.PI*2,!0),this.ctx.fillStyle=Eo(Rp),this.ctx.fill(),this.ctx.restore())),og(Q)&&Q.value.length){switch(Lr=this.createFontStyle(nt),Ye=Lr[0],lr=Lr[1],mn=this.fontMetrics.getMetrics(Ye,lr).baseline,this.ctx.font=Ye,this.ctx.fillStyle=Eo(nt.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=qp(Q.styles.textAlign),Ar=Cf(Q),qe=0,Q.styles.textAlign){case 1:qe+=Ar.width/2;break;case 2:qe+=Ar.width;break}gi=Ar.add(qe,0,0,-Ar.height/2+1),this.ctx.save(),this.path([new Ve(Ar.left,Ar.top),new Ve(Ar.left+Ar.width,Ar.top),new Ve(Ar.left+Ar.width,Ar.top+Ar.height),new Ve(Ar.left,Ar.top+Ar.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new NA(Q.value,gi),nt.letterSpacing,mn),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!lo(Q.styles.display,2048))return[3,20];if(Q.styles.listStyleImage===null)return[3,19];if(Fr=Q.styles.listStyleImage,Fr.type!==0)return[3,18];Wt=void 0,Fi=Fr.url,vr.label=15;case 15:return vr.trys.push([15,17,,18]),[4,this.context.cache.match(Fi)];case 16:return Wt=vr.sent(),this.ctx.drawImage(Wt,Q.bounds.left-(Wt.width+10),Q.bounds.top),[3,18];case 17:return vr.sent(),this.context.logger.error("Error loading list-style-image "+Fi),[3,18];case 18:return[3,20];case 19:b.listValue&&Q.styles.listStyleType!==-1&&(Ye=this.createFontStyle(nt)[0],this.ctx.font=Ye,this.ctx.fillStyle=Eo(nt.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Ar=new Ot(Q.bounds.left,Q.bounds.top+ji(Q.styles.paddingTop,Q.bounds.width),Q.bounds.width,$c(nt.lineHeight,nt.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new NA(b.listValue,Ar),nt.letterSpacing,$c(nt.lineHeight,nt.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),vr.label=20;case 20:return[2]}})})},P.prototype.renderStackContent=function(b){return Ut(this,void 0,void 0,function(){var Q,q,nt,ft,St,nt,Tt,Wt,nt,$t,me,nt,we,Lr,nt,Ye,lr,nt,mn,Ar,nt;return ce(this,function(qe){switch(qe.label){case 0:if(lo(b.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(b.element)];case 1:qe.sent(),Q=0,q=b.negativeZIndex,qe.label=2;case 2:return Q<q.length?(nt=q[Q],[4,this.renderStack(nt)]):[3,5];case 3:qe.sent(),qe.label=4;case 4:return Q++,[3,2];case 5:return[4,this.renderNodeContent(b.element)];case 6:qe.sent(),ft=0,St=b.nonInlineLevel,qe.label=7;case 7:return ft<St.length?(nt=St[ft],[4,this.renderNode(nt)]):[3,10];case 8:qe.sent(),qe.label=9;case 9:return ft++,[3,7];case 10:Tt=0,Wt=b.nonPositionedFloats,qe.label=11;case 11:return Tt<Wt.length?(nt=Wt[Tt],[4,this.renderStack(nt)]):[3,14];case 12:qe.sent(),qe.label=13;case 13:return Tt++,[3,11];case 14:$t=0,me=b.nonPositionedInlineLevel,qe.label=15;case 15:return $t<me.length?(nt=me[$t],[4,this.renderStack(nt)]):[3,18];case 16:qe.sent(),qe.label=17;case 17:return $t++,[3,15];case 18:we=0,Lr=b.inlineLevel,qe.label=19;case 19:return we<Lr.length?(nt=Lr[we],[4,this.renderNode(nt)]):[3,22];case 20:qe.sent(),qe.label=21;case 21:return we++,[3,19];case 22:Ye=0,lr=b.zeroOrAutoZIndexOrTransformedOrOpacity,qe.label=23;case 23:return Ye<lr.length?(nt=lr[Ye],[4,this.renderStack(nt)]):[3,26];case 24:qe.sent(),qe.label=25;case 25:return Ye++,[3,23];case 26:mn=0,Ar=b.positiveZIndex,qe.label=27;case 27:return mn<Ar.length?(nt=Ar[mn],[4,this.renderStack(nt)]):[3,30];case 28:qe.sent(),qe.label=29;case 29:return mn++,[3,27];case 30:return[2]}})})},P.prototype.mask=function(b){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(b.slice(0).reverse()),this.ctx.closePath()},P.prototype.path=function(b){this.ctx.beginPath(),this.formatPath(b),this.ctx.closePath()},P.prototype.formatPath=function(b){var Q=this;b.forEach(function(q,nt){var ft=Vo(q)?q.start:q;nt===0?Q.ctx.moveTo(ft.x,ft.y):Q.ctx.lineTo(ft.x,ft.y),Vo(q)&&Q.ctx.bezierCurveTo(q.startControl.x,q.startControl.y,q.endControl.x,q.endControl.y,q.end.x,q.end.y)})},P.prototype.renderRepeat=function(b,Q,q,nt){this.path(b),this.ctx.fillStyle=Q,this.ctx.translate(q,nt),this.ctx.fill(),this.ctx.translate(-q,-nt)},P.prototype.resizeImage=function(b,Q,q){var nt;if(b.width===Q&&b.height===q)return b;var ft=(nt=this.canvas.ownerDocument)!==null&&nt!==void 0?nt:document,St=ft.createElement("canvas");St.width=Math.max(1,Q),St.height=Math.max(1,q);var Tt=St.getContext("2d");return Tt.drawImage(b,0,0,b.width,b.height,0,0,Q,q),St},P.prototype.renderBackgroundImage=function(b){return Ut(this,void 0,void 0,function(){var Q,q,nt,ft,St,Tt;return ce(this,function(Wt){switch(Wt.label){case 0:Q=b.styles.backgroundImage.length-1,q=function($t){var me,we,Lr,Ye,lr,mn,Ar,qe,gi,Fr,Ye,lr,mn,Ar,qe,Fi,vr,qn,Gi,Dn,cs,$o,ws,Cs,gi,lu,Ye,mi,Pl,Ar,qe,Ul,lr,mn,fo,zs,$n,pA,Ji,Ya,mh,hu;return ce(this,function(dA){switch(dA.label){case 0:if($t.type!==0)return[3,5];me=void 0,we=$t.url,dA.label=1;case 1:return dA.trys.push([1,3,,4]),[4,nt.context.cache.match(we)];case 2:return me=dA.sent(),[3,4];case 3:return dA.sent(),nt.context.logger.error("Error loading background-image "+we),[3,4];case 4:return me&&(Lr=Qu(b,Q,[me.width,me.height,me.width/me.height]),Ye=Lr[0],lr=Lr[1],mn=Lr[2],Ar=Lr[3],qe=Lr[4],gi=nt.ctx.createPattern(nt.resizeImage(me,Ar,qe),"repeat"),nt.renderRepeat(Ye,gi,lr,mn)),[3,6];case 5:fp($t)?(Fr=Qu(b,Q,[null,null,null]),Ye=Fr[0],lr=Fr[1],mn=Fr[2],Ar=Fr[3],qe=Fr[4],Fi=Fs($t.angle,Ar,qe),vr=Fi[0],qn=Fi[1],Gi=Fi[2],Dn=Fi[3],cs=Fi[4],$o=document.createElement("canvas"),$o.width=Ar,$o.height=qe,ws=$o.getContext("2d"),Cs=ws.createLinearGradient(qn,Dn,Gi,cs),ka($t.stops,vr).forEach(function(So){return Cs.addColorStop(So.stop,Eo(So.color))}),ws.fillStyle=Cs,ws.fillRect(0,0,Ar,qe),Ar>0&&qe>0&&(gi=nt.ctx.createPattern($o,"repeat"),nt.renderRepeat(Ye,gi,lr,mn))):Js($t)&&(lu=Qu(b,Q,[null,null,null]),Ye=lu[0],mi=lu[1],Pl=lu[2],Ar=lu[3],qe=lu[4],Ul=$t.position.length===0?[rl]:$t.position,lr=ji(Ul[0],Ar),mn=ji(Ul[Ul.length-1],qe),fo=gs($t,lr,mn,Ar,qe),zs=fo[0],$n=fo[1],zs>0&&$n>0&&(pA=nt.ctx.createRadialGradient(mi+lr,Pl+mn,0,mi+lr,Pl+mn,zs),ka($t.stops,zs*2).forEach(function(So){return pA.addColorStop(So.stop,Eo(So.color))}),nt.path(Ye),nt.ctx.fillStyle=pA,zs!==$n?(Ji=b.bounds.left+.5*b.bounds.width,Ya=b.bounds.top+.5*b.bounds.height,mh=$n/zs,hu=1/mh,nt.ctx.save(),nt.ctx.translate(Ji,Ya),nt.ctx.transform(1,0,0,mh,0,0),nt.ctx.translate(-Ji,-Ya),nt.ctx.fillRect(mi,hu*(Pl-Ya)+Ya,Ar,qe*hu),nt.ctx.restore()):nt.ctx.fill())),dA.label=6;case 6:return Q--,[2]}})},nt=this,ft=0,St=b.styles.backgroundImage.slice(0).reverse(),Wt.label=1;case 1:return ft<St.length?(Tt=St[ft],[5,q(Tt)]):[3,4];case 2:Wt.sent(),Wt.label=3;case 3:return ft++,[3,1];case 4:return[2]}})})},P.prototype.renderSolidBorder=function(b,Q,q){return Ut(this,void 0,void 0,function(){return ce(this,function(nt){return this.path(ou(q,Q)),this.ctx.fillStyle=Eo(b),this.ctx.fill(),[2]})})},P.prototype.renderDoubleBorder=function(b,Q,q,nt){return Ut(this,void 0,void 0,function(){var ft,St;return ce(this,function(Tt){switch(Tt.label){case 0:return Q<3?[4,this.renderSolidBorder(b,q,nt)]:[3,2];case 1:return Tt.sent(),[2];case 2:return ft=Rm(nt,q),this.path(ft),this.ctx.fillStyle=Eo(b),this.ctx.fill(),St=Fa(nt,q),this.path(St),this.ctx.fill(),[2]}})})},P.prototype.renderNodeBackgroundAndBorders=function(b){return Ut(this,void 0,void 0,function(){var Q,q,nt,ft,St,Tt,Wt,$t,me=this;return ce(this,function(we){switch(we.label){case 0:return this.applyEffects(b.getEffects(2)),Q=b.container.styles,q=!Bu(Q.backgroundColor)||Q.backgroundImage.length,nt=[{style:Q.borderTopStyle,color:Q.borderTopColor,width:Q.borderTopWidth},{style:Q.borderRightStyle,color:Q.borderRightColor,width:Q.borderRightWidth},{style:Q.borderBottomStyle,color:Q.borderBottomColor,width:Q.borderBottomWidth},{style:Q.borderLeftStyle,color:Q.borderLeftColor,width:Q.borderLeftWidth}],ft=Jp(uu(Q.backgroundClip,0),b.curves),q||Q.boxShadow.length?(this.ctx.save(),this.path(ft),this.ctx.clip(),Bu(Q.backgroundColor)||(this.ctx.fillStyle=Eo(Q.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(b.container)]):[3,2];case 1:we.sent(),this.ctx.restore(),Q.boxShadow.slice(0).reverse().forEach(function(Lr){me.ctx.save();var Ye=dh(b.curves),lr=Lr.inset?0:Pm,mn=rg(Ye,-lr+(Lr.inset?1:-1)*Lr.spread.number,(Lr.inset?1:-1)*Lr.spread.number,Lr.spread.number*(Lr.inset?-2:2),Lr.spread.number*(Lr.inset?-2:2));Lr.inset?(me.path(Ye),me.ctx.clip(),me.mask(mn)):(me.mask(Ye),me.ctx.clip(),me.path(mn)),me.ctx.shadowOffsetX=Lr.offsetX.number+lr,me.ctx.shadowOffsetY=Lr.offsetY.number,me.ctx.shadowColor=Eo(Lr.color),me.ctx.shadowBlur=Lr.blur.number,me.ctx.fillStyle=Lr.inset?Eo(Lr.color):"rgba(0,0,0,1)",me.ctx.fill(),me.ctx.restore()}),we.label=2;case 2:St=0,Tt=0,Wt=nt,we.label=3;case 3:return Tt<Wt.length?($t=Wt[Tt],$t.style!==0&&!Bu($t.color)&&$t.width>0?$t.style!==2?[3,5]:[4,this.renderDashedDottedBorder($t.color,$t.width,St,b.curves,2)]:[3,11]):[3,13];case 4:return we.sent(),[3,11];case 5:return $t.style!==3?[3,7]:[4,this.renderDashedDottedBorder($t.color,$t.width,St,b.curves,3)];case 6:return we.sent(),[3,11];case 7:return $t.style!==4?[3,9]:[4,this.renderDoubleBorder($t.color,$t.width,St,b.curves)];case 8:return we.sent(),[3,11];case 9:return[4,this.renderSolidBorder($t.color,St,b.curves)];case 10:we.sent(),we.label=11;case 11:St++,we.label=12;case 12:return Tt++,[3,3];case 13:return[2]}})})},P.prototype.renderDashedDottedBorder=function(b,Q,q,nt,ft){return Ut(this,void 0,void 0,function(){var St,Tt,Wt,$t,me,we,Lr,Ye,lr,mn,Ar,qe,gi,Fr,Fi,vr,Fi,vr;return ce(this,function(qn){return this.ctx.save(),St=Kp(nt,q),Tt=ou(nt,q),ft===2&&(this.path(Tt),this.ctx.clip()),Vo(Tt[0])?(Wt=Tt[0].start.x,$t=Tt[0].start.y):(Wt=Tt[0].x,$t=Tt[0].y),Vo(Tt[1])?(me=Tt[1].end.x,we=Tt[1].end.y):(me=Tt[1].x,we=Tt[1].y),q===0||q===2?Lr=Math.abs(Wt-me):Lr=Math.abs($t-we),this.ctx.beginPath(),ft===3?this.formatPath(St):this.formatPath(Tt.slice(0,2)),Ye=Q<3?Q*3:Q*2,lr=Q<3?Q*2:Q,ft===3&&(Ye=Q,lr=Q),mn=!0,Lr<=Ye*2?mn=!1:Lr<=Ye*2+lr?(Ar=Lr/(2*Ye+lr),Ye*=Ar,lr*=Ar):(qe=Math.floor((Lr+lr)/(Ye+lr)),gi=(Lr-qe*Ye)/(qe-1),Fr=(Lr-(qe+1)*Ye)/qe,lr=Fr<=0||Math.abs(lr-gi)<Math.abs(lr-Fr)?gi:Fr),mn&&(ft===3?this.ctx.setLineDash([0,Ye+lr]):this.ctx.setLineDash([Ye,lr])),ft===3?(this.ctx.lineCap="round",this.ctx.lineWidth=Q):this.ctx.lineWidth=Q*2+1.1,this.ctx.strokeStyle=Eo(b),this.ctx.stroke(),this.ctx.setLineDash([]),ft===2&&(Vo(Tt[0])&&(Fi=Tt[3],vr=Tt[0],this.ctx.beginPath(),this.formatPath([new Ve(Fi.end.x,Fi.end.y),new Ve(vr.start.x,vr.start.y)]),this.ctx.stroke()),Vo(Tt[1])&&(Fi=Tt[1],vr=Tt[2],this.ctx.beginPath(),this.formatPath([new Ve(Fi.end.x,Fi.end.y),new Ve(vr.start.x,vr.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},P.prototype.render=function(b){return Ut(this,void 0,void 0,function(){var Q;return ce(this,function(q){switch(q.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Eo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),Q=Xp(b),[4,this.renderStack(Q)];case 1:return q.sent(),this.applyEffects([]),[2,this.canvas]}})})},P}(Yp),og=function(H){return H instanceof Pp||H instanceof hc?!0:H instanceof lc&&H.type!==uc&&H.type!==hf},Jp=function(H,P){switch(H){case 0:return dh(P);case 2:return e0(P);case 1:default:return Ll(P)}},qp=function(H){switch(H){case 1:return"center";case 2:return"right";case 0:default:return"left"}},sg=["-apple-system","system-ui"],Ef=function(H){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?H.filter(function(P){return sg.indexOf(P)===-1}):H},If=function(H){Nt(P,H);function P(b,Q){var q=H.call(this,b,Q)||this;return q.canvas=Q.canvas?Q.canvas:document.createElement("canvas"),q.ctx=q.canvas.getContext("2d"),q.options=Q,q.canvas.width=Math.floor(Q.width*Q.scale),q.canvas.height=Math.floor(Q.height*Q.scale),q.canvas.style.width=Q.width+"px",q.canvas.style.height=Q.height+"px",q.ctx.scale(q.options.scale,q.options.scale),q.ctx.translate(-Q.x,-Q.y),q.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+Q.width+"x"+Q.height+" at "+Q.x+","+Q.y+") with scale "+Q.scale),q}return P.prototype.render=function(b){return Ut(this,void 0,void 0,function(){var Q,q;return ce(this,function(nt){switch(nt.label){case 0:return Q=lf(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,b),[4,Um(Q)];case 1:return q=nt.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Eo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(q,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},P}(Yp),Um=function(H){return new Promise(function(P,b){var Q=new Image;Q.onload=function(){P(Q)},Q.onerror=b,Q.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(H))})},Tf=function(){function H(P){var b=P.id,Q=P.enabled;this.id=b,this.enabled=Q,this.start=Date.now()}return H.prototype.debug=function(){for(var P=[],b=0;b<arguments.length;b++)P[b]=arguments[b];this.enabled&&(typeof window!="undefined"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Gt([this.id,this.getTime()+"ms"],P)):this.info.apply(this,P))},H.prototype.getTime=function(){return Date.now()-this.start},H.prototype.info=function(){for(var P=[],b=0;b<arguments.length;b++)P[b]=arguments[b];this.enabled&&typeof window!="undefined"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Gt([this.id,this.getTime()+"ms"],P))},H.prototype.warn=function(){for(var P=[],b=0;b<arguments.length;b++)P[b]=arguments[b];this.enabled&&(typeof window!="undefined"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Gt([this.id,this.getTime()+"ms"],P)):this.info.apply(this,P))},H.prototype.error=function(){for(var P=[],b=0;b<arguments.length;b++)P[b]=arguments[b];this.enabled&&(typeof window!="undefined"&&window.console&&typeof console.error=="function"?console.error.apply(console,Gt([this.id,this.getTime()+"ms"],P)):this.info.apply(this,P))},H.instances={},H}(),Rl=function(){function H(P,b){var Q;this.windowBounds=b,this.instanceName="#"+H.instanceCount++,this.logger=new Tf({id:this.instanceName,enabled:P.logging}),this.cache=(Q=P.cache)!==null&&Q!==void 0?Q:new Im(this,P)}return H.instanceCount=1,H}(),QA=function(H,P){return P===void 0&&(P={}),Ra(H,P)};typeof window!="undefined"&&Ka.setContext(window);var Ra=function(H,P){return Ut(void 0,void 0,void 0,function(){var b,Q,q,nt,ft,St,Tt,Wt,$t,me,we,Lr,Ye,lr,mn,Ar,qe,gi,Fr,Fi,vr,qn,vr,Gi,Dn,cs,$o,ws,Cs,lu,mi,Pl,Ul,fo,zs,$n,pA,Ji,Ya,mh;return ce(this,function(hu){switch(hu.label){case 0:if(!H||typeof H!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(b=H.ownerDocument,!b)throw new Error("Element is not attached to a Document");if(Q=b.defaultView,!Q)throw new Error("Document is not attached to a Window");return q={allowTaint:(Gi=P.allowTaint)!==null&&Gi!==void 0?Gi:!1,imageTimeout:(Dn=P.imageTimeout)!==null&&Dn!==void 0?Dn:15e3,proxy:P.proxy,useCORS:(cs=P.useCORS)!==null&&cs!==void 0?cs:!1},nt=xe({logging:($o=P.logging)!==null&&$o!==void 0?$o:!0,cache:P.cache},q),ft={windowWidth:(ws=P.windowWidth)!==null&&ws!==void 0?ws:Q.innerWidth,windowHeight:(Cs=P.windowHeight)!==null&&Cs!==void 0?Cs:Q.innerHeight,scrollX:(lu=P.scrollX)!==null&&lu!==void 0?lu:Q.pageXOffset,scrollY:(mi=P.scrollY)!==null&&mi!==void 0?mi:Q.pageYOffset},St=new Ot(ft.scrollX,ft.scrollY,ft.windowWidth,ft.windowHeight),Tt=new Rl(nt,St),Wt=(Pl=P.foreignObjectRendering)!==null&&Pl!==void 0?Pl:!1,$t={allowTaint:(Ul=P.allowTaint)!==null&&Ul!==void 0?Ul:!1,onclone:P.onclone,ignoreElements:P.ignoreElements,inlineImages:Wt,copyStyles:Wt},Tt.logger.debug("Starting document clone with size "+St.width+"x"+St.height+" scrolled to "+-St.left+","+-St.top),me=new qd(Tt,H,$t),we=me.clonedReferenceElement,we?[4,me.toIFrame(b,St)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Lr=hu.sent(),Ye=hA(we)||cc(we)?ve(we.ownerDocument):ue(Tt,we),lr=Ye.width,mn=Ye.height,Ar=Ye.left,qe=Ye.top,gi=Dm(Tt,we,P.backgroundColor),Fr={canvas:P.canvas,backgroundColor:gi,scale:(zs=(fo=P.scale)!==null&&fo!==void 0?fo:Q.devicePixelRatio)!==null&&zs!==void 0?zs:1,x:(($n=P.x)!==null&&$n!==void 0?$n:0)+Ar,y:((pA=P.y)!==null&&pA!==void 0?pA:0)+qe,width:(Ji=P.width)!==null&&Ji!==void 0?Ji:Math.ceil(lr),height:(Ya=P.height)!==null&&Ya!==void 0?Ya:Math.ceil(mn)},Wt?(Tt.logger.debug("Document cloned, using foreign object rendering"),vr=new If(Tt,Fr),[4,vr.render(we)]):[3,3];case 2:return Fi=hu.sent(),[3,5];case 3:return Tt.logger.debug("Document cloned, element located at "+Ar+","+qe+" with size "+lr+"x"+mn+" using computed rendering"),Tt.logger.debug("Starting DOM parsing"),qn=Zd(Tt,we),gi===qn.styles.backgroundColor&&(qn.styles.backgroundColor=oa.TRANSPARENT),Tt.logger.debug("Starting renderer for element at "+Fr.x+","+Fr.y+" with size "+Fr.width+"x"+Fr.height),vr=new Zp(Tt,Fr),[4,vr.render(qn)];case 4:Fi=hu.sent(),hu.label=5;case 5:return((mh=P.removeContainer)!==null&&mh!==void 0?mh:!0)&&(qd.destroy(Lr)||Tt.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),Tt.logger.debug("Finished rendering"),[2,Fi]}})})},Dm=function(H,P,b){var Q=P.ownerDocument,q=Q.documentElement?ZA(H,getComputedStyle(Q.documentElement).backgroundColor):oa.TRANSPARENT,nt=Q.body?ZA(H,getComputedStyle(Q.body).backgroundColor):oa.TRANSPARENT,ft=typeof b=="string"?ZA(H,b):b===null?oa.TRANSPARENT:4294967295;return P===Q.documentElement?Bu(q)?Bu(nt)?ft:nt:q:ft};return QA})},85924:function(wn,se,Nt){var xe=Nt(5569),Ut=xe(Object.getPrototypeOf,Object);wn.exports=Ut},5569:function(wn){function se(Nt,xe){return function(Ut){return Nt(xe(Ut))}}wn.exports=se},68630:function(wn,se,Nt){var xe=Nt(44239),Ut=Nt(85924),ce=Nt(37005),Gt="[object Object]",Ot=Function.prototype,ue=Object.prototype,ve=Ot.toString,ct=ue.hasOwnProperty,kt=ve.call(Object);function bt(Ht){if(!ce(Ht)||xe(Ht)!=Gt)return!1;var Zt=Ut(Ht);if(Zt===null)return!0;var he=ct.call(Zt,"constructor")&&Zt.constructor;return typeof he=="function"&&he instanceof he&&ve.call(he)==kt}wn.exports=bt},70507:function(wn,se,Nt){function xe(Ut,ce,Gt){for(var Ot=ce.length,ue=new Uint8Array(3*Ot/4-(ce[Ot-2]=="="?2:ce[Ot-1]=="="?1:0)),ve=new Uint8Array(130),ct=0;64>ct;ct++)ve["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(ct)]=ct;for(var kt=ct=0;ct<Ot;ct+=4){var bt=ve[ce.charCodeAt(ct+1)],Ht=ve[ce.charCodeAt(ct+2)];ue[kt++]=ve[ce.charCodeAt(ct)]<<2|bt>>4,ue[kt++]=(bt&15)<<4|Ht>>2,ue[kt++]=(Ht&3)<<6|ve[ce.charCodeAt(ct+3)]&63}return Gt&&!Ut?WebAssembly.instantiate(ue,Gt):Gt||Ut?(Ut=new WebAssembly.Module(ue),Gt?new WebAssembly.Instance(Ut,Gt):Ut):WebAssembly.compile(ue)}(function(Ut,ce){ce(se)})(this,function(Ut){function ce(a){this.options=a||{},this.paneName=this.options.paneName||"labelPane",this.zIndex=this.options.zIndex||1,this._map=a.map,this._lastDrawTime=null,this.show()}function Gt(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Ot(a,A){return A={exports:{}},a(A,A.exports),A.exports}function ue(a,A){return function(i){return A(a(i))}}function ve(a){var A=function(i){return i==null?i:(1<arguments.length&&(i=Array.prototype.slice.call(arguments)),a(i))};return"conversion"in a&&(A.conversion=a.conversion),A}function ct(a){var A=function(i){if(i==null)return i;1<arguments.length&&(i=Array.prototype.slice.call(arguments));var u=a(i);if((typeof u=="undefined"?"undefined":Mn(u))==="object")for(var m=u.length,p=0;p<m;p++)u[p]=Math.round(u[p]);return u};return"conversion"in a&&(A.conversion=a.conversion),A}function kt(a,A){if(!(this instanceof kt))return new kt(a,A);if(A&&A in sh&&(A=null),A&&!(A in Ia))throw Error("Unknown model: "+A);if(typeof a=="undefined")this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(a instanceof kt)this.model=a.model,this.color=a.color.slice(),this.valpha=a.valpha;else if(typeof a=="string"){if(A=rc.get(a),A===null)throw Error("Unable to parse color from string: "+a);this.model=A.model;var i=Ia[this.model].channels;this.color=A.value.slice(0,i),this.valpha=typeof A.value[i]=="number"?A.value[i]:1}else if(a.length)this.model=A||"rgb",i=Ia[this.model].channels,A=yp.call(a,0,i),this.color=he(A,i),this.valpha=typeof a[i]=="number"?a[i]:1;else if(typeof a=="number")a&=16777215,this.model="rgb",this.color=[a>>16&255,a>>8&255,a&255],this.valpha=1;else{if(this.valpha=1,A=_o(a),"alpha"in a&&(A.splice(A.indexOf("alpha"),1),this.valpha=typeof a.alpha=="number"?a.alpha:0),A=A.sort().join(""),!(A in xp))throw Error("Unable to parse color from object: "+oh(a));this.model=xp[A],i=Ia[this.model].labels;var u=[];for(A=0;A<i.length;A++)u.push(a[i[A]]);this.color=he(u)}if(as[this.model])for(i=Ia[this.model].channels,A=0;A<i;A++)(a=as[this.model][A])&&(this.color[A]=a(this.color[A]));this.valpha=Math.max(0,Math.min(1,this.valpha)),uA&&uA(this)}function bt(a){return function(A){return Number(A.toFixed(a))}}function Ht(a,A,i){return a=Array.isArray(a)?a:[a],a.forEach(function(u){(as[u]||(as[u]=[]))[A]=i}),a=a[0],function(u){if(arguments.length){i&&(u=i(u));var m=this[a]();return m.color[A]=u,m}return m=this[a]().color[A],i&&(m=i(m)),m}}function Zt(a){return function(A){return Math.max(0,Math.min(a,A))}}function he(a,A){for(var i=0;i<A;i++)typeof a[i]!="number"&&(a[i]=0);return a}function Ee(a){return a*Math.PI/180}function gt(a){return a/Math.PI*180}function Qe(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Rn(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function An(a,A){return 1e-8>Math.abs(a-A)}function Oe(a){var A=a[0],i=a[a.length-1];return Math.sqrt(Math.pow(A[0]-i[0],2)+Math.pow(A[1]-i[1],2)+Math.pow((A[2]||0)-(i[2]||0),2))<(1<arguments.length&&arguments[1]!==void 0?arguments[1]:2e-7)}function Nn(){}function hi(a,A){for(var i in A)a[i]=A[i]}function Bi(a,A){this.lng=a,this.lat=A}function mo(a,A){this.x=a,this.y=A}function ns(a,A){var i=document.createElement("canvas");return a&&(i.width=a),A&&(i.height=A),i}function ci(a){a=a||{},this.gradient=a.gradient||{"0.25":"rgba(0, 0, 255, 1)","0.55":"rgba(0, 255, 0, 1)","0.85":"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=a.maxSize===void 0?35:a.maxSize,this.minSize=a.minSize||0,this.max=a.max||100,this.min=a.min||0,this.initPalette()}function Ui(a){this.options=a||{},this._initialize()}function Je(a,A,i,u,m){var p=1-a,y=1-a;return p*p*p*A+3*y*y*a*i+3*(1-a)*a*a*u+a*a*a*m}function ks(a){this.WORLD_SIZE_MC_HALF=20037726372307256e-9,this.WORLD_SIZE_MC=2*this.WORLD_SIZE_MC_HALF,this.options=a||{},this._initialize()}function MA(a,A){return a&&A?Math.round(Math.sqrt(Math.pow(a.lng-A.lng,2)+Math.pow(a.lat-A.lat,2))):0}function eA(a){return a=a.split("|"),a[0]=a[0].split(","),{lng:parseFloat(a[0][0]),lat:parseFloat(a[0][1])}}function _A(a){for(var A=a.length;0<=--A;)a[A]=0}function hn(a,A,i,u,m){this.static_tree=a,this.extra_bits=A,this.extra_base=i,this.elems=u,this.max_length=m,this.has_stree=a&&a.length}function Qo(a,A){this.dyn_tree=a,this.max_code=0,this.stat_desc=A}function Kr(a,A,i,u,m){this.good_length=a,this.max_lazy=A,this.nice_length=i,this.max_chain=u,this.func=m}function $f(){this.strm=null,this.status=0,this.pending_buf=null,this.wrap=this.pending=this.pending_out=this.pending_buf_size=0,this.gzhead=null,this.gzindex=0,this.method=Jo,this.last_flush=-1,this.w_mask=this.w_bits=this.w_size=0,this.window=null,this.window_size=0,this.head=this.prev=null,this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),yl(this.dyn_ltree),yl(this.dyn_dtree),yl(this.bl_tree),this.bl_desc=this.d_desc=this.l_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),yl(this.heap),this.heap_max=this.heap_len=0,this.depth=new Uint16Array(573),yl(this.depth),this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function gu(a){a=this.options=ac.assign({level:Yv,method:Sp,chunkSize:16384,windowBits:15,memLevel:8,strategy:cm},a||{}),a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&16>a.windowBits&&(a.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uh,this.strm.avail_out=0;var A=sc.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(A!==NA)throw Error(To[A]);if(a.header&&sc.deflateSetHeader(this.strm,a.header),a.dictionary){if(a=typeof a.dictionary=="string"?xl.string2buf(a.dictionary):Tp.call(a.dictionary)==="[object ArrayBuffer]"?new Uint8Array(a.dictionary):a.dictionary,A=sc.deflateSetDictionary(this.strm,a),A!==NA)throw Error(To[A]);this._dict_set=!0}}function Gl(a,A){if(A=new gu(A),A.push(a,!0),A.err)throw A.msg||To[A.err];return A.result}function Hh(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.total=this.check=this.dmax=this.flags=0,this.head=null,this.wnext=this.whave=this.wsize=this.wbits=0,this.window=null,this.extra=this.offset=this.length=this.bits=this.hold=0,this.distcode=this.lencode=null,this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.distdyn=this.lendyn=null,this.was=this.back=this.sane=0}function BA(a){var A=this.options=ac.assign({chunkSize:65536,windowBits:15,to:""},a||{});if(A.raw&&0<=A.windowBits&&16>A.windowBits&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&16>A.windowBits)||a&&a.windowBits||(A.windowBits+=32),15<A.windowBits&&48>A.windowBits&&(A.windowBits&15)==0&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uh,this.strm.avail_out=0,a=Hu.inflateInit2(this.strm,A.windowBits),a!==pf||(this.header=new ff,Hu.inflateGetHeader(this.strm,this.header),A.dictionary&&(typeof A.dictionary=="string"?A.dictionary=xl.string2buf(A.dictionary):Up.call(A.dictionary)==="[object ArrayBuffer]"&&(A.dictionary=new Uint8Array(A.dictionary)),A.raw&&(a=Hu.inflateSetDictionary(this.strm,A.dictionary),a!==pf))))throw Error(To[a])}function EA(a,A){if(A=new BA(A),A.push(a),A.err)throw A.msg||To[A.err];return A.result}function Ju(a,A){for(var i=["webgl2","experimental-webgl2","webgl","experimental-webgl"],u=void 0,m=0;m<i.length;m++)try{if(u=a.getContext(i[m],{stencil:!0,alpha:!0,premultipliedAlpha:!1,antialias:A.antialias||!0,preserveDrawingBuffer:A.preserveDrawingBuffer||!1}))break}catch(p){}return u}function or(a,A,i){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};i=ln({TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"REPEAT",TEXTURE_WRAP_T:"REPEAT"},i);var m=a.createTexture();if(a.bindTexture(a.TEXTURE_2D,m),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,u.flipY||!0),u.format&&u.width){var p=a.LUMINANCE;u.format&&(p=a[u.format]),u.format!=="RGBA"&&u.format!=="RGB"?(A=new Float32Array(A),a.texImage2D(a.TEXTURE_2D,0,a.R32F,u.width,u.height,0,a.RED,a[u.type]||a.FLOAT,A)):a.texImage2D(a.TEXTURE_2D,0,p,u.width,u.height,0,p,a[u.type]||a.FLOAT,A)}else a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,A);for(var y in i)a.texParameteri(a.TEXTURE_2D,a[y],a[i[y]]);return a.bindTexture(a.TEXTURE_2D,null),{texture:m,data:{width:u.width,height:u.height,data:A,type:u.type}}}function wo(a,A,i,u,m){if((typeof A=="undefined"?"undefined":Mn(A))==="object")A=or(a,A,u,m),i(A.texture,null,A.data);else{var p=new Image;p.crossOrigin="anonymous",p.onload=function(){var y=Rn(p.width),v=Rn(p.height),M=document.createElement("canvas");M.width=y,M.height=v;var R=M.getContext("2d");R.drawImage(p,0,0,y,v),p=M,M=or(a,p,u,m).texture,i(M,p,{width:y,height:v,data:R.getImageData(0,0,y,v),type:"RGBA"})},p.src=A}}function Gs(a,A){if(A instanceof Array){var i={zero:a.ZERO,one:a.ONE,src_color:a.SRC_COLOR,one_minus_src_color:a.ONE_MINUS_SRC_COLOR,dst_color:a.DST_COLOR,one_minus_dst_color:a.ONE_MINUS_DST_COLOR,src_alpha:a.SRC_ALPHA,one_minus_src_alpha:a.ONE_MINUS_SRC_ALPHA,dst_alpha:a.DST_ALPHA,one_minus_dst_alpha:a.ONE_MINUS_DST_ALPHA,constant_color:a.CONSTANT_COLOR,one_minus_constant_color:a.ONE_MINUS_CONSTANT_COLOR,constant_alpha:a.CONSTANT_ALPHA,one_minus_constant_alpha:a.ONE_MINUS_CONSTANT_ALPHA,src_alpha_saturate:a.SRC_ALPHA_SATURATE};return A.map(function(u){return i[u]})}switch(A){case"default":return kd?[a.SRC_ALPHA,a.ZERO,a.ONE,a.ZERO]:[a.ONE,a.ZERO];case"deeper":return[a.ONE,a.ONE_MINUS_SRC_ALPHA];case"normal":return[a.SRC_ALPHA,a.ONE];case"lighter":return[a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA];default:return[a.ONE,a.ZERO]}}function Nh(a,A){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[],u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"#ccc",m=4<arguments.length&&arguments[4]!==void 0?arguments[4]:1,p=document.createElement("canvas"),y=p.getContext("2d");p.width=256,p.height=m,p=A[0];var v=A[A.length-1];if(a.length===A.length){for(var M=y.createLinearGradient(0,0,256,1),R=0;R<a.length;++R)M.addColorStop((A[R]-p)/(v-p),a[R]);y.fillStyle=M,y.fillRect(0,0,256,m)}else if(a.length-A.length==-1){M=0,R=1;for(var k=0;k<a.length;++k){var _=Math.floor((A[R]-p)/(v-p)*256);y.fillStyle=a[k],y.fillRect(M,0,_,m),M=_,R++}}else y.fillStyle=u||"#ccc",y.fillRect(0,0,256,m);return-1>=a.length-A.length&&i.length===2&&(y.fillStyle=u||"#ccc",u=(i[0]-p)/(v-p),u=Math.floor(256*u),y.fillRect(0,0,u,m),u=(i[1]-p)/(v-p),u=Math.floor(256*u),y.fillRect(u,0,255,m)),{data:new Uint8Array(new Uint8ClampedArray(y.getImageData(0,0,256,m).data)),width:256,height:m}}function sr(a,A,i){i=i||2;var u=A&&A.length,m=u?A[0]*i:a.length,p=$i(a,0,m,i,!0),y=[];if(!p||p.next===p.prev)return y;var v;if(u){var M=i;u=[];var R,k=0;for(R=A.length;k<R;k++){var _=A[k]*M,T=k<R-1?A[k+1]*M:a.length;_=$i(a,_,T,M,!1),_===_.next&&(_.steiner=!0),u.push(un(_))}for(u.sort(Sr),k=0;k<u.length;k++)M=u[k],A=p,(A=ar(M,A))&&(M=jr(A,M),ge(A,A.next),ge(M,M.next)),p=ge(p,p.next)}if(a.length>80*i){var O=v=a[0],U=u=a[1];for(M=i;M<m;M+=i)k=a[M],A=a[M+1],k<O&&(O=k),A<U&&(U=A),k>v&&(v=k),A>u&&(u=A);v=Math.max(v-O,u-U),v=v!==0?1/v:0}return rn(p,y,i,O,U,v),y}function $i(a,A,i,u,m){if(m===0<wr(a,A,i,u))for(m=A;m<i;m+=u)var p=qr(m,a[m],a[m+1],p);else for(m=i-u;m>=A;m-=u)p=qr(m,a[m],a[m+1],p);return p&&ri(p,p.next)&&(nn(p),p=p.next),p}function ge(a,A){if(!a)return a;A||(A=a);do{var i=!1;if(a.steiner||!ri(a,a.next)&&Yr(a.prev,a,a.next)!==0)a=a.next;else{if(nn(a),a=A=a.prev,a===a.next)break;i=!0}}while(i||a!==A);return A}function rn(a,A,i,u,m,p,y){if(a){if(!y&&p){var v=a,M=v;do M.z===null&&(M.z=gr(M.x,M.y,u,m,p)),M.prevZ=M.prev,M=M.nextZ=M.next;while(M!==v);M.prevZ.nextZ=null,M.prevZ=null,v=M;var R,k,_,T,O=1;do{M=v;var U=v=null;for(k=0;M;){k++;var G=M;for(R=_=0;R<O&&(_++,G=G.nextZ,G);R++);for(T=O;0<_||0<T&&G;)_!==0&&(T===0||!G||M.z<=G.z)?(R=M,M=M.nextZ,_--):(R=G,G=G.nextZ,T--),U?U.nextZ=R:v=R,R.prevZ=U,U=R;M=G}U.nextZ=null,O*=2}while(1<k)}for(v=a;a.prev!==a.next;){if(M=a.prev,G=a.next,p)U=ze(a,u,m,p);else t:if(U=a,k=U.prev,_=U,O=U.next,0<=Yr(k,_,O))U=!1;else{for(R=U.next.next;R!==U.prev;){if(Wr(k.x,k.y,_.x,_.y,O.x,O.y,R.x,R.y)&&0<=Yr(R.prev,R,R.next)){U=!1;break t}R=R.next}U=!0}if(U)A.push(M.i/i),A.push(a.i/i),A.push(G.i/i),nn(a),v=a=G.next;else if(a=G,a===v){if(!y)rn(ge(a),A,i,u,m,p,1);else if(y===1){a=ge(a),y=A,v=i,M=a;do G=M.prev,U=M.next.next,!ri(G,U)&&Vn(G,M,M.next,U)&&Zr(G,U)&&Zr(U,G)&&(y.push(G.i/v),y.push(M.i/v),y.push(U.i/v),nn(M),nn(M.next),M=a=U),M=M.next;while(M!==a);a=ge(M),rn(a,A,i,u,m,p,2)}else if(y===2)t:{y=a;do{for(v=y.next.next;v!==y.prev;){if(M=y.i!==v.i){if(M=y,G=v,U=M.next.i!==G.i&&M.prev.i!==G.i){e:{U=M;do{if(U.i!==M.i&&U.next.i!==M.i&&U.i!==G.i&&U.next.i!==G.i&&Vn(U,U.next,M,G)){U=!0;break e}U=U.next}while(U!==M);U=!1}U=!U}if(U){if(U=Zr(M,G)&&Zr(G,M)){U=M,k=!1,_=(M.x+G.x)/2,O=(M.y+G.y)/2;do U.y>O!=U.next.y>O&&U.next.y!==U.y&&_<(U.next.x-U.x)*(O-U.y)/(U.next.y-U.y)+U.x&&(k=!k),U=U.next;while(U!==M);U=k}U=U&&(Yr(M.prev,M,G.prev)||Yr(M,G.prev,G))||ri(M,G)&&0<Yr(M.prev,M,M.next)&&0<Yr(G.prev,G,G.next)}M=U}if(M){a=jr(y,v),y=ge(y,y.next),a=ge(a,a.next),rn(y,A,i,u,m,p),rn(a,A,i,u,m,p);break t}v=v.next}y=y.next}while(y!==a)}break}}}}function ze(a,A,i,u){var m=a.prev,p=a.next;if(0<=Yr(m,a,p))return!1;var y=m.x>a.x?m.x>p.x?m.x:p.x:a.x>p.x?a.x:p.x,v=m.y>a.y?m.y>p.y?m.y:p.y:a.y>p.y?a.y:p.y,M=gr(m.x<a.x?m.x<p.x?m.x:p.x:a.x<p.x?a.x:p.x,m.y<a.y?m.y<p.y?m.y:p.y:a.y<p.y?a.y:p.y,A,i,u);for(A=gr(y,v,A,i,u),i=a.prevZ,u=a.nextZ;i&&i.z>=M&&u&&u.z<=A;){if(i!==a.prev&&i!==a.next&&Wr(m.x,m.y,a.x,a.y,p.x,p.y,i.x,i.y)&&0<=Yr(i.prev,i,i.next)||(i=i.prevZ,u!==a.prev&&u!==a.next&&Wr(m.x,m.y,a.x,a.y,p.x,p.y,u.x,u.y)&&0<=Yr(u.prev,u,u.next)))return!1;u=u.nextZ}for(;i&&i.z>=M;){if(i!==a.prev&&i!==a.next&&Wr(m.x,m.y,a.x,a.y,p.x,p.y,i.x,i.y)&&0<=Yr(i.prev,i,i.next))return!1;i=i.prevZ}for(;u&&u.z<=A;){if(u!==a.prev&&u!==a.next&&Wr(m.x,m.y,a.x,a.y,p.x,p.y,u.x,u.y)&&0<=Yr(u.prev,u,u.next))return!1;u=u.nextZ}return!0}function Sr(a,A){return a.x-A.x}function ar(a,A){var i=A,u=a.x,m=a.y,p=-Infinity;do{if(m<=i.y&&m>=i.next.y&&i.next.y!==i.y){var y=i.x+(m-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(y<=u&&y>p){if(p=y,y===u){if(m===i.y)return i;if(m===i.next.y)return i.next}var v=i.x<i.next.x?i:i.next}}i=i.next}while(i!==A);if(!v)return null;if(u===p)return v;A=v,y=v.x;var M=v.y,R=Infinity;i=v;do{if(u>=i.x&&i.x>=y&&u!==i.x&&Wr(m<M?u:p,m,y,M,m<M?p:u,m,i.x,i.y)){var k=Math.abs(m-i.y)/(u-i.x),_;if((_=Zr(i,a))&&!(_=k<R)&&(_=k===R)&&!(_=i.x>v.x)&&(_=i.x===v.x)){_=v;var T=i;_=0>Yr(_.prev,_,T.prev)&&0>Yr(T.next,_,_.next)}_&&(v=i,R=k)}i=i.next}while(i!==A);return v}function gr(a,A,i,u,m){return a=32767*(a-i)*m,A=32767*(A-u)*m,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,(a|a<<1)&1431655765|((A|A<<1)&1431655765)<<1}function un(a){var A=a,i=a;do(A.x<i.x||A.x===i.x&&A.y<i.y)&&(i=A),A=A.next;while(A!==a);return i}function Wr(a,A,i,u,m,p,y,v){return 0<=(m-y)*(A-v)-(a-y)*(p-v)&&0<=(a-y)*(u-v)-(i-y)*(A-v)&&0<=(i-y)*(p-v)-(m-y)*(u-v)}function Yr(a,A,i){return(A.y-a.y)*(i.x-A.x)-(A.x-a.x)*(i.y-A.y)}function ri(a,A){return a.x===A.x&&a.y===A.y}function Vn(a,A,i,u){var m=bn(Yr(a,A,i)),p=bn(Yr(a,A,u)),y=bn(Yr(i,u,a)),v=bn(Yr(i,u,A));return!!(m!==p&&y!==v||m===0&&Pn(a,i,A)||p===0&&Pn(a,u,A)||y===0&&Pn(i,a,u)||v===0&&Pn(i,A,u))}function Pn(a,A,i){return A.x<=Math.max(a.x,i.x)&&A.x>=Math.min(a.x,i.x)&&A.y<=Math.max(a.y,i.y)&&A.y>=Math.min(a.y,i.y)}function bn(a){return 0<a?1:0>a?-1:0}function Zr(a,A){return 0>Yr(a.prev,a,a.next)?0<=Yr(a,A,a.next)&&0<=Yr(a,a.prev,A):0>Yr(a,A,a.prev)||0>Yr(a,a.next,A)}function jr(a,A){var i=new Sn(a.i,a.x,a.y),u=new Sn(A.i,A.x,A.y),m=a.next,p=A.prev;return a.next=A,A.prev=a,i.next=m,m.prev=i,u.next=i,i.prev=u,p.next=u,u.prev=p,u}function qr(a,A,i,u){return a=new Sn(a,A,i),u?(a.next=u.next,a.prev=u,u.next.prev=a,u.next=a):(a.prev=a,a.next=a),a}function nn(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Sn(a,A,i){this.i=a,this.x=A,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function wr(a,A,i,u){for(var m=0,p=i-u;A<i;A+=u)m+=(a[p]-a[A])*(a[A+1]+a[p+1]),p=A;return m}function Xn(a){try{return zu.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch(i){var A=new $v;return A.append(a),zu.createObjectURL(A.getBlob(type))}}function Di(a,A){this.shapeLayer=a,this.gl=A,this.initData()}function xi(a,A,i,u){var m=[];return u=u*Math.PI/180,m[0]=(a-i[0])*Math.cos(u)-(A-i[1])*Math.sin(u)+i[0],m[1]=(a-i[0])*Math.sin(u)+(A-i[1])*Math.cos(u)+i[1],m}function to(a){var A=0,i=0,u=!0,m=!1,p=void 0;try{for(var y=aa(a),v;!(u=(v=y.next()).done);u=!0){var M=v.value;A+=M.w*M.h,i=Math.max(i,M.w)}}catch(G){m=!0,p=G}finally{try{!u&&y.return&&y.return()}finally{if(m)throw p}}a.sort(function(G,X){return X.h-G.h}),i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(A/.95)),i),h:Infinity}],m=u=0,p=!0,y=!1,v=void 0;try{for(var R=aa(a),k;!(p=(k=R.next()).done);p=!0)for(var _=k.value,T=i.length-1;0<=T;T--){var O=i[T];if(!(_.w>O.w||_.h>O.h)){if(_.x=O.x,_.y=O.y,m=Math.max(m,_.y+_.h),u=Math.max(u,_.x+_.w),_.w===O.w&&_.h===O.h){var U=i.pop();T<i.length&&(i[T]=U)}else _.h===O.h?(O.x+=_.w,O.w-=_.w):(_.w!==O.w&&i.push({x:O.x+_.w,y:O.y,w:O.w-_.w,h:_.h}),O.y+=_.h,O.h-=_.h);break}}}catch(G){y=!0,v=G}finally{try{!p&&R.return&&R.return()}finally{if(y)throw v}}return{w:u,h:m,fill:A/(u*m)||0}}function ai(){xf=!0;for(var a=0;64>a;++a)la[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],La["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;La[45]=62,La[95]=63}function Wi(a,A,i){for(var u=[],m=A;m<i;m+=3)A=(a[m]<<16)+(a[m+1]<<8)+a[m+2],u.push(la[A>>18&63]+la[A>>12&63]+la[A>>6&63]+la[A&63]);return u.join("")}function Ei(a){xf||ai();for(var A=a.length,i=A%3,u="",m=[],p=0,y=A-i;p<y;p+=16383)m.push(Wi(a,p,p+16383>y?y:p+16383));return i===1?(a=a[A-1],u+=la[a>>2],u+=la[a<<4&63],u+="=="):i===2&&(a=(a[A-2]<<8)+a[A-1],u+=la[a>>10],u+=la[a>>4&63],u+=la[a<<2&63],u+="="),m.push(u),m.join("")}function Ai(a,A,i,u,m){var p=8*m-u-1,y=(1<<p)-1,v=y>>1,M=-7;m=i?m-1:0;var R=i?-1:1,k=a[A+m];for(m+=R,i=k&(1<<-M)-1,k>>=-M,M+=p;0<M;i=256*i+a[A+m],m+=R,M-=8);for(p=i&(1<<-M)-1,i>>=-M,M+=u;0<M;p=256*p+a[A+m],m+=R,M-=8);if(i===0)i=1-v;else{if(i===y)return p?NaN:Infinity*(k?-1:1);p+=Math.pow(2,u),i-=v}return(k?-1:1)*p*Math.pow(2,i-u)}function Oi(a,A,i,u,m,p){var y,v=8*p-m-1,M=(1<<v)-1,R=M>>1,k=m===23?Math.pow(2,-24)-Math.pow(2,-77):0;p=u?0:p-1;var _=u?1:-1,T=0>A||A===0&&0>1/A?1:0;for(A=Math.abs(A),isNaN(A)||A===Infinity?(A=isNaN(A)?1:0,u=M):(u=Math.floor(Math.log(A)/Math.LN2),1>A*(y=Math.pow(2,-u))&&(u--,y*=2),A=1<=u+R?A+k/y:A+k*Math.pow(2,1-R),2<=A*y&&(u++,y/=2),u+R>=M?(A=0,u=M):1<=u+R?(A=(A*y-1)*Math.pow(2,m),u+=R):(A=A*Math.pow(2,R-1)*Math.pow(2,m),u=0));8<=m;a[i+p]=A&255,p+=_,A/=256,m-=8);for(u=u<<m|A,v+=m;0<v;a[i+p]=u&255,p+=_,u/=256,v-=8);a[i+p-_]|=128*T}function wi(a,A){if((Fe.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<A)throw new RangeError("Invalid typed array length");return Fe.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(A),a.__proto__=Fe.prototype):(a===null&&(a=new Fe(A)),a.length=A),a}function Fe(a,A,i){if(!(Fe.TYPED_ARRAY_SUPPORT||this instanceof Fe))return new Fe(a,A,i);if(typeof a=="number"){if(typeof A=="string")throw Error("If encoding is specified then the first argument must be a string");return Ni(this,a)}return Ci(this,a,A,i)}function Ci(a,A,i,u){if(typeof A=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer!="undefined"&&A instanceof ArrayBuffer){if(A.byteLength,0>i||A.byteLength<i)throw new RangeError("'offset' is out of bounds");if(A.byteLength<i+(u||0))throw new RangeError("'length' is out of bounds");return A=i===void 0&&u===void 0?new Uint8Array(A):u===void 0?new Uint8Array(A,i):new Uint8Array(A,i,u),Fe.TYPED_ARRAY_SUPPORT?(a=A,a.__proto__=Fe.prototype):a=Ii(a,A),a}if(typeof A=="string"){if(u=a,a=i,(typeof a!="string"||a==="")&&(a="utf8"),!Fe.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');return i=WA(A,a)|0,u=wi(u,i),A=u.write(A,a),A!==i&&(u=u.slice(0,A)),u}return vo(a,A)}function Hi(a){if(typeof a!="number")throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative')}function Ni(a,A){if(Hi(A),a=wi(a,0>A?0:Fo(A)|0),!Fe.TYPED_ARRAY_SUPPORT)for(var i=0;i<A;++i)a[i]=0;return a}function Ii(a,A){var i=0>A.length?0:Fo(A.length)|0;a=wi(a,i);for(var u=0;u<i;u+=1)a[u]=A[u]&255;return a}function vo(a,A){if(bo(A)){var i=Fo(A.length)|0;return a=wi(a,i),a.length===0||A.copy(a,0,0,i),a}if(A){if(typeof ArrayBuffer!="undefined"&&A.buffer instanceof ArrayBuffer||"length"in A)return(i=typeof A.length!="number")||(i=A.length,i=i!==i),i?wi(a,0):Ii(a,A);if(A.type==="Buffer"&&eg(A.data))return Ii(a,A.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Fo(a){if(a>=(Fe.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(Fe.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function bo(a){return!(a==null||!a._isBuffer)}function WA(a,A){if(bo(a))return a.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;typeof a!="string"&&(a=""+a);var i=a.length;if(i===0)return 0;for(var u=!1;;)switch(A){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return pa(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return vu(a).length;default:if(u)return pa(a).length;A=(""+A).toLowerCase(),u=!0}}function rA(a,A,i){var u=!1;if((A===void 0||0>A)&&(A=0),A>this.length||((i===void 0||i>this.length)&&(i=this.length),0>=i)||(i>>>=0,A>>>=0,i<=A))return"";for(a||(a="utf8");;)switch(a){case"hex":for(a=A,A=i,i=this.length,(!a||0>a)&&(a=0),(!A||0>A||A>i)&&(A=i),u="",i=a;i<A;++i)a=u,u=this[i],u=16>u?"0"+u.toString(16):u.toString(16),u=a+u;return u;case"utf8":case"utf-8":return ko(this,A,i);case"ascii":for(a="",i=Math.min(this.length,i);A<i;++A)a+=String.fromCharCode(this[A]&127);return a;case"latin1":case"binary":for(a="",i=Math.min(this.length,i);A<i;++A)a+=String.fromCharCode(this[A]);return a;case"base64":return A=A===0&&i===this.length?Ei(this):Ei(this.slice(A,i)),A;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(A=this.slice(A,i),i="",a=0;a<A.length;a+=2)i+=String.fromCharCode(A[a]+256*A[a+1]);return i;default:if(u)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),u=!0}}function $r(a,A,i){var u=a[A];a[A]=a[i],a[i]=u}function Is(a,A,i,u,m){if(a.length===0)return-1;if(typeof i=="string"?(u=i,i=0):2147483647<i?i=2147483647:-2147483648>i&&(i=-2147483648),i=+i,isNaN(i)&&(i=m?0:a.length-1),0>i&&(i=a.length+i),i>=a.length){if(m)return-1;i=a.length-1}else if(0>i)if(m)i=0;else return-1;if(typeof A=="string"&&(A=Fe.from(A,u)),bo(A))return A.length===0?-1:fa(a,A,i,u,m);if(typeof A=="number")return A&=255,Fe.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(a,A,i):Uint8Array.prototype.lastIndexOf.call(a,A,i):fa(a,[A],i,u,m);throw new TypeError("val must be string, number or Buffer")}function fa(a,A,i,u,m){function p(R,k){return y===1?R[k]:R.readUInt16BE(k*y)}var y=1,v=a.length,M=A.length;if(u!==void 0&&(u=String(u).toLowerCase(),u==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(2>a.length||2>A.length)return-1;y=2,v/=2,M/=2,i/=2}if(m)for(u=-1;i<v;i++)if(p(a,i)===p(A,u===-1?0:i-u)){if(u===-1&&(u=i),i-u+1===M)return u*y}else u!==-1&&(i-=i-u),u=-1;else for(i+M>v&&(i=v-M);0<=i;i--){for(v=!0,u=0;u<M;u++)if(p(a,i+u)!==p(A,u)){v=!1;break}if(v)return i}return-1}function ko(a,A,i){i=Math.min(a.length,i);for(var u=[];A<i;){var m=a[A],p=null,y=239<m?4:223<m?3:191<m?2:1;if(A+y<=i)switch(y){case 1:128>m&&(p=m);break;case 2:var v=a[A+1];(v&192)==128&&(m=(m&31)<<6|v&63,127<m&&(p=m));break;case 3:v=a[A+1];var M=a[A+2];(v&192)==128&&(M&192)==128&&(m=(m&15)<<12|(v&63)<<6|M&63,2047<m&&(55296>m||57343<m)&&(p=m));break;case 4:v=a[A+1],M=a[A+2];var R=a[A+3];(v&192)==128&&(M&192)==128&&(R&192)==128&&(m=(m&15)<<18|(v&63)<<12|(M&63)<<6|R&63,65535<m&&1114112>m&&(p=m))}p===null?(p=65533,y=1):65535<p&&(p-=65536,u.push(p>>>10&1023|55296),p=56320|p&1023),u.push(p),A+=y}if(a=u.length,a<=rg)u=String.fromCharCode.apply(String,u);else{for(i="",A=0;A<a;)i+=String.fromCharCode.apply(String,u.slice(A,A+=rg));u=i}return u}function Mi(a,A,i){if(a%1!=0||0>a)throw new RangeError("offset is not uint");if(a+A>i)throw new RangeError("Trying to access beyond buffer length")}function Co(a,A,i,u,m,p){if(!bo(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>m||A<p)throw new RangeError('"value" argument is out of bounds');if(i+u>a.length)throw new RangeError("Index out of range")}function nA(a,A,i,u){0>A&&(A=65535+A+1);for(var m=0,p=Math.min(a.length-i,2);m<p;++m)a[i+m]=(A&255<<8*(u?m:1-m))>>>8*(u?m:1-m)}function jA(a,A,i,u){0>A&&(A=4294967295+A+1);for(var m=0,p=Math.min(a.length-i,4);m<p;++m)a[i+m]=A>>>8*(u?m:3-m)&255}function mu(a,A,i,u,m,p){if(i+u>a.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("Index out of range")}function IA(a,A,i,u,m){return m||mu(a,A,i,4,34028234663852886e22,-34028234663852886e22),Oi(a,A,i,u,23,4),i+4}function XA(a,A,i,u,m){return m||mu(a,A,i,8,17976931348623157e292,-17976931348623157e292),Oi(a,A,i,u,52,8),i+8}function pa(a,A){A=A||Infinity;for(var i,u=a.length,m=null,p=[],y=0;y<u;++y){if(i=a.charCodeAt(y),55295<i&&57344>i){if(!m){if(56319<i){-1<(A-=3)&&p.push(239,191,189);continue}else if(y+1===u){-1<(A-=3)&&p.push(239,191,189);continue}m=i;continue}if(56320>i){-1<(A-=3)&&p.push(239,191,189),m=i;continue}i=(m-55296<<10|i-56320)+65536}else m&&-1<(A-=3)&&p.push(239,191,189);if(m=null,128>i){if(0>--A)break;p.push(i)}else if(2048>i){if(0>(A-=2))break;p.push(i>>6|192,i&63|128)}else if(65536>i){if(0>(A-=3))break;p.push(i>>12|224,i>>6&63|128,i&63|128)}else if(1114112>i){if(0>(A-=4))break;p.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw Error("Invalid code point")}return p}function Ro(a){for(var A=[],i=0;i<a.length;++i)A.push(a.charCodeAt(i)&255);return A}function vu(a){if(a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(ng,""),2>a.length)a="";else for(;a.length%4!=0;)a+="=";xf||ai();var A=a.length;if(0<A%4)throw Error("Invalid string. Length must be a multiple of 4");var i=a[A-2]==="="?2:a[A-1]==="="?1:0,u=new r0(3*A/4-i),m=0<i?A-4:A,p=0;for(A=0;A<m;A+=4){var y=La[a.charCodeAt(A)]<<18|La[a.charCodeAt(A+1)]<<12|La[a.charCodeAt(A+2)]<<6|La[a.charCodeAt(A+3)];u[p++]=y>>16&255,u[p++]=y>>8&255,u[p++]=y&255}return i===2?(y=La[a.charCodeAt(A)]<<2|La[a.charCodeAt(A+1)]>>4,u[p++]=y&255):i===1&&(y=La[a.charCodeAt(A)]<<10|La[a.charCodeAt(A+1)]<<4|La[a.charCodeAt(A+2)]>>2,u[p++]=y>>8&255,u[p++]=y&255),u}function Da(a,A,i,u){for(var m=0;m<u&&!(m+i>=A.length||m>=a.length);++m)A[m+i]=a[m];return m}function tp(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function Ts(a,A){var i=[];return a.forEach(function(u){i.push(A?-u:u,u)}),i}function ep(a){for(var A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,i=[],u=0;u<a-1;u++){var m=2*(u+A);i.push(m,m+1,m+2),i.push(m+2,m+1,m+3)}return i}function Vl(a){return function(A,i,u){return A=i+a,i=u.length-1,u[0<i?0>A?0:A>i?i:A:A<i?i:0<A?0:A]}}function is(a){if(!a[0]||!a[0].length)return a;for(var A=a[0].length,i=[],u=0,m=0;m<a.length;m++)for(var p=0;p<A;p++)i[u++]=a[m][p];return i}function zh(){for(var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],A=[],i=0,u=0;u<a.length;u++){var m=a[u];if(0<u){var p=a[u-1];i+=Math.sqrt(Math.pow(m[0]-p[0],2)+Math.pow(m[1]-p[1],2))}A.push(i)}return{arr:A,total:i}}function Wl(){var a=document.createElement("canvas");a.width=a.height=32;var A=a.getContext("2d");return{canvas:a,ctx:A}}function Qh(){var a=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{}).color,A=Wl(),i=A.canvas;return A=A.ctx,A.save(),A.moveTo(0,0),A.lineTo(20,0),A.lineTo(32,16),A.lineTo(20,32),A.lineTo(0,32),A.lineTo(10,16),A.fillStyle=a||"#fff",A.fill(),A.restore(),i}function Ss(a,A){return zn.set(a,-A[1],A[0])}function rp(a,A,i){return zn.sub(a,A,i),zn.normalize(a,a),a}function iA(a){var A,i;this.promise=new a(function(u,m){if(A!==void 0||i!==void 0)throw TypeError("Bad Promise constructor");A=u,i=m}),this.resolve=FA(A),this.reject=FA(i)}function yu(a,A,i){return i=Math.PI/180*(60*i+30),[a.x+A*Math.cos(i),a.y+A*Math.sin(i)]}function da(a,A,i){for(var u={},m=[],p=a.length,y=A/2/Math.sin(Math.PI/3),v=1.5*y,M=1,R=0;R<p;++R){var k=a[R].geometry.coordinates;i&&(k=i(k));var _=+k[0],T=+k[1];if(!isNaN(_)&&!isNaN(T)){k=Math.round(T/=v);var O=Math.round(_=_/A-(k&1)/2),U=T-k;if(1<3*Math.abs(U)){var G=_-O,X=O+(_<O?-1:1)/2,W=k+(T<k?-1:1);_-=X,T-=W,G*G+U*U>_*_+T*T&&(O=X+(k&1?1:-1)/2,k=W)}U=O+"-"+k,(G=u[U])?(G.count+=a[R].count||1,M=Math.max(M,G.count)):(u[U]={center:{x:(O+(k&1)/2)*A,y:k*v},count:a[R].count||1},m.push(u[U]))}}return m.max=M,m.r=y,m}function bh(a,A,i,u){switch(u){case 5122:return new Int16Array(a,A,i);case 5123:return new Uint16Array(a,A,i);case 5124:return new Int32Array(a,A,i);case 5125:return new Uint32Array(a,A,i);case 5126:return new Float32Array(a,A,i);default:return null}}function ga(a){return bh(a.bufferView.data,a.byteOffset,a.count*Lf[a.type],a.componentType)}function np(a){var A="",i=a.lastIndexOf("/");return i!==-1&&(A=a.substring(0,i+1)),A}function jl(a,A){var i=new XMLHttpRequest;i.overrideMimeType("application/json"),i.open("GET",a,!0),i.onreadystatechange=function(){i.readyState==4&&i.status=="200"&&A(i.responseText,this)},i.send(null)}function qu(a,A,i){var u=new XMLHttpRequest;u.responseType="arraybuffer",u.open("GET",a,!0),u.onreadystatechange=function(){if(u.readyState==4&&u.status=="200"){var m=u.response;m&&A&&A(m,i)}},u.send(null)}function Oa(a,A,i){var u=new Image;u.crossOrigin="Anonymous",u.src=a,u.onload=function(){i(u,A)}}function ip(a){function A(Ce,Ze){i.uniform1i(Ce,Ze.index),i.activeTexture(i.TEXTURE0+Ze.index),Ce=lt.glTF.textures[Ze.index],i.bindTexture(i.TEXTURE_2D,Ce.texture),i.bindSampler(Ze.index,Ce.sampler?Ce.sampler.sampler:y)}var i=a.gl,u=0,m=[];a=i.canvas;var p=function(Ce,Ze,sn){for(this.glTFScene=Ce,this.glTF=Ze,this.id=sn,this.rootTransform=ur.create(),this.nodeMatrix=Array(Ze.nodes.length),Ce=0,Ze=this.nodeMatrix.length;Ce<Ze;Ce++)this.nodeMatrix[Ce]=ur.create()},y=i.createSampler();i.samplerParameteri(y,i.TEXTURE_MIN_FILTER,i.NEAREST_MIPMAP_LINEAR),i.samplerParameteri(y,i.TEXTURE_MAG_FILTER,i.LINEAR),i.samplerParameteri(y,i.TEXTURE_WRAP_S,i.REPEAT),i.samplerParameteri(y,i.TEXTURE_WRAP_T,i.REPEAT),i.bindVertexArray(null),i.bindVertexArray(null);var v={HAS_SKIN:1,SKIN_VEC8:2,HAS_BASECOLORMAP:4,HAS_NORMALMAP:8,HAS_METALROUGHNESSMAP:16,HAS_OCCLUSIONMAP:32,HAS_EMISSIVEMAP:64},M={},R=function(){this.flags=0,this.programObject=null};R.prototype.hasSkin=function(){return this.flags&v.HAS_SKIN},R.prototype.hasBaseColorMap=function(){return this.flags&v.HAS_BASECOLORMAP},R.prototype.hasNormalMap=function(){return this.flags&v.HAS_NORMALMAP},R.prototype.hasMetalRoughnessMap=function(){return this.flags&v.HAS_METALROUGHNESSMAP},R.prototype.hasOcclusionMap=function(){return this.flags&v.HAS_OCCLUSIONMAP},R.prototype.hasEmissiveMap=function(){return this.flags&v.HAS_EMISSIVEMAP},R.prototype.defineMacro=function(Ce){v[Ce]!==void 0&&(this.flags|=v[Ce])},R.prototype.compile=function(){var Ce=M[this.flags];if(Ce)this.programObject=Ce;else{var Ze=Ce="";this.flags&v.HAS_SKIN&&(Ce+=`#define HAS_SKIN
`),this.flags&v.SKIN_VEC8&&(Ce+=`#define SKIN_VEC8
`),this.flags&v.HAS_BASECOLORMAP&&(Ze+=`#define HAS_BASECOLORMAP
`),this.flags&v.HAS_NORMALMAP&&(Ze+=`#define HAS_NORMALMAP
`),this.flags&v.HAS_METALROUGHNESSMAP&&(Ze+=`#define HAS_METALROUGHNESSMAP
`),this.flags&v.HAS_OCCLUSIONMAP&&(Ze+=`#define HAS_OCCLUSIONMAP
`),this.flags&v.HAS_EMISSIVEMAP&&(Ze+=`#define HAS_EMISSIVEMAP
`),Ce=Gu.createProgram(i,`#version 300 es
`+Ce+`#define POSITION_LOCATION 0
#define NORMAL_LOCATION 1
#define TEXCOORD_0_LOCATION 2
#define JOINTS_0_LOCATION 3
#define JOINTS_1_LOCATION 5
#define WEIGHTS_0_LOCATION 4
#define WEIGHTS_1_LOCATION 6
#define TANGENT_LOCATION 7
precision highp float;precision highp int;uniform mat4 u_MVP;uniform mat4 u_MV;uniform mat4 u_MVNormal;
#ifdef HAS_SKIN
uniform JointMatrix{mat4 matrix[65];}u_jointMatrix;
#endif
layout(location=POSITION_LOCATION)in vec3 position;layout(location=NORMAL_LOCATION)in vec3 normal;layout(location=TEXCOORD_0_LOCATION)in vec2 uv;
#ifdef HAS_SKIN
layout(location=JOINTS_0_LOCATION)in vec4 joint0;layout(location=WEIGHTS_0_LOCATION)in vec4 weight0;
#ifdef SKIN_VEC8
layout(location=JOINTS_1_LOCATION)in vec4 joint1;layout(location=WEIGHTS_1_LOCATION)in vec4 weight1;
#endif
#endif
out vec3 v_position;out vec3 v_normal;out vec2 v_uv;void main(){
#ifdef HAS_SKIN
mat4 skinMatrix=weight0.x*u_jointMatrix.matrix[int(joint0.x)]+weight0.y*u_jointMatrix.matrix[int(joint0.y)]+weight0.z*u_jointMatrix.matrix[int(joint0.z)]+weight0.w*u_jointMatrix.matrix[int(joint0.w)];
#ifdef SKIN_VEC8
skinMatrix+=weight1.x*u_jointMatrix.matrix[int(joint1.x)]+weight1.y*u_jointMatrix.matrix[int(joint1.y)]+weight1.z*u_jointMatrix.matrix[int(joint1.z)]+weight1.w*u_jointMatrix.matrix[int(joint1.w)];
#endif
#endif
v_uv=uv;
#ifdef HAS_SKIN
v_normal=normalize((u_MVNormal*transpose(inverse(skinMatrix))*vec4(normal,0)).xyz);vec4 pos=u_MV*skinMatrix*vec4(position,1.0);gl_Position=u_MVP*skinMatrix*vec4(position,1.0);
#else
v_normal=normalize((u_MVNormal*vec4(normal,0)).xyz);vec4 pos=u_MV*vec4(position,1.0);gl_Position=u_MVP*vec4(position,1.0);
#endif
v_position=vec3(pos.xyz)/pos.w;}`,`#version 300 es
`+Ze+`#define FRAG_COLOR_LOCATION 0
precision highp float;precision highp int;uniform sampler2D u_brdfLUT;uniform vec4 u_baseColorFactor;
#ifdef HAS_BASECOLORMAP
uniform sampler2D u_baseColorTexture;
#endif
#ifdef HAS_NORMALMAP
uniform sampler2D u_normalTexture;uniform float u_normalTextureScale;
#endif
#ifdef HAS_EMISSIVEMAP
uniform sampler2D u_emissiveTexture;uniform vec3 u_emissiveFactor;
#endif
#ifdef HAS_METALROUGHNESSMAP
uniform sampler2D u_metallicRoughnessTexture;
#endif
uniform float u_metallicFactor;uniform float u_roughnessFactor;
#ifdef HAS_OCCLUSIONMAP
uniform sampler2D u_occlusionTexture;uniform float u_occlusionStrength;
#endif
in vec3 v_position;in vec3 v_normal;in vec2 v_uv;layout(location=FRAG_COLOR_LOCATION)out vec4 frag_color;struct PBRInfo{float NdotL;float NdotV;float NdotH;float LdotH;float VdotH;float perceptualRoughness;float metalness;vec3 reflectance0;vec3 reflectance90;float alphaRoughness;vec3 diffuseColor;vec3 specularColor;};const float M_PI=3.141592653589793;const float c_MinRoughness=0.04;vec3 getNormal(){vec3 pos_dx=dFdx(v_position);vec3 pos_dy=dFdy(v_position);vec3 tex_dx=dFdx(vec3(v_uv,0.0));vec3 tex_dy=dFdy(vec3(v_uv,0.0));vec3 t=(tex_dy.t*pos_dx-tex_dx.t*pos_dy)/(tex_dx.s*tex_dy.t-tex_dy.s*tex_dx.t);vec3 ng=v_normal;t=normalize(t-ng*dot(ng,t));vec3 b=normalize(cross(ng,t));mat3 tbn=mat3(t,b,ng);
#ifdef HAS_NORMALMAP
vec3 n=texture(u_normalTexture,v_uv).rgb;n=normalize(tbn*((2.0*n-1.0)*vec3(u_normalTextureScale,u_normalTextureScale,1.0)));
#else
vec3 n=tbn[2].xyz;
#endif
return n;}vec3 getIBLContribution(PBRInfo pbrInputs,vec3 n,vec3 reflection){float mipCount=10.0;float lod=(pbrInputs.perceptualRoughness*mipCount);vec3 brdf=texture(u_brdfLUT,vec2(pbrInputs.NdotV,1.0-pbrInputs.perceptualRoughness)).rgb;vec3 diffuseLight=vec3(0.6,0.6,0.6);vec3 specularLight=vec3(0.6,0.6,0.6);vec3 diffuse=diffuseLight*pbrInputs.diffuseColor;vec3 specular=specularLight*(pbrInputs.specularColor*brdf.x+brdf.y);return diffuse+specular;}vec3 diffuse(PBRInfo pbrInputs){return pbrInputs.diffuseColor/M_PI;}vec3 specularReflection(PBRInfo pbrInputs){return pbrInputs.reflectance0+(pbrInputs.reflectance90-pbrInputs.reflectance0)*pow(clamp(1.0-pbrInputs.VdotH,0.0,1.0),5.0);}float geometricOcclusion(PBRInfo pbrInputs){float NdotL=pbrInputs.NdotL;float NdotV=pbrInputs.NdotV;float r=pbrInputs.alphaRoughness;float attenuationL=2.0*NdotL/(NdotL+sqrt(r*r+(1.0-r*r)*(NdotL*NdotL)));float attenuationV=2.0*NdotV/(NdotV+sqrt(r*r+(1.0-r*r)*(NdotV*NdotV)));return attenuationL*attenuationV;}float microfacetDistribution(PBRInfo pbrInputs){float roughnessSq=pbrInputs.alphaRoughness*pbrInputs.alphaRoughness;float f=(pbrInputs.NdotH*roughnessSq-pbrInputs.NdotH)*pbrInputs.NdotH+1.0;return roughnessSq/(M_PI*f*f);}void main(){float perceptualRoughness=u_roughnessFactor;float metallic=u_metallicFactor;
#ifdef HAS_METALROUGHNESSMAP
vec4 mrSample=texture(u_metallicRoughnessTexture,v_uv);perceptualRoughness=mrSample.g*perceptualRoughness;metallic=mrSample.b*metallic;
#endif
perceptualRoughness=clamp(perceptualRoughness,c_MinRoughness,1.0);metallic=clamp(metallic,0.0,1.0);float alphaRoughness=perceptualRoughness*perceptualRoughness;
#ifdef HAS_BASECOLORMAP
vec4 baseColor=texture(u_baseColorTexture,v_uv)*u_baseColorFactor;
#else
vec4 baseColor=u_baseColorFactor;
#endif
vec3 f0=vec3(0.04);vec3 diffuseColor=baseColor.rgb*(vec3(1.0)-f0);diffuseColor*=1.0-metallic;vec3 specularColor=mix(f0,baseColor.rgb,metallic);float reflectance=max(max(specularColor.r,specularColor.g),specularColor.b);float reflectance90=clamp(reflectance*25.0,0.0,1.0);vec3 specularEnvironmentR0=specularColor.rgb;vec3 specularEnvironmentR90=vec3(1.0,1.0,1.0)*reflectance90;vec3 n=getNormal();vec3 v=normalize(-v_position);vec3 l=normalize(vec3(1.0,1.0,1.0));vec3 h=normalize(l+v);vec3 reflection=-normalize(reflect(v,n));float NdotL=clamp(dot(n,l),0.001,1.0);float NdotV=abs(dot(n,v))+0.001;float NdotH=clamp(dot(n,h),0.0,1.0);float LdotH=clamp(dot(l,h),0.0,1.0);float VdotH=clamp(dot(v,h),0.0,1.0);PBRInfo pbrInputs=PBRInfo(NdotL,NdotV,NdotH,LdotH,VdotH,perceptualRoughness,metallic,specularEnvironmentR0,specularEnvironmentR90,alphaRoughness,diffuseColor,specularColor);vec3 F=specularReflection(pbrInputs);float G=geometricOcclusion(pbrInputs);float D=microfacetDistribution(pbrInputs);vec3 diffuseContrib=(1.0-F)*diffuse(pbrInputs);vec3 specContrib=max(vec3(0.0),F*G*D/(4.0*NdotL*NdotV));vec3 color=NdotL*(diffuseContrib+specContrib);color+=getIBLContribution(pbrInputs,n,reflection);
#ifdef HAS_OCCLUSIONMAP
float ao=texture(u_occlusionTexture,v_uv).r;color=mix(color,color*ao,u_occlusionStrength);
#endif
#ifdef HAS_EMISSIVEMAP
vec3 emissive=texture(u_emissiveTexture,v_uv).rgb*u_emissiveFactor;color+=emissive;
#endif
frag_color=vec4(color,baseColor.a);}`),this.programObject={program:Ce,uniformLocations:{},uniformBlockIndices:{}},this.flags&v.HAS_SKIN&&(this.programObject.uniformBlockIndices.JointMatrix=i.getUniformBlockIndex(Ce,"JointMatrix")),Ze=this.programObject.uniformLocations,Ze.MVP=i.getUniformLocation(Ce,"u_MVP"),Ze.MVNormal=i.getUniformLocation(Ce,"u_MVNormal"),Ze.MV=i.getUniformLocation(Ce,"u_MV"),Ze.baseColorFactor=i.getUniformLocation(Ce,"u_baseColorFactor"),Ze.metallicFactor=i.getUniformLocation(Ce,"u_metallicFactor"),Ze.roughnessFactor=i.getUniformLocation(Ce,"u_roughnessFactor"),this.flags&v.HAS_BASECOLORMAP&&(Ze.baseColorTexture=i.getUniformLocation(Ce,"u_baseColorTexture")),this.flags&v.HAS_NORMALMAP&&(Ze.normalTexture=i.getUniformLocation(Ce,"u_normalTexture"),Ze.normalTextureScale=i.getUniformLocation(Ce,"u_normalTextureScale")),this.flags&v.HAS_METALROUGHNESSMAP&&(Ze.metallicRoughnessTexture=i.getUniformLocation(Ce,"u_metallicRoughnessTexture")),this.flags&v.HAS_OCCLUSIONMAP&&(Ze.occlusionTexture=i.getUniformLocation(Ce,"u_occlusionTexture"),Ze.occlusionStrength=i.getUniformLocation(Ce,"u_occlusionStrength")),this.flags&v.HAS_EMISSIVEMAP&&(Ze.emissiveTexture=i.getUniformLocation(Ce,"u_emissiveTexture"),Ze.emissiveFactor=i.getUniformLocation(Ce,"u_emissiveFactor")),i.useProgram(null),M[this.flags]=this.programObject}};var k=1,_=en.create(),T=ur.create();dc.create();var O=[];i.enable(i.CULL_FACE),i.cullFace(i.BACK),i.frontFace(i.CCW);var U=!0;i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL);var G=G||{},X=null;en.create();var W=ur.create();ur.perspective(W,.785,a.width/a.height,.01,100),ur.create();var Y=ur.create(),J=ur.create(),ot=ur.create();ur.create();var ut,lt,wt=[1,1,1,1],Qt=G.drawPrimitive=function(Ce,Ze){if(Qr){Y=ur.clone(Qr.matrix),J=ur.clone(Qr.matrix);var sn=ur.create();Ze&&(ur.multiply(Y,Y,Ze),ur.multiply(J,J,Ze)),ur.invert(sn,Y),ur.transpose(sn,ot),Ze=wt;var an=Ce.shader,er=Ce.material;if(er!==null){var Ms=er.pbrMetallicRoughness;Ze=Ms.baseColorFactor,Ce.material.doubleSided===U&&((U=!Ce.material.doubleSided)?i.enable(i.CULL_FACE):i.disable(i.CULL_FACE))}X!=Ce.shader.programObject&&(X=Ce.shader.programObject,i.useProgram(X.program)),er&&(an.hasBaseColorMap()&&A(X.uniformLocations.baseColorTexture,Ms.baseColorTexture),an.hasNormalMap()&&(A(X.uniformLocations.normalTexture,er.normalTexture),i.uniform1f(X.uniformLocations.normalTextureScale,er.normalTexture.scale)),an.hasMetalRoughnessMap()&&A(X.uniformLocations.metallicRoughnessTexture,Ms.metallicRoughnessTexture),i.uniform1f(X.uniformLocations.metallicFactor,Ms.metallicFactor),i.uniform1f(X.uniformLocations.roughnessFactor,Ms.roughnessFactor),an.hasOcclusionMap()&&(A(X.uniformLocations.occlusionTexture,er.occlusionTexture),i.uniform1f(X.uniformLocations.occlusionStrength,er.occlusionTexture.strength)),an.hasEmissiveMap()&&(A(X.uniformLocations.emissiveTexture,er.emissiveTexture),i.uniform3fv(X.uniformLocations.emissiveFactor,er.emissiveFactor))),an.hasSkin()&&i.uniformBlockBinding(X.program,X.uniformBlockIndices.JointMatrix,ut),i.activeTexture(i.TEXTURE0+29),i.bindTexture(i.TEXTURE_2D,null),i.uniform4fv(X.uniformLocations.baseColorFactor,Ze),i.uniformMatrix4fv(X.uniformLocations.MV,!1,Y),i.uniformMatrix4fv(X.uniformLocations.MVP,!1,J),i.uniformMatrix4fv(X.uniformLocations.MVNormal,!1,sn),i.bindVertexArray(Ce.vertexArray),Ce.indices!==null?i.drawElements(Ce.mode,Ce.indicesLength,Ce.indicesComponentType,Ce.indicesOffset):i.drawArrays(Ce.mode,Ce.drawArraysOffset,Ce.drawArraysCount),i.bindVertexArray(null)}},zt=ur.create(),ne=ur.create(),pe=G.drawNode=function(Ce,Ze,sn,an){if(Ze=sn[Ze],an!==void 0?ur.mul(Ze,an,Ce.matrix):ur.copy(Ze,Ce.matrix),Ce.skin!==null){var er=Ce.skin;ut=er.uniformBlockID;var Ms=Ce.skin.joints;for(ur.invert(ne,Ze),an=0,ao=Ms.length;an<ao;an++){var so=Ms[an];ur.mul(zt,sn[so.nodeID],er.inverseBindMatrix[an]),ur.mul(zt,ne,zt),er.jointMatrixUnidormBufferData.set(zt,16*an)}i.bindBuffer(i.UNIFORM_BUFFER,er.jointMatrixUniformBuffer),i.bufferSubData(i.UNIFORM_BUFFER,0,er.jointMatrixUnidormBufferData,0,er.jointMatrixUnidormBufferData.length)}var ao;if(Ce.mesh!==null)for(er=Ce.mesh,an=0,ao=er.primitives.length;an<ao;an++)Qt(er.primitives[an],Ze);for(Ce.skin!==null&&i.bindBuffer(i.UNIFORM_BUFFER,null),an=0,ao=Ce.children.length;an<ao;an++)pe(Ce.children[an],Ce.children[an].nodeID,sn,Ze)},be=G.drawScene=function(Ce){var Ze=Ce.glTF;if(Ze.animations){var sn=Ze.animations[u],an,er=0;for(an=sn.samplers.length;er<an;er++)sn.samplers[er].getValue(hr);for(er=0,an=sn.channels.length;er<an;er++){var Ms=sn.channels[er],so=Ms.sampler,ao=Ze.nodes[Ms.target.nodeID];switch(Ms.target.path){case"rotation":Si.copy(ao.rotation,so.curValue);break;case"translation":en.copy(ao.translation,so.curValue);break;case"scale":en.copy(ao.scale,so.curValue)}ao.updateMatrixFromTRS()}}for(sn=0,Ze=Ce.glTFScene.nodes.length;sn<Ze;sn++)pe(Ce.glTFScene.nodes[sn],Ce.glTFScene.nodes[sn].nodeID,Ce.nodeMatrix,Ce.rootTransform)},Ie=performance.now(),hr=0,Qr;return{setupScene:function(Ce,Ze){function sn(Ec,od){if(Ec!==void 0){var Dl=Ec.bufferView;return Dl.target===null?(i.bindBuffer(i.ARRAY_BUFFER,Dl.buffer),i.bufferData(i.ARRAY_BUFFER,Dl.data,i.STATIC_DRAW)):i.bindBuffer(Dl.target,Dl.buffer),Ec.prepareVertexAttrib(od,i),!0}return!1}var an;if(Ce.animations){var er=0;for(an=Ce.animations.length;er<an;er++)m.add(Ce.animations[er].name||er)}u=0,er=Ce.scenes[Ce.defaultScene],en.fromValues(1.2*er.boundingBox.transform[0],0,0),en.create(),Ze?Ze=O[Ze.id]=new p(er,Ce,Ze.id):(Ze=new p(er,Ce,O.length),O.push(Ze)),O.length===1&&(ur.identity(T),k=1/Math.max(er.boundingBox.transform[0],Math.max(er.boundingBox.transform[5],er.boundingBox.transform[10])),ur.getTranslation(_,er.boundingBox.transform),en.scale(_,_,-1),_[0]+=-.5*er.boundingBox.transform[0],_[1]+=-.5*er.boundingBox.transform[5],_[2]+=-.5*er.boundingBox.transform[10],k*=.5,T[0]=k,T[5]=k,T[10]=k,ur.translate(T,T,_),en.set(_,0,0,-1.5),k=1);var Ms;for(er=0,an=Ce.bufferViews.length;er<an;er++){var so=Ce.bufferViews[er];so.createBuffer(i),so.bindData(i)}if(Ce.textures)for(er=0,an=Ce.textures.length;er<an;er++){var ao=Ce.textures[er];ao.createTexture(i)}if(Ce.samplers)for(er=0,an=Ce.samplers.length;er<an;er++)ao=Ce.samplers[er],ao.createSampler(i);if(Ce.skins)for(er=0,an=Ce.skins.length;er<an;er++)ao=Ce.skins[er],ao.jointMatrixUniformBuffer=i.createBuffer(),i.bindBufferBase(i.UNIFORM_BUFFER,ao.uniformBlockID,ao.jointMatrixUniformBuffer),i.bindBuffer(i.UNIFORM_BUFFER,ao.jointMatrixUniformBuffer),i.bufferData(i.UNIFORM_BUFFER,ao.jointMatrixUnidormBufferData,i.DYNAMIC_DRAW),i.bufferSubData(i.UNIFORM_BUFFER,0,ao.jointMatrixUnidormBufferData),i.bindBuffer(i.UNIFORM_BUFFER,null);var id=0;for(Ms=Ce.meshes.length;id<Ms;id++)for(ao=Ce.meshes[id],er=0,an=ao.primitives.length;er<an;++er){var Wo=ao.primitives[er];Wo.shader=new R,Wo.vertexArray=so=i.createVertexArray(),i.bindVertexArray(so),sn(Wo.attributes.POSITION,0),sn(Wo.attributes.NORMAL,1),sn(Wo.attributes.TEXCOORD_0,2),sn(Wo.attributes.JOINTS_0,3)&&sn(Wo.attributes.WEIGHTS_0,4)&&Wo.shader.defineMacro("HAS_SKIN"),sn(Wo.attributes.JOINTS_1,5)&&sn(Wo.attributes.WEIGHTS_1,6)&&Wo.shader.defineMacro("SKIN_VEC8"),Wo.indices!==null&&(so=Ce.accessors[Wo.indices],so=so.bufferView,so.target===null?(i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,so.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,so.data,i.STATIC_DRAW)):i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,so.buffer)),i.bindVertexArray(null),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),(so=Wo.material)&&(so.pbrMetallicRoughness.baseColorTexture&&Wo.shader.defineMacro("HAS_BASECOLORMAP"),so.pbrMetallicRoughness.metallicRoughnessTexture&&Wo.shader.defineMacro("HAS_METALROUGHNESSMAP"),so.normalTexture&&Wo.shader.defineMacro("HAS_NORMALMAP"),so.occlusionTexture&&Wo.shader.defineMacro("HAS_OCCLUSIONMAP"),so.emissiveTexture&&Wo.shader.defineMacro("HAS_EMISSIVEMAP")),Wo.shader.compile()}return Ze},render:G.render=function(Ce){Qr=Ce,Ce=new Date().getTime();var Ze,sn=0;for(Ze=O.length;sn<Ze;sn++)lt=O[sn],be(O[sn]);X=null,hr=.001*(Ce-Ie)}}}function Vs(a,A,i,u,m,p){if(typeof A=="string"&&typeof i=="number"&&typeof u=="number")for(A=A.split(p),p=0;p<A.length;p++)a.fillText(A[p],i,u),u+=m}function Mo(a){this.options=a=a||{},a.colors=a.colors||["rgba(0,192,73,0.99609375)","rgba(242,48,48,0.99609375)","rgba(255,159,25,0.99609375)"];var A=a.colors;this.drawTogether=!0,this.parseColors(A),this.tileSize=256,this.ratio=window.devicePixelRatio,this.cache={},a.getTileUrl&&(this.getTileUrl=a.getTileUrl),this._loadCount={}}function Xl(a){var A=a/2,i=a+A,u=new ns(2*i,2*i),m=u.getContext("2d");return m.shadowBlur=A,m.shadowColor="black",m.shadowOffsetX=m.shadowOffsetY=1e4,m.beginPath(),m.arc(i-1e4,i-1e4,a,0,2*Math.PI,!0),m.closePath(),m.fill(),u}var kh=window.BMapGL||window.BMap;kh&&kh.Overlay&&(ce.prototype=new kh.Overlay),ce.prototype.initialize=function(a){this._map=a;var A=this.canvas=document.createElement("canvas"),i=this.ctx=this.canvas.getContext("2d");A.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";",this.adjustSize(),this.adjustRatio(i),a.getContainer().appendChild(A);var u=this;return a.addEventListener("resize",function(){u.adjustSize(),u._draw()}),this.canvas},ce.prototype.adjustSize=function(){var a=this._map.getSize(),A=this.canvas;A.width=a.width,A.height=a.height,A.style.width=A.width+"px",A.style.height=A.height+"px"},ce.prototype.adjustRatio=function(a){var A=(window.devicePixelRatio||1)/(a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),i=a.canvas.width,u=a.canvas.height;a.canvas.width=i*A,a.canvas.height=u*A,a.canvas.style.width=i+"px",a.canvas.style.height=u+"px",a.scale(A,A)},ce.prototype.draw=function(){this._draw.apply(this,arguments)},ce.prototype._draw=function(){this.dispatchEvent("draw"),this.options.update&&this.options.update.apply(this,arguments)},ce.prototype.getContainer=function(){return this.canvas},ce.prototype.show=function(){this.canvas||this._map.addOverlay(this),this.canvas.style.display="block"},ce.prototype.hide=function(){this.canvas.style.display="none"},ce.prototype.setZIndex=function(a){this.canvas.style.zIndex=a},ce.prototype.getZIndex=function(){return this.zIndex};var $u=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Nt.g!="undefined"?Nt.g:typeof self!="undefined"?self:{},Gh=Ot(function(a,A){A.__esModule=!0,A.default=function(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}}),fr=Gt(Gh),ma=function(a){if(a==null)throw TypeError("Can't call method on  "+a);return a},op={}.hasOwnProperty,Ti=function(a,A){return op.call(a,A)},sp={}.toString,ra=function(a){return sp.call(a).slice(8,-1)},bc=Object("z").propertyIsEnumerable(0)?Object:function(a){return ra(a)=="String"?a.split(""):Object(a)},Ha=function(a){return bc(ma(a))},kc=Math.ceil,Vh=Math.floor,TA=function(a){return isNaN(a=+a)?0:(0<a?Vh:kc)(a)},Po=Math.min,fi=function(a){return 0<a?Po(TA(a),9007199254740991):0},Wn=Math.max,yo=Math.min,Cn=Ot(function(a){a=a.exports={version:"2.6.5"},typeof __e=="number"&&(__e=a)}),Ln=Ot(function(a){a=a.exports=typeof window!="undefined"&&Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")(),typeof __g=="number"&&(__g=a)}),Na=Ot(function(a){var A=Ln["__core-js_shared__"]||(Ln["__core-js_shared__"]={});(a.exports=function(i,u){return A[i]||(A[i]=u!==void 0?u:{})})("versions",[]).push({version:Cn.version,mode:"pure",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),SA=0,Kl=Math.random(),za=function(a){return"Symbol(".concat(a===void 0?"":a,")_",(++SA+Kl).toString(36))},Ko=Na("keys"),LA=function(a){return Ko[a]||(Ko[a]=za(a))},ap=function(a){return function(A,i,u){A=Ha(A);var m=fi(A.length);if(u=TA(u),u=0>u?Wn(u+m,0):yo(u,m),a&&i!=i){for(;m>u;)if(i=A[u++],i!=i)return!0}else for(;m>u;u++)if((a||u in A)&&A[u]===i)return a||u||0;return!a&&-1}}(!1),Xg=LA("IE_PROTO"),Kg=function(a,A){a=Ha(a);var i=0,u=[],m;for(m in a)m!=Xg&&Ti(a,m)&&u.push(m);for(;A.length>i;)Ti(a,m=A[i++])&&(~ap(u,m)||u.push(m));return u},Wh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),va=Object.keys||function(a){return Kg(a,Wh)},FA=function(a){if(typeof a!="function")throw TypeError(a+" is not a function!");return a},Yo=function(a,A,i){if(FA(a),A===void 0)return a;switch(i){case 1:return function(u){return a.call(A,u)};case 2:return function(u,m){return a.call(A,u,m)};case 3:return function(u,m,p){return a.call(A,u,m,p)}}return function(){return a.apply(A,arguments)}},Ls=function(a){return typeof a=="object"?a!==null:typeof a=="function"},Ws=function(a){if(!Ls(a))throw TypeError(a+" is not an object!");return a},KA=function(a){try{return!!a()}catch(A){return!0}},Ki=!KA(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),ya=Ln.document,Qa=Ls(ya)&&Ls(ya.createElement),tl=!Ki&&!KA(function(){return Object.defineProperty(Qa?ya.createElement("div"):{},"a",{get:function(){return 7}}).a!=7}),Yl=function(a,A){if(!Ls(a))return a;var i,u;if(A&&typeof(i=a.toString)=="function"&&!Ls(u=i.call(a))||typeof(i=a.valueOf)=="function"&&!Ls(u=i.call(a))||!A&&typeof(i=a.toString)=="function"&&!Ls(u=i.call(a)))return u;throw TypeError("Can't convert object to primitive value")},Ap=Object.defineProperty,js={f:Ki?Object.defineProperty:function(a,A,i){if(Ws(a),A=Yl(A,!0),Ws(i),tl)try{return Ap(a,A,i)}catch(u){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(a[A]=i.value),a}},xa=function(a,A){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:A}},na=Ki?function(a,A,i){return js.f(a,A,xa(1,i))}:function(a,A,i){return a[A]=i,a},os=function(a,A,i){var u=a&os.F,m=a&os.G,p=a&os.S,y=a&os.P,v=a&os.B,M=a&os.W,R=m?Cn:Cn[A]||(Cn[A]={}),k=R.prototype;p=m?Ln:p?Ln[A]:(Ln[A]||{}).prototype;var _;m&&(i=A);for(_ in i)if(A=!u&&p&&p[_]!==void 0,!A||!Ti(R,_)){var T=A?p[_]:i[_];R[_]=m&&typeof p[_]!="function"?i[_]:v&&A?Yo(T,Ln):M&&p[_]==T?function(O){var U=function(G,X,W){if(this instanceof O){switch(arguments.length){case 0:return new O;case 1:return new O(G);case 2:return new O(G,X)}return new O(G,X,W)}return O.apply(this,arguments)};return U.prototype=O.prototype,U}(T):y&&typeof T=="function"?Yo(Function.call,T):T,y&&((R.virtual||(R.virtual={}))[_]=T,a&os.R&&k&&!k[_]&&na(k,_,T))}};os.F=1,os.G=2,os.S=4,os.P=8,os.B=16,os.W=32,os.U=64,os.R=128;var Xr=os,pi=function(a,A){var i=(Cn.Object||{})[a]||Object[a],u={};u[a]=A(i),Xr(Xr.S+Xr.F*KA(function(){i(1)}),"Object",u)};pi("keys",function(){return function(a){return va(Object(ma(a)))}});var Xs=Cn.Object.keys,uo=Ot(function(a){a.exports={default:Xs,__esModule:!0}}),_o=Gt(uo),ba=Object.getOwnPropertySymbols,xu={}.propertyIsEnumerable,jh=Object.assign,Yg=!jh||KA(function(){var a={},A={},i=Symbol();return a[i]=7,"abcdefghijklmnopqrst".split("").forEach(function(u){A[u]=u}),jh({},a)[i]!=7||Object.keys(jh({},A)).join("")!="abcdefghijklmnopqrst"})?function(a,A){for(var i=Object(ma(a)),u=arguments.length,m=1,p=ba,y=xu;u>m;)for(var v=bc(arguments[m++]),M=p?va(v).concat(p(v)):va(v),R=M.length,k=0,_;R>k;)y.call(v,_=M[k++])&&(i[_]=v[_]);return i}:jh;Xr(Xr.S+Xr.F,"Object",{assign:Yg});var Gc=Cn.Object.assign,up=Ot(function(a){a.exports={default:Gc,__esModule:!0}}),ln=Gt(up),Vc=LA("IE_PROTO"),lp=Object.prototype,Xh=Object.getPrototypeOf||function(a){return a=Object(ma(a)),Ti(a,Vc)?a[Vc]:typeof a.constructor=="function"&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?lp:null};pi("getPrototypeOf",function(){return function(a){return Xh(Object(ma(a)))}});var hp=Cn.Object.getPrototypeOf,Zo=Ot(function(a){a.exports={default:hp,__esModule:!0}}),Er=Gt(Zo);Xr(Xr.S+Xr.F*!Ki,"Object",{defineProperty:js.f});var Wc=Cn.Object,cp=function(a,A,i){return Wc.defineProperty(a,A,i)},wa=Ot(function(a){a.exports={default:cp,__esModule:!0}}),Bo=Gt(wa),jc=Ot(function(a,A){A.__esModule=!0;var i=wa&&wa.__esModule?wa:{default:wa};A.default=function(){function u(m,p){for(var y=0;y<p.length;y++){var v=p[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),(0,i.default)(m,v.key,v)}}return function(m,p,y){return p&&u(m.prototype,p),y&&u(m,y),m}}()}),mr=Gt(jc),Ca={},Kh=Ki?Object.defineProperties:function(a,A){Ws(a);for(var i=va(A),u=i.length,m=0,p;u>m;)js.f(a,p=i[m++],A[p]);return a},el=Ln.document,Zl=el&&el.documentElement,wu=LA("IE_PROTO"),RA=function(){},di=function(){var a=Qa?ya.createElement("iframe"):{},A=Wh.length;for(a.style.display="none",Zl.appendChild(a),a.src="javascript:",a=a.contentWindow.document,a.open(),a.write("<script>document.F=Object</script>"),a.close(),di=a.F;A--;)delete di.prototype[Wh[A]];return di()},Cu=Object.create||function(a,A){if(a!==null){RA.prototype=Ws(a);var i=new RA;RA.prototype=null,i[wu]=a}else i=di();return A===void 0?i:Kh(i,A)},eo=Ot(function(a){var A=Na("wks"),i=Ln.Symbol,u=typeof i=="function";(a.exports=function(m){return A[m]||(A[m]=u&&i[m]||(u?i:za)("Symbol."+m))}).store=A}),Yh=js.f,Jl=eo("toStringTag"),Ks=function(a,A,i){a&&!Ti(a=i?a:a.prototype,Jl)&&Yh(a,Jl,{configurable:!0,value:A})},Zg={};na(Zg,eo("iterator"),function(){return this});var YA=function(a,A,i){a.prototype=Cu(Zg,{next:xa(1,i)}),Ks(a,A+" Iterator")},Uo=eo("iterator"),Mu=!([].keys&&"next"in[].keys()),Zn=function(){return this},rl=function(a,A,i,u,m,p,y){YA(i,A,u),u=function(W){return!Mu&&W in k?k[W]:function(){return new i(this,W)}};var v=A+" Iterator",M=m=="values",R=!1,k=a.prototype,_=k[Uo]||k["@@iterator"]||m&&k[m],T=_||u(m),O=m?M?u("entries"):T:void 0,U=A=="Array"&&k.entries||_,G;if(U&&(a=Xh(U.call(new a)),a!==Object.prototype&&a.next&&Ks(a,v,!0)),M&&_&&_.name!=="values"&&(R=!0,T=function(){return _.call(this)}),y&&(Mu||R||!k[Uo])&&na(k,Uo,T),Ca[A]=T,Ca[v]=Zn,m){var X={values:M?T:u("values"),keys:p?T:u("keys"),entries:O};if(y)for(G in X)G in k||na(k,G,X[G]);else Xr(Xr.P+Xr.F*(Mu||R),A,X)}return X},_u=function(a){return function(A,i){A=String(ma(A)),i=TA(i);var u=A.length,m;if(0>i||i>=u)return a?"":void 0;var p=A.charCodeAt(i);return 55296>p||56319<p||i+1===u||56320>(m=A.charCodeAt(i+1))||57343<m?a?A.charAt(i):p:a?A.slice(i,i+2):(p-55296<<10)+(m-56320)+65536}}(!0);rl(String,"String",function(a){this._t=String(a),this._i=0},function(){var a=this._t,A=this._i;return A>=a.length?{value:void 0,done:!0}:(a=_u(a,A),this._i+=a.length,{value:a,done:!1})});var ia=function(a,A){return{value:A,done:!!a}};rl(Array,"Array",function(a,A){this._t=Ha(a),this._i=0,this._k=A},function(){var a=this._t,A=this._k,i=this._i++;return!a||i>=a.length?(this._t=void 0,ia(1)):A=="keys"?ia(0,i):A=="values"?ia(0,a[i]):ia(0,[i,a[i]])},"values"),Ca.Arguments=Ca.Array;for(var ji=eo("toStringTag"),ql="CSSRuleList CSSStyleDeclaration CSSValueList ClientRectList DOMRectList DOMStringList DOMTokenList DataTransferItemList FileList HTMLAllCollection HTMLCollection HTMLFormElement HTMLSelectElement MediaList MimeTypeArray NamedNodeMap NodeList PaintRequestList Plugin PluginArray SVGLengthList SVGNumberList SVGPathSegList SVGPointList SVGStringList SVGTransformList SourceBufferList StyleSheetList TextTrackCueList TextTrackList TouchList".split(" "),Xc=0;Xc<ql.length;Xc++){var Kc=ql[Xc],$l=Ln[Kc],nl=$l&&$l.prototype;nl&&!nl[ji]&&na(nl,ji,Kc),Ca[Kc]=Ca.Array}var Zh={f:eo},Fd=Zh.f("iterator"),Go=Ot(function(a){a.exports={default:Fd,__esModule:!0}});Gt(Go);var ss=Ot(function(a){var A=za("meta"),i=js.f,u=0,m=Object.isExtensible||function(){return!0},p=!KA(function(){return m(Object.preventExtensions({}))}),y=function(M){i(M,A,{value:{i:"O"+ ++u,w:{}}})},v=a.exports={KEY:A,NEED:!1,fastKey:function(M,R){if(!Ls(M))return typeof M=="symbol"?M:(typeof M=="string"?"S":"P")+M;if(!Ti(M,A)){if(!m(M))return"F";if(!R)return"E";y(M)}return M[A].i},getWeak:function(M,R){if(!Ti(M,A)){if(!m(M))return!0;if(!R)return!1;y(M)}return M[A].w},onFreeze:function(M){return p&&v.NEED&&m(M)&&!Ti(M,A)&&y(M),M}}}),Bu=js.f,Eo=function(a){var A=Cn.Symbol||(Cn.Symbol={});a.charAt(0)=="_"||a in A||Bu(A,a,{value:Zh.f(a)})},Ma=Array.isArray||function(a){return ra(a)=="Array"},Yc=Wh.concat("length","prototype"),il=Object.getOwnPropertyNames||function(a){return Kg(a,Yc)},th=il,Jh={}.toString,Zc=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ZA=function(a){if(Zc&&Jh.call(a)=="[object Window]")try{var A=th(a)}catch(i){A=Zc.slice()}else A=th(Ha(a));return A},oa=Object.getOwnPropertyDescriptor,Eu={f:Ki?oa:function(a,A){if(a=Ha(a),A=Yl(A,!0),tl)try{return oa(a,A)}catch(i){}if(Ti(a,A))return xa(!xu.call(a,A),a[A])}},Jg=ss.KEY,ol=Eu.f,ka=js.f,Iu=ZA,Fs=Ln.Symbol,Rs=Ln.JSON,sl=Rs&&Rs.stringify,gs=eo("_hidden"),eh=eo("toPrimitive"),al={}.propertyIsEnumerable,ms=Na("symbol-registry"),Ys=Na("symbols"),_a=Na("op-symbols"),Ps=Object.prototype,oA=typeof Fs=="function",Tu=Ln.QObject,Su=!Tu||!Tu.prototype||!Tu.prototype.findChild,Lu=Ki&&KA(function(){return Cu(ka({},"a",{get:function(){return ka(this,"a",{value:7}).a}})).a!=7})?function(a,A,i){var u=ol(Ps,A);u&&delete Ps[A],ka(a,A,i),u&&a!==Ps&&ka(Ps,A,u)}:ka,Zs=function(a){var A=Ys[a]=Cu(Fs.prototype);return A._k=a,A},Jc=oA&&typeof Fs.iterator=="symbol"?function(a){return typeof a=="symbol"}:function(a){return a instanceof Fs},JA=function(a,A,i){return a===Ps&&JA(_a,A,i),Ws(a),A=Yl(A,!0),Ws(i),Ti(Ys,A)?(i.enumerable?(Ti(a,gs)&&a[gs][A]&&(a[gs][A]=!1),i=Cu(i,{enumerable:xa(0,!1)})):(Ti(a,gs)||ka(a,gs,xa(1,{})),a[gs][A]=!0),Lu(a,A,i)):ka(a,A,i)},fp=function(a,A){Ws(a);var i=A=Ha(A),u=va(i),m=ba;if(m){m=m(i);for(var p=xu,y=0,v;m.length>y;)p.call(i,v=m[y++])&&u.push(v)}i=0,v=u.length;for(var M;v>i;)JA(a,M=u[i++],A[M]);return a},Js=function(a){var A=al.call(this,a=Yl(a,!0));return this===Ps&&Ti(Ys,a)&&!Ti(_a,a)?!1:A||!Ti(this,a)||!Ti(Ys,a)||Ti(this,gs)&&this[gs][a]?A:!0},qh=function(a,A){if(a=Ha(a),A=Yl(A,!0),a!==Ps||!Ti(Ys,A)||Ti(_a,A)){var i=ol(a,A);return!i||!Ti(Ys,A)||Ti(a,gs)&&a[gs][A]||(i.enumerable=!0),i}},pp=function(a){a=Iu(Ha(a));for(var A=[],i=0,u;a.length>i;)Ti(Ys,u=a[i++])||u==gs||u==Jg||A.push(u);return A},Al=function(a){var A=a===Ps;a=Iu(A?_a:Ha(a));for(var i=[],u=0,m;a.length>u;)Ti(Ys,m=a[u++])&&(A?Ti(Ps,m):1)&&i.push(Ys[m]);return i};oA||(Fs=function(){if(this instanceof Fs)throw TypeError("Symbol is not a constructor!");var a=za(0<arguments.length?arguments[0]:void 0),A=function(i){this===Ps&&A.call(_a,i),Ti(this,gs)&&Ti(this[gs],a)&&(this[gs][a]=!1),Lu(this,a,xa(1,i))};return Ki&&Su&&Lu(Ps,a,{configurable:!0,set:A}),Zs(a)},na(Fs.prototype,"toString",function(){return this._k}),Eu.f=qh,js.f=JA,il=ZA=pp,xu=Js,ba=Al,Zh.f=function(a){return Zs(eo(a))}),Xr(Xr.G+Xr.W+Xr.F*!oA,{Symbol:Fs});for(var dp="hasInstance isConcatSpreadable iterator match replace search species split toPrimitive toStringTag unscopables".split(" "),$h=0;dp.length>$h;)eo(dp[$h++]);for(var gp=va(eo.store),rh=0;gp.length>rh;)Eo(gp[rh++]);Xr(Xr.S+Xr.F*!oA,"Symbol",{for:function(a){return Ti(ms,a+="")?ms[a]:ms[a]=Fs(a)},keyFor:function(a){if(!Jc(a))throw TypeError(a+" is not a symbol!");for(var A in ms)if(ms[A]===a)return A},useSetter:function(){Su=!0},useSimple:function(){Su=!1}}),Xr(Xr.S+Xr.F*!oA,"Object",{create:function(a,A){return A===void 0?Cu(a):fp(Cu(a),A)},defineProperty:JA,defineProperties:fp,getOwnPropertyDescriptor:qh,getOwnPropertyNames:pp,getOwnPropertySymbols:Al}),Rs&&Xr(Xr.S+Xr.F*(!oA||KA(function(){var a=Fs();return sl([a])!="[null]"||sl({a})!="{}"||sl(Object(a))!="{}"})),"JSON",{stringify:function(a){for(var A=[a],i=1,u;arguments.length>i;)A.push(arguments[i++]);if(u=i=A[1],(Ls(i)||a!==void 0)&&!Jc(a))return Ma(i)||(i=function(m,p){if(typeof u=="function"&&(p=u.call(this,m,p)),!Jc(p))return p}),A[1]=i,sl.apply(Rs,A)}}),Fs.prototype[eh]||na(Fs.prototype,eh,Fs.prototype.valueOf),Ks(Fs,"Symbol"),Ks(Math,"Math",!0),Ks(Ln.JSON,"JSON",!0),Eo("asyncIterator"),Eo("observable");var sA=Cn.Symbol,qA=Ot(function(a){a.exports={default:sA,__esModule:!0}}),qg=Gt(qA),nh=Ot(function(a,A){A.__esModule=!0,a=Go&&Go.__esModule?Go:{default:Go};var i=qA&&qA.__esModule?qA:{default:qA},u=typeof i.default=="function"&&typeof a.default=="symbol"?function(m){return typeof m}:function(m){return m&&typeof i.default=="function"&&m.constructor===i.default&&m!==i.default.prototype?"symbol":typeof m};A.default=typeof i.default=="function"&&u(a.default)==="symbol"?function(m){return typeof m=="undefined"?"undefined":u(m)}:function(m){return m&&typeof i.default=="function"&&m.constructor===i.default&&m!==i.default.prototype?"symbol":typeof m=="undefined"?"undefined":u(m)}}),Mn=Gt(nh),Ba=Ot(function(a,A){A.__esModule=!0;var i=nh&&nh.__esModule?nh:{default:nh};A.default=function(u,m){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||(typeof m=="undefined"?"undefined":(0,i.default)(m))!=="object"&&typeof m!="function"?u:m}}),on=Gt(Ba),$g=Object.setPrototypeOf||("__proto__"in{}?function(a,A,i){try{i=Yo(Function.call,Eu.f(Object.prototype,"__proto__").set,2),i(a,[]),A=!(a instanceof Array)}catch(u){A=!0}return function(u,m){if(Ws(u),!Ls(m)&&m!==null)throw TypeError(m+": can't set as prototype!");return A?u.__proto__=m:i(u,m),u}}({},!1):void 0);Xr(Xr.S,"Object",{setPrototypeOf:$g});var tm=Cn.Object.setPrototypeOf,Fu=Ot(function(a){a.exports={default:tm,__esModule:!0}});Gt(Fu),Xr(Xr.S,"Object",{create:Cu});var Rd=Cn.Object,qc=function(a,A){return Rd.create(a,A)},fn=Ot(function(a){a.exports={default:qc,__esModule:!0}}),aA=Gt(fn),ul=Ot(function(a,A){function i(y){return y&&y.__esModule?y:{default:y}}A.__esModule=!0;var u=i(Fu),m=i(fn),p=i(nh);A.default=function(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof v=="undefined"?"undefined":(0,p.default)(v)));y.prototype=(0,m.default)(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(u.default?(0,u.default)(y,v):y.__proto__=v)}}),tn=Gt(ul),sa=eo("toStringTag"),em=ra(function(){return arguments}())=="Arguments",ll=function(a){var A;if(a===void 0)var i="Undefined";else{if(a===null)var u="Null";else{t:{var m=a=Object(a);try{u=m[sa];break t}catch(p){}u=void 0}u=typeof(i=u)=="string"?i:em?ra(a):(A=ra(a))=="Object"&&typeof a.callee=="function"?"Arguments":A}i=u}return i},hl=eo("iterator"),$A=Cn.isIterable=function(a){return a=Object(a),a[hl]!==void 0||"@@iterator"in a||Ca.hasOwnProperty(ll(a))},Ga=Ot(function(a){a.exports={default:$A,__esModule:!0}});Gt(Ga);var Va=eo("iterator"),AA=Cn.getIteratorMethod=function(a){if(a!=null)return a[Va]||a["@@iterator"]||Ca[ll(a)]},tu=Cn.getIterator=function(a){var A=AA(a);if(typeof A!="function")throw TypeError(a+" is not iterable!");return Ws(A.call(a))},Wa=Ot(function(a){a.exports={default:tu,__esModule:!0}}),aa=Gt(Wa),cl=Ot(function(a,A){A.__esModule=!0;var i=Ga&&Ga.__esModule?Ga:{default:Ga},u=Wa&&Wa.__esModule?Wa:{default:Wa};A.default=function(){return function(m,p){if(Array.isArray(m))return m;if((0,i.default)(Object(m))){var y=[],v=!0,M=!1,R=void 0;try{for(var k=(0,u.default)(m),_;!(v=(_=k.next()).done)&&(y.push(_.value),!p||y.length!==p);v=!0);}catch(T){M=!0,R=T}finally{try{!v&&k.return&&k.return()}finally{if(M)throw R}}return y}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),ni=Gt(cl),fl=function(a,A,i,u){try{return u?A(Ws(i)[0],i[1]):A(i)}catch(m){throw A=a.return,A!==void 0&&Ws(A.call(a)),m}},Yi=eo("iterator"),mp=Array.prototype,PA=eo("iterator"),$c=!1;try{[7][PA]().return=function(){$c=!0}}catch(a){}var tf=function(a,A){if(!A&&!$c)return!1;var i=!1;try{A=[7];var u=A[PA]();u.next=function(){return{done:i=!0}},A[PA]=function(){return u},a(A)}catch(m){}return i};Xr(Xr.S+Xr.F*!tf(function(a){}),"Array",{from:function(a){var A=Object(ma(a)),i=typeof this=="function"?this:Array,u=arguments.length,m=1<u?arguments[1]:void 0,p=m!==void 0,y=0,v=AA(A),M;if(p&&(m=Yo(m,2<u?arguments[2]:void 0,2)),v!=null&&(i!=Array||v===void 0||Ca.Array!==v&&mp[Yi]!==v))for(A=v.call(A),i=new i;!(M=A.next()).done;y++)u=i,v=y,M=p?fl(A,m,[M.value,y],!0):M.value,v in u?js.f(u,v,xa(0,M)):u[v]=M;else for(u=fi(A.length),i=new i(u);u>y;y++){v=i,M=y;var R=p?m(A[y],y):A[y];M in v?js.f(v,M,xa(0,R)):v[M]=R}return i.length=y,i}});var Pd=Cn.Array.from,eu=Ot(function(a){a.exports={default:Pd,__esModule:!0}}),Ea=Gt(eu),Ud=Ot(function(a,A){A.__esModule=!0;var i=eu&&eu.__esModule?eu:{default:eu};A.default=function(u){if(Array.isArray(u)){for(var m=0,p=Array(u.length);m<u.length;m++)p[m]=u[m];return p}return(0,i.default)(u)}}),Fn=Gt(Ud),Dd=ss.onFreeze;pi("freeze",function(a){return function(A){return a&&Ls(A)?a(Dd(A)):A}});var Od=Cn.Object.freeze,Hd=Ot(function(a){a.exports={default:Od,__esModule:!0}}),uA=Gt(Hd),ih=Cn.JSON||(Cn.JSON={stringify:JSON.stringify}),vp=function(a){return ih.stringify.apply(ih,arguments)},Nd=Ot(function(a){a.exports={default:vp,__esModule:!0}}),oh=Gt(Nd),ja={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},rm=Eu.f;pi("getOwnPropertyDescriptor",function(){return function(a,A){return rm(Ha(a),A)}});var nm=Cn.Object,im=function(a,A){return nm.getOwnPropertyDescriptor(a,A)},tc=Ot(function(a){a.exports={default:im,__esModule:!0}}),Io=Gt(tc),ec=Ot(function(a){var A=Array.prototype.concat,i=Array.prototype.slice,u=a.exports=function(m){for(var p=[],y=0,v=m.length;y<v;y++){var M=m[y],R=(R=M)&&typeof R!="string"?R instanceof Array||Array.isArray(R)||0<=R.length&&(R.splice instanceof Function||Io(R,R.length-1)&&R.constructor.name!=="String"):!1;R?p=A.call(p,i.call(M)):p.push(M)}return p};u.wrap=function(m){return function(){return m(u(arguments))}}}),rc=Ot(function(a){function A(y,v,M){return Math.min(Math.max(v,y),M)}function i(y){return y=y.toString(16).toUpperCase(),2>y.length?"0"+y:y}var u={},m;for(m in ja)ja.hasOwnProperty(m)&&(u[ja[m]]=m);var p=a.exports={to:{},get:{}};p.get=function(y){switch(y.substring(0,3).toLowerCase()){case"hsl":y=p.get.hsl(y);var v="hsl";break;case"hwb":y=p.get.hwb(y),v="hwb";break;default:y=p.get.rgb(y),v="rgb"}return y?{model:v,value:y}:null},p.get.rgb=function(y){if(!y)return null;var v=/^#([a-f0-9]{3,4})$/i,M=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,R=/^rgba?\(\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,k=/(\D+)/,_=[0,0,0,1],T;if(T=y.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(v=T[2],T=T[1],y=0;3>y;y++)M=2*y,_[y]=parseInt(T.slice(M,M+2),16);v&&(_[3]=Math.round(parseInt(v,16)/255*100)/100)}else if(T=y.match(v)){for(T=T[1],v=T[3],y=0;3>y;y++)_[y]=parseInt(T[y]+T[y],16);v&&(_[3]=Math.round(parseInt(v+v,16)/255*100)/100)}else if(T=y.match(M)){for(y=0;3>y;y++)_[y]=parseInt(T[y+1],0);T[4]&&(_[3]=parseFloat(T[4]))}else if(T=y.match(R)){for(y=0;3>y;y++)_[y]=Math.round(2.55*parseFloat(T[y+1]));T[4]&&(_[3]=parseFloat(T[4]))}else return(T=y.match(k))?T[1]==="transparent"?[0,0,0,0]:(_=ja[T[1]],_?(_[3]=1,_):null):null;for(y=0;3>y;y++)_[y]=A(_[y],0,255);return _[3]=A(_[3],0,1),_},p.get.hsl=function(y){if(!y)return null;var v=y.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(v){var M=parseFloat(v[4]);y=(parseFloat(v[1])+360)%360;var R=A(parseFloat(v[2]),0,100);return v=A(parseFloat(v[3]),0,100),M=A(isNaN(M)?1:M,0,1),[y,R,v,M]}return null},p.get.hwb=function(y){if(!y)return null;var v=y.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(v){var M=parseFloat(v[4]);y=(parseFloat(v[1])%360+360)%360;var R=A(parseFloat(v[2]),0,100);return v=A(parseFloat(v[3]),0,100),M=A(isNaN(M)?1:M,0,1),[y,R,v,M]}return null},p.to.hex=function(){var y=ec(arguments);return"#"+i(y[0])+i(y[1])+i(y[2])+(1>y[3]?i(Math.round(255*y[3])):"")},p.to.rgb=function(){var y=ec(arguments);return 4>y.length||y[3]===1?"rgb("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+")":"rgba("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+", "+y[3]+")"},p.to.rgb.percent=function(){var y=ec(arguments),v=Math.round(y[0]/255*100),M=Math.round(y[1]/255*100),R=Math.round(y[2]/255*100);return 4>y.length||y[3]===1?"rgb("+v+"%, "+M+"%, "+R+"%)":"rgba("+v+"%, "+M+"%, "+R+"%, "+y[3]+")"},p.to.hsl=function(){var y=ec(arguments);return 4>y.length||y[3]===1?"hsl("+y[0]+", "+y[1]+"%, "+y[2]+"%)":"hsla("+y[0]+", "+y[1]+"%, "+y[2]+"%, "+y[3]+")"},p.to.hwb=function(){var y=ec(arguments),v="";return 4<=y.length&&y[3]!==1&&(v=", "+y[3]),"hwb("+y[0]+", "+y[1]+"%, "+y[2]+"%"+v+")"},p.to.keyword=function(y){return u[y.slice(0,3)]}}),Ru=Ot(function(a){var A={};for(m in ja)ja.hasOwnProperty(m)&&(A[ja[m]]=m);var i=a.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},u;for(u in i)if(i.hasOwnProperty(u)){if(!("channels"in i[u]))throw Error("missing channels property: "+u);if(!("labels"in i[u]))throw Error("missing channel labels property: "+u);if(i[u].labels.length!==i[u].channels)throw Error("channel and label counts mismatch: "+u);a=i[u].channels;var m=i[u].labels;delete i[u].channels,delete i[u].labels,Object.defineProperty(i[u],"channels",{value:a}),Object.defineProperty(i[u],"labels",{value:m})}i.rgb.hsl=function(p){var y=p[0]/255,v=p[1]/255,M=p[2]/255;p=Math.min(y,v,M);var R=Math.max(y,v,M),k=R-p,_;return R===p?_=0:y===R?_=(v-M)/k:v===R?_=2+(M-y)/k:M===R&&(_=4+(y-v)/k),_=Math.min(60*_,360),0>_&&(_+=360),y=(p+R)/2,[_,100*(R===p?0:.5>=y?k/(R+p):k/(2-R-p)),100*y]},i.rgb.hsv=function(p){var y,v=p[0]/255,M=p[1]/255,R=p[2]/255,k=Math.max(v,M,R),_=k-Math.min(v,M,R);if(_===0)var T=y=0;else{y=_/k,p=(k-v)/6/_+.5;var O=(k-M)/6/_+.5;_=(k-R)/6/_+.5,v===k?T=_-O:M===k?T=1/3+p-_:R===k&&(T=2/3+O-p),0>T?T+=1:1<T&&--T}return[360*T,100*y,100*k]},i.rgb.hwb=function(p){var y=p[0],v=p[1],M=p[2];p=i.rgb.hsl(p)[0];var R=1/255*Math.min(y,Math.min(v,M));return M=1-1/255*Math.max(y,Math.max(v,M)),[p,100*R,100*M]},i.rgb.cmyk=function(p){var y=p[0]/255,v=p[1]/255;p=p[2]/255;var M=Math.min(1-y,1-v,1-p);return[100*((1-y-M)/(1-M)||0),100*((1-v-M)/(1-M)||0),100*((1-p-M)/(1-M)||0),100*M]},i.rgb.keyword=function(p){var y=A[p];if(y)return y;y=Infinity;var v;for(v in ja)if(ja.hasOwnProperty(v)){var M=ja[v];if(M=Math.pow(p[0]-M[0],2)+Math.pow(p[1]-M[1],2)+Math.pow(p[2]-M[2],2),M<y){y=M;var R=v}}return R},i.keyword.rgb=function(p){return ja[p]},i.rgb.xyz=function(p){var y=p[0]/255,v=p[1]/255;return p=p[2]/255,y=.04045<y?Math.pow((y+.055)/1.055,2.4):y/12.92,v=.04045<v?Math.pow((v+.055)/1.055,2.4):v/12.92,p=.04045<p?Math.pow((p+.055)/1.055,2.4):p/12.92,[100*(.4124*y+.3576*v+.1805*p),100*(.2126*y+.7152*v+.0722*p),100*(.0193*y+.1192*v+.9505*p)]},i.rgb.lab=function(p){var y=i.rgb.xyz(p);p=y[0];var v=y[1];return y=y[2],p/=95.047,v/=100,y/=108.883,p=.008856<p?Math.pow(p,1/3):7.787*p+16/116,v=.008856<v?Math.pow(v,1/3):7.787*v+16/116,y=.008856<y?Math.pow(y,1/3):7.787*y+16/116,[116*v-16,500*(p-v),200*(v-y)]},i.hsl.rgb=function(p){var y=p[0]/360,v=p[1]/100;if(p=p[2]/100,v===0){var M=255*p;return[M,M,M]}v=.5>p?p*(1+v):p+v-p*v,p=2*p-v;for(var R=[0,0,0],k=0;3>k;k++)M=y+1/3*-(k-1),0>M&&M++,1<M&&M--,M=1>6*M?p+6*(v-p)*M:1>2*M?v:2>3*M?p+(v-p)*(2/3-M)*6:p,R[k]=255*M;return R},i.hsl.hsv=function(p){var y=p[0],v=p[1]/100;p=p[2]/100;var M=v,R=Math.max(p,.01);return p*=2,v*=1>=p?p:2-p,M*=1>=R?R:2-R,[y,100*(p===0?2*M/(R+M):2*v/(p+v)),(p+v)/2*100]},i.hsv.rgb=function(p){var y=p[0]/60,v=p[1]/100;p=p[2]/100;var M=Math.floor(y)%6,R=y-Math.floor(y);y=255*p*(1-v);var k=255*p*(1-v*R);switch(v=255*p*(1-v*(1-R)),p*=255,M){case 0:return[p,v,y];case 1:return[k,p,y];case 2:return[y,p,v];case 3:return[y,k,p];case 4:return[v,y,p];case 5:return[p,y,k]}},i.hsv.hsl=function(p){var y=p[0],v=p[1]/100;p=p[2]/100;var M=Math.max(p,.01),R=(2-v)*M;return M=v*M/(1>=R?R:2-R)||0,[y,100*M,(2-v)*p/2*100]},i.hwb.rgb=function(p){var y=p[0]/360,v=p[1]/100;p=p[2]/100;var M=v+p;switch(1<M&&(v/=M,p/=M),M=Math.floor(6*y),p=1-p,y=6*y-M,(M&1)!=0&&(y=1-y),y=v+y*(p-v),M){default:case 6:case 0:M=p;var R=y;break;case 1:M=y,R=p;break;case 2:M=v,R=p,v=y;break;case 3:M=v,R=y,v=p;break;case 4:M=y,R=v,v=p;break;case 5:M=p,R=v,v=y}return[255*M,255*R,255*v]},i.cmyk.rgb=function(p){var y=p[3]/100;return[255*(1-Math.min(1,p[0]/100*(1-y)+y)),255*(1-Math.min(1,p[1]/100*(1-y)+y)),255*(1-Math.min(1,p[2]/100*(1-y)+y))]},i.xyz.rgb=function(p){var y=p[0]/100,v=p[1]/100,M=p[2]/100;p=3.2406*y+-1.5372*v+-.4986*M;var R=-.9689*y+1.8758*v+.0415*M;return y=.0557*y+-.204*v+1.057*M,p=.0031308<p?1.055*Math.pow(p,1/2.4)-.055:12.92*p,R=.0031308<R?1.055*Math.pow(R,1/2.4)-.055:12.92*R,y=.0031308<y?1.055*Math.pow(y,1/2.4)-.055:12.92*y,p=Math.min(Math.max(0,p),1),R=Math.min(Math.max(0,R),1),y=Math.min(Math.max(0,y),1),[255*p,255*R,255*y]},i.xyz.lab=function(p){var y=p[0],v=p[1];return p=p[2],y/=95.047,v/=100,p/=108.883,y=.008856<y?Math.pow(y,1/3):7.787*y+16/116,v=.008856<v?Math.pow(v,1/3):7.787*v+16/116,p=.008856<p?Math.pow(p,1/3):7.787*p+16/116,[116*v-16,500*(y-v),200*(v-p)]},i.lab.xyz=function(p){var y=p[1],v=p[2];p=(p[0]+16)/116,y=y/500+p,v=p-v/200;var M=Math.pow(p,3),R=Math.pow(y,3),k=Math.pow(v,3);return[95.047*(.008856<R?R:(y-16/116)/7.787),100*(.008856<M?M:(p-16/116)/7.787),108.883*(.008856<k?k:(v-16/116)/7.787)]},i.lab.lch=function(p){var y=p[0],v=p[1];p=p[2];var M=360*Math.atan2(p,v)/2/Math.PI;return 0>M&&(M+=360),[y,Math.sqrt(v*v+p*p),M]},i.lch.lab=function(p){var y=p[0],v=p[1];return p=p[2]/360*2*Math.PI,[y,v*Math.cos(p),v*Math.sin(p)]},i.rgb.ansi16=function(p){var y=p[0],v=p[1],M=p[2],R=1 in arguments?arguments[1]:i.rgb.hsv(p)[2];return R=Math.round(R/50),R===0?30:(y=30+(Math.round(M/255)<<2|Math.round(v/255)<<1|Math.round(y/255)),R===2&&(y+=60),y)},i.hsv.ansi16=function(p){return i.rgb.ansi16(i.hsv.rgb(p),p[2])},i.rgb.ansi256=function(p){var y=p[0],v=p[1];return p=p[2],y===v&&v===p?8>y?16:248<y?231:Math.round((y-8)/247*24)+232:16+36*Math.round(y/255*5)+6*Math.round(v/255*5)+Math.round(p/255*5)},i.ansi16.rgb=function(p){var y=p%10;return y===0||y===7?(50<p&&(y+=3.5),y=y/10.5*255,[y,y,y]):(p=.5*(~~(50<p)+1),[(y&1)*p*255,(y>>1&1)*p*255,(y>>2&1)*p*255])},i.ansi256.rgb=function(p){if(232<=p){var y=10*(p-232)+8;return[y,y,y]}p-=16,y=Math.floor(p/36)/5*255;var v=Math.floor((p%=36)/6)/5*255;return[y,v,p%6/5*255]},i.rgb.hex=function(p){return p=(((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255)).toString(16).toUpperCase(),"000000".substring(p.length)+p},i.hex.rgb=function(p){if(p=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i),!p)return[0,0,0];var y=p[0];return p[0].length===3&&(y=y.split("").map(function(v){return v+v}).join("")),p=parseInt(y,16),[p>>16&255,p>>8&255,p&255]},i.rgb.hcg=function(p){var y=p[0]/255,v=p[1]/255;p=p[2]/255;var M=Math.max(Math.max(y,v),p),R=Math.min(Math.min(y,v),p),k=M-R;return[(0>=k?0:M===y?(v-p)/k%6:M===v?2+(p-y)/k:(y-v)/k+8)/6%1*360,100*k,100*(1>k?R/(1-k):0)]},i.hsl.hcg=function(p){var y=p[1]/100,v=p[2]/100,M=0;return y=.5>v?2*y*v:2*y*(1-v),1>y&&(M=(v-.5*y)/(1-y)),[p[0],100*y,100*M]},i.hsv.hcg=function(p){var y=p[2]/100,v=p[1]/100*y,M=0;return 1>v&&(M=(y-v)/(1-v)),[p[0],100*v,100*M]},i.hcg.rgb=function(p){var y=p[1]/100,v=p[2]/100;if(y===0)return[255*v,255*v,255*v];var M=[0,0,0];p=p[0]/360%1*6;var R=p%1,k=1-R;switch(Math.floor(p)){case 0:M[0]=1,M[1]=R,M[2]=0;break;case 1:M[0]=k,M[1]=1,M[2]=0;break;case 2:M[0]=0,M[1]=1,M[2]=R;break;case 3:M[0]=0,M[1]=k,M[2]=1;break;case 4:M[0]=R,M[1]=0,M[2]=1;break;default:M[0]=1,M[1]=0,M[2]=k}return v*=1-y,[255*(y*M[0]+v),255*(y*M[1]+v),255*(y*M[2]+v)]},i.hcg.hsv=function(p){var y=p[1]/100,v=y+p[2]/100*(1-y),M=0;return 0<v&&(M=y/v),[p[0],100*M,100*v]},i.hcg.hsl=function(p){var y=p[1]/100,v=p[2]/100*(1-y)+.5*y,M=0;return 0<v&&.5>v?M=y/(2*v):.5<=v&&1>v&&(M=y/(2*(1-v))),[p[0],100*M,100*v]},i.hcg.hwb=function(p){var y=p[1]/100,v=y+p[2]/100*(1-y);return[p[0],100*(v-y),100*(1-v)]},i.hwb.hcg=function(p){var y=1-p[2]/100,v=y-p[1]/100,M=0;return 1>v&&(M=(y-v)/(1-v)),[p[0],100*v,100*M]},i.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},i.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},i.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},i.gray.hsl=i.gray.hsv=function(p){return[0,0,p[0]]},i.gray.hwb=function(p){return[0,100,p[0]]},i.gray.cmyk=function(p){return[0,0,0,p[0]]},i.gray.lab=function(p){return[p[0],0,0]},i.gray.hex=function(p){return p=Math.round(p[0]/100*255)&255,p=((p<<16)+(p<<8)+p).toString(16).toUpperCase(),"000000".substring(p.length)+p},i.rgb.gray=function(p){return[(p[0]+p[1]+p[2])/3/255*100]}}),zd=function(a){for(var A={},i=_o(Ru),u=i.length,m=0;m<u;m++)A[i[m]]={distance:-1,parent:null};for(i=[a],A[a].distance=0;i.length;){a=i.pop(),u=_o(Ru[a]),m=u.length;for(var p=0;p<m;p++){var y=u[p],v=A[y];v.distance===-1&&(v.distance=A[a].distance+1,v.parent=a,i.unshift(y))}}for(i={},a=_o(A),u=a.length,m=0;m<u;m++){var M=a[m];if(A[M].parent!==null){p=M,y=A,v=[y[M].parent,M];var R=Ru[y[M].parent][M];for(M=y[M].parent;y[M].parent;)v.unshift(y[M].parent),R=ue(Ru[y[M].parent][M],R),M=y[M].parent;R.conversion=v,i[p]=R}}return i},ru={};_o(Ru).forEach(function(a){ru[a]={},Object.defineProperty(ru[a],"channels",{value:Ru[a].channels}),Object.defineProperty(ru[a],"labels",{value:Ru[a].labels});var A=zd(a);_o(A).forEach(function(i){var u=A[i];ru[a][i]=ct(u),ru[a][i].raw=ve(u)})});var Ia=ru,yp=[].slice,sh=["keyword","gray","hex"],xp={};_o(Ia).forEach(function(a){xp[yp.call(Ia[a].labels).sort().join("")]=a});var as={};kt.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(a){var A=this.model in rc.to?this:this.rgb();return A=A.round(typeof a=="number"?a:1),a=A.valpha===1?A.color:A.color.concat(this.valpha),rc.to[A.model](a)},percentString:function(a){return a=this.rgb().round(typeof a=="number"?a:1),a=a.valpha===1?a.color:a.color.concat(this.valpha),rc.to.rgb.percent(a)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var a={},A=Ia[this.model].channels,i=Ia[this.model].labels,u=0;u<A;u++)a[i[u]]=this.color[u];return this.valpha!==1&&(a.alpha=this.valpha),a},unitArray:function(){var a=this.rgb().color;return a[0]/=255,a[1]/=255,a[2]/=255,this.valpha!==1&&a.push(this.valpha),a},unitObject:function(){var a=this.rgb().object();return a.r/=255,a.g/=255,a.b/=255,this.valpha!==1&&(a.alpha=this.valpha),a},round:function(a){return a=Math.max(a||0,0),new kt(this.color.map(bt(a)).concat(this.valpha),this.model)},alpha:function(a){return arguments.length?new kt(this.color.concat(Math.max(0,Math.min(1,a))),this.model):this.valpha},red:Ht("rgb",0,Zt(255)),green:Ht("rgb",1,Zt(255)),blue:Ht("rgb",2,Zt(255)),hue:Ht(["hsl","hsv","hsl","hwb","hcg"],0,function(a){return(a%360+360)%360}),saturationl:Ht("hsl",1,Zt(100)),lightness:Ht("hsl",2,Zt(100)),saturationv:Ht("hsv",1,Zt(100)),value:Ht("hsv",2,Zt(100)),chroma:Ht("hcg",1,Zt(100)),gray:Ht("hcg",2,Zt(100)),white:Ht("hwb",1,Zt(100)),wblack:Ht("hwb",2,Zt(100)),cyan:Ht("cmyk",0,Zt(100)),magenta:Ht("cmyk",1,Zt(100)),yellow:Ht("cmyk",2,Zt(100)),black:Ht("cmyk",3,Zt(100)),x:Ht("xyz",0,Zt(100)),y:Ht("xyz",1,Zt(100)),z:Ht("xyz",2,Zt(100)),l:Ht("lab",0,Zt(100)),a:Ht("lab",1),b:Ht("lab",2),keyword:function(a){return arguments.length?new kt(a):Ia[this.model].keyword(this.color)},hex:function(a){return arguments.length?new kt(a):rc.to.hex(this.rgb().round().color)},rgbNumber:function(){var a=this.rgb().color;return(a[0]&255)<<16|(a[1]&255)<<8|a[2]&255},luminosity:function(){for(var a=this.rgb().color,A=[],i=0;i<a.length;i++){var u=a[i]/255;A[i]=.03928>=u?u/12.92:Math.pow((u+.055)/1.055,2.4)}return .2126*A[0]+.7152*A[1]+.0722*A[2]},contrast:function(a){var A=this.luminosity();return a=a.luminosity(),A>a?(A+.05)/(a+.05):(a+.05)/(A+.05)},level:function(a){return a=this.contrast(a),7.1<=a?"AAA":4.5<=a?"AA":""},isDark:function(){var a=this.rgb().color;return 128>(299*a[0]+587*a[1]+114*a[2])/1e3},isLight:function(){return!this.isDark()},negate:function(){for(var a=this.rgb(),A=0;3>A;A++)a.color[A]=255-a.color[A];return a},lighten:function(a){var A=this.hsl();return A.color[2]+=A.color[2]*a,A},darken:function(a){var A=this.hsl();return A.color[2]-=A.color[2]*a,A},saturate:function(a){var A=this.hsl();return A.color[1]+=A.color[1]*a,A},desaturate:function(a){var A=this.hsl();return A.color[1]-=A.color[1]*a,A},whiten:function(a){var A=this.hwb();return A.color[1]+=A.color[1]*a,A},blacken:function(a){var A=this.hwb();return A.color[2]+=A.color[2]*a,A},grayscale:function(){var a=this.rgb().color;return a=.3*a[0]+.59*a[1]+.11*a[2],kt.rgb(a,a,a)},fade:function(a){return this.alpha(this.valpha-this.valpha*a)},opaquer:function(a){return this.alpha(this.valpha+this.valpha*a)},rotate:function(a){var A=this.hsl(),i=A.color[0];return i=(i+a)%360,A.color[0]=0>i?360+i:i,A},mix:function(a,A){if(!a||!a.rgb)throw Error('Argument to "mix" was not a Color instance, but rather an instance of '+(typeof a=="undefined"?"undefined":Mn(a)));a=a.rgb();var i=this.rgb();A=A===void 0?.5:A;var u=2*A-1,m=a.alpha()-i.alpha();return u=((u*m==-1?u:(u+m)/(1+u*m))+1)/2,m=1-u,kt.rgb(u*a.red()+m*i.red(),u*a.green()+m*i.green(),u*a.blue()+m*i.blue(),a.alpha()*A+i.alpha()*(1-A))}},_o(Ia).forEach(function(a){if(sh.indexOf(a)===-1){var A=Ia[a].channels;kt.prototype[a]=function(){if(this.model===a)return new kt(this);if(arguments.length)return new kt(arguments,a);var i=typeof arguments[A]=="number"?A:this.valpha,u=Ia[this.model][a].raw(this.color);return u=Array.isArray(u)?u:[u],new kt(u.concat(i),a)},kt[a]=function(i){return typeof i=="number"&&(i=he(yp.call(arguments),A)),new kt(i,a)}}}),hi(Bi.prototype,{equals:function(a){return this.lat===a.lat&&this.lng===a.lng},clone:function(){return new Bi(this.lat,this.lng)},getLngSpan:function(a){return a=Math.abs(a-this.lng),180<a&&(a=360-a),a},sub:function(a){return new Bi(this.lat-a.lat,this.lng-a.lng)},toString:function(){return"Point"}}),hi(Nn,{EARTHRADIUS:637099681e-2,MCBAND:[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,1704480524535203,-10338987376042340,26112667856603880,-35149669176653700,26595700718403920,-10725012454188240,1800819912950474,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],getDistanceByMC:function(a,A){if(!a||!A||(a=this.convertMC2LL(a),!a))return 0;var i=this.toRadians(a.lng);if(a=this.toRadians(a.lat),A=this.convertMC2LL(A),!A)return 0;var u=this.toRadians(A.lng);return A=this.toRadians(A.lat),this.getDistance(i,u,a,A)},getDistanceByLL:function(a,A){if(!a||!A)return 0;a.lng=this.getLoop(a.lng,-180,180),a.lat=this.getRange(a.lat,-74,74),A.lng=this.getLoop(A.lng,-180,180),A.lat=this.getRange(A.lat,-74,74);var i=this.toRadians(a.lng),u=this.toRadians(a.lat);return a=this.toRadians(A.lng),A=this.toRadians(A.lat),this.getDistance(i,a,u,A)},convertMC2LL:function(a){if(a==null)return new Bi(0,0);if(180>a.lng&&-180<a.lng&&90>a.lat&&-90<a.lat)return a;if(window.BMAPGL_84)return new Bi(180/Math.PI*(2*Math.atan(Math.exp(a.lat/2003750834e-2*180*Math.PI/180))-Math.PI/2),a.lng/2003750834e-2*180);for(var A=new Bi(Math.abs(a.lng),Math.abs(a.lat)),i=0;i<this.MCBAND.length;i++)if(A.lat>=this.MCBAND[i]){var u=this.MC2LL[i];break}return a=this.convertor(a,u),a=new Bi(a.lng.toFixed(6),a.lat.toFixed(6))},convertLL2MC:function(a){if(a==null)return new Bi(0,0);if(180<a.lng||-180>a.lng||90<a.lat||-90>a.lat)return a;if(window.BMAPGL_84){var A=a.lat*Math.PI/180;return new Bi(a.lng*Math.PI/180*6378137,31890685e-1*Math.log((1+Math.sin(A))/(1-Math.sin(A))))}a.lng=this.getLoop(a.lng,-180,180),a.lat=this.getRange(a.lat,-74,74),A=new Bi(a.lng,a.lat);for(var i=0;i<this.LLBAND.length;i++)if(A.lat>=this.LLBAND[i]){var u=this.LL2MC[i];break}if(!u){for(i=0;i<this.LLBAND.length;i++)if(A.lat<=-this.LLBAND[i]){u=this.LL2MC[i];break}}return a=this.convertor(a,u),a=new Bi(Number(a.lng.toFixed(2)),Number(a.lat.toFixed(2)))},convertor:function(a,A){if(a&&A){var i=A[0]+A[1]*Math.abs(a.lng),u=Math.abs(a.lat)/A[9];return A=A[2]+A[3]*u+A[4]*u*u+A[5]*u*u*u+A[6]*u*u*u*u+A[7]*u*u*u*u*u+A[8]*u*u*u*u*u*u,i*=0>a.lng?-1:1,A*=0>a.lat?-1:1,new Bi(i,A)}},getDistance:function(a,A,i,u){return this.EARTHRADIUS*Math.acos(Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos(A-a))},toRadians:function(a){return Math.PI*a/180},toDegrees:function(a){return 180*a/Math.PI},getRange:function(a,A,i){return A!=null&&(a=Math.max(a,A)),i!=null&&(a=Math.min(a,i)),a},getLoop:function(a,A,i){for(;a>i;)a-=i-A;for(;a<A;)a+=i-A;return a}}),hi(Nn.prototype,{lngLatToMercator:function(a){return Nn.convertLL2MC(a)},lngLatToPoint:function(a){return a=Nn.convertLL2MC(a),new mo(a.lng,a.lat)},mercatorToLngLat:function(a){return Nn.convertMC2LL(a)},pointToLngLat:function(a){return a=new Bi(a.x,a.y),Nn.convertMC2LL(a)},pointToPixel:function(a,A,i,u,m){if(a)return a=this.lngLatToMercator(a,m),A=this.getZoomUnits(A),new mo(Math.round((a.lng-i.lng)/A+u.width/2),Math.round((i.lat-a.lat)/A+u.height/2))},pixelToPoint:function(a,A,i,u,m){if(a)return A=this.getZoomUnits(A),a=new Bi(i.lng+A*(a.x-u.width/2),i.lat-A*(a.y-u.height/2)),this.mercatorToLngLat(a,m)},getZoomUnits:function(a){return Math.pow(2,18-a)}}),ci.prototype.setMax=function(a){this.max=a||100},ci.prototype.setMin=function(a){this.min=a||0},ci.prototype.setMaxSize=function(a){this.maxSize=a||35},ci.prototype.setMinSize=function(a){this.minSize=a||0},ci.prototype.initPalette=function(){var a=this.gradient,A=this.paletteCtx=new ns(256,1).getContext("2d"),i=A.createLinearGradient(0,0,256,1);_o(a).forEach(function(u){i.addColorStop(parseFloat(u),a[u])}),A.fillStyle=i,A.fillRect(0,0,256,1),A.imageData=A.getImageData(0,0,256,1).data},ci.prototype.getColor=function(a){return a=this.getImageData(a),"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]/256+")"},ci.prototype.getImageData=function(a){var A=this.paletteCtx.imageData;if(a===void 0)return A;var i=this.max,u=this.min;return a>i&&(a=i),a<u&&(a=u),a=4*Math.floor((a-u)/(i-u)*255),[A[a],A[a+1],A[a+2],A[a+3]]},ci.prototype.getSize=function(a){var A=this.max,i=this.min,u=this.maxSize,m=this.minSize;return a>A&&(a=A),a<i&&(a=i),m+(a-i)/(A-i)*(u-m)},Ui.prototype._initialize=function(){this.v0=this._normalizaCoord(this.options.start),this.v3=this._normalizaCoord(this.options.end),this.v1=this._getControlPoint(this.v0,this.v3,4),this.v2=this._getControlPoint(this.v3,this.v0,5),this.v0[2]||(this.v0[2]=0),this.v3[2]||(this.v3[2]=0)},Ui.prototype.setOptions=function(a){this.options=a||{},this._initialize()},Ui.prototype.getPoints=function(a){a===void 0&&(a=20);for(var A=[],i=0;i<=a;i++)A.push(this._getPoint(i/a));return A},Ui.prototype._normalizaCoord=function(a){return a?(a=Nn.convertLL2MC({lng:Number(a[0]),lat:Number(a[1])}),[a.lng,a.lat]):[]},Ui.prototype._getControlPoint=function(a,A){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1;return[].concat(Fn(this._getQuarter(a,A)),[this._getDistance(a,A)/i])},Ui.prototype._getQuarter=function(a,A){return[(3*a[0]+A[0])/4,(3*a[1]+A[1])/4]},Ui.prototype._getDistance=function(a,A){return Math.sqrt(Math.pow(a[0]-A[0],2)+Math.pow(a[1]-A[1],2))},Ui.prototype._getPoint=function(a){var A=[],i=this.v0,u=this.v1,m=this.v2,p=this.v3;return A.push(Je(a,i[0],u[0],m[0],p[0]),Je(a,i[1],u[1],m[1],p[1]),Je(a,i[2],u[2],m[2],p[2])),A},ks.prototype._initialize=function(){this.points=this.options.points||this.options.point||[],this.greatCirclePoints=[];for(var a=[],A=0;A<this.points.length;A++){var i=this._normalizaCoord(this.points[A]);i&&a.push(i)}this.points=a},ks.prototype.setOptions=function(a){this.options=a||{},this._initialize()},ks.prototype.getPoints=function(){if(this.greatCirclePoints.length===0)for(var a=0;a<this.points.length-1;a++)this._calcGreatCirclePoints(this.points[a],this.points[a+1]);return this.greatCirclePoints},ks.prototype._normalizaCoord=function(a){if(!a)return null;a instanceof Array&&(a={lng:Number(a[0]),lat:Number(a[1])});var A=Nn.convertLL2MC(a);return a=Nn.convertMC2LL(a),A.latLng=a,A},ks.prototype._calcGreatCirclePoints=function(a,A){var i=a.latLng,u=A.latLng;if(!An(i.lng,u.lng)||!An(i.lat,u.lat)){var m=Nn.getDistance(Ee(i.lng),Ee(i.lat),Ee(u.lng),Ee(u.lat));if(!(25e4>m)){m=Math.round(m/15e4);var p=this._calcAngularDistance(i,u);this.greatCirclePoints.push([a.lng,a.lat]);for(var y=0;y<m;y++){var v=this._calcMiddlePoint(i,u,y/m,p);v=Nn.convertLL2MC(v);var M=MA(v,a);30037726<M&&(v.lng=v.lng<a.lng?v.lng+this.WORLD_SIZE_MC:v.lng-this.WORLD_SIZE_MC),this.greatCirclePoints.push([v.lng,v.lat]),a=v}M=MA(A,a),30037726<M&&(A.lng=A.lng<a.lng?A.lng+this.WORLD_SIZE_MC:A.lng-this.WORLD_SIZE_MC),this.greatCirclePoints.push([A.lng,A.lat])}}},ks.prototype._calcAngularDistance=function(a,A){var i=Ee(a.lat),u=Ee(A.lat);return a=Ee(a.lng),A=Ee(A.lng),Math.acos(Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos(Math.abs(A-a)))},ks.prototype._calcMiddlePoint=function(a,A,i,u){var m=A.lat,p=a.lng;A=A.lng,a=Ee(a.lat),m=Ee(m),p=Ee(p);var y=Ee(A);return A=Math.sin((1-i)*u)/Math.sin(u),u=Math.sin(i*u)/Math.sin(u),i=A*Math.cos(a)*Math.cos(p)+u*Math.cos(m)*Math.cos(y),p=A*Math.cos(a)*Math.sin(p)+u*Math.cos(m)*Math.sin(y),a=Math.atan2(A*Math.sin(a)+u*Math.sin(m),Math.sqrt(Math.pow(i,2)+Math.pow(p,2))),new Bi(gt(Math.atan2(p,i)),gt(a))};var Qd=function(){function a(){var A=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};fr(this,a),this.options=A,this._initialize()}return mr(a,[{key:"_initialize",value:function(){this.points=this.options.points}},{key:"_normalizaCoord",value:function(A){return A?(A instanceof Array&&(A={lng:Number(A[0]),lat:Number(A[1])}),Nn.convertLL2MC(A)):null}},{key:"setOptions",value:function(){this.options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},this._initialize()}},{key:"getPoints",value:function(A){for(var i=[],u=this.points,m=0;m<u.length-1;m++){var p=this.getCurveByTwoPoints(this._normalizaCoord(u[m]),this._normalizaCoord(u[m+1]),A);p&&0<p.length&&(i=i.concat(p))}return i}},{key:"getCurveByTwoPoints",value:function(A,i){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:20;if(!A||!i)return null;var m=[],p=0;if((typeof i=="undefined"?"undefined":Mn(i))===void 0)typeof m=="undefined"||Mn(m);else{var y=parseFloat(A.lat),v=parseFloat(i.lat),M=parseFloat(A.lng),R=parseFloat(i.lng);R>M&&180<parseFloat(R-M)&&0>M&&(M=parseFloat(360+M),R=parseFloat(360+R));var k=0;if(v===y)var _=0,T=M-R;else R===M?(_=Math.PI/2,T=y-v):(_=Math.atan((v-y)/(R-M)),T=(v-y)/Math.sin(_));for(k===0&&(k=_+Math.PI/5),T/=2,_=T*Math.cos(k)+M,k=T*Math.sin(k)+y,T=0;T<u+1;T++){var O=M*(1-2*p+p*p)+_*(2*p-2*p*p)+R*p*p,U=i.lng;m.push([0>A.lng&&0<U?O-360:O,y*(1-2*p+p*p)+k*(2*p-2*p*p)+v*p*p]),p+=1/u}return m}}}]),a}(),wp=[{n:"\u5317\u4EAC",g:"116.395645,39.929986|12"},{n:"\u4E0A\u6D77",g:"121.487899,31.249162|12"},{n:"\u5929\u6D25",g:"117.210813,39.14393|12"},{n:"\u91CD\u5E86",g:"106.530635,29.544606|12"}],Pu=[{n:"\u5B89\u5FBD",g:"117.216005,31.859252|8",cities:[{n:"\u5408\u80A5",g:"117.282699,31.866942|12"},{n:"\u5B89\u5E86",g:"117.058739,30.537898|13"},{n:"\u868C\u57E0",g:"117.35708,32.929499|13"},{n:"\u4EB3\u5DDE",g:"115.787928,33.871211|13"},{n:"\u5DE2\u6E56",g:"117.88049,31.608733|13"},{n:"\u6C60\u5DDE",g:"117.494477,30.660019|14"},{n:"\u6EC1\u5DDE",g:"118.32457,32.317351|13"},{n:"\u961C\u9633",g:"115.820932,32.901211|13"},{n:"\u6DEE\u5317",g:"116.791447,33.960023|13"},{n:"\u6DEE\u5357",g:"117.018639,32.642812|13"},{n:"\u9EC4\u5C71",g:"118.29357,29.734435|13"},{n:"\u516D\u5B89",g:"116.505253,31.755558|13"},{n:"\u9A6C\u978D\u5C71",g:"118.515882,31.688528|13"},{n:"\u5BBF\u5DDE",g:"116.988692,33.636772|13"},{n:"\u94DC\u9675",g:"117.819429,30.94093|14"},{n:"\u829C\u6E56",g:"118.384108,31.36602|12"},{n:"\u5BA3\u57CE",g:"118.752096,30.951642|13"}]},{n:"\u798F\u5EFA",g:"117.984943,26.050118|8",cities:[{n:"\u798F\u5DDE",g:"119.330221,26.047125|12"},{n:"\u9F99\u5CA9",g:"117.017997,25.078685|13"},{n:"\u5357\u5E73",g:"118.181883,26.643626|13"},{n:"\u5B81\u5FB7",g:"119.542082,26.656527|14"},{n:"\u8386\u7530",g:"119.077731,25.44845|13"},{n:"\u6CC9\u5DDE",g:"118.600362,24.901652|12"},{n:"\u4E09\u660E",g:"117.642194,26.270835|14"},{n:"\u53A6\u95E8",g:"118.103886,24.489231|12"},{n:"\u6F33\u5DDE",g:"117.676205,24.517065|12"}]},{n:"\u7518\u8083",g:"102.457625,38.103267|6",cities:[{n:"\u5170\u5DDE",g:"103.823305,36.064226|12"},{n:"\u767D\u94F6",g:"104.171241,36.546682|13"},{n:"\u5B9A\u897F",g:"104.626638,35.586056|13"},{n:"\u7518\u5357\u5DDE",g:"102.917442,34.992211|14"},{n:"\u5609\u5CEA\u5173",g:"98.281635,39.802397|13"},{n:"\u91D1\u660C",g:"102.208126,38.516072|13"},{n:"\u9152\u6CC9",g:"98.508415,39.741474|13"},{n:"\u4E34\u590F\u5DDE",g:"103.215249,35.598514|13"},{n:"\u9647\u5357",g:"104.934573,33.39448|14"},{n:"\u5E73\u51C9",g:"106.688911,35.55011|13"},{n:"\u5E86\u9633",g:"107.644227,35.726801|13"},{n:"\u5929\u6C34",g:"105.736932,34.584319|13"},{n:"\u6B66\u5A01",g:"102.640147,37.933172|13"},{n:"\u5F20\u6396",g:"100.459892,38.93932|13"}]},{n:"\u5E7F\u4E1C",g:"113.394818,23.408004|8",cities:[{n:"\u5E7F\u5DDE",g:"113.30765,23.120049|12"},{n:"\u6F6E\u5DDE",g:"116.630076,23.661812|13"},{n:"\u4E1C\u839E",g:"113.763434,23.043024|12"},{n:"\u4F5B\u5C71",g:"113.134026,23.035095|13"},{n:"\u6CB3\u6E90",g:"114.713721,23.757251|12"},{n:"\u60E0\u5DDE",g:"114.410658,23.11354|12"},{n:"\u6C5F\u95E8",g:"113.078125,22.575117|13"},{n:"\u63ED\u9633",g:"116.379501,23.547999|13"},{n:"\u8302\u540D",g:"110.931245,21.668226|13"},{n:"\u6885\u5DDE",g:"116.126403,24.304571|13"},{n:"\u6E05\u8FDC",g:"113.040773,23.698469|13"},{n:"\u6C55\u5934",g:"116.72865,23.383908|13"},{n:"\u6C55\u5C3E",g:"115.372924,22.778731|14"},{n:"\u97F6\u5173",g:"113.594461,24.80296|13"},{n:"\u6DF1\u5733",g:"114.025974,22.546054|12"},{n:"\u9633\u6C5F",g:"111.97701,21.871517|14"},{n:"\u4E91\u6D6E",g:"112.050946,22.937976|13"},{n:"\u6E5B\u6C5F",g:"110.365067,21.257463|13"},{n:"\u8087\u5E86",g:"112.479653,23.078663|13"},{n:"\u4E2D\u5C71",g:"113.42206,22.545178|12"},{n:"\u73E0\u6D77",g:"113.562447,22.256915|13"}]},{n:"\u5E7F\u897F",g:"108.924274,23.552255|7",cities:[{n:"\u5357\u5B81",g:"108.297234,22.806493|12"},{n:"\u767E\u8272",g:"106.631821,23.901512|13"},{n:"\u5317\u6D77",g:"109.122628,21.472718|13"},{n:"\u5D07\u5DE6",g:"107.357322,22.415455|14"},{n:"\u9632\u57CE\u6E2F",g:"108.351791,21.617398|15"},{n:"\u6842\u6797",g:"110.26092,25.262901|12"},{n:"\u8D35\u6E2F",g:"109.613708,23.103373|13"},{n:"\u6CB3\u6C60",g:"108.069948,24.699521|14"},{n:"\u8D3A\u5DDE",g:"111.552594,24.411054|14"},{n:"\u6765\u5BBE",g:"109.231817,23.741166|14"},{n:"\u67F3\u5DDE",g:"109.422402,24.329053|12"},{n:"\u94A6\u5DDE",g:"108.638798,21.97335|13"},{n:"\u68A7\u5DDE",g:"111.305472,23.485395|13"},{n:"\u7389\u6797",g:"110.151676,22.643974|14"}]},{n:"\u8D35\u5DDE",g:"106.734996,26.902826|8",cities:[{n:"\u8D35\u9633",g:"106.709177,26.629907|12"},{n:"\u5B89\u987A",g:"105.92827,26.228595|13"},{n:"\u6BD5\u8282\u5730\u533A",g:"105.300492,27.302612|14"},{n:"\u516D\u76D8\u6C34",g:"104.852087,26.591866|13"},{n:"\u94DC\u4EC1\u5730\u533A",g:"109.196161,27.726271|14"},{n:"\u9075\u4E49",g:"106.93126,27.699961|13"},{n:"\u9ED4\u897F\u5357\u5DDE",g:"104.900558,25.095148|11"},{n:"\u9ED4\u4E1C\u5357\u5DDE",g:"107.985353,26.583992|11"},{n:"\u9ED4\u5357\u5DDE",g:"107.523205,26.264536|11"}]},{n:"\u6D77\u5357",g:"109.733755,19.180501|9",cities:[{n:"\u6D77\u53E3",g:"110.330802,20.022071|13"},{n:"\u767D\u6C99",g:"109.358586,19.216056|12"},{n:"\u4FDD\u4EAD",g:"109.656113,18.597592|12"},{n:"\u660C\u6C5F",g:"109.0113,19.222483|12"},{n:"\u510B\u5DDE",g:"109.413973,19.571153|13"},{n:"\u6F84\u8FC8",g:"109.996736,19.693135|13"},{n:"\u4E1C\u65B9",g:"108.85101,18.998161|13"},{n:"\u5B9A\u5B89",g:"110.32009,19.490991|13"},{n:"\u743C\u6D77",g:"110.414359,19.21483|13"},{n:"\u743C\u4E2D",g:"109.861849,19.039771|12"},{n:"\u4E50\u4E1C",g:"109.062698,18.658614|12"},{n:"\u4E34\u9AD8",g:"109.724101,19.805922|13"},{n:"\u9675\u6C34",g:"109.948661,18.575985|12"},{n:"\u4E09\u4E9A",g:"109.522771,18.257776|12"},{n:"\u5C6F\u660C",g:"110.063364,19.347749|13"},{n:"\u4E07\u5B81",g:"110.292505,18.839886|13"},{n:"\u6587\u660C",g:"110.780909,19.750947|13"},{n:"\u4E94\u6307\u5C71",g:"109.51775,18.831306|13"}]},{n:"\u6CB3\u5317",g:"115.661434,38.61384|7",cities:[{n:"\u77F3\u5BB6\u5E84",g:"114.522082,38.048958|12"},{n:"\u4FDD\u5B9A",g:"115.49481,38.886565|13"},{n:"\u6CA7\u5DDE",g:"116.863806,38.297615|13"},{n:"\u627F\u5FB7",g:"117.933822,40.992521|14"},{n:"\u90AF\u90F8",g:"114.482694,36.609308|13"},{n:"\u8861\u6C34",g:"115.686229,37.746929|13"},{n:"\u5ECA\u574A",g:"116.703602,39.518611|13"},{n:"\u79E6\u7687\u5C9B",g:"119.604368,39.945462|12"},{n:"\u5510\u5C71",g:"118.183451,39.650531|13"},{n:"\u90A2\u53F0",g:"114.520487,37.069531|13"},{n:"\u5F20\u5BB6\u53E3",g:"114.893782,40.811188|13"}]},{n:"\u6CB3\u5357",g:"113.486804,34.157184|7",cities:[{n:"\u90D1\u5DDE",g:"113.649644,34.75661|12"},{n:"\u5B89\u9633",g:"114.351807,36.110267|12"},{n:"\u9E64\u58C1",g:"114.29777,35.755426|13"},{n:"\u7126\u4F5C",g:"113.211836,35.234608|13"},{n:"\u5F00\u5C01",g:"114.351642,34.801854|13"},{n:"\u6D1B\u9633",g:"112.447525,34.657368|12"},{n:"\u6F2F\u6CB3",g:"114.046061,33.576279|13"},{n:"\u5357\u9633",g:"112.542842,33.01142|13"},{n:"\u5E73\u9876\u5C71",g:"113.300849,33.745301|13"},{n:"\u6FEE\u9633",g:"115.026627,35.753298|12"},{n:"\u4E09\u95E8\u5CE1",g:"111.181262,34.78332|13"},{n:"\u5546\u4E18",g:"115.641886,34.438589|13"},{n:"\u65B0\u4E61",g:"113.91269,35.307258|13"},{n:"\u4FE1\u9633",g:"114.085491,32.128582|13"},{n:"\u8BB8\u660C",g:"113.835312,34.02674|13"},{n:"\u5468\u53E3",g:"114.654102,33.623741|13"},{n:"\u9A7B\u9A6C\u5E97",g:"114.049154,32.983158|13"}]},{n:"\u9ED1\u9F99\u6C5F",g:"128.047414,47.356592|6",cities:[{n:"\u54C8\u5C14\u6EE8",g:"126.657717,45.773225|12"},{n:"\u5927\u5E86",g:"125.02184,46.596709|12"},{n:"\u5927\u5174\u5B89\u5CAD\u5730\u533A",g:"124.196104,51.991789|10"},{n:"\u9E64\u5C97",g:"130.292472,47.338666|13"},{n:"\u9ED1\u6CB3",g:"127.50083,50.25069|14"},{n:"\u9E21\u897F",g:"130.941767,45.32154|13"},{n:"\u4F73\u6728\u65AF",g:"130.284735,46.81378|12"},{n:"\u7261\u4E39\u6C5F",g:"129.608035,44.588521|13"},{n:"\u4E03\u53F0\u6CB3",g:"131.019048,45.775005|14"},{n:"\u9F50\u9F50\u54C8\u5C14",g:"123.987289,47.3477|13"},{n:"\u53CC\u9E2D\u5C71",g:"131.171402,46.655102|13"},{n:"\u7EE5\u5316",g:"126.989095,46.646064|13"},{n:"\u4F0A\u6625",g:"128.910766,47.734685|14"}]},{n:"\u6E56\u5317",g:"112.410562,31.209316|8",cities:[{n:"\u6B66\u6C49",g:"114.3162,30.581084|12"},{n:"\u9102\u5DDE",g:"114.895594,30.384439|14"},{n:"\u6069\u65BD",g:"109.517433,30.308978|14"},{n:"\u9EC4\u5188",g:"114.906618,30.446109|14"},{n:"\u9EC4\u77F3",g:"115.050683,30.216127|13"},{n:"\u8346\u95E8",g:"112.21733,31.042611|13"},{n:"\u8346\u5DDE",g:"112.241866,30.332591|12"},{n:"\u6F5C\u6C5F",g:"112.768768,30.343116|13"},{n:"\u795E\u519C\u67B6\u6797\u533A",g:"110.487231,31.595768|13"},{n:"\u5341\u5830",g:"110.801229,32.636994|13"},{n:"\u968F\u5DDE",g:"113.379358,31.717858|13"},{n:"\u5929\u95E8",g:"113.12623,30.649047|13"},{n:"\u4ED9\u6843",g:"113.387448,30.293966|13"},{n:"\u54B8\u5B81",g:"114.300061,29.880657|13"},{n:"\u8944\u9633",g:"112.176326,32.094934|12"},{n:"\u5B5D\u611F",g:"113.935734,30.927955|13"},{n:"\u5B9C\u660C",g:"111.310981,30.732758|13"}]},{n:"\u6E56\u5357",g:"111.720664,27.695864|7",cities:[{n:"\u957F\u6C99",g:"112.979353,28.213478|12"},{n:"\u5E38\u5FB7",g:"111.653718,29.012149|12"},{n:"\u90F4\u5DDE",g:"113.037704,25.782264|13"},{n:"\u8861\u9633",g:"112.583819,26.898164|13"},{n:"\u6000\u5316",g:"109.986959,27.557483|13"},{n:"\u5A04\u5E95",g:"111.996396,27.741073|13"},{n:"\u90B5\u9633",g:"111.461525,27.236811|13"},{n:"\u6E58\u6F6D",g:"112.935556,27.835095|13"},{n:"\u6E58\u897F\u5DDE",g:"109.745746,28.317951|14"},{n:"\u76CA\u9633",g:"112.366547,28.588088|13"},{n:"\u6C38\u5DDE",g:"111.614648,26.435972|13"},{n:"\u5CB3\u9633",g:"113.146196,29.378007|13"},{n:"\u5F20\u5BB6\u754C",g:"110.48162,29.124889|13"},{n:"\u682A\u6D32",g:"113.131695,27.827433|13"}]},{n:"\u6C5F\u82CF",g:"119.368489,33.013797|8",cities:[{n:"\u5357\u4EAC",g:"118.778074,32.057236|12"},{n:"\u5E38\u5DDE",g:"119.981861,31.771397|12"},{n:"\u6DEE\u5B89",g:"119.030186,33.606513|12"},{n:"\u8FDE\u4E91\u6E2F",g:"119.173872,34.601549|12"},{n:"\u5357\u901A",g:"120.873801,32.014665|12"},{n:"\u82CF\u5DDE",g:"120.619907,31.317987|12"},{n:"\u5BBF\u8FC1",g:"118.296893,33.95205|13"},{n:"\u6CF0\u5DDE",g:"119.919606,32.476053|13"},{n:"\u65E0\u9521",g:"120.305456,31.570037|12"},{n:"\u5F90\u5DDE",g:"117.188107,34.271553|12"},{n:"\u76D0\u57CE",g:"120.148872,33.379862|12"},{n:"\u626C\u5DDE",g:"119.427778,32.408505|13"},{n:"\u9547\u6C5F",g:"119.455835,32.204409|13"}]},{n:"\u6C5F\u897F",g:"115.676082,27.757258|7",cities:[{n:"\u5357\u660C",g:"115.893528,28.689578|12"},{n:"\u629A\u5DDE",g:"116.360919,27.954545|13"},{n:"\u8D63\u5DDE",g:"114.935909,25.845296|13"},{n:"\u5409\u5B89",g:"114.992039,27.113848|13"},{n:"\u666F\u5FB7\u9547",g:"117.186523,29.303563|12"},{n:"\u4E5D\u6C5F",g:"115.999848,29.71964|13"},{n:"\u840D\u4E61",g:"113.859917,27.639544|13"},{n:"\u4E0A\u9976",g:"117.955464,28.457623|13"},{n:"\u65B0\u4F59",g:"114.947117,27.822322|13"},{n:"\u5B9C\u6625",g:"114.400039,27.81113|13"},{n:"\u9E70\u6F6D",g:"117.03545,28.24131|13"}]},{n:"\u5409\u6797",g:"126.262876,43.678846|7",cities:[{n:"\u957F\u6625",g:"125.313642,43.898338|12"},{n:"\u767D\u57CE",g:"122.840777,45.621086|13"},{n:"\u767D\u5C71",g:"126.435798,41.945859|13"},{n:"\u5409\u6797",g:"126.564544,43.871988|12"},{n:"\u8FBD\u6E90",g:"125.133686,42.923303|13"},{n:"\u56DB\u5E73",g:"124.391382,43.175525|12"},{n:"\u677E\u539F",g:"124.832995,45.136049|13"},{n:"\u901A\u5316",g:"125.94265,41.736397|13"},{n:"\u5EF6\u8FB9",g:"129.485902,42.896414|13"}]},{n:"\u8FBD\u5B81",g:"122.753592,41.6216|8",cities:[{n:"\u6C88\u9633",g:"123.432791,41.808645|12"},{n:"\u978D\u5C71",g:"123.007763,41.118744|13"},{n:"\u672C\u6EAA",g:"123.778062,41.325838|12"},{n:"\u671D\u9633",g:"120.446163,41.571828|13"},{n:"\u5927\u8FDE",g:"121.593478,38.94871|12"},{n:"\u4E39\u4E1C",g:"124.338543,40.129023|12"},{n:"\u629A\u987A",g:"123.92982,41.877304|12"},{n:"\u961C\u65B0",g:"121.660822,42.01925|14"},{n:"\u846B\u82A6\u5C9B",g:"120.860758,40.74303|13"},{n:"\u9526\u5DDE",g:"121.147749,41.130879|13"},{n:"\u8FBD\u9633",g:"123.172451,41.273339|14"},{n:"\u76D8\u9526",g:"122.073228,41.141248|13"},{n:"\u94C1\u5CAD",g:"123.85485,42.299757|13"},{n:"\u8425\u53E3",g:"122.233391,40.668651|13"}]},{n:"\u5185\u8499\u53E4",g:"114.415868,43.468238|5",cities:[{n:"\u547C\u548C\u6D69\u7279",g:"111.660351,40.828319|12"},{n:"\u963F\u62C9\u5584\u76DF",g:"105.695683,38.843075|14"},{n:"\u5305\u5934",g:"109.846239,40.647119|12"},{n:"\u5DF4\u5F66\u6DD6\u5C14",g:"107.423807,40.76918|12"},{n:"\u8D64\u5CF0",g:"118.930761,42.297112|12"},{n:"\u9102\u5C14\u591A\u65AF",g:"109.993706,39.81649|12"},{n:"\u547C\u4F26\u8D1D\u5C14",g:"119.760822,49.201636|12"},{n:"\u901A\u8FBD",g:"122.260363,43.633756|12"},{n:"\u4E4C\u6D77",g:"106.831999,39.683177|13"},{n:"\u4E4C\u5170\u5BDF\u5E03",g:"113.112846,41.022363|12"},{n:"\u9521\u6797\u90ED\u52D2\u76DF",g:"116.02734,43.939705|11"},{n:"\u5174\u5B89\u76DF",g:"122.048167,46.083757|11"}]},{n:"\u5B81\u590F",g:"106.155481,37.321323|8",cities:[{n:"\u94F6\u5DDD",g:"106.206479,38.502621|12"},{n:"\u56FA\u539F",g:"106.285268,36.021523|13"},{n:"\u77F3\u5634\u5C71",g:"106.379337,39.020223|13"},{n:"\u5434\u5FE0",g:"106.208254,37.993561|14"},{n:"\u4E2D\u536B",g:"105.196754,37.521124|14"}]},{n:"\u9752\u6D77",g:"96.202544,35.499761|7",cities:[{n:"\u897F\u5B81",g:"101.767921,36.640739|12"},{n:"\u679C\u6D1B\u5DDE",g:"100.223723,34.480485|11"},{n:"\u6D77\u4E1C\u5730\u533A",g:"102.085207,36.51761|11"},{n:"\u6D77\u5317\u5DDE",g:"100.879802,36.960654|11"},{n:"\u6D77\u5357\u5DDE",g:"100.624066,36.284364|11"},{n:"\u6D77\u897F\u5DDE",g:"97.342625,37.373799|11"},{n:"\u9EC4\u5357\u5DDE",g:"102.0076,35.522852|11"},{n:"\u7389\u6811\u5DDE",g:"97.013316,33.00624|14"}]},{n:"\u5C71\u4E1C",g:"118.527663,36.09929|8",cities:[{n:"\u6D4E\u5357",g:"117.024967,36.682785|12"},{n:"\u6EE8\u5DDE",g:"117.968292,37.405314|12"},{n:"\u4E1C\u8425",g:"118.583926,37.487121|12"},{n:"\u5FB7\u5DDE",g:"116.328161,37.460826|12"},{n:"\u83CF\u6CFD",g:"115.46336,35.26244|13"},{n:"\u6D4E\u5B81",g:"116.600798,35.402122|13"},{n:"\u83B1\u829C",g:"117.684667,36.233654|13"},{n:"\u804A\u57CE",g:"115.986869,36.455829|12"},{n:"\u4E34\u6C82",g:"118.340768,35.072409|12"},{n:"\u9752\u5C9B",g:"120.384428,36.105215|12"},{n:"\u65E5\u7167",g:"119.50718,35.420225|12"},{n:"\u6CF0\u5B89",g:"117.089415,36.188078|13"},{n:"\u5A01\u6D77",g:"122.093958,37.528787|13"},{n:"\u6F4D\u574A",g:"119.142634,36.716115|12"},{n:"\u70DF\u53F0",g:"121.309555,37.536562|12"},{n:"\u67A3\u5E84",g:"117.279305,34.807883|13"},{n:"\u6DC4\u535A",g:"118.059134,36.804685|12"}]},{n:"\u5C71\u897F",g:"112.515496,37.866566|7",cities:[{n:"\u592A\u539F",g:"112.550864,37.890277|12"},{n:"\u957F\u6CBB",g:"113.120292,36.201664|12"},{n:"\u5927\u540C",g:"113.290509,40.113744|12"},{n:"\u664B\u57CE",g:"112.867333,35.499834|13"},{n:"\u664B\u4E2D",g:"112.738514,37.693362|13"},{n:"\u4E34\u6C7E",g:"111.538788,36.099745|13"},{n:"\u5415\u6881",g:"111.143157,37.527316|14"},{n:"\u6714\u5DDE",g:"112.479928,39.337672|13"},{n:"\u5FFB\u5DDE",g:"112.727939,38.461031|12"},{n:"\u9633\u6CC9",g:"113.569238,37.869529|13"},{n:"\u8FD0\u57CE",g:"111.006854,35.038859|13"}]},{n:"\u9655\u897F",g:"109.503789,35.860026|7",cities:[{n:"\u897F\u5B89",g:"108.953098,34.2778|12"},{n:"\u5B89\u5EB7",g:"109.038045,32.70437|13"},{n:"\u5B9D\u9E21",g:"107.170645,34.364081|12"},{n:"\u6C49\u4E2D",g:"107.045478,33.081569|13"},{n:"\u5546\u6D1B",g:"109.934208,33.873907|13"},{n:"\u94DC\u5DDD",g:"108.968067,34.908368|13"},{n:"\u6E2D\u5357",g:"109.483933,34.502358|13"},{n:"\u54B8\u9633",g:"108.707509,34.345373|13"},{n:"\u5EF6\u5B89",g:"109.50051,36.60332|13"},{n:"\u6986\u6797",g:"109.745926,38.279439|12"}]},{n:"\u56DB\u5DDD",g:"102.89916,30.367481|7",cities:[{n:"\u6210\u90FD",g:"104.067923,30.679943|12"},{n:"\u963F\u575D\u5DDE",g:"102.228565,31.905763|15"},{n:"\u5DF4\u4E2D",g:"106.757916,31.869189|14"},{n:"\u8FBE\u5DDE",g:"107.494973,31.214199|14"},{n:"\u5FB7\u9633",g:"104.402398,31.13114|13"},{n:"\u7518\u5B5C\u5DDE",g:"101.969232,30.055144|15"},{n:"\u5E7F\u5B89",g:"106.63572,30.463984|13"},{n:"\u5E7F\u5143",g:"105.819687,32.44104|13"},{n:"\u4E50\u5C71",g:"103.760824,29.600958|13"},{n:"\u51C9\u5C71\u5DDE",g:"102.259591,27.892393|14"},{n:"\u6CF8\u5DDE",g:"105.44397,28.89593|14"},{n:"\u5357\u5145",g:"106.105554,30.800965|13"},{n:"\u7709\u5C71",g:"103.84143,30.061115|13"},{n:"\u7EF5\u9633",g:"104.705519,31.504701|12"},{n:"\u5185\u6C5F",g:"105.073056,29.599462|13"},{n:"\u6500\u679D\u82B1",g:"101.722423,26.587571|14"},{n:"\u9042\u5B81",g:"105.564888,30.557491|12"},{n:"\u96C5\u5B89",g:"103.009356,29.999716|13"},{n:"\u5B9C\u5BBE",g:"104.633019,28.769675|13"},{n:"\u8D44\u9633",g:"104.63593,30.132191|13"},{n:"\u81EA\u8D21",g:"104.776071,29.359157|13"}]},{n:"\u897F\u85CF",g:"89.137982,31.367315|6",cities:[{n:"\u62C9\u8428",g:"91.111891,29.662557|13"},{n:"\u963F\u91CC\u5730\u533A",g:"81.107669,30.404557|11"},{n:"\u660C\u90FD\u5730\u533A",g:"97.185582,31.140576|15"},{n:"\u6797\u829D\u5730\u533A",g:"94.349985,29.666941|11"},{n:"\u90A3\u66F2\u5730\u533A",g:"92.067018,31.48068|14"},{n:"\u65E5\u5580\u5219\u5730\u533A",g:"88.891486,29.269023|14"},{n:"\u5C71\u5357\u5730\u533A",g:"91.750644,29.229027|11"}]},{n:"\u65B0\u7586",g:"85.614899,42.127001|6",cities:[{n:"\u4E4C\u9C81\u6728\u9F50",g:"87.564988,43.84038|12"},{n:"\u963F\u62C9\u5C14",g:"81.291737,40.61568|13"},{n:"\u963F\u514B\u82CF\u5730\u533A",g:"80.269846,41.171731|12"},{n:"\u963F\u52D2\u6CF0\u5730\u533A",g:"88.137915,47.839744|13"},{n:"\u5DF4\u97F3\u90ED\u695E",g:"86.121688,41.771362|12"},{n:"\u535A\u5C14\u5854\u62C9\u5DDE",g:"82.052436,44.913651|11"},{n:"\u660C\u5409\u5DDE",g:"87.296038,44.007058|13"},{n:"\u54C8\u5BC6\u5730\u533A",g:"93.528355,42.858596|13"},{n:"\u548C\u7530\u5730\u533A",g:"79.930239,37.116774|13"},{n:"\u5580\u4EC0\u5730\u533A",g:"75.992973,39.470627|12"},{n:"\u514B\u62C9\u739B\u4F9D",g:"84.88118,45.594331|13"},{n:"\u514B\u5B5C\u52D2\u82CF\u5DDE",g:"76.137564,39.750346|11"},{n:"\u77F3\u6CB3\u5B50",g:"86.041865,44.308259|13"},{n:"\u5854\u57CE\u5730\u533A",g:"82.974881,46.758684|12"},{n:"\u56FE\u6728\u8212\u514B",g:"79.198155,39.889223|13"},{n:"\u5410\u9C81\u756A\u5730\u533A",g:"89.181595,42.96047|13"},{n:"\u4E94\u5BB6\u6E20",g:"87.565449,44.368899|13"},{n:"\u4F0A\u7281\u5DDE",g:"81.297854,43.922248|11"}]},{n:"\u4E91\u5357",g:"101.592952,24.864213|7",cities:[{n:"\u6606\u660E",g:"102.714601,25.049153|12"},{n:"\u4FDD\u5C71",g:"99.177996,25.120489|13"},{n:"\u695A\u96C4\u5DDE",g:"101.529382,25.066356|13"},{n:"\u5927\u7406\u5DDE",g:"100.223675,25.5969|14"},{n:"\u5FB7\u5B8F\u5DDE",g:"98.589434,24.44124|14"},{n:"\u8FEA\u5E86\u5DDE",g:"99.713682,27.831029|14"},{n:"\u7EA2\u6CB3\u5DDE",g:"103.384065,23.367718|11"},{n:"\u4E3D\u6C5F",g:"100.229628,26.875351|13"},{n:"\u4E34\u6CA7",g:"100.092613,23.887806|14"},{n:"\u6012\u6C5F\u5DDE",g:"98.859932,25.860677|14"},{n:"\u666E\u6D31",g:"100.980058,22.788778|14"},{n:"\u66F2\u9756",g:"103.782539,25.520758|12"},{n:"\u662D\u901A",g:"103.725021,27.340633|13"},{n:"\u6587\u5C71",g:"104.089112,23.401781|14"},{n:"\u897F\u53CC\u7248\u7EB3",g:"100.803038,22.009433|13"},{n:"\u7389\u6EAA",g:"102.545068,24.370447|13"}]},{n:"\u6D59\u6C5F",g:"119.957202,29.159494|8",cities:[{n:"\u676D\u5DDE",g:"120.219375,30.259244|12"},{n:"\u6E56\u5DDE",g:"120.137243,30.877925|12"},{n:"\u5609\u5174",g:"120.760428,30.773992|13"},{n:"\u91D1\u534E",g:"119.652576,29.102899|12"},{n:"\u4E3D\u6C34",g:"119.929576,28.4563|13"},{n:"\u5B81\u6CE2",g:"121.579006,29.885259|12"},{n:"\u8862\u5DDE",g:"118.875842,28.95691|12"},{n:"\u7ECD\u5174",g:"120.592467,30.002365|13"},{n:"\u53F0\u5DDE",g:"121.440613,28.668283|13"},{n:"\u6E29\u5DDE",g:"120.690635,28.002838|12"},{n:"\u821F\u5C71",g:"122.169872,30.03601|13"}]}],Cp=[{n:"\u9999\u6E2F",g:"114.186124,22.293586|11"},{n:"\u6FB3\u95E8",g:"113.557519,22.204118|13"},{n:"\u53F0\u6E7E",g:"120.961454,23.80406|8"}],nc=void 0,bd=function(){if(nc!==void 0)return nc;var a=navigator.userAgent,A="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";");nc=!1;for(var i=0;i<A.length;i++)if(0<a.indexOf(A[i])){nc=!0;break}return nc}(),ah=void 0,kd=function(){if(ah!==void 0)return ah;var a=navigator.userAgent,A=["iPhone","iPad","iPod"];ah=!1;for(var i=0;i<A.length;i++)if(0<a.indexOf(A[i])){ah=!0;break}return ah}(),Mp=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),lo=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ef=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Gd=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ta=Array(576);_A(Ta);var Uu=Array(60);_A(Uu);var UA=Array(512);_A(UA);var pl=Array(256);_A(pl);var rf=Array(29);_A(rf);var dl=Array(30);_A(dl);var nf=void 0,Do=void 0,gl=void 0,ml=function(a,A){a.pending_buf[a.pending++]=A&255,a.pending_buf[a.pending++]=A>>>8&255},vs=function(a,A,i){a.bi_valid>16-i?(a.bi_buf|=A<<a.bi_valid&65535,ml(a,a.bi_buf),a.bi_buf=A>>16-a.bi_valid,a.bi_valid+=i-16):(a.bi_buf|=A<<a.bi_valid&65535,a.bi_valid+=i)},nr=function(a,A,i){vs(a,i[2*A],i[2*A+1])},_p=function(a,A){var i=0;do i|=a&1,a>>>=1,i<<=1;while(0<--A);return i>>>1},Vd=function(a,A,i){var u=Array(16),m=0,p;for(p=1;15>=p;p++)u[p]=m=m+i[p-1]<<1;for(i=0;i<=A;i++)m=a[2*i+1],m!==0&&(a[2*i]=_p(u[m]++,m))},DA=function(a){var A;for(A=0;286>A;A++)a.dyn_ltree[2*A]=0;for(A=0;30>A;A++)a.dyn_dtree[2*A]=0;for(A=0;19>A;A++)a.bl_tree[2*A]=0;a.dyn_ltree[512]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Xa=function(a){8<a.bi_valid?ml(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Aa=function(a,A,i,u){var m=2*A,p=2*i;return a[m]<a[p]||a[m]===a[p]&&u[A]<=u[i]},of=function(a,A,i){for(var u=a.heap[i],m=i<<1;m<=a.heap_len&&(m<a.heap_len&&Aa(A,a.heap[m+1],a.heap[m],a.depth)&&m++,!Aa(A,u,a.heap[m],a.depth));)a.heap[i]=a.heap[m],i=m,m<<=1;a.heap[i]=u},OA=function(a,A,i){var u=0;if(a.last_lit!==0)do{var m=a.pending_buf[a.d_buf+2*u]<<8|a.pending_buf[a.d_buf+2*u+1],p=a.pending_buf[a.l_buf+u];if(u++,m===0)nr(a,p,A);else{var y=pl[p];nr(a,y+256+1,A);var v=Mp[y];v!==0&&(p-=rf[y],vs(a,p,v)),m--,y=256>m?UA[m]:UA[256+(m>>>7)],nr(a,y,i),v=lo[y],v!==0&&(m-=dl[y],vs(a,m,v))}}while(u<a.last_lit);nr(a,256,A)},ic=function(a,A){var i=A.dyn_tree,u=A.stat_desc.static_tree,m=A.stat_desc.has_stree,p=A.stat_desc.elems,y,v=-1;for(a.heap_len=0,a.heap_max=573,y=0;y<p;y++)i[2*y]!==0?(a.heap[++a.heap_len]=v=y,a.depth[y]=0):i[2*y+1]=0;for(;2>a.heap_len;){var M=a.heap[++a.heap_len]=2>v?++v:0;i[2*M]=1,a.depth[M]=0,a.opt_len--,m&&(a.static_len-=u[2*M+1])}for(A.max_code=v,y=a.heap_len>>1;1<=y;y--)of(a,i,y);M=p;do y=a.heap[1],a.heap[1]=a.heap[a.heap_len--],of(a,i,1),u=a.heap[1],a.heap[--a.heap_max]=y,a.heap[--a.heap_max]=u,i[2*M]=i[2*y]+i[2*u],a.depth[M]=(a.depth[y]>=a.depth[u]?a.depth[y]:a.depth[u])+1,i[2*y+1]=i[2*u+1]=M,a.heap[1]=M++,of(a,i,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1],y=A.dyn_tree,M=A.max_code,u=A.stat_desc.static_tree,m=A.stat_desc.has_stree,p=A.stat_desc.extra_bits;var R=A.stat_desc.extra_base,k=A.stat_desc.max_length,_,T=0;for(_=0;15>=_;_++)a.bl_count[_]=0;for(y[2*a.heap[a.heap_max]+1]=0,A=a.heap_max+1;573>A;A++){var O=a.heap[A];if(_=y[2*y[2*O+1]+1]+1,_>k&&(_=k,T++),y[2*O+1]=_,!(O>M)){a.bl_count[_]++;var U=0;O>=R&&(U=p[O-R]);var G=y[2*O];a.opt_len+=G*(_+U),m&&(a.static_len+=G*(u[2*O+1]+U))}}if(T!==0){do{for(_=k-1;a.bl_count[_]===0;)_--;a.bl_count[_]--,a.bl_count[_+1]+=2,a.bl_count[k]--,T-=2}while(0<T);for(_=k;_!==0;_--)for(O=a.bl_count[_];O!==0;)u=a.heap[--A],u>M||(y[2*u+1]!==_&&(a.opt_len+=(_-y[2*u+1])*y[2*u],y[2*u+1]=_),O--)}Vd(i,v,a.bl_count)},om=function(a,A,i){var u,m=-1,p=A[1],y=0,v=7,M=4;for(p===0&&(v=138,M=3),A[2*(i+1)+1]=65535,u=0;u<=i;u++){var R=p;p=A[2*(u+1)+1],++y<v&&R===p||(y<M?a.bl_tree[2*R]+=y:R!==0?(R!==m&&a.bl_tree[2*R]++,a.bl_tree[32]++):10>=y?a.bl_tree[34]++:a.bl_tree[36]++,y=0,m=R,p===0?(v=138,M=3):R===p?(v=6,M=3):(v=7,M=4))}},sm=function(a,A,i){var u,m=-1,p=A[1],y=0,v=7,M=4;for(p===0&&(v=138,M=3),u=0;u<=i;u++){var R=p;if(p=A[2*(u+1)+1],!(++y<v&&R===p)){if(y<M)do nr(a,R,a.bl_tree);while(--y!=0);else R!==0?(R!==m&&(nr(a,R,a.bl_tree),y--),nr(a,16,a.bl_tree),vs(a,y-3,2)):10>=y?(nr(a,17,a.bl_tree),vs(a,y-3,3)):(nr(a,18,a.bl_tree),vs(a,y-11,7));y=0,m=R,p===0?(v=138,M=3):R===p?(v=6,M=3):(v=7,M=4)}}},ys=function(a){var A=4093624447,i;for(i=0;31>=i;i++,A>>>=1)if(A&1&&a.dyn_ltree[2*i]!==0)return 0;if(a.dyn_ltree[18]!==0||a.dyn_ltree[20]!==0||a.dyn_ltree[26]!==0)return 1;for(i=32;256>i;i++)if(a.dyn_ltree[2*i]!==0)return 1;return 0},vl=!1,ho=function(a,A,i,u){vs(a,u?1:0,3),Xa(a),ml(a,i),ml(a,~i),a.pending_buf.set(a.window.subarray(A,A+i),a.pending),a.pending+=i},co=function(a,A,i,u){var m=a&65535|0;a=a>>>16&65535|0;for(var p;i!==0;){p=2e3<i?2e3:i,i-=p;do m=m+A[u++]|0,a=a+m|0;while(--p);m%=65521,a%=65521}return m|a<<16|0},Wd=new Uint32Array(function(){for(var a,A=[],i=0;256>i;i++){a=i;for(var u=0;8>u;u++)a=a&1?3988292384^a>>>1:a>>>1;A[i]=a}return A}()),As=function(a,A,i,u){for(i=u+i,a^=-1;u<i;u++)a=a>>>8^Wd[(a^A[u])&255];return a^-1},To={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Tn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},_n=function(a,A,i){return a.pending_buf[a.d_buf+2*a.last_lit]=A>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=A&255,a.pending_buf[a.l_buf+a.last_lit]=i&255,a.last_lit++,A===0?a.dyn_ltree[2*i]++:(a.matches++,A--,a.dyn_ltree[2*(pl[i]+256+1)]++,a.dyn_dtree[2*(256>A?UA[A]:UA[256+(A>>>7)])]++),a.last_lit===a.lit_bufsize-1},Jn=Tn.Z_NO_FLUSH,Ah=Tn.Z_PARTIAL_FLUSH,xs=Tn.Z_FULL_FLUSH,ro=Tn.Z_FINISH,Us=Tn.Z_BLOCK,Ds=Tn.Z_OK,Sa=Tn.Z_STREAM_END,Os=Tn.Z_STREAM_ERROR,Bp=Tn.Z_DATA_ERROR,Ep=Tn.Z_BUF_ERROR,sf=Tn.Z_DEFAULT_COMPRESSION,am=Tn.Z_FILTERED,qs=Tn.Z_HUFFMAN_ONLY,HA=Tn.Z_RLE,nu=Tn.Z_FIXED,jd=Tn.Z_DEFAULT_STRATEGY,zi=Tn.Z_UNKNOWN,Jo=Tn.Z_DEFLATED,pr=function(a,A){return a.msg=To[A],A},yl=function(a){for(var A=a.length;0<=--A;)a[A]=0},ua=function(a,A,i){return(A<<a.hash_shift^i)&a.hash_mask},lA=function(a){var A=a.state,i=A.pending;i>a.avail_out&&(i=a.avail_out),i!==0&&(a.output.set(A.pending_buf.subarray(A.pending_out,A.pending_out+i),a.next_out),a.next_out+=i,A.pending_out+=i,a.total_out+=i,a.avail_out-=i,A.pending-=i,A.pending===0&&(A.pending_out=0))},oo=function(a,A){var i=0<=a.block_start?a.block_start:-1,u=a.strstart-a.block_start,m=0;if(0<a.level){for(a.strm.data_type===2&&(a.strm.data_type=ys(a)),ic(a,a.l_desc),ic(a,a.d_desc),om(a,a.dyn_ltree,a.l_desc.max_code),om(a,a.dyn_dtree,a.d_desc.max_code),ic(a,a.bl_desc),m=18;3<=m&&a.bl_tree[2*Gd[m]+1]===0;m--);a.opt_len+=3*(m+1)+14;var p=a.opt_len+3+7>>>3,y=a.static_len+3+7>>>3;y<=p&&(p=y)}else p=y=u+5;if(u+4<=p&&i!==-1)ho(a,i,u,A);else if(a.strategy===4||y===p)vs(a,2+(A?1:0),3),OA(a,Ta,Uu);else{for(vs(a,4+(A?1:0),3),i=a.l_desc.max_code+1,u=a.d_desc.max_code+1,m+=1,vs(a,i-257,5),vs(a,u-1,5),vs(a,m-4,4),p=0;p<m;p++)vs(a,a.bl_tree[2*Gd[p]+1],3);sm(a,a.dyn_ltree,i-1),sm(a,a.dyn_dtree,u-1),OA(a,a.dyn_ltree,a.dyn_dtree)}DA(a),A&&Xa(a),a.block_start=a.strstart,lA(a.strm)},kn=function(a,A){a.pending_buf[a.pending++]=A},oc=function(a,A){a.pending_buf[a.pending++]=A>>>8&255,a.pending_buf[a.pending++]=A&255},Xd=function(a,A){var i=a.max_chain_length,u=a.strstart,m=a.prev_length,p=a.nice_match,y=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,v=a.window,M=a.w_mask,R=a.prev,k=a.strstart+258,_=v[u+m-1],T=v[u+m];a.prev_length>=a.good_match&&(i>>=2),p>a.lookahead&&(p=a.lookahead);do{var O=A;if(v[O+m]===T&&v[O+m-1]===_&&v[O]===v[u]&&v[++O]===v[u+1]){for(u+=2,O++;v[++u]===v[++O]&&v[++u]===v[++O]&&v[++u]===v[++O]&&v[++u]===v[++O]&&v[++u]===v[++O]&&v[++u]===v[++O]&&v[++u]===v[++O]&&v[++u]===v[++O]&&u<k;);if(O=258-(k-u),u=k-258,O>m){if(a.match_start=A,m=O,O>=p)break;_=v[u+m-1],T=v[u+m]}}}while((A=R[A&M])>y&&--i!=0);return m<=a.lookahead?m:a.lookahead},iu=function(a){var A=a.w_size,i;do{var u=a.window_size-a.lookahead-a.strstart;if(a.strstart>=A+(A-262)){a.window.set(a.window.subarray(A,A+A),0),a.match_start-=A,a.strstart-=A,a.block_start-=A;var m=i=a.hash_size;do{var p=a.head[--m];a.head[m]=p>=A?p-A:0}while(--i);m=i=A;do p=a.prev[--m],a.prev[m]=p>=A?p-A:0;while(--i);u+=A}if(a.strm.avail_in===0)break;m=a.strm,i=a.window,p=a.strstart+a.lookahead;var y=m.avail_in;if(y>u&&(y=u),y===0?i=0:(m.avail_in-=y,i.set(m.input.subarray(m.next_in,m.next_in+y),p),m.state.wrap===1?m.adler=co(m.adler,i,y,p):m.state.wrap===2&&(m.adler=As(m.adler,i,y,p)),m.next_in+=y,m.total_in+=y,i=y),a.lookahead+=i,3<=a.lookahead+a.insert)for(u=a.strstart-a.insert,a.ins_h=a.window[u],a.ins_h=ua(a,a.ins_h,a.window[u+1]);a.insert&&(a.ins_h=ua(a,a.ins_h,a.window[u+3-1]),a.prev[u&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=u,u++,a.insert--,!(3>a.lookahead+a.insert)););}while(262>a.lookahead&&a.strm.avail_in!==0)},af=function(a,A){for(var i;;){if(262>a.lookahead){if(iu(a),262>a.lookahead&&A===Jn)return 1;if(a.lookahead===0)break}if(i=0,3<=a.lookahead&&(a.ins_h=ua(a,a.ins_h,a.window[a.strstart+3-1]),i=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),i!==0&&a.strstart-i<=a.w_size-262&&(a.match_length=Xd(a,i)),3<=a.match_length)if(i=_n(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=ua(a,a.ins_h,a.window[a.strstart+3-1]),a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!=0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=ua(a,a.ins_h,a.window[a.strstart+1]);else i=_n(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(i&&(oo(a,!1),a.strm.avail_out===0))return 1}return a.insert=2>a.strstart?a.strstart:2,A===ro?(oo(a,!0),a.strm.avail_out===0?3:4):a.last_lit&&(oo(a,!1),a.strm.avail_out===0)?1:2},Du=function(a,A){for(var i,u;;){if(262>a.lookahead){if(iu(a),262>a.lookahead&&A===Jn)return 1;if(a.lookahead===0)break}if(i=0,3<=a.lookahead&&(a.ins_h=ua(a,a.ins_h,a.window[a.strstart+3-1]),i=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=2,i!==0&&a.prev_length<a.max_lazy_match&&a.strstart-i<=a.w_size-262&&(a.match_length=Xd(a,i),5>=a.match_length&&(a.strategy===am||a.match_length===3&&4096<a.strstart-a.match_start)&&(a.match_length=2)),3<=a.prev_length&&a.match_length<=a.prev_length){u=a.strstart+a.lookahead-3,i=_n(a,a.strstart-1-a.prev_match,a.prev_length-3),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=u&&(a.ins_h=ua(a,a.ins_h,a.window[a.strstart+3-1]),a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!=0);if(a.match_available=0,a.match_length=2,a.strstart++,i&&(oo(a,!1),a.strm.avail_out===0))return 1}else if(a.match_available){if((i=_n(a,0,a.window[a.strstart-1]))&&oo(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return 1}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(_n(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=2>a.strstart?a.strstart:2,A===ro?(oo(a,!0),a.strm.avail_out===0?3:4):a.last_lit&&(oo(a,!1),a.strm.avail_out===0)?1:2},Xv=function(a,A){for(var i,u,m,p=a.window;;){if(258>=a.lookahead){if(iu(a),258>=a.lookahead&&A===Jn)return 1;if(a.lookahead===0)break}if(a.match_length=0,3<=a.lookahead&&0<a.strstart&&(u=a.strstart-1,i=p[u],i===p[++u]&&i===p[++u]&&i===p[++u])){for(m=a.strstart+258;i===p[++u]&&i===p[++u]&&i===p[++u]&&i===p[++u]&&i===p[++u]&&i===p[++u]&&i===p[++u]&&i===p[++u]&&u<m;);a.match_length=258-(m-u),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(3<=a.match_length?(i=_n(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(i=_n(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),i&&(oo(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,A===ro?(oo(a,!0),a.strm.avail_out===0?3:4):a.last_lit&&(oo(a,!1),a.strm.avail_out===0)?1:2},Kv=function(a,A){for(var i;;){if(a.lookahead===0&&(iu(a),a.lookahead===0)){if(A===Jn)return 1;break}if(a.match_length=0,i=_n(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,i&&(oo(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,A===ro?(oo(a,!0),a.strm.avail_out===0?3:4):a.last_lit&&(oo(a,!1),a.strm.avail_out===0)?1:2},qo=[new Kr(0,0,0,0,function(a,A){var i=65535;for(i>a.pending_buf_size-5&&(i=a.pending_buf_size-5);;){if(1>=a.lookahead){if(iu(a),a.lookahead===0&&A===Jn)return 1;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;var u=a.block_start+i;if((a.strstart===0||a.strstart>=u)&&(a.lookahead=a.strstart-u,a.strstart=u,oo(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-262&&(oo(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,A===ro?(oo(a,!0),a.strm.avail_out===0?3:4):(a.strstart>a.block_start&&oo(a,!1),1)}),new Kr(4,4,8,4,af),new Kr(4,5,16,8,af),new Kr(4,6,32,32,af),new Kr(4,4,16,16,Du),new Kr(8,16,32,32,Du),new Kr(8,16,128,128,Du),new Kr(8,32,128,256,Du),new Kr(32,128,258,1024,Du),new Kr(32,258,258,4096,Du)],Ip=function(a){if(!a||!a.state)return pr(a,Os);a.total_in=a.total_out=0,a.data_type=zi;var A=a.state;if(A.pending=0,A.pending_out=0,0>A.wrap&&(A.wrap=-A.wrap),A.status=A.wrap?42:113,a.adler=A.wrap===2?0:1,A.last_flush=Jn,!vl){var i,u,m;for(a=Array(16),m=u=0;28>m;m++)for(rf[m]=u,i=0;i<1<<Mp[m];i++)pl[u++]=m;for(pl[u-1]=m,m=u=0;16>m;m++)for(dl[m]=u,i=0;i<1<<lo[m];i++)UA[u++]=m;for(u>>=7;30>m;m++)for(dl[m]=u<<7,i=0;i<1<<lo[m]-7;i++)UA[256+u++]=m;for(i=0;15>=i;i++)a[i]=0;for(i=0;143>=i;)Ta[2*i+1]=8,i++,a[8]++;for(;255>=i;)Ta[2*i+1]=9,i++,a[9]++;for(;279>=i;)Ta[2*i+1]=7,i++,a[7]++;for(;287>=i;)Ta[2*i+1]=8,i++,a[8]++;for(Vd(Ta,287,a),i=0;30>i;i++)Uu[2*i+1]=5,Uu[2*i]=_p(i,5);nf=new hn(Ta,Mp,257,286,15),Do=new hn(Uu,lo,0,30,15),gl=new hn([],ef,0,19,7),vl=!0}return A.l_desc=new Qo(A.dyn_ltree,nf),A.d_desc=new Qo(A.dyn_dtree,Do),A.bl_desc=new Qo(A.bl_tree,gl),A.bi_buf=0,A.bi_valid=0,DA(A),Ds},Am=function(a){var A=Ip(a);return A===Ds&&(a=a.state,a.window_size=2*a.w_size,yl(a.head),a.max_lazy_match=qo[a.level].max_lazy,a.good_match=qo[a.level].good_length,a.nice_match=qo[a.level].nice_length,a.max_chain_length=qo[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),A},Af=function(a,A,i,u,m,p){if(!a)return Os;var y=1;if(A===sf&&(A=6),0>u?(y=0,u=-u):15<u&&(y=2,u-=16),1>m||9<m||i!==Jo||8>u||15<u||0>A||9<A||0>p||p>nu)return pr(a,Os);u===8&&(u=9);var v=new $f;return a.state=v,v.strm=a,v.wrap=y,v.gzhead=null,v.w_bits=u,v.w_size=1<<v.w_bits,v.w_mask=v.w_size-1,v.hash_bits=m+7,v.hash_size=1<<v.hash_bits,v.hash_mask=v.hash_size-1,v.hash_shift=~~((v.hash_bits+3-1)/3),v.window=new Uint8Array(2*v.w_size),v.head=new Uint16Array(v.hash_size),v.prev=new Uint16Array(v.w_size),v.lit_bufsize=1<<m+6,v.pending_buf_size=4*v.lit_bufsize,v.pending_buf=new Uint8Array(v.pending_buf_size),v.d_buf=1*v.lit_bufsize,v.l_buf=3*v.lit_bufsize,v.level=A,v.strategy=p,v.method=i,Am(a)},sc={deflateInit:function(a,A){return Af(a,A,Jo,15,8,jd)},deflateInit2:Af,deflateReset:Am,deflateResetKeep:Ip,deflateSetHeader:function(a,A){return!a||!a.state||a.state.wrap!==2?Os:(a.state.gzhead=A,Ds)},deflate:function(a,A){if(!a||!a.state||A>Us||0>A)return a?pr(a,Os):Os;var i=a.state;if(!a.output||!a.input&&a.avail_in!==0||i.status===666&&A!==ro)return pr(a,a.avail_out===0?Ep:Os);i.strm=a;var u=i.last_flush;if(i.last_flush=A,i.status===42)if(i.wrap===2)a.adler=0,kn(i,31),kn(i,139),kn(i,8),i.gzhead?(kn(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),kn(i,i.gzhead.time&255),kn(i,i.gzhead.time>>8&255),kn(i,i.gzhead.time>>16&255),kn(i,i.gzhead.time>>24&255),kn(i,i.level===9?2:i.strategy>=qs||2>i.level?4:0),kn(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(kn(i,i.gzhead.extra.length&255),kn(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(a.adler=As(a.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(kn(i,0),kn(i,0),kn(i,0),kn(i,0),kn(i,0),kn(i,i.level===9?2:i.strategy>=qs||2>i.level?4:0),kn(i,3),i.status=113);else{var m=Jo+(i.w_bits-8<<4)<<8;m|=(i.strategy>=qs||2>i.level?0:6>i.level?1:i.level===6?2:3)<<6,i.strstart!==0&&(m|=32),i.status=113,oc(i,m+(31-m%31)),i.strstart!==0&&(oc(i,a.adler>>>16),oc(i,a.adler&65535)),a.adler=1}if(i.status===69)if(i.gzhead.extra){for(m=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>m&&(a.adler=As(a.adler,i.pending_buf,i.pending-m,m)),lA(a),m=i.pending,i.pending!==i.pending_buf_size));)kn(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>m&&(a.adler=As(a.adler,i.pending_buf,i.pending-m,m)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(i.status===73)if(i.gzhead.name){m=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>m&&(a.adler=As(a.adler,i.pending_buf,i.pending-m,m)),lA(a),m=i.pending,i.pending===i.pending_buf_size)){var p=1;break}p=i.gzindex<i.gzhead.name.length?i.gzhead.name.charCodeAt(i.gzindex++)&255:0,kn(i,p)}while(p!==0);i.gzhead.hcrc&&i.pending>m&&(a.adler=As(a.adler,i.pending_buf,i.pending-m,m)),p===0&&(i.gzindex=0,i.status=91)}else i.status=91;if(i.status===91)if(i.gzhead.comment){m=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>m&&(a.adler=As(a.adler,i.pending_buf,i.pending-m,m)),lA(a),m=i.pending,i.pending===i.pending_buf_size)){p=1;break}p=i.gzindex<i.gzhead.comment.length?i.gzhead.comment.charCodeAt(i.gzindex++)&255:0,kn(i,p)}while(p!==0);i.gzhead.hcrc&&i.pending>m&&(a.adler=As(a.adler,i.pending_buf,i.pending-m,m)),p===0&&(i.status=103)}else i.status=103;if(i.status===103&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&lA(a),i.pending+2<=i.pending_buf_size&&(kn(i,a.adler&255),kn(i,a.adler>>8&255),a.adler=0,i.status=113)):i.status=113),i.pending!==0){if(lA(a),a.avail_out===0)return i.last_flush=-1,Ds}else if(a.avail_in===0&&(A<<1)-(4<A?9:0)<=(u<<1)-(4<u?9:0)&&A!==ro)return pr(a,Ep);if(i.status===666&&a.avail_in!==0)return pr(a,Ep);if(a.avail_in!==0||i.lookahead!==0||A!==Jn&&i.status!==666){if(u=i.strategy===qs?Kv(i,A):i.strategy===HA?Xv(i,A):qo[i.level].func(i,A),(u===3||u===4)&&(i.status=666),u===1||u===3)return a.avail_out===0&&(i.last_flush=-1),Ds;if(u===2&&(A===Ah?(vs(i,2,3),nr(i,256,Ta),i.bi_valid===16?(ml(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):8<=i.bi_valid&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)):A!==Us&&(ho(i,0,0,!1),A===xs&&(yl(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),lA(a),a.avail_out===0))return i.last_flush=-1,Ds}return A!==ro?Ds:0>=i.wrap?Sa:(i.wrap===2?(kn(i,a.adler&255),kn(i,a.adler>>8&255),kn(i,a.adler>>16&255),kn(i,a.adler>>24&255),kn(i,a.total_in&255),kn(i,a.total_in>>8&255),kn(i,a.total_in>>16&255),kn(i,a.total_in>>24&255)):(oc(i,a.adler>>>16),oc(i,a.adler&65535)),lA(a),0<i.wrap&&(i.wrap=-i.wrap),i.pending!==0?Ds:Sa)},deflateEnd:function(a){if(!a||!a.state)return Os;var A=a.state.status;return A!==42&&A!==69&&A!==73&&A!==91&&A!==103&&A!==113&&A!==666?pr(a,Os):(a.state=null,A===113?pr(a,Bp):Ds)},deflateSetDictionary:function(a,A){var i=A.length;if(!a||!a.state)return Os;var u=a.state,m=u.wrap;if(m===2||m===1&&u.status!==42||u.lookahead)return Os;if(m===1&&(a.adler=co(a.adler,A,i,0)),u.wrap=0,i>=u.w_size){m===0&&(yl(u.head),u.strstart=0,u.block_start=0,u.insert=0);var p=new Uint8Array(u.w_size);p.set(A.subarray(i-u.w_size,i),0),A=p,i=u.w_size}p=a.avail_in;var y=a.next_in,v=a.input;for(a.avail_in=i,a.next_in=0,a.input=A,iu(u);3<=u.lookahead;){A=u.strstart,i=u.lookahead-2;do u.ins_h=ua(u,u.ins_h,u.window[A+3-1]),u.prev[A&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=A,A++;while(--i);u.strstart=A,u.lookahead=2,iu(u)}return u.strstart+=u.lookahead,u.block_start=u.strstart,u.insert=u.lookahead,u.lookahead=0,u.match_length=u.prev_length=2,u.match_available=0,a.next_in=y,a.input=v,a.avail_in=p,u.wrap=m,Ds},deflateInfo:"pako deflate (from Nodeca project)"},ac={assign:function(a){for(var A=Array.prototype.slice.call(arguments,1);A.length;){var i=A.shift();if(i){if((typeof i=="undefined"?"undefined":Mn(i))!=="object")throw new TypeError(i+"must be non-object");for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(a[u]=i[u])}}return a},flattenChunks:function(a){for(var A=0,i=0,u=a.length;i<u;i++)A+=a[i].length;A=new Uint8Array(A),u=i=0;for(var m=a.length;i<m;i++){var p=a[i];A.set(p,u),u+=p.length}return A}},um=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){um=!1}for(var uf=new Uint8Array(256),Ou=0;256>Ou;Ou++)uf[Ou]=252<=Ou?6:248<=Ou?5:240<=Ou?4:224<=Ou?3:192<=Ou?2:1;uf[254]=uf[254]=1;var xl={string2buf:function(a){var A,i,u=a.length,m=0;for(A=0;A<u;A++){var p=a.charCodeAt(A);if((p&64512)==55296&&A+1<u){var y=a.charCodeAt(A+1);(y&64512)==56320&&(p=65536+(p-55296<<10)+(y-56320),A++)}m+=128>p?1:2048>p?2:65536>p?3:4}var v=new Uint8Array(m);for(A=i=0;i<m;A++)p=a.charCodeAt(A),(p&64512)==55296&&A+1<u&&(y=a.charCodeAt(A+1),(y&64512)==56320&&(p=65536+(p-55296<<10)+(y-56320),A++)),128>p?v[i++]=p:(2048>p?v[i++]=192|p>>>6:(65536>p?v[i++]=224|p>>>12:(v[i++]=240|p>>>18,v[i++]=128|p>>>12&63),v[i++]=128|p>>>6&63),v[i++]=128|p&63);return v},buf2string:function(a,A){var i,u,m=A||a.length;for(A=Array(2*m),i=u=0;i<m;){var p=a[i++];if(128>p)A[u++]=p;else{var y=uf[p];if(4<y)A[u++]=65533,i+=y-1;else{for(p&=y===2?31:y===3?15:7;1<y&&i<m;)p=p<<6|a[i++]&63,y--;1<y?A[u++]=65533:65536>p?A[u++]=p:(p-=65536,A[u++]=55296|p>>10&1023,A[u++]=56320|p&1023)}}}if(a=u,65534>a&&A.subarray&&um)A=String.fromCharCode.apply(null,A.length===a?A:A.subarray(0,a));else{for(i="",u=0;u<a;u++)i+=String.fromCharCode(A[u]);A=i}return A},utf8border:function(a,A){A=A||a.length,A>a.length&&(A=a.length);for(var i=A-1;0<=i&&(a[i]&192)==128;)i--;return 0>i||i===0?A:i+uf[a[i]]>A?i:A}},uh=function(){this.input=null,this.total_in=this.avail_in=this.next_in=0,this.output=null,this.total_out=this.avail_out=this.next_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Tp=Object.prototype.toString,lm=Tn.Z_NO_FLUSH,lf=Tn.Z_SYNC_FLUSH,hm=Tn.Z_FULL_FLUSH,us=Tn.Z_FINISH,NA=Tn.Z_OK,wl=Tn.Z_STREAM_END,Yv=Tn.Z_DEFAULT_COMPRESSION,cm=Tn.Z_DEFAULT_STRATEGY,Sp=Tn.Z_DEFLATED;gu.prototype.push=function(a,A){var i=this.strm,u=this.options.chunkSize;if(this.ended)return!1;for(A=A===~~A?A:A===!0?us:lm,typeof a=="string"?i.input=xl.string2buf(a):Tp.call(a)==="[object ArrayBuffer]"?i.input=new Uint8Array(a):i.input=a,i.next_in=0,i.avail_in=i.input.length;;)if(i.avail_out===0&&(i.output=new Uint8Array(u),i.next_out=0,i.avail_out=u),(A===lf||A===hm)&&6>=i.avail_out)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(a=sc.deflate(i,A),a===wl)return 0<i.next_out&&this.onData(i.output.subarray(0,i.next_out)),a=sc.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===NA;if(i.avail_out===0)this.onData(i.output);else if(0<A&&0<i.next_out)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(i.avail_in===0)break}return!0},gu.prototype.onData=function(a){this.chunks.push(a)},gu.prototype.onEnd=function(a){a===NA&&(this.result=ac.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var pt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Kd=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Lp=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Fp=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ac=function(a,A,i,u,m,p,y,v){var M=v.bits,R,k,_,T,O,U,G=0,X=new Uint16Array(16),W=new Uint16Array(16),Y,J=0;for(R=0;15>=R;R++)X[R]=0;for(k=0;k<u;k++)X[A[i+k]]++;var ot=M;for(_=15;1<=_&&X[_]===0;_--);if(ot>_&&(ot=_),_===0)return m[p++]=20971520,m[p++]=20971520,v.bits=1,0;for(M=1;M<_&&X[M]===0;M++);for(ot<M&&(ot=M),R=T=1;15>=R;R++)if(T<<=1,T-=X[R],0>T)return-1;if(0<T&&(a===0||_!==1))return-1;for(W[1]=0,R=1;15>R;R++)W[R+1]=W[R]+X[R];for(k=0;k<u;k++)A[i+k]!==0&&(y[W[A[i+k]]++]=k);if(a===0)var ut=Y=y,lt=19;else a===1?(ut=pt,G-=257,Y=Kd,J-=257,lt=256):(ut=Lp,Y=Fp,lt=-1);k=O=0,R=M;var wt=p;u=ot,W=0;var Qt=-1,zt=1<<ot,ne=zt-1;if(a===1&&852<zt||a===2&&592<zt)return 1;for(;;){var pe=R-W;if(y[k]<lt)var be=0,Ie=y[k];else y[k]>lt?(be=Y[J+y[k]],Ie=ut[G+y[k]]):(be=96,Ie=0);T=1<<R-W,M=U=1<<u;do U-=T,m[wt+(O>>W)+U]=pe<<24|be<<16|Ie|0;while(U!==0);for(T=1<<R-1;O&T;)T>>=1;if(T!==0?(O&=T-1,O+=T):O=0,k++,--X[R]==0){if(R===_)break;R=A[i+y[k]]}if(R>ot&&(O&ne)!==Qt){for(W===0&&(W=ot),wt+=M,u=R-W,T=1<<u;u+W<_&&(T-=X[u+W],!(0>=T));)u++,T<<=1;if(zt+=1<<u,a===1&&852<zt||a===2&&592<zt)return 1;Qt=O&ne,m[Qt]=ot<<24|u<<16|wt-p|0}}return O!==0&&(m[wt+O]=R-W<<24|4194304),v.bits=ot,0},fm=Tn.Z_FINISH,Zv=Tn.Z_BLOCK,dt=Tn.Z_TREES,Cl=Tn.Z_OK,pm=Tn.Z_STREAM_END,dm=Tn.Z_NEED_DICT,Oo=Tn.Z_STREAM_ERROR,Ho=Tn.Z_DATA_ERROR,gm=Tn.Z_MEM_ERROR,mm=Tn.Z_BUF_ERROR,Ml=Tn.Z_DEFLATED,Yd=function(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)},hf=function(a){if(!a||!a.state)return Oo;var A=a.state;return a.total_in=a.total_out=A.total=0,a.msg="",A.wrap&&(a.adler=A.wrap&1),A.mode=1,A.last=0,A.havedict=0,A.dmax=32768,A.head=null,A.hold=0,A.bits=0,A.lencode=A.lendyn=new Int32Array(852),A.distcode=A.distdyn=new Int32Array(592),A.sane=1,A.back=-1,Cl},uc=function(a){if(!a||!a.state)return Oo;var A=a.state;return A.wsize=0,A.whave=0,A.wnext=0,hf(a)},vm=function(a,A){if(!a||!a.state)return Oo;var i=a.state;if(0>A){var u=0;A=-A}else u=(A>>4)+1,48>A&&(A&=15);return A&&(8>A||15<A)?Oo:(i.window!==null&&i.wbits!==A&&(i.window=null),i.wrap=u,i.wbits=A,uc(a))},Rp=function(a,A){if(!a)return Oo;var i=new Hh;return a.state=i,i.window=null,A=vm(a,A),A!==Cl&&(a.state=null),A},lc=!0,hc=void 0,Pp=void 0,cf=function(a,A,i,u){var m=a.state;return m.window===null&&(m.wsize=1<<m.wbits,m.wnext=0,m.whave=0,m.window=new Uint8Array(m.wsize)),u>=m.wsize?(m.window.set(A.subarray(i-m.wsize,i),0),m.wnext=0,m.whave=m.wsize):(a=m.wsize-m.wnext,a>u&&(a=u),m.window.set(A.subarray(i-u,i-u+a),m.wnext),(u-=a)?(m.window.set(A.subarray(i-u,i),0),m.wnext=u,m.whave=m.wsize):(m.wnext+=a,m.wnext===m.wsize&&(m.wnext=0),m.whave<m.wsize&&(m.whave+=a))),0},Hu={inflateReset:uc,inflateReset2:vm,inflateResetKeep:hf,inflateInit:function(a){return Rp(a,15)},inflateInit2:Rp,inflate:function(a,A){var i=new Uint8Array(4),u=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!a||!a.state||!a.output||!a.input&&a.avail_in!==0)return Oo;var m=a.state;m.mode===12&&(m.mode=13);var p=a.next_out,y=a.output,v=a.avail_out,M=a.next_in,R=a.input,k=a.avail_in,_=m.hold,T=m.bits,O=k,U=v,G=Cl;t:for(;;)switch(m.mode){case 1:if(m.wrap===0){m.mode=13;break}for(;16>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}if(m.wrap&2&&_===35615){m.check=0,i[0]=_&255,i[1]=_>>>8&255,m.check=As(m.check,i,2,0),T=_=0,m.mode=2;break}if(m.flags=0,m.head&&(m.head.done=!1),!(m.wrap&1)||(((_&255)<<8)+(_>>8))%31){a.msg="incorrect header check",m.mode=30;break}if((_&15)!==Ml){a.msg="unknown compression method",m.mode=30;break}_>>>=4,T-=4;var X=(_&15)+8;if(m.wbits===0)m.wbits=X;else if(X>m.wbits){a.msg="invalid window size",m.mode=30;break}m.dmax=1<<m.wbits,a.adler=m.check=1,m.mode=_&512?10:12,T=_=0;break;case 2:for(;16>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}if(m.flags=_,(m.flags&255)!==Ml){a.msg="unknown compression method",m.mode=30;break}if(m.flags&57344){a.msg="unknown header flags set",m.mode=30;break}m.head&&(m.head.text=_>>8&1),m.flags&512&&(i[0]=_&255,i[1]=_>>>8&255,m.check=As(m.check,i,2,0)),T=_=0,m.mode=3;case 3:for(;32>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}m.head&&(m.head.time=_),m.flags&512&&(i[0]=_&255,i[1]=_>>>8&255,i[2]=_>>>16&255,i[3]=_>>>24&255,m.check=As(m.check,i,4,0)),T=_=0,m.mode=4;case 4:for(;16>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}m.head&&(m.head.xflags=_&255,m.head.os=_>>8),m.flags&512&&(i[0]=_&255,i[1]=_>>>8&255,m.check=As(m.check,i,2,0)),T=_=0,m.mode=5;case 5:if(m.flags&1024){for(;16>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}m.length=_,m.head&&(m.head.extra_len=_),m.flags&512&&(i[0]=_&255,i[1]=_>>>8&255,m.check=As(m.check,i,2,0)),T=_=0}else m.head&&(m.head.extra=null);m.mode=6;case 6:if(m.flags&1024){var W=m.length;if(W>k&&(W=k),W&&(m.head&&(X=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Uint8Array(m.head.extra_len)),m.head.extra.set(R.subarray(M,M+W),X)),m.flags&512&&(m.check=As(m.check,R,W,M)),k-=W,M+=W,m.length-=W),m.length)break t}m.length=0,m.mode=7;case 7:if(m.flags&2048){if(k===0)break t;W=0;do X=R[M+W++],m.head&&X&&65536>m.length&&(m.head.name+=String.fromCharCode(X));while(X&&W<k);if(m.flags&512&&(m.check=As(m.check,R,W,M)),k-=W,M+=W,X)break t}else m.head&&(m.head.name=null);m.length=0,m.mode=8;case 8:if(m.flags&4096){if(k===0)break t;W=0;do X=R[M+W++],m.head&&X&&65536>m.length&&(m.head.comment+=String.fromCharCode(X));while(X&&W<k);if(m.flags&512&&(m.check=As(m.check,R,W,M)),k-=W,M+=W,X)break t}else m.head&&(m.head.comment=null);m.mode=9;case 9:if(m.flags&512){for(;16>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}if(_!==(m.check&65535)){a.msg="header crc mismatch",m.mode=30;break}T=_=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),a.adler=m.check=0,m.mode=12;break;case 10:for(;32>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}a.adler=m.check=Yd(_),T=_=0,m.mode=11;case 11:if(m.havedict===0)return a.next_out=p,a.avail_out=v,a.next_in=M,a.avail_in=k,m.hold=_,m.bits=T,dm;a.adler=m.check=1,m.mode=12;case 12:if(A===Zv||A===dt)break t;case 13:if(m.last){_>>>=T&7,T-=T&7,m.mode=27;break}for(;3>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}switch(m.last=_&1,_>>>=1,--T,_&3){case 0:m.mode=14;break;case 1:if(W=m,lc){for(hc=new Int32Array(512),Pp=new Int32Array(32),X=0;144>X;)W.lens[X++]=8;for(;256>X;)W.lens[X++]=9;for(;280>X;)W.lens[X++]=7;for(;288>X;)W.lens[X++]=8;for(Ac(1,W.lens,0,288,hc,0,W.work,{bits:9}),X=0;32>X;)W.lens[X++]=5;Ac(2,W.lens,0,32,Pp,0,W.work,{bits:5}),lc=!1}if(W.lencode=hc,W.lenbits=9,W.distcode=Pp,W.distbits=5,m.mode=20,A===dt){_>>>=2,T-=2;break t}break;case 2:m.mode=17;break;case 3:a.msg="invalid block type",m.mode=30}_>>>=2,T-=2;break;case 14:for(_>>>=T&7,T-=T&7;32>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}if((_&65535)!=(_>>>16^65535)){a.msg="invalid stored block lengths",m.mode=30;break}if(m.length=_&65535,T=_=0,m.mode=15,A===dt)break t;case 15:m.mode=16;case 16:if(W=m.length){if(W>k&&(W=k),W>v&&(W=v),W===0)break t;y.set(R.subarray(M,M+W),p),k-=W,M+=W,v-=W,p+=W,m.length-=W;break}m.mode=12;break;case 17:for(;14>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}if(m.nlen=(_&31)+257,_>>>=5,T-=5,m.ndist=(_&31)+1,_>>>=5,T-=5,m.ncode=(_&15)+4,_>>>=4,T-=4,286<m.nlen||30<m.ndist){a.msg="too many length or distance symbols",m.mode=30;break}m.have=0,m.mode=18;case 18:for(;m.have<m.ncode;){for(;3>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}m.lens[u[m.have++]]=_&7,_>>>=3,T-=3}for(;19>m.have;)m.lens[u[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,W={bits:m.lenbits},G=Ac(0,m.lens,0,19,m.lencode,0,m.work,W),m.lenbits=W.bits,G){a.msg="invalid code lengths set",m.mode=30;break}m.have=0,m.mode=19;case 19:for(;m.have<m.nlen+m.ndist;){for(;;){var Y=m.lencode[_&(1<<m.lenbits)-1];if(W=Y>>>24,Y&=65535,W<=T)break;if(k===0)break t;k--,_+=R[M++]<<T,T+=8}if(16>Y)_>>>=W,T-=W,m.lens[m.have++]=Y;else{if(Y===16){for(X=W+2;T<X;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}if(_>>>=W,T-=W,m.have===0){a.msg="invalid bit length repeat",m.mode=30;break}X=m.lens[m.have-1],W=3+(_&3),_>>>=2,T-=2}else if(Y===17){for(X=W+3;T<X;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}_>>>=W,T-=W,X=0,W=3+(_&7),_>>>=3,T-=3}else{for(X=W+7;T<X;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}_>>>=W,T-=W,X=0,W=11+(_&127),_>>>=7,T-=7}if(m.have+W>m.nlen+m.ndist){a.msg="invalid bit length repeat",m.mode=30;break}for(;W--;)m.lens[m.have++]=X}}if(m.mode===30)break;if(m.lens[256]===0){a.msg="invalid code -- missing end-of-block",m.mode=30;break}if(m.lenbits=9,W={bits:m.lenbits},G=Ac(1,m.lens,0,m.nlen,m.lencode,0,m.work,W),m.lenbits=W.bits,G){a.msg="invalid literal/lengths set",m.mode=30;break}if(m.distbits=6,m.distcode=m.distdyn,W={bits:m.distbits},G=Ac(2,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,W),m.distbits=W.bits,G){a.msg="invalid distances set",m.mode=30;break}if(m.mode=20,A===dt)break t;case 20:m.mode=21;case 21:if(6<=k&&258<=v){a.next_out=p,a.avail_out=v,a.next_in=M,a.avail_in=k,m.hold=_,m.bits=T,R=a;var J=R.state;y=R.next_in;var ot=R.input;M=y+(R.avail_in-5),p=R.next_out;var ut=R.output;k=p-(U-R.avail_out),v=p+(R.avail_out-257),_=J.dmax,T=J.wsize,W=J.whave,X=J.wnext;var lt=J.window,wt=J.hold,Qt=J.bits;Y=J.lencode;var zt=J.distcode,ne=(1<<J.lenbits)-1,pe=(1<<J.distbits)-1;e:do{15>Qt&&(wt+=ot[y++]<<Qt,Qt+=8,wt+=ot[y++]<<Qt,Qt+=8);var be=Y[wt&ne];r:for(;;){var Ie=be>>>24;if(wt>>>=Ie,Qt-=Ie,Ie=be>>>16&255,Ie===0)ut[p++]=be&65535;else if(Ie&16){var hr=be&65535;(Ie&=15)&&(Qt<Ie&&(wt+=ot[y++]<<Qt,Qt+=8),hr+=wt&(1<<Ie)-1,wt>>>=Ie,Qt-=Ie),15>Qt&&(wt+=ot[y++]<<Qt,Qt+=8,wt+=ot[y++]<<Qt,Qt+=8),be=zt[wt&pe];n:for(;;){if(Ie=be>>>24,wt>>>=Ie,Qt-=Ie,Ie=be>>>16&255,Ie&16){if(be&=65535,Ie&=15,Qt<Ie&&(wt+=ot[y++]<<Qt,Qt+=8,Qt<Ie&&(wt+=ot[y++]<<Qt,Qt+=8)),be+=wt&(1<<Ie)-1,be>_){R.msg="invalid distance too far back",J.mode=30;break e}if(wt>>>=Ie,Qt-=Ie,Ie=p-k,be>Ie){if(Ie=be-Ie,Ie>W&&J.sane){R.msg="invalid distance too far back",J.mode=30;break e}var Qr=0,Ce=lt;if(X===0){if(Qr+=T-Ie,Ie<hr){hr-=Ie;do ut[p++]=lt[Qr++];while(--Ie);Qr=p-be,Ce=ut}}else if(X<Ie){if(Qr+=T+X-Ie,Ie-=X,Ie<hr){hr-=Ie;do ut[p++]=lt[Qr++];while(--Ie);if(Qr=0,X<hr){Ie=X,hr-=Ie;do ut[p++]=lt[Qr++];while(--Ie);Qr=p-be,Ce=ut}}}else if(Qr+=X-Ie,Ie<hr){hr-=Ie;do ut[p++]=lt[Qr++];while(--Ie);Qr=p-be,Ce=ut}for(;2<hr;)ut[p++]=Ce[Qr++],ut[p++]=Ce[Qr++],ut[p++]=Ce[Qr++],hr-=3;hr&&(ut[p++]=Ce[Qr++],1<hr&&(ut[p++]=Ce[Qr++]))}else{Qr=p-be;do ut[p++]=ut[Qr++],ut[p++]=ut[Qr++],ut[p++]=ut[Qr++],hr-=3;while(2<hr);hr&&(ut[p++]=ut[Qr++],1<hr&&(ut[p++]=ut[Qr++]))}}else if((Ie&64)==0){be=zt[(be&65535)+(wt&(1<<Ie)-1)];continue n}else{R.msg="invalid distance code",J.mode=30;break e}break}}else if((Ie&64)==0){be=Y[(be&65535)+(wt&(1<<Ie)-1)];continue r}else{Ie&32?J.mode=12:(R.msg="invalid literal/length code",J.mode=30);break e}break}}while(y<M&&p<v);hr=Qt>>3,y-=hr,Qt-=hr<<3,R.next_in=y,R.next_out=p,R.avail_in=y<M?5+(M-y):5-(y-M),R.avail_out=p<v?257+(v-p):257-(p-v),J.hold=wt&(1<<Qt)-1,J.bits=Qt,p=a.next_out,y=a.output,v=a.avail_out,M=a.next_in,R=a.input,k=a.avail_in,_=m.hold,T=m.bits,m.mode===12&&(m.back=-1);break}for(m.back=0;Y=m.lencode[_&(1<<m.lenbits)-1],W=Y>>>24,X=Y>>>16&255,Y&=65535,!(W<=T);){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}if(X&&(X&240)==0){for(lt=W,wt=X,Qt=Y;Y=m.lencode[Qt+((_&(1<<lt+wt)-1)>>lt)],W=Y>>>24,X=Y>>>16&255,Y&=65535,!(lt+W<=T);){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}_>>>=lt,T-=lt,m.back+=lt}if(_>>>=W,T-=W,m.back+=W,m.length=Y,X===0){m.mode=26;break}if(X&32){m.back=-1,m.mode=12;break}if(X&64){a.msg="invalid literal/length code",m.mode=30;break}m.extra=X&15,m.mode=22;case 22:if(m.extra){for(X=m.extra;T<X;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}m.length+=_&(1<<m.extra)-1,_>>>=m.extra,T-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=23;case 23:for(;Y=m.distcode[_&(1<<m.distbits)-1],W=Y>>>24,X=Y>>>16&255,Y&=65535,!(W<=T);){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}if((X&240)==0){for(lt=W,wt=X,Qt=Y;Y=m.distcode[Qt+((_&(1<<lt+wt)-1)>>lt)],W=Y>>>24,X=Y>>>16&255,Y&=65535,!(lt+W<=T);){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}_>>>=lt,T-=lt,m.back+=lt}if(_>>>=W,T-=W,m.back+=W,X&64){a.msg="invalid distance code",m.mode=30;break}m.offset=Y,m.extra=X&15,m.mode=24;case 24:if(m.extra){for(X=m.extra;T<X;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}m.offset+=_&(1<<m.extra)-1,_>>>=m.extra,T-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){a.msg="invalid distance too far back",m.mode=30;break}m.mode=25;case 25:if(v===0)break t;if(W=U-v,m.offset>W){if(W=m.offset-W,W>m.whave&&m.sane){a.msg="invalid distance too far back",m.mode=30;break}W>m.wnext?(W-=m.wnext,X=m.wsize-W):X=m.wnext-W,W>m.length&&(W=m.length),lt=m.window}else lt=y,X=p-m.offset,W=m.length;W>v&&(W=v),v-=W,m.length-=W;do y[p++]=lt[X++];while(--W);m.length===0&&(m.mode=21);break;case 26:if(v===0)break t;y[p++]=m.length,v--,m.mode=21;break;case 27:if(m.wrap){for(;32>T;){if(k===0)break t;k--,_|=R[M++]<<T,T+=8}if(U-=v,a.total_out+=U,m.total+=U,U&&(a.adler=m.check=m.flags?As(m.check,y,U,p-U):co(m.check,y,U,p-U)),U=v,(m.flags?_:Yd(_))!==m.check){a.msg="incorrect data check",m.mode=30;break}T=_=0}m.mode=28;case 28:if(m.wrap&&m.flags){for(;32>T;){if(k===0)break t;k--,_+=R[M++]<<T,T+=8}if(_!==(m.total&4294967295)){a.msg="incorrect length check",m.mode=30;break}T=_=0}m.mode=29;case 29:G=pm;break t;case 30:G=Ho;break t;case 31:return gm;default:return Oo}return a.next_out=p,a.avail_out=v,a.next_in=M,a.avail_in=k,m.hold=_,m.bits=T,(m.wsize||U!==a.avail_out&&30>m.mode&&(27>m.mode||A!==fm))&&cf(a,a.output,a.next_out,U-a.avail_out),O-=a.avail_in,U-=a.avail_out,a.total_in+=O,a.total_out+=U,m.total+=U,m.wrap&&U&&(a.adler=m.check=m.flags?As(m.check,y,U,a.next_out-U):co(m.check,y,U,a.next_out-U)),a.data_type=m.bits+(m.last?64:0)+(m.mode===12?128:0)+(m.mode===20||m.mode===15?256:0),(O===0&&U===0||A===fm)&&G===Cl&&(G=mm),G},inflateEnd:function(a){if(!a||!a.state)return Oo;var A=a.state;return A.window&&(A.window=null),a.state=null,Cl},inflateGetHeader:function(a,A){return!a||!a.state||(a=a.state,(a.wrap&2)==0)?Oo:(a.head=A,A.done=!1,Cl)},inflateSetDictionary:function(a,A){var i=A.length;if(!a||!a.state)return Oo;var u=a.state;if(u.wrap!==0&&u.mode!==11)return Oo;if(u.mode===11){var m=co(1,A,i,0);if(m!==u.check)return Ho}return cf(a,A,i,i)?(u.mode=31,gm):(u.havedict=1,Cl)},inflateInfo:"pako inflate (from Nodeca project)"},ff=function(){this.os=this.xflags=this.time=this.text=0,this.extra=null,this.extra_len=0,this.comment=this.name="",this.hcrc=0,this.done=!1},Up=Object.prototype.toString,Zd=Tn.Z_NO_FLUSH,Jv=Tn.Z_FINISH,pf=Tn.Z_OK,lh=Tn.Z_STREAM_END,_l=Tn.Z_NEED_DICT,df=Tn.Z_STREAM_ERROR,hh=Tn.Z_DATA_ERROR,ym=Tn.Z_MEM_ERROR;BA.prototype.push=function(a,A){var i=this.strm,u=this.options.chunkSize,m=this.options.dictionary;if(this.ended)return!1;var p=A===~~A?A:A===!0?Jv:Zd;for(Up.call(a)==="[object ArrayBuffer]"?i.input=new Uint8Array(a):i.input=a,i.next_in=0,i.avail_in=i.input.length;;){for(i.avail_out===0&&(i.output=new Uint8Array(u),i.next_out=0,i.avail_out=u),A=Hu.inflate(i,p),A===_l&&m&&(A=Hu.inflateSetDictionary(i,m),A===pf?A=Hu.inflate(i,p):A===hh&&(A=_l));0<i.avail_in&&A===lh&&0<i.state.wrap&&a[i.next_in]!==0;)Hu.inflateReset(i),A=Hu.inflate(i,p);switch(A){case df:case hh:case _l:case ym:return this.onEnd(A),this.ended=!0,!1}var y=i.avail_out;if(i.next_out&&(i.avail_out===0||A===lh))if(this.options.to==="string"){var v=xl.utf8border(i.output,i.next_out),M=i.next_out-v,R=xl.buf2string(i.output,v);i.next_out=M,i.avail_out=u-M,M&&i.output.set(i.output.subarray(v,v+M),0),this.onData(R)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(A!==pf||y!==0){if(A===lh){A=Hu.inflateEnd(this.strm),this.onEnd(A),this.ended=!0;break}if(i.avail_in===0)break}}return!0},BA.prototype.onData=function(a){this.chunks.push(a)},BA.prototype.onEnd=function(a){a===pf&&(this.result=this.options.to==="string"?this.chunks.join(""):ac.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var Jd={Deflate:gu,deflate:Gl,deflateRaw:function(a,A){return A=A||{},A.raw=!0,Gl(a,A)},gzip:function(a,A){return A=A||{},A.gzip=!0,Gl(a,A)},Inflate:BA,inflate:EA,inflateRaw:function(a,A){return A=A||{},A.raw=!0,EA(a,A)},ungzip:EA,constants:Tn},zA=Ot(function(a,A){Object.defineProperty(A,"__esModule",{value:!0}),A.setMatrixArrayType=function(p){A.ARRAY_TYPE=u=p},A.toRadian=function(p){return p*m},A.equals=function(p,y){return Math.abs(p-y)<=i*Math.max(1,Math.abs(p),Math.abs(y))},A.RANDOM=A.ARRAY_TYPE=A.EPSILON=void 0;var i=1e-6;A.EPSILON=i;var u=typeof Float32Array!="undefined"?Float32Array:Array;A.ARRAY_TYPE=u,A.RANDOM=Math.random;var m=Math.PI/180});Gt(zA);var cc=Ot(function(a,A){function i(p,y,v){var M=y[0],R=y[1],k=y[2];y=y[3];var _=v[0],T=v[1],O=v[2];return v=v[3],p[0]=M*_+k*T,p[1]=R*_+y*T,p[2]=M*O+k*v,p[3]=R*O+y*v,p}function u(p,y,v){return p[0]=y[0]-v[0],p[1]=y[1]-v[1],p[2]=y[2]-v[2],p[3]=y[3]-v[3],p}Object.defineProperty(A,"__esModule",{value:!0}),A.create=function(){var p=new m.ARRAY_TYPE(4);return m.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p},A.clone=function(p){var y=new m.ARRAY_TYPE(4);return y[0]=p[0],y[1]=p[1],y[2]=p[2],y[3]=p[3],y},A.copy=function(p,y){return p[0]=y[0],p[1]=y[1],p[2]=y[2],p[3]=y[3],p},A.identity=function(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=1,p},A.fromValues=function(p,y,v,M){var R=new m.ARRAY_TYPE(4);return R[0]=p,R[1]=y,R[2]=v,R[3]=M,R},A.set=function(p,y,v,M,R){return p[0]=y,p[1]=v,p[2]=M,p[3]=R,p},A.transpose=function(p,y){if(p===y){var v=y[1];p[1]=y[2],p[2]=v}else p[0]=y[0],p[1]=y[2],p[2]=y[1],p[3]=y[3];return p},A.invert=function(p,y){var v=y[0],M=y[1],R=y[2];y=y[3];var k=v*y-R*M;return k?(k=1/k,p[0]=y*k,p[1]=-M*k,p[2]=-R*k,p[3]=v*k,p):null},A.adjoint=function(p,y){var v=y[0];return p[0]=y[3],p[1]=-y[1],p[2]=-y[2],p[3]=v,p},A.determinant=function(p){return p[0]*p[3]-p[2]*p[1]},A.multiply=i,A.rotate=function(p,y,v){var M=y[0],R=y[1],k=y[2];y=y[3];var _=Math.sin(v);return v=Math.cos(v),p[0]=M*v+k*_,p[1]=R*v+y*_,p[2]=M*-_+k*v,p[3]=R*-_+y*v,p},A.scale=function(p,y,v){var M=y[1],R=y[2],k=y[3],_=v[0];return v=v[1],p[0]=y[0]*_,p[1]=M*_,p[2]=R*v,p[3]=k*v,p},A.fromRotation=function(p,y){var v=Math.sin(y);return y=Math.cos(y),p[0]=y,p[1]=v,p[2]=-v,p[3]=y,p},A.fromScaling=function(p,y){return p[0]=y[0],p[1]=0,p[2]=0,p[3]=y[1],p},A.str=function(p){return"mat2("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+")"},A.frob=function(p){return Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)+Math.pow(p[2],2)+Math.pow(p[3],2))},A.LDU=function(p,y,v,M){return p[2]=M[2]/M[0],v[0]=M[0],v[1]=M[1],v[3]=M[3]-p[2]*v[1],[p,y,v]},A.add=function(p,y,v){return p[0]=y[0]+v[0],p[1]=y[1]+v[1],p[2]=y[2]+v[2],p[3]=y[3]+v[3],p},A.subtract=u,A.exactEquals=function(p,y){return p[0]===y[0]&&p[1]===y[1]&&p[2]===y[2]&&p[3]===y[3]},A.equals=function(p,y){var v=p[0],M=p[1],R=p[2];p=p[3];var k=y[0],_=y[1],T=y[2];return y=y[3],Math.abs(v-k)<=m.EPSILON*Math.max(1,Math.abs(v),Math.abs(k))&&Math.abs(M-_)<=m.EPSILON*Math.max(1,Math.abs(M),Math.abs(_))&&Math.abs(R-T)<=m.EPSILON*Math.max(1,Math.abs(R),Math.abs(T))&&Math.abs(p-y)<=m.EPSILON*Math.max(1,Math.abs(p),Math.abs(y))},A.multiplyScalar=function(p,y,v){return p[0]=y[0]*v,p[1]=y[1]*v,p[2]=y[2]*v,p[3]=y[3]*v,p},A.multiplyScalarAndAdd=function(p,y,v,M){return p[0]=y[0]+v[0]*M,p[1]=y[1]+v[1]*M,p[2]=y[2]+v[2]*M,p[3]=y[3]+v[3]*M,p},A.sub=A.mul=void 0;var m=function(p){if(p&&p.__esModule)return p;var y={};if(p!=null){for(var v in p)if(Object.prototype.hasOwnProperty.call(p,v)){var M=Bo&&Io?Io(p,v):{};M.get||M.set?Bo(y,v,M):y[v]=p[v]}}return y.default=p,y}(zA);A.mul=i,A.sub=u});Gt(cc);var fc=Ot(function(a,A){function i(p,y,v){var M=y[0],R=y[1],k=y[2],_=y[3],T=y[4];y=y[5];var O=v[0],U=v[1],G=v[2],X=v[3],W=v[4];return v=v[5],p[0]=M*O+k*U,p[1]=R*O+_*U,p[2]=M*G+k*X,p[3]=R*G+_*X,p[4]=M*W+k*v+T,p[5]=R*W+_*v+y,p}function u(p,y,v){return p[0]=y[0]-v[0],p[1]=y[1]-v[1],p[2]=y[2]-v[2],p[3]=y[3]-v[3],p[4]=y[4]-v[4],p[5]=y[5]-v[5],p}Object.defineProperty(A,"__esModule",{value:!0}),A.create=function(){var p=new m.ARRAY_TYPE(6);return m.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0,p[4]=0,p[5]=0),p[0]=1,p[3]=1,p},A.clone=function(p){var y=new m.ARRAY_TYPE(6);return y[0]=p[0],y[1]=p[1],y[2]=p[2],y[3]=p[3],y[4]=p[4],y[5]=p[5],y},A.copy=function(p,y){return p[0]=y[0],p[1]=y[1],p[2]=y[2],p[3]=y[3],p[4]=y[4],p[5]=y[5],p},A.identity=function(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=1,p[4]=0,p[5]=0,p},A.fromValues=function(p,y,v,M,R,k){var _=new m.ARRAY_TYPE(6);return _[0]=p,_[1]=y,_[2]=v,_[3]=M,_[4]=R,_[5]=k,_},A.set=function(p,y,v,M,R,k,_){return p[0]=y,p[1]=v,p[2]=M,p[3]=R,p[4]=k,p[5]=_,p},A.invert=function(p,y){var v=y[0],M=y[1],R=y[2],k=y[3],_=y[4];y=y[5];var T=v*k-M*R;return T?(T=1/T,p[0]=k*T,p[1]=-M*T,p[2]=-R*T,p[3]=v*T,p[4]=(R*y-k*_)*T,p[5]=(M*_-v*y)*T,p):null},A.determinant=function(p){return p[0]*p[3]-p[1]*p[2]},A.multiply=i,A.rotate=function(p,y,v){var M=y[0],R=y[1],k=y[2],_=y[3],T=y[4];y=y[5];var O=Math.sin(v);return v=Math.cos(v),p[0]=M*v+k*O,p[1]=R*v+_*O,p[2]=M*-O+k*v,p[3]=R*-O+_*v,p[4]=T,p[5]=y,p},A.scale=function(p,y,v){var M=y[1],R=y[2],k=y[3],_=y[4],T=y[5],O=v[0];return v=v[1],p[0]=y[0]*O,p[1]=M*O,p[2]=R*v,p[3]=k*v,p[4]=_,p[5]=T,p},A.translate=function(p,y,v){var M=y[0],R=y[1],k=y[2],_=y[3],T=y[4];y=y[5];var O=v[0];return v=v[1],p[0]=M,p[1]=R,p[2]=k,p[3]=_,p[4]=M*O+k*v+T,p[5]=R*O+_*v+y,p},A.fromRotation=function(p,y){var v=Math.sin(y);return y=Math.cos(y),p[0]=y,p[1]=v,p[2]=-v,p[3]=y,p[4]=0,p[5]=0,p},A.fromScaling=function(p,y){return p[0]=y[0],p[1]=0,p[2]=0,p[3]=y[1],p[4]=0,p[5]=0,p},A.fromTranslation=function(p,y){return p[0]=1,p[1]=0,p[2]=0,p[3]=1,p[4]=y[0],p[5]=y[1],p},A.str=function(p){return"mat2d("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+")"},A.frob=function(p){return Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)+Math.pow(p[2],2)+Math.pow(p[3],2)+Math.pow(p[4],2)+Math.pow(p[5],2)+1)},A.add=function(p,y,v){return p[0]=y[0]+v[0],p[1]=y[1]+v[1],p[2]=y[2]+v[2],p[3]=y[3]+v[3],p[4]=y[4]+v[4],p[5]=y[5]+v[5],p},A.subtract=u,A.multiplyScalar=function(p,y,v){return p[0]=y[0]*v,p[1]=y[1]*v,p[2]=y[2]*v,p[3]=y[3]*v,p[4]=y[4]*v,p[5]=y[5]*v,p},A.multiplyScalarAndAdd=function(p,y,v,M){return p[0]=y[0]+v[0]*M,p[1]=y[1]+v[1]*M,p[2]=y[2]+v[2]*M,p[3]=y[3]+v[3]*M,p[4]=y[4]+v[4]*M,p[5]=y[5]+v[5]*M,p},A.exactEquals=function(p,y){return p[0]===y[0]&&p[1]===y[1]&&p[2]===y[2]&&p[3]===y[3]&&p[4]===y[4]&&p[5]===y[5]},A.equals=function(p,y){var v=p[0],M=p[1],R=p[2],k=p[3],_=p[4];p=p[5];var T=y[0],O=y[1],U=y[2],G=y[3],X=y[4];return y=y[5],Math.abs(v-T)<=m.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(M-O)<=m.EPSILON*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(R-U)<=m.EPSILON*Math.max(1,Math.abs(R),Math.abs(U))&&Math.abs(k-G)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(G))&&Math.abs(_-X)<=m.EPSILON*Math.max(1,Math.abs(_),Math.abs(X))&&Math.abs(p-y)<=m.EPSILON*Math.max(1,Math.abs(p),Math.abs(y))},A.sub=A.mul=void 0;var m=function(p){if(p&&p.__esModule)return p;var y={};if(p!=null){for(var v in p)if(Object.prototype.hasOwnProperty.call(p,v)){var M=Bo&&Io?Io(p,v):{};M.get||M.set?Bo(y,v,M):y[v]=p[v]}}return y.default=p,y}(zA);A.mul=i,A.sub=u});Gt(fc);var hA=Ot(function(a,A){function i(p,y,v){var M=y[0],R=y[1],k=y[2],_=y[3],T=y[4],O=y[5],U=y[6],G=y[7];y=y[8];var X=v[0],W=v[1],Y=v[2],J=v[3],ot=v[4],ut=v[5],lt=v[6],wt=v[7];return v=v[8],p[0]=X*M+W*_+Y*U,p[1]=X*R+W*T+Y*G,p[2]=X*k+W*O+Y*y,p[3]=J*M+ot*_+ut*U,p[4]=J*R+ot*T+ut*G,p[5]=J*k+ot*O+ut*y,p[6]=lt*M+wt*_+v*U,p[7]=lt*R+wt*T+v*G,p[8]=lt*k+wt*O+v*y,p}function u(p,y,v){return p[0]=y[0]-v[0],p[1]=y[1]-v[1],p[2]=y[2]-v[2],p[3]=y[3]-v[3],p[4]=y[4]-v[4],p[5]=y[5]-v[5],p[6]=y[6]-v[6],p[7]=y[7]-v[7],p[8]=y[8]-v[8],p}Object.defineProperty(A,"__esModule",{value:!0}),A.create=function(){var p=new m.ARRAY_TYPE(9);return m.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[5]=0,p[6]=0,p[7]=0),p[0]=1,p[4]=1,p[8]=1,p},A.fromMat4=function(p,y){return p[0]=y[0],p[1]=y[1],p[2]=y[2],p[3]=y[4],p[4]=y[5],p[5]=y[6],p[6]=y[8],p[7]=y[9],p[8]=y[10],p},A.clone=function(p){var y=new m.ARRAY_TYPE(9);return y[0]=p[0],y[1]=p[1],y[2]=p[2],y[3]=p[3],y[4]=p[4],y[5]=p[5],y[6]=p[6],y[7]=p[7],y[8]=p[8],y},A.copy=function(p,y){return p[0]=y[0],p[1]=y[1],p[2]=y[2],p[3]=y[3],p[4]=y[4],p[5]=y[5],p[6]=y[6],p[7]=y[7],p[8]=y[8],p},A.fromValues=function(p,y,v,M,R,k,_,T,O){var U=new m.ARRAY_TYPE(9);return U[0]=p,U[1]=y,U[2]=v,U[3]=M,U[4]=R,U[5]=k,U[6]=_,U[7]=T,U[8]=O,U},A.set=function(p,y,v,M,R,k,_,T,O,U){return p[0]=y,p[1]=v,p[2]=M,p[3]=R,p[4]=k,p[5]=_,p[6]=T,p[7]=O,p[8]=U,p},A.identity=function(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=1,p[5]=0,p[6]=0,p[7]=0,p[8]=1,p},A.transpose=function(p,y){if(p===y){var v=y[1],M=y[2],R=y[5];p[1]=y[3],p[2]=y[6],p[3]=v,p[5]=y[7],p[6]=M,p[7]=R}else p[0]=y[0],p[1]=y[3],p[2]=y[6],p[3]=y[1],p[4]=y[4],p[5]=y[7],p[6]=y[2],p[7]=y[5],p[8]=y[8];return p},A.invert=function(p,y){var v=y[0],M=y[1],R=y[2],k=y[3],_=y[4],T=y[5],O=y[6],U=y[7];y=y[8];var G=y*_-T*U,X=-y*k+T*O,W=U*k-_*O,Y=v*G+M*X+R*W;return Y?(Y=1/Y,p[0]=G*Y,p[1]=(-y*M+R*U)*Y,p[2]=(T*M-R*_)*Y,p[3]=X*Y,p[4]=(y*v-R*O)*Y,p[5]=(-T*v+R*k)*Y,p[6]=W*Y,p[7]=(-U*v+M*O)*Y,p[8]=(_*v-M*k)*Y,p):null},A.adjoint=function(p,y){var v=y[0],M=y[1],R=y[2],k=y[3],_=y[4],T=y[5],O=y[6],U=y[7];return y=y[8],p[0]=_*y-T*U,p[1]=R*U-M*y,p[2]=M*T-R*_,p[3]=T*O-k*y,p[4]=v*y-R*O,p[5]=R*k-v*T,p[6]=k*U-_*O,p[7]=M*O-v*U,p[8]=v*_-M*k,p},A.determinant=function(p){var y=p[3],v=p[4],M=p[5],R=p[6],k=p[7],_=p[8];return p[0]*(_*v-M*k)+p[1]*(-_*y+M*R)+p[2]*(k*y-v*R)},A.multiply=i,A.translate=function(p,y,v){var M=y[0],R=y[1],k=y[2],_=y[3],T=y[4],O=y[5],U=y[6],G=y[7];y=y[8];var X=v[0];return v=v[1],p[0]=M,p[1]=R,p[2]=k,p[3]=_,p[4]=T,p[5]=O,p[6]=X*M+v*_+U,p[7]=X*R+v*T+G,p[8]=X*k+v*O+y,p},A.rotate=function(p,y,v){var M=y[0],R=y[1],k=y[2],_=y[3],T=y[4],O=y[5],U=y[6],G=y[7];y=y[8];var X=Math.sin(v);return v=Math.cos(v),p[0]=v*M+X*_,p[1]=v*R+X*T,p[2]=v*k+X*O,p[3]=v*_-X*M,p[4]=v*T-X*R,p[5]=v*O-X*k,p[6]=U,p[7]=G,p[8]=y,p},A.scale=function(p,y,v){var M=v[0];return v=v[1],p[0]=M*y[0],p[1]=M*y[1],p[2]=M*y[2],p[3]=v*y[3],p[4]=v*y[4],p[5]=v*y[5],p[6]=y[6],p[7]=y[7],p[8]=y[8],p},A.fromTranslation=function(p,y){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=1,p[5]=0,p[6]=y[0],p[7]=y[1],p[8]=1,p},A.fromRotation=function(p,y){var v=Math.sin(y);return y=Math.cos(y),p[0]=y,p[1]=v,p[2]=0,p[3]=-v,p[4]=y,p[5]=0,p[6]=0,p[7]=0,p[8]=1,p},A.fromScaling=function(p,y){return p[0]=y[0],p[1]=0,p[2]=0,p[3]=0,p[4]=y[1],p[5]=0,p[6]=0,p[7]=0,p[8]=1,p},A.fromMat2d=function(p,y){return p[0]=y[0],p[1]=y[1],p[2]=0,p[3]=y[2],p[4]=y[3],p[5]=0,p[6]=y[4],p[7]=y[5],p[8]=1,p},A.fromQuat=function(p,y){var v=y[0],M=y[1],R=y[2];y=y[3];var k=v+v,_=M+M,T=R+R;v*=k;var O=M*k;M*=_;var U=R*k,G=R*_;return R*=T,k*=y,_*=y,y*=T,p[0]=1-M-R,p[3]=O-y,p[6]=U+_,p[1]=O+y,p[4]=1-v-R,p[7]=G-k,p[2]=U-_,p[5]=G+k,p[8]=1-v-M,p},A.normalFromMat4=function(p,y){var v=y[0],M=y[1],R=y[2],k=y[3],_=y[4],T=y[5],O=y[6],U=y[7],G=y[8],X=y[9],W=y[10],Y=y[11],J=y[12],ot=y[13],ut=y[14];y=y[15];var lt=v*T-M*_,wt=v*O-R*_,Qt=v*U-k*_,zt=M*O-R*T,ne=M*U-k*T,pe=R*U-k*O,be=G*ot-X*J,Ie=G*ut-W*J;G=G*y-Y*J;var hr=X*ut-W*ot;return X=X*y-Y*ot,W=W*y-Y*ut,Y=lt*W-wt*X+Qt*hr+zt*G-ne*Ie+pe*be,Y?(Y=1/Y,p[0]=(T*W-O*X+U*hr)*Y,p[1]=(O*G-_*W-U*Ie)*Y,p[2]=(_*X-T*G+U*be)*Y,p[3]=(R*X-M*W-k*hr)*Y,p[4]=(v*W-R*G+k*Ie)*Y,p[5]=(M*G-v*X-k*be)*Y,p[6]=(ot*pe-ut*ne+y*zt)*Y,p[7]=(ut*Qt-J*pe-y*wt)*Y,p[8]=(J*ne-ot*Qt+y*lt)*Y,p):null},A.projection=function(p,y,v){return p[0]=2/y,p[1]=0,p[2]=0,p[3]=0,p[4]=-2/v,p[5]=0,p[6]=-1,p[7]=1,p[8]=1,p},A.str=function(p){return"mat3("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+", "+p[6]+", "+p[7]+", "+p[8]+")"},A.frob=function(p){return Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)+Math.pow(p[2],2)+Math.pow(p[3],2)+Math.pow(p[4],2)+Math.pow(p[5],2)+Math.pow(p[6],2)+Math.pow(p[7],2)+Math.pow(p[8],2))},A.add=function(p,y,v){return p[0]=y[0]+v[0],p[1]=y[1]+v[1],p[2]=y[2]+v[2],p[3]=y[3]+v[3],p[4]=y[4]+v[4],p[5]=y[5]+v[5],p[6]=y[6]+v[6],p[7]=y[7]+v[7],p[8]=y[8]+v[8],p},A.subtract=u,A.multiplyScalar=function(p,y,v){return p[0]=y[0]*v,p[1]=y[1]*v,p[2]=y[2]*v,p[3]=y[3]*v,p[4]=y[4]*v,p[5]=y[5]*v,p[6]=y[6]*v,p[7]=y[7]*v,p[8]=y[8]*v,p},A.multiplyScalarAndAdd=function(p,y,v,M){return p[0]=y[0]+v[0]*M,p[1]=y[1]+v[1]*M,p[2]=y[2]+v[2]*M,p[3]=y[3]+v[3]*M,p[4]=y[4]+v[4]*M,p[5]=y[5]+v[5]*M,p[6]=y[6]+v[6]*M,p[7]=y[7]+v[7]*M,p[8]=y[8]+v[8]*M,p},A.exactEquals=function(p,y){return p[0]===y[0]&&p[1]===y[1]&&p[2]===y[2]&&p[3]===y[3]&&p[4]===y[4]&&p[5]===y[5]&&p[6]===y[6]&&p[7]===y[7]&&p[8]===y[8]},A.equals=function(p,y){var v=p[0],M=p[1],R=p[2],k=p[3],_=p[4],T=p[5],O=p[6],U=p[7];p=p[8];var G=y[0],X=y[1],W=y[2],Y=y[3],J=y[4],ot=y[5],ut=y[6],lt=y[7];return y=y[8],Math.abs(v-G)<=m.EPSILON*Math.max(1,Math.abs(v),Math.abs(G))&&Math.abs(M-X)<=m.EPSILON*Math.max(1,Math.abs(M),Math.abs(X))&&Math.abs(R-W)<=m.EPSILON*Math.max(1,Math.abs(R),Math.abs(W))&&Math.abs(k-Y)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(Y))&&Math.abs(_-J)<=m.EPSILON*Math.max(1,Math.abs(_),Math.abs(J))&&Math.abs(T-ot)<=m.EPSILON*Math.max(1,Math.abs(T),Math.abs(ot))&&Math.abs(O-ut)<=m.EPSILON*Math.max(1,Math.abs(O),Math.abs(ut))&&Math.abs(U-lt)<=m.EPSILON*Math.max(1,Math.abs(U),Math.abs(lt))&&Math.abs(p-y)<=m.EPSILON*Math.max(1,Math.abs(p),Math.abs(y))},A.sub=A.mul=void 0;var m=function(p){if(p&&p.__esModule)return p;var y={};if(p!=null){for(var v in p)if(Object.prototype.hasOwnProperty.call(p,v)){var M=Bo&&Io?Io(p,v):{};M.get||M.set?Bo(y,v,M):y[v]=p[v]}}return y.default=p,y}(zA);A.mul=i,A.sub=u});Gt(hA);var gf=Ot(function(a,A){function i(v){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}function u(v,M,R){var k=M[0],_=M[1],T=M[2],O=M[3],U=M[4],G=M[5],X=M[6],W=M[7],Y=M[8],J=M[9],ot=M[10],ut=M[11],lt=M[12],wt=M[13],Qt=M[14];M=M[15];var zt=R[0],ne=R[1],pe=R[2],be=R[3];return v[0]=zt*k+ne*U+pe*Y+be*lt,v[1]=zt*_+ne*G+pe*J+be*wt,v[2]=zt*T+ne*X+pe*ot+be*Qt,v[3]=zt*O+ne*W+pe*ut+be*M,zt=R[4],ne=R[5],pe=R[6],be=R[7],v[4]=zt*k+ne*U+pe*Y+be*lt,v[5]=zt*_+ne*G+pe*J+be*wt,v[6]=zt*T+ne*X+pe*ot+be*Qt,v[7]=zt*O+ne*W+pe*ut+be*M,zt=R[8],ne=R[9],pe=R[10],be=R[11],v[8]=zt*k+ne*U+pe*Y+be*lt,v[9]=zt*_+ne*G+pe*J+be*wt,v[10]=zt*T+ne*X+pe*ot+be*Qt,v[11]=zt*O+ne*W+pe*ut+be*M,zt=R[12],ne=R[13],pe=R[14],be=R[15],v[12]=zt*k+ne*U+pe*Y+be*lt,v[13]=zt*_+ne*G+pe*J+be*wt,v[14]=zt*T+ne*X+pe*ot+be*Qt,v[15]=zt*O+ne*W+pe*ut+be*M,v}function m(v,M,R){var k=M[0],_=M[1],T=M[2],O=M[3],U=k+k,G=_+_,X=T+T;M=k*U;var W=k*G;k*=X;var Y=_*G;return _*=X,T*=X,U*=O,G*=O,O*=X,v[0]=1-(Y+T),v[1]=W+O,v[2]=k-G,v[3]=0,v[4]=W-O,v[5]=1-(M+T),v[6]=_+U,v[7]=0,v[8]=k+G,v[9]=_-U,v[10]=1-(M+Y),v[11]=0,v[12]=R[0],v[13]=R[1],v[14]=R[2],v[15]=1,v}function p(v,M,R){return v[0]=M[0]-R[0],v[1]=M[1]-R[1],v[2]=M[2]-R[2],v[3]=M[3]-R[3],v[4]=M[4]-R[4],v[5]=M[5]-R[5],v[6]=M[6]-R[6],v[7]=M[7]-R[7],v[8]=M[8]-R[8],v[9]=M[9]-R[9],v[10]=M[10]-R[10],v[11]=M[11]-R[11],v[12]=M[12]-R[12],v[13]=M[13]-R[13],v[14]=M[14]-R[14],v[15]=M[15]-R[15],v}Object.defineProperty(A,"__esModule",{value:!0}),A.create=function(){var v=new y.ARRAY_TYPE(16);return y.ARRAY_TYPE!=Float32Array&&(v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[11]=0,v[12]=0,v[13]=0,v[14]=0),v[0]=1,v[5]=1,v[10]=1,v[15]=1,v},A.clone=function(v){var M=new y.ARRAY_TYPE(16);return M[0]=v[0],M[1]=v[1],M[2]=v[2],M[3]=v[3],M[4]=v[4],M[5]=v[5],M[6]=v[6],M[7]=v[7],M[8]=v[8],M[9]=v[9],M[10]=v[10],M[11]=v[11],M[12]=v[12],M[13]=v[13],M[14]=v[14],M[15]=v[15],M},A.copy=function(v,M){return v[0]=M[0],v[1]=M[1],v[2]=M[2],v[3]=M[3],v[4]=M[4],v[5]=M[5],v[6]=M[6],v[7]=M[7],v[8]=M[8],v[9]=M[9],v[10]=M[10],v[11]=M[11],v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15],v},A.fromValues=function(v,M,R,k,_,T,O,U,G,X,W,Y,J,ot,ut,lt){var wt=new y.ARRAY_TYPE(16);return wt[0]=v,wt[1]=M,wt[2]=R,wt[3]=k,wt[4]=_,wt[5]=T,wt[6]=O,wt[7]=U,wt[8]=G,wt[9]=X,wt[10]=W,wt[11]=Y,wt[12]=J,wt[13]=ot,wt[14]=ut,wt[15]=lt,wt},A.set=function(v,M,R,k,_,T,O,U,G,X,W,Y,J,ot,ut,lt,wt){return v[0]=M,v[1]=R,v[2]=k,v[3]=_,v[4]=T,v[5]=O,v[6]=U,v[7]=G,v[8]=X,v[9]=W,v[10]=Y,v[11]=J,v[12]=ot,v[13]=ut,v[14]=lt,v[15]=wt,v},A.identity=i,A.transpose=function(v,M){if(v===M){var R=M[1],k=M[2],_=M[3],T=M[6],O=M[7],U=M[11];v[1]=M[4],v[2]=M[8],v[3]=M[12],v[4]=R,v[6]=M[9],v[7]=M[13],v[8]=k,v[9]=T,v[11]=M[14],v[12]=_,v[13]=O,v[14]=U}else v[0]=M[0],v[1]=M[4],v[2]=M[8],v[3]=M[12],v[4]=M[1],v[5]=M[5],v[6]=M[9],v[7]=M[13],v[8]=M[2],v[9]=M[6],v[10]=M[10],v[11]=M[14],v[12]=M[3],v[13]=M[7],v[14]=M[11],v[15]=M[15];return v},A.invert=function(v,M){var R=M[0],k=M[1],_=M[2],T=M[3],O=M[4],U=M[5],G=M[6],X=M[7],W=M[8],Y=M[9],J=M[10],ot=M[11],ut=M[12],lt=M[13],wt=M[14];M=M[15];var Qt=R*U-k*O,zt=R*G-_*O,ne=R*X-T*O,pe=k*G-_*U,be=k*X-T*U,Ie=_*X-T*G,hr=W*lt-Y*ut,Qr=W*wt-J*ut,Ce=W*M-ot*ut,Ze=Y*wt-J*lt,sn=Y*M-ot*lt,an=J*M-ot*wt,er=Qt*an-zt*sn+ne*Ze+pe*Ce-be*Qr+Ie*hr;return er?(er=1/er,v[0]=(U*an-G*sn+X*Ze)*er,v[1]=(_*sn-k*an-T*Ze)*er,v[2]=(lt*Ie-wt*be+M*pe)*er,v[3]=(J*be-Y*Ie-ot*pe)*er,v[4]=(G*Ce-O*an-X*Qr)*er,v[5]=(R*an-_*Ce+T*Qr)*er,v[6]=(wt*ne-ut*Ie-M*zt)*er,v[7]=(W*Ie-J*ne+ot*zt)*er,v[8]=(O*sn-U*Ce+X*hr)*er,v[9]=(k*Ce-R*sn-T*hr)*er,v[10]=(ut*be-lt*ne+M*Qt)*er,v[11]=(Y*ne-W*be-ot*Qt)*er,v[12]=(U*Qr-O*Ze-G*hr)*er,v[13]=(R*Ze-k*Qr+_*hr)*er,v[14]=(lt*zt-ut*pe-wt*Qt)*er,v[15]=(W*pe-Y*zt+J*Qt)*er,v):null},A.adjoint=function(v,M){var R=M[0],k=M[1],_=M[2],T=M[3],O=M[4],U=M[5],G=M[6],X=M[7],W=M[8],Y=M[9],J=M[10],ot=M[11],ut=M[12],lt=M[13],wt=M[14];return M=M[15],v[0]=U*(J*M-ot*wt)-Y*(G*M-X*wt)+lt*(G*ot-X*J),v[1]=-(k*(J*M-ot*wt)-Y*(_*M-T*wt)+lt*(_*ot-T*J)),v[2]=k*(G*M-X*wt)-U*(_*M-T*wt)+lt*(_*X-T*G),v[3]=-(k*(G*ot-X*J)-U*(_*ot-T*J)+Y*(_*X-T*G)),v[4]=-(O*(J*M-ot*wt)-W*(G*M-X*wt)+ut*(G*ot-X*J)),v[5]=R*(J*M-ot*wt)-W*(_*M-T*wt)+ut*(_*ot-T*J),v[6]=-(R*(G*M-X*wt)-O*(_*M-T*wt)+ut*(_*X-T*G)),v[7]=R*(G*ot-X*J)-O*(_*ot-T*J)+W*(_*X-T*G),v[8]=O*(Y*M-ot*lt)-W*(U*M-X*lt)+ut*(U*ot-X*Y),v[9]=-(R*(Y*M-ot*lt)-W*(k*M-T*lt)+ut*(k*ot-T*Y)),v[10]=R*(U*M-X*lt)-O*(k*M-T*lt)+ut*(k*X-T*U),v[11]=-(R*(U*ot-X*Y)-O*(k*ot-T*Y)+W*(k*X-T*U)),v[12]=-(O*(Y*wt-J*lt)-W*(U*wt-G*lt)+ut*(U*J-G*Y)),v[13]=R*(Y*wt-J*lt)-W*(k*wt-_*lt)+ut*(k*J-_*Y),v[14]=-(R*(U*wt-G*lt)-O*(k*wt-_*lt)+ut*(k*G-_*U)),v[15]=R*(U*J-G*Y)-O*(k*J-_*Y)+W*(k*G-_*U),v},A.determinant=function(v){var M=v[0],R=v[1],k=v[2],_=v[3],T=v[4],O=v[5],U=v[6],G=v[7],X=v[8],W=v[9],Y=v[10],J=v[11],ot=v[12],ut=v[13],lt=v[14];return v=v[15],(M*O-R*T)*(Y*v-J*lt)-(M*U-k*T)*(W*v-J*ut)+(M*G-_*T)*(W*lt-Y*ut)+(R*U-k*O)*(X*v-J*ot)-(R*G-_*O)*(X*lt-Y*ot)+(k*G-_*U)*(X*ut-W*ot)},A.multiply=u,A.translate=function(v,M,R){var k=R[0],_=R[1];if(R=R[2],M===v)v[12]=M[0]*k+M[4]*_+M[8]*R+M[12],v[13]=M[1]*k+M[5]*_+M[9]*R+M[13],v[14]=M[2]*k+M[6]*_+M[10]*R+M[14],v[15]=M[3]*k+M[7]*_+M[11]*R+M[15];else{var T=M[0],O=M[1],U=M[2],G=M[3],X=M[4],W=M[5],Y=M[6],J=M[7],ot=M[8],ut=M[9],lt=M[10],wt=M[11];v[0]=T,v[1]=O,v[2]=U,v[3]=G,v[4]=X,v[5]=W,v[6]=Y,v[7]=J,v[8]=ot,v[9]=ut,v[10]=lt,v[11]=wt,v[12]=T*k+X*_+ot*R+M[12],v[13]=O*k+W*_+ut*R+M[13],v[14]=U*k+Y*_+lt*R+M[14],v[15]=G*k+J*_+wt*R+M[15]}return v},A.scale=function(v,M,R){var k=R[0],_=R[1];return R=R[2],v[0]=M[0]*k,v[1]=M[1]*k,v[2]=M[2]*k,v[3]=M[3]*k,v[4]=M[4]*_,v[5]=M[5]*_,v[6]=M[6]*_,v[7]=M[7]*_,v[8]=M[8]*R,v[9]=M[9]*R,v[10]=M[10]*R,v[11]=M[11]*R,v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15],v},A.rotate=function(v,M,R,k){var _=k[0],T=k[1];k=k[2];var O=Math.sqrt(_*_+T*T+k*k);if(O<y.EPSILON)return null;O=1/O,_*=O,T*=O,k*=O;var U=Math.sin(R),G=Math.cos(R),X=1-G;R=M[0],O=M[1];var W=M[2],Y=M[3],J=M[4],ot=M[5],ut=M[6],lt=M[7],wt=M[8],Qt=M[9],zt=M[10],ne=M[11],pe=_*_*X+G,be=T*_*X+k*U,Ie=k*_*X-T*U,hr=_*T*X-k*U,Qr=T*T*X+G,Ce=k*T*X+_*U,Ze=_*k*X+T*U;return _=T*k*X-_*U,T=k*k*X+G,v[0]=R*pe+J*be+wt*Ie,v[1]=O*pe+ot*be+Qt*Ie,v[2]=W*pe+ut*be+zt*Ie,v[3]=Y*pe+lt*be+ne*Ie,v[4]=R*hr+J*Qr+wt*Ce,v[5]=O*hr+ot*Qr+Qt*Ce,v[6]=W*hr+ut*Qr+zt*Ce,v[7]=Y*hr+lt*Qr+ne*Ce,v[8]=R*Ze+J*_+wt*T,v[9]=O*Ze+ot*_+Qt*T,v[10]=W*Ze+ut*_+zt*T,v[11]=Y*Ze+lt*_+ne*T,M!==v&&(v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15]),v},A.rotateX=function(v,M,R){var k=Math.sin(R);R=Math.cos(R);var _=M[4],T=M[5],O=M[6],U=M[7],G=M[8],X=M[9],W=M[10],Y=M[11];return M!==v&&(v[0]=M[0],v[1]=M[1],v[2]=M[2],v[3]=M[3],v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15]),v[4]=_*R+G*k,v[5]=T*R+X*k,v[6]=O*R+W*k,v[7]=U*R+Y*k,v[8]=G*R-_*k,v[9]=X*R-T*k,v[10]=W*R-O*k,v[11]=Y*R-U*k,v},A.rotateY=function(v,M,R){var k=Math.sin(R);R=Math.cos(R);var _=M[0],T=M[1],O=M[2],U=M[3],G=M[8],X=M[9],W=M[10],Y=M[11];return M!==v&&(v[4]=M[4],v[5]=M[5],v[6]=M[6],v[7]=M[7],v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15]),v[0]=_*R-G*k,v[1]=T*R-X*k,v[2]=O*R-W*k,v[3]=U*R-Y*k,v[8]=_*k+G*R,v[9]=T*k+X*R,v[10]=O*k+W*R,v[11]=U*k+Y*R,v},A.rotateZ=function(v,M,R){var k=Math.sin(R);R=Math.cos(R);var _=M[0],T=M[1],O=M[2],U=M[3],G=M[4],X=M[5],W=M[6],Y=M[7];return M!==v&&(v[8]=M[8],v[9]=M[9],v[10]=M[10],v[11]=M[11],v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15]),v[0]=_*R+G*k,v[1]=T*R+X*k,v[2]=O*R+W*k,v[3]=U*R+Y*k,v[4]=G*R-_*k,v[5]=X*R-T*k,v[6]=W*R-O*k,v[7]=Y*R-U*k,v},A.fromTranslation=function(v,M){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=M[0],v[13]=M[1],v[14]=M[2],v[15]=1,v},A.fromScaling=function(v,M){return v[0]=M[0],v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=M[1],v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=M[2],v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},A.fromRotation=function(v,M,R){var k=R[0],_=R[1];R=R[2];var T=Math.sqrt(k*k+_*_+R*R);if(T<y.EPSILON)return null;T=1/T,k*=T,_*=T,R*=T,T=Math.sin(M),M=Math.cos(M);var O=1-M;return v[0]=k*k*O+M,v[1]=_*k*O+R*T,v[2]=R*k*O-_*T,v[3]=0,v[4]=k*_*O-R*T,v[5]=_*_*O+M,v[6]=R*_*O+k*T,v[7]=0,v[8]=k*R*O+_*T,v[9]=_*R*O-k*T,v[10]=R*R*O+M,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},A.fromXRotation=function(v,M){var R=Math.sin(M);return M=Math.cos(M),v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=M,v[6]=R,v[7]=0,v[8]=0,v[9]=-R,v[10]=M,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},A.fromYRotation=function(v,M){var R=Math.sin(M);return M=Math.cos(M),v[0]=M,v[1]=0,v[2]=-R,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=R,v[9]=0,v[10]=M,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},A.fromZRotation=function(v,M){var R=Math.sin(M);return M=Math.cos(M),v[0]=M,v[1]=R,v[2]=0,v[3]=0,v[4]=-R,v[5]=M,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},A.fromRotationTranslation=m,A.fromQuat2=function(v,M){var R=new y.ARRAY_TYPE(3),k=-M[0],_=-M[1],T=-M[2],O=M[3],U=M[4],G=M[5],X=M[6],W=M[7],Y=k*k+_*_+T*T+O*O;return 0<Y?(R[0]=2*(U*O+W*k+G*T-X*_)/Y,R[1]=2*(G*O+W*_+X*k-U*T)/Y,R[2]=2*(X*O+W*T+U*_-G*k)/Y):(R[0]=2*(U*O+W*k+G*T-X*_),R[1]=2*(G*O+W*_+X*k-U*T),R[2]=2*(X*O+W*T+U*_-G*k)),m(v,M,R),v},A.getTranslation=function(v,M){return v[0]=M[12],v[1]=M[13],v[2]=M[14],v},A.getScaling=function(v,M){var R=M[0],k=M[1],_=M[2],T=M[4],O=M[5],U=M[6],G=M[8],X=M[9];return M=M[10],v[0]=Math.sqrt(R*R+k*k+_*_),v[1]=Math.sqrt(T*T+O*O+U*U),v[2]=Math.sqrt(G*G+X*X+M*M),v},A.getRotation=function(v,M){var R=M[0]+M[5]+M[10];return 0<R?(R=2*Math.sqrt(R+1),v[3]=.25*R,v[0]=(M[6]-M[9])/R,v[1]=(M[8]-M[2])/R,v[2]=(M[1]-M[4])/R):M[0]>M[5]&&M[0]>M[10]?(R=2*Math.sqrt(1+M[0]-M[5]-M[10]),v[3]=(M[6]-M[9])/R,v[0]=.25*R,v[1]=(M[1]+M[4])/R,v[2]=(M[8]+M[2])/R):M[5]>M[10]?(R=2*Math.sqrt(1+M[5]-M[0]-M[10]),v[3]=(M[8]-M[2])/R,v[0]=(M[1]+M[4])/R,v[1]=.25*R,v[2]=(M[6]+M[9])/R):(R=2*Math.sqrt(1+M[10]-M[0]-M[5]),v[3]=(M[1]-M[4])/R,v[0]=(M[8]+M[2])/R,v[1]=(M[6]+M[9])/R,v[2]=.25*R),v},A.fromRotationTranslationScale=function(v,M,R,k){var _=M[0],T=M[1],O=M[2],U=M[3],G=_+_,X=T+T,W=O+O;M=_*G;var Y=_*X;_*=W;var J=T*X;T*=W,O*=W,G*=U,X*=U,U*=W,W=k[0];var ot=k[1];return k=k[2],v[0]=(1-(J+O))*W,v[1]=(Y+U)*W,v[2]=(_-X)*W,v[3]=0,v[4]=(Y-U)*ot,v[5]=(1-(M+O))*ot,v[6]=(T+G)*ot,v[7]=0,v[8]=(_+X)*k,v[9]=(T-G)*k,v[10]=(1-(M+J))*k,v[11]=0,v[12]=R[0],v[13]=R[1],v[14]=R[2],v[15]=1,v},A.fromRotationTranslationScaleOrigin=function(v,M,R,k,_){var T=M[0],O=M[1],U=M[2],G=M[3],X=T+T,W=O+O,Y=U+U;M=T*X;var J=T*W,ot=T*Y;T=O*W,O*=Y;var ut=U*Y;U=G*X,W*=G;var lt=G*Y,wt=k[0],Qt=k[1];Y=k[2],k=_[0],G=_[1],_=_[2],X=(1-(T+ut))*wt;var zt=(J+lt)*wt;return wt*=ot-W,J=(J-lt)*Qt,ut=(1-(M+ut))*Qt,Qt*=O+U,ot=(ot+W)*Y,O=(O-U)*Y,M=(1-(M+T))*Y,v[0]=X,v[1]=zt,v[2]=wt,v[3]=0,v[4]=J,v[5]=ut,v[6]=Qt,v[7]=0,v[8]=ot,v[9]=O,v[10]=M,v[11]=0,v[12]=R[0]+k-(X*k+J*G+ot*_),v[13]=R[1]+G-(zt*k+ut*G+O*_),v[14]=R[2]+_-(wt*k+Qt*G+M*_),v[15]=1,v},A.fromQuat=function(v,M){var R=M[0],k=M[1],_=M[2];M=M[3];var T=R+R,O=k+k,U=_+_;R*=T;var G=k*T;k*=O;var X=_*T,W=_*O;return _*=U,T*=M,O*=M,M*=U,v[0]=1-k-_,v[1]=G+M,v[2]=X-O,v[3]=0,v[4]=G-M,v[5]=1-R-_,v[6]=W+T,v[7]=0,v[8]=X+O,v[9]=W-T,v[10]=1-R-k,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},A.frustum=function(v,M,R,k,_,T,O){var U=1/(R-M),G=1/(_-k),X=1/(T-O);return v[0]=2*T*U,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=2*T*G,v[6]=0,v[7]=0,v[8]=(R+M)*U,v[9]=(_+k)*G,v[10]=(O+T)*X,v[11]=-1,v[12]=0,v[13]=0,v[14]=O*T*2*X,v[15]=0,v},A.perspective=function(v,M,R,k,_){return M=1/Math.tan(M/2),v[0]=M/R,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=M,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[11]=-1,v[12]=0,v[13]=0,v[15]=0,_!=null&&_!==Infinity?(R=1/(k-_),v[10]=(_+k)*R,v[14]=2*_*k*R):(v[10]=-1,v[14]=-2*k),v},A.perspectiveFromFieldOfView=function(v,M,R,k){var _=Math.tan(M.upDegrees*Math.PI/180),T=Math.tan(M.downDegrees*Math.PI/180),O=Math.tan(M.leftDegrees*Math.PI/180);M=Math.tan(M.rightDegrees*Math.PI/180);var U=2/(O+M),G=2/(_+T);return v[0]=U,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=G,v[6]=0,v[7]=0,v[8]=-((O-M)*U*.5),v[9]=(_-T)*G*.5,v[10]=k/(R-k),v[11]=-1,v[12]=0,v[13]=0,v[14]=k*R/(R-k),v[15]=0,v},A.ortho=function(v,M,R,k,_,T,O){var U=1/(M-R),G=1/(k-_),X=1/(T-O);return v[0]=-2*U,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=-2*G,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=2*X,v[11]=0,v[12]=(M+R)*U,v[13]=(_+k)*G,v[14]=(O+T)*X,v[15]=1,v},A.lookAt=function(v,M,R,k){var _=M[0],T=M[1];M=M[2];var O=k[0],U=k[1],G=k[2],X=R[0];k=R[1];var W=R[2];if(Math.abs(_-X)<y.EPSILON&&Math.abs(T-k)<y.EPSILON&&Math.abs(M-W)<y.EPSILON)return i(v);R=_-X,k=T-k,X=M-W;var Y=1/Math.sqrt(R*R+k*k+X*X);R*=Y,k*=Y,X*=Y,W=U*X-G*k,G=G*R-O*X,O=O*k-U*R,(Y=Math.sqrt(W*W+G*G+O*O))?(Y=1/Y,W*=Y,G*=Y,O*=Y):O=G=W=0,U=k*O-X*G;var J=X*W-R*O,ot=R*G-k*W;return(Y=Math.sqrt(U*U+J*J+ot*ot))?(Y=1/Y,U*=Y,J*=Y,ot*=Y):ot=J=U=0,v[0]=W,v[1]=U,v[2]=R,v[3]=0,v[4]=G,v[5]=J,v[6]=k,v[7]=0,v[8]=O,v[9]=ot,v[10]=X,v[11]=0,v[12]=-(W*_+G*T+O*M),v[13]=-(U*_+J*T+ot*M),v[14]=-(R*_+k*T+X*M),v[15]=1,v},A.targetTo=function(v,M,R,k){var _=M[0],T=M[1];M=M[2];var O=k[0],U=k[1],G=k[2];k=_-R[0];var X=T-R[1];R=M-R[2];var W=k*k+X*X+R*R;0<W&&(W=1/Math.sqrt(W),k*=W,X*=W,R*=W);var Y=U*R-G*X;return G=G*k-O*R,O=O*X-U*k,W=Y*Y+G*G+O*O,0<W&&(W=1/Math.sqrt(W),Y*=W,G*=W,O*=W),v[0]=Y,v[1]=G,v[2]=O,v[3]=0,v[4]=X*O-R*G,v[5]=R*Y-k*O,v[6]=k*G-X*Y,v[7]=0,v[8]=k,v[9]=X,v[10]=R,v[11]=0,v[12]=_,v[13]=T,v[14]=M,v[15]=1,v},A.str=function(v){return"mat4("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+", "+v[4]+", "+v[5]+", "+v[6]+", "+v[7]+", "+v[8]+", "+v[9]+", "+v[10]+", "+v[11]+", "+v[12]+", "+v[13]+", "+v[14]+", "+v[15]+")"},A.frob=function(v){return Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)+Math.pow(v[2],2)+Math.pow(v[3],2)+Math.pow(v[4],2)+Math.pow(v[5],2)+Math.pow(v[6],2)+Math.pow(v[7],2)+Math.pow(v[8],2)+Math.pow(v[9],2)+Math.pow(v[10],2)+Math.pow(v[11],2)+Math.pow(v[12],2)+Math.pow(v[13],2)+Math.pow(v[14],2)+Math.pow(v[15],2))},A.add=function(v,M,R){return v[0]=M[0]+R[0],v[1]=M[1]+R[1],v[2]=M[2]+R[2],v[3]=M[3]+R[3],v[4]=M[4]+R[4],v[5]=M[5]+R[5],v[6]=M[6]+R[6],v[7]=M[7]+R[7],v[8]=M[8]+R[8],v[9]=M[9]+R[9],v[10]=M[10]+R[10],v[11]=M[11]+R[11],v[12]=M[12]+R[12],v[13]=M[13]+R[13],v[14]=M[14]+R[14],v[15]=M[15]+R[15],v},A.subtract=p,A.multiplyScalar=function(v,M,R){return v[0]=M[0]*R,v[1]=M[1]*R,v[2]=M[2]*R,v[3]=M[3]*R,v[4]=M[4]*R,v[5]=M[5]*R,v[6]=M[6]*R,v[7]=M[7]*R,v[8]=M[8]*R,v[9]=M[9]*R,v[10]=M[10]*R,v[11]=M[11]*R,v[12]=M[12]*R,v[13]=M[13]*R,v[14]=M[14]*R,v[15]=M[15]*R,v},A.multiplyScalarAndAdd=function(v,M,R,k){return v[0]=M[0]+R[0]*k,v[1]=M[1]+R[1]*k,v[2]=M[2]+R[2]*k,v[3]=M[3]+R[3]*k,v[4]=M[4]+R[4]*k,v[5]=M[5]+R[5]*k,v[6]=M[6]+R[6]*k,v[7]=M[7]+R[7]*k,v[8]=M[8]+R[8]*k,v[9]=M[9]+R[9]*k,v[10]=M[10]+R[10]*k,v[11]=M[11]+R[11]*k,v[12]=M[12]+R[12]*k,v[13]=M[13]+R[13]*k,v[14]=M[14]+R[14]*k,v[15]=M[15]+R[15]*k,v},A.exactEquals=function(v,M){return v[0]===M[0]&&v[1]===M[1]&&v[2]===M[2]&&v[3]===M[3]&&v[4]===M[4]&&v[5]===M[5]&&v[6]===M[6]&&v[7]===M[7]&&v[8]===M[8]&&v[9]===M[9]&&v[10]===M[10]&&v[11]===M[11]&&v[12]===M[12]&&v[13]===M[13]&&v[14]===M[14]&&v[15]===M[15]},A.equals=function(v,M){var R=v[0],k=v[1],_=v[2],T=v[3],O=v[4],U=v[5],G=v[6],X=v[7],W=v[8],Y=v[9],J=v[10],ot=v[11],ut=v[12],lt=v[13],wt=v[14];v=v[15];var Qt=M[0],zt=M[1],ne=M[2],pe=M[3],be=M[4],Ie=M[5],hr=M[6],Qr=M[7],Ce=M[8],Ze=M[9],sn=M[10],an=M[11],er=M[12],Ms=M[13],so=M[14];return M=M[15],Math.abs(R-Qt)<=y.EPSILON*Math.max(1,Math.abs(R),Math.abs(Qt))&&Math.abs(k-zt)<=y.EPSILON*Math.max(1,Math.abs(k),Math.abs(zt))&&Math.abs(_-ne)<=y.EPSILON*Math.max(1,Math.abs(_),Math.abs(ne))&&Math.abs(T-pe)<=y.EPSILON*Math.max(1,Math.abs(T),Math.abs(pe))&&Math.abs(O-be)<=y.EPSILON*Math.max(1,Math.abs(O),Math.abs(be))&&Math.abs(U-Ie)<=y.EPSILON*Math.max(1,Math.abs(U),Math.abs(Ie))&&Math.abs(G-hr)<=y.EPSILON*Math.max(1,Math.abs(G),Math.abs(hr))&&Math.abs(X-Qr)<=y.EPSILON*Math.max(1,Math.abs(X),Math.abs(Qr))&&Math.abs(W-Ce)<=y.EPSILON*Math.max(1,Math.abs(W),Math.abs(Ce))&&Math.abs(Y-Ze)<=y.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Ze))&&Math.abs(J-sn)<=y.EPSILON*Math.max(1,Math.abs(J),Math.abs(sn))&&Math.abs(ot-an)<=y.EPSILON*Math.max(1,Math.abs(ot),Math.abs(an))&&Math.abs(ut-er)<=y.EPSILON*Math.max(1,Math.abs(ut),Math.abs(er))&&Math.abs(lt-Ms)<=y.EPSILON*Math.max(1,Math.abs(lt),Math.abs(Ms))&&Math.abs(wt-so)<=y.EPSILON*Math.max(1,Math.abs(wt),Math.abs(so))&&Math.abs(v-M)<=y.EPSILON*Math.max(1,Math.abs(v),Math.abs(M))},A.sub=A.mul=void 0;var y=function(v){if(v&&v.__esModule)return v;var M={};if(v!=null){for(var R in v)if(Object.prototype.hasOwnProperty.call(v,R)){var k=Bo&&Io?Io(v,R):{};k.get||k.set?Bo(M,R,k):M[R]=v[R]}}return M.default=v,M}(zA);A.mul=u,A.sub=p});Gt(gf);var mf=Ot(function(a,A){function i(){var U=new O.ARRAY_TYPE(3);return O.ARRAY_TYPE!=Float32Array&&(U[0]=0,U[1]=0,U[2]=0),U}function u(U){var G=U[0],X=U[1];return U=U[2],Math.sqrt(G*G+X*X+U*U)}function m(U,G,X){var W=new O.ARRAY_TYPE(3);return W[0]=U,W[1]=G,W[2]=X,W}function p(U,G,X){return U[0]=G[0]-X[0],U[1]=G[1]-X[1],U[2]=G[2]-X[2],U}function y(U,G,X){return U[0]=G[0]*X[0],U[1]=G[1]*X[1],U[2]=G[2]*X[2],U}function v(U,G,X){return U[0]=G[0]/X[0],U[1]=G[1]/X[1],U[2]=G[2]/X[2],U}function M(U,G){var X=G[0]-U[0],W=G[1]-U[1];return U=G[2]-U[2],Math.sqrt(X*X+W*W+U*U)}function R(U,G){var X=G[0]-U[0],W=G[1]-U[1];return U=G[2]-U[2],X*X+W*W+U*U}function k(U){var G=U[0],X=U[1];return U=U[2],G*G+X*X+U*U}function _(U,G){var X=G[0],W=G[1],Y=G[2];return X=X*X+W*W+Y*Y,0<X&&(X=1/Math.sqrt(X)),U[0]=G[0]*X,U[1]=G[1]*X,U[2]=G[2]*X,U}function T(U,G){return U[0]*G[0]+U[1]*G[1]+U[2]*G[2]}Object.defineProperty(A,"__esModule",{value:!0}),A.create=i,A.clone=function(U){var G=new O.ARRAY_TYPE(3);return G[0]=U[0],G[1]=U[1],G[2]=U[2],G},A.length=u,A.fromValues=m,A.copy=function(U,G){return U[0]=G[0],U[1]=G[1],U[2]=G[2],U},A.set=function(U,G,X,W){return U[0]=G,U[1]=X,U[2]=W,U},A.add=function(U,G,X){return U[0]=G[0]+X[0],U[1]=G[1]+X[1],U[2]=G[2]+X[2],U},A.subtract=p,A.multiply=y,A.divide=v,A.ceil=function(U,G){return U[0]=Math.ceil(G[0]),U[1]=Math.ceil(G[1]),U[2]=Math.ceil(G[2]),U},A.floor=function(U,G){return U[0]=Math.floor(G[0]),U[1]=Math.floor(G[1]),U[2]=Math.floor(G[2]),U},A.min=function(U,G,X){return U[0]=Math.min(G[0],X[0]),U[1]=Math.min(G[1],X[1]),U[2]=Math.min(G[2],X[2]),U},A.max=function(U,G,X){return U[0]=Math.max(G[0],X[0]),U[1]=Math.max(G[1],X[1]),U[2]=Math.max(G[2],X[2]),U},A.round=function(U,G){return U[0]=Math.round(G[0]),U[1]=Math.round(G[1]),U[2]=Math.round(G[2]),U},A.scale=function(U,G,X){return U[0]=G[0]*X,U[1]=G[1]*X,U[2]=G[2]*X,U},A.scaleAndAdd=function(U,G,X,W){return U[0]=G[0]+X[0]*W,U[1]=G[1]+X[1]*W,U[2]=G[2]+X[2]*W,U},A.distance=M,A.squaredDistance=R,A.squaredLength=k,A.negate=function(U,G){return U[0]=-G[0],U[1]=-G[1],U[2]=-G[2],U},A.inverse=function(U,G){return U[0]=1/G[0],U[1]=1/G[1],U[2]=1/G[2],U},A.normalize=_,A.dot=T,A.cross=function(U,G,X){var W=G[0],Y=G[1];G=G[2];var J=X[0],ot=X[1];return X=X[2],U[0]=Y*X-G*ot,U[1]=G*J-W*X,U[2]=W*ot-Y*J,U},A.lerp=function(U,G,X,W){var Y=G[0],J=G[1];return G=G[2],U[0]=Y+W*(X[0]-Y),U[1]=J+W*(X[1]-J),U[2]=G+W*(X[2]-G),U},A.hermite=function(U,G,X,W,Y,J){var ot=J*J,ut=ot*(2*J-3)+1,lt=ot*(J-2)+J,wt=ot*(J-1);return J=ot*(3-2*J),U[0]=G[0]*ut+X[0]*lt+W[0]*wt+Y[0]*J,U[1]=G[1]*ut+X[1]*lt+W[1]*wt+Y[1]*J,U[2]=G[2]*ut+X[2]*lt+W[2]*wt+Y[2]*J,U},A.bezier=function(U,G,X,W,Y,J){var ot=1-J,ut=ot*ot,lt=J*J,wt=ut*ot;return ut*=3*J,ot*=3*lt,J*=lt,U[0]=G[0]*wt+X[0]*ut+W[0]*ot+Y[0]*J,U[1]=G[1]*wt+X[1]*ut+W[1]*ot+Y[1]*J,U[2]=G[2]*wt+X[2]*ut+W[2]*ot+Y[2]*J,U},A.random=function(U,G){G=G||1;var X=2*O.RANDOM()*Math.PI,W=2*O.RANDOM()-1,Y=Math.sqrt(1-W*W)*G;return U[0]=Math.cos(X)*Y,U[1]=Math.sin(X)*Y,U[2]=W*G,U},A.transformMat4=function(U,G,X){var W=G[0],Y=G[1];G=G[2];var J=X[3]*W+X[7]*Y+X[11]*G+X[15];return J=J||1,U[0]=(X[0]*W+X[4]*Y+X[8]*G+X[12])/J,U[1]=(X[1]*W+X[5]*Y+X[9]*G+X[13])/J,U[2]=(X[2]*W+X[6]*Y+X[10]*G+X[14])/J,U},A.transformMat3=function(U,G,X){var W=G[0],Y=G[1];return G=G[2],U[0]=W*X[0]+Y*X[3]+G*X[6],U[1]=W*X[1]+Y*X[4]+G*X[7],U[2]=W*X[2]+Y*X[5]+G*X[8],U},A.transformQuat=function(U,G,X){var W=X[0],Y=X[1],J=X[2],ot=G[0],ut=G[1];G=G[2];var lt=Y*G-J*ut,wt=J*ot-W*G,Qt=W*ut-Y*ot;return X=2*X[3],U[0]=ot+lt*X+2*(Y*Qt-J*wt),U[1]=ut+wt*X+2*(J*lt-W*Qt),U[2]=G+Qt*X+2*(W*wt-Y*lt),U},A.rotateX=function(U,G,X,W){var Y=[],J=[];return Y[0]=G[0]-X[0],Y[1]=G[1]-X[1],Y[2]=G[2]-X[2],J[0]=Y[0],J[1]=Y[1]*Math.cos(W)-Y[2]*Math.sin(W),J[2]=Y[1]*Math.sin(W)+Y[2]*Math.cos(W),U[0]=J[0]+X[0],U[1]=J[1]+X[1],U[2]=J[2]+X[2],U},A.rotateY=function(U,G,X,W){var Y=[],J=[];return Y[0]=G[0]-X[0],Y[1]=G[1]-X[1],Y[2]=G[2]-X[2],J[0]=Y[2]*Math.sin(W)+Y[0]*Math.cos(W),J[1]=Y[1],J[2]=Y[2]*Math.cos(W)-Y[0]*Math.sin(W),U[0]=J[0]+X[0],U[1]=J[1]+X[1],U[2]=J[2]+X[2],U},A.rotateZ=function(U,G,X,W){var Y=[],J=[];return Y[0]=G[0]-X[0],Y[1]=G[1]-X[1],Y[2]=G[2]-X[2],J[0]=Y[0]*Math.cos(W)-Y[1]*Math.sin(W),J[1]=Y[0]*Math.sin(W)+Y[1]*Math.cos(W),J[2]=Y[2],U[0]=J[0]+X[0],U[1]=J[1]+X[1],U[2]=J[2]+X[2],U},A.angle=function(U,G){return U=m(U[0],U[1],U[2]),G=m(G[0],G[1],G[2]),_(U,U),_(G,G),G=T(U,G),1<G?0:-1>G?Math.PI:Math.acos(G)},A.zero=function(U){return U[0]=0,U[1]=0,U[2]=0,U},A.str=function(U){return"vec3("+U[0]+", "+U[1]+", "+U[2]+")"},A.exactEquals=function(U,G){return U[0]===G[0]&&U[1]===G[1]&&U[2]===G[2]},A.equals=function(U,G){var X=U[0],W=U[1];U=U[2];var Y=G[0],J=G[1];return G=G[2],Math.abs(X-Y)<=O.EPSILON*Math.max(1,Math.abs(X),Math.abs(Y))&&Math.abs(W-J)<=O.EPSILON*Math.max(1,Math.abs(W),Math.abs(J))&&Math.abs(U-G)<=O.EPSILON*Math.max(1,Math.abs(U),Math.abs(G))},A.forEach=A.sqrLen=A.len=A.sqrDist=A.dist=A.div=A.mul=A.sub=void 0;var O=function(U){if(U&&U.__esModule)return U;var G={};if(U!=null){for(var X in U)if(Object.prototype.hasOwnProperty.call(U,X)){var W=Bo&&Io?Io(U,X):{};W.get||W.set?Bo(G,X,W):G[X]=U[X]}}return G.default=U,G}(zA);A.sub=p,A.mul=y,A.div=v,A.dist=M,A.sqrDist=R,A.len=u,A.sqrLen=k,a=function(){var U=i();return function(G,X,W,Y,J,ot){for(X||(X=3),W||(W=0),Y=Y?Math.min(Y*X+W,G.length):G.length;W<Y;W+=X)U[0]=G[W],U[1]=G[W+1],U[2]=G[W+2],J(U,U,ot),G[W]=U[0],G[W+1]=U[1],G[W+2]=U[2];return G}}(),A.forEach=a});Gt(mf);var ch=Ot(function(a,A){function i(){var _=new k.ARRAY_TYPE(4);return k.ARRAY_TYPE!=Float32Array&&(_[0]=0,_[1]=0,_[2]=0,_[3]=0),_}function u(_,T,O){return _[0]=T[0]-O[0],_[1]=T[1]-O[1],_[2]=T[2]-O[2],_[3]=T[3]-O[3],_}function m(_,T,O){return _[0]=T[0]*O[0],_[1]=T[1]*O[1],_[2]=T[2]*O[2],_[3]=T[3]*O[3],_}function p(_,T,O){return _[0]=T[0]/O[0],_[1]=T[1]/O[1],_[2]=T[2]/O[2],_[3]=T[3]/O[3],_}function y(_,T){var O=T[0]-_[0],U=T[1]-_[1],G=T[2]-_[2];return _=T[3]-_[3],Math.sqrt(O*O+U*U+G*G+_*_)}function v(_,T){var O=T[0]-_[0],U=T[1]-_[1],G=T[2]-_[2];return _=T[3]-_[3],O*O+U*U+G*G+_*_}function M(_){var T=_[0],O=_[1],U=_[2];return _=_[3],Math.sqrt(T*T+O*O+U*U+_*_)}function R(_){var T=_[0],O=_[1],U=_[2];return _=_[3],T*T+O*O+U*U+_*_}Object.defineProperty(A,"__esModule",{value:!0}),A.create=i,A.clone=function(_){var T=new k.ARRAY_TYPE(4);return T[0]=_[0],T[1]=_[1],T[2]=_[2],T[3]=_[3],T},A.fromValues=function(_,T,O,U){var G=new k.ARRAY_TYPE(4);return G[0]=_,G[1]=T,G[2]=O,G[3]=U,G},A.copy=function(_,T){return _[0]=T[0],_[1]=T[1],_[2]=T[2],_[3]=T[3],_},A.set=function(_,T,O,U,G){return _[0]=T,_[1]=O,_[2]=U,_[3]=G,_},A.add=function(_,T,O){return _[0]=T[0]+O[0],_[1]=T[1]+O[1],_[2]=T[2]+O[2],_[3]=T[3]+O[3],_},A.subtract=u,A.multiply=m,A.divide=p,A.ceil=function(_,T){return _[0]=Math.ceil(T[0]),_[1]=Math.ceil(T[1]),_[2]=Math.ceil(T[2]),_[3]=Math.ceil(T[3]),_},A.floor=function(_,T){return _[0]=Math.floor(T[0]),_[1]=Math.floor(T[1]),_[2]=Math.floor(T[2]),_[3]=Math.floor(T[3]),_},A.min=function(_,T,O){return _[0]=Math.min(T[0],O[0]),_[1]=Math.min(T[1],O[1]),_[2]=Math.min(T[2],O[2]),_[3]=Math.min(T[3],O[3]),_},A.max=function(_,T,O){return _[0]=Math.max(T[0],O[0]),_[1]=Math.max(T[1],O[1]),_[2]=Math.max(T[2],O[2]),_[3]=Math.max(T[3],O[3]),_},A.round=function(_,T){return _[0]=Math.round(T[0]),_[1]=Math.round(T[1]),_[2]=Math.round(T[2]),_[3]=Math.round(T[3]),_},A.scale=function(_,T,O){return _[0]=T[0]*O,_[1]=T[1]*O,_[2]=T[2]*O,_[3]=T[3]*O,_},A.scaleAndAdd=function(_,T,O,U){return _[0]=T[0]+O[0]*U,_[1]=T[1]+O[1]*U,_[2]=T[2]+O[2]*U,_[3]=T[3]+O[3]*U,_},A.distance=y,A.squaredDistance=v,A.length=M,A.squaredLength=R,A.negate=function(_,T){return _[0]=-T[0],_[1]=-T[1],_[2]=-T[2],_[3]=-T[3],_},A.inverse=function(_,T){return _[0]=1/T[0],_[1]=1/T[1],_[2]=1/T[2],_[3]=1/T[3],_},A.normalize=function(_,T){var O=T[0],U=T[1],G=T[2];T=T[3];var X=O*O+U*U+G*G+T*T;return 0<X&&(X=1/Math.sqrt(X)),_[0]=O*X,_[1]=U*X,_[2]=G*X,_[3]=T*X,_},A.dot=function(_,T){return _[0]*T[0]+_[1]*T[1]+_[2]*T[2]+_[3]*T[3]},A.cross=function(_,T,O,U){var G=O[0]*U[1]-O[1]*U[0],X=O[0]*U[2]-O[2]*U[0],W=O[0]*U[3]-O[3]*U[0],Y=O[1]*U[2]-O[2]*U[1],J=O[1]*U[3]-O[3]*U[1];O=O[2]*U[3]-O[3]*U[2],U=T[0];var ot=T[1],ut=T[2];return T=T[3],_[0]=ot*O-ut*J+T*Y,_[1]=-(U*O)+ut*W-T*X,_[2]=U*J-ot*W+T*G,_[3]=-(U*Y)+ot*X-ut*G,_},A.lerp=function(_,T,O,U){var G=T[0],X=T[1],W=T[2];return T=T[3],_[0]=G+U*(O[0]-G),_[1]=X+U*(O[1]-X),_[2]=W+U*(O[2]-W),_[3]=T+U*(O[3]-T),_},A.random=function(_,T){T=T||1;do var O=2*k.RANDOM()-1,U=2*k.RANDOM()-1,G=O*O+U*U;while(1<=G);do var X=2*k.RANDOM()-1,W=2*k.RANDOM()-1,Y=X*X+W*W;while(1<=Y);return G=Math.sqrt((1-G)/Y),_[0]=T*O,_[1]=T*U,_[2]=T*X*G,_[3]=T*W*G,_},A.transformMat4=function(_,T,O){var U=T[0],G=T[1],X=T[2];return T=T[3],_[0]=O[0]*U+O[4]*G+O[8]*X+O[12]*T,_[1]=O[1]*U+O[5]*G+O[9]*X+O[13]*T,_[2]=O[2]*U+O[6]*G+O[10]*X+O[14]*T,_[3]=O[3]*U+O[7]*G+O[11]*X+O[15]*T,_},A.transformQuat=function(_,T,O){var U=T[0],G=T[1],X=T[2],W=O[0],Y=O[1],J=O[2];O=O[3];var ot=O*U+Y*X-J*G,ut=O*G+J*U-W*X,lt=O*X+W*G-Y*U;return U=-W*U-Y*G-J*X,_[0]=ot*O+U*-W+ut*-J-lt*-Y,_[1]=ut*O+U*-Y+lt*-W-ot*-J,_[2]=lt*O+U*-J+ot*-Y-ut*-W,_[3]=T[3],_},A.zero=function(_){return _[0]=0,_[1]=0,_[2]=0,_[3]=0,_},A.str=function(_){return"vec4("+_[0]+", "+_[1]+", "+_[2]+", "+_[3]+")"},A.exactEquals=function(_,T){return _[0]===T[0]&&_[1]===T[1]&&_[2]===T[2]&&_[3]===T[3]},A.equals=function(_,T){var O=_[0],U=_[1],G=_[2];_=_[3];var X=T[0],W=T[1],Y=T[2];return T=T[3],Math.abs(O-X)<=k.EPSILON*Math.max(1,Math.abs(O),Math.abs(X))&&Math.abs(U-W)<=k.EPSILON*Math.max(1,Math.abs(U),Math.abs(W))&&Math.abs(G-Y)<=k.EPSILON*Math.max(1,Math.abs(G),Math.abs(Y))&&Math.abs(_-T)<=k.EPSILON*Math.max(1,Math.abs(_),Math.abs(T))},A.forEach=A.sqrLen=A.len=A.sqrDist=A.dist=A.div=A.mul=A.sub=void 0;var k=function(_){if(_&&_.__esModule)return _;var T={};if(_!=null){for(var O in _)if(Object.prototype.hasOwnProperty.call(_,O)){var U=Bo&&Io?Io(_,O):{};U.get||U.set?Bo(T,O,U):T[O]=_[O]}}return T.default=_,T}(zA);A.sub=u,A.mul=m,A.div=p,A.dist=y,A.sqrDist=v,A.len=M,A.sqrLen=R,a=function(){var _=i();return function(T,O,U,G,X,W){for(O||(O=4),U||(U=0),G=G?Math.min(G*O+U,T.length):T.length;U<G;U+=O)_[0]=T[U],_[1]=T[U+1],_[2]=T[U+2],_[3]=T[U+3],X(_,_,W),T[U]=_[0],T[U+1]=_[1],T[U+2]=_[2],T[U+3]=_[3];return T}}(),A.forEach=a});Gt(ch);var pc=Ot(function(a,A){function i(O){if(O&&O.__esModule)return O;var U={};if(O!=null){for(var G in O)if(Object.prototype.hasOwnProperty.call(O,G)){var X=Bo&&Io?Io(O,G):{};X.get||X.set?Bo(U,G,X):U[G]=O[G]}}return U.default=O,U}function u(){var O=new M.ARRAY_TYPE(4);return M.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0,O[2]=0),O[3]=1,O}function m(O,U,G){G*=.5;var X=Math.sin(G);return O[0]=X*U[0],O[1]=X*U[1],O[2]=X*U[2],O[3]=Math.cos(G),O}function p(O,U,G){var X=U[0],W=U[1],Y=U[2];U=U[3];var J=G[0],ot=G[1],ut=G[2];return G=G[3],O[0]=X*G+U*J+W*ut-Y*ot,O[1]=W*G+U*ot+Y*J-X*ut,O[2]=Y*G+U*ut+X*ot-W*J,O[3]=U*G-X*J-W*ot-Y*ut,O}function y(O,U,G,X){var W=U[0],Y=U[1],J=U[2];U=U[3];var ot=G[0],ut=G[1],lt=G[2];G=G[3];var wt=W*ot+Y*ut+J*lt+U*G;if(0>wt&&(wt=-wt,ot=-ot,ut=-ut,lt=-lt,G=-G),1-wt>M.EPSILON){var Qt=Math.acos(wt),zt=Math.sin(Qt);wt=Math.sin((1-X)*Qt)/zt,X=Math.sin(X*Qt)/zt}else wt=1-X;return O[0]=wt*W+X*ot,O[1]=wt*Y+X*ut,O[2]=wt*J+X*lt,O[3]=wt*U+X*G,O}function v(O,U){var G=U[0]+U[4]+U[8];if(0<G)G=Math.sqrt(G+1),O[3]=.5*G,G=.5/G,O[0]=(U[5]-U[7])*G,O[1]=(U[6]-U[2])*G,O[2]=(U[1]-U[3])*G;else{var X=0;U[4]>U[0]&&(X=1),U[8]>U[3*X+X]&&(X=2);var W=(X+1)%3,Y=(X+2)%3;G=Math.sqrt(U[3*X+X]-U[3*W+W]-U[3*Y+Y]+1),O[X]=.5*G,G=.5/G,O[3]=(U[3*W+Y]-U[3*Y+W])*G,O[W]=(U[3*W+X]+U[3*X+W])*G,O[Y]=(U[3*Y+X]+U[3*X+Y])*G}return O}Object.defineProperty(A,"__esModule",{value:!0}),A.create=u,A.identity=function(O){return O[0]=0,O[1]=0,O[2]=0,O[3]=1,O},A.setAxisAngle=m,A.getAxisAngle=function(O,U){var G=2*Math.acos(U[3]),X=Math.sin(G/2);return X>M.EPSILON?(O[0]=U[0]/X,O[1]=U[1]/X,O[2]=U[2]/X):(O[0]=1,O[1]=0,O[2]=0),G},A.multiply=p,A.rotateX=function(O,U,G){G*=.5;var X=U[0],W=U[1],Y=U[2];U=U[3];var J=Math.sin(G);return G=Math.cos(G),O[0]=X*G+U*J,O[1]=W*G+Y*J,O[2]=Y*G-W*J,O[3]=U*G-X*J,O},A.rotateY=function(O,U,G){G*=.5;var X=U[0],W=U[1],Y=U[2];U=U[3];var J=Math.sin(G);return G=Math.cos(G),O[0]=X*G-Y*J,O[1]=W*G+U*J,O[2]=Y*G+X*J,O[3]=U*G-W*J,O},A.rotateZ=function(O,U,G){G*=.5;var X=U[0],W=U[1],Y=U[2];U=U[3];var J=Math.sin(G);return G=Math.cos(G),O[0]=X*G+W*J,O[1]=W*G-X*J,O[2]=Y*G+U*J,O[3]=U*G-Y*J,O},A.calculateW=function(O,U){var G=U[0],X=U[1];return U=U[2],O[0]=G,O[1]=X,O[2]=U,O[3]=Math.sqrt(Math.abs(1-G*G-X*X-U*U)),O},A.slerp=y,A.random=function(O){var U=M.RANDOM(),G=M.RANDOM(),X=M.RANDOM(),W=Math.sqrt(1-U);return U=Math.sqrt(U),O[0]=W*Math.sin(2*Math.PI*G),O[1]=W*Math.cos(2*Math.PI*G),O[2]=U*Math.sin(2*Math.PI*X),O[3]=U*Math.cos(2*Math.PI*X),O},A.invert=function(O,U){var G=U[0],X=U[1],W=U[2];U=U[3];var Y=G*G+X*X+W*W+U*U;return Y=Y?1/Y:0,O[0]=-G*Y,O[1]=-X*Y,O[2]=-W*Y,O[3]=U*Y,O},A.conjugate=function(O,U){return O[0]=-U[0],O[1]=-U[1],O[2]=-U[2],O[3]=U[3],O},A.fromMat3=v,A.fromEuler=function(O,U,G,X){var W=.5*Math.PI/180;U*=W,G*=W,X*=W,W=Math.sin(U),U=Math.cos(U);var Y=Math.sin(G);G=Math.cos(G);var J=Math.sin(X);return X=Math.cos(X),O[0]=W*G*X-U*Y*J,O[1]=U*Y*X+W*G*J,O[2]=U*G*J-W*Y*X,O[3]=U*G*X+W*Y*J,O},A.str=function(O){return"quat("+O[0]+", "+O[1]+", "+O[2]+", "+O[3]+")"},A.setAxes=A.sqlerp=A.rotationTo=A.equals=A.exactEquals=A.normalize=A.sqrLen=A.squaredLength=A.len=A.length=A.lerp=A.dot=A.scale=A.mul=A.add=A.set=A.copy=A.fromValues=A.clone=void 0;var M=i(zA),R=i(hA),k=i(mf);a=i(ch),A.clone=a.clone,A.fromValues=a.fromValues,A.copy=a.copy,A.set=a.set,A.add=a.add,A.mul=p,A.scale=a.scale,A.dot=a.dot,A.lerp=a.lerp;var _=a.length;A.length=_,A.len=_,_=a.squaredLength,A.squaredLength=_,A.sqrLen=_;var T=a.normalize;A.normalize=T,A.exactEquals=a.exactEquals,A.equals=a.equals,a=function(){var O=k.create(),U=k.fromValues(1,0,0),G=k.fromValues(0,1,0);return function(X,W,Y){var J=k.dot(W,Y);return-.999999>J?(k.cross(O,U,W),1e-6>k.len(O)&&k.cross(O,G,W),k.normalize(O,O),m(X,O,Math.PI),X):.999999<J?(X[0]=0,X[1]=0,X[2]=0,X[3]=1,X):(k.cross(O,W,Y),X[0]=O[0],X[1]=O[1],X[2]=O[2],X[3]=1+J,T(X,X))}}(),A.rotationTo=a,a=function(){var O=u(),U=u();return function(G,X,W,Y,J,ot){return y(O,X,J,ot),y(U,W,Y,ot),y(G,O,U,2*ot*(1-ot)),G}}(),A.sqlerp=a,a=function(){var O=R.create();return function(U,G,X,W){return O[0]=X[0],O[3]=X[1],O[6]=X[2],O[1]=W[0],O[4]=W[1],O[7]=W[2],O[2]=-G[0],O[5]=-G[1],O[8]=-G[2],T(U,v(U,O))}}(),A.setAxes=a});Gt(pc);var Dp=Ot(function(a,A){function i(_){if(_&&_.__esModule)return _;var T={};if(_!=null){for(var O in _)if(Object.prototype.hasOwnProperty.call(_,O)){var U=Bo&&Io?Io(_,O):{};U.get||U.set?Bo(T,O,U):T[O]=_[O]}}return T.default=_,T}function u(_,T,O){var U=.5*O[0],G=.5*O[1];O=.5*O[2];var X=T[0],W=T[1],Y=T[2];return T=T[3],_[0]=X,_[1]=W,_[2]=Y,_[3]=T,_[4]=U*T+G*Y-O*W,_[5]=G*T+O*X-U*Y,_[6]=O*T+U*W-G*X,_[7]=-U*X-G*W-O*Y,_}function m(_,T){return _[0]=T[0],_[1]=T[1],_[2]=T[2],_[3]=T[3],_[4]=T[4],_[5]=T[5],_[6]=T[6],_[7]=T[7],_}function p(_,T,O){var U=T[0],G=T[1],X=T[2],W=T[3],Y=O[4],J=O[5],ot=O[6],ut=O[7],lt=T[4],wt=T[5],Qt=T[6];T=T[7];var zt=O[0],ne=O[1],pe=O[2];return O=O[3],_[0]=U*O+W*zt+G*pe-X*ne,_[1]=G*O+W*ne+X*zt-U*pe,_[2]=X*O+W*pe+U*ne-G*zt,_[3]=W*O-U*zt-G*ne-X*pe,_[4]=U*ut+W*Y+G*ot-X*J+lt*O+T*zt+wt*pe-Qt*ne,_[5]=G*ut+W*J+X*Y-U*ot+wt*O+T*ne+Qt*zt-lt*pe,_[6]=X*ut+W*ot+U*J-G*Y+Qt*O+T*pe+lt*ne-wt*zt,_[7]=W*ut-U*Y-G*J-X*ot+T*O-lt*zt-wt*ne-Qt*pe,_}Object.defineProperty(A,"__esModule",{value:!0}),A.create=function(){var _=new y.ARRAY_TYPE(8);return y.ARRAY_TYPE!=Float32Array&&(_[0]=0,_[1]=0,_[2]=0,_[4]=0,_[5]=0,_[6]=0,_[7]=0),_[3]=1,_},A.clone=function(_){var T=new y.ARRAY_TYPE(8);return T[0]=_[0],T[1]=_[1],T[2]=_[2],T[3]=_[3],T[4]=_[4],T[5]=_[5],T[6]=_[6],T[7]=_[7],T},A.fromValues=function(_,T,O,U,G,X,W,Y){var J=new y.ARRAY_TYPE(8);return J[0]=_,J[1]=T,J[2]=O,J[3]=U,J[4]=G,J[5]=X,J[6]=W,J[7]=Y,J},A.fromRotationTranslationValues=function(_,T,O,U,G,X,W){var Y=new y.ARRAY_TYPE(8);return Y[0]=_,Y[1]=T,Y[2]=O,Y[3]=U,G*=.5,X*=.5,W*=.5,Y[4]=G*U+X*O-W*T,Y[5]=X*U+W*_-G*O,Y[6]=W*U+G*T-X*_,Y[7]=-G*_-X*T-W*O,Y},A.fromRotationTranslation=u,A.fromTranslation=function(_,T){return _[0]=0,_[1]=0,_[2]=0,_[3]=1,_[4]=.5*T[0],_[5]=.5*T[1],_[6]=.5*T[2],_[7]=0,_},A.fromRotation=function(_,T){return _[0]=T[0],_[1]=T[1],_[2]=T[2],_[3]=T[3],_[4]=0,_[5]=0,_[6]=0,_[7]=0,_},A.fromMat4=function(_,T){var O=v.create();M.getRotation(O,T);var U=new y.ARRAY_TYPE(3);return M.getTranslation(U,T),u(_,O,U),_},A.copy=m,A.identity=function(_){return _[0]=0,_[1]=0,_[2]=0,_[3]=1,_[4]=0,_[5]=0,_[6]=0,_[7]=0,_},A.set=function(_,T,O,U,G,X,W,Y,J){return _[0]=T,_[1]=O,_[2]=U,_[3]=G,_[4]=X,_[5]=W,_[6]=Y,_[7]=J,_},A.getDual=function(_,T){return _[0]=T[4],_[1]=T[5],_[2]=T[6],_[3]=T[7],_},A.setDual=function(_,T){return _[4]=T[0],_[5]=T[1],_[6]=T[2],_[7]=T[3],_},A.getTranslation=function(_,T){var O=T[4],U=T[5],G=T[6],X=T[7],W=-T[0],Y=-T[1],J=-T[2];return T=T[3],_[0]=2*(O*T+X*W+U*J-G*Y),_[1]=2*(U*T+X*Y+G*W-O*J),_[2]=2*(G*T+X*J+O*Y-U*W),_},A.translate=function(_,T,O){var U=T[0],G=T[1],X=T[2],W=T[3],Y=.5*O[0],J=.5*O[1];O=.5*O[2];var ot=T[4],ut=T[5],lt=T[6];return T=T[7],_[0]=U,_[1]=G,_[2]=X,_[3]=W,_[4]=W*Y+G*O-X*J+ot,_[5]=W*J+X*Y-U*O+ut,_[6]=W*O+U*J-G*Y+lt,_[7]=-U*Y-G*J-X*O+T,_},A.rotateX=function(_,T,O){var U=-T[0],G=-T[1],X=-T[2],W=T[3],Y=T[4],J=T[5],ot=T[6],ut=T[7],lt=Y*W+ut*U+J*X-ot*G,wt=J*W+ut*G+ot*U-Y*X,Qt=ot*W+ut*X+Y*G-J*U;return Y=ut*W-Y*U-J*G-ot*X,v.rotateX(_,T,O),U=_[0],G=_[1],X=_[2],W=_[3],_[4]=lt*W+Y*U+wt*X-Qt*G,_[5]=wt*W+Y*G+Qt*U-lt*X,_[6]=Qt*W+Y*X+lt*G-wt*U,_[7]=Y*W-lt*U-wt*G-Qt*X,_},A.rotateY=function(_,T,O){var U=-T[0],G=-T[1],X=-T[2],W=T[3],Y=T[4],J=T[5],ot=T[6],ut=T[7],lt=Y*W+ut*U+J*X-ot*G,wt=J*W+ut*G+ot*U-Y*X,Qt=ot*W+ut*X+Y*G-J*U;return Y=ut*W-Y*U-J*G-ot*X,v.rotateY(_,T,O),U=_[0],G=_[1],X=_[2],W=_[3],_[4]=lt*W+Y*U+wt*X-Qt*G,_[5]=wt*W+Y*G+Qt*U-lt*X,_[6]=Qt*W+Y*X+lt*G-wt*U,_[7]=Y*W-lt*U-wt*G-Qt*X,_},A.rotateZ=function(_,T,O){var U=-T[0],G=-T[1],X=-T[2],W=T[3],Y=T[4],J=T[5],ot=T[6],ut=T[7],lt=Y*W+ut*U+J*X-ot*G,wt=J*W+ut*G+ot*U-Y*X,Qt=ot*W+ut*X+Y*G-J*U;return Y=ut*W-Y*U-J*G-ot*X,v.rotateZ(_,T,O),U=_[0],G=_[1],X=_[2],W=_[3],_[4]=lt*W+Y*U+wt*X-Qt*G,_[5]=wt*W+Y*G+Qt*U-lt*X,_[6]=Qt*W+Y*X+lt*G-wt*U,_[7]=Y*W-lt*U-wt*G-Qt*X,_},A.rotateByQuatAppend=function(_,T,O){var U=O[0],G=O[1],X=O[2];O=O[3];var W=T[0],Y=T[1],J=T[2],ot=T[3];return _[0]=W*O+ot*U+Y*X-J*G,_[1]=Y*O+ot*G+J*U-W*X,_[2]=J*O+ot*X+W*G-Y*U,_[3]=ot*O-W*U-Y*G-J*X,W=T[4],Y=T[5],J=T[6],ot=T[7],_[4]=W*O+ot*U+Y*X-J*G,_[5]=Y*O+ot*G+J*U-W*X,_[6]=J*O+ot*X+W*G-Y*U,_[7]=ot*O-W*U-Y*G-J*X,_},A.rotateByQuatPrepend=function(_,T,O){var U=T[0],G=T[1],X=T[2];T=T[3];var W=O[0],Y=O[1],J=O[2],ot=O[3];return _[0]=U*ot+T*W+G*J-X*Y,_[1]=G*ot+T*Y+X*W-U*J,_[2]=X*ot+T*J+U*Y-G*W,_[3]=T*ot-U*W-G*Y-X*J,W=O[4],Y=O[5],J=O[6],ot=O[7],_[4]=U*ot+T*W+G*J-X*Y,_[5]=G*ot+T*Y+X*W-U*J,_[6]=X*ot+T*J+U*Y-G*W,_[7]=T*ot-U*W-G*Y-X*J,_},A.rotateAroundAxis=function(_,T,O,U){if(Math.abs(U)<y.EPSILON)return m(_,T);var G=Math.sqrt(O[0]*O[0]+O[1]*O[1]+O[2]*O[2]);U*=.5;var X=Math.sin(U),W=X*O[0]/G,Y=X*O[1]/G;O=X*O[2]/G,U=Math.cos(U),G=T[0],X=T[1];var J=T[2],ot=T[3];return _[0]=G*U+ot*W+X*O-J*Y,_[1]=X*U+ot*Y+J*W-G*O,_[2]=J*U+ot*O+G*Y-X*W,_[3]=ot*U-G*W-X*Y-J*O,G=T[4],X=T[5],J=T[6],T=T[7],_[4]=G*U+T*W+X*O-J*Y,_[5]=X*U+T*Y+J*W-G*O,_[6]=J*U+T*O+G*Y-X*W,_[7]=T*U-G*W-X*Y-J*O,_},A.add=function(_,T,O){return _[0]=T[0]+O[0],_[1]=T[1]+O[1],_[2]=T[2]+O[2],_[3]=T[3]+O[3],_[4]=T[4]+O[4],_[5]=T[5]+O[5],_[6]=T[6]+O[6],_[7]=T[7]+O[7],_},A.multiply=p,A.scale=function(_,T,O){return _[0]=T[0]*O,_[1]=T[1]*O,_[2]=T[2]*O,_[3]=T[3]*O,_[4]=T[4]*O,_[5]=T[5]*O,_[6]=T[6]*O,_[7]=T[7]*O,_},A.lerp=function(_,T,O,U){var G=1-U;return 0>R(T,O)&&(U=-U),_[0]=T[0]*G+O[0]*U,_[1]=T[1]*G+O[1]*U,_[2]=T[2]*G+O[2]*U,_[3]=T[3]*G+O[3]*U,_[4]=T[4]*G+O[4]*U,_[5]=T[5]*G+O[5]*U,_[6]=T[6]*G+O[6]*U,_[7]=T[7]*G+O[7]*U,_},A.invert=function(_,T){var O=k(T);return _[0]=-T[0]/O,_[1]=-T[1]/O,_[2]=-T[2]/O,_[3]=T[3]/O,_[4]=-T[4]/O,_[5]=-T[5]/O,_[6]=-T[6]/O,_[7]=T[7]/O,_},A.conjugate=function(_,T){return _[0]=-T[0],_[1]=-T[1],_[2]=-T[2],_[3]=T[3],_[4]=-T[4],_[5]=-T[5],_[6]=-T[6],_[7]=T[7],_},A.normalize=function(_,T){var O=k(T);if(0<O){O=Math.sqrt(O);var U=T[0]/O,G=T[1]/O,X=T[2]/O,W=T[3]/O,Y=T[4],J=T[5],ot=T[6];T=T[7];var ut=U*Y+G*J+X*ot+W*T;_[0]=U,_[1]=G,_[2]=X,_[3]=W,_[4]=(Y-U*ut)/O,_[5]=(J-G*ut)/O,_[6]=(ot-X*ut)/O,_[7]=(T-W*ut)/O}return _},A.str=function(_){return"quat2("+_[0]+", "+_[1]+", "+_[2]+", "+_[3]+", "+_[4]+", "+_[5]+", "+_[6]+", "+_[7]+")"},A.exactEquals=function(_,T){return _[0]===T[0]&&_[1]===T[1]&&_[2]===T[2]&&_[3]===T[3]&&_[4]===T[4]&&_[5]===T[5]&&_[6]===T[6]&&_[7]===T[7]},A.equals=function(_,T){var O=_[0],U=_[1],G=_[2],X=_[3],W=_[4],Y=_[5],J=_[6];_=_[7];var ot=T[0],ut=T[1],lt=T[2],wt=T[3],Qt=T[4],zt=T[5],ne=T[6];return T=T[7],Math.abs(O-ot)<=y.EPSILON*Math.max(1,Math.abs(O),Math.abs(ot))&&Math.abs(U-ut)<=y.EPSILON*Math.max(1,Math.abs(U),Math.abs(ut))&&Math.abs(G-lt)<=y.EPSILON*Math.max(1,Math.abs(G),Math.abs(lt))&&Math.abs(X-wt)<=y.EPSILON*Math.max(1,Math.abs(X),Math.abs(wt))&&Math.abs(W-Qt)<=y.EPSILON*Math.max(1,Math.abs(W),Math.abs(Qt))&&Math.abs(Y-zt)<=y.EPSILON*Math.max(1,Math.abs(Y),Math.abs(zt))&&Math.abs(J-ne)<=y.EPSILON*Math.max(1,Math.abs(J),Math.abs(ne))&&Math.abs(_-T)<=y.EPSILON*Math.max(1,Math.abs(_),Math.abs(T))},A.sqrLen=A.squaredLength=A.len=A.length=A.dot=A.mul=A.setReal=A.getReal=void 0;var y=i(zA),v=i(pc),M=i(gf);A.getReal=v.copy,A.setReal=v.copy,A.mul=p;var R=v.dot;A.dot=R,a=v.length,A.length=a,A.len=a;var k=v.squaredLength;A.squaredLength=k,A.sqrLen=k});Gt(Dp);var Op=Ot(function(a,A){function i(){var _=new k.ARRAY_TYPE(2);return k.ARRAY_TYPE!=Float32Array&&(_[0]=0,_[1]=0),_}function u(_,T,O){return _[0]=T[0]-O[0],_[1]=T[1]-O[1],_}function m(_,T,O){return _[0]=T[0]*O[0],_[1]=T[1]*O[1],_}function p(_,T,O){return _[0]=T[0]/O[0],_[1]=T[1]/O[1],_}function y(_,T){var O=T[0]-_[0];return _=T[1]-_[1],Math.sqrt(O*O+_*_)}function v(_,T){var O=T[0]-_[0];return _=T[1]-_[1],O*O+_*_}function M(_){var T=_[0];return _=_[1],Math.sqrt(T*T+_*_)}function R(_){var T=_[0];return _=_[1],T*T+_*_}Object.defineProperty(A,"__esModule",{value:!0}),A.create=i,A.clone=function(_){var T=new k.ARRAY_TYPE(2);return T[0]=_[0],T[1]=_[1],T},A.fromValues=function(_,T){var O=new k.ARRAY_TYPE(2);return O[0]=_,O[1]=T,O},A.copy=function(_,T){return _[0]=T[0],_[1]=T[1],_},A.set=function(_,T,O){return _[0]=T,_[1]=O,_},A.add=function(_,T,O){return _[0]=T[0]+O[0],_[1]=T[1]+O[1],_},A.subtract=u,A.multiply=m,A.divide=p,A.ceil=function(_,T){return _[0]=Math.ceil(T[0]),_[1]=Math.ceil(T[1]),_},A.floor=function(_,T){return _[0]=Math.floor(T[0]),_[1]=Math.floor(T[1]),_},A.min=function(_,T,O){return _[0]=Math.min(T[0],O[0]),_[1]=Math.min(T[1],O[1]),_},A.max=function(_,T,O){return _[0]=Math.max(T[0],O[0]),_[1]=Math.max(T[1],O[1]),_},A.round=function(_,T){return _[0]=Math.round(T[0]),_[1]=Math.round(T[1]),_},A.scale=function(_,T,O){return _[0]=T[0]*O,_[1]=T[1]*O,_},A.scaleAndAdd=function(_,T,O,U){return _[0]=T[0]+O[0]*U,_[1]=T[1]+O[1]*U,_},A.distance=y,A.squaredDistance=v,A.length=M,A.squaredLength=R,A.negate=function(_,T){return _[0]=-T[0],_[1]=-T[1],_},A.inverse=function(_,T){return _[0]=1/T[0],_[1]=1/T[1],_},A.normalize=function(_,T){var O=T[0],U=T[1];return O=O*O+U*U,0<O&&(O=1/Math.sqrt(O)),_[0]=T[0]*O,_[1]=T[1]*O,_},A.dot=function(_,T){return _[0]*T[0]+_[1]*T[1]},A.cross=function(_,T,O){return T=T[0]*O[1]-T[1]*O[0],_[0]=_[1]=0,_[2]=T,_},A.lerp=function(_,T,O,U){var G=T[0];return T=T[1],_[0]=G+U*(O[0]-G),_[1]=T+U*(O[1]-T),_},A.random=function(_,T){T=T||1;var O=2*k.RANDOM()*Math.PI;return _[0]=Math.cos(O)*T,_[1]=Math.sin(O)*T,_},A.transformMat2=function(_,T,O){var U=T[0];return T=T[1],_[0]=O[0]*U+O[2]*T,_[1]=O[1]*U+O[3]*T,_},A.transformMat2d=function(_,T,O){var U=T[0];return T=T[1],_[0]=O[0]*U+O[2]*T+O[4],_[1]=O[1]*U+O[3]*T+O[5],_},A.transformMat3=function(_,T,O){var U=T[0];return T=T[1],_[0]=O[0]*U+O[3]*T+O[6],_[1]=O[1]*U+O[4]*T+O[7],_},A.transformMat4=function(_,T,O){var U=T[0];return T=T[1],_[0]=O[0]*U+O[4]*T+O[12],_[1]=O[1]*U+O[5]*T+O[13],_},A.rotate=function(_,T,O,U){var G=T[0]-O[0];T=T[1]-O[1];var X=Math.sin(U);return U=Math.cos(U),_[0]=G*U-T*X+O[0],_[1]=G*X+T*U+O[1],_},A.angle=function(_,T){var O=_[0];_=_[1];var U=T[0];T=T[1];var G=O*O+_*_;0<G&&(G=1/Math.sqrt(G));var X=U*U+T*T;return 0<X&&(X=1/Math.sqrt(X)),O=(O*U+_*T)*G*X,1<O?0:-1>O?Math.PI:Math.acos(O)},A.zero=function(_){return _[0]=0,_[1]=0,_},A.str=function(_){return"vec2("+_[0]+", "+_[1]+")"},A.exactEquals=function(_,T){return _[0]===T[0]&&_[1]===T[1]},A.equals=function(_,T){var O=_[0];_=_[1];var U=T[0];return T=T[1],Math.abs(O-U)<=k.EPSILON*Math.max(1,Math.abs(O),Math.abs(U))&&Math.abs(_-T)<=k.EPSILON*Math.max(1,Math.abs(_),Math.abs(T))},A.forEach=A.sqrLen=A.sqrDist=A.dist=A.div=A.mul=A.sub=A.len=void 0;var k=function(_){if(_&&_.__esModule)return _;var T={};if(_!=null){for(var O in _)if(Object.prototype.hasOwnProperty.call(_,O)){var U=Bo&&Io?Io(_,O):{};U.get||U.set?Bo(T,O,U):T[O]=_[O]}}return T.default=_,T}(zA);A.len=M,A.sub=u,A.mul=m,A.div=p,A.dist=y,A.sqrDist=v,A.sqrLen=R,a=function(){var _=i();return function(T,O,U,G,X,W){for(O||(O=2),U||(U=0),G=G?Math.min(G*O+U,T.length):T.length;U<G;U+=O)_[0]=T[U],_[1]=T[U+1],X(_,_,W),T[U]=_[0],T[U+1]=_[1];return T}}(),A.forEach=a});Gt(Op);var ls=Ot(function(a,A){function i(u){if(u&&u.__esModule)return u;var m={};if(u!=null){for(var p in u)if(Object.prototype.hasOwnProperty.call(u,p)){var y=Bo&&Io?Io(u,p):{};y.get||y.set?Bo(m,p,y):m[p]=u[p]}}return m.default=u,m}Object.defineProperty(A,"__esModule",{value:!0}),A.vec4=A.vec3=A.vec2=A.quat2=A.quat=A.mat4=A.mat3=A.mat2d=A.mat2=A.glMatrix=void 0,a=i(zA),A.glMatrix=a,a=i(cc),A.mat2=a,a=i(fc),A.mat2d=a,a=i(hA),A.mat3=a,a=i(gf),A.mat4=a,a=i(pc),A.quat=a,a=i(Dp),A.quat2=a,a=i(Op),A.vec2=a,a=i(mf),A.vec3=a,a=i(ch),A.vec4=a});Gt(ls);var Si=ls.vec4,en=ls.vec3,zn=ls.vec2,qv=ls.quat2,dc=ls.quat,ur=ls.mat4,xm=ls.mat3,wm=ls.mat2d,Bl=ls.mat2,Hp=ls.glMatrix,Ur=function(){function a(A,i,u){fr(this,a),this.options=i,this.gl=A,u&&(this.map=u.map),u=this.getVertexShader(i.vertexShader);var m=this.getFragmentShader(i.fragmentShader);i=A.createShader(A.VERTEX_SHADER),A.shaderSource(i,u),A.compileShader(i),A.getShaderParameter(i,A.COMPILE_STATUS)?(u=A.createShader(A.FRAGMENT_SHADER),A.shaderSource(u,m),A.compileShader(u),A.getShaderParameter(u,A.COMPILE_STATUS)?(m=A.createProgram(),A.attachShader(m,i),A.attachShader(m,u),A.deleteShader(i),A.deleteShader(u),A.linkProgram(m),A.getProgramParameter(m,A.LINK_STATUS)?i=m:(i="Shader program failed to link.  The error log is:"+A.getProgramInfoLog(m),console.error(i),i=-1)):(i="Fragment shader failed to compile.  The error log is:"+A.getShaderInfoLog(u),console.error(i),i=-1)):(i="Vertex shader failed to compile.  The error log is:"+A.getShaderInfoLog(i),console.error(i),i=-1),i=this.program=i,u={},m=A.getProgramParameter(i,A.ACTIVE_ATTRIBUTES);for(var p=0;p<m;p++){var y=A.getActiveAttrib(i,p);u[y.name]=A.getAttribLocation(i,y.name)}p={},y={};for(var v=A.getProgramParameter(i,A.ACTIVE_UNIFORMS),M=0;M<v;M++){var R=A.getActiveUniform(i,M);p[R.name]=A.getUniformLocation(i,R.name),y[R.name]=R.type}this.parameter=A={attributes:u,numAttributes:m,uniformsType:y,uniforms:p},this.attributes=A.attributes,this.uniforms=A.uniforms,this.parameter=A}return mr(a,[{key:"getVertexShader",value:function(A){var i="";return this.map&&this.map.type==="cesium"&&(i=`#define LOG_DEPTH
`),i+=`#ifdef LOG_DEPTH
uniform float currentFrustumX;varying float v_depthFromNearPlusOne;
#endif
uniform vec2 MAPV_resolution;
#if defined(PICK)
uniform bool uIsPickRender;attribute vec3 aPickColor;uniform vec3 uPickedColor;varying vec4 vPickColor;uniform bool uEnablePicked;bool mapvIsPicked(){return uEnablePicked&&aPickColor==uPickedColor;}
#endif
void afterMain(){
#if defined(LOG_DEPTH)
v_depthFromNearPlusOne=(gl_Position.w-currentFrustumX)+1.0;gl_Position.z=clamp(gl_Position.z/gl_Position.w,-1.0,1.0)*gl_Position.w;
#endif
#if defined(PICK)
vPickColor=vec4(aPickColor,0.0);if(mapvIsPicked()){vPickColor.a=1.0;}
#endif
}`,A=this.getDefines()+i+A,A=A.replace("void main","void originMain"),A+"void main() {originMain(); afterMain();}"}},{key:"getFragmentShader",value:function(A){var i="";return this.map&&this.map.type==="cesium"&&(i=`#define LOG_DEPTH
`),i+=`#if defined(LOG_DEPTH)
#extension GL_EXT_frag_depth : enable
#endif
precision highp float;uniform vec2 MAPV_resolution;uniform bool uIsPickRender;
#if defined(PICK)
varying vec4 vPickColor;bool mapvIsPicked(){return vPickColor.a==1.0;}
#endif
#if defined(LOG_DEPTH)
uniform float oneOverLog2FarDepthFromNearPlusOne;uniform float farDepthFromNearPlusOne;varying float v_depthFromNearPlusOne;void writeLogDepth(float depth){if(depth<=0.9999999||depth>farDepthFromNearPlusOne){discard;}gl_FragDepthEXT=log2(depth)*oneOverLog2FarDepthFromNearPlusOne;}
#endif
void afterMain(){
#if defined(PICK)
if(uIsPickRender){gl_FragColor=vec4(vPickColor.rgb,1.0);return;}
#endif
#if defined(LOG_DEPTH)
writeLogDepth(v_depthFromNearPlusOne);
#endif
}`,A=this.getDefines()+i+A,A=A.replace("void main","void originMain"),A+"void main() {originMain(); afterMain();}"}},{key:"getDefines",value:function(){var A="",i=this.options.defines;if(i)for(var u=0;u<i.length;u++)A+="#define "+i[u]+`
`;return A}},{key:"use",value:function(A,i){this.gl=A,A.useProgram(this.program),this.map&&this.map.type==="cesium"&&this.setUniforms({currentFrustumX:this.map.map.scene.camera.frustum.near,oneOverLog2FarDepthFromNearPlusOne:this.map.map.scene.context.uniformState.oneOverLog2FarDepthFromNearPlusOne,farDepthFromNearPlusOne:this.map.map.scene.context.uniformState.farDepthFromNearPlusOne}),this.uniforms.MAPV_resolution&&this.setUniforms({MAPV_resolution:[A.canvas.width,A.canvas.height]})}},{key:"setUniform",value:function(A,i){var u=this.gl,m=this.uniforms[A];if(m)switch(this.parameter.uniformsType[A]){case u.FLOAT:u.uniform1f(m,i);break;case u.FLOAT_VEC2:u.uniform2f(m,i[0],i[1]);break;case u.FLOAT_VEC3:u.uniform3f(m,i[0],i[1],i[2]);break;case u.FLOAT_VEC4:u.uniform4f(m,i[0],i[1],i[2],i[3]);break;case u.SAMPLER_2D:case u.SAMPLER_CUBE:u.activeTexture(u["TEXTURE"+this.textureIndex]),u.uniform1i(m,this.textureIndex),u.bindTexture(u.TEXTURE_2D,i),this.textureIndex++;break;case u.INT:case u.BOOL:u.uniform1i(m,i);break;case u.INT_VEC2:case u.BOOL_VEC2:u.uniform2i(m,i[0],i[1]);break;case u.INT_VEC3:case u.BOOL_VEC3:u.uniform3i(m,i[0],i[1],i[2]);break;case u.INT_VEC4:case u.BOOL_VEC4:u.uniform4i(m,i[0],i[1],i[2],i[3]);break;case u.FLOAT_MAT2:u.uniformMatrix2fv(m,!1,i);break;case u.FLOAT_MAT3:u.uniformMatrix3fv(m,!1,i);break;case u.FLOAT_MAT4:u.uniformMatrix4fv(m,!1,i);break;default:console.error("Unrecognized uniform type: "+A)}else console.warn("Unrecognized uniform type: "+A)}},{key:"setUniforms",value:function(A){this.textureIndex=0;for(var i in A)this.setUniform(i,A[i])}}]),a}(),hs=function(a,A,i,u){var m=i?i.call(u,a,A):void 0;if(m!==void 0)return!!m;if(a===A)return!0;if((typeof a=="undefined"?"undefined":Mn(a))!=="object"||!a||(typeof A=="undefined"?"undefined":Mn(A))!=="object"||!A)return!1;var p=_o(a),y=_o(A);if(p.length!==y.length)return!1;y=Object.prototype.hasOwnProperty.bind(A);for(var v=0;v<p.length;v++){if(m=p[v],!y(m))return!1;var M=a[m],R=A[m];if(m=i?i.call(u,M,R,m):void 0,m===!1||m===void 0&&M!==R)return!1}return!0},El=function(){function a(A){fr(this,a),this.options=A,this.gl=A.gl,this.savedState=[],this.currentState=this.getDefaultState()}return mr(a,[{key:"setDefaultState",value:function(){this.setState()}},{key:"getDefaultState",value:function(){var A=this.gl;return{blend:!1,blendEquation:A.FUNC_ADD,blendFunc:[A.ONE,A.ZERO],depthMask:!0,depthTest:!0,depthFunc:A.LEQUAL,polygonOffset:[0,0],cullFace:!1,stencilTest:!1}}},{key:"getRealState",value:function(){var A=this.gl;return{blend:A.getParameter(A.BLEND),blendEquation:A.getParameter(A.BLEND_EQUATION),depthMask:A.getParameter(A.DEPTH_WRITEMASK),depthTest:A.getParameter(A.DEPTH_TEST),depthFunc:A.getParameter(A.DEPTH_FUNC),polygonOffset:[A.getParameter(A.POLYGON_OFFSET_FACTOR),A.getParameter(A.POLYGON_OFFSET_UNITS)],cullFace:A.getParameter(A.CULL_FACE),stencilTest:A.getParameter(A.STENCIL_TEST)}}},{key:"getCurrentState",value:function(){return this.currentState}},{key:"save",value:function(){this.savedState.push(this.getCurrentState())}},{key:"restore",value:function(){var A=this.savedState.pop();this.setState(A,{force:!0})}},{key:"setState",value:function(A){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};A=ln(this.getDefaultState(),A),this.setBlend(A,i),this.setDepth(A,i),this.setCullFace(A,i),this.setPolygonOffset(A,i),this.setStencil(A,i),this.currentState=A}},{key:"setBlend",value:function(A,i){var u=this.gl,m=this.getCurrentState();((i=i.force)||!hs(A.blend,m.blend))&&(A.blend?u.enable(u.BLEND):u.disable(u.BLEND)),!i&&hs(A.blendEquation,m.blendEquation)||u.blendEquation(A.blendEquation),(i||!hs(A.blendFunc,m.blendFunc))&&(A.blendFunc.length===2?u.blendFunc(A.blendFunc[0],A.blendFunc[1]):A.blendFunc.length===4&&u.blendFuncSeparate(A.blendFunc[0],A.blendFunc[1],A.blendFunc[2],A.blendFunc[3]))}},{key:"setDepth",value:function(A,i){var u=this.gl,m=this.getCurrentState();((i=i.force)||!hs(A.depthTest,m.depthTest))&&(A.depthTest?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST)),(i||!hs(A.depthMask,m.depthMask))&&(A.depthMask?u.depthMask(!0):u.depthMask(!1)),!i&&hs(A.depthFunc,m.depthFunc)||u.depthFunc(A.depthFunc)}},{key:"setPolygonOffset",value:function(A,i){var u=this.gl,m=this.getCurrentState();(i.force||!hs(A.polygonOffset,m.polygonOffset))&&(A.polygonOffset[0]!==0&&A.polygonOffset[1]!==0?u.enable(u.POLYGON_OFFSET_FILL):u.disable(u.POLYGON_OFFSET_FILL),u.polygonOffset(A.polygonOffset[0],A.polygonOffset[1]))}},{key:"setCullFace",value:function(A,i){var u=this.gl,m=this.getCurrentState();(i.force||!hs(A.cullFace,m.cullFace))&&(A.cullFace?(u.enable(u.CULL_FACE),u.cullFace(u.BACK)):u.disable(u.CULL_FACE))}},{key:"setStencil",value:function(A,i){var u=this.gl,m=this.getCurrentState();(i.force||!hs(A.stencilTest,m.stencilTest))&&(A.stencilTest?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST))}}]),a}(),ir=function(){function a(A){fr(this,a),this.options=A,this.gl=A.gl,this.buffer=this.gl.createBuffer(),A.data&&this.updateData(A.data)}return mr(a,[{key:"updateData",value:function(A){var i=this.options,u=this.gl;this.bind(),u.bufferData(u[i.target],A,u[i.usage])}},{key:"bind",value:function(A){A=A||this.gl,A.bindBuffer(A[this.options.target],this.buffer)}},{key:"unBind",value:function(A){A=A||this.gl,A.bindBuffer(A[this.options.target],null)}},{key:"destroy",value:function(){this.buffer=null}}]),a}(),Nu={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FLOAT:4},Li=function(){function a(A){for(fr(this,a),this.options=A,this.attributes=A.attributes,this.gl=A.gl,this.program=A.program,A=this.stride=0;A<this.attributes.length;A++)this.stride+=Nu[this.attributes[A].type]*this.attributes[A].size}return mr(a,[{key:"setVertexAttribPointers",value:function(){for(var A=this.gl,i=this.program,u=0;u<this.attributes.length;u++){var m=this.attributes[u],p=i.attributes[m.name];p!==void 0&&(m.buffer.bind(A),A.vertexAttribPointer(p,m.size,A[m.type],m.normalize||!1,m.stride!==void 0?m.stride:this.stride,m.offset),A.enableVertexAttribArray(p))}}},{key:"bind",value:function(){this.setVertexAttribPointers()}},{key:"destroy",value:function(){}}]),a}(),Zi=function a(A,i,u){fr(this,a),i=i||A.canvas.width,u=u||A.canvas.height;var m=A.createFramebuffer(),p=A.createTexture();A.bindTexture(A.TEXTURE_2D,p),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,i,u,0,A.RGBA,A.UNSIGNED_BYTE,null),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),m.texture=p;var y=A.createRenderbuffer();A.bindRenderbuffer(A.RENDERBUFFER,y),A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,i,u),m.depthBuffer=y,A.bindFramebuffer(A.FRAMEBUFFER,m),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,p,0),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,y),i=A.checkFramebufferStatus(A.FRAMEBUFFER),A.FRAMEBUFFER_COMPLETE===i&&(A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null),A.bindRenderbuffer(A.RENDERBUFFER,null),this.framebuffer=m)},Il=function(){function a(A){fr(this,a),this.options={},ln(this.options,A),this.vertex=[-1,1,0,-1,-1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0],this.sampleCoord=[0,1,0,0,1,1,1,1,0,0,1,0]}return mr(a,[{key:"getOptions",value:function(){return this.options}},{key:"onResize",value:function(A){}},{key:"render",value:function(A){var i=A.gl;A=A.texture;var u=this.programSample;i.useProgram(u.program);var m=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,m);var p=[-1,-1,0,-1,1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0];i.bufferData(i.ARRAY_BUFFER,new Float32Array(p),i.STATIC_DRAW),i.enableVertexAttribArray(u.attributes.aPos),i.vertexAttribPointer(u.attributes.aPos,3,i.FLOAT,!1,0,0),m=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,m),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,1,1,1,0,0,1,0]),i.STATIC_DRAW),i.enableVertexAttribArray(u.attributes.aTextureCoord),i.vertexAttribPointer(u.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,A),i.uniform1i(u.uniforms.uSampler,0),i.drawArrays(i.TRIANGLES,0,p.length/3)}}]),a}(),Np=function(a){function A(i){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i))}return tn(A,a),mr(A,[{key:"getProgram",value:function(i){return this.programSample||(this.programSample=new Ur(i,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(void){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision highp float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;vec4 fxaa_2_0(sampler2D tex,vec2 fragCoord,vec2 resolution,vec2 v_rgbNW,vec2 v_rgbNE,vec2 v_rgbSW,vec2 v_rgbSE,vec2 v_rgbM){vec4 color;mediump vec2 inverseVP=vec2(1.0/resolution.x,1.0/resolution.y);vec3 rgbNW=texture2D(tex,v_rgbNW).xyz;vec3 rgbNE=texture2D(tex,v_rgbNE).xyz;vec3 rgbSW=texture2D(tex,v_rgbSW).xyz;vec3 rgbSE=texture2D(tex,v_rgbSE).xyz;vec4 texColor=texture2D(tex,v_rgbM);vec3 rgbM=texColor.xyz;vec3 luma=vec3(0.299,0.587,0.114);float lumaNW=dot(rgbNW,luma);float lumaNE=dot(rgbNE,luma);float lumaSW=dot(rgbSW,luma);float lumaSE=dot(rgbSE,luma);float lumaM=dot(rgbM,luma);float lumaMin=min(lumaM,min(min(lumaNW,lumaNE),min(lumaSW,lumaSE)));float lumaMax=max(lumaM,max(max(lumaNW,lumaNE),max(lumaSW,lumaSE)));mediump vec2 dir;dir.x=-((lumaNW+lumaNE)-(lumaSW+lumaSE));dir.y=((lumaNW+lumaSW)-(lumaNE+lumaSE));float dirReduce=max((lumaNW+lumaNE+lumaSW+lumaSE)*(0.25*1.0/8.0),1.0/128.0);float rcpDirMin=1.0/(min(abs(dir.x),abs(dir.y))+dirReduce);dir=min(vec2(8.0,8.0),max(vec2(-8.0,-8.0),dir*rcpDirMin))*inverseVP;vec3 rgbA=0.5*(texture2D(tex,fragCoord*inverseVP+dir*(1.0/3.0-0.5)).xyz+texture2D(tex,fragCoord*inverseVP+dir*(2.0/3.0-0.5)).xyz);vec3 rgbB=rgbA*0.5+0.25*(texture2D(tex,fragCoord*inverseVP+dir*-0.5).xyz+texture2D(tex,fragCoord*inverseVP+dir*0.5).xyz);float lumaB=dot(rgbB,luma);if((lumaB<lumaMin)||(lumaB>lumaMax)){color=vec4(rgbA,texColor.a);}else{color=vec4(rgbB,texColor.a);}return color;}void texcoords_3_1(vec2 fragCoord,vec2 resolution,out vec2 v_rgbNW,out vec2 v_rgbNE,out vec2 v_rgbSW,out vec2 v_rgbSE,out vec2 v_rgbM){vec2 inverseVP=1.0/resolution.xy;v_rgbNW=(fragCoord+vec2(-1.0,-1.0))*inverseVP;v_rgbNE=(fragCoord+vec2(1.0,-1.0))*inverseVP;v_rgbSW=(fragCoord+vec2(-1.0,1.0))*inverseVP;v_rgbSE=(fragCoord+vec2(1.0,1.0))*inverseVP;v_rgbM=vec2(fragCoord*inverseVP);}vec4 apply_1_2(sampler2D tex,vec2 fragCoord,vec2 resolution){mediump vec2 v_rgbNW;mediump vec2 v_rgbNE;mediump vec2 v_rgbSW;mediump vec2 v_rgbSE;mediump vec2 v_rgbM;texcoords_3_1(fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);return fxaa_2_0(tex,fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);}void main(void){vec2 fragCoord=vTextureCoord*canvasSize;gl_FragColor=apply_1_2(uSampler,fragCoord,canvasSize);}"})),this.programSample}},{key:"render",value:function(i){var u=i.gl;i=i.texture,this.getOptions(),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);var m=this.getProgram(u);u.useProgram(m.program);var p=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,p),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.vertex),u.STATIC_DRAW),u.enableVertexAttribArray(m.attributes.aPos),u.vertexAttribPointer(m.attributes.aPos,3,u.FLOAT,!1,0,0),p=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,p),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.sampleCoord),u.STATIC_DRAW),u.enableVertexAttribArray(m.attributes.aTextureCoord),u.vertexAttribPointer(m.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,i),u.uniform1i(m.uniforms.uSampler,1),u.uniform2fv(m.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.bindBuffer(u.ARRAY_BUFFER,null),u.useProgram(null)}}]),A}(Il),zp=function(a){function A(i){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i))}return tn(A,a),mr(A,[{key:"getProgram",value:function(i){if(this.program1||(this.program1=new Ur(i,{vertexShader:"attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];void SMAAEdgeDetectionVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);vOffset[2]=texcoord.xyxy+resolution.xyxy*vec4(-2.0,0.0,0.0,2.0);}void main(){vUv=uv;SMAAEdgeDetectionVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:`precision highp float;
#define SMAA_THRESHOLD 0.1
uniform sampler2D tDiffuse;varying vec2 vUv;varying vec4 vOffset[3];vec4 SMAAColorEdgeDetectionPS(vec2 texcoord,vec4 offset[3],sampler2D colorTex){vec2 threshold=vec2(SMAA_THRESHOLD,SMAA_THRESHOLD);vec4 delta;vec3 C=texture2D(colorTex,texcoord).rgb;vec3 Cleft=texture2D(colorTex,offset[0].xy).rgb;vec3 t=abs(C-Cleft);delta.x=max(max(t.r,t.g),t.b);vec3 Ctop=texture2D(colorTex,offset[0].zw).rgb;t=abs(C-Ctop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0,1.0))==0.0)discard;vec3 Cright=texture2D(colorTex,offset[1].xy).rgb;t=abs(C-Cright);delta.z=max(max(t.r,t.g),t.b);vec3 Cbottom=texture2D(colorTex,offset[1].zw).rgb;t=abs(C-Cbottom);delta.w=max(max(t.r,t.g),t.b);float maxDelta=max(max(max(delta.x,delta.y),delta.z),delta.w);vec3 Cleftleft=texture2D(colorTex,offset[2].xy).rgb;t=abs(C-Cleftleft);delta.z=max(max(t.r,t.g),t.b);vec3 Ctoptop=texture2D(colorTex,offset[2].zw).rgb;t=abs(C-Ctoptop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(max(maxDelta,delta.z),delta.w);edges.xy*=step(0.5*maxDelta,delta.xy);return vec4(edges,0.0,0.0);}void main(){gl_FragColor=SMAAColorEdgeDetectionPS(vUv,vOffset,tDiffuse);}`})),this.program2||(this.program2=new Ur(i,{vertexShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;void SMAABlendingWeightCalculationVS(vec2 texcoord){vPixcoord=texcoord/resolution;vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-0.25,0.125,1.25,0.125);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(-0.125,0.25,-0.125,-1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*resolution.xxyy*float(SMAA_MAX_SEARCH_STEPS);}void main(){vUv=uv;SMAABlendingWeightCalculationVS(vUv);gl_Position=vec4(position,1.0);}`,fragmentShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )
uniform sampler2D tDiffuse;uniform sampler2D tArea;uniform sampler2D tSearch;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;vec2 round(vec2 x){return sign(x)*floor(abs(x)+0.5);}float SMAASearchLength(sampler2D searchTex,vec2 e,float bias,float scale){e.r=bias+e.r*scale;return 255.0*texture2D(searchTex,e,0.0).r;}float SMAASearchXLeft(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){/***@PSEUDO_GATHER4*This texcoord has been offset by(-0.25,-0.125)in the vertex shader to*sample between edge,thus fetching four edges in a row.*Sampling with different offsets in each direction allows to disambiguate*which edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(2.0,0.0)*resolution;if(!(texcoord.x>end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x+=0.25*resolution.x;texcoord.x+=resolution.x;texcoord.x+=2.0*resolution.x;texcoord.x-=resolution.x*SMAASearchLength(searchTex,e,0.0,0.5);return texcoord.x;}float SMAASearchXRight(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(2.0,0.0)*resolution;if(!(texcoord.x<end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x-=0.25*resolution.x;texcoord.x-=resolution.x;texcoord.x-=2.0*resolution.x;texcoord.x+=resolution.x*SMAASearchLength(searchTex,e,0.5,0.5);return texcoord.x;}float SMAASearchYUp(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(0.0,2.0)*resolution;if(!(texcoord.y>end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y-=0.25*resolution.y;texcoord.y-=resolution.y;texcoord.y-=2.0*resolution.y;texcoord.y+=resolution.y*SMAASearchLength(searchTex,e.gr,0.0,0.5);return texcoord.y;}float SMAASearchYDown(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(0.0,2.0)*resolution;if(!(texcoord.y<end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y+=0.25*resolution.y;texcoord.y+=resolution.y;texcoord.y+=2.0*resolution.y;texcoord.y-=resolution.y*SMAASearchLength(searchTex,e.gr,0.5,0.5);return texcoord.y;}vec2 SMAAArea(sampler2D areaTex,vec2 dist,float e1,float e2,float offset){vec2 texcoord=float(SMAA_AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texcoord=SMAA_AREATEX_PIXEL_SIZE*texcoord+(0.5*SMAA_AREATEX_PIXEL_SIZE);texcoord.y+=SMAA_AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTex,texcoord,0.0).rg;}vec4 SMAABlendingWeightCalculationPS(vec2 texcoord,vec2 pixcoord,vec4 offset[3],sampler2D edgesTex,sampler2D areaTex,sampler2D searchTex,ivec4 subsampleIndices){vec4 weights=vec4(0.0,0.0,0.0,0.0);vec2 e=texture2D(edgesTex,texcoord).rg;if(e.g>0.0){vec2 d;vec2 coords;coords.x=SMAASearchXLeft(edgesTex,searchTex,offset[0].xy,offset[2].x);coords.y=offset[1].y;d.x=coords.x;float e1=texture2D(edgesTex,coords,0.0).r;coords.x=SMAASearchXRight(edgesTex,searchTex,offset[0].zw,offset[2].y);d.y=coords.x;d=d/resolution.x-pixcoord.x;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(1,0)).r;weights.rg=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.y));}if(e.r>0.0){vec2 d;vec2 coords;coords.y=SMAASearchYUp(edgesTex,searchTex,offset[1].xy,offset[2].z);coords.x=offset[0].x;d.x=coords.y;float e1=texture2D(edgesTex,coords,0.0).g;coords.y=SMAASearchYDown(edgesTex,searchTex,offset[1].zw,offset[2].w);d.y=coords.y;d=d/resolution.y-pixcoord.y;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(0,1)).g;weights.ba=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.x));}return weights;}void main(){gl_FragColor=SMAABlendingWeightCalculationPS(vUv,vPixcoord,vOffset,tDiffuse,tArea,tSearch,ivec4(0.0));}`})),this.program3||(this.program3=new Ur(i,{vertexShader:"precision highp float;uniform vec2 resolution;attribute vec3 position;attribute vec2 uv;varying vec2 vUv;varying vec4 vOffset[2];void SMAANeighborhoodBlendingVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);}void main(){vUv=uv;SMAANeighborhoodBlendingVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:"precision highp float;uniform sampler2D tDiffuse;uniform sampler2D tColor;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[2];vec4 SMAANeighborhoodBlendingPS(vec2 texcoord,vec4 offset[2],sampler2D colorTex,sampler2D blendTex){vec4 a;a.xz=texture2D(blendTex,texcoord).xz;a.y=texture2D(blendTex,offset[1].zw).g;a.w=texture2D(blendTex,offset[1].xy).a;if(dot(a,vec4(1.0,1.0,1.0,1.0))<1e-5){return texture2D(colorTex,texcoord,0.0);}else{vec2 offset;offset.x=a.a>a.b ? a.a :-a.b;offset.y=a.g>a.r ?-a.g : a.r;if(abs(offset.x)>abs(offset.y)){offset.y=0.0;}else{offset.x=0.0;}vec4 C=texture2D(colorTex,texcoord,0.0);texcoord+=sign(offset)*resolution;vec4 Cop=texture2D(colorTex,texcoord,0.0);float s=abs(offset.x)>abs(offset.y)? abs(offset.x): abs(offset.y);C.xyz=pow(C.xyz,vec3(2.2));Cop.xyz=pow(Cop.xyz,vec3(2.2));vec4 mixed=mix(C,Cop,s);mixed.xyz=pow(mixed.xyz,vec3(1.0/2.2));return mixed;}}void main(){gl_FragColor=SMAANeighborhoodBlendingPS(vUv,vOffset,tColor,tDiffuse);}"})),!this.vertexBuffer||!this.sampleBuffer){this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord));var u=[{stride:12,name:"position",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"uv",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}];this.vertexArray1=new Li({gl:i,program:this.program1,attributes:u}),this.vertexArray2=new Li({gl:i,program:this.program2,attributes:u}),this.vertexArray3=new Li({gl:i,program:this.program3,attributes:u})}return{program1:this.program1,program2:this.program2,program3:this.program3}}},{key:"onResize",value:function(i){this.collectBrightBuffer=new Zi(i),this.bloomBuffer=new Zi(i)}},{key:"getExtraFbo",value:function(i){return this.collectBrightBuffer||(this.collectBrightBuffer=new Zi(i)),this.bloomBuffer||(this.bloomBuffer=new Zi(i)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(i){var u=i.gl,m=i.texture;i=i.fbo,this.getOptions(),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);var p=this.getProgram(u),y=p.program1,v=p.program2;p=p.program3;var M=this.getExtraFbo(u),R=M.collectBrightBuffer;M=M.bloomBuffer;var k=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,k),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.vertex),u.STATIC_DRAW),u.enableVertexAttribArray(y.attributes.position),u.vertexAttribPointer(y.attributes.position,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(v.attributes.position),u.vertexAttribPointer(v.attributes.position,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(p.attributes.position),u.vertexAttribPointer(p.attributes.position,3,u.FLOAT,!1,0,0),k=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,k),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.sampleCoord),u.STATIC_DRAW),u.enableVertexAttribArray(y.attributes.uv),u.vertexAttribPointer(y.attributes.uv,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(v.attributes.uv),u.vertexAttribPointer(v.attributes.uv,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(p.attributes.uv),u.vertexAttribPointer(p.attributes.uv,2,u.FLOAT,!1,0,0),u.useProgram(y.program),u.bindFramebuffer(u.FRAMEBUFFER,R),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,m),u.uniform1i(y.uniforms.tDiffuse,2),u.uniform2fv(y.uniforms.resolution,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(v.program),u.bindFramebuffer(u.FRAMEBUFFER,M),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,R.texture),u.uniform1i(v.uniforms.uSampler,2),u.uniform2fv(v.uniforms.resolution,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(p.program),u.bindFramebuffer(u.FRAMEBUFFER,i),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,m),u.uniform1i(p.uniforms.tDiffuse,2),u.activeTexture(u.TEXTURE3),u.bindTexture(u.TEXTURE_2D,M.texture),u.uniform1i(p.uniforms.tColor,3),u.uniform2fv(p.uniforms.resolution,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.bindBuffer(u.ARRAY_BUFFER,null),u.useProgram(null)}},{key:"getAreaTexture",value:function(){return"data:image/png;base64,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"}},{key:"getSearchTexture",value:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAIAAADiVupLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrs00EKgAAIRNEZ739mTQoiwmhRi4L/FiKiu9ERISkzbXdTVV3H4WhfOG6ehl1rNR7qDSF8hwkVcJXt+3A//I0Nv0GoCBUAAAAAAMA/LAIMAB+Dcg2OE2zsAAAAAElFTkSuQmCC"}}]),A}(Il),Qp=function(a){function A(i){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i))}return tn(A,a),mr(A,[{key:"getProgram",value:function(i){return this.programSample||(this.programSample=new Ur(i,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){float fStep=1.0/512.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;gl_FragColor=blurSample;}"}),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord)),this.vertexArray=new Li({gl:i,program:this.programSample,attributes:[{stride:12,name:"aPos",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"aTextureCoord",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}]})),this.programSample}},{key:"render",value:function(i){var u=i.gl;i=i.texture,u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);var m=this.getProgram(u);m.use(u),this.vertexArray.bind(),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,i),u.uniform1i(m.uniforms.uSampler,1),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3)}}]),A}(Il),Tl=function(a){function A(i){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i))}return tn(A,a),mr(A,[{key:"getProgram",value:function(i){return this.programBright||(this.programBright=new Ur(i,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-(1.0-threshold)/5.0));float brightness=dot(color.rgb,vec3(0.2126,0.7152,0.0722));if(brightness>threshold){color=lightColor;}else{color=vec4(0.0);}gl_FragColor=color;}"})),this.programBloom||(this.programBloom=new Ur(i,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new Ur(i,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord);vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(i){this.collectBrightBuffer=new Zi(i),this.bloomBuffer=new Zi(i)}},{key:"getExtraFbo",value:function(i){return this.collectBrightBuffer||(this.collectBrightBuffer=new Zi(i)),this.bloomBuffer||(this.bloomBuffer=new Zi(i)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(i){var u=i.gl,m=i.texture;i=i.fbo;var p=this.getOptions();u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);var y=this.getProgram(u),v=y.programBright,M=y.programBloom;y=y.programResult;var R=this.getExtraFbo(u),k=R.collectBrightBuffer;R=R.bloomBuffer;var _=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,_),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.vertex),u.STATIC_DRAW),u.enableVertexAttribArray(v.attributes.aPos),u.vertexAttribPointer(v.attributes.aPos,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(M.attributes.aPos),u.vertexAttribPointer(M.attributes.aPos,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(y.attributes.aPos),u.vertexAttribPointer(y.attributes.aPos,3,u.FLOAT,!1,0,0),_=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,_),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.sampleCoord),u.STATIC_DRAW),u.enableVertexAttribArray(v.attributes.aTextureCoord),u.vertexAttribPointer(v.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(M.attributes.aTextureCoord),u.vertexAttribPointer(M.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(y.attributes.aTextureCoord),u.vertexAttribPointer(y.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.useProgram(v.program),u.bindFramebuffer(u.FRAMEBUFFER,k),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,m),u.uniform1i(v.uniforms.uSampler,1),u.uniform1f(v.uniforms.threshold,p.threshold||0),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(M.program),u.bindFramebuffer(u.FRAMEBUFFER,R),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,k.texture),u.uniform1i(M.uniforms.uSampler,1),u.uniform1i(M.uniforms.isVertical,!0),u.uniform1f(M.uniforms.blurSize,p.blurSize||2),u.uniform1f(M.uniforms.devicePixelRatio,window.devicePixelRatio),u.uniform2fv(M.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(M.program),u.bindFramebuffer(u.FRAMEBUFFER,k),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,R.texture),u.uniform1i(M.uniforms.uSampler,1),u.uniform1i(M.uniforms.isVertical,!1),u.uniform1f(M.uniforms.blurSize,p.blurSize||2),u.uniform1f(M.uniforms.devicePixelRatio,window.devicePixelRatio),u.uniform2fv(M.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(y.program),u.bindFramebuffer(u.FRAMEBUFFER,i),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,m),u.uniform1i(y.uniforms.originalTexture,1),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,k.texture),u.uniform1i(y.uniforms.bloomTexture,0),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.bindBuffer(u.ARRAY_BUFFER,null),u.useProgram(null)}}]),A}(Il),vf=function(a){function A(i){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i))}return tn(A,a),mr(A,[{key:"getProgram",value:function(i){return this.programBright||(this.programBright=new Ur(i,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-threshold));gl_FragColor=lightColor;}"})),this.programBloom||(this.programBloom=new Ur(i,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new Ur(i,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;uniform float toneScale;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord)*toneScale;vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(i){this.collectBrightBuffer=new Zi(i),this.bloomBuffer=new Zi(i)}},{key:"getExtraFbo",value:function(i){return this.collectBrightBuffer||(this.collectBrightBuffer=new Zi(i)),this.bloomBuffer||(this.bloomBuffer=new Zi(i)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(i){var u=i.gl,m=i.texture;i=i.fbo;var p=this.getOptions(),y="clarity"in p?p.clarity:1;y=Math.max(0,y),y=Math.min(1,y),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);var v=this.getProgram(u),M=v.programBright,R=v.programBloom;v=v.programResult;var k=this.getExtraFbo(u),_=k.collectBrightBuffer;k=k.bloomBuffer;var T=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,T),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.vertex),u.STATIC_DRAW),u.enableVertexAttribArray(M.attributes.aPos),u.vertexAttribPointer(M.attributes.aPos,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(R.attributes.aPos),u.vertexAttribPointer(R.attributes.aPos,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(v.attributes.aPos),u.vertexAttribPointer(v.attributes.aPos,3,u.FLOAT,!1,0,0),T=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,T),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.sampleCoord),u.STATIC_DRAW),u.enableVertexAttribArray(M.attributes.aTextureCoord),u.vertexAttribPointer(M.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(R.attributes.aTextureCoord),u.vertexAttribPointer(R.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(v.attributes.aTextureCoord),u.vertexAttribPointer(v.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.useProgram(M.program),u.bindFramebuffer(u.FRAMEBUFFER,_),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,m),u.uniform1i(M.uniforms.uSampler,1),u.uniform1f(M.uniforms.threshold,p.threshold||0),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(R.program),u.bindFramebuffer(u.FRAMEBUFFER,k),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,_.texture),u.uniform1i(R.uniforms.uSampler,1),u.uniform1i(R.uniforms.isVertical,!0),u.uniform1f(R.uniforms.blurSize,p.blurSize||2),u.uniform1f(R.uniforms.devicePixelRatio,window.devicePixelRatio),u.uniform2fv(R.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(R.program),u.bindFramebuffer(u.FRAMEBUFFER,_),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,k.texture),u.uniform1i(R.uniforms.uSampler,1),u.uniform1i(R.uniforms.isVertical,!1),u.uniform1f(R.uniforms.blurSize,p.blurSize||2),u.uniform1f(R.uniforms.devicePixelRatio,window.devicePixelRatio),u.uniform2fv(R.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.useProgram(v.program),u.bindFramebuffer(u.FRAMEBUFFER,i),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,m),u.uniform1i(v.uniforms.originalTexture,1),u.uniform1f(v.uniforms.toneScale,y),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,_.texture),u.uniform1i(v.uniforms.bloomTexture,0),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3),u.bindBuffer(u.ARRAY_BUFFER,null),u.useProgram(null)}}]),A}(Il),qd=function(a){function A(i){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i))}return tn(A,a),mr(A,[{key:"getProgram",value:function(i){return this.programSample||(this.programSample=new Ur(i,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;void main(){float fStep=1.0/312.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;float desX=abs((gl_FragCoord.x-canvasSize.x/2.0)/(canvasSize.x/2.0));float desY=abs((gl_FragCoord.y-canvasSize.y/2.0)/(canvasSize.y/2.0));float factor=max(desX,desY);gl_FragColor=(sample22*(1.0-factor)+blurSample*factor);}"})),this.programSample}},{key:"render",value:function(i){var u=i.gl;i=i.texture;var m=this.getProgram(u);u.useProgram(m.program);var p=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,p),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.vertex),u.STATIC_DRAW),u.enableVertexAttribArray(m.attributes.aPos),u.vertexAttribPointer(m.attributes.aPos,3,u.FLOAT,!1,0,0),p=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,p),u.bufferData(u.ARRAY_BUFFER,new Float32Array(this.sampleCoord),u.STATIC_DRAW),u.enableVertexAttribArray(m.attributes.aTextureCoord),u.vertexAttribPointer(m.attributes.aTextureCoord,2,u.FLOAT,!1,0,0),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,i),u.uniform1i(m.uniforms.uSampler,1),u.uniform2fv(m.uniforms.canvasSize,[u.canvas.width,u.canvas.height]),u.drawArrays(u.TRIANGLES,0,this.vertex.length/3)}}]),A}(Il),gc=function(){function a(A){fr(this,a),this.gl=A,this.effects=[],this.initFbo()}return mr(a,[{key:"addEffect",value:function(A){this.effects.push(A)}},{key:"removeEffect",value:function(A){}},{key:"setEffects",value:function(A){this.effects=A}},{key:"onResize",value:function(){this.initFbo();var A=this.gl,i=this.effects;if(i&&1<i.length)for(var u=1;u<i.length;u++){var m=i[u];m.onResize&&m.onResize(A)}}},{key:"initFbo",value:function(){var A=this.gl;A&&(this.fbo=[new Zi(A),new Zi(A)])}},{key:"destroy",value:function(){this.effects=[],this.fbo=[],this.gl=null}},{key:"render",value:function(){var A=this.gl,i=this.effects;if(i&&0<i.length)for(var u={},m=0;m<i.length;m++){var p=this.fbo[m%2].framebuffer;m===i.length-1&&(p=null),A.bindFramebuffer(A.FRAMEBUFFER,p);var y=[0,0,0,0];A.clearColor(y[0],y[1],y[2],y[3]),A.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT),i[m].render({isPickRender:!1,gl:A,texture:u.texture,fbo:p}),u=p}}}]),a}(),fh=function(){function a(A,i){fr(this,a),this.map=A,this.options=i||{},this.eventMap={}}return mr(a,[{key:"onResize",value:function(A){}},{key:"onUpdate",value:function(A){throw"\u672A\u5B9E\u73B0onUpdate\u65B9\u6CD5"}},{key:"getContainer",value:function(){throw"\u672A\u5B9E\u73B0getContainer\u65B9\u6CD5"}},{key:"getSize",value:function(){throw"\u672A\u5B9E\u73B0getSize\u65B9\u6CD5"}},{key:"getTilt",value:function(){throw"\u672A\u5B9E\u73B0getTilt\u65B9\u6CD5"}},{key:"getHeading",value:function(){throw"\u672A\u5B9E\u73B0getHeading\u65B9\u6CD5"}},{key:"getZoomUnits",value:function(){throw"\u672A\u5B9E\u73B0getZoomUnits\u65B9\u6CD5"}},{key:"getCenter",value:function(){throw"\u672A\u5B9E\u73B0getCenter\u65B9\u6CD5"}},{key:"getMapType",value:function(){throw"\u672A\u5B9E\u73B0getMapType\u65B9\u6CD5"}},{key:"lnglatToMercator",value:function(A,i){return this.options.coordinateSystem==="gcj02"?(i=i*Math.PI/180,i=31890685e-1*Math.log((1+Math.sin(i))/(1-Math.sin(i))),[parseFloat((A*Math.PI/180*6378137).toFixed(2)),parseFloat(i.toFixed(2))]):(A=Nn.convertLL2MC({lng:A,lat:i}),[A.lng,A.lat])}}]),a}(),bp=function(a){function A(i){fr(this,A);var u=on(this,(A.__proto__||Er(A)).call(this,i));return i._printLog&&i._printLog("mapvgl"),u.eventMap={},u}return tn(A,a),mr(A,[{key:"onResize",value:function(i){this.map.addEventListener("resize",i),this.eventMap.resize=i}},{key:"onMousemove",value:function(i){i=this.extendCallback(i),this.map.addEventListener("mousemove",i),this.eventMap.mousemove=i}},{key:"onClick",value:function(i){i=this.extendCallback(i),this.map.addEventListener("click",i),this.eventMap.click=i}},{key:"onDblClick",value:function(i){i=this.extendCallback(i),this.map.addEventListener("dblclick",i),this.eventMap.dblclick=i}},{key:"onRightClick",value:function(i){i=this.extendCallback(i),this.map.addEventListener("rightclick",i),this.eventMap.rightclick=i}},{key:"onUpdate",value:function(i){this.map.addEventListener("update",i),this.map.addEventListener("onearthstatuschange",i),this.eventMap.update=i,this.eventMap.onearthstatuschange=i}},{key:"extendCallback",value:function(i){return function(u){i(ln(u,{x:u.x,y:u.y}))}}},{key:"unbind",value:function(i){var u=this;this.eventMap[i]?(this.map.removeEventListener(i,this.eventMap[i]),delete this.eventMap[i]):(_o(this.eventMap).forEach(function(m){u.map.removeEventListener(m,u.eventMap[m])}),this.eventMap={})}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return this.map.getTilt()}},{key:"getHeading",value:function(){return this.map.getHeading()}},{key:"getZoomUnits",value:function(){return this.map.getZoomUnits()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getCenter",value:function(){var i=this.map.getCenter();return-180<=i.lng&&180>=i.lng&&(i=this.map.lnglatToMercator(i.lng,i.lat),i={lng:i[0],lat:i[1]}),i}},{key:"getMapType",value:function(){return this.map.getMapType()}},{key:"lnglatToMercator",value:function(i,u){return this.map.lnglatToMercator(i,u)}},{key:"mercatorToLnglat",value:function(i,u){return this.map.mercatorToLnglat(i,u)}},{key:"pixelToPointIn",value:function(i){return i=this.map.pixelToPointIn(i),this.mercatorToLnglat(i.lng,i.lat)}}]),A}(fh),Cm=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.div=document.createElement("div"),i.div.style.position="absolute",i.div.style.userSelect="none",i.map.getPanes().mapPane.appendChild(i.div),i.eventMap={},i}return tn(A,a),mr(A,[{key:"onResize",value:function(i){this.map.addEventListener("resize",i),this.eventMap.resize=i}},{key:"onMousemove",value:function(i){i=this.extendCallback(i),this.map.addEventListener("mousemove",i),this.eventMap.mousemove=i}},{key:"onClick",value:function(i){i=this.extendCallback(i),bd?(this.map.addEventListener("touchend",i),this.eventMap.touchend=i):(this.map.addEventListener("click",i),this.eventMap.click=i)}},{key:"onDblClick",value:function(i){i=this.extendCallback(i),this.map.addEventListener("dblclick",i),this.eventMap.dblclick=i}},{key:"onRightClick",value:function(i){i=this.extendCallback(i),this.map.addEventListener("rightclick",i),this.eventMap.rightclick=i}},{key:"changeCanvas",value:function(){var i=this.map,u=i.getSize(),m=i.getCenter();i=i.pointToOverlayPixel(m),this.div.style.left=i.x-u.width/2+"px",this.div.style.top=i.y-u.height/2+"px"}},{key:"onUpdate",value:function(i){var u=this,m=function(){u.changeCanvas(),i()};this.map.addEventListener("moveend",m),this.map.addEventListener("moving",m),this.map.addEventListener("zoomend",m),this.eventMap.moveend=m,this.eventMap.moving=m,this.eventMap.zoomend=m}},{key:"extendCallback",value:function(i){return function(u){i(ln(u,{x:u.pixel.x,y:u.pixel.y}))}}},{key:"unbind",value:function(){var i=this;_o(this.eventMap).forEach(function(u){i.map.removeEventListener(u,i.eventMap[u])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.div}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return 0}},{key:"getHeading",value:function(){return 0}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getZoomUnits",value:function(){var i=this.getZoom();return this.map.getMapType().getZoomUnits?this.map.getMapType().getZoomUnits(i):Math.pow(2,18-i)}},{key:"getCenter",value:function(){var i=this.map.getMapType().getProjection().lngLatToPoint(this.map.getCenter());return{lng:i.x,lat:i.y}}},{key:"lnglatToMercator",value:function(i,u){return i=this.map.getMapType().getProjection().lngLatToPoint({lng:i,lat:u}),[i.x,i.y]}},{key:"mercatorToLnglat",value:function(i,u){return i=this.map.getMapType().getProjection().pointToLngLat({lng:i,lat:u}),[i.lng,i.lat]}}]),A}(fh),Mm=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.eventMap={},i}return tn(A,a),mr(A,[{key:"onResize",value:function(i){window.addEventListener("resize",i),this.eventMap.resize=i}},{key:"onUpdate",value:function(i){}},{key:"unbind",value:function(){var i=this;_o(this.eventMap).forEach(function(u){window.removeEventListener(u,i.eventMap[u])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container.getElementsByClassName("cesium-widget")[0]}},{key:"getSize",value:function(){var i=this.map;return{width:i.canvas.clientWidth,height:i.canvas.clientHeight}}},{key:"getTilt",value:function(){return 180*this.map.camera.pitch/Math.PI+90}},{key:"getHeading",value:function(){return 360-180*this.map.camera.heading/Math.PI}},{key:"getZoomUnits",value:function(){var i=this.map;return 6.8*i.scene.globe.ellipsoid.cartesianToCartographic(i.camera.position).height/6500}},{key:"getZoom",value:function(){return 10}},{key:"getCenter",value:function(){var i=this.map;return i=i.camera.pickEllipsoid(new Cesium.Cartesian2(i.canvas.clientWidth/2,i.canvas.clientHeight/2)),i=Cesium.Ellipsoid.WGS84.cartesianToCartographic(i),i=this.getMercator([180*i.longitude/Math.PI,180*i.latitude/Math.PI]),{lng:i[0],lat:i[1]}}},{key:"getMercator",value:function(i){var u=[];return u[0]=i[0]*Math.PI/180*6378137,i=i[1]*Math.PI/180,u[1]=31890685e-1*Math.log((1+Math.sin(i))/(1-Math.sin(i))),u}}]),A}(fh),_m=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.eventMap={},i}return tn(A,a),mr(A,[{key:"onResize",value:function(i){window.addEventListener("resize",i),this.eventMap.resize=i}},{key:"onUpdate",value:function(i){}},{key:"unbind",value:function(){var i=this;_o(this.eventMap).forEach(function(u){window.removeEventListener(u,i.eventMap[u])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getZoom",value:function(){return this.map.zoom}},{key:"getCenter",value:function(){return this.map.center}}]),A}(fh),kp=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.eventMap={},i}return tn(A,a),mr(A,[{key:"onResize",value:function(i){window.addEventListener("resize",i),this.eventMap.resize=i}},{key:"onUpdate",value:function(i){}},{key:"unbind",value:function(){var i=this;_o(this.eventMap).forEach(function(u){window.removeEventListener(u,i.eventMap[u])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getCenter",value:function(){return this.map.center}}]),A}(fh),ph=function(){function a(A,i){var u=this;fr(this,a),i=i||{},i.mapType==="bmap"?this.map=new Cm(A,i):i.mapType==="blank"?this.map=new _m(A,i):i.mapType==="cesium"?this.map=new Mm(A,i):i.mapType==="three"?this.map=new kp(A,i):(i.mapType="bmapgl",this.map=new bp(A,i)),this.map.type=i.mapType,this._dpr=window.devicePixelRatio,i.mapType==="bmapgl"&&(this._dpr=this.map.map.config.ratio),this.options=i||{},this.renderArr=[],(A=i.canvas)||(A=document.createElement("canvas")),this.canvas=A,this.gl=i.gl?i.gl:Ju(A,i),["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"].forEach(function(m){u.gl.getExtension(m)}),this.changeSize(),this.projectionMatrix=ur.create(Float64Array),this.orthoMatrix=ur.create(Float64Array),this.matrix=ur.create(Float64Array),this.viewMatrix=ur.create(Float64Array),this.pointToPixelMatrix=ur.create(Float64Array),this.pixelToViewMatrix=ur.create(Float64Array),this.fovy=35,this.fps=Math.min(i.fps,60)||60,this.renderTime=new Date().valueOf(),this._animation=this.animation.bind(this),this._update=this.update.bind(this),this.onInitialize(this.options.onInitialize),this.options.onRender&&this.renderArr.push(this.options.onRender),this.stateManager=new El({gl:this.gl}),this.pickFBO=new Zi(this.gl),this.transferOptions={},this.bind()}return mr(a,[{key:"bind",value:function(){var A=this,i=this.map;i.onResize(function(){A.changeSize(),A.render()}),i.onUpdate(this._update),i.onClick&&i.onClick(function(u){A.onClick&&A.onClick(u)}),i.onDblClick&&i.onDblClick(function(u){A.onDblClick&&A.onDblClick(u)}),i.onRightClick&&i.onRightClick(function(u){A.onRightClick&&A.onRightClick(u)}),i.onMousemove&&i.onMousemove(function(u){A.onMousemove&&A.onMousemove(u)}),this.options.canvas||i.getContainer().appendChild(this.canvas)}},{key:"unbind",value:function(){var A=this.map;A.unbind&&A.unbind()}},{key:"setOptions",value:function(A){this.options=A}},{key:"onInitialize",value:function(A){A&&(this.transferOptions=A.bind(this)(this.gl)||{})}},{key:"bindFramebuffer",value:function(A){var i=this.gl;A?i.bindFramebuffer(i.FRAMEBUFFER,A.framebuffer):i.bindFramebuffer(i.FRAMEBUFFER,null)}},{key:"saveFramebuffer",value:function(){var A=this.gl;this.preFramebuffer=A.getParameter(A.FRAMEBUFFER_BINDING)}},{key:"restoreFramebuffer",value:function(){var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,this.preFramebuffer)}},{key:"onRender",value:function(A){this.renderArr.push(A)}},{key:"changeSize",value:function(){var A=this.canvas,i=this.options;if(A){var u=A.style,m=this.map.getSize(),p=this._dpr;A.width=m.width*p,A.height=m.height*p,u.cssText="position: absolute;left:0;top:0;width:"+m.width+"px;height:"+m.height+"px;z-index:2;",i.mapType!=="cesium"||i.canvas||(u.pointerEvents="none"),this.gl.viewport(0,0,A.width,A.height),this.pickFBO=new Zi(this.gl)}}},{key:"update",value:function(){this.options.autoUpdate===!1||this.isAnimation&&60<=this.fps||this.render()}},{key:"pixelToPointIn",value:function(A){return this.map.pixelToPointIn(A)}},{key:"render",value:function(){if(this.map&&this.gl){var A=this.options,i=this.projectionMatrix,u=this.viewMatrix;if(A.mapType==="three")u=this.map.map.camera,i=u.projectionMatrix.elements,u=u.matrixWorldInverse.elements;else if(A.mapType==="cesium"){u=this.map.map;var m=u.camera.frustum.projectionMatrix;i=new Float32Array([m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]]),m=u.camera.viewMatrix,u=new Float32Array([m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]])}else this.map.map.mapType==="B_EARTH_MAP"?(i=this.map.map.getEarth().scene._camera.getProjectionMatrix(),u=this.map.map.getEarth().scene._camera.getModelViewMatrix()):(this.updateProjectionMatrix(),this.updateModelViewMatrix());for(m=ur.multiply(this.matrix,i,u),ln(this.transferOptions,{gl:this.gl,matrix:m,pointToPixelMatrix:this.pointToPixelMatrix,pixelToViewMatrix:this.pixelToViewMatrix,projectionMatrix:i,orthoMatrix:this.orthoMatrix,viewMatrix:u,stateManager:this.stateManager}),A.mapType!=="three"&&A.mapType!=="cesium"&&A.autoUpdate!==!1&&this.clear(),A=0;A<this.renderArr.length;A++)this.renderArr[A]&&this.renderArr[A].bind(this)(this.transferOptions)}}},{key:"clear",value:function(A){var i=this.gl,u=this.options.clearColor||[0,0,0,0];i.clearColor(u[0],u[1],u[2],u[3]),A&&(A instanceof Array||(A=kt(A).unitArray()),i.clearColor(A[0],A[1],A[2],A[3])),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},{key:"updateProjectionMatrix",value:function(){var A=this.gl.canvas.width/this.gl.canvas.height,i=this.options.cameraNear||1,u=this.options.cameraFar||4e3;ur.perspective(this.projectionMatrix,Ee(this.fovy),A,i,u),A=this.map.getSize(),ur.ortho(this.orthoMatrix,-A.width/2,A.width/2,-A.height/2,A.height/2,i,u)}},{key:"updateModelViewMatrix",value:function(){var A=this.map,i=this.viewMatrix,u=this.pointToPixelMatrix,m=this.pixelToViewMatrix;ur.identity(i),ur.identity(u),ur.identity(m);var p=A.getSize();p=Math.round(-p.height/(2*Math.tan(Ee(this.fovy)/2))),ur.translate(m,m,[0,0,p]),ur.rotate(m,m,Ee(A.getTilt()),[-1,0,0]),ur.rotate(m,m,Ee(A.getHeading()),[0,0,-1]),p=A.getCenter();var y=this.options.pointOffset||[0,0];A=A.getZoomUnits(),ur.translate(u,u,[(y[0]-p.lng)/A,(y[1]-p.lat)/A,0]),A=1/A,ur.scale(u,u,[A,A,A]),ur.multiply(i,m,u)}},{key:"destroy",value:function(){this.stopAnimation(),this.unbind();var A=this.gl.getExtension("WEBGL_lose_context");A&&A.loseContext(),this.canvas.remove(),this.gl=this.canvas=null}},{key:"animation",value:function(){if(this.isAnimation){if(60<=this.fps)this.render();else{var A=new Date().valueOf(),i=Math.floor(1e3/this.fps),u=A-this.renderTime;u>i&&(this.render(),this.renderTime=A-u%i)}window.requestAnimationFrame(this._animation)}}},{key:"startAnimation",value:function(){this.isAnimation||(this.isAnimation=!0,window.requestAnimationFrame(this._animation))}},{key:"stopAnimation",value:function(){this.isAnimation=!1}}]),a}(),Bm=function(){function a(A){fr(this,a),this.layers=[],this.options=A,this.webglLayer=A.webglLayer}return mr(a,[{key:"addLayer",value:function(A){for(var i=!1,u=0;u<this.layers.length;u++)if(this.layers[u]===A){i=!0;break}i||(A.map=this.webglLayer.map,A.layerType==="threeLayer"?(A.setWebglLayer(this.webglLayer),i=A.getThreeLayer(),this.addLayer(i),A.initialize&&A.initialize(i)):(A.setWebglLayer(this.webglLayer),A.commonInitialize&&A.commonInitialize(this.webglLayer.gl),A.initialize&&A.initialize(this.webglLayer.gl),A.onOptionsChanged(A.getOptions(),{}),A.onDataChanged(A.getData()),A.onChanged(A.getOptions(),A.getData())),this.putInLayer(A)),this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"putInLayer",value:function(A){A.options.renderOrder===void 0&&(A.options.renderOrder=this.layers.length),this.layers.push(A),this.layers=this.layers.sort(function(i,u){return i.options.renderOrder-u.options.renderOrder})}},{key:"removeLayer",value:function(A){for(var i=0;i<this.layers.length;i++)this.layers[i]===A&&this.layers.splice(i,1);this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"showLayer",value:function(A){for(var i=0;i<this.layers.length;i++)this.layers[i]===A&&A.show();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"hideLayer",value:function(A){for(var i=0;i<this.layers.length;i++)this.layers[i]===A&&A.hide();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"removeAllLayers",value:function(){this.layers=[],this.webglLayer.stopAnimation(),this.webglLayer.render()}},{key:"destroyAllLayers",value:function(){for(var A=0;A<this.layers.length;A++){var i=this.layers[A];i.destroy&&i.destroy()}}},{key:"getAllLayers",value:function(){return this.layers}},{key:"getAllThreeLayers",value:function(){for(var A=[],i=0;i<this.layers.length;i++){var u=this.layers[i];u.layerType==="ThreeLayer"&&A.push(u)}return A}},{key:"isRequestAnimation",value:function(){for(var A=!1,i=0;i<this.layers.length;i++)if(this.layers[i].isRequestAnimation()){A=!0;break}return A}},{key:"beforeRender",value:function(A){A.gl&&this.webglLayer.stateManager.setDefaultState()}},{key:"afterRender",value:function(A){(A=A.gl)&&(A.bindBuffer(A.ARRAY_BUFFER,null),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,null),A.useProgram(null))}},{key:"renderGLLayers",value:function(A){this.webglLayer.stateManager.save();for(var i=0;i<this.layers.length;i++){var u=this.layers[i];if(u._visible===!0&&u.layerType!=="threeLayer"&&u.layerType!=="ThreeLayer"){var m=u.map.getZoom(),p=u.getOptions().zoomThreshold;p&&(m<p[0]||m>=p[1])||(this.beforeRender(A),u.render(A),this.afterRender(A))}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayer",value:function(A){this.webglLayer.stateManager.save(),this.webglLayer.stateManager.setState({blendFunc:[A.gl.SRC_ALPHA,A.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:A.gl.LESS,cullFace:!1});for(var i=0;i<this.layers.length;i++){var u=this.layers[i];if(u._visible===!0&&u.layerType==="ThreeLayer"){var m=u.map.getZoom(),p=u.getOptions().zoomThreshold;p&&(m<p[0]||m>=p[1])||u.render(A)}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayers",value:function(A){this.webglLayer.stateManager.save(),this.webglLayer.stateManager.setState({blendFunc:[A.gl.SRC_ALPHA,A.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:A.gl.LESS,cullFace:!1});for(var i=0;i<this.layers.length;i++){var u=this.layers[i];if(u._visible===!0&&u.layerType==="threeLayer"){var m=u.map.getZoom(),p=u.getOptions().zoomThreshold;p&&(m<p[0]||m>=p[1])||u.render(A)}}this.webglLayer.stateManager.restore()}},{key:"onClick",value:function(A){for(var i=this.layers.length-1;0<=i;i--){var u=this.layers[i];if(u._visible===!0&&u.layerType!=="threeLayer"&&u.layerType!=="ThreeLayer"){var m=u.map.getZoom(),p=u.getOptions().zoomThreshold;if((!p||!(m<=p[0]||m>=p[1]))&&u.options.enablePicked&&u.options.onClick&&u.pick&&(m=u.pick(A.x,A.y,"onClick"),u.options.onClick(m,A),u.options.autoSelect&&this.webglLayer.render(),A.cancelBubble===!0))break}}}},{key:"onDblClick",value:function(A){for(var i=this.layers.length-1;0<=i;i--){var u=this.layers[i];if(u._visible===!0&&u.layerType!=="threeLayer"&&u.layerType!=="ThreeLayer"){var m=u.map.getZoom(),p=u.getOptions().zoomThreshold;if((!p||!(m<=p[0]||m>=p[1]))&&u.options.enablePicked&&u.options.onDblClick&&u.pick&&(m=u.pick(A.x,A.y,"onDblClick"),u.options.onDblClick(m,A),u.options.autoSelect&&this.webglLayer.render(),A.cancelBubble===!0))break}}}},{key:"onRightClick",value:function(A){for(var i=this.layers.length-1;0<=i;i--){var u=this.layers[i];if(u._visible===!0&&u.layerType!=="threeLayer"&&u.layerType!=="ThreeLayer"){var m=u.map.getZoom(),p=u.getOptions().zoomThreshold;if((!p||!(m<=p[0]||m>=p[1]))&&u.options.enablePicked&&u.options.onRightClick&&u.pick&&(m=u.pick(A.x,A.y,"onRightClick"),u.options.onRightClick(m,A),u.options.autoSelect&&this.webglLayer.render(),A.cancelBubble===!0))break}}}},{key:"onMousemove",value:function(A){for(var i=!1,u=!1,m=this.layers.length-1;0<=m;m--){var p=this.layers[m];if(p._visible===!0&&p.layerType!=="threeLayer"&&p.layerType!=="ThreeLayer"){var y=p.map.getZoom(),v=p.getOptions().zoomThreshold;if((!v||!(y<=v[0]||y>=v[1]))&&p.options.enablePicked&&p.pick&&(p.options.onMousemove||p.options.autoSelect)&&(y=p.pick(A.x,A.y,"onMousemove"),!u&&(this.webglLayer.map.map.platform.style.cursor="default",u=y.dataIndex!==-1)&&(this.webglLayer.map.map.platform.style.cursor="pointer"),p.options.onMousemove&&p.options.onMousemove(y,A),p.options.autoSelect&&(i=!0),A.cancelBubble===!0))break}}i&&(this.webglLayer.isAnimation||this.webglLayer.render())}},{key:"destroy",value:function(){this.destroyAllLayers(),this.removeAllLayers()}}]),a}(),$d=function(){function a(A){var i=this;fr(this,a),this.options={autoUpdate:!0},this._visible=!0,ln(this.options,A);var u=A.pointOffset;this.webglLayer=A.webglLayer||new ph(A.map,this.options),this.layerManager=new Bm({autoUpdate:this.options.autoUpdate,webglLayer:this.webglLayer}),this.effectManager=new gc(this.webglLayer.gl),this.webglRender={render:function(){}},this.options.effects&&this.effectManager.setEffects([this.webglRender].concat(this.options.effects)),this.webglLayer.onRender(function(m){i._render(m)}),this.webglLayer.onClick=function(m){i._visible&&i.layerManager.onClick(m)},this.webglLayer.onDblClick=function(m){i._visible&&i.layerManager.onDblClick(m)},this.webglLayer.onRightClick=function(m){i._visible&&i.layerManager.onRightClick(m)},this.webglLayer.onMousemove=function(m){i._visible&&i.layerManager.onMousemove(m)},u||this.webglLayer.options.mapType==="cesium"||(u=this.webglLayer.map.getCenter(),this.webglLayer.options.pointOffset=[u.lng,u.lat]),this.webglLayer.map.onResize(function(){i.effectManager.onResize()}),(this.postProcessing=A.postProcessing)&&(this.postProcessing.setWebglLayer(this.webglLayer),A=this.postProcessing.getThreeLayer(),this.addLayer(A),this.postProcessing.initialize(A),A.postProcessing=this.postProcessing)}return mr(a,[{key:"renderCanvas",value:function(A){var i=this;this.postProcessing?this.postProcessing.addRender(function(){i.layerManager.renderGLLayers(A)}):this.layerManager.renderGLLayers(A),this.layerManager.renderThreeLayers(A),this.layerManager.renderThreeLayer(A)}},{key:"render",value:function(){this.webglLayer&&this.webglLayer.render()}},{key:"_render",value:function(A){var i=this;if(this._visible){var u=this.options.effects;u&&0<u.length?(this.webglRender.render=function(){i.renderCanvas(A)},this.effectManager.render()):(this.webglLayer.saveFramebuffer(),this.renderCanvas(A),this.webglLayer.restoreFramebuffer())}}},{key:"onRender",value:function(A){this.webglLayer.onRender(A)}},{key:"destroy",value:function(){this.stopAnimation(),this.layerManager.destroy(),this.effectManager.destroy(),this.webglLayer.destroy()}},{key:"isRequestAnimation",value:function(){return this.layerManager.isRequestAnimation()}},{key:"startAnimation",value:function(){this.webglLayer.startAnimation()}},{key:"stopAnimation",value:function(){this.webglLayer.stopAnimation()}},{key:"show",value:function(){this._visible!==!0&&(this._visible=!0,this.webglLayer.render(),this.isRequestAnimation()&&this.startAnimation())}},{key:"hide",value:function(){this._visible!==!1&&(this._visible=!1,this.stopAnimation(),this.webglLayer.clear())}},{key:"showLayer",value:function(A){this.layerManager.showLayer(A)}},{key:"hideLayer",value:function(A){this.layerManager.hideLayer(A)}},{key:"add",value:function(A){this.addLayer(A)}},{key:"remove",value:function(A){this.removeLayer(A)}},{key:"addLayer",value:function(A){this.layerManager.addLayer(A)}},{key:"removeLayer",value:function(A){this.layerManager.removeLayer(A)}},{key:"removeAllLayers",value:function(){this.layerManager.removeAllLayers()}},{key:"getAllLayers",value:function(){return this.layerManager.getAllLayers()}},{key:"getAllThreeLayers",value:function(){return this.layerManager.getAllThreeLayers()}}]),a}(),cA=function(){function a(A){fr(this,a),this._visible=!0,this.options=this.getCommonDefaultOptions(),this.options=ln(this.options,this.getDefaultOptions()),this.autoUpdate=!1,this.options=ln(this.options,A),this.options.data&&(this.data=this.options.data,delete this.options.data)}return mr(a,[{key:"getCommonDefaultOptions",value:function(){return{}}},{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(A){}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy()}},{key:"show",value:function(){this._visible=!0}},{key:"hide",value:function(){this._visible=!1}},{key:"render",value:function(){}},{key:"clear",value:function(){this.setData([])}},{key:"setData",value:function(A,i){i=i||{},this.data=A,this.onDataChanged&&this.onDataChanged(this.getData()),this.onChanged&&this.onChanged(this.getOptions(),this.getData(),i),i.autoRender!==!1&&this.webglLayer&&this.webglLayer.render()}},{key:"getData",value:function(){return this.data||[]}},{key:"setOptions",value:function(A,i){A=A||{},i=i||{};var u=ln({},this.getOptions());ln(this.options,A),this.onOptionsChanged&&this.onOptionsChanged(this.getOptions(),u),this.onChanged&&this.onChanged(this.getOptions(),this.getData(),i),A.data?(this.setData(A.data,i),delete A.data):i.autoRender!==!1&&this.webglLayer&&this.webglLayer.render()}},{key:"getOptions",value:function(){return this.options||{}}},{key:"onOptionsChanged",value:function(A,i){}},{key:"onDataChanged",value:function(A){}},{key:"onChanged",value:function(A,i){}},{key:"onDestroy",value:function(){}},{key:"lnglatToMercator",value:function(A,i){}},{key:"setWebglLayer",value:function(A){this.webglLayer=A}},{key:"getWebglLayer",value:function(){return this.webglLayer}},{key:"isRequestAnimation",value:function(){return this.autoUpdate}}]),a}(),ui=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.pickedColor=[-1,-1,-1],i}return tn(A,a),mr(A,[{key:"getCommonDefaultOptions",value:function(){return{pickWidth:1,pickHeight:1,blend:"default",zIndex:0,zoomThreshold:[0,30],repeat:!1,enablePicked:!1,autoSelect:!1,selectedIndex:-1,selectedColor:"rgba(20, 20, 200, 1.0)"}}},{key:"commonInitialize",value:function(i){var u=this.getOptions();this.gl=i,u.enablePicked&&(this.pickBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}))}},{key:"getCommonAttributes",value:function(){var i=[];return this.getOptions().enablePicked&&i.push({name:"aPickColor",buffer:this.pickBuffer,size:3,type:"FLOAT",stride:12,offset:0}),i}},{key:"getProperty",value:function(i,u,m){return Object.prototype.toString.call(u)==="[object Function]"?u(m):(u=m[i]||u,"properties"in m&&i in m.properties&&(u=m.properties[i]),u)}},{key:"normizedColor",value:function(i){var u=i;return i instanceof Array||(u=kt(i).unitArray()),u[3]===void 0&&(u[3]=1),u}},{key:"normizedPoint",value:function(i){var u=this.getPointOffset();if(!i||i[0]===void 0||i[1]===void 0)return[u[0],u[1],0];var m=Number(i[0]),p=Number(i[1]);-180<=m&&180>=m&&-90<=p&&90>=p&&(p=this.webglLayer.map.lnglatToMercator(m,p),m=p[0],p=p[1]);var y=Number(i[2])||0;return this.webglLayer&&this.webglLayer.options.mapType==="cesium"&&window.Cesium?(m=this.convertLngLat([m,p]),y=window.Cesium.Cartesian3.fromDegrees(m[0],m[1],y),m=y.x,p=y.y,y=y.z):this.webglLayer&&this.webglLayer.options.mapType==="bmapgl"&&this.webglLayer.map.map.mapType==="B_EARTH_MAP"&&(m=this.convertLngLat([m,p]),y=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:m[0],lat:m[1]}),m=y.x,p=y.y,y=y.z),3<i.length?[m-u[0],p-u[1],y].concat(Fn(i.slice(3))):[m-u[0],p-u[1],y]}},{key:"convertLngLat",value:function(i){return[i[0]/2003750834e-2*180,180/Math.PI*(2*Math.atan(Math.exp(i[1]/2003750834e-2*180*Math.PI/180))-Math.PI/2)]}},{key:"getPointOffset",value:function(){var i=[0,0],u=this.getOptions();return this.webglLayer&&this.webglLayer.options.pointOffset?i=this.webglLayer.options.pointOffset:u.pointOffset&&(i=u.pointOffset),i}},{key:"indexToRgb",value:function(i){i++;var u=Math.floor(i/65536);i-=65536*u;var m=Math.floor(i/256);return[i-256*m,m,u]}},{key:"rgbToIndex",value:function(i){for(var u=i.length/4,m=Math.floor(u/2),p=function(k){return i[k]+256*i[k+1]+65536*i[k+2]-1},y=0;;y++){var v=m+y,M=m-y;if(v===M){if(v=p(4*v),-1<v)return v}else{if(v<u){var R=p(4*v);if(-1<R)return R}if(0<=M&&(R=p(4*M),-1<R))return R;if(v>=u&&0>M)break}}return-1}},{key:"getCommonUniforms",value:function(i){i=i.isPickRender;var u=this.getOptions(),m={};if(u.enablePicked){var p=0<=u.selectedIndex?u.selectedIndex:-1;p=u.autoSelect?this.pickedColor:this.indexToRgb(p),m=ln(m,{uSelectedColor:this.normizedColor(u.selectedColor),uEnablePicked:u.enablePicked,uPickedColor:p.map(function(y){return y/255}),uIsPickRender:!!i})}return m}},{key:"pick",value:function(i,u,m){var p=this.getOptions(),y=this.gl,v=this.webglLayer._dpr;this.webglLayer.saveFramebuffer(),this.webglLayer.bindFramebuffer(this.webglLayer.pickFBO),this.webglLayer.clear(),this.render({gl:y,isPickRender:!0,matrix:this.webglLayer.matrix,projectionMatrix:this.webglLayer.projectionMatrix,viewMatrix:this.webglLayer.viewMatrix,orthoMatrix:this.webglLayer.orthoMatrix});var M=new Uint8Array(4*p.pickWidth*p.pickHeight);return y.readPixels(i*v-Math.floor(p.pickWidth/2),y.canvas.height-u*v-Math.floor(p.pickHeight/2),p.pickWidth,p.pickHeight,y.RGBA,y.UNSIGNED_BYTE,M),i=this.rgbToIndex(M),this.pickAfter&&(i=this.pickAfter(M,i+1)),this.setPickedIndex&&this.setPickedIndex(i,m),m=this.getData(),this.pickedColor=[M[0],M[1],M[2]],this.webglLayer.restoreFramebuffer(),{dataIndex:i,dataItem:m[i]}}},{key:"setGLState",value:function(i){this.webglLayer.stateManager.setState(i,this.options)}},{key:"addMultipleCoords",value:function(i,u,m){if(!this.options.repeat||!this.webglLayer||this.webglLayer.options.mapType!=="bmapgl"||this.webglLayer.map.map.mapType==="B_EARTH_MAP")return[i];var p=this.webglLayer.map.map;u=u||p.getZoom();var y=m?p.worldSize(u):4007545274461451e-8;if(u=function(O){return[[O[0]-y,O[1],O[2]||0],[O[0]+y,O[1],O[2]||0]]},i instanceof Array&&!(i[0]instanceof Array))return u=u(i),u=ni(u,2),[i,u[0],u[1]];if(i instanceof Array&&i[0]instanceof Array&&!(i[0][0]instanceof Array)){m=[],p=[];for(var v=0;v<i.length;v++){var M=u(i[v]);M=ni(M,2);var R=M[1];m.push(M[0]),p.push(R)}return[i,m,p]}for(m=[],p=[],v=0;v<i.length;v++){M=[],R=[];for(var k=0;k<i[v].length;k++){var _=u(i[v][k]);_=ni(_,2);var T=_[1];M.push(_[0]),R.push(T)}m.push(M),p.push(R)}return[i,m,p]}}]),A}(cA),mc=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.name="CircleLayer",i.bufferData=[],i.initializeTime=new Date,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{depthWrite:!0,depthTest:!0,size:10,unit:"px",color:"blue",borderWidth:0,borderColor:"#000000",antialias:!0}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.program=new Ur(this.gl,{vertexShader:`attribute vec3 aPos;attribute float aSize;attribute float aIndex;attribute vec4 aColor;attribute float aBorderWidth;attribute vec4 aBorderColor;varying vec4 vColor;varying vec3 vPosition;varying vec3 vFragPosition;varying float vSize;varying float vBorderWidth;varying vec4 vBorderColor;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vBorderWidth=aBorderWidth*uZoomUnits;vBorderColor=aBorderColor;float x=aPos.x;float y=aPos.y;float z=aPos.z*uZoomUnits;vSize=aSize*uZoomUnits+vBorderWidth;if(aIndex==1.0){x+=vSize;y-=vSize;}else if(aIndex==2.0){x-=vSize;y+=vSize;}else if(aIndex==3.0){x+=vSize;y+=vSize;}else{x-=vSize;y-=vSize;}vPosition=aPos;vFragPosition=vec3(x,y,z);gl_Position=uMatrix*vec4(vFragPosition,1.0);
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:"varying vec3 vPosition;varying float vSize;varying vec3 vFragPosition;varying vec4 vColor;varying float vBorderWidth;varying vec4 vBorderColor;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float lineWidth;uniform float uAntiAliasing;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>vSize){discard;}vec4 color=vColor;float r=vSize-vBorderWidth;if(vBorderWidth>0.0){if(d>r){color=vBorderColor;}else if(uAntiAliasing==1.0&&d>0.95*r){color=vBorderColor;float st=1.0-smoothstep(0.95*r,r,d);color.r+=(vColor.r-vBorderColor.r)*st;color.g+=(vColor.g-vBorderColor.g)*st;color.b+=(vColor.b-vBorderColor.b)*st;color.a+=(vColor.a-vBorderColor.a)*st;}}if(uAntiAliasing==1.0&&d>0.95*vSize&&d<=vSize){color.a*=1.0-smoothstep(0.95*vSize,vSize,d);}gl_FragColor=color;}",defines:u.enablePicked?["PICK"]:[]},this),this.buffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=Float32Array.BYTES_PER_ELEMENT;var m=14*u;u=[{stride:m,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:m,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:3*u},{stride:m,name:"aIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:4*u},{stride:m,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:5*u},{stride:m,name:"aBorderWidth",buffer:this.buffer,size:1,type:"FLOAT",offset:9*u},{stride:m,name:"aBorderColor",buffer:this.buffer,size:4,type:"FLOAT",offset:10*u}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onChanged",value:function(i,u){this.gl&&u&&(this.uniforms={},this.data=u,this.processData(),i.enablePicked&&this.parsePickData(u))}},{key:"processData",value:function(){var i=this,u=[],m=[];this.data.forEach(function(p,y){var v=p.properties||{},M=function(U){return p[U]||v[U]||i.options[U]},R=M("color"),k=M("size"),_=M("borderWidth");M=M("borderColor"),R=i.normizedColor(R),M=i.normizedColor(M);for(var T=i.normizedPoint(p.geometry.coordinates),O=0;4>O;O++)u.push(T[0],T[1],T[2]||0,k,O),u.push(R[0],R[1],R[2],R[3]),u.push(_,M[0],M[1],M[2],M[3]);R=4*y,0<y&&m.push(R-1,R),m.push(R,R+1,R+2,R+3)}),this.bufferData=u,this.indexData=m,this.buffer.updateData(new Float32Array(u)),this.indexBuffer.updateData(new Uint32Array(m))}},{key:"parsePickData",value:function(i){var u=[];if(this.getOptions().enablePicked){for(var m=0;m<i.length;m++){var p=this.indexToRgb(m);u.push(p[0]/255,p[1]/255,p[2]/255),u.push(p[0]/255,p[1]/255,p[2]/255),u.push(p[0]/255,p[1]/255,p[2]/255),u.push(p[0]/255,p[1]/255,p[2]/255)}this.pickBuffer.updateData(new Float32Array(u))}}},{key:"render",value:function(i){var u=this.getOptions(),m=this.program,p=i.gl,y=i.matrix;this.setGLState({blend:!0,blendEquation:p.FUNC_ADD,blendFunc:Gs(p,u.blend||"lighter"),depthTest:u.depthTest,depthMask:u.depthWrite}),m.use(p),this.vertexArray.bind(),this.indexBuffer.bind(),u=this.map.getZoomUnits(),ln(this.uniforms,this.getCommonUniforms(i),{uZoomUnits:this.options.unit==="px"?u:1,uMatrix:y,uAntiAliasing:this.options.antialias?1:0}),m.setUniforms(this.uniforms),p.drawElements(p.TRIANGLE_STRIP,this.indexData.length,p.UNSIGNED_INT,0)}}]),A}(ui),yf={wave:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;varying float vWidth;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}vec4 color=vColor;float R=vRadius;float center=vSize;float time=vStartTime+uTime;float alpha=sin((R-d)/R*trail*2.0*3.14+time/duration);if(d<=center){if(uAntiAliasing==1.0&&d>0.9*center&&d<=center){if(alpha>=0.5){color.a=0.9;}else{color.a=1.0-smoothstep(0.9*center,center,d);}}}else{if(alpha>=0.5){color.a=0.9;if(uAntiAliasing==1.0){if(alpha>=0.5&&alpha<=0.6){color.a*=smoothstep(0.0,0.1,alpha-0.5);}if(d>=0.98*R&&d<=R){color.a*=1.0-smoothstep(0.98,1.0,d/R);}}}else{color.a=0.0;}}gl_FragColor=color;}",bubble:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;varying float vWidth;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}float time=vStartTime+uTime;float range=mod(time,(duration+trail));float percent=0.0;if(range<=duration){percent=range/duration;}else{percent=1.0;}float center=vSize;float R=vRadius;float r=R*percent;vec4 color=vColor;if(d<=center){if(uAntiAliasing==1.0&&d>0.9*center&&d<=center){color.a=1.0-smoothstep(0.9*center,center,d);}}else{if(d<r){color.a=smoothstep(0.1,0.9,pow(d/r,2.0)*0.9);if(uAntiAliasing==1.0&&d>=0.9*r&&d<=r){color.a*=1.0-smoothstep(0.9,1.0,d/r);}if(range>duration){color.a*=1.0-(range-duration)/trail;}}else{color.a=0.0;}}gl_FragColor=color;}",breath:"varying vec4 vPosition;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}vec4 color=vColor;if(uAntiAliasing==1.0&&d>0.9*vRadius&&d<=vRadius){color.a=1.0-smoothstep(0.9*vRadius,vRadius,d);}float time=vStartTime+uTime;float range=mod(time,(duration+trail));float percent=0.0;if(range<=duration){percent=range/duration;}else{percent=1.0;}color.a*=abs(1.0-percent*2.0)+0.2;gl_FragColor=color;}",radar:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;varying float vWidth;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}float time=vStartTime+uTime;float range=mod(time,duration);float percent=range/duration;float center=vSize;float startDeg=360.0*percent;vec4 color=vColor;float deltaX=vFragPosition.x-vPosition.x;float deltaY=vFragPosition.y-vPosition.y;float currDeg=degrees(atan(deltaX/deltaY));if(deltaX>=0.0&&deltaY<=0.0){currDeg=180.0+currDeg;}if(deltaX<=0.0&&deltaY<=0.0){currDeg=180.0+currDeg;}if(deltaX<=0.0&&deltaY>=0.0){currDeg=360.0+currDeg;}float maxDeg=trail;if(trail<0.0){currDeg=-currDeg;maxDeg=-trail;}float modDeg=mod((currDeg-startDeg),360.0);if(modDeg<maxDeg){color.a=modDeg/maxDeg;}else{color.a=0.0;}if(uAntiAliasing==1.0&&d>0.95*vRadius&&d<=vRadius){color.a=color.a-smoothstep(0.95*vRadius,vRadius,d);}gl_FragColor=color;}"},vc=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.name="RippleCircleLayer",i.autoUpdate=!0,i.bufferData=[],i.initializeTime=new Date,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){var i=1;return this.options.type==="radar"&&(i=120),{depthWrite:!1,depthTest:!0,type:"bubble",size:10,duration:1,trail:i,unit:"px",random:!0,color:"blue",antialias:!0,radius:function(u){return 2*u}}}},{key:"initialize",value:function(i){this.gl=i,this.program=new Ur(this.gl,{vertexShader:`attribute vec3 aPos;attribute float aSize;attribute float aIndex;attribute vec4 aColor;attribute float aStartTime;attribute float aRadius;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vWidth;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vStartTime=aStartTime;vSize=aSize*uZoomUnits;vRadius=aRadius*uZoomUnits;float x=aPos.x;float y=aPos.y;float z=aPos.z*uZoomUnits;float R=vRadius;if(aIndex==1.0){x+=R;y-=R;}else if(aIndex==2.0){x-=R;y+=R;}else if(aIndex==3.0){x+=R;y+=R;}else{x-=R;y-=R;}vPosition=vec4(aPos.xy,z,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:yf[this.options.type]||"bubble",defines:this.options.enablePicked?["PICK"]:[]},this),this.buffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});var u=[{stride:44,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:44,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:12},{stride:44,name:"aIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:16},{stride:44,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:20},{stride:44,name:"aRadius",buffer:this.buffer,size:1,type:"FLOAT",offset:36},{stride:44,name:"aStartTime",buffer:this.buffer,size:1,type:"FLOAT",offset:40}];u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onChanged",value:function(i,u){this.gl&&u&&(this.uniforms={duration:i.duration,trail:i.trail},this.data=u,this.processData(),i.enablePicked&&this.parsePickData(u))}},{key:"processData",value:function(){var i=this,u=[],m=[];this.data.forEach(function(p,y){var v=p.size||i.options.size,M=p.radius||i.options.radius||1.618*v;typeof M=="function"&&(M=M(v));var R=p.color||i.options.color;R=i.normizedColor(R),p=i.normizedPoint(p.geometry.coordinates);for(var k=i.options.random?Math.random()*i.data.length*9999:0,_=0;4>_;_++)u.push(p[0],p[1],p[2]||0,v,_),u.push(R[0],R[1],R[2],R[3]),u.push(M),u.push(k);v=4*y,0<y&&m.push(v-1,v),m.push(v,v+1,v+2,v+3)}),this.bufferData=u,this.indexData=m,this.buffer.updateData(new Float32Array(u)),this.indexBuffer.updateData(new Uint32Array(m))}},{key:"parsePickData",value:function(i){var u=[];if(this.getOptions().enablePicked){for(var m=0;m<i.length;m++){var p=this.indexToRgb(m);u.push(p[0]/255,p[1]/255,p[2]/255),u.push(p[0]/255,p[1]/255,p[2]/255),u.push(p[0]/255,p[1]/255,p[2]/255),u.push(p[0]/255,p[1]/255,p[2]/255)}this.pickBuffer.updateData(new Float32Array(u))}}},{key:"render",value:function(i){var u=this.getOptions(),m=this.program,p=i.gl,y=i.matrix;m.use(p);var v=this.map.getZoomUnits();ln(this.uniforms,this.getCommonUniforms(i),{uTime:(new Date-this.initializeTime)/1e3,uZoomUnits:u.unit==="m"?1:v,uMatrix:y,uAntiAliasing:u.antialias?1:0}),m.setUniforms(this.uniforms),this.setGLState({blend:!0,blendEquation:p.FUNC_ADD,blendFunc:Gs(p,u.blend||"lighter"),depthTest:u.depthTest,depthMask:u.depthWrite}),0<this.indexData.length&&(this.vertexArray.bind(),this.indexBuffer.bind(),p.drawElements(p.TRIANGLE_STRIP,this.indexData.length,p.UNSIGNED_INT,0))}}]),A}(ui),Gp=_o(yf),Em=Ot(function(a,A){A.__esModule=!0;var i=Zo&&Zo.__esModule?Zo:{default:Zo},u=tc&&tc.__esModule?tc:{default:tc};A.default=function m(p,y,v){p===null&&(p=Function.prototype);var M=(0,u.default)(p,y);if(M===void 0){if(p=(0,i.default)(p),p!==null)return m(p,y,v)}else return"value"in M?M.value:(y=M.get,y===void 0?void 0:y.call(v))}}),Ka=Gt(Em);sr.deviation=function(a,A,i,u){var m=A&&A.length,p=Math.abs(wr(a,0,m?A[0]*i:a.length,i));if(m){m=0;for(var y=A.length;m<y;m++)p-=Math.abs(wr(a,A[m]*i,m<y-1?A[m+1]*i:a.length,i))}for(m=A=0;m<u.length;m+=3){y=u[m]*i;var v=u[m+1]*i,M=u[m+2]*i;A+=Math.abs((a[y]-a[M])*(a[v+1]-a[y+1])-(a[y]-a[v])*(a[M+1]-a[y+1]))}return p===0&&A===0?0:Math.abs((A-p)/p)},sr.flatten=function(a){for(var A=a[0][0].length,i={vertices:[],holes:[],dimensions:A},u=0,m=0;m<a.length;m++){for(var p=0;p<a[m].length;p++)for(var y=0;y<A;y++)i.vertices.push(a[m][p][y]);0<m&&(u+=a[m-1].length,i.holes.push(u))}return i},sr.default=sr;var Im=typeof qg=="undefined"?"__target":qg(),$v=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,zu=window.URL||window.webkitURL,Sl=window.Worker;if(Sl){var Vp=Xn("self.onmessage = function () {}"),Wp=new Uint8Array(1);try{if(/(?:Trident|Edge)\/(?:[567]|12)/i.test(navigator.userAgent))throw Error("Not available");var jp=new Sl(Vp);jp.postMessage(Wp,[Wp.buffer])}catch(a){Sl=null}finally{zu.revokeObjectURL(Vp),jp&&jp.terminate()}}var tg=new function(a,A){return function(i){var u=this;if(A){if(Sl&&!i)return i=(""+A).replace(/^function.+?{/,"").slice(0,-1),i=Xn(i),this[Im]=new Sl(i),zu.revokeObjectURL(i),this[Im];var m={postMessage:function(p){u.onmessage&&setTimeout(function(){return u.onmessage({data:p,target:m})})}};A.call(m),this.postMessage=function(p){setTimeout(function(){return m.onmessage({data:p,target:u})})},this.isThisThread=!0}else return new Sl(a)}}("./worker.js",function(a,A){}),Tm={window:1,windowAnimation:2,gradual:3,ripple:4,water:6,repeat:7},Ve=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="ShapeLayer",i._isShow=!0,u=i.getOptions(),(u.style==="windowAnimation"||u.style==="ripple"||0<u.riseTime)&&(i.autoUpdate=!0),i.selectedColor=[-1,-1,-1],i.textureCache={},i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{color:"rgba(50, 50, 230, 1.0)",opacity:1,height:0,isTextureFull:!1,topColor:"rgba(76, 76, 76, 0.8)",textureRotate:0,textureScale:1,useLight:!0,useTopColor:!1,riseTime:0,polygonOffset:[0,0],depthTest:!0,depthFunc:"LEQUAL",zIndex:0,zFightFactor:0}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.dataMgr=new Di(this,this.gl),this.texture=null,this.isUseTexture=!1;var m=[];u.enablePicked&&m.push("PICK"),u.texture&&m.push("USE_TEXTURE"),this.program=new Ur(this.gl,{vertexShader:`precision highp float;uniform vec4 uSelectedColor;attribute vec4 a_pos;attribute vec3 a_normal;attribute vec4 a_color;attribute vec4 a_pre_color;attribute float a_height;attribute float a_pre_height;attribute float a_block_index;
#if defined(USE_TEXTURE)
attribute vec2 a_texture_coord;
#endif
uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_use_lighting;uniform bool u_use_texture;uniform vec3 u_ripple_center;uniform float u_radius;uniform float style;uniform float alpha;uniform float time;uniform float dataTime;uniform float riseTime;uniform vec2 uMapCenter;uniform float uMapZoom;uniform float u_zIndex;uniform float u_zFightFactor;varying float v_height;varying vec4 v_color;varying vec3 v_position;varying vec2 v_texture_coord;const vec3 point_color=vec3(0.06,0.06,0.06);const vec3 light_color=vec3(0.53,0.53,0.53);const vec3 light_color_2=vec3(0.4,0.4,0.4);const vec3 uAmbientColor=vec3(0.8,0.8,0.8);const vec3 uLightingDirection=vec3(0.0,1.0,1.0);const vec3 uDirectionalColor=vec3(1.0,1.0,1.0);float getTransitionValue(float pre_value,float to_value,float dataTime,float riseTime){float result=0.0;if(pre_value==to_value){result=to_value;}else{if(riseTime>0.0&&dataTime<riseTime){result=(pre_value+(to_value-pre_value)*(dataTime/riseTime));}else{result=to_value;}}return result;}void main(){vec4 pos=a_pos;pos.z=pos.z+pos.w*getTransitionValue(a_pre_height,a_height,dataTime,riseTime);v_position=pos.xyz;v_height=a_height;
#if defined(USE_TEXTURE)
if(u_use_texture){v_texture_coord=a_texture_coord;}
#endif
pos.z+=u_zIndex;vec4 position=u_proj_matrix*u_mv_matrix*vec4(pos.xyz,1.0);gl_Position=position;if(u_zFightFactor>0.){float v_z_offset=-a_block_index/u_zFightFactor;gl_Position.z=gl_Position.z+v_z_offset;}vec4 icolor=a_color;
#if defined(PICK)
if(mapvIsPicked()){icolor=uSelectedColor;}
#endif
if(u_use_lighting){vec3 N=normalize(vec3(u_normal_matrix*vec4(a_normal,1.0)));vec4 point_dir=u_mv_matrix*vec4(0,1,0,0);vec3 L_point=normalize(point_dir.xyz);float lambert_point=max(0.0,dot(N,-L_point));vec4 light_dir=u_mv_matrix*vec4(u_side_light_dir,0);vec3 L=normalize(light_dir.xyz);float lambert=max(0.0,dot(N,-L));if(pos.z<5.0){float deepGradientColor=(5.0-pos.z)/8.0;lambert=lambert-deepGradientColor;}vec4 light_dir_2=u_mv_matrix*vec4(0,0,-1,0);vec3 L2=normalize(light_dir_2.xyz);float lambert_2=max(0.0,dot(N,-L2));if(a_pre_color.r==a_color.r&&a_pre_color.g==a_color.g&&a_pre_color.b==a_color.b){}else{if(riseTime>0.0&&dataTime<riseTime){icolor.r=a_pre_color.r+(a_color.r-a_pre_color.r)*(dataTime/riseTime);icolor.g=a_pre_color.g+(a_color.g-a_pre_color.g)*(dataTime/riseTime);icolor.b=a_pre_color.b+(a_color.b-a_pre_color.b)*(dataTime/riseTime);}}v_color.rgb=icolor.rgb+icolor.rgb*light_color*lambert+icolor.rgb*light_color_2*lambert_2+icolor.rgb*point_color*lambert_point;v_color.a=icolor.a;if(u_use_texture){mat3 normalMatrix=mat3(u_normal_matrix);vec3 transformedNormal=normalMatrix*a_normal;vec3 dir=uLightingDirection;dir=vec3(normalMatrix*vec3(0.0,-1.0,2.0));float directionalLightWeighting=max(dot(normalize(transformedNormal),normalize(dir)),0.0);vec4 vLightWeighting;vLightWeighting=vec4(uAmbientColor+uDirectionalColor*directionalLightWeighting,1.0);v_color=vLightWeighting;}}else{v_color=icolor;}}`,fragmentShader:"precision highp float;varying vec4 v_color;varying vec3 v_position;varying float v_height;varying vec2 v_texture_coord;uniform vec3 u_ripple_center;uniform vec4 top_color;uniform float u_zoom_units;uniform float u_radius;uniform float style;uniform float alpha;uniform float time;uniform sampler2D u_sampler;uniform bool u_use_lighting;uniform bool u_use_texture;uniform bool u_use_top_color;void main(){vec4 color=vec4(v_color);vec4 textureColor=vec4(1.0,1.0,1.0,1.0);if(u_use_texture){if(style==6.0){float x=v_texture_coord.s;float y=v_texture_coord.t;vec2 cPos=-1.0+2.0*gl_FragCoord.xy/MAPV_resolution;float cLength=length(cPos);vec2 uv=gl_FragCoord.xy/MAPV_resolution+(cPos/cLength)*cos(cLength*12.0-time/1000.0*4.0)*0.03;textureColor=texture2D(u_sampler,uv/2.0+vec2(x,y));}else if(style==7.0){float tWidth=1.*u_zoom_units;float deltaX=mod(v_texture_coord.x,tWidth);float deltaY=mod(v_texture_coord.y,tWidth);if(deltaX>=0.&&deltaX<=tWidth){vec2 uv=vec2(deltaX,deltaY)/tWidth;vec4 texture=texture2D(u_sampler,uv);textureColor=texture.a>=0.1 ? texture : vec4(0.,0.,0.,0.);}}else{textureColor=texture2D(u_sampler,vec2(v_texture_coord.s,v_texture_coord.t));}if(u_use_lighting){color=vec4(textureColor*v_color*1.1);}else{color=textureColor;}}if(u_use_top_color&&v_position.z>=v_height){color=top_color;}if(style==1.0||style==2.0){float t=time/1000.0;float diffDistance=5.0;float modX=mod(v_position.x,diffDistance*2.0);float modZ=mod(v_position.z,diffDistance*2.0);if(modX<diffDistance&&modZ<diffDistance&&v_position.z<v_height){color*=1.05;if(time>0.0&&style==2.0){float iX=ceil(v_position.x/diffDistance);float iZ=ceil(v_position.z/diffDistance);float timeDistance=8.0;t+=tan(sin(iZ));color*=(1.0+mod(t,timeDistance)/timeDistance);}}}else if(style==5.0){float t=time/1000.0;float diffDistance=10.0;float modZ=mod(v_position.z-t*40.0,diffDistance*2.0);color.a=1.0-pow(v_position.z/v_height,0.5);if(v_position.z/v_height<0.3){color.r+=0.2;color.g+=0.2;color.b+=0.2;}if(modZ<diffDistance*2.0-4.0){discard;}}else if(style==3.0){float diffDistance=10.0;float modX=mod(v_position.x,diffDistance*2.0);color.a=1.0-pow(v_position.z/v_height,0.3);}else if(style==4.0){float dis=distance(u_ripple_center,v_position);float rSize=400.0;if(v_position.z>=v_height){color=top_color;}if(dis>u_radius-rSize&&dis<u_radius+rSize){color*=(1.0-abs(dis-u_radius)/rSize)*2.0+1.0;}}else if(style==6.0){}color.a*=alpha;gl_FragColor=color;}",defines:m},this),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.heightBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.textureBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),m=[{name:"a_pos",buffer:this.vertexBuffer,stride:28,size:4,type:"FLOAT",offset:0},{name:"a_normal",buffer:this.vertexBuffer,size:3,stride:28,type:"FLOAT",offset:16},{name:"a_color",buffer:this.colorBuffer,size:4,stride:32,type:"FLOAT",offset:0},{name:"a_pre_color",buffer:this.colorBuffer,size:4,stride:32,type:"FLOAT",offset:16},{name:"a_height",buffer:this.heightBuffer,size:1,stride:12,type:"FLOAT",offset:0},{name:"a_pre_height",buffer:this.heightBuffer,size:1,stride:12,type:"FLOAT",offset:4},{name:"a_block_index",buffer:this.heightBuffer,size:1,stride:12,type:"FLOAT",offset:8}],u.texture&&m.push({name:"a_texture_coord",buffer:this.textureBuffer,size:2,stride:8,type:"FLOAT",offset:0}),m=m.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:m}),this.initializeTime=new Date,this.normalMatrix=ur.create()}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){var m=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){m.loadTexture(function(){m.dataMgr.parseData(u),m.dataTime=new Date,m.webglLayer.render()})},0))}},{key:"render",value:function(i){var u=i.gl,m=i.projectionMatrix,p=i.viewMatrix;if(this._isShow){var y=this.getData();if(y&&!(0>=y.length)){y=this.getOptions();var v=this.program;if(v.use(u),!y.texture||this.texture){var M=0;y.style&&Tm[y.style]&&(M=Tm[y.style]);var R=[u.ONE,u.ZERO];y.blend?R=Gs(u,y.blend):(y.height===0||y.style==="gradual")&&(R=[u.ONE,u.ONE_MINUS_SRC_ALPHA]);var k=u.LEQUAL;y.depthFunc&&(k=u[y.depthFunc.toUpperCase()]),this.setGLState({cullFace:!1,blend:!0,blendEquation:u.FUNC_ADD,blendFunc:R,polygonOffset:y.polygonOffset,depthTest:y.depthTest,depthMask:y.style!=="gradual",depthFunc:k}),R=this.normizedColor(y.topColor),y.style==="ripple"&&y.rippleLayer&&y.rippleLayer.data&&y.rippleLayer.data[0]&&(k=this.normizedPoint(y.rippleLayer.data[0].geometry.coordinates),v.setUniforms({u_ripple_center:[k[0],k[1],0],u_radius:y.rippleLayer.options.size*y.rippleLayer.currentScale})),k=en.fromValues(0,-1,2),y.lightDir&&(k=en.fromValues(y.lightDir[0],y.lightDir[1],y.lightDir[2]));var _=this.normalMatrix;ur.invert(_,p),ur.transpose(_,_),v.setUniforms(ln(this.getCommonUniforms(i),{u_normal_matrix:_,u_sampler:this.texture,u_proj_matrix:m,u_mv_matrix:p,u_zoom_units:this.map.getZoomUnits(),style:M,u_use_top_color:y.useTopColor,top_color:R,u_use_lighting:y.useLight,u_use_texture:this.isUseTexture,alpha:parseFloat(y.opacity),time:new Date-this.initializeTime,dataTime:new Date-this.dataTime,riseTime:y.riseTime,u_side_light_dir:k,u_zIndex:y.zIndex,u_zFightFactor:y.zFightFactor})),i=this.dataMgr.getData(),0<i.vertex.length&&(this.vertexArray.bind(),this.indexBuffer.bind(),u.drawElements(u.TRIANGLES,i.index.length,u.UNSIGNED_INT,0))}}}else this.webglLayer.clear()}},{key:"loadTexture",value:function(i){var u=this,m=this.getOptions();m.texture?(this.isUseTexture=!0,wo(this.gl,m.texture,function(p,y){u.image=y,u.texture=p,i&&i(),u.webglLayer.render()})):(this.isUseTexture=!1,this.image=this.texture=null,i&&i())}}]),A}(ui);Di.prototype.initData=function(){this.outBuilding3d={pickColorVertex:[],vertex:[],texture:[],color:[],height:[],index:[]}},Di.prototype.getData=function(){return this.outBuilding3d},Di.prototype.initWorker=function(){this.worker=new tg,this.worker.onmessage=function(a){}},Di.prototype.parseData=function(a){var A=this;this.initData();for(var i=this.shapeLayer.getOptions(),u=0;u<a.length;u++){var m=a[u],p=m.height||i.height;"properties"in m&&"height"in m.properties&&(p=m.properties.height),p*=1;var y=m.color||i.color;"properties"in m&&"color"in m.properties&&(y=m.properties.color),"properties"in m&&"fillColor"in m.properties&&(y=m.properties.fillColor),Object.prototype.toString.call(y)==="[object Function]"&&(y=y(m)),y=this.shapeLayer.normizedColor(y);var v=this.shapeLayer.getProperty("angle",i.textureRotate,m),M=void 0;i.enablePicked&&(M=this.shapeLayer.indexToRgb(u));var R=void 0,k=void 0;if(i.riseTime&&(k=m.preColor,"properties"in m&&"preColor"in m.properties&&(k=m.properties.preColor),R=m.preHeight,"properties"in m&&"preHeight"in m.properties&&(R=m.properties.preHeight),R===void 0&&(R=0)),m.geometry.coordinates){if(m.geometry.type==="LineString"){var _=m.geometry.coordinates.map(function(W){return A.shapeLayer.normizedPoint(W)}),T=sr.flatten([_]);_=T.vertices,T=T.holes;for(var O=[],U=[],G=0;G<_.length;G+=3)O.push(_[G+0],_[G+1]),U.push(_[G+2]);this.parseBuilding3d(this.outBuilding3d,O,U,R,p,k,y,M,v,T,u)}if(m.geometry.type==="MultiPolygon"){for(_=m.geometry.coordinates,m=[],T=0;T<_.length;T++)m.push(_[T].map(function(W){return W.map(function(Y){return A.shapeLayer.normizedPoint(Y)})}));for(_=0;_<m.length;_++){T=[],O=[],G=sr.flatten(m[_]),U=G.vertices,G=G.holes;for(var X=0;X<U.length;X+=3)T.push(U[X+0],U[X+1]),O.push(U[X+2]);this.parseBuilding3d(this.outBuilding3d,T,O,R,p,k,y,M,v,G,u)}}else{for(_=[],T=0;T<m.geometry.coordinates.length;T++)_.push(m.geometry.coordinates[T].map(function(W){return A.shapeLayer.normizedPoint(W)}));for(_=sr.flatten(_),m=_.vertices,_=_.holes,T=[],O=[],U=0;U<m.length;U+=3)T.push(m[U+0],m[U+1]),O.push(m[U+2]);this.parseBuilding3d(this.outBuilding3d,T,O,R,p,k,y,M,v,_,u)}}}this.shapeLayer.vertexBuffer.updateData(new Float32Array(this.outBuilding3d.vertex)),this.shapeLayer.colorBuffer.updateData(new Float32Array(this.outBuilding3d.color)),this.shapeLayer.heightBuffer.updateData(new Float32Array(this.outBuilding3d.height)),this.shapeLayer.textureBuffer.updateData(new Float32Array(this.outBuilding3d.texture)),this.shapeLayer.indexBuffer.updateData(new Uint32Array(this.outBuilding3d.index)),i.enablePicked&&this.shapeLayer.pickBuffer.updateData(new Float32Array(this.outBuilding3d.pickColorVertex))},Di.prototype.getBounds=function(a,A){for(var i=a[0],u=a[1],m=a[0],p=a[1],y=0;y<a.length;y+=2)i=Math.min(a[y],i),u=Math.min(a[y+1],u),m=Math.max(a[y],m),p=Math.max(a[y+1],p);if(y=[(m-i)/2+i,(p-u)/2+u],A===0||!A)return{minX:i,minY:u,maxX:m,maxY:p,width:m-i,height:p-u,center:y};for(i=a.slice(0),u=0;u<i.length;u+=2)m=xi(a[u],a[u+1],y,A),i[u]=m[0],i[u+1]=m[1];return this.getBounds(i,0)},Di.prototype.parseBuilding3d=function(a,A,i,u,m,p,y,v,M,R,k){u===void 0&&(u=m);var _=this.shapeLayer.options,T=a.vertex,O=a.texture,U=a.color,G=a.height,X=a.pickColorVertex;a=a.index,p===void 0&&(p=y);var W=0,Y=0;if(this.shapeLayer.image&&(W=this.shapeLayer.image.width*_.textureScale,Y=this.shapeLayer.image.height*_.textureScale),_.style!=="gradual"){R=R&&R.length?sr(A,R,2):sr(A);var J=R[0],ot=R[1],ut=R[2];J=[A[2*J],A[2*J+1],1],ot=[A[2*ot],A[2*ot+1],1];var lt=[A[2*ut],A[2*ut+1],1];ut=[],en.cross(ut,[lt[0]-ot[0],lt[1]-ot[1],lt[2]-ot[2]],[J[0]-ot[0],J[1]-ot[1],J[2]-ot[2]]),ot=T.length/7;var wt;_.texture&&(wt=this.getBounds(A,M)),J=_.isTextureFull,lt=0;for(var Qt=A.length;lt<Qt;lt+=2){if(T.push(A[lt],A[lt+1],i[lt/2],1,ut[0],ut[1],ut[2]),U.push(y[0],y[1],y[2],y[3],p[0],p[1],p[2],p[3]),G.push(m,u,k),_.texture){var zt=xi(A[lt],A[lt+1],wt.center,M),ne=ni(zt,2);zt=ne[0],ne=ne[1],J?(zt=(zt-wt.minX)/wt.width,ne=(ne-wt.minY)/wt.height):(zt=(zt-wt.minX)/W,ne=(ne-wt.minY)/Y),O.push(zt,ne)}v&&X.push(v[0]/255,v[1]/255,v[2]/255)}for(M=0,wt=R.length;M<wt;M++)a.push(R[M]+ot)}if(!(m===u&&0>=m))for(M=0,R=A.length;M<R;M+=2)wt=T.length/7,Qt=A[M],zt=A[M+1],ut=[Qt,zt,i[M/2],0],ot=[Qt,zt,i[M/2],1],lt=M+2,ne=M+3,M===R-2&&(lt=0,ne=1),lt=A[lt],ne=A[ne],Qt=Math.sqrt(Math.pow(lt-Qt,2),Math.pow(ne-zt,2)),zt=[lt,ne,i[M/2],0],lt=[lt,ne,i[M/2],1],ne=[],en.cross(ne,[zt[0]-ut[0],zt[1]-ut[1],zt[2]-ut[2]],[ot[0]-ut[0],ot[1]-ut[1],ot[2]-ut[2]]),T.push(ut[0],ut[1],ut[2],ut[3]),T.push(ne[0],ne[1],ne[2]),T.push(ot[0],ot[1],ot[2],ot[3]),T.push(ne[0],ne[1],ne[2]),T.push(zt[0],zt[1],zt[2],zt[3]),T.push(ne[0],ne[1],ne[2]),T.push(lt[0],lt[1],lt[2],lt[3]),T.push(ne[0],ne[1],ne[2]),U.push(y[0],y[1],y[2],y[3]),U.push(p[0],p[1],p[2],p[3]),U.push(y[0],y[1],y[2],y[3]),U.push(p[0],p[1],p[2],p[3]),U.push(y[0],y[1],y[2],y[3]),U.push(p[0],p[1],p[2],p[3]),U.push(y[0],y[1],y[2],y[3]),U.push(p[0],p[1],p[2],p[3]),G.push(m),G.push(u),G.push(k),G.push(m),G.push(u),G.push(k),G.push(m),G.push(u),G.push(k),G.push(m),G.push(u),G.push(k),_.texture&&(J?(O.push(0,0),O.push(0,1),O.push(1,0),O.push(1,1)):(O.push(0,0),O.push(0,m/Y),O.push(Qt/W,0),O.push(Qt/W,m/Y))),v&&(X.push(v[0]/255,v[1]/255,v[2]/255),X.push(v[0]/255,v[1]/255,v[2]/255),X.push(v[0]/255,v[1]/255,v[2]/255),X.push(v[0]/255,v[1]/255,v[2]/255)),a.push(wt,wt+2,wt+3,wt,wt+3,wt+1)};var Hs=Ot(function(a,A){(function(i,u){a.exports=u()})($u,function(){function i(W,Y,J,ot,ut){for(;ot>J;){if(600<ot-J){var lt=ot-J+1,wt=Y-J+1,Qt=Math.log(lt),zt=.5*Math.exp(2*Qt/3);Qt=.5*Math.sqrt(Qt*zt*(lt-zt)/lt)*(0>wt-lt/2?-1:1),i(W,Y,Math.max(J,Math.floor(Y-wt*zt/lt+Qt)),Math.min(ot,Math.floor(Y+(lt-wt)*zt/lt+Qt)),ut)}for(lt=W[Y],wt=J,zt=ot,u(W,J,Y),0<ut(W[ot],lt)&&u(W,J,ot);wt<zt;){for(u(W,wt,zt),wt++,zt--;0>ut(W[wt],lt);)wt++;for(;0<ut(W[zt],lt);)zt--}ut(W[J],lt)===0?u(W,J,zt):(zt++,u(W,zt,ot)),zt<=Y&&(J=zt+1),Y<=zt&&(ot=zt-1)}}function u(W,Y,J){var ot=W[Y];W[Y]=W[J],W[J]=ot}function m(W,Y){return W<Y?-1:W>Y?1:0}function p(W,Y){y(W,0,W.children.length,Y,W)}function y(W,Y,J,ot,ut){for(ut||(ut=U(null)),ut.minX=Infinity,ut.minY=Infinity,ut.maxX=-Infinity,ut.maxY=-Infinity;Y<J;Y++){var lt=W.children[Y];v(ut,W.leaf?ot(lt):lt)}return ut}function v(W,Y){return W.minX=Math.min(W.minX,Y.minX),W.minY=Math.min(W.minY,Y.minY),W.maxX=Math.max(W.maxX,Y.maxX),W.maxY=Math.max(W.maxY,Y.maxY),W}function M(W,Y){return W.minX-Y.minX}function R(W,Y){return W.minY-Y.minY}function k(W){return(W.maxX-W.minX)*(W.maxY-W.minY)}function _(W){return W.maxX-W.minX+(W.maxY-W.minY)}function T(W,Y){return W.minX<=Y.minX&&W.minY<=Y.minY&&Y.maxX<=W.maxX&&Y.maxY<=W.maxY}function O(W,Y){return Y.minX<=W.maxX&&Y.minY<=W.maxY&&Y.maxX>=W.minX&&Y.maxY>=W.minY}function U(W){return{children:W,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function G(W,Y,J,ot,ut){for(var lt=[Y,J];lt.length;)if(J=lt.pop(),Y=lt.pop(),!(J-Y<=ot)){var wt=Y+Math.ceil((J-Y)/ot/2)*ot;i(W,wt,Y||0,J||W.length-1,ut||m),lt.push(Y,wt,wt,J)}}var X=function(W){W===void 0&&(W=9),this._maxEntries=Math.max(4,W),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};return X.prototype.all=function(){return this._all(this.data,[])},X.prototype.search=function(W){var Y=this.data,J=[];if(!O(W,Y))return J;for(var ot=this.toBBox,ut=[];Y;){for(var lt=0;lt<Y.children.length;lt++){var wt=Y.children[lt],Qt=Y.leaf?ot(wt):wt;O(W,Qt)&&(Y.leaf?J.push(wt):T(W,Qt)?this._all(wt,J):ut.push(wt))}Y=ut.pop()}return J},X.prototype.collides=function(W){var Y=this.data;if(!O(W,Y))return!1;for(var J=[];Y;){for(var ot=0;ot<Y.children.length;ot++){var ut=Y.children[ot],lt=Y.leaf?this.toBBox(ut):ut;if(O(W,lt)){if(Y.leaf||T(W,lt))return!0;J.push(ut)}}Y=J.pop()}return!1},X.prototype.load=function(W){if(!W||!W.length)return this;if(W.length<this._minEntries){for(var Y=0;Y<W.length;Y++)this.insert(W[Y]);return this}return W=this._build(W.slice(),0,W.length-1,0),this.data.children.length?this.data.height===W.height?this._splitRoot(this.data,W):(this.data.height<W.height&&(Y=this.data,this.data=W,W=Y),this._insert(W,this.data.height-W.height-1,!0)):this.data=W,this},X.prototype.insert=function(W){return W&&this._insert(W,this.data.height-1),this},X.prototype.clear=function(){return this.data=U([]),this},X.prototype.remove=function(W,Y){if(!W)return this;for(var J=this.data,ot=this.toBBox(W),ut=[],lt=[],wt,Qt,zt;J||ut.length;){if(J||(J=ut.pop(),Qt=ut[ut.length-1],wt=lt.pop(),zt=!0),J.leaf){t:{var ne=W,pe=J.children,be=Y;if(be){for(var Ie=0;Ie<pe.length;Ie++)if(be(ne,pe[Ie])){ne=Ie;break t}ne=-1}else ne=pe.indexOf(ne)}if(ne!==-1){J.children.splice(ne,1),ut.push(J),this._condense(ut);break}}zt||J.leaf||!T(J,ot)?Qt?(wt++,J=Qt.children[wt],zt=!1):J=null:(ut.push(J),lt.push(wt),wt=0,Qt=J,J=J.children[0])}return this},X.prototype.toBBox=function(W){return W},X.prototype.compareMinX=function(W,Y){return W.minX-Y.minX},X.prototype.compareMinY=function(W,Y){return W.minY-Y.minY},X.prototype.toJSON=function(){return this.data},X.prototype.fromJSON=function(W){return this.data=W,this},X.prototype._all=function(W,Y){for(var J=[];W;)W.leaf?Y.push.apply(Y,W.children):J.push.apply(J,W.children),W=J.pop();return Y},X.prototype._build=function(W,Y,J,ot){var ut=J-Y+1,lt=this._maxEntries;if(ut<=lt){var wt=U(W.slice(Y,J+1));return p(wt,this.toBBox),wt}for(ot||(ot=Math.ceil(Math.log(ut)/Math.log(lt)),lt=Math.ceil(ut/Math.pow(lt,ot-1))),wt=U([]),wt.leaf=!1,wt.height=ot,ut=Math.ceil(ut/lt),lt=ut*Math.ceil(Math.sqrt(lt)),G(W,Y,J,lt,this.compareMinX);Y<=J;Y+=lt){var Qt=Math.min(Y+lt-1,J);G(W,Y,Qt,ut,this.compareMinY);for(var zt=Y;zt<=Qt;zt+=ut)wt.children.push(this._build(W,zt,Math.min(zt+ut-1,Qt),ot-1))}return p(wt,this.toBBox),wt},X.prototype._chooseSubtree=function(W,Y,J,ot){for(;ot.push(Y),!(Y.leaf||ot.length-1===J);){for(var ut=Infinity,lt=Infinity,wt=void 0,Qt=0;Qt<Y.children.length;Qt++){var zt=Y.children[Qt],ne=k(zt),pe=(Math.max(zt.maxX,W.maxX)-Math.min(zt.minX,W.minX))*(Math.max(zt.maxY,W.maxY)-Math.min(zt.minY,W.minY))-ne;pe<lt?(lt=pe,ut=ne<ut?ne:ut,wt=zt):pe===lt&&ne<ut&&(ut=ne,wt=zt)}Y=wt||Y.children[0]}return Y},X.prototype._insert=function(W,Y,J){J=J?W:this.toBBox(W);var ot=[],ut=this._chooseSubtree(J,this.data,Y,ot);for(ut.children.push(W),v(ut,J);0<=Y&&ot[Y].children.length>this._maxEntries;)this._split(ot,Y),Y--;this._adjustParentBBoxes(J,ot,Y)},X.prototype._split=function(W,Y){var J=W[Y],ot=J.children.length,ut=this._minEntries;this._chooseSplitAxis(J,ut,ot),ot=this._chooseSplitIndex(J,ut,ot),ot=U(J.children.splice(ot,J.children.length-ot)),ot.height=J.height,ot.leaf=J.leaf,p(J,this.toBBox),p(ot,this.toBBox),Y?W[Y-1].children.push(ot):this._splitRoot(J,ot)},X.prototype._splitRoot=function(W,Y){this.data=U([W,Y]),this.data.height=W.height+1,this.data.leaf=!1,p(this.data,this.toBBox)},X.prototype._chooseSplitIndex=function(W,Y,J){for(var ot,ut=Infinity,lt=Infinity,wt=Y;wt<=J-Y;wt++){var Qt=y(W,0,wt,this.toBBox),zt=y(W,wt,J,this.toBBox),ne=Math.max(0,Math.min(Qt.maxX,zt.maxX)-Math.max(Qt.minX,zt.minX))*Math.max(0,Math.min(Qt.maxY,zt.maxY)-Math.max(Qt.minY,zt.minY));Qt=k(Qt)+k(zt),ne<ut?(ut=ne,ot=wt,lt=Qt<lt?Qt:lt):ne===ut&&Qt<lt&&(lt=Qt,ot=wt)}return ot||J-Y},X.prototype._chooseSplitAxis=function(W,Y,J){var ot=W.leaf?this.compareMinX:M,ut=W.leaf?this.compareMinY:R,lt=this._allDistMargin(W,Y,J,ot);Y=this._allDistMargin(W,Y,J,ut),lt<Y&&W.children.sort(ot)},X.prototype._allDistMargin=function(W,Y,J,ot){W.children.sort(ot),ot=this.toBBox;for(var ut=y(W,0,Y,ot),lt=y(W,J-Y,J,ot),wt=_(ut)+_(lt),Qt=Y;Qt<J-Y;Qt++){var zt=W.children[Qt];v(ut,W.leaf?ot(zt):zt),wt+=_(ut)}for(J=J-Y-1;J>=Y;J--)ut=W.children[J],v(lt,W.leaf?ot(ut):ut),wt+=_(lt);return wt},X.prototype._adjustParentBBoxes=function(W,Y,J){for(;0<=J;J--)v(Y[J],W)},X.prototype._condense=function(W){for(var Y=W.length-1,J;0<=Y;Y--)W[Y].children.length===0?0<Y?(J=W[Y-1].children,J.splice(J.indexOf(W[Y]),1)):this.clear():p(W[Y],this.toBBox)},X})}),fA=function(a){function A(i){fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.name="TextLayer",i.dataChanged=!1,i.currentZoom;var u=i.canvas=document.createElement("canvas");return u=i.ctx=u.getContext("2d"),u.textAlign="start",u.textBaseline="top",i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,lineWidth:2,lineHeight:20,textAlign:"center",flat:!1,collides:!0,textMaxWidth:0,textMaxHeight:0,unit:"px",angle:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],shadow:{},stroke:{color:""}}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new Ur(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uFlat;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)+size.x*sin(rotation);}else if(corner==2.0){x+=size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)-size.x*sin(rotation);}else if(corner==3.0){x+=size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)-size.x*sin(rotation);}else{x+=-size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)+size.x*sin(rotation);}return vec3(x,y,coord.z);}void main(){vTextCoord=aTextCoord;if(uFlat){vec2 pixelOffset=offset;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;pixelOffset*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);current.z+=zIndex;gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y-pixelOffset[1],current.z,1.0);}else{vec4 pos=matrix*vec4(position,1.0);vec3 screen=pos.xyz/pos.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio*scale;vec2 positionOffset=offset*2./MAPV_resolution*devicePixelRatio;if(!uUnitPx){halfSize/=zoomUnits;positionOffset/=zoomUnits;}vec3 current=transformCoord(screen,halfSize,corner);current.xy=current.xy-positionOffset;current.z+=zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:u.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){this.gl&&this.processCache(i,u)}},{key:"processCache",value:function(i,u){this.cachedData=[],this.dataChanged=!0;for(var m=0;m<u.length;m++){var p=this.normizedPoint(u[m].geometry.coordinates),y=u[m].text;"properties"in u[m]&&"text"in u[m].properties&&(y=u[m].properties.text);var v=this.getProperty("angle",i.angle,u[m]),M=this.getProperty("color",i.color,u[m]);p&&y!==void 0&&this.cachedData.push({point:p,text:y,angle:v,color:M,index:m})}}},{key:"render",value:function(i){if(this.cachedData&&this.cachedData.length&&this.map){var u=i.gl,m=i.matrix,p=this.getOptions(),y=this.program;y.use(u);var v=this.map.getZoomUnits();(this.dataChanged||this.currentZoom!==v||!i.isPickRender)&&(this.throttleUpdate(i),this.currentZoom=v),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA],polygonOffset:p.polygonOffset,depthTest:p.depthTest,depthMask:p.depthWrite}),y.setUniforms(ln(this.getCommonUniforms(i),{matrix:m,devicePixelRatio:1<(window.BMAPGL_FORCE_RATIO||window.devicePixelRatio)?2:1,textureImage:this.texture,uFlat:p.flat,offset:p.offset,zoomUnits:v,zIndex:p.zIndex,uUnitPx:p.unit==="px"})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,this.index.length,u.UNSIGNED_INT,0)),this.dataChanged=!1}}},{key:"throttleUpdate",value:function(i){this.updateText(i)}},{key:"updateText",value:function(i){var u=i.gl,m=i.matrix,p=this.getOptions(),y=p.fontSize,v=p.fontFamily,M=p.padding,R=p.margin,k=p.collides;i=p.enablePicked;var _=p.shadow,T=p.textMaxWidth,O=p.textMaxHeight,U=u.canvas.width/window.devicePixelRatio,G=u.canvas.height/window.devicePixelRatio;p=this.canvas,u=this.ctx,u.fillStyle="#6c0",u.save(),u.scale(window.devicePixelRatio,window.devicePixelRatio),u.textBaseline="top",u.font="20px "+v;for(var X=new Hs,W=[],Y=void 0,J=0;J<this.cachedData.length;J++){var ot=this.cachedData[J],ut=ot.point,lt=ot.text,wt=ot.angle,Qt=ot.color;ot=ot.index;var zt=ni(ut,3),ne=Si.clone([zt[0],zt[1],zt[2],1]);Si.transformMat4(ne,ne,m),Si.scale(ne,ne,1/ne[3]);var pe=this.map.getHeading()%360;zt=(ne[0]+1)/2*U,ne=(-ne[1]+1)/2*G;var be=zt*Math.cos(pe*Math.PI/180)-ne*Math.sin(pe*Math.PI/180),Ie=zt*Math.sin(pe*Math.PI/180)+ne*Math.cos(pe*Math.PI/180),hr=u.measureText(lt),Qr=hr.width+2*M[0];pe=20,hr.actualBoundingBoxAscent&&hr.actualBoundingBoxDescent&&(pe=hr.actualBoundingBoxDescent-hr.actualBoundingBoxAscent),pe+=2*M[1],hr=Qr+R[0];var Ce=pe+R[1];be-=hr/2,Ie-=Ce/2;var Ze=be+hr,sn=Ie+Ce;if(!(0>zt+hr/2||0>ne+Ce/2||zt-hr/2>U||ne-Ce/2>G)){if(k){if(zt={minX:be,maxX:Ze,minY:Ie,maxY:sn},X.collides(zt))continue;X.insert(zt)}zt=Y=T||Qr,W.push({w:zt,h:O||pe,point:ut,text:lt,angle:wt,color:Qt,dataIndex:ot})}}u.restore(),R=to(W),m=R.w,R=R.h,0>=m&&(m=1),0>=R&&(R=1),p.width=2*m,p.height=2*R,u.save(),u.scale(2,2),u.textBaseline="top",u.font="20px "+v,u.shadowColor=_&&_.color,u.shadowOffsetX=_&&_.offsetX,u.shadowOffsetY=_&&_.offsetY,u.shadowBlur=_&&_.blur,_=this.buildVertex(u,W,m,R,{padding:M,fontSize:y,defaultFontSize:20,enablePicked:i,cWidth:Y}),y=_.vertex,v=_.textureCoord,M=_.indices,_=_.pick,u.restore(),this.loadTexture(),this.index=M,this.vertexBuffer.updateData(new Float32Array(y)),this.uvBuffer.updateData(new Float32Array(v)),this.indexBuffer.updateData(new Uint32Array(M)),i&&this.pickBuffer.updateData(new Float32Array(_))}},{key:"wrapText",value:function(i,u,m,p,y,v,M){if(u&&typeof u=="string"){var R=this.getOptions().stroke;u=u.split("");for(var k="",_=0;_<u.length;_++){var T=k+u[_];i.measureText(T).width>y&&0<_?(M==="left"?(R.color&&i.strokeText(k,m,p),i.fillText(k,m,p)):(R.color&&i.strokeText(k,m+(y-i.measureText(k).width)/2,p),i.fillText(k,m+(y-i.measureText(k).width)/2,p)),k=u[_],p+=v):k=T}M==="left"?(R.color&&i.strokeText(k,m,p),i.fillText(k,m,p)):(R.color&&i.strokeText(k,m+(y-i.measureText(k).width)/2,p),i.fillText(k,m+(y-i.measureText(k).width)/2,p))}}},{key:"buildVertex",value:function(i,u,m,p,y){var v=this.getOptions(),M=v.stroke,R=v.lineWidth,k=v.lineHeight,_=v.textMaxWidth;v=v.textAlign;var T=[],O=[],U=[],G=[];M.color&&(i.lineWidth=R,i.strokeStyle=M.color),R=0;for(var X=u.length;R<X;++R){var W=u[R],Y=W.x+y.padding[0],J=W.y+y.padding[1];i.fillStyle=W.color,_?this.wrapText(i,W.text,Y,J,y.cWidth,k,v):(M.color&&i.strokeText(W.text,Y,J),i.fillText(W.text,Y,J));var ot=ni(W.point,3);Y=ot[0],J=ot[1],ot=ot[2];for(var ut=0;4>ut;ut++)T.push(Y,J,ot),T.push(ut),T.push(W.w,W.h),T.push(y.fontSize/y.defaultFontSize,W.angle*Math.PI/180);Y=W.x/m,J=(W.x+W.w)/m,ot=(W.y+W.h)/p,ut=W.y/p,O.push(Y,ot,Y,ut,J,ut,J,ot),Y=4*R,U.push(Y,Y+2,Y+1,Y,Y+3,Y+2),y.enablePicked&&(W=this.indexToRgb(W.dataIndex),G.push(W[0]/255,W[1]/255,W[2]/255),G.push(W[0]/255,W[1]/255,W[2]/255),G.push(W[0]/255,W[1]/255,W[2]/255),G.push(W[0]/255,W[1]/255,W[2]/255))}return{vertex:T,textureCoord:O,indices:U,pick:G}}},{key:"loadTexture",value:function(){var i=this;this.canvas?wo(this.gl,this.canvas,function(u){i.texture=u},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),A}(ui),Vo=function(a){function A(i){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i))}return tn(A,a),mr(A,[{key:"initialize",value:function(i){var u=this;this.children&&this.children.forEach(function(m){m.map=u.map,m.setWebglLayer(u.getWebglLayer()),m.commonInitialize&&m.commonInitialize(i),m.initialize&&m.initialize(i),m.onOptionsChanged(m.getOptions()),m.onDataChanged(m.getData()),m.onChanged(m.getOptions(),m.getData())})}},{key:"isRequestAnimation",value:function(){if(this.autoUpdate!==void 0)return Ka(A.prototype.__proto__||Er(A.prototype),"isRequestAnimation",this).call(this);for(var i=!1,u=0;u<this.children.length;u++)if(this.children[u].isRequestAnimation()){i=!0;break}return i}},{key:"render",value:function(i){this.children&&this.children.forEach(function(u){u.render(i)})}},{key:"onDestroy",value:function(i){this.children&&this.children.forEach(function(u){u.onDestroy(i)})}}]),A}(cA),t0=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.preHeightMapper={},i.preColorMapper={},i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return ln(Ka(A.prototype.__proto__||Er(A.prototype),"getDefaultOptions",this).call(this),{style:"grid",gridSize:500,gridGap:5,height:function(){return 1e3},color:function(){return"rgb(200, 200, 20)"}})}},{key:"generateGrid",value:function(i,u){var m=u.gridSize,p=[],y={};u=i.length;for(var v=this.getPointOffset(),M=0;M<u;M++){var R=this.normizedPoint(i[M].geometry.coordinates);R=~~((R[0]+v[0])/m)+"_"+~~((R[1]+v[1])/m),y[R]===void 0&&(y[R]=0);var k=~~i[M].count||1;"properties"in i[M]&&"count"in i[M].properties&&(k=~~i[M].properties.count),y[R]+=k}return _o(y).forEach(function(_){var T=_.split("_");p.push([T[0]*m+m/2,T[1]*m+m/2,y[_]])}),p}},{key:"onChanged",value:function(i,u){u=this.processData(u),Ka(A.prototype.__proto__||Er(A.prototype),"onChanged",this).call(this,i,u)}},{key:"getGridDataRange",value:function(){var i=this.gridData,u=void 0,m=void 0;i[0]&&(u=i[0][2],m=i[0][2]);for(var p=i.length,y=0;y<p;y++){var v=i[y];u=Math.max(v[2],u),m=Math.min(v[2],m)}return{max:u/2,min:m}}},{key:"processData",value:function(i){var u=this.getOptions(),m=u.gridSize,p=[];if(u.style==="normal")for(var y=this.getPointOffset(),v=0;v<i.length;v++){var M=this.normizedPoint(i[v].geometry.coordinates),R=M[0]+y[0];M=M[1]+y[1];var k=~~i[v].count||1;"properties"in i[v]&&"count"in i[v].properties&&(k=~~i[v].properties.count);var _=i[v].color;"properties"in i[v]&&"color"in i[v].properties&&(_=~~i[v].properties.color),p.push([R,M,k,_])}else p=this.generateGrid(i,u);for(i=[],this._preHeightMapper={},this._preColorMapper={},y=0;y<p.length;y++)v=p[y],v[0]=v[0],v[1]=v[1],R=v[2],u.height&&(R=typeof u.height=="function"?u.height({count:v[2],coordinates:[v[0],v[1]]}):u.height),M=m/2-u.gridGap,k=v[3],u.color&&(k=typeof u.color=="function"?u.color({count:v[2],color:v[3]}):kt(k||u.color).unitArray()),_="p"+v[0]+v[1],i.push({geometry:{type:"Polygon",coordinates:[[[v[0]-M,v[1]-M],[v[0]-M,v[1]+M],[v[0]+M,v[1]+M],[v[0]+M,v[1]-M]]]},color:k,origin:v,count:v[2],preHeight:this.preHeightMapper[_],preColor:this.preColorMapper[_],height:R}),this._preHeightMapper[_]=R,this._preColorMapper[_]=k;return this.preHeightMapper=this._preHeightMapper,this.preColorMapper=this._preColorMapper,this.gridData=i}}]),A}(Ve),Qi=function(a){function A(i){fr(this,A);var u=on(this,(A.__proto__||Er(A)).call(this,i));return u.gridLayer=new t0(i),u.options.textOptions=ln({show:!1,flat:!0,unit:"m",fontSize:100,collides:!1},i.textOptions||{}),u.textLayer=new fA(u.options.textOptions),u.children=[u.gridLayer,u.textLayer],u}return tn(A,a),mr(A,[{key:"pick",value:function(i,u){return this.gridLayer.pick(i,u)}},{key:"setData",value:function(i){this.gridLayer.setData(i),this.options.textOptions.show&&this.setTextData()}},{key:"setTextData",value:function(){var i=this.gridLayer.gridData.map(function(u){return{geometry:{type:"Point",coordinates:[u.origin[0],u.origin[1],u.height+5]},properties:{text:u.count}}});this.textLayer.setData(i)}},{key:"setOptions",value:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},u=this.options.textOptions;ln(this.options,i),this.gridLayer.setOptions(this.options),i.textOptions&&(this.options.textOptions.show&&this.setTextData(),this.options.textOptions=ln(u||{},i.textOptions),this.textLayer.setOptions(this.options.textOptions))}},{key:"getData",value:function(){return this.gridLayer.getData()}},{key:"render",value:function(i){this.gridLayer.render(i),this.options.textOptions.show&&this.textLayer.render(i)}}]),A}(Vo),bi=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.gridLayer=new Qi(i.getGridOptions()),i.children=[i.gridLayer],i.options.riseTime&&(i.autoUpdate=!0),i}return tn(A,a),mr(A,[{key:"pick",value:function(i,u){return this.gridLayer.pick(i,u)}},{key:"onDataChanged",value:function(i){this.gridLayer.setData(i)}},{key:"getGridOptions",value:function(){var i=this.getOptions(),u=i.max,m=i.min;u===void 0&&(m=this.gridLayer.getGridDataRange(),u=m.max,m=m.min);var p=new ci({max:u,min:m,gradient:i.gradient,maxSize:i.maxHeight,minSize:i.minHeight});return i.height=function(y){var v=p.getSize(y.count);return"properties"in y&&"count"in y.properties&&(v=p.getSize(y.properties.count)),v},i.color=function(y){var v=p.getImageData(y.count);return"properties"in y&&"count"in y.properties&&(v=p.getImageData(y.properties.count)),[v[0]/255,v[1]/255,v[2]/255,v[3]/255]},i}},{key:"onOptionsChanged",value:function(i){this.gridLayer.setOptions(this.getGridOptions())}},{key:"getDefaultOptions",value:function(){return{enablePicked:!1,selectedIndex:-1,selectedColor:"#ff0000",autoSelect:!0,style:"grid",gridSize:500,maxHeight:8e3,minHeight:200,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}}}}]),A}(Vo),dh=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="SimpleLineLayer",i.bufferData=[],i}return tn(A,a),mr(A,[{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.program=new Ur(this.gl,{vertexShader:`uniform mat4 u_matrix;attribute vec3 aPos;attribute vec4 aColor;varying vec4 vColor;
#if defined(DASH)
varying vec3 vPos;
#endif
void main(){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=u_matrix*vec4(aPos,1.0);
#if defined(DASH)
vPos=aPos;
#endif
}`,fragmentShader:`precision highp float;varying vec4 vColor;varying vec3 vPos;void main(){
#if defined(DASH)
if(mod(vPos.x,3.0)<1.5){discard;}
#endif
gl_FragColor=vColor;}`,defines:u.useDash?["DASH"]:""},this),this.buffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new Li({gl:i,program:this.program,attributes:[{stride:28,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:28,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12}]})}},{key:"onDestroy",value:function(){this.bufferData=[]}},{key:"onChanged",value:function(i,u){var m=this;if(this.gl){var p=[],y=function(_,T){if(_)for(var O=0;O<_.length-1;O++){var U=m.normizedPoint(_[O]);p.push(U[0]),p.push(U[1]),p.push(U[2]),p.push(T[0],T[1],T[2],T[3]),U=m.normizedPoint(_[O+1]),p.push(U[0]),p.push(U[1]),p.push(U[2]),p.push(T[0],T[1],T[2],T[3])}};i=i.color;for(var v=0;v<u.length;v++){var M=this.getProperty("color",i,u[v]);M=this.normizedColor(M);var R=u[v].geometry,k=R.coordinates;if(R.type==="MultiPolygon"){if(k)for(R=0;R<k.length;R++)y(k[R][0],M)}else if(R.type==="Polygon")k&&y(k[0],M);else if(R.type==="MultiLineString"){if(k)for(R=0;R<k.length;R++)y(k[R],M)}else y(k,M)}this.bufferData=p,this.buffer.updateData(new Float32Array(p))}}},{key:"render",value:function(i){var u=i.gl;if(i=i.matrix,this.bufferData&&!(0>=this.bufferData.length)){var m=this.program;m.use(u),this.vertexArray.bind(),m.setUniforms({u_matrix:i}),i=this.getOptions(),this.setGLState({blend:!0,blendFunc:i.blend==="lighter"?[u.SRC_ALPHA,u.ONE]:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA],blendEquation:u.FUNC_ADD}),u.drawArrays(u.LINES,0,this.bufferData.length/7)}}}]),A}(ui),e0=Zh.f("species"),Ll=Ot(function(a){a.exports={default:e0,__esModule:!0}});Gt(Ll);var Sm=typeof Nt.g!="undefined"?Nt.g:typeof self!="undefined"?self:typeof window!="undefined"?window:{},la=[],La=[],r0=typeof Uint8Array!="undefined"?Uint8Array:Array,xf=!1,Lm={}.toString,eg=Array.isArray||function(a){return Lm.call(a)=="[object Array]"};Fe.TYPED_ARRAY_SUPPORT=Sm.TYPED_ARRAY_SUPPORT!==void 0?Sm.TYPED_ARRAY_SUPPORT:!0,Fe.poolSize=8192,Fe._augment=function(a){return a.__proto__=Fe.prototype,a},Fe.from=function(a,A,i){return Ci(null,a,A,i)},Fe.TYPED_ARRAY_SUPPORT&&(Fe.prototype.__proto__=Uint8Array.prototype,Fe.__proto__=Uint8Array),Fe.alloc=function(a,A,i){return Hi(a),a=0>=a?wi(null,a):A!==void 0?typeof i=="string"?wi(null,a).fill(A,i):wi(null,a).fill(A):wi(null,a),a},Fe.allocUnsafe=function(a){return Ni(null,a)},Fe.allocUnsafeSlow=function(a){return Ni(null,a)},Fe.isBuffer=function(a){return a!=null&&(!!a._isBuffer||tp(a)||typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&tp(a.slice(0,0)))},Fe.compare=function(a,A){if(!bo(a)||!bo(A))throw new TypeError("Arguments must be Buffers");if(a===A)return 0;for(var i=a.length,u=A.length,m=0,p=Math.min(i,u);m<p;++m)if(a[m]!==A[m]){i=a[m],u=A[m];break}return i<u?-1:u<i?1:0},Fe.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Fe.concat=function(a,A){if(!eg(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return Fe.alloc(0);var i;if(A===void 0)for(i=A=0;i<a.length;++i)A+=a[i].length;A=Fe.allocUnsafe(A);var u=0;for(i=0;i<a.length;++i){var m=a[i];if(!bo(m))throw new TypeError('"list" argument must be an Array of Buffers');m.copy(A,u),u+=m.length}return A},Fe.byteLength=WA,Fe.prototype._isBuffer=!0,Fe.prototype.swap16=function(){var a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<a;A+=2)$r(this,A,A+1);return this},Fe.prototype.swap32=function(){var a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<a;A+=4)$r(this,A,A+3),$r(this,A+1,A+2);return this},Fe.prototype.swap64=function(){var a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<a;A+=8)$r(this,A,A+7),$r(this,A+1,A+6),$r(this,A+2,A+5),$r(this,A+3,A+4);return this},Fe.prototype.toString=function(){var a=this.length|0;return a===0?"":arguments.length===0?ko(this,0,a):rA.apply(this,arguments)},Fe.prototype.equals=function(a){if(!bo(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:Fe.compare(this,a)===0},Fe.prototype.inspect=function(){var a="";return 0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... ")),"<Buffer "+a+">"},Fe.prototype.compare=function(a,A,i,u,m){if(!bo(a))throw new TypeError("Argument must be a Buffer");if(A===void 0&&(A=0),i===void 0&&(i=a?a.length:0),u===void 0&&(u=0),m===void 0&&(m=this.length),0>A||i>a.length||0>u||m>this.length)throw new RangeError("out of range index");if(u>=m&&A>=i)return 0;if(u>=m)return-1;if(A>=i)return 1;if(A>>>=0,i>>>=0,u>>>=0,m>>>=0,this===a)return 0;var p=m-u,y=i-A,v=Math.min(p,y);for(u=this.slice(u,m),a=a.slice(A,i),A=0;A<v;++A)if(u[A]!==a[A]){p=u[A],y=a[A];break}return p<y?-1:y<p?1:0},Fe.prototype.includes=function(a,A,i){return this.indexOf(a,A,i)!==-1},Fe.prototype.indexOf=function(a,A,i){return Is(this,a,A,i,!0)},Fe.prototype.lastIndexOf=function(a,A,i){return Is(this,a,A,i,!1)},Fe.prototype.write=function(a,A,i,u){if(A===void 0)u="utf8",i=this.length,A=0;else if(i===void 0&&typeof A=="string")u=A,i=this.length,A=0;else if(isFinite(A))A|=0,isFinite(i)?(i|=0,u===void 0&&(u="utf8")):(u=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var m=this.length-A;if((i===void 0||i>m)&&(i=m),0<a.length&&(0>i||0>A)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(u||(u="utf8"),m=!1;;)switch(u){case"hex":t:{if(A=Number(A)||0,u=this.length-A,i?(i=Number(i),i>u&&(i=u)):i=u,u=a.length,u%2!=0)throw new TypeError("Invalid hex string");for(i>u/2&&(i=u/2),u=0;u<i;++u){if(m=parseInt(a.substr(2*u,2),16),isNaN(m)){a=u;break t}this[A+u]=m}a=u}return a;case"utf8":case"utf-8":return Da(pa(a,this.length-A),this,A,i);case"ascii":return Da(Ro(a),this,A,i);case"latin1":case"binary":return Da(Ro(a),this,A,i);case"base64":return Da(vu(a),this,A,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":u=a,m=this.length-A;for(var p=[],y=0;y<u.length&&!(0>(m-=2));++y){var v=u.charCodeAt(y);a=v>>8,v%=256,p.push(v),p.push(a)}return Da(p,this,A,i);default:if(m)throw new TypeError("Unknown encoding: "+u);u=(""+u).toLowerCase(),m=!0}},Fe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var rg=4096;Fe.prototype.slice=function(a,A){var i=this.length;if(a=~~a,A=A===void 0?i:~~A,0>a?(a+=i,0>a&&(a=0)):a>i&&(a=i),0>A?(A+=i,0>A&&(A=0)):A>i&&(A=i),A<a&&(A=a),Fe.TYPED_ARRAY_SUPPORT)A=this.subarray(a,A),A.__proto__=Fe.prototype;else{i=A-a,A=new Fe(i,void 0);for(var u=0;u<i;++u)A[u]=this[u+a]}return A},Fe.prototype.readUIntLE=function(a,A,i){a|=0,A|=0,i||Mi(a,A,this.length),i=this[a];for(var u=1,m=0;++m<A&&(u*=256);)i+=this[a+m]*u;return i},Fe.prototype.readUIntBE=function(a,A,i){a|=0,A|=0,i||Mi(a,A,this.length),i=this[a+--A];for(var u=1;0<A&&(u*=256);)i+=this[a+--A]*u;return i},Fe.prototype.readUInt8=function(a,A){return A||Mi(a,1,this.length),this[a]},Fe.prototype.readUInt16LE=function(a,A){return A||Mi(a,2,this.length),this[a]|this[a+1]<<8},Fe.prototype.readUInt16BE=function(a,A){return A||Mi(a,2,this.length),this[a]<<8|this[a+1]},Fe.prototype.readUInt32LE=function(a,A){return A||Mi(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},Fe.prototype.readUInt32BE=function(a,A){return A||Mi(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},Fe.prototype.readIntLE=function(a,A,i){a|=0,A|=0,i||Mi(a,A,this.length),i=this[a];for(var u=1,m=0;++m<A&&(u*=256);)i+=this[a+m]*u;return i>=128*u&&(i-=Math.pow(2,8*A)),i},Fe.prototype.readIntBE=function(a,A,i){a|=0,A|=0,i||Mi(a,A,this.length),i=A;for(var u=1,m=this[a+--i];0<i&&(u*=256);)m+=this[a+--i]*u;return m>=128*u&&(m-=Math.pow(2,8*A)),m},Fe.prototype.readInt8=function(a,A){return A||Mi(a,1,this.length),this[a]&128?-1*(255-this[a]+1):this[a]},Fe.prototype.readInt16LE=function(a,A){return A||Mi(a,2,this.length),a=this[a]|this[a+1]<<8,a&32768?a|4294901760:a},Fe.prototype.readInt16BE=function(a,A){return A||Mi(a,2,this.length),a=this[a+1]|this[a]<<8,a&32768?a|4294901760:a},Fe.prototype.readInt32LE=function(a,A){return A||Mi(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},Fe.prototype.readInt32BE=function(a,A){return A||Mi(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},Fe.prototype.readFloatLE=function(a,A){return A||Mi(a,4,this.length),Ai(this,a,!0,23,4)},Fe.prototype.readFloatBE=function(a,A){return A||Mi(a,4,this.length),Ai(this,a,!1,23,4)},Fe.prototype.readDoubleLE=function(a,A){return A||Mi(a,8,this.length),Ai(this,a,!0,52,8)},Fe.prototype.readDoubleBE=function(a,A){return A||Mi(a,8,this.length),Ai(this,a,!1,52,8)},Fe.prototype.writeUIntLE=function(a,A,i,u){a=+a,A|=0,i|=0,u||Co(this,a,A,i,Math.pow(2,8*i)-1,0),u=1;var m=0;for(this[A]=a&255;++m<i&&(u*=256);)this[A+m]=a/u&255;return A+i},Fe.prototype.writeUIntBE=function(a,A,i,u){a=+a,A|=0,i|=0,u||Co(this,a,A,i,Math.pow(2,8*i)-1,0),u=i-1;var m=1;for(this[A+u]=a&255;0<=--u&&(m*=256);)this[A+u]=a/m&255;return A+i},Fe.prototype.writeUInt8=function(a,A,i){return a=+a,A|=0,i||Co(this,a,A,1,255,0),Fe.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[A]=a&255,A+1},Fe.prototype.writeUInt16LE=function(a,A,i){return a=+a,A|=0,i||Co(this,a,A,2,65535,0),Fe.TYPED_ARRAY_SUPPORT?(this[A]=a&255,this[A+1]=a>>>8):nA(this,a,A,!0),A+2},Fe.prototype.writeUInt16BE=function(a,A,i){return a=+a,A|=0,i||Co(this,a,A,2,65535,0),Fe.TYPED_ARRAY_SUPPORT?(this[A]=a>>>8,this[A+1]=a&255):nA(this,a,A,!1),A+2},Fe.prototype.writeUInt32LE=function(a,A,i){return a=+a,A|=0,i||Co(this,a,A,4,4294967295,0),Fe.TYPED_ARRAY_SUPPORT?(this[A+3]=a>>>24,this[A+2]=a>>>16,this[A+1]=a>>>8,this[A]=a&255):jA(this,a,A,!0),A+4},Fe.prototype.writeUInt32BE=function(a,A,i){return a=+a,A|=0,i||Co(this,a,A,4,4294967295,0),Fe.TYPED_ARRAY_SUPPORT?(this[A]=a>>>24,this[A+1]=a>>>16,this[A+2]=a>>>8,this[A+3]=a&255):jA(this,a,A,!1),A+4},Fe.prototype.writeIntLE=function(a,A,i,u){a=+a,A|=0,u||(u=Math.pow(2,8*i-1),Co(this,a,A,i,u-1,-u)),u=0;var m=1,p=0;for(this[A]=a&255;++u<i&&(m*=256);)0>a&&p===0&&this[A+u-1]!==0&&(p=1),this[A+u]=(a/m>>0)-p&255;return A+i},Fe.prototype.writeIntBE=function(a,A,i,u){a=+a,A|=0,u||(u=Math.pow(2,8*i-1),Co(this,a,A,i,u-1,-u)),u=i-1;var m=1,p=0;for(this[A+u]=a&255;0<=--u&&(m*=256);)0>a&&p===0&&this[A+u+1]!==0&&(p=1),this[A+u]=(a/m>>0)-p&255;return A+i},Fe.prototype.writeInt8=function(a,A,i){return a=+a,A|=0,i||Co(this,a,A,1,127,-128),Fe.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[A]=a&255,A+1},Fe.prototype.writeInt16LE=function(a,A,i){return a=+a,A|=0,i||Co(this,a,A,2,32767,-32768),Fe.TYPED_ARRAY_SUPPORT?(this[A]=a&255,this[A+1]=a>>>8):nA(this,a,A,!0),A+2},Fe.prototype.writeInt16BE=function(a,A,i){return a=+a,A|=0,i||Co(this,a,A,2,32767,-32768),Fe.TYPED_ARRAY_SUPPORT?(this[A]=a>>>8,this[A+1]=a&255):nA(this,a,A,!1),A+2},Fe.prototype.writeInt32LE=function(a,A,i){return a=+a,A|=0,i||Co(this,a,A,4,2147483647,-2147483648),Fe.TYPED_ARRAY_SUPPORT?(this[A]=a&255,this[A+1]=a>>>8,this[A+2]=a>>>16,this[A+3]=a>>>24):jA(this,a,A,!0),A+4},Fe.prototype.writeInt32BE=function(a,A,i){return a=+a,A|=0,i||Co(this,a,A,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),Fe.TYPED_ARRAY_SUPPORT?(this[A]=a>>>24,this[A+1]=a>>>16,this[A+2]=a>>>8,this[A+3]=a&255):jA(this,a,A,!1),A+4},Fe.prototype.writeFloatLE=function(a,A,i){return IA(this,a,A,!0,i)},Fe.prototype.writeFloatBE=function(a,A,i){return IA(this,a,A,!1,i)},Fe.prototype.writeDoubleLE=function(a,A,i){return XA(this,a,A,!0,i)},Fe.prototype.writeDoubleBE=function(a,A,i){return XA(this,a,A,!1,i)},Fe.prototype.copy=function(a,A,i,u){if(i||(i=0),u||u===0||(u=this.length),A>=a.length&&(A=a.length),A||(A=0),0<u&&u<i&&(u=i),u===i||a.length===0||this.length===0)return 0;if(0>A)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>u)throw new RangeError("sourceEnd out of bounds");u>this.length&&(u=this.length),a.length-A<u-i&&(u=a.length-A+i);var m=u-i;if(this===a&&i<A&&A<u)for(u=m-1;0<=u;--u)a[u+A]=this[u+i];else if(1e3>m||!Fe.TYPED_ARRAY_SUPPORT)for(u=0;u<m;++u)a[u+A]=this[u+i];else Uint8Array.prototype.set.call(a,this.subarray(i,i+m),A);return m},Fe.prototype.fill=function(a,A,i,u){if(typeof a=="string"){if(typeof A=="string"?(u=A,A=0,i=this.length):typeof i=="string"&&(u=i,i=this.length),a.length===1){var m=a.charCodeAt(0);256>m&&(a=m)}if(u!==void 0&&typeof u!="string")throw new TypeError("encoding must be a string");if(typeof u=="string"&&!Fe.isEncoding(u))throw new TypeError("Unknown encoding: "+u)}else typeof a=="number"&&(a&=255);if(0>A||this.length<A||this.length<i)throw new RangeError("Out of range index");if(i<=A)return this;if(A>>>=0,i=i===void 0?this.length:i>>>0,a||(a=0),typeof a=="number")for(u=A;u<i;++u)this[u]=a;else for(a=bo(a)?a:pa(new Fe(a,u).toString()),m=a.length,u=0;u<i-A;++u)this[u+A]=a[u%m];return this};var ng=/[^+\/0-9A-Za-z-_]/g,wf={normal:null,road:Qh()},yc=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="LineLayer3D",i.initData(),i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{color:"rgba(25, 25, 250, 1)",offset:0,blend:"normal",width:4,unit:"px",flat:!1,antialias:!1,style:"normal",dashArray:[0,0],dashOffset:0,polygonOffset:[0,0]}}},{key:"initData",value:function(){this.dataMgr={position:[],prev:[],next:[],direction:[],color:[],index:[],counter:[],uv:[]}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions(),m=[];u.enablePicked&&m.push("PICK"),wf[u.style]&&(this.isUseTexture=!0,m.push("USE_TEXTURE")),this.program=new Ur(this.gl,{vertexShader:`precision highp float;uniform vec4 uSelectedColor;uniform mat4 uMatrix;uniform bool uFlat;uniform bool uUnitPx;uniform vec2 uDashArray;uniform float thickness;uniform float zoomUnits;uniform float devicePixelRatio;uniform float uOffset;attribute vec3 position;attribute vec3 next;attribute vec3 previous;attribute float direction;attribute vec4 aColor;attribute float aDistance;attribute float aTotalDistance;
#if defined(USE_TEXTURE)
attribute vec2 uv;
#endif
varying vec4 vColor;varying vec2 vNormal;varying vec2 vUV;varying vec2 vDashArray;varying float vTotalDistance;varying float vCounter;vec2 project(vec4 coord){vec3 screen=coord.xyz/coord.w;vec2 clip=(screen.xy+1.0)/2.0;return clip*MAPV_resolution;}vec4 unproject(vec2 projected,float z,float w){vec2 clip=projected/MAPV_resolution;vec2 screen=clip*2.0-1.0;return vec4(screen*w,z,w);}vec3 getNormalAndWidth(vec2 currentScreen,vec2 previousScreen,vec2 nextScreen,float thickness){vec2 dir=vec2(0.0);if(currentScreen==previousScreen){dir=normalize(nextScreen-currentScreen);}else if(currentScreen==nextScreen){dir=normalize(currentScreen-previousScreen);}else{vec2 dirA=normalize((currentScreen-previousScreen));vec2 dirB=normalize((nextScreen-currentScreen));vec2 tangent=normalize(dirA+dirB);vec2 perp=vec2(-dirA.y,dirA.x);vec2 miter=vec2(-tangent.y,tangent.x);dir=tangent;float angle=40.0;if(dot(dirA,dirB)>cos(radians(angle))){thickness=thickness/dot(miter,perp);}}vec2 normal=vec2(-dir.y,dir.x);return vec3(normal,thickness);}void main(){vColor=aColor;vCounter=aDistance/aTotalDistance;vDashArray=uDashArray/aTotalDistance;if(uUnitPx){vDashArray*=zoomUnits;}vTotalDistance=aTotalDistance;
#if defined(USE_TEXTURE)
vUV=uv;
#endif
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
if(uFlat){float width=thickness;if(uUnitPx){width*=zoomUnits;}vec3 nw=getNormalAndWidth(position.xy,previous.xy,next.xy,width);width=nw.z;vec2 normal=nw.xy;vNormal=normal*direction;normal*=width/2.0;float offsetXy=uOffset;float offsetHeight=uOffset/100.0;if(uUnitPx){offsetXy/=zoomUnits;offsetHeight*=zoomUnits;}gl_Position=uMatrix*vec4(position.xy+normal*(direction+offsetXy),position.z+offsetHeight,1.0);}else{vec4 previousProjected=uMatrix*vec4(previous,1.0);vec4 currentProjected=uMatrix*vec4(position,1.0);vec4 nextProjected=uMatrix*vec4(next,1.0);vec2 currentScreen=project(currentProjected);vec2 previousScreen=project(previousProjected);vec2 nextScreen=project(nextProjected);float width=thickness*devicePixelRatio;if(!uUnitPx){width/=zoomUnits;}vec3 nw=getNormalAndWidth(currentScreen,previousScreen,nextScreen,width);width=nw.z;vec2 normal=nw.xy;vNormal=normal*direction;normal*=width/2.0;vec2 pos=currentScreen+normal*direction;vec4 finalPos=unproject(pos,currentProjected.z,currentProjected.w);gl_Position=finalPos;}}`,fragmentShader:`precision highp float;varying vec4 vColor;varying vec2 vNormal;varying vec2 vUV;varying vec2 vDashArray;varying float vCounter;varying float vTotalDistance;uniform bool uAntialias;uniform float uDashOffset;uniform float zoomUnits;uniform float thickness;
#if defined(USE_TEXTURE)
uniform float uTextureMargin;uniform sampler2D textureImage;
#endif
void main(){vec4 color=vColor;if(uAntialias){float blur=1.0;blur=1.0-smoothstep(0.8,1.0,length(vNormal));color.a*=blur;}
#if defined(USE_TEXTURE)
float segLen=uTextureMargin*zoomUnits;float textureLen=thickness*zoomUnits;float deltaX=mod(vUV.x,segLen);float middle=segLen/2.0;if(deltaX>=middle&&deltaX<=middle+textureLen){float uvx=(deltaX-middle)/textureLen;vec4 texture=texture2D(textureImage,vec2(uvx,vUV.y));color=texture.a>=0.5 ? texture : color;}
#endif
if(vDashArray.y>0.0){float offset=uDashOffset*zoomUnits/vTotalDistance;color.a*=(1.0-step(vDashArray.x,mod(vCounter+offset,vDashArray.x+vDashArray.y)));}gl_FragColor=color;}`,defines:m},this),this.prevBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.currentBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.nextBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.directionBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.counterBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),m=[{stride:12,name:"previous",buffer:this.prevBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"position",buffer:this.currentBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"next",buffer:this.nextBuffer,size:3,type:"FLOAT",offset:0},{stride:4,name:"direction",buffer:this.directionBuffer,size:1,type:"FLOAT",offset:0},{stride:16,name:"aColor",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0},{stride:8,name:"aDistance",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:0},{stride:8,name:"aTotalDistance",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:4}],m=m.concat(this.getCommonAttributes()),wf[u.style]&&(m.push({stride:8,name:"uv",buffer:this.uvBuffer,size:2,type:"FLOAT",offset:0}),this.setOptions({texture:wf[u.style]}),this.loadTexture()),this.vertexArray=new Li({gl:i,program:this.program,attributes:m})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){var m=this;if(this.gl){this.initData();for(var p=i.color,y=[],v=0;v<u.length;v++){var M=[],R=u[v].geometry.coordinates;R&&0<R.length&&(M=u[v].geometry.type==="MultiPolygon"?R.reduce(function(T,O){return T.concat(O)})[0].map(function(T){return m.normizedPoint(T)}):u[v].geometry.type==="Polygon"||u[v].geometry.type==="MultiLineString"?R[0].map(function(T){return m.normizedPoint(T)}):R.map(function(T){return m.normizedPoint(T)})),R=this.getProperty("color",p,u[v]),R=this.getProperty("lineColor",p,u[v]),R=this.normizedColor(R);for(var k=this.addMultipleCoords(M),_=0;_<k.length;_++)this.processData(this.dataMgr,k[_],R);if(i.enablePicked)for(R=this.indexToRgb(v),k=0;k<M.length;k++)y.push(R[0]/255,R[1]/255,R[2]/255),y.push(R[0]/255,R[1]/255,R[2]/255),i.repeat&&(y.push(R[0]/255,R[1]/255,R[2]/255),y.push(R[0]/255,R[1]/255,R[2]/255),y.push(R[0]/255,R[1]/255,R[2]/255),y.push(R[0]/255,R[1]/255,R[2]/255))}this.counterBuffer.updateData(new Float32Array(this.dataMgr.counter)),this.currentBuffer.updateData(new Float32Array(this.dataMgr.position)),this.prevBuffer.updateData(new Float32Array(this.dataMgr.prev)),this.nextBuffer.updateData(new Float32Array(this.dataMgr.next)),this.directionBuffer.updateData(new Float32Array(this.dataMgr.direction)),this.colorBuffer.updateData(new Float32Array(this.dataMgr.color)),this.indexBuffer.updateData(new Uint32Array(this.dataMgr.index)),this.isUseTexture&&this.uvBuffer.updateData(new Float32Array(this.dataMgr.uv)),i.enablePicked&&this.pickBuffer.updateData(new Float32Array(y))}}},{key:"processData",value:function(i,u,m){var p,y,v,M,R,k,_,T,O=u.length,U=i.position.length/6,G=zh(u),X=G.arr,W=G.total;G=Ts(X.map(function(lt){return[lt,W]})),X=X.map(function(lt){return[lt,0,lt,1]});var Y=Ts(u.map(function(lt){return-1}),!0),J=Ts(u),ot=Ts(u.map(Vl(-1))),ut=Ts(u.map(Vl(1)));u=Ts(u.map(function(lt){return m})),O=ep(O,U),(p=i.uv).push.apply(p,Fn(is(X))),(y=i.counter).push.apply(y,Fn(is(G))),(v=i.position).push.apply(v,Fn(is(J))),(M=i.prev).push.apply(M,Fn(is(ot))),(R=i.next).push.apply(R,Fn(is(ut))),(k=i.direction).push.apply(k,Fn(Y)),(_=i.color).push.apply(_,Fn(is(u))),(T=i.index).push.apply(T,Fn(O))}},{key:"render",value:function(i){var u=i.gl,m=i.matrix,p=this.dataMgr;if(p&&!(0>=p.index.length)&&this.map){var y=this.getOptions(),v=this.program;v.use(u),i=ln(this.getCommonUniforms(i),{uMatrix:m,uFlat:y.flat,uUnitPx:y.unit==="px",zoomUnits:this.map.getZoomUnits(),devicePixelRatio:window.devicePixelRatio,thickness:y.width,uDashArray:y.dashArray,uDashOffset:y.dashOffset,uAntialias:y.antialias,uOffset:y.offset}),this.isUseTexture&&(i=ln(i,{uTextureMargin:140,textureImage:this.texture})),v.setUniforms(i),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:y.blend==="lighter"?[u.SRC_ALPHA,u.ONE]:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA],polygonOffset:y.polygonOffset}),this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,p.index.length,u.UNSIGNED_INT,0)}}},{key:"loadTexture",value:function(i){var u=this,m=this.getOptions();m.texture?wo(this.gl,m.texture,function(p,y){u.image=y,u.texture=p,i&&i(),u.webglLayer.render()}):(this.image=this.texture=null,i&&i())}}]),A}(ui),Fm=function(){function a(A){fr(this,a),this.join=A.join||"miter",this.cap=A.cap||"butt",this.thickness=A.thickness||4,this.miterLimit=A.miterLimit||2*this.thickness,this.dash=A.dash||!1,this.complex={positions:[],indices:[],normals:[],colors:[],uvs:[],startIndex:0,maxDistance:0},this._lastFlip=-1,this._started=!1,this._normal=null,this._totalDistance=0,this._colorFlag=!1,this._count=0}return mr(a,[{key:"extrude",value:function(A,i,u,m){var p=this.complex;if(1>=A.length)return p;this._lastFlip=-1,this._started=!1,this._normal=null,this._totalDistance=0;for(var y=A.length,v=p.startIndex,M=null,R=1;R<y;R++){var k=M||A[R-1],_=A[R],T=R<y-1?A[R+1]:null;T&&_[0]===T[0]&&_[1]===T[1]&&_[2]===T[2]?M=k:(k=this._segment(p,v,k,_,T,i,u,m),k!==-1&&(v+=k,M=null))}return this.dash&&(p.maxDistance=Math.max(this._totalDistance,p.maxDistance)),p.startIndex=p.positions.length/7,p}},{key:"_segment",value:function(A,i,u,m,p,y,v,M){M[0]instanceof Array&&(this._colorFlag=!0);var R=0,k=zn.create(),_=zn.create(),T=zn.create(),O=zn.create(),U=A.indices,G=A.positions,X=A.normals,W=A.colors;A=A.uvs;var Y=this.cap==="square",J=this.cap==="round",ot=this.join==="bevel",ut=this.join==="round",lt=[m[0],m[1]],wt=[u[0],u[1]];rp(_,lt,wt);var Qt=0;if(this.dash&&(Qt=this._calcDistance(lt,wt),this._totalDistance+=Qt),this._normal||(this._normal=zn.create(),Ss(this._normal,_)),!this._started)if(this._started=!0,Y){wt=zn.create();var zt=zn.create();zn.add(wt,this._normal,_),zn.sub(zt,this._normal,_),X.push(zt[0],zt[1],0),X.push(wt[0],wt[1],0),G.push(u[0],u[1],u[2],this._totalDistance-Qt,y,v,0),G.push(u[0],u[1],u[2],this._totalDistance-Qt,-y,v,0),A.push(this._totalDistance-Qt,0,this._totalDistance-Qt,1),this._colorFlag?(W.push(M[0][0],M[0][1],M[0][2],M[0][3]),W.push(M[0][0],M[0][1],M[0][2],M[0][3])):(W.push(M[0],M[1],M[2],M[3]),W.push(M[0],M[1],M[2],M[3]))}else if(J){wt=zn.fromValues(-_[0],-_[1]),zt=zn.create(),zn.sub(zt,this._normal,_),zn.normalize(zt,zt);var ne=zn.create();zn.add(ne,this._normal,_),zn.normalize(ne,ne);var pe=zn.fromValues(this._normal[0],this._normal[1]),be=zn.fromValues(-this._normal[0],-this._normal[1]);for(X.push(wt[0],wt[1],0),X.push(zt[0],zt[1],0),X.push(-ne[0],-ne[1],0),X.push(pe[0],pe[1],0),X.push(be[0],be[1],0),wt=0;5>wt;wt++)G.push(u[0],u[1],u[2],this._totalDistance-Qt,y,v,0),A.push(this._totalDistance-Qt,0),this._colorFlag?W.push(M[0][0],M[0][1],M[0][2],M[0][3]):W.push(M[0],M[1],M[2],M[3]);U.push(i+0,i+2,i+1,i+1,i+2,i+3,i+3,i+2,i+4),R+=3,i+=3}else this._extrusions(G,X,A,W,u,this._normal,y,this._totalDistance-Qt,v,M,0);if(U.push.apply(U,Fn(this._lastFlip===-1?[i+0,i+1,i+2]:[i+1,i+0,i+2])),p)rp(T,[p[0],p[1]],lt),this._count++,zn.create(),zn.add(O,_,T),zn.normalize(O,O),J=zn.fromValues(-O[1],O[0]),_=zn.fromValues(-_[1],_[0]),_=[y/zn.dot(J,_),J],_=ni(_,2),J=_[0],_=_[1],O=0<zn.dot(O,this._normal)?-1:1,ot||this.join!=="miter"||Math.abs(J)>this.miterLimit&&(ot=!0),ot?(ut=Math.min(2*y,Math.abs(J)),X.push(this._normal[0],this._normal[1],0),X.push(_[0],_[1],0),G.push(m[0],m[1],m[2],this._totalDistance,y*O,v,0),G.push(m[0],m[1],m[2],this._totalDistance,-ut*O,v,0),U.push.apply(U,Fn(this._lastFlip===-O?[i+2,i+1,i+3]:[i+0,i+2,i+3])),Ss(k,T),zn.copy(this._normal,k),X.push(this._normal[0],this._normal[1],0),G.push(m[0],m[1],m[2],this._totalDistance,y*O,v,0),U.push.apply(U,Fn(O===1?[i+2,i+3,i+4]:[i+3,i+2,i+4])),this._flipedUV(A,this._totalDistance,O,!0),this._colorFlag?(W.push(M[this._count][0],M[this._count][1],M[this._count][2],M[this._count][3]),W.push(M[this._count][0],M[this._count][1],M[this._count][2],M[this._count][3]),W.push(M[this._count][0],M[this._count][1],M[this._count][2],M[this._count][3])):(W.push(M[0],M[1],M[2],M[3]),W.push(M[0],M[1],M[2],M[3]),W.push(M[0],M[1],M[2],M[3])),R+=3):ut?(ut=Math.min(2*y,Math.abs(J)),X.push(this._normal[0],this._normal[1],0),X.push(_[0],_[1],0),X.push(_[0],_[1],0),G.push(m[0],m[1],m[2],this._totalDistance,y*O,v,0),G.push(m[0],m[1],m[2],this._totalDistance,y*O,v,0),G.push(m[0],m[1],m[2],this._totalDistance,-ut*O,v,0),U.push.apply(U,Fn(this._lastFlip===-O?[i+2,i+1,i+4,i+2,i+4,i+3]:[i+0,i+2,i+4,i+2,i+3,i+4])),Ss(k,T),zn.copy(this._normal,k),X.push(this._normal[0],this._normal[1],0),G.push(m[0],m[1],m[2],this._totalDistance,y*O,v,0),U.push.apply(U,Fn(O===1?[i+4,i+3,i+5]:[i+3,i+4,i+5])),this._flipedUV(A,this._totalDistance,O,!1),this._colorFlag?(W.push(M[this._count][0],M[this._count][1],M[this._count][2],M[this._count][3]),W.push(M[this._count][0],M[this._count][1],M[this._count][2],M[this._count][3]),W.push(M[this._count][0],M[this._count][1],M[this._count][2],M[this._count][3]),W.push(M[this._count][0],M[this._count][1],M[this._count][2],M[this._count][3])):(W.push(M[0],M[1],M[2],M[3]),W.push(M[0],M[1],M[2],M[3]),W.push(M[0],M[1],M[2],M[3]),W.push(M[0],M[1],M[2],M[3])),R+=4):(this._extrusions(G,X,A,W,m,_,J,this._totalDistance,v,M,this._count),U.push.apply(U,Fn(this._lastFlip===-1?[i+2,i+1,i+3]:[i+2,i+0,i+3])),O=-1,zn.copy(this._normal,_),R+=2),this._lastFlip=O;else if(Ss(this._normal,_),k=M.length-1,Y?(T=zn.create(),ut=zn.create(),zn.add(T,_,this._normal),zn.sub(ut,_,this._normal),X.push(T[0],T[1],0),X.push(ut[0],ut[1],0),G.push(m[0],m[1],m[2],this._totalDistance,y,v,0),G.push(m[0],m[1],m[2],this._totalDistance,y,v,0),A.push(this._totalDistance,0,this._totalDistance,1),this._colorFlag?(W.push(M[k][0],M[k][1],M[k][2],M[k][3]),W.push(M[k][0],M[k][1],M[k][2],M[k][3])):(W.push(M[0],M[1],M[2],M[3]),W.push(M[0],M[1],M[2],M[3]))):this._extrusions(G,X,A,W,m,this._normal,y,this._totalDistance,v,M,k),U.push.apply(U,Fn(this._lastFlip===-1?[i+2,i+1,i+3]:[i+2,i+0,i+3])),R+=2,J){for(T=zn.create(),zn.add(T,_,this._normal),zn.normalize(T,T),ut=zn.create(),zn.sub(ut,_,this._normal),zn.normalize(ut,ut),_=zn.fromValues(_[0],_[1]),X.push(T[0],T[1],0),X.push(ut[0],ut[1],0),X.push(_[0],_[1],0),X=0;3>X;X++)G.push(m[0],m[1],m[2],this._totalDistance,y,v,0),A.push(this._totalDistance,0),this._colorFlag?W.push(M[k][0],M[k][1],M[k][2],M[k][3]):W.push(M[0],M[1],M[2],M[3]);U.push(i+2,i+3,i+4,i+4,i+3,i+5,i+4,i+5,i+6),R+=3}return R}},{key:"_extrusions",value:function(A,i,u,m,p,y,v,M,R,k,_){i.push(y[0],y[1],0),i.push(y[0],y[1],0),A.push(p[0],p[1],p[2],M,v,R,0),A.push(p[0],p[1],p[2],M,-v,R,0),u.push(M,0,M,1),this._colorFlag?(m.push(k[_][0],k[_][1],k[_][2],k[_][3]),m.push(k[_][0],k[_][1],k[_][2],k[_][3])):(m.push(k[0],k[1],k[2],k[3]),m.push(k[0],k[1],k[2],k[3]))}},{key:"_calcDistance",value:function(A,i){return Math.sqrt(Math.pow(A[0]-i[0],2)+Math.pow(A[1]-i[1],2))}},{key:"_flipedUV",value:function(A,i,u,m){m?u===-1?A.push(i,0,i,1,i,0):A.push(i,1,i,0,i,1):u===-1?A.push(i,0,i,0,i,1,i,0):A.push(i,1,i,1,i,0,i,1)}}]),a}(),Xp={normal:null,road:Qh,arrow:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},A=a.width;a=a.color;var i=Wl(),u=i.canvas;return i=i.ctx,i.save(),i.moveTo(5,0),i.lineTo(32,16),i.lineTo(5,32),i.strokeStyle=a||"#fff",i.lineWidth=A||8,i.stroke(),i.restore(),u}},ou=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="LineLayer",i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{style:"normal",styleOptions:{},color:"rgba(25, 25, 250, 1)",blend:"default",lineJoin:"miter",lineCap:"butt",unit:"px",width:4,offset:0,antialias:!1,dashArray:[0,0],dashOffset:0,animation:!1,interval:.1,duration:2,trailLength:.5,minZoom:2,maxZoom:25,polygonOffset:[0,0],depthTest:!0,depthWrite:!0,depthFunc:"lequal"}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions(),m=[];u.enablePicked&&m.push("PICK"),Xp[u.style]&&(this.isUseTexture=!0,this.prevStyle=u.style,this.prevStyleOptions=u.styleOptions,m.push("USE_TEXTURE")),u.animation===!0&&(this.isAnimateLine=!0,this.date=new Date,this.autoUpdate=!0,m.push("USE_LINE_ANIMATION")),u.useDash===!0&&m.push("USE_SIMPLE_DASH"),this.program=new Ur(this.gl,{vertexShader:`precision highp float;uniform vec4 uSelectedColor;uniform mat4 u_matrix;uniform vec2 u_dash_array;uniform float u_zoom_units;uniform float u_zIndex;uniform bool u_unit_px;attribute vec4 a_color;attribute vec3 a_position;attribute vec3 a_normal;attribute float a_distance;attribute float a_total_distance;attribute float a_width;attribute float a_offset;
#if defined(USE_TEXTURE)
attribute vec2 uv;
#endif
varying vec4 v_color;varying vec2 v_normal;varying vec2 v_uv;varying vec2 v_dash_array;varying float v_total_distance;varying float v_counter;varying float v_width;
#if defined(USE_SIMPLE_DASH)
varying vec3 v_position;
#endif
void main(){v_width=a_width;v_color=a_color;v_counter=a_distance/a_total_distance;v_dash_array=u_dash_array/a_total_distance;if(u_unit_px){v_dash_array*=u_zoom_units;}v_total_distance=a_total_distance;v_normal=vec2(normalize(a_normal.xy)*sign(a_width));
#if defined(USE_TEXTURE)
v_uv=uv;
#endif
#if defined(PICK)
if(mapvIsPicked()){v_color=uSelectedColor;}
#endif
vec2 extrude=a_normal.xy*a_width/2.0;if(u_unit_px){extrude*=u_zoom_units;}vec2 offsetXY=a_normal.xy*-a_offset;float offsetZ=a_offset/100.0+u_zIndex;if(u_unit_px){offsetXY*=u_zoom_units;offsetZ*=u_zoom_units;}
#if defined(USE_SIMPLE_DASH)
v_position=a_position;
#endif
gl_Position=u_matrix*vec4(a_position.xy+extrude+offsetXY,a_position.z+offsetZ,1.0);}`,fragmentShader:`precision highp float;varying vec4 v_color;varying vec2 v_normal;varying vec2 v_uv;varying vec2 v_dash_array;varying float v_counter;varying float v_total_distance;varying float v_width;
#if defined(USE_SIMPLE_DASH)
varying vec3 v_position;
#endif
uniform bool u_antialias;uniform float u_dash_offset;uniform float u_zoom_units;
#if defined(USE_LINE_ANIMATION)
uniform bool u_animate;uniform float u_time;uniform float u_duration;uniform float u_interval;uniform float u_trail_length;
#endif
#if defined(USE_TEXTURE)
uniform float u_texture_width;uniform float u_texture_margin;uniform sampler2D u_sampler;
#endif
void main(){vec4 color=v_color;
#if defined(USE_SIMPLE_DASH)
if(mod(v_position.x,5.0)<3.0){discard;}
#endif
if(u_antialias){float blur=1.0;blur=1.0-smoothstep(0.8,1.0,length(v_normal));color.a*=blur;}
#if defined(USE_LINE_ANIMATION)
if(u_animate){float alpha=1.0-fract(mod(1.0-v_counter,u_interval)*(1.0/u_interval)+u_time/u_duration);alpha=(alpha+u_trail_length-1.0)/u_trail_length;color.a*=alpha;gl_FragColor=color;return;}
#endif
#if defined(USE_TEXTURE)
float margin_width=u_texture_margin*u_zoom_units;float margin_width_half=margin_width/2.0;float texture_width=u_texture_width*u_zoom_units;float delta=mod(v_uv.x,texture_width+margin_width);if(delta>=margin_width_half&&delta<=margin_width_half+texture_width){float uvx=(delta-margin_width_half)/texture_width;vec4 texture=texture2D(u_sampler,vec2(uvx,v_uv.y));color=texture.a>=0.5 ? texture : color;}
#endif
if(v_dash_array.y>0.0){float offset=u_dash_offset*u_zoom_units/v_total_distance;color.a*=(1.0-step(v_dash_array.x,mod(v_counter+offset,v_dash_array.x+v_dash_array.y)));}gl_FragColor=color;}`,defines:m},this),this.positionBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.normalBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),m=[{stride:28,name:"a_position",buffer:this.positionBuffer,size:3,type:"FLOAT",offset:0},{stride:28,name:"a_distance",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:12},{stride:28,name:"a_width",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:16},{stride:28,name:"a_offset",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:20},{stride:28,name:"a_total_distance",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:24},{stride:12,name:"a_normal",buffer:this.normalBuffer,size:3,type:"FLOAT",offset:0},{stride:16,name:"a_color",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0}],m=m.concat(this.getCommonAttributes()),this.isUseTexture&&(this.uvBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),m.push({stride:8,name:"uv",buffer:this.uvBuffer,size:2,type:"FLOAT",offset:0}),u=(0,Xp[u.style])(u.styleOptions),this.setOptions({texture:u}),this.loadTexture()),this.vertexArray=new Li({gl:i,program:this.program,attributes:m})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){var m=this,p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};if(this.gl)if(!this.isUseTexture||this.prevStyle===i.style&&oh(this.prevStyleOptions)===oh(i.styleOptions))this.parseData(i,u,p);else{this.prevStyle=i.style,this.prevStyleOptions=i.styleOptions;var y=(0,Xp[i.style])(i.styleOptions);this.setOptions({texture:y}),this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){m.loadTexture(function(){m.parseData(i,u,p)})},0)}}},{key:"onParseProperties",value:function(i){return this.normizedColor(i)}},{key:"parseData",value:function(i,u,m){var p=this,y=i.dashArray,v=i.width,M=i.color,R=i.offset;y=!!this.isUseTexture||!!y[1]||!!this.isAnimateLine;for(var k=new Fm({dash:y,cap:i.lineCap,join:i.lineJoin,miterLimit:i.miterLimit,thickness:v}),_=[],T=function(U){var G=u[U].geometry.coordinates;G&&0<G.length&&(u[U].geometry.type==="MultiPolygon"?G=G.reduce(function(ut,lt){return ut.concat(lt)}):u[U].geometry.type==="LineString"&&(G=[G]),G=G.map(function(ut){return ut=ut.map(function(lt){return p.normizedPoint(lt)}),m.closePath===!0&&ut[0].toString()!==ut[ut.length-1].toString()&&ut.push(ut[0]),ut}));var X=p.getProperty("color",M,u[U]);X=p.getProperty("lineColor",X,u[U]),X=p.onParseProperties(X,u[0].geometry.coordinates.length);var W=p.getProperty("width",v,u[U]);W=Number(W);var Y=p.getProperty("offset",R,u[U]);Y=Number(Y);var J=k.complex.startIndex;G=p.addMultipleCoords(G);for(var ot=0;ot<G.length;ot++)G[ot].forEach(function(ut){k.extrude(ut,W,Y,X)});if(i.enablePicked)for(U=p.indexToRgb(U),G=k.complex.startIndex;J<G;J++)_.push(U[0]/255,U[1]/255,U[2]/255),i.repeat&&(_.push(U[0]/255,U[1]/255,U[2]/255),_.push(U[0]/255,U[1]/255,U[2]/255))},O=0;O<u.length;O++)T(O);if(T=k.complex,y)for(O=0;O<T.positions.length/7;O++)T.positions[7*O+6]=T.maxDistance;this.lineData=T,this.positionBuffer.updateData(new Float32Array(T.positions)),this.normalBuffer.updateData(new Float32Array(T.normals)),this.colorBuffer.updateData(new Float32Array(T.colors)),this.indexBuffer.updateData(new Uint32Array(T.indices)),this.isUseTexture&&this.uvBuffer.updateData(new Float32Array(T.uvs)),i.enablePicked&&this.pickBuffer.updateData(new Float32Array(_))}},{key:"render",value:function(i){var u=i.gl,m=i.matrix,p=this.lineData;if(p&&!(0>=p.indices.length)&&this.map){var y=this.getOptions(),v=this.program;v.use(u),i=ln(this.getCommonUniforms(i),{u_matrix:m,u_zoom_units:this.map.getZoomUnits(),u_dash_array:y.dashArray,u_dash_offset:y.dashOffset,u_antialias:y.antialias,u_unit_px:y.unit==="px",u_zIndex:y.zIndex}),this.isUseTexture&&(i=ln(i,{u_texture_width:y.width,u_texture_margin:140,u_sampler:this.texture})),this.isAnimateLine&&(m=this.map.getZoom(),i=ln(i,{u_time:(new Date-this.date)/1e3,u_animate:!!(m>=y.minZoom&&m<=y.maxZoom&&this.autoUpdate),u_duration:y.duration,u_interval:y.interval,u_trail_length:y.trailLength})),v.setUniforms(i),v=u.LEQUAL,y.depthFunc&&(v=u[y.depthFunc.toUpperCase()]),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:Gs(u,y.blend),polygonOffset:y.polygonOffset,depthTest:y.depthTest,depthMask:y.depthWrite,depthFunc:v}),this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,p.indices.length,u.UNSIGNED_INT,0)}}},{key:"loadTexture",value:function(i){var u=this,m=this.getOptions();m.texture?wo(this.gl,m.texture,function(p,y){u.image=y,u.texture=p,i&&i(),u.webglLayer.render()}):(this.image=this.texture=null,i&&i())}}]),A}(ui),Rm=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="LineRainbowLayer",i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{style:"normal",styleOptions:{},color:"rgba(25, 25, 250, 1)",blend:"normal",lineJoin:"miter",lineCap:"butt",unit:"px",width:4,offset:0,antialias:!1,dashArray:[0,0],dashOffset:0,animation:!1,interval:.1,duration:2,trailLength:.5,minZoom:2,maxZoom:25,polygonOffset:[0,0],depthTest:!0,depthWrite:!0}}},{key:"onDestroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null),this.options=this.data=this.indexBuffer=this.normalBuffer=this.colorBuffer=this.positionBuffer=this.program=this.vertexArray=null}},{key:"onParseProperties",value:function(i,u){var m=i.length;if(i instanceof Array){var p=[];if(m<u){var y=Math.floor(u/m);u%=m;for(var v=0,M=0;v<m;v++,M++)for(var R=M<u?y+1:y,k=0;k<R;k++)p.push(i[v]);i=p}for(m=[],y=0;y<i.length;y++)m.push(this.normizedColor(i[y]))}else m=this.normizedColor(i);return m}}]),A}(ou),Fa=function(){function a(A,i){fr(this,a),this.layer=A,this.gl=i,this.initData()}return mr(a,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]},this.maxLength=0}},{key:"getData",value:function(){return this.outWall3d}},{key:"getMaxDataLength",value:function(){return this.maxLength}},{key:"onLayerChange",value:function(A,i){this.initData();var u=A.color,m=A.height,p=A.gradient;A=this.gl;for(var y=0;y<i.length;y++){var v=i[y].geometry.coordinates,M=v.length;this.maxLength=M>this.maxLength?M:this.maxLength;for(var R=[],k=0;k<M;k++){var _=this.layer.normizedPoint(v[k]);R.push(_)}M=i[y].color||u,"properties"in i[y]&&"color"in i[y].properties&&(M=i[y].properties.color),p||Object.prototype.toString.call(M)!=="[object Function]"||(M=M(i[y])),v=this.layer.normizedColor(p?p[0]:M),M=this.layer.normizedColor(p?p[1]:M),k=i[y].height||m,"properties"in i[y]&&"height"in i[y].properties&&(k=i[y].properties.height),Object.prototype.toString.call(k)==="[object Function]"&&(k=k(i[y])),this.processData(this.outWall3d,R,v,M,k)}for(i=0;i<this.outWall3d.vertex.length;i++){for(u=[],m=this.outWall3d.vertex[i].length,p=0;p<m;p++)u.push.apply(u,Fn(this.outWall3d.vertex[i][p]));m=A.createBuffer(),A.bindBuffer(A.ARRAY_BUFFER,m),A.bufferData(A.ARRAY_BUFFER,new Float32Array(u),A.STATIC_DRAW),this.outWall3d.vertexBuffer[i]=m,A.bindBuffer(A.ARRAY_BUFFER,null),m=A.createBuffer(),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,m),A.bufferData(A.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[i]),A.STATIC_DRAW),this.outWall3d.indexBuffer[i]=m,A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(A,i,u,m,p){var y=A.vertex[A.vertex.length-1],v=A.index[A.index.length-1],M=i.length;(!v||65536<=v.length+2*M+2)&&(y=[],v=[],A.vertex.push(y),A.index.push(v)),(A=y.length)&&v.push(A-1,A);for(var R=A=0;R<M;R++){var k=[],_=[],T=i[R];k.push(T[0],T[1]),k.push(T[2]?Number(T[2])+p:p),k.push(T[3]?Number(T[3]):R),k.push(A),k.push(u[0],u[1],u[2],u[3]),_.push(T[0],T[1]),_.push(T[2]?Number(T[2]):0),_.push(T[3]?Number(T[3]):R),_.push(A),_.push(m[0],m[1],m[2],m[3]),T=y.length,y.push(k,_),v.push(T,T+1),R<M-1&&(A+=this.getDistance(i[R],i[R+1]))}}},{key:"getDistance",value:function(A,i){return Math.sqrt(Math.pow(Math.abs(A[0]-i[0]),2)+Math.pow(Math.abs(A[1]-i[1]),2))}}]),a}(),Kp=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.startTime=i.options.startTime||0,i.endTime=i.options.endTime,i.time=i.startTime,i.autoUpdate=!0,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{height:100,color:[1,1,1,1],trailLength:3,step:.1}}},{key:"initialize",value:function(i){this.gl=i,this.dataMgr=new Fa(this,this.gl),this.program=new Ur(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;attribute vec4 aPos;attribute float aDistance;attribute vec4 aColor;varying vec4 vColor;varying float vHeight;varying float vTime;varying float vDistance;void main(){vTime=1.0-((currentTime-aPos.w)/trailLength);vHeight=aPos.z;vColor=aColor;vDistance=aDistance;gl_Position=u_matrix*vec4(aPos.xyz,1.0);}",fragmentShader:"precision highp float;varying vec4 vColor;varying float vTime;varying float vDistance;varying float vHeight;uniform float currentTime;void main(){if(vTime>1.0||vTime<0.0){}float radius=2.5;float distance=vDistance+currentTime*20.0;float modDistance=mod(distance,9.0);float alpha=1.0;if(modDistance>radius*2.0){discard;}else{float x=abs(modDistance-radius);float y=abs(vHeight-radius);float dis=sqrt(pow(x,2.0)+pow(y,2.0));if(dis>radius){discard;}alpha=dis/radius;}gl_FragColor=vec4(vColor.rgb,1.0-alpha);}"})}},{key:"onChanged",value:function(i,u){this.gl&&(this.dataMgr.onLayerChange(i,u),i.endTime===void 0&&(this.endTime=this.dataMgr.getMaxDataLength()))}},{key:"render",value:function(i){var u=i.gl,m=i.matrix;if((i=this.dataMgr.getData())&&!(0>=i.vertex.length)){var p=this.getOptions(),y=this.program;for(u.useProgram(y.program),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA]}),u.enableVertexAttribArray(y.attributes.aPos),u.enableVertexAttribArray(y.attributes.aDistance),u.enableVertexAttribArray(y.attributes.aColor),u.uniformMatrix4fv(y.uniforms.u_matrix,!1,m),u.uniform1f(y.uniforms.currentTime,this.time),u.uniform1f(y.uniforms.trailLength,p.trailLength),m=0;m<i.vertex.length;m++)if(!(0>=i.vertex[m].length)){var v=i.vertex[m],M=new Float32Array(v[0]).BYTES_PER_ELEMENT;v=M*v[0].length,u.bindBuffer(u.ARRAY_BUFFER,i.vertexBuffer[m]),u.vertexAttribPointer(y.attributes.aPos,4,u.FLOAT,!1,v,0),u.vertexAttribPointer(y.attributes.aDistance,1,u.FLOAT,!1,v,4*M),u.vertexAttribPointer(y.attributes.aColor,4,u.FLOAT,!1,v,5*M),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i.indexBuffer[m]),u.drawElements(u.TRIANGLE_STRIP,i.index[m].length,u.UNSIGNED_SHORT,0),u.bindBuffer(u.ARRAY_BUFFER,null),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null)}this.time+=p.step,this.time>this.endTime&&(this.time=this.startTime)}}}]),A}(ui),su=function(a,A,i,u){if(!(a instanceof A)||u!==void 0&&u in a)throw TypeError(i+": incorrect invocation!");return a},ki=Ot(function(a){var A={},i={};a=a.exports=function(u,m,p,y,v){v=v?function(){return u}:AA(u),p=Yo(p,y,m?2:1),y=0;var M,R;if(typeof v!="function")throw TypeError(u+" is not iterable!");if(v===void 0||Ca.Array!==v&&mp[Yi]!==v){for(y=v.call(u);!(R=y.next()).done;)if(v=fl(y,p,R.value,m),v===A||v===i)return v}else for(M=fi(u.length);M>y;y++)if(v=m?p(Ws(R=u[y])[0],R[1]):p(u[y]),v===A||v===i)return v},a.BREAK=A,a.RETURN=i}),ig=eo("species"),Cf=function(a,A){a=Ws(a).constructor;var i;return a===void 0||(i=Ws(a)[ig])==null?A:FA(i)},Mf=function(a,A,i){var u=i===void 0;switch(A.length){case 0:return u?a():a.call(i);case 1:return u?a(A[0]):a.call(i,A[0]);case 2:return u?a(A[0],A[1]):a.call(i,A[0],A[1]);case 3:return u?a(A[0],A[1],A[2]):a.call(i,A[0],A[1],A[2]);case 4:return u?a(A[0],A[1],A[2],A[3]):a.call(i,A[0],A[1],A[2],A[3])}return a.apply(i,A)},au=Ln.process,Qu=Ln.setImmediate,Ns=Ln.clearImmediate,Au=Ln.MessageChannel,_f=Ln.Dispatch,uu=0,gh={},xc=function(){var a=+this;if(gh.hasOwnProperty(a)){var A=gh[a];delete gh[a],A()}},Bf=function(a){xc.call(a.data)};if(!Qu||!Ns)if(Qu=function(a){for(var A=[],i=1;arguments.length>i;)A.push(arguments[i++]);return gh[++uu]=function(){Mf(typeof a=="function"?a:Function(a),A)},Fl(uu),uu},Ns=function(a){delete gh[a]},ra(au)=="process")var Fl=function(a){au.nextTick(Yo(xc,a,1))};else if(_f&&_f.now)Fl=function(a){_f.now(Yo(xc,a,1))};else if(Au){var Yp=new Au,Pm=Yp.port2;Yp.port1.onmessage=Bf,Fl=Yo(Pm.postMessage,Pm,1)}else Ln.addEventListener&&typeof postMessage=="function"&&!Ln.importScripts?(Fl=function(a){Ln.postMessage(a+"","*")},Ln.addEventListener("message",Bf,!1)):Fl="onreadystatechange"in(Qa?ya.createElement("script"):{})?function(a){Zl.appendChild(Qa?ya.createElement("script"):{}).onreadystatechange=function(){Zl.removeChild(this),xc.call(a)}}:function(a){setTimeout(Yo(xc,a,1),0)};var Zp=Qu,og=Ln.MutationObserver||Ln.WebKitMutationObserver,Jp=Ln.process,qp=Ln.Promise,sg=ra(Jp)=="process",Ef={f:function(a){return new iA(a)}},If=function(a){try{return{e:!1,v:a()}}catch(A){return{e:!0,v:A}}},Um=Ln.navigator,Tf=Um&&Um.userAgent||"",Rl=function(a,A){if(Ws(a),Ls(A)&&A.constructor===a)return A;a=Ef.f(a);var i=a.resolve;return i(A),a.promise},QA=function(a,A,i){for(var u in A)i&&a[u]?a[u]=A[u]:na(a,u,A[u]);return a},Ra=eo("species"),Dm=function(a){a=typeof Cn[a]=="function"?Cn[a]:Ln[a],Ki&&a&&!a[Ra]&&js.f(a,Ra,{configurable:!0,get:function(){return this}})},H=function(){var a,A,i=function(){var v;for(sg&&(v=Jp.domain)&&v.exit();a;){var M=a.fn;a=a.next;try{M()}catch(R){throw a?u():A=void 0,R}}A=void 0,v&&v.enter()};if(sg)var u=function(){Jp.nextTick(i)};else if(!og||Ln.navigator&&Ln.navigator.standalone)if(qp&&qp.resolve){var m=qp.resolve(void 0);u=function(){m.then(i)}}else u=function(){Zp.call(Ln,i)};else{var p=!0,y=document.createTextNode("");new og(i).observe(y,{characterData:!0}),u=function(){y.data=p=!p}}return function(v){v={fn:v,next:void 0},A&&(A.next=v),a||(a=v,u()),A=v}}(),P=Ln.TypeError,b=Ln.process,Q=b&&b.versions,q=Q&&Q.v8||"",nt=Ln.Promise,ft=ll(b)=="process",St=function(){},Tt,Wt=Tt=Ef.f,$t=!!function(){try{var a=nt.resolve(1),A=(a.constructor={})[eo("species")]=function(i){i(St,St)};return(ft||typeof PromiseRejectionEvent=="function")&&a.then(St)instanceof A&&q.indexOf("6.6")!==0&&Tf.indexOf("Chrome/66")===-1}catch(i){}}(),me=function(a){var A;return Ls(a)&&typeof(A=a.then)=="function"?A:!1},we=function(a,A){if(!a._n){a._n=!0;var i=a._c;H(function(){for(var u=a._v,m=a._s==1,p=0;i.length>p;){var y=void 0,v=void 0,M=void 0,R=i[p++],k=m?R.ok:R.fail,_=R.resolve,T=R.reject,O=R.domain;try{k?(m||(a._h==2&&Ye(a),a._h=1),k===!0?M=u:(O&&O.enter(),M=k(u),O&&(O.exit(),y=!0)),M===R.promise?T(P("Promise-chain cycle")):(v=me(M))?v.call(M,_,T):_(M)):T(u)}catch(U){O&&!y&&O.exit(),T(U)}}a._c=[],a._n=!1,A&&!a._h&&Lr(a)})}},Lr=function(a){Zp.call(Ln,function(){var A=a._v,i=a._h!==1&&(a._a||a._c).length===0,u,m;if(i){var p=If(function(){ft?b.emit("unhandledRejection",A,a):(u=Ln.onunhandledrejection)?u({promise:a,reason:A}):(m=Ln.console)&&m.error&&m.error("Unhandled promise rejection",A)});a._h=ft||a._h!==1&&(a._a||a._c).length===0?2:1}if(a._a=void 0,i&&p.e)throw p.v})},Ye=function(a){Zp.call(Ln,function(){var A;ft?b.emit("rejectionHandled",a):(A=Ln.onrejectionhandled)&&A({promise:a,reason:a._v})})},lr=function(a){var A=this;A._d||(A._d=!0,A=A._w||A,A._v=a,A._s=2,A._a||(A._a=A._c.slice()),we(A,!0))},mn=function(a){var A=this,i;if(!A._d){A._d=!0,A=A._w||A;try{if(A===a)throw P("Promise can't be resolved itself");(i=me(a))?H(function(){var u={_w:A,_d:!1};try{i.call(a,Yo(mn,u,1),Yo(lr,u,1))}catch(m){lr.call(u,m)}}):(A._v=a,A._s=1,we(A,!1))}catch(u){lr.call({_w:A,_d:!1},u)}}};if(!$t){nt=function(a){su(this,nt,"Promise","_h"),FA(a),Ar.call(this);try{a(Yo(mn,this,1),Yo(lr,this,1))}catch(A){lr.call(this,A)}};var Ar=function(a){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1};Ar.prototype=QA(nt.prototype,{then:function(a,A){var i=Wt(Cf(this,nt));return i.ok=typeof a=="function"?a:!0,i.fail=typeof A=="function"&&A,i.domain=ft?b.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&we(this,!1),i.promise},catch:function(a){return this.then(void 0,a)}});var qe=function(){var a=new Ar;this.promise=a,this.resolve=Yo(mn,a,1),this.reject=Yo(lr,a,1)};Ef.f=Wt=function(a){return a===nt||a===gi?new qe(a):Tt(a)}}Xr(Xr.G+Xr.W+Xr.F*!$t,{Promise:nt}),Ks(nt,"Promise"),Dm("Promise");var gi=Cn.Promise;Xr(Xr.S+Xr.F*!$t,"Promise",{reject:function(a){var A=Wt(this),i=A.reject;return i(a),A.promise}}),Xr(Xr.S+1*Xr.F,"Promise",{resolve:function(a){return Rl(this===gi?nt:this,a)}}),Xr(Xr.S+Xr.F*!($t&&tf(function(a){nt.all(a).catch(St)})),"Promise",{all:function(a){var A=this,i=Wt(A),u=i.resolve,m=i.reject,p=If(function(){var y=[],v=0,M=1;ki(a,!1,function(R){var k=v++,_=!1;y.push(void 0),M++,A.resolve(R).then(function(T){_||(_=!0,y[k]=T,--M||u(y))},m)}),--M||u(y)});return p.e&&m(p.v),i.promise},race:function(a){var A=this,i=Wt(A),u=i.reject,m=If(function(){ki(a,!1,function(p){A.resolve(p).then(i.resolve,u)})});return m.e&&u(m.v),i.promise}}),Xr(Xr.P+Xr.R,"Promise",{finally:function(a){var A=Cf(this,Cn.Promise||Ln.Promise),i=typeof a=="function";return this.then(i?function(u){return Rl(A,a()).then(function(){return u})}:a,i?function(u){return Rl(A,a()).then(function(){throw u})}:a)}}),Xr(Xr.S,"Promise",{try:function(a){var A=Ef.f(this);return a=If(a),(a.e?A.reject:A.resolve)(a.v),A.promise}});var Fr=Cn.Promise,Fi=Ot(function(a){a.exports={default:Fr,__esModule:!0}}),vr=Gt(Fi),qn=function(a,A){if(!Ls(a)||a._t!==A)throw TypeError("Incompatible receiver, "+A+" required!");return a},Gi=js.f,Dn=ss.fastKey,cs=Ki?"_s":"size",$o=function(a,A){var i=Dn(A);if(i!=="F")return a._i[i];for(a=a._f;a;a=a.n)if(a.k==A)return a},ws={getConstructor:function(a,A,i,u){var m=a(function(p,y){su(p,m,A,"_i"),p._t=A,p._i=Cu(null),p._f=void 0,p._l=void 0,p[cs]=0,y!=null&&ki(y,i,p[u],p)});return QA(m.prototype,{clear:function(){for(var p=qn(this,A),y=p._i,v=p._f;v;v=v.n)v.r=!0,v.p&&(v.p=v.p.n=void 0),delete y[v.i];p._f=p._l=void 0,p[cs]=0},delete:function(p){var y=qn(this,A);if(p=$o(y,p)){var v=p.n,M=p.p;delete y._i[p.i],p.r=!0,M&&(M.n=v),v&&(v.p=M),y._f==p&&(y._f=v),y._l==p&&(y._l=M),y[cs]--}return!!p},forEach:function(p){qn(this,A);for(var y=Yo(p,1<arguments.length?arguments[1]:void 0,3),v;v=v?v.n:this._f;)for(y(v.v,v.k,this);v&&v.r;)v=v.p},has:function(p){return!!$o(qn(this,A),p)}}),Ki&&Gi(m.prototype,"size",{get:function(){return qn(this,A)[cs]}}),m},def:function(a,A,i){var u=$o(a,A),m;return u?u.v=i:(a._l=u={i:m=Dn(A,!0),k:A,v:i,p:A=a._l,n:void 0,r:!1},a._f||(a._f=u),A&&(A.n=u),a[cs]++,m!=="F"&&(a._i[m]=u)),a},getEntry:$o,setStrong:function(a,A,i){rl(a,A,function(u,m){this._t=qn(u,A),this._k=m,this._l=void 0},function(){for(var u=this._k,m=this._l;m&&m.r;)m=m.p;return this._t&&(this._l=m=m?m.n:this._t._f)?u=="keys"?ia(0,m.k):u=="values"?ia(0,m.v):ia(0,[m.k,m.v]):(this._t=void 0,ia(1))},i?"entries":"values",!i,!0),Dm(A)}},Cs=eo("species"),lu=function(a,A){if(Ma(a)){var i=a.constructor;typeof i!="function"||i!==Array&&!Ma(i.prototype)||(i=void 0),Ls(i)&&(i=i[Cs],i===null&&(i=void 0))}return new(i===void 0?Array:i)(A)},mi=js.f,Pl=function(a,A){var i=a==1,u=a==2,m=a==3,p=a==4,y=a==6,v=a==5||y,M=A||lu;return function(R,k,_){var T=Object(ma(R)),O=bc(T);k=Yo(k,_,3),_=fi(O.length);var U=0;R=i?M(R,_):u?M(R,0):void 0;for(var G,X;_>U;U++)if((v||U in O)&&(G=O[U],X=k(G,U,T),a)){if(i)R[U]=X;else if(X)switch(a){case 3:return!0;case 5:return G;case 6:return U;case 2:R.push(G)}else if(p)return!1}return y?-1:m||p?p:R}}(0);(function(a,A,i,u,m,p){var y=Ln[a],v=y,M=m?"set":"add",R=v&&v.prototype,k={};return Ki&&typeof v=="function"&&(p||R.forEach&&!KA(function(){new v().entries().next()}))?(v=A(function(_,T){su(_,v,a,"_c"),_._c=new y,T!=null&&ki(T,m,_[M],_)}),Pl("add clear delete forEach get has set keys values entries toJSON".split(" "),function(_){var T=_=="add"||_=="set";_ in R&&(!p||_!="clear")&&na(v.prototype,_,function(O,U){return su(this,v,_),!T&&p&&!Ls(O)?_=="get"?void 0:!1:(O=this._c[_](O===0?0:O,U),T?this:O)})}),p||mi(v.prototype,"size",{get:function(){return this._c.size}})):(v=u.getConstructor(A,a,m,M),QA(v.prototype,i),ss.NEED=!0),Ks(v,a),k[a]=v,Xr(Xr.G+Xr.W+Xr.F,k),p||u.setStrong(v,a,m),v})("Map",function(a){return function(){return a(this,0<arguments.length?arguments[0]:void 0)}},{get:function(a){return(a=ws.getEntry(qn(this,"Map"),a))&&a.v},set:function(a,A){return ws.def(qn(this,"Map"),a===0?0:a,A)}},ws,!0),Xr(Xr.P+Xr.R,"Map",{toJSON:function(a){return function(){if(ll(this)!=a)throw TypeError(a+"#toJSON isn't generic");var A=[];return ki(this,!1,A.push,A,void 0),A}}("Map")}),function(a){Xr(Xr.S,a,{of:function(){for(var A=arguments.length,i=Array(A);A--;)i[A]=arguments[A];return new this(i)}})}("Map"),function(a){Xr(Xr.S,a,{from:function(A,i,u){var m;if(FA(this),(m=i!==void 0)&&FA(i),A==null)return new this;var p=[];if(m){var y=0,v=Yo(i,u,2);ki(A,!1,function(M){p.push(v(M,y++))})}else ki(A,!1,p.push,p);return new this(p)}})}("Map");var Ul=Cn.Map,fo=Ot(function(a){a.exports={default:Ul,__esModule:!0}}),zs=Gt(fo),$n=Ot(function(a,A){A.__esModule=!0;var i=wa&&wa.__esModule?wa:{default:wa};A.default=function(u,m,p){return m in u?(0,i.default)(u,m,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[m]=p,u}}),pA=Gt($n),Ji,Ya,mh=(Ji={},pA(Ji,1,1),pA(Ji,2,1),pA(Ji,3,1),Ji),hu=(Ya={},pA(Ya,1,1),pA(Ya,2,1),pA(Ya,3,1),Ya),dA=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.vertCount=0,i.bufferMap={},i.bufferData=[],i.autoUpdate=!0,u=i.canvas=document.createElement("canvas"),i.ctx=u.getContext("2d"),i.iconHash=new zs,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{color:[1,1,1,.8],speed:1,size:5,pointFade:!0,pointFadeBuffer:1,minLineLength:2,animationType:2,shapeType:2,depthTest:!1,delay:0,unit:"px",padding:0}}},{key:"initialize",value:function(i){this.gl=i,this.texture=null,this.isUseTexture=!1;var u=this.getOptions();this.updateUniformsFromOptions(u),this.program=new Ur(this.gl,{vertexShader:"precision highp float;attribute vec3 aPos;attribute vec3 aNextPos;attribute vec4 aColor;attribute float aIndex;attribute float aNextIndex;attribute float aLength;attribute float aSpeed;attribute float aDelay;attribute vec3 aUV;uniform float uSize;uniform mat4 u_matrix;uniform float uOriginSpeed;uniform float uElapsedSteps;uniform int uAnimationType;uniform int uPointFade;uniform float uPointFadeBuffer;uniform float uZoomUnits;varying float vAddOpacity;varying vec3 vUV;varying vec4 vColor;void main(){vColor=aColor;if(uAnimationType==1){if(abs(aIndex-mod(uElapsedSteps,aLength))>.1){gl_Position=vec4(-2.,-2.,0,1.0);return;}gl_Position=u_matrix*vec4(aPos.xyz,1.0);vAddOpacity=1.;}else if(uAnimationType==2){float lineLength=aLength-1.;float cIndex=mod(uElapsedSteps,lineLength);float rest=cIndex-aIndex;if(rest<1.&&rest>=0.){if(uPointFade==1){if(cIndex<uPointFadeBuffer){vAddOpacity=cIndex/uPointFadeBuffer;}else if(cIndex>lineLength-uPointFadeBuffer){vAddOpacity=(lineLength-cIndex)/uPointFadeBuffer;}else{vAddOpacity=1.;}}else{vAddOpacity=1.;}gl_Position=u_matrix*vec4(aPos.x+(aNextPos.x-aPos.x)*rest,aPos.y+(aNextPos.y-aPos.y)*rest,aPos.z+(aNextPos.z-aPos.z)*rest,1.0);}else{gl_Position=vec4(-2.,-2.,0,1.0);return;}}else if(uAnimationType==3){float speedRatio=aSpeed/uOriginSpeed;float percent=mod(mod(uElapsedSteps*aSpeed,aLength)/aLength-aDelay,1.0);if(percent<=aNextIndex&&percent>=aIndex){if(uPointFade==1){float fadePercent=uPointFadeBuffer*1000./aLength;if(percent<fadePercent){vAddOpacity=percent/fadePercent;}else if(percent>1.-fadePercent){vAddOpacity=(1.-percent)/fadePercent;}else{vAddOpacity=1.;}}else{vAddOpacity=1.;}float rest=(percent-aIndex)/(aNextIndex-aIndex);gl_Position=u_matrix*vec4(aPos.x+(aNextPos.x-aPos.x)*rest,aPos.y+(aNextPos.y-aPos.y)*rest,aPos.z+(aNextPos.z-aPos.z)*rest,1.0);}else{gl_Position=vec4(-2.,-2.,0,1.0);return;}}vUV=aUV;gl_PointSize=uSize/uZoomUnits;}",fragmentShader:"precision highp float;uniform int ushapeType;uniform bool uUseTexture;uniform sampler2D uSampler;varying float vAddOpacity;varying vec4 vColor;varying vec3 vUV;void main(){if(ushapeType==2){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}gl_FragColor=vec4(vColor.rgb,vColor.a*vAddOpacity);}else if(ushapeType==3){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}gl_FragColor=vec4(vColor.rgb,vColor.a*smoothstep(1.0,0.0,d*2.)*vAddOpacity);}else{gl_FragColor=vec4(vColor.rgb,vColor.a*vAddOpacity);}if(uUseTexture){float ratio=vUV.z;vec2 uv=vUV.xy;gl_FragColor=texture2D(uSampler,vec2(gl_PointCoord.x*ratio+uv.x,1.0-(uv.y+gl_PointCoord.y*ratio)));}}"}),this.buffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.buffer)}},{key:"bindAttributeBufferData",value:function(i,u,m,p){var y=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,y),m=new Float32Array(m),i.bufferData(i.ARRAY_BUFFER,m,i.STATIC_DRAW),this.bufferMap[u]={buffer:y,data:m,elementSize:p}}},{key:"onChanged",value:function(i,u){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};this.gl&&(Array.isArray(u)||(u=[]),this.processCache(i,u,m))}},{key:"processCache",value:function(i,u,m){var p=this;this.cachedData=[];for(var y=i.icon,v=i.speed,M=i.color,R=0;R<u.length;R++){var k=u[R].geometry.coordinates,_=this.getProperty("color",M,u[R]);_=this.normizedColor(_);var T=this.getProperty("icon",y,u[R]),O=this.getProperty("speed",v,u[R]),U=this.getProperty("delay",0,u[R]);k&&(this.cachedData.push({coordinates:k,color:_,icon:T,speed:O,delay:U}),this.iconHash.get(T)||this.iconHash.set(T,T))}u=Ea(this.iconHash.entries()).filter(function(G){return typeof G[1]=="string"}).map(function(G){var X=ni(G,2)[0];return new vr(function(W,Y){p.url2canvas(X,function(J){p.iconHash.set(X,J),W()})})}),vr.all(u).then(function(G){p.buildSprite(i),m.autoRender!==!1&&p.webglLayer&&p.webglLayer.render()})}},{key:"buildSprite",value:function(i){var u=i.padding,m=this.canvas,p=this.ctx,y=0,v=[],M=new zs;if(i.icon){y=!0;var R=!1,k=void 0;try{for(var _=aa(this.iconHash),T;!(y=(T=_.next()).done);y=!0){var O=ni(T.value,2),U=O[1];if(typeof U!="string"){var G=U.width,X=G+u;v.push({w:X,h:X,width:G,key:O[0],icon:U})}}}catch(W){R=!0,k=W}finally{try{!y&&_.return&&_.return()}finally{if(R)throw k}}for(_=to(v),T=0;T<v.length;T++)O=v[T],M.get(O.key)||M.set(O.key,O);for(y=Math.max(Qe(_.w),Qe(_.h)),m.width=y||1,m.height=y||1,p.save(),m=0;m<v.length;m++)_=v[m],p.drawImage(_.icon,_.x+u,_.y+u,_.width,_.width);p.restore()}this.loadTexture(),this.buildVertex(i,M,y)}},{key:"buildVertex",value:function(i,u,m){var p=this.gl;this.updateUniformsFromOptions(i);for(var y=[],v=[],M=[],R=[],k=[],_=[],T=[],O=[],U=[],G=i.minLineLength,X=0;X<this.cachedData.length;X++){var W=this.cachedData[X],Y=W.coordinates,J=W.icon,ot=W.speed,ut=W.delay;W=W.color;var lt=Y.length,wt=[];if(!(lt<G)){for(i.icon&&(wt=(wt=u.get(J))?[wt.x/m,wt.y/m,wt.w/m]:[0,0,0]),J=0;J<lt;++J){var Qt=this.normizedPoint(Y[J]);y.push(Qt[0]),y.push(Qt[1]),y.push(Qt[2]||0),v.push.apply(v,Fn(W)),U.push.apply(U,Fn(wt)),this.animationType!==3&&(M.push(J),k.push(lt))}if(this.animationType!==1){for(wt=y.length-3*lt+3,lt=y.length,Y=wt;Y<lt;++Y)_.push(y[Y]);if(y.splice(lt-3,3),U.splice(lt-3,2),v.splice(lt-3,4),this.animationType===2)M.pop(),k.pop();else if(this.animationType===3){for(wt-=3,lt=y.length-3,Y=0,W=[],J=wt;J<=lt;J+=3)wt=Math.sqrt(Math.pow(_[J]-y[J],2)+Math.pow(_[J+1]-y[J+1],2)+Math.pow(_[J+2]-y[J+2],2)),Y+=wt,W.push(wt);for(M.push(0),T.push(ot),ut/=Y/ot,O.push(ut),J=lt=0,Qt=W.length-1;J<Qt;++J)lt+=W[J],wt=lt/Y,M.push(wt),R.push(wt),k.push(Y),T.push(ot),O.push(ut);R.push(1),k.push(Y)}}}}this.bindAttributeBufferData(p,"aPos",y,3),this.bindAttributeBufferData(p,"aIndex",M,1),this.bindAttributeBufferData(p,"aLength",k,1),this.bindAttributeBufferData(p,"aColor",v,4),this.animationType!==1&&(this.bindAttributeBufferData(p,"aNextPos",_,3),this.animationType===3&&(this.bindAttributeBufferData(p,"aNextIndex",R,1),this.bindAttributeBufferData(p,"aSpeed",T,1),this.bindAttributeBufferData(p,"aDelay",O,1))),i.icon&&this.bindAttributeBufferData(p,"aUV",U,3),this.vertCount=y.length/3}},{key:"updateUniformsFromOptions",value:function(i){this.startTime=new Date().getTime(),mh[i.animationType]||(i.animationType=2),hu[i.shapeType]||(i.shapeType=2),(isNaN(i.minLineLength)||2>i.minLineLength)&&(i.minLineLength=2),this.animationType=i.animationType}},{key:"renderAttributeArr",value:function(i,u,m){if(u.attributes[m]!==void 0){var p=this.bufferMap[m];p&&(i.bindBuffer(i.ARRAY_BUFFER,p.buffer),i.enableVertexAttribArray(u.attributes[m]),i.vertexAttribPointer(u.attributes[m],p.elementSize,i.FLOAT,!1,p.data.BYTES_PER_ELEMENT*p.elementSize,0))}}},{key:"render",value:function(i){var u=i.gl;if(i=i.matrix,!(0>=this.vertCount)){var m=this.getOptions(),p=this.program;u.useProgram(p.program),this.renderAttributeArr(u,p,"aPos"),this.renderAttributeArr(u,p,"aIndex"),this.renderAttributeArr(u,p,"aLength"),this.renderAttributeArr(u,p,"aColor"),this.animationType!==1&&(this.renderAttributeArr(u,p,"aNextPos"),this.animationType===3&&(this.renderAttributeArr(u,p,"aNextIndex"),this.renderAttributeArr(u,p,"aSpeed"),this.renderAttributeArr(u,p,"aDelay"))),m.icon&&this.texture&&(this.renderAttributeArr(u,p,"aUV"),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,this.texture),u.uniform1i(p.uniforms.uSampler,0)),u.uniform1i(p.uniforms.uUseTexture,this.isUseTexture);var y=new Date().getTime()-this.startTime;y<this.options.delay?y=0:(y-=this.options.delay,y=this.animationType===1?Math.round(y/1e3*this.options.speed*20):this.animationType===3?y/1e3*this.options.speed*1e3:y/1e3*this.options.speed);var v=this.options.size;if(Array.isArray(v)){var M=this.map.map.getMaxZoom(),R=this.map.map.getMinZoom();v=v[0]+(this.map.getZoom()-R)/(M-R)*(v[1]-v[0])}u.uniformMatrix4fv(p.uniforms.u_matrix,!1,i),u.uniform1f(p.uniforms.uSize,v),u.uniform1f(p.uniforms.uElapsedSteps,y),u.uniform1f(p.uniforms.uOriginSpeed,this.options.speed),u.uniform1i(p.uniforms.uAnimationType,this.animationType),u.uniform1i(p.uniforms.ushapeType,this.options.shapeType),u.uniform1i(p.uniforms.uPointFade,this.options.pointFade?1:0),u.uniform1f(p.uniforms.uPointFadeBuffer,this.options.pointFadeBuffer),u.uniform1f(p.uniforms.uZoomUnits,this.options.unit==="m"?this.map.getZoomUnits():1),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:m.blend==="lighter"?[u.SRC_ALPHA,u.ONE]:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA],depthTest:!!m.depthTest}),u.drawArrays(u.POINTS,0,this.vertCount)}}},{key:"url2canvas",value:function(i,u){if((typeof i=="undefined"?"undefined":Mn(i))==="object")u(i);else{var m=new Image;m.crossOrigin="anonymous",m.onload=function(){var p=document.createElement("canvas");p.width=128,p.height=128,p.getContext("2d").drawImage(m,0,0,128,128),u(p)},m.src=i}}},{key:"loadTexture",value:function(){var i=this;this.canvas&&this.getOptions().icon?wo(this.gl,this.canvas,function(u){i.isUseTexture=!0,i.texture=u}):(this.isUseTexture=!1,this.texture=null)}}]),A}(ui);dA.ANIMATION_TYPE_LEAP=1,dA.ANIMATION_TYPE_SMOOTH=2,dA.ANIMATION_TYPE_UNIFORM_SPEED=3,dA.SHAPE_TYPE_SQUARE=1,dA.SHAPE_TYPE_CIRCLE=2,dA.SHAPE_TYPE_CIRCLE_GRADIENT=3;var So=function(){function a(A,i){fr(this,a),this.layer=A,this.gl=i,this.initData()}return mr(a,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]}}},{key:"getData",value:function(){return this.outWall3d}},{key:"onLayerChange",value:function(A,i){this.initData();for(var u=A.color,m=A.height,p=A.gradient,y=A.enablePreciseMap,v=A.repeatMap,M=A.closePath,R=this.gl,k=0;k<i.length;k++){var _=i[k],T=_.color||u;"properties"in _&&"color"in _.properties&&(T=_.properties.color),p||Object.prototype.toString.call(T)!=="[object Function]"||(T=T(_));var O=this.layer.normizedColor(p?p[0]:T);T=this.layer.normizedColor(p?p[1]:T);var U=_.height||m;if("properties"in _&&"height"in _.properties&&(U=_.properties.height),Object.prototype.toString.call(U)==="[object Function]"&&(U=U(_)),_.geometry.type==="MultiLineString"||_.geometry.type==="Polygon")for(var G=0;G<_.geometry.coordinates.length;G++){var X=_.geometry.coordinates[G];M&&!Oe(X)&&X.push(X[0]);for(var W=[],Y=[],J=0,ot=0;ot<X.length;ot++){var ut=this.layer.normizedPoint(X[ot]);if(0<ot&&(y||v)){var lt=this.layer.normizedPoint(X[ot-1]);J+=Math.sqrt(Math.pow(ut[0]-lt[0],2)+Math.pow(ut[1]-lt[1],2))}W.push(ut),Y.push(J)}this.processData(this.outWall3d,A,W,Y,O,T,U)}else{for(_=_.geometry.coordinates,M&&!Oe(_)&&_.push(_[0]),G=[],X=[],Y=W=0;Y<_.length;Y++)J=this.layer.normizedPoint(_[Y]),0<Y&&(y||v)&&(ot=this.layer.normizedPoint(_[Y-1]),W+=Math.sqrt(Math.pow(J[0]-ot[0],2)+Math.pow(J[1]-ot[1],2))),G.push(J),X.push(W);this.processData(this.outWall3d,A,G,X,O,T,U)}}for(A=0;A<this.outWall3d.vertex.length;A++){for(i=[],u=this.outWall3d.vertex[A].length,m=0;m<u;m++)i.push.apply(i,Fn(this.outWall3d.vertex[A][m]));u=R.createBuffer(),R.bindBuffer(R.ARRAY_BUFFER,u),R.bufferData(R.ARRAY_BUFFER,new Float32Array(i),R.STATIC_DRAW),this.outWall3d.vertexBuffer[A]=u,R.bindBuffer(R.ARRAY_BUFFER,null),u=R.createBuffer(),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,u),R.bufferData(R.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[A]),R.STATIC_DRAW),this.outWall3d.indexBuffer[A]=u,R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(A,i,u,m,p,y,v){var M=m[m.length-1],R=A.vertex[A.vertex.length-1],k=A.index[A.index.length-1],_=u.length;for((!k||65536<=k.length+2*_+2)&&(R=[],k=[],A.vertex.push(R),A.index.push(k)),(A=R.length)&&k.push(A-1,A),A=0;A<_;A++){var T=[],O=[],U=u[A];T.push(U[0],U[1],U[2]+v),T.push(p[0],p[1],p[2],p[3]),O.push(U[0],U[1],U[2]),O.push(y[0],y[1],y[2],y[3]),i.texture&&(U=m[A],i.enablePreciseMap||i.repeatMap?(T.push(U,1,M),O.push(U,0,M)):(T.push(A,1,_-1),O.push(A,0,_-1))),U=R.length,R.push(T,O),k.push(U,U+1)}}}]),a}(),xx=function(a){function A(i,u){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i,u))}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{texture:null,enablePreciseMap:!1,repeatMap:0,height:100,closePath:!1,color:[1,1,1,1]}}},{key:"initialize",value:function(i){this.gl=i,this.dataMgr=new So(this,this.gl),this.texture=null,this.isUseTexture=!1,this.vertexLength=10,this.program=new Ur(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform bool uUseTexture;attribute vec3 aPos;attribute vec4 aColor;attribute vec2 aTextureCoords;attribute float aTotalDistance;varying vec2 vTextureCoords;varying float vTotalDistance;varying vec4 vColor;void main(){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}if(uUseTexture){vTextureCoords=aTextureCoords;vTotalDistance=aTotalDistance;}gl_Position=u_matrix*vec4(aPos,1.0);}",fragmentShader:"precision highp float;uniform bool uUseTexture;uniform float uDistance;uniform sampler2D uSampler;varying vec2 vTextureCoords;varying float vTotalDistance;varying vec4 vColor;void main(){if(uUseTexture){float uvx=vTextureCoords.x/vTotalDistance;if(uDistance>0.0){uvx=mod(vTextureCoords.x,uDistance)/uDistance;}gl_FragColor=vec4(1.0,1.0,1.0,1.0)*texture2D(uSampler,vec2(uvx,vTextureCoords.y));}else{gl_FragColor=vColor;}}"}),this.loadTexture()}},{key:"onChanged",value:function(i,u){var m=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){m.loadTexture(function(){m.dataMgr.onLayerChange(i,u),m.webglLayer.render()})},0))}},{key:"render",value:function(i){var u=i.gl,m=i.matrix;if((i=this.dataMgr.getData())&&!(0>=i.vertex.length)){var p=this.getOptions(),y=this.program;if(u.useProgram(y.program),p.texture){if(!this.texture)return;u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,this.texture),u.uniform1i(y.uniforms.uSampler,0)}for(this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA],depthMask:!!p.texture,depthFunc:p.texture?u.LESS:u.LEQUAL}),p.texture?u.enableVertexAttribArray(y.attributes.aTextureCoords):u.disableVertexAttribArray(y.attributes.aTextureCoords),u.enableVertexAttribArray(y.attributes.aPos),u.enableVertexAttribArray(y.attributes.aColor),u.uniformMatrix4fv(y.uniforms.u_matrix,!1,m),u.uniform1i(y.uniforms.uUseTexture,this.isUseTexture),u.uniform1f(y.uniforms.uDistance,p.repeatMap),m=0;m<i.vertex.length;m++)if(!(0>=i.vertex[m].length)){var v=i.vertex[m],M=new Float32Array(v[0]).BYTES_PER_ELEMENT;v=M*v[0].length,u.bindBuffer(u.ARRAY_BUFFER,i.vertexBuffer[m]),u.vertexAttribPointer(y.attributes.aPos,3,u.FLOAT,!1,v,0),u.vertexAttribPointer(y.attributes.aColor,4,u.FLOAT,!1,v,3*M),p.texture&&(u.vertexAttribPointer(y.attributes.aTextureCoords,2,u.FLOAT,!1,v,7*M),u.vertexAttribPointer(y.attributes.aTotalDistance,1,u.FLOAT,!1,v,9*M)),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i.indexBuffer[m]),u.drawElements(u.TRIANGLE_STRIP,i.index[m].length,u.UNSIGNED_SHORT,0),u.bindBuffer(u.ARRAY_BUFFER,null),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null)}}}},{key:"loadTexture",value:function(i){var u=this,m=this.getOptions();m.texture?(this.isUseTexture=!0,wo(this.gl,m.texture,function(p,y){u.image=y,u.texture=p,i&&i(),u.webglLayer.render()})):(this.isUseTexture=!1,this.image=this.texture=null,i&&i())}}]),A}(ui),wx=function(){function a(A,i){fr(this,a),this.layer=A,this.gl=i,this.initData()}return mr(a,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]},this.maxLength=0}},{key:"getData",value:function(){return this.outWall3d}},{key:"getMaxDataLength",value:function(){return this.maxLength}},{key:"onLayerChange",value:function(A,i){this.initData();var u=A.color,m=A.height,p=A.gradient;A=this.gl;for(var y=0;y<i.length;y++){var v=i[y].geometry.coordinates,M=v.length;this.maxLength=M>this.maxLength?M:this.maxLength;for(var R=[],k=0;k<M;k++){var _=this.layer.normizedPoint(v[k]);R.push(_)}M=i[y].color||u,"properties"in i[y]&&"color"in i[y].properties&&(M=i[y].properties.color),p||Object.prototype.toString.call(M)!=="[object Function]"||(M=M(i[y])),v=this.layer.normizedColor(p?p[0]:M),M=this.layer.normizedColor(p?p[1]:M),k=i[y].height||m,"properties"in i[y]&&"height"in i[y].properties&&(k=i[y].properties.height),Object.prototype.toString.call(k)==="[object Function]"&&(k=k(i[y])),this.processData(this.outWall3d,R,v,M,k)}for(i=0;i<this.outWall3d.vertex.length;i++){for(u=[],m=this.outWall3d.vertex[i].length,p=0;p<m;p++)u.push.apply(u,Fn(this.outWall3d.vertex[i][p]));m=A.createBuffer(),A.bindBuffer(A.ARRAY_BUFFER,m),A.bufferData(A.ARRAY_BUFFER,new Float32Array(u),A.STATIC_DRAW),this.outWall3d.vertexBuffer[i]=m,A.bindBuffer(A.ARRAY_BUFFER,null),m=A.createBuffer(),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,m),A.bufferData(A.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[i]),A.STATIC_DRAW),this.outWall3d.indexBuffer[i]=m,A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(A,i,u,m,p){var y=A.vertex[A.vertex.length-1],v=A.index[A.index.length-1],M=i.length;for((!v||65536<=v.length+2*M+2)&&(y=[],v=[],A.vertex.push(y),A.index.push(v)),(A=y.length)&&v.push(A-1,A),A=0;A<M;A++){var R=[],k=[],_=i[A];R.push(_[0],_[1]),R.push(_[2]?Number(_[2])+p:p),R.push(_[3]?Number(_[3]):A),R.push(u[0],u[1],u[2],u[3]),k.push(_[0],_[1]),k.push(_[2]?Number(_[2]):0),k.push(_[3]?Number(_[3]):A),k.push(m[0],m[1],m[2],m[3]),_=y.length,y.push(R,k),v.push(_,_+1)}}}]),a}(),Xi=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.startTime=i.options.startTime||0,i.endTime=i.options.endTime,i.time=i.startTime,i.autoUpdate=!0,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{height:100,color:[1,1,1,1],trailLength:3,step:.1}}},{key:"initialize",value:function(i){this.gl=i,this.dataMgr=new wx(this,this.gl),this.program=new Ur(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;attribute vec4 aPos;attribute vec4 aColor;varying vec4 vColor;varying float vTime;void main(){vTime=1.0-((currentTime-aPos.w)/trailLength);vColor=aColor;gl_Position=u_matrix*vec4(aPos.xyz,1.0);}",fragmentShader:"precision highp float;varying vec4 vColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(vColor.rgb,1.0*vTime);}"})}},{key:"onChanged",value:function(i,u){this.gl&&(this.dataMgr.onLayerChange(i,u),i.endTime===void 0&&(this.endTime=this.dataMgr.getMaxDataLength()))}},{key:"render",value:function(i){var u=i.gl,m=i.matrix;if((i=this.dataMgr.getData())&&!(0>=i.vertex.length)){var p=this.getOptions(),y=this.program;for(u.useProgram(y.program),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA]}),u.enableVertexAttribArray(y.attributes.aPos),u.enableVertexAttribArray(y.attributes.aColor),u.uniformMatrix4fv(y.uniforms.u_matrix,!1,m),u.uniform1f(y.uniforms.currentTime,this.time),u.uniform1f(y.uniforms.trailLength,p.trailLength),m=0;m<i.vertex.length;m++)if(!(0>=i.vertex[m].length)){var v=i.vertex[m],M=new Float32Array(v[0]).BYTES_PER_ELEMENT;v=M*v[0].length,u.bindBuffer(u.ARRAY_BUFFER,i.vertexBuffer[m]),u.vertexAttribPointer(y.attributes.aPos,4,u.FLOAT,!1,v,0),u.vertexAttribPointer(y.attributes.aColor,4,u.FLOAT,!1,v,4*M),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i.indexBuffer[m]),u.drawElements(u.TRIANGLE_STRIP,i.index[m].length,u.UNSIGNED_SHORT,0),u.bindBuffer(u.ARRAY_BUFFER,null),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null)}this.time+=p.step,this.time>this.endTime&&(this.time=this.startTime)}}}]),A}(ui),y1=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.simpleLineLayer=new dh(i.getHeatOptions()),i.children=[i.simpleLineLayer],i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{blend:"normal",gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}}}},{key:"onDataChanged",value:function(i){this.simpleLineLayer.setData(i)}},{key:"onOptionsChanged",value:function(i){this.simpleLineLayer.setOptions(this.getHeatOptions())}},{key:"getHeatOptions",value:function(){var i=this.getOptions(),u=i.max,m=i.min;u===void 0&&(m=this.getDataRange(),u=m.max,m=m.min);var p=new ci({max:u,min:m,gradient:i.gradient});return i.color=function(y){var v=~~y.count||1;return"properties"in y&&"count"in y.properties&&(v=~~y.properties.count),y=p.getImageData(v),[y[0]/255,y[1]/255,y[2]/255,y[3]/255]},i}},{key:"getDataRange",value:function(){var i=this.getData(),u=0,m=0;i[0]&&(u=~~i[0].count||1,m=~~i[0].count||1),"properties"in i[0]&&"count"in i[0].properties&&(u=~~i[0].properties.count,m=~~i[0].properties.count);for(var p=i.length,y=0;y<p;y++){var v=~~i[y].count||1;"properties"in i[y]&&"count"in i[y].properties&&(v=~~i[y].properties.count),u=Math.max(v,u),m=Math.min(v,m)}return{max:u/2,min:m}}}]),A}(Vo),n0=Ot(function(a,A){(function(i,u){a.exports=u()})($u,function(){function i(Y,J,ot,ut,lt,wt){if(!(lt-ut<=ot)){var Qt=ut+lt>>1;u(Y,J,Qt,ut,lt,wt%2),i(Y,J,ot,ut,Qt-1,wt+1),i(Y,J,ot,Qt+1,lt,wt+1)}}function u(Y,J,ot,ut,lt,wt){for(;lt>ut;){if(600<lt-ut){var Qt=lt-ut+1,zt=ot-ut+1,ne=Math.log(Qt),pe=.5*Math.exp(2*ne/3);ne=.5*Math.sqrt(ne*pe*(Qt-pe)/Qt)*(0>zt-Qt/2?-1:1),u(Y,J,ot,Math.max(ut,Math.floor(ot-zt*pe/Qt+ne)),Math.min(lt,Math.floor(ot+(Qt-zt)*pe/Qt+ne)),wt)}for(Qt=J[2*ot+wt],zt=ut,pe=lt,m(Y,J,ut,ot),J[2*lt+wt]>Qt&&m(Y,J,ut,lt);zt<pe;){for(m(Y,J,zt,pe),zt++,pe--;J[2*zt+wt]<Qt;)zt++;for(;J[2*pe+wt]>Qt;)pe--}J[2*ut+wt]===Qt?m(Y,J,ut,pe):(pe++,m(Y,J,pe,lt)),pe<=ot&&(ut=pe+1),ot<=pe&&(lt=pe-1)}}function m(Y,J,ot,ut){p(Y,ot,ut),p(J,2*ot,2*ut),p(J,2*ot+1,2*ut+1)}function p(Y,J,ot){var ut=Y[J];Y[J]=Y[ot],Y[ot]=ut}function y(Y,J){return Y=Y.geometry.coordinates,{x:Y[0]/360+.5,y:R(Y[1]),zoom:Infinity,index:J,parentId:-1}}function v(Y){var J=Y.id,ot=M(Y);return{type:"Feature",id:J,properties:ot,geometry:{type:"Point",coordinates:[360*(Y.x-.5),360*Math.atan(Math.exp((180-360*Y.y)*Math.PI/180))/Math.PI-90]}}}function M(Y){var J=Y.numPoints,ot=1e4<=J?Math.round(J/1e3)+"k":1e3<=J?Math.round(J/100)/10+"k":J;return k(k({},Y.properties),{cluster:!0,cluster_id:Y.id,point_count:J,point_count_abbreviated:ot})}function R(Y){return Y=Math.sin(Y*Math.PI/180),Y=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI,0>Y?0:1<Y?1:Y}function k(Y,J){for(var ot in J)Y[ot]=J[ot];return Y}function _(Y){return Y.x}function T(Y){return Y.y}var O=function(Y){return Y[0]},U=function(Y){return Y[1]},G=function(Y,J,ot,ut,lt){J===void 0&&(J=O),ot===void 0&&(ot=U),ut===void 0&&(ut=64),lt===void 0&&(lt=Float64Array),this.nodeSize=ut,this.points=Y;var wt=this.ids=new(65536>Y.length?Uint16Array:Uint32Array)(Y.length);lt=this.coords=new lt(2*Y.length);for(var Qt=0;Qt<Y.length;Qt++)wt[Qt]=Qt,lt[2*Qt]=J(Y[Qt]),lt[2*Qt+1]=ot(Y[Qt]);i(wt,lt,ut,0,wt.length-1,0)};G.prototype.range=function(Y,J,ot,ut){for(var lt=this.ids,wt=this.coords,Qt=this.nodeSize,zt=[0,lt.length-1,0],ne=[],pe,be;zt.length;){var Ie=zt.pop(),hr=zt.pop(),Qr=zt.pop();if(hr-Qr<=Qt)for(Ie=Qr;Ie<=hr;Ie++)pe=wt[2*Ie],be=wt[2*Ie+1],pe>=Y&&pe<=ot&&be>=J&&be<=ut&&ne.push(lt[Ie]);else{var Ce=Math.floor((Qr+hr)/2);pe=wt[2*Ce],be=wt[2*Ce+1],pe>=Y&&pe<=ot&&be>=J&&be<=ut&&ne.push(lt[Ce]);var Ze=(Ie+1)%2;(Ie===0?Y<=pe:J<=be)&&(zt.push(Qr),zt.push(Ce-1),zt.push(Ze)),(Ie===0?ot>=pe:ut>=be)&&(zt.push(Ce+1),zt.push(hr),zt.push(Ze))}}return ne},G.prototype.within=function(Y,J,ot){for(var ut=this.ids,lt=this.coords,wt=this.nodeSize,Qt=[0,ut.length-1,0],zt=[],ne=ot*ot;Qt.length;){var pe=Qt.pop(),be=Qt.pop(),Ie=Qt.pop();if(be-Ie<=wt)for(pe=Ie;pe<=be;pe++){Ie=lt[2*pe]-Y;var hr=lt[2*pe+1]-J;Ie*Ie+hr*hr<=ne&&zt.push(ut[pe])}else{hr=Math.floor((Ie+be)/2);var Qr=lt[2*hr],Ce=lt[2*hr+1],Ze=Qr-Y,sn=Ce-J;Ze*Ze+sn*sn<=ne&&zt.push(ut[hr]),Ze=(pe+1)%2,(pe===0?Y-ot<=Qr:J-ot<=Ce)&&(Qt.push(Ie),Qt.push(hr-1),Qt.push(Ze)),(pe===0?Y+ot>=Qr:J+ot>=Ce)&&(Qt.push(hr+1),Qt.push(be),Qt.push(Ze))}}return zt};var X={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Y){return Y}},W=function(Y){this.options=k(aA(X),Y),this.trees=Array(this.options.maxZoom+1)};return W.prototype.load=function(Y){var J=this.options,ot=J.minZoom,ut=J.maxZoom;J=J.nodeSize,this.points=Y;for(var lt=[],wt=0;wt<Y.length;wt++)Y[wt].geometry&&lt.push(y(Y[wt],wt));for(this.trees[ut+1]=new G(lt,_,T,J,Float32Array),Y=ut;Y>=ot;Y--)lt=this._cluster(lt,Y),this.trees[Y]=new G(lt,_,T,J,Float32Array);return this},W.prototype.getClusters=function(Y,J){var ot=((Y[0]+180)%360+360)%360-180,ut=Math.max(-90,Math.min(90,Y[1])),lt=Y[2]===180?180:((Y[2]+180)%360+360)%360-180,wt=Math.max(-90,Math.min(90,Y[3]));if(360<=Y[2]-Y[0])ot=-180,lt=180;else if(ot>lt)return ot=this.getClusters([ot,ut,180,wt],J),ut=this.getClusters([-180,ut,lt,wt],J),ot.concat(ut);J=this.trees[this._limitZoom(J)],Y=[];var Qt=0;for(ut=J.range(ot/360+.5,R(wt),lt/360+.5,R(ut));Qt<ut.length;Qt+=1)lt=J.points[ut[Qt]],Y.push(lt.numPoints?v(lt):this.points[lt.index]);return Y},W.prototype.getChildren=function(Y){var J=this._getOriginId(Y),ot=this._getOriginZoom(Y),ut=this.trees[ot];if(!ut)throw Error("No cluster with the specified id.");var lt=ut.points[J];if(!lt)throw Error("No cluster with the specified id.");J=[];var wt=0;for(ot=ut.within(lt.x,lt.y,this.options.radius/(this.options.extent*Math.pow(2,ot-1)));wt<ot.length;wt+=1)lt=ut.points[ot[wt]],lt.parentId===Y&&J.push(lt.numPoints?v(lt):this.points[lt.index]);if(J.length===0)throw Error("No cluster with the specified id.");return J},W.prototype.getLeaves=function(Y,J,ot){var ut=[];return this._appendLeaves(ut,Y,J||10,ot||0,0),ut},W.prototype.getTile=function(Y,J,ot){var ut=this.trees[this._limitZoom(Y)];Y=Math.pow(2,Y);var lt=this.options;lt=lt.radius/lt.extent;var wt=(ot-lt)/Y,Qt=(ot+1+lt)/Y,zt={features:[]};return this._addTileFeatures(ut.range((J-lt)/Y,wt,(J+1+lt)/Y,Qt),ut.points,J,ot,Y,zt),J===0&&this._addTileFeatures(ut.range(1-lt/Y,wt,1,Qt),ut.points,Y,ot,Y,zt),J===Y-1&&this._addTileFeatures(ut.range(0,wt,lt/Y,Qt),ut.points,-1,ot,Y,zt),zt.features.length?zt:null},W.prototype.getClusterExpansionZoom=function(Y){for(var J=this._getOriginZoom(Y)-1;J<=this.options.maxZoom&&(Y=this.getChildren(Y),J++,Y.length===1);)Y=Y[0].properties.cluster_id;return J},W.prototype._appendLeaves=function(Y,J,ot,ut,lt){var wt=0;for(J=this.getChildren(J);wt<J.length;wt+=1){var Qt=J[wt],zt=Qt.properties;if(zt&&zt.cluster?lt=lt+zt.point_count<=ut?lt+zt.point_count:this._appendLeaves(Y,zt.cluster_id,ot,ut,lt):lt<ut?lt++:Y.push(Qt),Y.length===ot)break}return lt},W.prototype._addTileFeatures=function(Y,J,ot,ut,lt,wt){for(var Qt=0;Qt<Y.length;Qt+=1){var zt=J[Y[Qt]],ne=zt.numPoints,pe={type:1,geometry:[[Math.round(this.options.extent*(zt.x*lt-ot)),Math.round(this.options.extent*(zt.y*lt-ut))]],tags:ne?M(zt):this.points[zt.index].properties},be=void 0;ne?be=zt.id:this.options.generateId?be=zt.index:this.points[zt.index].id&&(be=this.points[zt.index].id),be!==void 0&&(pe.id=be),wt.features.push(pe)}},W.prototype._limitZoom=function(Y){return Math.max(this.options.minZoom,Math.min(+Y,this.options.maxZoom+1))},W.prototype._cluster=function(Y,J){var ot=[],ut=this.options,lt=ut.reduce,wt=ut.minPoints;ut=ut.radius/(ut.extent*Math.pow(2,J));for(var Qt=0;Qt<Y.length;Qt++){var zt=Y[Qt];if(!(zt.zoom<=J)){zt.zoom=J;for(var ne=this.trees[J+1],pe=ne.within(zt.x,zt.y,ut),be=zt.numPoints||1,Ie=be,hr=0,Qr=pe;hr<Qr.length;hr+=1){var Ce=ne.points[Qr[hr]];Ce.zoom>J&&(Ie+=Ce.numPoints||1)}if(Ie>=wt){hr=zt.x*be,Qr=zt.y*be,be=lt&&1<be?this._map(zt,!0):null,Ce=(Qt<<5)+(J+1)+this.points.length;for(var Ze=0;Ze<pe.length;Ze+=1){var sn=ne.points[pe[Ze]];if(!(sn.zoom<=J)){sn.zoom=J;var an=sn.numPoints||1;hr+=sn.x*an,Qr+=sn.y*an,sn.parentId=Ce,lt&&(be||(be=this._map(zt,!0)),lt(be,this._map(sn)))}}zt.parentId=Ce,ot.push({x:hr/Ie,y:Qr/Ie,zoom:Infinity,id:Ce,parentId:-1,numPoints:Ie,properties:be})}else if(ot.push(zt),1<Ie)for(zt=0,Ie=pe;zt<Ie.length;zt+=1)pe=ne.points[Ie[zt]],pe.zoom<=J||(pe.zoom=J,ot.push(pe))}}return ot},W.prototype._getOriginId=function(Y){return Y-this.points.length>>5},W.prototype._getOriginZoom=function(Y){return(Y-this.points.length)%32},W.prototype._map=function(Y,J){if(Y.numPoints)return J?k({},Y.properties):Y.properties;Y=this.points[Y.index].properties;var ot=this.options.map(Y);return J&&ot===Y?k({},ot):ot},W})}),Cx=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.shapeLayer=new Ve(i.options),i.textLayer=new fA(i.options.textOptions),i.children=[i.shapeLayer,i.textLayer],i.max=[],i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{size:50,height:0,maxZoom:19,minZoom:5,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"},enableCluster:!1,showText:!0,textOptions:{fontSize:13,color:"white"}}}},{key:"onOptionsChanged",value:function(i){this.textLayer.setOptions(i.textOptions)}},{key:"setOptions",value:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},u=this.options.textOptions;i.textOptions&&ln(u,i.textOptions);var m=i.minZoom,p=i.maxZoom,y=i.size;m=p&&p!==this.options.maxZoom||m&&m!==this.options.minZoom||y&&y!==this.options.size,ln(this.options,i,{textOptions:u}),m?this.onChanged(this.options,this.data):this.refreshLayer(),this.onOptionsChanged(this.getOptions())}},{key:"onChanged",value:function(i,u){if(u&&u.length){this.zoom=Math.floor(this.map.getZoom());var m=i.maxZoom,p=i.minZoom,y=i.enableCluster;i=i.size,this.zoom>m?this.zoom=m:this.zoom<p&&(this.zoom=p),y&&(this.supercluster=new n0({maxZoom:m,minZoom:p,radius:i/2}),this.supercluster.load(u)),this.refreshLayer()}}},{key:"refreshLayer",value:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options,u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.data,m=this.map,p=this.zoom;if(i.enableCluster&&this.supercluster&&(u=this.getClusterData(i)),u&&u.length){var y=i.gradient,v=i.showText,M=i.textOptions,R=i.height,k=i.size;k*=Math.pow(2,18-p),u=da(u,k,function(O){var U=ni(O,2),G=U[0];return U=U[1],-180<=G&&180>=G&&-90<=U&&90>=U&&(U=m.lnglatToMercator(G,U),G=U[0],U=U[1]),O[0]=G,O[1]=U,O}),this.max[p]=Math.max(this.max[p]||0,u.max);var _=new ci({max:this.max[p],min:0,maxSize:R*Math.pow(2,18-p),minSize:0,gradient:y});if(y=[],v){var T=M&&M.format;T=typeof T=="function"?T:null,y=u.map(function(O){return{geometry:{coordinates:[O.center.x,O.center.y,_.getSize(O.count)+M.fontSize/2*Math.pow(2,18-p)]},text:T?T(O.count):O.count}})}this.textLayer.setData(y),v=u.map(function(O){for(var U=O.center,G=u.r,X=[],W=0;6>W;W++)X.push(yu({x:U.x,y:U.y},G,W));return{geometry:{type:"Polygon",coordinates:[X]},properties:{height:_.getSize(O.count),color:_.getColor(O.count)}}}),this.shapeLayer.setData(v),i.enablePicked&&i.autoSelect&&this.pick(-1,-1)}}},{key:"getClusterData",value:function(){var i=this.map,u=i.getBounds(),m=this.ne=u.getNorthEast();u=this.sw=u.getSouthWest();var p=m,y=p.lng;p=p.lat;var v=[];return-180<=y&&180>=y&&-90<=p&&90>=p?v=[u.lng,u.lat,m.lng,m.lat]:(m=i.mercatorToLnglat(this.ne.lng,this.ne.lat),u=i.mercatorToLnglat(this.sw.lng,this.sw.lat),v=u.concat(m)),this.supercluster.getClusters(v,this.zoom).map(function(M){var R=0;return M.properties&&M.properties.point_count&&(R=M.properties.point_count),{geometry:M.geometry,count:R}})}},{key:"pick",value:function(i,u){return this.shapeLayer.pick(i,u)}},{key:"shouldUpdate",value:function(){if(!this.data)return!1;var i=this.map,u=Math.floor(i.getZoom()),m=this.options,p=m.maxZoom;if(m=m.minZoom,u>p?u=p:u<m&&(u=m),this.zoom!==u)return this.zoom=u,!0;if(!this.options.enableCluster||(u=i.getBounds(),i=u.ne,u=u.sw,!(i&&u&&this.ne&&this.sw)))return!1;if(this.ne.lng!==i.lng||this.ne.lat!==i.lat||this.sw.lng!==u.lng||this.sw.lat!==u.lat)return!0}},{key:"render",value:function(i){this.shouldUpdate()?this.refreshLayer():Ka(A.prototype.__proto__||Er(A.prototype),"render",this).call(this,i)}}]),A}(Vo),Za=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.name="PointLayer",i.bufferData=[],i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{color:[.1,.1,.9,1],blend:"default",shape:"circle",size:5,unit:"px",borderWidth:0,borderColor:[1,1,1,.9],polygonOffset:[0,0],depthTest:!0}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions(),m=[];u.enablePicked&&m.push("PICK"),u.shape&&u.shape==="circle"&&m.push("SHAPE_CIRCLE"),this.program=new Ur(this.gl,{vertexShader:`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aBorderWidth;attribute vec4 aBorderColor;uniform mat4 uMatrix;uniform vec4 uSelectedColor;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;varying vec4 vColor;varying float vSize;varying float vBorderWidth;varying vec4 vBorderColor;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}float size=aSize*devicePixelRatio;float borderWidth=aBorderWidth*devicePixelRatio;gl_Position=uMatrix*vec4(aPos.xyz,1.0);gl_PointSize=uUnitPx ? size : size/zoomUnits;vSize=size;vBorderWidth=borderWidth;vBorderColor=aBorderColor;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:`varying vec4 vColor;varying float vSize;varying float vBorderWidth;varying vec4 vBorderColor;void main(void){vec4 color=vColor;
#if defined(SHAPE_CIRCLE)
float d=distance(gl_PointCoord,vec2(0.5,0.5));float ratio=1.0-vBorderWidth/vSize*2.0;if(d>0.5){discard;}if(d>ratio*0.5){color=vBorderColor;}float blur=1.0;blur=1.0-smoothstep(0.49,0.5,d);color.a*=blur;
#else
float ratio=vBorderWidth/vSize;if(gl_PointCoord.x<ratio||gl_PointCoord.x>1.0-ratio||gl_PointCoord.y<ratio||gl_PointCoord.y>1.0-ratio){color=vBorderColor;}
#endif
gl_FragColor=color;}`,defines:m},this),this.buffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=[{stride:52,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:52,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12},{stride:52,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:28},{stride:52,name:"aBorderWidth",buffer:this.buffer,size:1,type:"FLOAT",offset:32},{stride:52,name:"aBorderColor",buffer:this.buffer,size:4,type:"FLOAT",offset:36}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onDestroy",value:function(){this.bufferData=[]}},{key:"onChanged",value:function(i,u){if(this.gl){for(var m=[],p=i.color,y=i.size,v=i.borderWidth,M=i.borderColor,R=0;R<u.length;R++){var k=this.normizedPoint(u[R].geometry.coordinates),_=this.getProperty("color",p,u[R]);_=this.normizedColor(_);var T=this.getProperty("size",y,u[R]);T=Number(T);var O=this.getProperty("borderWidth",v,u[R]);O=Number(O);var U=this.getProperty("borderColor",M,u[R]);U=this.normizedColor(U),k=this.addMultipleCoords(k);for(var G=0;G<k.length;G++){var X=k[G];m.push(X[0],X[1],Number(X[2]||0)),m.push(_[0],_[1],_[2],_[3]),m.push(T),m.push(O,U[0],U[1],U[2],U[3])}}this.bufferData=m,this.buffer.updateData(new Float32Array(m)),i.enablePicked&&this.parsePickData(u)}}},{key:"parsePickData",value:function(i){var u=this.getOptions(),m=[];if(u.enablePicked)for(var p=0;p<i.length;p++){var y=this.indexToRgb(p);m.push(y[0]/255,y[1]/255,y[2]/255),u.repeat&&(m.push(y[0]/255,y[1]/255,y[2]/255),m.push(y[0]/255,y[1]/255,y[2]/255))}u.enablePicked&&this.pickBuffer.updateData(new Float32Array(m))}},{key:"render",value:function(i){var u=i.gl,m=i.matrix,p=i.isPickRender;if(!(0>=this.bufferData.length)){var y=this.getOptions(),v=this.program;v.use(u),i=this.getCommonUniforms(i),i=ln(i,{uMatrix:m,uUnitPx:y.unit==="px",zoomUnits:this.map.getZoomUnits(),devicePixelRatio:window.devicePixelRatio}),v.setUniforms(i),this.setGLState({blend:!p,blendFunc:Gs(u,y.blend),blendEquation:u.FUNC_ADD,polygonOffset:y.polygonOffset,depthTest:y.depthTest}),this.vertexArray.bind(),u.drawArrays(u.POINTS,0,this.bufferData.length/13)}}}]),A}(ui),Mx=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="GroundRippleLayer",i.bufferDataArr=[],i.indexDataArr=[],i.vertexBuffer=[],i.indexBuffer=[],i.position=[],i.opacity=1,i.currentScale=1,i.autoUpdate=!0,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{color:[.1,.1,.9,1],size:5,segs:32,scale:2,unit:"m",step:.1}}},{key:"initialize",value:function(i){this.gl=i,this.program=new Ur(this.gl,{vertexShader:"uniform mat4 u_projectionMatrix;uniform mat4 u_modelViewMatrix;uniform mat4 u_modelMatrix;uniform float u_opacity;attribute vec4 aPos;attribute vec4 aColor;varying vec4 vColor;void main(){vColor=aColor;vColor.a=u_opacity;gl_Position=u_projectionMatrix*u_modelViewMatrix*u_modelMatrix*vec4(aPos.xyz,1.0);}",fragmentShader:"precision highp float;varying vec4 vColor;void main(){if(vColor.a==0.0){discard;}gl_FragColor=vColor;}"})}},{key:"onDestroy",value:function(){this.bufferDataArr=[],this.indexDataArr=[],this.vertexBuffer=[],this.indexBuffer=[]}},{key:"onChanged",value:function(i,u){var m=this.gl;if(m&&(this.currentScale=this.opacity=1,(this.data=u)&&u.length)){var p=i.color,y=i.segs;i=i.size;for(var v=360/y,M=0;M<u.length;M++){var R=[],k=[],_=this.normizedPoint(u[M].geometry.coordinates),T=p;Object.prototype.toString.call(T)==="[object Function]"?T=T(u[M]):(T=u[M].color||p,"properties"in u[M]&&"color"in u[M].properties&&(T=u[M].properties.color)),T=this.normizedColor(T);var O=Object.prototype.toString.call(i)==="[object Function]"?i(u[M]):Number(i),U=_[0],G=_[1];R.push(0,0,-.5),R.push(T[0],T[1],T[2],0);for(var X=1,W=0;X<=y;X++,W+=v)R.push(_[0]-U+Math.cos(Math.PI/180*W)*O,_[1]-G+Math.sin(Math.PI/180*W)*O,-.5),R.push(T[0],T[1],T[2],this.opacity),X===y?k.push(0,0+X,1):k.push(0,0+X,0+X+1);T=m.createBuffer(),m.bindBuffer(m.ARRAY_BUFFER,T),m.bufferData(m.ARRAY_BUFFER,new Float32Array(R),m.STATIC_DRAW),this.vertexBuffer[M]=T,this.bufferDataArr[M]=R,m.bindBuffer(m.ARRAY_BUFFER,null),R=m.createBuffer(),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,R),m.bufferData(m.ELEMENT_ARRAY_BUFFER,new Uint16Array(k),m.STATIC_DRAW),this.indexBuffer[M]=R,this.indexDataArr[M]=k,m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null),this.position[M]=[_[0],_[1]]}this.webglLayer&&this.webglLayer.render()}}},{key:"render",value:function(i){var u=i.gl,m=i.projectionMatrix,p=i.viewMatrix;for(i=this.program,u.useProgram(i.program),u.uniformMatrix4fv(i.uniforms.u_projectionMatrix,!1,m),u.uniformMatrix4fv(i.uniforms.u_modelViewMatrix,!1,p),m=this.opacity,this.options.opacity!==void 0&&(m=this.options.opacity),u.uniform1f(i.uniforms.u_opacity,m),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:[u.SRC_ALPHA,u.DST_ALPHA]}),u.enableVertexAttribArray(i.attributes.aPos),u.enableVertexAttribArray(i.attributes.aColor),m=0;m<this.bufferDataArr.length;m++)if(!(0>=this.bufferDataArr[m].length)){p=new Float32Array(this.bufferDataArr[m]).BYTES_PER_ELEMENT,u.bindBuffer(u.ARRAY_BUFFER,this.vertexBuffer[m]),u.vertexAttribPointer(i.attributes.aColor,4,u.FLOAT,!1,7*p,3*p),u.vertexAttribPointer(i.attributes.aPos,3,u.FLOAT,!1,7*p,0),p=this.position[m];var y=ur.create(),v=[this.currentScale,this.currentScale,this.currentScale];this.options.unit==="px"&&this.map&&(v=this.map.getZoomUnits(),v=[this.currentScale*v,this.currentScale*v,this.currentScale]),ur.identity(y),ur.translate(y,y,[p[0],p[1],0]),ur.scale(y,y,v),u.uniformMatrix4fv(i.uniforms.u_modelMatrix,!1,y),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,this.indexBuffer[m]),u.drawElements(u.TRIANGLES,this.indexDataArr[m].length,u.UNSIGNED_SHORT,0),u.bindBuffer(u.ARRAY_BUFFER,null),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null)}i=this.getOptions(),u=i.scale,i=i.step,this.opacity-=i/10,this.currentScale+=u*i,0>this.opacity&&(this.currentScale=this.opacity=1)}}]),A}(ui),_x=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.name="RippleLayer",i.bufferData=[],i.date=new Date,i.autoUpdate=!0,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{depthTest:!0,polygonOffset:[0,0],color:[.1,.1,.9,1],blend:"normal",size:20,unit:"px",duration:2}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.program=new Ur(this.gl,{vertexShader:`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 uMatrix;uniform vec4 uSelectedColor;uniform float uTime;uniform float duration;uniform float zoomUnits;varying vec4 vColor;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}float percent=mod(uTime,duration)/duration;vColor.a=1.-percent;gl_Position=uMatrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize/zoomUnits*percent;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,fragmentShader:"varying vec4 vColor;void main(void){vec4 color=vColor;float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}float blur=1.0;blur=1.0-smoothstep(0.49,0.5,d);color.a*=blur;gl_FragColor=color;}",defines:u.enablePicked?["PICK"]:[]},this),this.buffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=[{stride:32,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:32,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12},{stride:32,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:28}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onDestroy",value:function(){this.bufferData=[]}},{key:"onChanged",value:function(i,u){if(this.gl){for(var m=[],p=i.color,y=i.size,v=0;v<u.length;v++){var M=u[v].geometry.coordinates,R=p;Object.prototype.toString.call(R)==="[object Function]"?R=R(u[v]):(R=u[v].color||p,"properties"in u[v]&&"color"in u[v].properties&&(R=u[v].properties.color)),R=this.normizedColor(R),M=this.normizedPoint(M);var k=u[v].size||y;"properties"in u[v]&&"size"in u[v].properties&&(k=u[v].properties.size),k=Object.prototype.toString.call(k)==="[object Function]"?k(u[v]):Number(k),m.push(M[0],M[1],Number(M[2]||0)),m.push(R[0],R[1],R[2],R[3]),m.push(k*window.devicePixelRatio)}this.bufferData=m,this.buffer.updateData(new Float32Array(m)),i.enablePicked&&this.parsePickData(u)}}},{key:"parsePickData",value:function(i){var u=this.getOptions(),m=[];if(u.enablePicked)for(var p=0;p<i.length;p++){var y=this.indexToRgb(p);m.push(y[0]/255,y[1]/255,y[2]/255)}u.enablePicked&&this.pickBuffer.updateData(new Float32Array(m))}},{key:"render",value:function(i){var u=i.gl,m=i.matrix,p=i.isPickRender;if(!(0>=this.bufferData.length)){var y=this.getOptions(),v=this.program;v.use(u),this.vertexArray.bind(),i=this.getCommonUniforms(i);var M=1;y.unit==="m"&&this.map&&(M=this.map.getZoomUnits()),i=ln(i,{zoomUnits:M,uTime:(new Date-this.date)/1e3,duration:y.duration,uMatrix:m}),v.setUniforms(i),this.setGLState({blend:!p,blendFunc:y.blend==="lighter"?[u.SRC_ALPHA,u.ONE]:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA],blendEquation:u.FUNC_ADD,polygonOffset:y.polygonOffset,depthTest:y.depthTest}),u.drawArrays(u.POINTS,0,this.bufferData.length/8)}}}]),A}(ui),Bx=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="SparkLayer",i.bufferData=[],i.startTime=Number(i.options.startTime)||0,i.endTime=Number(i.options.endTime),i.time=i.startTime,i.segs=Number(i.options.segs)||10,i.autoUpdate=!0,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{color:[.9,.1,.1,1],trailLength:3,height:100,step:.1,segs:10,polygonOffset:[0,0]}}},{key:"setTime",value:function(i){this.time=i}},{key:"initialize",value:function(i){this.gl=i,this.program=new Ur(this.gl,{vertexShader:"precision mediump float;attribute vec4 aPos;uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;varying float vTime;void main(){gl_Position=u_matrix*vec4(aPos.xyz,1.0);vTime=1.0-((currentTime-aPos.w)/trailLength);}",fragmentShader:"precision mediump float;uniform vec3 uFragColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(uFragColor,1.0*vTime);}"}),this.buffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.buffer)}},{key:"onDestroy",value:function(){this.bufferData=[]}},{key:"onChanged",value:function(i,u){var m=this.gl;if(m){this.buffer=m.createBuffer(),m.bindBuffer(m.ARRAY_BUFFER,this.buffer);for(var p=[],y=i.height,v=0;v<u.length;v++)for(var M=u[v].geometry.coordinates,R=Object.prototype.toString.call(y)==="[object Function]"?y(u[v]):Number(y),k=0,_=0;_<this.segs;_++){var T=this.normizedPoint(M);p.push(T[0],T[1],k),M[2]===void 0?p.push(_):p.push(Number(M[2])),k+=R/this.segs,p.push(T[0],T[1],k),M[2]===void 0?p.push(_+1):p.push(Number(M[2]))}i.endTime===void 0&&(this.endTime=this.segs),this.bufferData=p,m.bufferData(m.ARRAY_BUFFER,new Float32Array(p),m.STATIC_DRAW),this.webglLayer&&this.webglLayer.render()}}},{key:"render",value:function(i){var u=i.gl,m=i.matrix;i=this.program,u.useProgram(i.program),u.uniformMatrix4fv(i.uniforms.u_matrix,!1,m),u.bindBuffer(u.ARRAY_BUFFER,this.buffer),u.enableVertexAttribArray(i.attributes.aPos),u.vertexAttribPointer(i.attributes.aPos,4,u.FLOAT,!1,0,0),m=this.normizedColor(this.options.color),u.uniform3f(i.uniforms.uFragColor,m[0],m[1],m[2]),u.uniform1f(i.uniforms.currentTime,this.time),u.uniform1f(i.uniforms.trailLength,this.options.trailLength),this.setGLState({blend:!0,blendFunc:[u.SRC_ALPHA,u.ONE],blendEquation:u.FUNC_ADD,polygonOffset:this.options.polygonOffset}),u.drawArrays(u.LINES,0,this.bufferData.length/4),this.time+=Number(this.options.step),this.time>1.5*this.endTime&&(this.time=this.startTime)}}]),A}(ui),vn=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="IconLayer",i.index=[],u=i.canvas=document.createElement("canvas"),i.ctx=u.getContext("2d"),i.iconHash=new zs,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{depthWrite:!0,depthTest:!0,depthFunc:"lequal",blend:"default",flat:!1,unit:"px",scale:1,angle:0,opacity:1,offset:[0,0],padding:[0,0],polygonOffset:[0,0]}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.texture=null,this.program=new Ur(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute vec2 a_size;attribute vec2 a_offset;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform float devicePixelRatio;uniform float u_zoom_units;uniform float u_zIndex;uniform float u_scale;uniform bool u_unit_px;uniform bool u_flat;varying vec2 v_texture_coord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)+size.x*sin(a_rotation);}else if(corner==2.0){x+=size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)-size.x*sin(a_rotation);}else if(corner==3.0){x+=size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)-size.x*sin(a_rotation);}else{x+=-size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)+size.x*sin(a_rotation);}return vec3(x,y,coord.z);}void main(){v_texture_coord=a_texture_coord;if(u_flat){vec2 offset=a_offset;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;offset*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=u_zIndex;gl_Position=u_matrix*vec4(current.x+offset[0],current.y-offset[1],current.z,1.0);}else{vec4 position=u_matrix*vec4(a_pos,1.0);vec3 screen=position.xyz/position.w;vec2 halfSize=a_size/MAPV_resolution*devicePixelRatio*u_scale;vec2 offset=a_offset*2./MAPV_resolution*devicePixelRatio;if(!u_unit_px){halfSize/=u_zoom_units;offset/=u_zoom_units;}vec3 current=transformCoord(screen,halfSize,a_corner);current.xy=current.xy-offset;current.z+=u_zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform float u_opacity;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}textureColor.a*=u_opacity;gl_FragColor=textureColor;
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:u.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:36,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:16},{name:"a_offset",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:32},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){this.gl&&this.processCache(i,u,2<arguments.length&&arguments[2]!==void 0?arguments[2]:{})}},{key:"processCache",value:function(i,u,m){var p=this;this.cachedData=[];for(var y=i.icon,v=i.width,M=i.height,R=i.offset,k=i.angle,_=0;_<u.length;_++){var T=this.normizedPoint(u[_].geometry.coordinates),O=this.getProperty("icon",y,u[_]),U=this.getProperty("width",v,u[_]),G=this.getProperty("height",M,u[_]),X=this.getProperty("offset",R,u[_]),W=this.getProperty("angle",k,u[_]);T&&O&&(this.cachedData.push({point:T,icon:O,width:U,height:G,offset:X,angle:W,index:_}),this.iconHash.get(O)||this.iconHash.set(O,O))}u=Ea(this.iconHash.entries()).filter(function(Y){return typeof Y[1]=="string"}).map(function(Y){var J=ni(Y,2)[0];return new vr(function(ot,ut){p.url2canvas(J,function(lt){p.iconHash.set(J,lt),ot()})})}),vr.all(u).then(function(Y){p.buildSprite(i),m.autoRender!==!1&&p.webglLayer&&p.webglLayer.render()})}},{key:"buildSprite",value:function(i){var u=i.padding,m=this.canvas,p=this.ctx,y=[],v=new zs,M=!0,R=!1,k=void 0;try{for(var _=aa(this.iconHash),T;!(M=(T=_.next()).done);M=!0){var O=ni(T.value,2),U=O[1];if(typeof U!="string"){var G=U.width,X=U.height;y.push({w:G+u[0],h:X+u[0],width:G,height:X,key:O[0],icon:U})}}}catch(W){R=!0,k=W}finally{try{!M&&_.return&&_.return()}finally{if(R)throw k}}for(R=to(y),M=0;M<y.length;M++)k=y[M],v.get(k.key)||v.set(k.key,k);for(M=Qe(R.w),R=Qe(R.h),m.width=M||1,m.height=R||1,p.save(),m=0;m<y.length;m++)k=y[m],p.drawImage(k.icon,k.x+u[0],k.y+u[1],k.width,k.height);p.restore(),this.loadTexture(),this.buildVertex(i,v,M,R)}},{key:"buildVertex",value:function(i,u,m,p){i=i.enablePicked;for(var y=[],v=[],M=[],R=[],k=0;k<this.cachedData.length;k++){var _=this.cachedData[k],T=_.point,O=_.width,U=_.height,G=_.offset,X=_.angle,W=_.index;if(_=u.get(_.icon)){O=O||_.icon.width,U=U||_.icon.height;var Y=ni(T,3);T=Y[0];var J=Y[1];Y=Y[2];for(var ot=0;4>ot;ot++)y.push(T,J,Y),y.push(ot),y.push(O,U),y.push.apply(y,Fn(G)),y.push(X*Math.PI/180);O=_.x/m,U=(_.x+_.w)/m,G=(_.y+_.h)/p,_=_.y/p,v.push(O,G,O,_,U,_,U,G),_=4*k,M.push(_,_+2,_+1,_,_+3,_+2),i&&(W=this.indexToRgb(W),R.push(W[0]/255,W[1]/255,W[2]/255),R.push(W[0]/255,W[1]/255,W[2]/255),R.push(W[0]/255,W[1]/255,W[2]/255),R.push(W[0]/255,W[1]/255,W[2]/255))}}this.index=M,this.vertexBuffer.updateData(new Float32Array(y)),this.uvBuffer.updateData(new Float32Array(v)),this.indexBuffer.updateData(new Uint32Array(M)),i&&this.pickBuffer.updateData(new Float32Array(R))}},{key:"render",value:function(i){if(this.cachedData&&this.cachedData.length&&this.iconHash&&this.texture){var u=i.gl,m=i.matrix,p=this.getOptions(),y=this.program;y.use(u);var v=i.isPickRender?Gs(u,null):Gs(u,p.blend),M=u.LEQUAL;p.depthFunc&&(M=u[p.depthFunc.toUpperCase()]),this.setGLState({blend:!0,blendFunc:v,polygonOffset:p.polygonOffset,depthTest:p.depthTest,depthMask:p.depthWrite,depthFunc:M}),y.setUniforms(ln(this.getCommonUniforms(i),{u_icon:this.texture,u_matrix:m,u_flat:p.flat,u_unit_px:p.unit==="px",u_zoom_units:this.map.getZoomUnits(),u_scale:p.scale,u_opacity:p.opacity,u_zIndex:p.zIndex,devicePixelRatio:1<(window.BMAPGL_FORCE_RATIO||window.devicePixelRatio)?2:1})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,this.index.length,u.UNSIGNED_INT,0))}}},{key:"url2canvas",value:function(i,u){if((typeof i=="undefined"?"undefined":Mn(i))==="object")u(i);else{var m=new Image;m.crossOrigin="anonymous",m.onload=function(){var p=m.width,y=m.height,v=document.createElement("canvas");v.width=p,v.height=y,v.getContext("2d").drawImage(m,0,0,p,y),u(v)},m.onerror=function(){var p=document.createElement("canvas");p.width=20,p.height=40;var y=p.getContext("2d");y.fillStyle="red",y.beginPath(),y.lineTo(0,0),y.lineTo(20,0),y.lineTo(10,40),y.closePath(),y.fill(),u(p)},m.src=i}}},{key:"loadTexture",value:function(){var i=this;this.canvas?wo(this.gl,this.canvas,function(u){i.texture=u}):this.texture=null}}]),A}(ui),Ex=function(a){function A(i){fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i));var u=ln({blend:"default"},i.options);return i.pointLayer=new Za(u),i.options.textOptions=ln({depthTest:!1,collides:!1},i.options.textOptions),i.textLayer=new fA(i.options.textOptions),u=ln({},i.options,i.options.iconOptions),i.iconLayer=new vn(u),i.children=[i.pointLayer,i.textLayer,i.iconLayer],i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{minSize:25,maxSize:40,clusterRadius:200,minPoints:2,extent:400,showText:!0,maxZoom:19,minZoom:4,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"},textOptions:{fontSize:12,color:"white"},iconOptions:{}}}},{key:"onOptionsChanged",value:function(i){this.textLayer.setOptions(i.textOptions)}},{key:"setOptions",value:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},u=this.options.textOptions;i.textOptions&&ln(u,i.textOptions);var m=i.minZoom,p=i.maxZoom,y=i.clusterRadius;m=p&&p!==this.options.maxZoom||m&&m!==this.options.minZoom||y&&y!==this.options.clusterRadius,ln(this.options,i,{textOptions:u}),m?this.onChanged(this.options,this.data):this.refreshCluster(),this.onOptionsChanged(this.getOptions())}},{key:"onChanged",value:function(i,u){var m=this;u&&u.length?(u.forEach(function(p){var y=ni(p.geometry.coordinates,2),v=y[0];y=y[1],-180<=v&&180>=v&&-90<=y&&90>=y||(v=m.map.mercatorToLnglat(v,y),p.geometry.coordinates[0]=v[0],p.geometry.coordinates[1]=v[1])}),this.supercluster=new n0({maxZoom:i.maxZoom,minZoom:i.minZoom,radius:i.clusterRadius,minPoints:i.minPoints,extent:i.extent}),this.supercluster.load(u),this.supercluster.trees.forEach(function(p){var y=0,v=Infinity;p.points.forEach(function(M){y=Math.max(M.numPoints||0,y),v=Math.min(M.numPoints||Infinity,v)}),p.max=y,p.min=v}),this.refreshCluster()):(this.supercluster=null,this.pointLayer.setData([]),this.iconLayer.setData([]),this.textLayer.setData([]))}},{key:"refreshCluster",value:function(){var i=this,u=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options;if(this.supercluster){var m=this.getClusterData(u);if(m&&m.length)if(typeof u.beforeRender=="function"&&u.beforeRender(m)===!1)this.pointLayer.setData([]),this.iconLayer.setData([]),this.textLayer.setData([]);else{var p=[],y=[],v=[];m.forEach(function(M){M.properties.cluster?(p.push(M),v.push({geometry:M.geometry,properties:{text:M.properties.text}})):M.properties.icon||i.options.iconOptions.icon?y.push(M):p.push(M)}),this.pointLayer.setData(p),this.iconLayer.setData(y),this.textLayer.setData(u.showText?v:[]),u.enablePicked&&u.autoSelect&&this.pick(-1,-1)}}}},{key:"getClusterData",value:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options,u=this.map.getBounds(),m=this.ne=u.getNorthEast();u=this.sw=u.getSouthWest();var p=m,y=p.lng;return p=p.lat,-180<=y&&180>=y&&-90<=p&&90>=p?u=[u.lng,u.lat,m.lng,m.lat]:(m=this.map.mercatorToLnglat(this.ne.lng,this.ne.lat),u=this.map.mercatorToLnglat(this.sw.lng,this.sw.lat),u=u.concat(m)),m=Math.floor(this.map.getZoom()),u=this.supercluster.getClusters(u,m),this.zoom!==m&&0<u.length&&(this.zoom=m,p=this.supercluster.trees,y=p[m]&&p[m].max||this.max,m=p[m]&&p[m].min||this.min,y!==m&&(this.max=y,this.min=m)),this.processData(u,i)}},{key:"processData",value:function(i,u){var m=u.defaultColor,p=u.defaultSize,y=u.gradient,v=u.minSize,M=u.textOptions,R=new ci({max:this.max,min:~~this.min||1,minSize:v||8,maxSize:u.maxSize||30,gradient:y});m=m||y[0]||"black",p=p||.5*v||5;var k=M&&M.format;return k=typeof k=="function"?k:null,i.map(function(_){var T=p,O=m,U="";return _.properties&&_.properties.point_count&&(U=_.properties.point_count,T=R.getSize(U)||T,O=R.getColor(U),U=k?k(U):U),T=ln({},_.properties,{text:U,size:T,color:O}),ln({},_,{properties:T,children:_.id})})}},{key:"pick",value:function(i,u){var m=this.pointLayer.pick(i,u);return 0>m.dataIndex&&(m=this.iconLayer.pick(i,u)),(i=m.dataItem)&&typeof i.children=="number"&&(i.children=this.getClusterPoints(i.children)),m}},{key:"getClusterPoints",value:function(i){var u=this;return i?this.supercluster.getChildren(i).map(function(m){return m.type==="Feature"?u.getClusterPoints(m.id):m}).flat():[]}},{key:"shouldUpdate",value:function(){if(!this.data||!this.supercluster)return!1;if(this.zoom!==Math.floor(this.map.getZoom()))return!0;var i=this.map.getBounds(),u=i.getNorthEast();if(i=i.getSouthWest(),this.ne.lng!==u.lng||this.ne.lat!==u.lat||this.sw.lng!==i.lng||this.sw.lat!==i.lat)return!0}},{key:"render",value:function(i){this.shouldUpdate()?this.refreshCluster():Ka(A.prototype.__proto__||Er(A.prototype),"render",this).call(this,i)}}]),A}(Vo),Ix=function(a){function A(i){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.options.textOptions=ln({collides:!1,depthWrite:!0},i.options.textOptions),i.textLayer=new fA(i.options.textOptions),i.options.iconOptions=ln({},i.options,i.options.iconOptions),i.iconLayer=new vn(i.options.iconOptions),i.children=[i.iconLayer,i.textLayer],i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{clusterRadius:200,minPoints:2,showText:!0,maxZoom:19,minZoom:4,extent:400,textOptions:{fontSize:12,color:"white"},iconOptions:{}}}},{key:"setOptions",value:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},u=this.options.textOptions,m=this.options.iconOptions;i.textOptions&&ln(u,i.textOptions),i.iconOptions&&ln(m,i.textOptions),m=i.minZoom;var p=i.maxZoom,y=i.clusterRadius;m=p&&p!==this.options.maxZoom||m&&m!==this.options.minZoom||y&&y!==this.options.clusterRadius,ln(this.options,i,{textOptions:u}),m?this.onChanged(this.options,this.data):this.refreshCluster(),this.onOptionsChanged(this.getOptions())}},{key:"onChanged",value:function(i,u){var m=this;u&&u.length?(u.forEach(function(p){var y=ni(p.geometry.coordinates,2),v=y[0];y=y[1],-180<=v&&180>=v&&-90<=y&&90>=y||(v=m.map.mercatorToLngLat(v,y),p.geometry.coordinates[0]=v[0],p.geometry.coordinates[1]=v[1])}),this.supercluster=new n0({maxZoom:i.maxZoom,minZoom:i.minZoom,minPoints:i.minPoints,radius:i.clusterRadius,extent:i.extent}),this.supercluster.load(u),this.supercluster.trees.forEach(function(p){var y=0,v=Infinity;p.points.forEach(function(M){y=Math.max(M.numPoints||0,y),v=Math.min(M.numPoints||Infinity,v)}),p.max=y,p.min=v}),this.refreshCluster()):(this.supercluster=null,this.textLayer.setData([]),this.iconLayer.setData([]))}},{key:"refreshCluster",value:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options;if(this.supercluster){var u=this.getClusterData(i);if(u&&u.length)if(typeof i.beforeRender=="function"&&i.beforeRender(u)===!1)this.textLayer.setData([]),this.iconLayer.setData([]);else{var m=[],p=[];u.forEach(function(y){y.properties.cluster&&m.push({geometry:y.geometry,properties:{text:y.properties.text}}),p.push(y)}),this.textLayer.setData(i.showText?m:[]),this.iconLayer.setData(p),i.enablePicked&&i.autoSelect&&this.pick(-1,-1)}}}},{key:"getClusterData",value:function(i){var u=this.map.getBounds(),m=this.ne=u.getNorthEast();u=this.sw=u.getSouthWest();var p=m,y=p.lng;return p=p.lat,-180<=y&&180>=y&&-90<=p&&90>=p?u=[u.lng,u.lat,m.lng,m.lat]:(m=this.map.mercatorToLnglat(this.ne.lng,this.ne.lat),u=this.map.mercatorToLnglat(this.sw.lng,this.sw.lat),u=u.concat(m)),m=Math.floor(this.map.getZoom()),u=this.supercluster.getClusters(u,m),this.zoom!==m&&0<u.length&&(this.zoom=m,p=this.supercluster.trees,y=p[m]&&p[m].max||this.max,m=p[m]&&p[m].min||this.min,y!==m&&(this.max=y,this.min=m)),this.processData(u,i)}},{key:"processData",value:function(i,u){var m=this,p=(u=u.textOptions)&&u.format;return p=typeof p=="function"?p:null,i.map(function(y){var v=y.properties||{};if(y.properties&&y.properties.point_count){v=y.properties.point_count;var M=m.getClusterIcon(v);v=p&&p(v),v=ln({},y.properties,{text:v,icon:M})}return ln({},y,{properties:v,children:y.id})})}},{key:"getClusterIcon",value:function(i){var u=this.options.iconExtent,m=_o(u).map(function(R){return+R}),p=m.length;if(p!==0){for(var y=1,v=void 0,M=m[0];y<p;){if(v=M,M=m[y],v<=i&&M>i)return u[v];y++}if(i>M)return u[M]}}},{key:"pick",value:function(i,u){return i=this.iconLayer.pick(i,u),(u=i.dataItem)&&typeof u.children=="number"&&(u.children=this.getClusterPoints(u.children)),i}},{key:"getClusterPoints",value:function(i){var u=this;return i?this.supercluster.getChildren(i).map(function(m){return m.type==="Feature"?u.getClusterPoints(m.id):m}).flat():[]}},{key:"shouldUpdate",value:function(){if(!this.data||!this.supercluster)return!1;if(this.zoom!==Math.floor(this.map.getZoom()))return!0;var i=this.map.getBounds(),u=i.getNorthEast();if(i=i.getSouthWest(),this.ne.lng!==u.lng||this.ne.lat!==u.lat||this.sw.lng!==i.lng||this.sw.lat!==i.lat)return!0}},{key:"render",value:function(i){this.shouldUpdate()?this.refreshCluster():Ka(A.prototype.__proto__||Er(A.prototype),"render",this).call(this,i)}}]),A}(Vo),wc=function(a){function A(i,u){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i,u))}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return ln(Ka(A.prototype.__proto__||Er(A.prototype),"getDefaultOptions",this).call(this),{style:"grid",gridSize:500,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}})}},{key:"onChanged",value:function(i,u){this.gl&&(u=this.processData(u,i),Ka(A.prototype.__proto__||Er(A.prototype),"onChanged",this).call(this,i,u))}},{key:"generateGrid",value:function(i,u){var m=u.gridSize,p=[],y={};u=i.length;for(var v=this.getPointOffset(),M=0;M<u;M++){var R=this.normizedPoint(i[M].geometry.coordinates),k=R[2];R=~~((R[0]+v[0])/m)+"_"+~~((R[1]+v[1])/m),y[R]===void 0&&(y[R]={count:0,num:0,z:0});var _=~~i[M].count||1;"properties"in i[M]&&"count"in i[M].properties&&(_=~~i[M].properties.count),y[R].count+=_,y[R].num+=1,y[R].z+=k}return _o(y).forEach(function(T){var O=T.split("_");p.push([O[0]*m+m/2,O[1]*m+m/2,y[T].z/y[T].num,y[T].count])}),p}},{key:"processData",value:function(i,u){var m=[];if(u.style==="normal")for(var p=this.getPointOffset(),y=0;y<i.length;y++){var v=this.normizedPoint(i[y].geometry.coordinates),M=v[0]+p[0],R=v[1]+p[1];v=v[2];var k=~~i[y].count||1;"properties"in i[y]&&"count"in i[y].properties&&(k=~~i[y].properties.count),m.push([M,R,v,k])}else m=this.generateGrid(i,u);if(p=i=0,u.max!==void 0&&u.min!==void 0)i=u.max,p=u.min;else{for(m[0]&&(i=m[0][3],p=m[0][3]),y=m.length,M=0;M<y;M++)R=m[M],i=Math.max(R[3],i),p=Math.min(R[3],p);i/=2}for(u=new ci({max:~~i,min:p,gradient:u.gradient}),i=[],p=0;p<m.length;p++)y=m[p],y[0]=y[0],y[1]=y[1],M=u.getImageData(y[3]),i.push({geometry:{type:"Point",coordinates:[y[0],y[1],y[2]]},color:[M[0]/255,M[1]/255,M[2]/255,M[3]/255]});return i}}]),A}(Za),Tx=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.bufferData=[],i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{color:[1,.05,.05,1]}}},{key:"onChanged",value:function(i,u){var m=this;if(i=this.gl){this.buffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.buffer);for(var p=[],y=function(M){var R=5*M;for(M=0;M<u.length;M++)u[M].geometry.coordinates.forEach(function(k){for(var _=0;_<k.length-1;_++){var T=m.normizedPoint(k[_]);p.push(T[0]),p.push(T[1]),p.push(Number(R)),T=m.normizedPoint(k[_+1]),p.push(T[0]),p.push(T[1]),p.push(Number(R))}})},v=0;20>v;v++)y(v);i.bufferData(i.ARRAY_BUFFER,new Float32Array(p),i.STATIC_DRAW),this.bufferData=p,i.bindBuffer(i.ARRAY_BUFFER,null)}}},{key:"initialize",value:function(i){this.gl=i,this.program=new Ur(i,{vertexShader:"uniform mat4 uMatrix;attribute vec3 aPos;void main(){gl_PointSize=10.0;gl_Position=uMatrix*vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform vec4 uFragColor;void main(){gl_FragColor=uFragColor;}"}),this.buffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.buffer)}},{key:"render",value:function(i){var u=i.gl;i=i.matrix;var m=this.program;u.useProgram(m.program);var p=this.normizedColor(this.options.color);u.uniform4f(m.uniforms.uFragColor,p[0],p[1],p[2],p[3]),u.uniformMatrix4fv(m.uniforms.uMatrix,!1,i),u.bindBuffer(u.ARRAY_BUFFER,this.buffer),u.enableVertexAttribArray(m.attributes.aPos),u.vertexAttribPointer(m.attributes.aPos,3,u.FLOAT,!1,0,0),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:[u.ONE,u.ONE]}),u.drawArrays(u.LINES,0,this.bufferData.length/3)}}]),A}(ui),x1={circle:1,square:2},Sx=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.bufferData=[],i.startTime=i.options.startTime||0,i.endTime=i.options.endTime,i.time=i.startTime,i.autoUpdate=!0,i}return tn(A,a),mr(A,[{key:"initialize",value:function(i){this.gl=i,this.program=new Ur(this.gl,{vertexShader:"attribute vec4 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 u_matrix;varying vec4 vColor;uniform float currentTime;uniform float trailLength;varying float vTime;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=u_matrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize;vTime=1.0-((currentTime-aPos.w)/trailLength);}",fragmentShader:"precision highp float;varying vec4 vColor;uniform int uShape;varying float vTime;void main(void){if(vTime>1.0||vTime<0.0){discard;}if(uShape==1){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d<0.5){gl_FragColor=vColor;}else{discard;}}else{gl_FragColor=vec4(vColor.rgb,vColor.a*vTime);}}"}),this.f32BufferData=new Float32Array,this.buffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.buffer)}},{key:"onChanged",value:function(i,u){var m=this.gl;if(m){this.buffer=m.createBuffer(),m.bindBuffer(m.ARRAY_BUFFER,this.buffer);for(var p=[],y=i.color||[.1,.1,.9,1],v=i.size||5,M=0;M<u.length;M++){var R=u[M].geometry.coordinates,k=y;Object.prototype.toString.call(k)==="[object Function]"?k=k(u[M]):(k=u[M].color||y,"properties"in u[M]&&"color"in u[M].properties&&(k=u[M].properties.color)),k=this.normizedColor(k);var _=this.normizedPoint(R),T=v;T=Object.prototype.toString.call(T)==="[object Function]"?T(u[M]):Number(T);var O=u[M].time||M;"properties"in u[M]&&"time"in u[M].properties&&(O=u[M].properties.time),p.push(_[0],_[1],Number(R[2]||0),O),p.push(k[0],k[1],k[2],k[3]),p.push(T*window.devicePixelRatio)}i.endTime===void 0&&(this.endTime=u.length),this.bufferData=p,this.f32BufferData=new Float32Array(p),m.bufferData(m.ARRAY_BUFFER,this.f32BufferData,m.STATIC_DRAW)}}},{key:"render",value:function(i){var u=i.gl,m=i.matrix;0>=this.bufferData.length||(i=this.program,u.useProgram(i.program),u.uniformMatrix4fv(i.uniforms.u_matrix,!1,m),u.bindBuffer(u.ARRAY_BUFFER,this.buffer),m=this.f32BufferData.BYTES_PER_ELEMENT,u.enableVertexAttribArray(i.attributes.aPos),u.vertexAttribPointer(i.attributes.aPos,4,u.FLOAT,!1,9*m,0),u.enableVertexAttribArray(i.attributes.aColor),u.vertexAttribPointer(i.attributes.aColor,4,u.FLOAT,!1,9*m,4*m),u.enableVertexAttribArray(i.attributes.aSize),u.vertexAttribPointer(i.attributes.aSize,1,u.FLOAT,!1,9*m,8*m),u.uniform1f(i.uniforms.currentTime,this.time),u.uniform1f(i.uniforms.trailLength,this.options.trailLength||3),m=1,this.options.shape&&x1[this.options.shape]&&(m=x1[this.options.shape]),u.uniform1i(i.uniforms.uShape,m),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:this.options.blend==="lighter"?[u.SRC_ALPHA,u.ONE]:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA]}),u.drawArrays(u.POINTS,0,this.bufferData.length/9),this.time+=this.options.step||.1,this.time>this.endTime&&(this.time=this.startTime))}}]),A}(ui),$p=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.bufferData=[],i.startTime=i.options.startTime||0,i.endTime=i.options.endTime,i.time=i.startTime,i.autoUpdate=!0,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{color:[1,.05,.05,1],trailLength:3,step:.1,polygonOffset:[0,0]}}},{key:"initialize",value:function(i){this.gl=i,this.program=new Ur(this.gl,{vertexShader:"precision highp float;attribute vec4 aPos;attribute vec4 aColor;uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;varying float vTime;varying vec4 vColor;void main(){gl_Position=u_matrix*vec4(aPos.xyz,1.0);vColor=aColor;vTime=1.0-((currentTime-aPos.w)/trailLength);}",fragmentShader:"precision highp float;uniform vec3 uFragColor;varying vec4 vColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(vColor.rgb,1.0*vTime);}"},this),this.buffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.buffer)}},{key:"setTime",value:function(i){this.time=i}},{key:"onChanged",value:function(i,u){var m=this.gl;if(m){this.buffer=m.createBuffer(),m.bindBuffer(m.ARRAY_BUFFER,this.buffer);for(var p=[],y=0,v=this.options.color,M=0;M<u.length;M++){var R=u[M].geometry.coordinates;u[M].color&&(v=u[M].color),"properties"in u[M]&&"color"in u[M].properties&&(v=u[M].properties.color),Object.prototype.toString.call(v)==="[object Function]"&&(v=v(u[M])),v=this.normizedColor(v),R.length>y&&(y=R.length);for(var k=0;k<R.length-1;k++){var _=this.normizedPoint(R[k]);p.push(_[0]),p.push(_[1]),p.push(_[2]),R[k][3]===void 0?p.push(k):p.push(Number(R[k][3])),p.push(v[0]),p.push(v[1]),p.push(v[2]),p.push(v[3]),_=this.normizedPoint(R[k+1]),p.push(_[0]),p.push(_[1]),p.push(_[2]),R[k+1][3]===void 0?p.push(k+1):p.push(Number(R[k+1][3])),p.push(v[0]),p.push(v[1]),p.push(v[2]),p.push(v[3])}}i.endTime===void 0&&(this.endTime=y),this.bufferData=p,this.f32BufferData=new Float32Array(p),m.bufferData(m.ARRAY_BUFFER,this.f32BufferData,m.STATIC_DRAW)}}},{key:"render",value:function(i){var u=i.gl,m=i.matrix;i=this.getOptions();var p=this.program;p.use(u),u.uniformMatrix4fv(p.uniforms.u_matrix,!1,m),u.bindBuffer(u.ARRAY_BUFFER,this.buffer),m=this.f32BufferData.BYTES_PER_ELEMENT,u.enableVertexAttribArray(p.attributes.aPos),u.vertexAttribPointer(p.attributes.aPos,4,u.FLOAT,!1,8*m,0),u.enableVertexAttribArray(p.attributes.aColor),u.vertexAttribPointer(p.attributes.aColor,4,u.FLOAT,!1,8*m,4*m),m=this.normizedColor(i.color),u.uniform3f(p.uniforms.uFragColor,m[0],m[1],m[2]),u.uniform1f(p.uniforms.currentTime,this.time),u.uniform1f(p.uniforms.trailLength,i.trailLength),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:i.blend==="lighter"?[u.ONE,u.ONE]:[u.SRC_ALPHA,u.ONE],polygonOffset:i.polygonOffset,depthMask:!1}),u.drawArrays(u.LINES,0,this.bufferData.length/8),this.time+=i.step,this.time>this.endTime&&(this.time=this.startTime)}}]),A}(ui),Lx=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="IconCollidesLayer",i.index=[],u=i.canvas=document.createElement("canvas"),i.ctx=u.getContext("2d"),i.iconHash=new zs,i.boxHash=new zs,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{flat:!1,unit:"px",scale:1,angle:0,offset:[0,0],padding:[0,0]}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new Ur(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute vec2 a_size;attribute vec2 a_offset;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform float devicePixelRatio;uniform float u_zoom_units;uniform float u_zIndex;uniform float u_scale;uniform bool u_unit_px;uniform bool u_flat;varying vec2 v_texture_coord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)+size.x*sin(a_rotation);}else if(corner==2.0){x+=size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)-size.x*sin(a_rotation);}else if(corner==3.0){x+=size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)-size.x*sin(a_rotation);}else{x+=-size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)+size.x*sin(a_rotation);}return vec3(x,y,coord.z);}void main(){v_texture_coord=a_texture_coord;if(u_flat){vec2 offset=a_offset;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;offset*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=u_zIndex;gl_Position=u_matrix*vec4(current.x+offset[0],current.y-offset[1],current.z,1.0);}else{vec4 position=u_matrix*vec4(a_pos,1.0);vec3 screen=position.xyz/position.w;vec2 halfSize=a_size/MAPV_resolution*devicePixelRatio*u_scale;vec2 offset=a_offset*2./MAPV_resolution*devicePixelRatio;if(!u_unit_px){halfSize/=u_zoom_units;offset/=u_zoom_units;}vec3 current=transformCoord(screen,halfSize,a_corner);current.xy=current.xy-offset;current.z+=u_zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}gl_FragColor=textureColor;
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:u.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:36,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:16},{name:"a_offset",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:32},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};this.gl&&(this.cachedData=[],this.boxHash.clear(),this.processCache(i,u,m))}},{key:"processCache",value:function(i,u,m){for(var p=this,y=i.icon,v=i.width,M=i.height,R=i.offset,k=i.angle,_=0;_<u.length;_++){var T=this.normizedPoint(u[_].geometry.coordinates),O=this.getProperty("icon",y,u[_]),U=this.getProperty("width",v,u[_]),G=this.getProperty("height",M,u[_]),X=this.getProperty("offset",R,u[_]),W=this.getProperty("angle",k,u[_]);T&&O&&(this.cachedData.push({point:T,icon:O,width:U,height:G,offset:X,angle:W,dataIndex:_}),this.iconHash.get(O)||this.iconHash.set(O,O))}u=Ea(this.iconHash.entries()).filter(function(Y){return typeof Y[1]=="string"}).map(function(Y){var J=ni(Y,2)[0];return new vr(function(ot,ut){p.url2canvas(J,function(lt){p.iconHash.set(J,lt),ot()})})}),vr.all(u).then(function(Y){p.buildSprite(i),m.autoRender!==!1&&p.webglLayer&&p.webglLayer.render()})}},{key:"buildSprite",value:function(i){i=i.padding;var u=this.canvas,m=this.ctx,p=[],y=!0,v=!1,M=void 0;try{for(var R=aa(this.iconHash),k;!(y=(k=R.next()).done);y=!0){var _=ni(k.value,2),T=_[1];if(typeof T!="string"){var O=T.width,U=T.height;p.push({w:O+i[0],h:U+i[0],width:O,height:U,key:_[0],icon:T})}}}catch(G){v=!0,M=G}finally{try{!y&&R.return&&R.return()}finally{if(v)throw M}}for(R=to(p),k=0;k<p.length;k++)_=p[k],this.boxHash.get(_.key)||this.boxHash.set(_.key,_);for(k=Qe(R.w)||1,R=Qe(R.h)||1,u.width=k,u.height=R,m.save(),u=0;u<p.length;u++)R=p[u],m.drawImage(R.icon,R.x+i[0],R.y+i[1],R.width,R.height);m.restore(),this.loadTexture()}},{key:"render",value:function(i){if(this.cachedData&&this.cachedData.length&&this.texture){var u=i.gl,m=i.matrix,p=this.getOptions(),y=this.program;y.use(u),this.throttleUpdate(i),this.setGLState({blend:!0,blendFunc:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA]}),y.setUniforms(ln(this.getCommonUniforms(i),{u_icon:this.texture,u_matrix:m,u_flat:p.flat,u_unit_px:p.unit==="px",u_zoom_units:this.map.getZoomUnits(),u_scale:p.scale,u_zIndex:p.zIndex,devicePixelRatio:1<(window.BMAPGL_FORCE_RATIO||window.devicePixelRatio)?2:1})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,this.index.length,u.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(i){this.updateIcon(i)}},{key:"updateIcon",value:function(i){if(this.iconHash.size&&this.boxHash.size){var u=this.getOptions(),m=i.gl;i=i.matrix,u=u.enablePicked;var p=[],y=[],v=[],M=[],R=this.canvas.width,k=this.canvas.height,_=m.canvas.width/window.devicePixelRatio;m=m.canvas.height/window.devicePixelRatio;for(var T=new Hs,O=0,U=0;U<this.cachedData.length;U++){var G=this.cachedData[U],X=G.point,W=G.width,Y=G.height,J=G.offset,ot=G.angle,ut=G.dataIndex;if(G=this.boxHash.get(G.icon)){W=W||G.icon.width,Y=Y||G.icon.height;var lt=ni(X,3);X=lt[0];var wt=lt[1];lt=lt[2];var Qt=Si.clone([X,wt,lt,1]);Si.transformMat4(Qt,Qt,i),Si.scale(Qt,Qt,1/Qt[3]);var zt=(Qt[0]+1)/2*_-W/2;Qt=(-Qt[1]+1)/2*m-Y/2;var ne=zt+W,pe=Qt+Y;if(!(0>ne||0>pe||zt>_||Qt>m||(zt={minX:zt,maxX:ne,minY:Qt,maxY:pe},T.collides(zt)))){for(T.insert(zt),zt=0;4>zt;zt++)p.push(X,wt,lt),p.push(zt),p.push(W,Y),p.push.apply(p,Fn(J)),p.push(ot*Math.PI/180);W=G.x/R,Y=(G.x+G.w)/R,J=(G.y+G.h)/k,G=G.y/k,y.push(W,J,W,G,Y,G,Y,J),G=4*O,v.push(G,G+2,G+1,G,G+3,G+2),u&&(ut=this.indexToRgb(ut),M.push(ut[0]/255,ut[1]/255,ut[2]/255),M.push(ut[0]/255,ut[1]/255,ut[2]/255),M.push(ut[0]/255,ut[1]/255,ut[2]/255),M.push(ut[0]/255,ut[1]/255,ut[2]/255)),O+=1}}}this.index=v,this.vertexBuffer.updateData(new Float32Array(p)),this.uvBuffer.updateData(new Float32Array(y)),this.indexBuffer.updateData(new Uint32Array(v)),u&&this.pickBuffer.updateData(new Float32Array(M))}}},{key:"url2canvas",value:function(i,u){if((typeof i=="undefined"?"undefined":Mn(i))==="object")u(i);else{var m=new Image;m.crossOrigin="anonymous",m.onload=function(){var p=m.width,y=m.height,v=document.createElement("canvas");v.width=p,v.height=y,v.getContext("2d").drawImage(m,0,0,p,y),u(v)},m.onerror=function(){var p=document.createElement("canvas");p.width=20,p.height=40;var y=p.getContext("2d");y.fillStyle="red",y.beginPath(),y.lineTo(0,0),y.lineTo(20,0),y.lineTo(10,40),y.closePath(),y.fill(),u(p)},m.src=i}}},{key:"loadTexture",value:function(){var i=this;this.canvas?wo(this.gl,this.canvas,function(u){i.texture=u}):this.texture=null}}]),A}(ui),w1=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="LineFlowLayer",i.initData(),i.date=new Date,i.autoUpdate=!0,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{color:"rgba(25, 25, 250, 1)",blend:"normal",width:2,antialias:!1,interval:.1,duration:2,trailLength:.5,minZoom:2,maxZoom:25,polygonOffset:[0,0]}}},{key:"initData",value:function(){this.dataMgr={position:[],prev:[],next:[],direction:[],color:[],index:[],counter:[]}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.program=new Ur(this.gl,{vertexShader:`uniform mat4 u_matrix;uniform float thickness;uniform vec4 uSelectedColor;attribute vec3 position;attribute vec3 next;attribute vec3 previous;attribute float direction;attribute vec4 aColor;attribute float aCounter;attribute vec2 uv;varying vec4 vColor;varying vec2 vNormal;varying float vCounter;vec2 project(vec4 coord){vec3 screen=coord.xyz/coord.w;vec2 clip=(screen.xy+1.0)/2.0;return clip*MAPV_resolution;}vec4 unproject(vec2 projected,float z,float w){vec2 clip=projected/MAPV_resolution;vec2 screen=clip*2.0-1.0;return vec4(screen*w,z,w);}void main(){vColor=aColor;vCounter=aCounter;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
vec4 previousProjected=u_matrix*vec4(previous,1.0);vec4 currentProjected=u_matrix*vec4(position,1.0);vec4 nextProjected=u_matrix*vec4(next,1.0);vec2 currentScreen=project(currentProjected);vec2 previousScreen=project(previousProjected);vec2 nextScreen=project(nextProjected);float len=thickness;float orientation=direction;vec2 dir=vec2(0.0);if(currentScreen==previousScreen){dir=normalize(nextScreen-currentScreen);}else if(currentScreen==nextScreen){dir=normalize(currentScreen-previousScreen);}else{vec2 dirA=normalize((currentScreen-previousScreen));vec2 dirB=normalize((nextScreen-currentScreen));vec2 tangent=normalize(dirA+dirB);vec2 perp=vec2(-dirA.y,dirA.x);vec2 miter=vec2(-tangent.y,tangent.x);dir=tangent;float angle=40.0;if(dot(dirA,dirB)>cos(radians(angle))){len=thickness/dot(miter,perp);}}vec2 normal=vec2(-dir.y,dir.x);vNormal=normal*orientation;normal*=len/2.0;vec2 pos=currentScreen+normal*orientation;vec4 finalPos=unproject(pos,currentProjected.z,currentProjected.w);gl_Position=finalPos;}`,fragmentShader:"precision highp float;uniform bool uAntialias;uniform bool uAnimate;uniform float uTime;uniform float duration;uniform float interval;uniform float trailLength;varying vec4 vColor;varying vec2 vNormal;varying float vCounter;void main(){vec4 color=vColor;if(uAntialias){float blur=1.0;blur=1.0-smoothstep(0.98,1.0,length(vNormal));color.a*=blur;}if(uAnimate){float alpha=1.0-fract(mod(1.0-vCounter,interval)*(1.0/interval)+uTime/duration);alpha=(alpha+trailLength-1.0)/trailLength;color.a*=alpha;}gl_FragColor=color;}",defines:u.enablePicked?["PICK"]:[]},this),this.prevBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.currentBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.nextBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.directionBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.colorBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.counterBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=[{stride:12,name:"previous",buffer:this.prevBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"position",buffer:this.currentBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"next",buffer:this.nextBuffer,size:3,type:"FLOAT",offset:0},{stride:4,name:"direction",buffer:this.directionBuffer,size:1,type:"FLOAT",offset:0},{stride:16,name:"aColor",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0},{stride:4,name:"aCounter",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:0}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){var m=this;if(this.gl){this.initData();for(var p=1,y=[],v=0;v<u.length;v++){var M=[],R=u[v].geometry.coordinates;R&&0<R.length&&(M=u[v].geometry.type==="Polygon"?R[0].map(function(U){return m.normizedPoint(U)}):R.map(function(U){return m.normizedPoint(U)})),M=zh(M),R=M.total,y[v]=M.arr,p=Math.max(R,p)}for(v=[],M=i.color,R=0;R<u.length;R++){var k=[],_=u[R].geometry.coordinates;_&&0<_.length&&(k=u[R].geometry.type==="Polygon"?_[0].map(function(U){return m.normizedPoint(U)}):_.map(function(U){return m.normizedPoint(U)})),_=M,Object.prototype.toString.call(_)==="[object Function]"?_=_(u[R]):(_=u[R].color||M,"properties"in u[R]&&"color"in u[R].properties&&(_=u[R].properties.color)),_=this.normizedColor(_);for(var T=this.addMultipleCoords(k),O=0;O<T.length;O++)this.processData(this.dataMgr,T[O],y[R],p,_);if(i.enablePicked)for(_=this.indexToRgb(R),T=0;T<k.length;T++)v.push(_[0]/255,_[1]/255,_[2]/255),v.push(_[0]/255,_[1]/255,_[2]/255),i.repeat&&(v.push(_[0]/255,_[1]/255,_[2]/255),v.push(_[0]/255,_[1]/255,_[2]/255),v.push(_[0]/255,_[1]/255,_[2]/255),v.push(_[0]/255,_[1]/255,_[2]/255))}this.counterBuffer.updateData(new Float32Array(this.dataMgr.counter)),this.currentBuffer.updateData(new Float32Array(this.dataMgr.position)),this.prevBuffer.updateData(new Float32Array(this.dataMgr.prev)),this.nextBuffer.updateData(new Float32Array(this.dataMgr.next)),this.directionBuffer.updateData(new Float32Array(this.dataMgr.direction)),this.colorBuffer.updateData(new Float32Array(this.dataMgr.color)),this.indexBuffer.updateData(new Uint32Array(this.dataMgr.index)),i.enablePicked&&this.pickBuffer.updateData(new Float32Array(v))}}},{key:"processData",value:function(i,u,m,p,y){var v,M,R,k,_,T,O,U=u.length,G=i.position.length/6;m=Ts(m.map(function(ot){return ot/p}));var X=Ts(u.map(function(ot){return-1}),!0),W=Ts(u),Y=Ts(u.map(Vl(-1))),J=Ts(u.map(Vl(1)));u=Ts(u.map(function(ot){return y})),U=ep(U,G),(v=i.counter).push.apply(v,Fn(m)),(M=i.position).push.apply(M,Fn(is(W))),(R=i.prev).push.apply(R,Fn(is(Y))),(k=i.next).push.apply(k,Fn(is(J))),(_=i.direction).push.apply(_,Fn(X)),(T=i.color).push.apply(T,Fn(is(u))),(O=i.index).push.apply(O,Fn(U))}},{key:"render",value:function(i){var u=i.gl,m=i.matrix,p=this.dataMgr;if(p&&!(0>=p.index.length)){var y=this.getOptions(),v=this.program;if(v.use(u),this.map){var M=this.map.getZoom();M=!!(M>=y.minZoom&&M<=y.maxZoom&&this.autoUpdate)}else M=!0;v.setUniforms(ln(this.getCommonUniforms(i),{u_matrix:m,thickness:y.width,uAntialias:y.antialias,uTime:(new Date-this.date)/1e3,uAnimate:M,duration:y.duration,interval:y.interval,trailLength:y.trailLength})),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:y.blend==="lighter"?[u.SRC_ALPHA,u.ONE]:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA],polygonOffset:y.polygonOffset}),this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,p.index.length,u.UNSIGNED_INT,0)}}}]),A}(ui),No=function(a){function A(i,u){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i,u))}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.texture=null,this.program=new Ur(this.gl,{vertexShader:`precision highp float;attribute vec3 a_pos;attribute vec2 a_texture_coord;uniform sampler2D uTerrain;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;varying vec2 v_texture_coord;void main(){v_texture_coord=a_texture_coord;vec3 pos=a_pos.xyz;
#if defined(TERRAIN)
vec4 terrainColor=texture2D(uTerrain,vec2(v_texture_coord.s,v_texture_coord.t));vec3 rgb=terrainColor.rgb*256.0;pos.z=-10000.0+((rgb.r*256.0*256.0+rgb.g*256.0+rgb.b)*0.1);pos.z=pos.z-60.0;
#endif
vec4 position=u_proj_matrix*u_mv_matrix*vec4(pos,1.0);gl_Position=position;}`,fragmentShader:"precision highp float;varying vec2 v_texture_coord;uniform sampler2D uTile;uniform bool uUseFilter;uniform vec4 uFilterColor;void main(){vec4 textureColor=texture2D(uTile,vec2(v_texture_coord.s,v_texture_coord.t));if(uUseFilter){textureColor=textureColor*uFilterColor;}gl_FragColor=textureColor;}",defines:u.terrain?["TERRAIN"]:""},this),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new Li({gl:i,program:this.program,attributes:[{name:"a_pos",buffer:this.vertexBuffer,stride:20,size:3,type:"FLOAT",offset:0},{name:"a_texture_coord",buffer:this.vertexBuffer,size:2,stride:20,type:"FLOAT",offset:12}]})}},{key:"onChanged",value:function(i,u){var m=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){m.loadTexture(function(){m.parseData(u),m.dataTime=new Date,m.webglLayer.render()})},0))}},{key:"render",value:function(i){var u=i.gl,m=i.projectionMatrix;i=i.viewMatrix;var p=this.getOptions(),y=this.program,v=y.uniforms;y.use(u),this.texture&&(u.activeTexture(u.TEXTURE0),u.uniform1i(v.uTile,0),u.bindTexture(u.TEXTURE_2D,this.texture),u.activeTexture(u.TEXTURE1),u.uniform1i(v.uTerrain,1),u.bindTexture(u.TEXTURE_2D,this.terrainSampler),this.setGLState({cullFace:!1}),y.setUniforms({u_proj_matrix:m,uUseFilter:!!p.filterColor,uFilterColor:this.normizedColor(p.filterColor||"rgba(0, 0, 100, 1.0)"),u_mv_matrix:i}),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,this.index.length,u.UNSIGNED_INT,0)))}},{key:"loadTexture",value:function(i){var u=this,m=this.getOptions();m.tile?m.terrain?wo(this.gl,m.terrain,function(p,y){u.terrainSampler=p,wo(u.gl,m.tile,function(v,M){u.texture=v,i&&i(),u.webglLayer.render()})},{TEXTURE_WRAP_S:"MIRRORED_REPEAT",TEXTURE_WRAP_T:"MIRRORED_REPEAT"}):wo(this.gl,m.tile,function(p,y){u.texture=p,i&&i(),u.webglLayer.render()}):(this.texture=null,i&&i())}},{key:"parseData",value:function(i){var u=this,m=[],p=[];if(i&&i[0]){var y=i[0].geometry.coordinates[0];y=y.map(function(U){return u.normizedPoint(U)}),i=y[0][0];var v=y[0][1],M=y[0][2],R=(y[2][0]-i)/16;y=(y[2][1]-v)/16;for(var k=0;16>=k;k++)for(var _=0;16>=_;_++)if(m.push(i+R*_,v+y*k,M),m.push(_/16,k/16),16>_&&16>k){var T=17*k+_,O=17*(k+1)+_;p.push(T,O+1,T+1),p.push(T,O,O+1)}}this.index=p,this.vertexBuffer.updateData(new Float32Array(m)),this.indexBuffer.updateData(new Uint32Array(p))}}]),A}(ui),ha=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="BoardLayer",i.index=[],u=i.canvas=document.createElement("canvas"),i.ctx=u.getContext("2d"),i.iconHash=new zs,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{unit:"px",scale:1,angle:0,offsetZ:0,padding:[0,0],polygonOffset:[0,0],enableColorMix:!1,mixColor:"#fff",mixAmount:.5}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.texture=null,this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});var m=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"a_offsetZ",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}];m=m.concat(this.getCommonAttributes());var p=[];u.enablePicked&&p.push("PICK"),this.options.enableColorMix&&(this.colorBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),m.push({stride:16,name:"a_color",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0}),p.push("USE_COLOR_MIX")),this.program=new Ur(this.gl,{vertexShader:`precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute float a_offsetZ;attribute vec2 a_size;attribute vec2 a_texture_coord;
#if defined(USE_COLOR_MIX)
attribute vec4 a_color;
#endif
uniform mat4 u_matrix;uniform vec2 u_size;uniform float u_zoom_units;uniform float u_scale;uniform bool u_unit_px;varying vec2 v_texture_coord;varying vec4 v_color;/***\u4E09\u7EF4\u7A7A\u95F4\u5185\uFF0C\u7ED5Z\u8F74\u65CB\u8F6C\u7684\u77E9\u9635\uFF0C\u53F3\u624B\u5750\u6807\u7CFB\u4E0B*[x'][cos0-sin0  0  0]*[y']=[sin0 cos0   0  0]*[z'][0     0     1  0]*[1][0     0     0  1]*/mat3 rotateZ(float angle){float cos0=cos(angle);float sin0=sin(angle);return mat3(cos0,sin0,0.,-sin0,cos0,0.,0.,0.,1.);}vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;float z=coord.z;mat3 mat=rotateZ(a_rotation);vec3 rotated=vec3(size[0],0.0,size[1]);if(corner==1.0){rotated=mat*vec3(-size[0],0.0,size[1]);}else if(corner==2.0){rotated=mat*vec3(size[0],0.0,size[1]);}else if(corner==3.0){rotated=mat*vec3(size[0],0.0,-size[1]);}else{rotated=mat*vec3(-size[0],0.0,-size[1]);}x+=rotated.x;y+=rotated.y;z+=rotated.z;return vec3(x,y,z);}void main(){
#if defined(USE_COLOR_MIX)
v_color=a_color;
#endif
v_texture_coord=a_texture_coord;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=a_offsetZ;gl_Position=u_matrix*vec4(current,1.0);}`,fragmentShader:`precision highp float;varying vec2 v_texture_coord;varying vec4 v_color;uniform sampler2D u_icon;uniform vec4 uSelectedColor;
#if defined(USE_COLOR_MIX)
uniform float u_mix_amount;
#endif
void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}gl_FragColor=textureColor;
#if defined(USE_COLOR_MIX)
gl_FragColor=mix(gl_FragColor,v_color,u_mix_amount);
#endif
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:p},this),this.vertexArray=new Li({gl:i,program:this.program,attributes:m})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){this.gl&&this.processCache(i,u)}},{key:"forceUpdate",value:function(){this.gl&&this.processCache(this.options,this.data)}},{key:"processCache",value:function(i,u){var m=this;this.cachedData=[];for(var p=i.icon,y=i.width,v=i.height,M=i.offsetZ,R=i.angle,k=i.mixColor,_=0;_<u.length;_++){var T=this.normizedPoint(u[_].geometry.coordinates),O=this.getProperty("icon",p,u[_]),U=this.getProperty("width",y,u[_]),G=this.getProperty("height",v,u[_]),X=this.getProperty("angle",R,u[_]),W=this.getProperty("offsetZ",M,u[_]),Y=this.normizedColor(this.getProperty("mixColor",k,u[_]));T&&O&&(this.cachedData.push({point:T,icon:O,width:U,height:G,offsetZ:W,angle:X,mixColor:Y,index:_}),this.iconHash.get(O)||this.iconHash.set(O,O))}u=Ea(this.iconHash.entries()).filter(function(J){return typeof J[1]=="string"}).map(function(J){var ot=ni(J,2)[0];return new vr(function(ut,lt){m.url2canvas(ot,function(wt){m.iconHash.set(ot,wt),ut()})})}),vr.all(u).then(function(J){m.buildSprite(i),m.webglLayer.render()})}},{key:"buildSprite",value:function(i){var u=i.padding,m=this.canvas,p=this.ctx,y=[],v=new zs,M=!0,R=!1,k=void 0;try{for(var _=aa(this.iconHash),T;!(M=(T=_.next()).done);M=!0){var O=ni(T.value,2),U=O[1];if(typeof U!="string"){var G=U.width,X=U.height;y.push({w:G+u[0],h:X+u[0],width:G,height:X,key:O[0],icon:U})}}}catch(W){R=!0,k=W}finally{try{!M&&_.return&&_.return()}finally{if(R)throw k}}for(R=to(y),M=0;M<y.length;M++)k=y[M],v.get(k.key)||v.set(k.key,k);for(M=Qe(R.w),R=Qe(R.h),m.width=M||1,m.height=R||1,p.save(),m=0;m<y.length;m++)k=y[m],p.drawImage(k.icon,k.x+u[0],k.y+u[1],k.width,k.height);p.restore(),this.loadTexture(),this.buildVertex(i,v,M,R)}},{key:"buildVertex",value:function(i,u,m,p){var y=i.enablePicked;i=i.enableColorMix;for(var v=[],M=[],R=[],k=[],_=[],T=0;T<this.cachedData.length;T++){var O=this.cachedData[T],U=O.point,G=O.width,X=O.height,W=O.offsetZ,Y=O.angle,J=O.mixColor,ot=O.index;if(O=u.get(O.icon)){G=G||O.icon.width,X=X||O.icon.height;var ut=ni(U,3);U=ut[0];var lt=ut[1];ut=ut[2];for(var wt=0;4>wt;wt++)v.push(U,lt,ut),v.push(wt),v.push(G,X),v.push(W),v.push(Y*Math.PI/180);G=O.x/m,X=(O.x+O.w)/m,W=(O.y+O.h)/p,O=O.y/p,M.push(G,W,G,O,X,O,X,W),O=4*T,R.push(O,O+2,O+1,O,O+3,O+2),y&&(ot=this.indexToRgb(ot),k.push(ot[0]/255,ot[1]/255,ot[2]/255),k.push(ot[0]/255,ot[1]/255,ot[2]/255),k.push(ot[0]/255,ot[1]/255,ot[2]/255),k.push(ot[0]/255,ot[1]/255,ot[2]/255)),i&&(_.push.apply(_,Fn(J)),_.push.apply(_,Fn(J)),_.push.apply(_,Fn(J)),_.push.apply(_,Fn(J)))}}this.index=R,this.vertexBuffer.updateData(new Float32Array(v)),this.uvBuffer.updateData(new Float32Array(M)),this.indexBuffer.updateData(new Uint32Array(R)),y&&this.pickBuffer.updateData(new Float32Array(k)),i&&this.colorBuffer.updateData(new Float32Array(_))}},{key:"render",value:function(i){if(this.cachedData&&this.cachedData.length&&this.iconHash&&this.texture){var u=i.gl,m=i.matrix,p=this.getOptions(),y=this.program;y.use(u),this.setGLState({blend:!0,blendFunc:Gs(u,p.blend),polygonOffset:p.polygonOffset}),i=ln(this.getCommonUniforms(i),{u_icon:this.texture,u_matrix:m,u_unit_px:p.unit==="px",u_zoom_units:this.map.getZoomUnits(),u_scale:p.scale}),p.enableColorMix&&(i=ln(i,{u_mix_amount:p.mixAmount})),y.setUniforms(i),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,this.index.length,u.UNSIGNED_INT,0))}}},{key:"url2canvas",value:function(i,u){if((typeof i=="undefined"?"undefined":Mn(i))==="object")u(i);else{var m=new Image;m.crossOrigin="anonymous",m.onload=function(){var p=m.width,y=m.height,v=document.createElement("canvas");v.width=p,v.height=y,v.getContext("2d").drawImage(m,0,0,p,y),u(v)},m.onerror=function(){var p=document.createElement("canvas");p.width=20,p.height=40;var y=p.getContext("2d");y.fillStyle="red",y.beginPath(),y.lineTo(0,0),y.lineTo(20,0),y.lineTo(10,40),y.closePath(),y.fill(),u(p)},m.src=i}}},{key:"loadTexture",value:function(){var i=this;this.canvas?wo(this.gl,this.canvas,function(u){i.texture=u}):this.texture=null}}]),A}(ui),ag=function(a){function A(i){fr(this,A);var u=on(this,(A.__proto__||Er(A)).call(this,i));return i=u.getOptions(),u.shapeLayer=new Ve({enablePicked:i.enablePicked}),u.lineLayer=new ou,u.children=[u.shapeLayer,u.lineLayer],u}return tn(A,a),mr(A,[{key:"pick",value:function(i,u){return this.shapeLayer.pick(i,u)}},{key:"onOptionsChanged",value:function(i){this.shapeLayer.setOptions({onClick:function(u){i.onClick&&i.onClick(u)},selectedIndex:i.selectedIndex,selectedColor:i.selectedColor,height:0,polygonOffset:[2,2],depthTest:i.depthTest,depthWrite:i.depthWrite,depthFunc:i.depthFunc,autoSelect:i.autoSelect,color:i.fillColor,opacity:i.fillOpacity,topColor:i.fillColor,useLight:!1,blend:i.blend}),this.lineLayer.setOptions({depthTest:i.depthTest,depthWrite:i.depthWrite,depthFunc:i.depthFunc,dashArray:i.dashArray,color:i.lineColor,width:i.lineWidth,lineJoin:i.lineJoin,blend:i.blend})}},{key:"onDataChanged",value:function(i){this.shapeLayer.setData(i),this.lineLayer.setData(i,{closePath:!0})}},{key:"getDefaultOptions",value:function(){return{enablePicked:!1,selectedIndex:-1,selectedColor:"#ff0000",autoSelect:!0,dashArray:[0,0],lineColor:"rgba(250, 250, 25, 1)",depthTest:!0,depthWrite:!0,depthFunc:"lequal",lineWidth:2,lineJoin:"miter",fillColor:"rgba(25, 25, 250, 1)",fillOpacity:1,blend:"default"}}}]),A}(Vo),Jr=Jr||{},Sf=0,ca=null,Fx=Jr.Scene=function(a,A){this.name=A.name!==void 0?A.name:null,this.nodes=Array(A.nodes.length);for(var i=0,u=A.nodes.length;i<u;i++)this.nodes[i]=a.nodes[A.nodes[i]];this.extensions=A.extensions!==void 0?A.extensions:null,this.extras=A.extras!==void 0?A.extras:null,this.boundingBox=null},bu=Jr.BoundingBox=function(a,A,i){a=a||en.fromValues(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),A=A||en.fromValues(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),i===void 0||i===!0?(this.min=en.clone(a),this.max=en.clone(A)):(this.min=a,this.max=A),this.transform=ur.create()};bu.prototype.updateBoundingBox=function(a){en.min(this.min,this.min,a.min),en.max(this.max,this.max,a.max)},bu.prototype.calculateTransform=function(){this.transform[0]=this.max[0]-this.min[0],this.transform[5]=this.max[1]-this.min[1],this.transform[10]=this.max[2]-this.min[2],this.transform[12]=this.min[0],this.transform[13]=this.min[1],this.transform[14]=this.min[2]},bu.getAABBFromOBB=function(){var a=en.create(),A=en.create(),i=en.create(),u=en.create(),m=en.create();return function(p,y){en.set(a,y[0],y[1],y[2]),en.set(A,y[4],y[5],y[6]),en.set(i,y[8],y[9],y[10]),y=en.fromValues(y[12],y[13],y[14]);var v=en.clone(y);return en.scale(u,a,p.min[0]),en.scale(m,a,p.max[0]),en.min(a,u,m),en.add(y,y,a),en.max(a,u,m),en.add(v,v,a),en.scale(u,A,p.min[1]),en.scale(m,A,p.max[1]),en.min(A,u,m),en.add(y,y,A),en.max(A,u,m),en.add(v,v,A),en.scale(u,i,p.min[2]),en.scale(m,i,p.max[2]),en.min(i,u,m),en.add(y,y,i),en.max(i,u,m),en.add(v,v,i),p=new bu(y,v,!1),p.calculateTransform(),p}}();var i0=Jr.Accessor=function(a,A){this.bufferView=A,this.componentType=a.componentType,this.byteOffset=a.byteOffset!==void 0?a.byteOffset:0,this.byteStride=A.byteStride,this.normalized=a.normalized!==void 0?a.normalized:!1,this.count=a.count,this.type=a.type,this.size=Lf[this.type],this.min=a.min,this.max=a.max,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null};i0.prototype.prepareVertexAttrib=function(a,A){A.vertexAttribPointer(a,this.size,this.componentType,this.normalized,this.byteStride,this.byteOffset),A.enableVertexAttribArray(a)};var Cc=Jr.BufferView=function(a,A){A&&(this.byteLength=a.byteLength,this.byteOffset=a.byteOffset!==void 0?a.byteOffset:0,this.byteStride=a.byteStride!==void 0?a.byteStride:0,this.target=a.target!==void 0?a.target:null,this.data=A.slice(this.byteOffset,this.byteOffset+this.byteLength),this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null,this.buffer=null)};Cc.prototype.createBuffer=function(a){this.buffer=a.createBuffer()},Cc.prototype.bindData=function(a){return this.target?(a.bindBuffer(this.target,this.buffer),a.bufferData(this.target,this.data,a.STATIC_DRAW),a.bindBuffer(this.target,null),!0):!1};var ku=Jr.Camera=function(a){this.name=a.name!==void 0?a.name:null,this.type=a.type,this.othographic=a.othographic===void 0?null:a.othographic,this.perspective=a.perspective===void 0?null:{yfov:a.perspective.yfov,znear:a.perspective.znear,zfar:a.perspective.zfar!==void 0?a.perspective.zfar:null,aspectRatio:a.perspective.aspectRatio!==void 0?a.perspective.aspectRatio:null},this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null},td=Jr.Node=function(a,A){if(this.name=a.name!==void 0?a.name:null,this.nodeID=A,this.camera=a.camera!==void 0?a.camera:null,this.matrix=ur.create(),a.hasOwnProperty("matrix")){for(A=0;16>A;++A)this.matrix[A]=a.matrix[A];this.translation=en.create(),ur.getTranslation(this.translation,this.matrix),this.rotation=dc.create(),ur.getRotation(this.rotation,this.matrix),this.scale=en.create(),ur.getScaling(this.scale,this.matrix)}else this.getTransformMatrixFromTRS(a.translation,a.rotation,a.scale);this.children=a.children||[],this.mesh=a.mesh!==void 0?ca.glTF.meshes[a.mesh]:null,this.skin=a.skin!==void 0?a.skin:null,a.extensions!==void 0&&a.extensions.gl_avatar!==void 0&&ca.enableGLAvatar===!0&&(this.skin=new Ag(ca.glTF,ca.skeletonGltf.skins[ca.skeletonGltf.json.extensions.gl_avatar.skins[a.extensions.gl_avatar.skin.name]],a.extensions.gl_avatar.skin.inverseBindMatrices)),this.weights=a.weights!==void 0?a.weights:null,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null,this.aabb=null,this.bvh=new bu};td.prototype.traverse=function(a,A){A(this,a),a=0;for(var i=this.children.length;a<i;a++)this.children[a].traverse(this,A)},td.prototype.traversePostOrder=function(a,A){for(var i=0,u=this.children.length;i<u;i++)this.children[i].traversePostOrder(this,A);A(this,a)},td.prototype.traverseTwoExecFun=function(a,A,i){A(this,a);for(var u=0,m=this.children.length;u<m;u++)this.children[u].traverseTwoExecFun(this,A,i);i(this,a)};var C1=ur.create();td.prototype.getTransformMatrixFromTRS=function(a,A,i){this.translation=a!==void 0?en.fromValues(a[0],a[1],a[2]):en.fromValues(0,0,0),this.rotation=A!==void 0?Si.fromValues(A[0],A[1],A[2],A[3]):Si.fromValues(0,0,0,1),this.scale=i!==void 0?en.fromValues(i[0],i[1],i[2]):en.fromValues(1,1,1),this.updateMatrixFromTRS()},td.prototype.updateMatrixFromTRS=function(){ur.fromRotationTranslation(C1,this.rotation,this.translation),ur.scale(this.matrix,C1,this.scale)};var Mc=Jr.Mesh=function(a,A){this.meshID=A,this.name=a.name!==void 0?a.name:null,this.primitives=[],this.boundingBox=null,A=0;for(var i=a.primitives.length;A<i;++A){var u=a.primitives[A];u=new Om(ca.glTF,u),this.primitives.push(u),u.boundingBox&&(this.boundingBox||(this.boundingBox=new bu),this.boundingBox.updateBoundingBox(u.boundingBox))}this.boundingBox&&this.boundingBox.calculateTransform(),this.weights=a.weights!==void 0?a.weights:null,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null},Om=Jr.Primitive=function(a,A){this.attributes=A.attributes,this.indices=A.indices!==void 0?A.indices:null;var i;if(A.extensions!==void 0&&A.extensions.gl_avatar!==void 0&&ca.enableGLAvatar===!0&&A.extensions.gl_avatar.attributes)for(i in A.extensions.gl_avatar.attributes)this.attributes[i]=A.extensions.gl_avatar.attributes[i];this.indices!==null?(this.indicesComponentType=a.json.accessors[this.indices].componentType,this.indicesLength=a.json.accessors[this.indices].count,this.indicesOffset=a.json.accessors[this.indices].byteOffset||0):(this.drawArraysCount=a.json.accessors[this.attributes.POSITION].count,this.drawArraysOffset=a.json.accessors[this.attributes.POSITION].byteOffset||0);for(i in this.attributes)this.attributes[i]=a.accessors[this.attributes[i]];this.material=A.material!==void 0?a.materials[A.material]:null,this.mode=A.mode!==void 0?A.mode:4,this.targets=A.targets,this.extensions=A.extensions!==void 0?A.extensions:null,this.extras=A.extras!==void 0?A.extras:null,this.boundingBox=this.shader=this.indexBuffer=this.vertexBuffer=this.vertexArray=null,this.attributes.POSITION!==void 0&&(a=this.attributes.POSITION,a.max&&a.type==="VEC3"&&(this.boundingBox=new bu(en.fromValues(a.min[0],a.min[1],a.min[2]),en.fromValues(a.max[0],a.max[1],a.max[2]),!1),this.boundingBox.calculateTransform()))},gA=Jr.Texture=function(a){this.name=a.name!==void 0?a.name:null,this.sampler=a.sampler!==void 0?ca.glTF.samplers[a.sampler]:null,this.source=a.source!==void 0?ca.glTF.images[a.source]:null,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null,this.texture=null};gA.prototype.createTexture=function(a){this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.source),a.generateMipmap(a.TEXTURE_2D),a.bindTexture(a.TEXTURE_2D,null)};var o0=Jr.Sampler=function(a){this.name=a.name!==void 0?a.name:null,this.magFilter=a.magFilter!==void 0?a.magFilter:null,this.minFilter=a.minFilter!==void 0?a.minFilter:null,this.wrapS=a.wrapS!==void 0?a.wrapS:10497,this.wrapT=a.wrapT!==void 0?a.wrapT:10497,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null,this.sampler=null};o0.prototype.createSampler=function(a){this.sampler=a.createSampler(),this.minFilter?a.samplerParameteri(this.sampler,a.TEXTURE_MIN_FILTER,this.minFilter):a.samplerParameteri(this.sampler,a.TEXTURE_MIN_FILTER,a.NEAREST_MIPMAP_LINEAR),this.magFilter?a.samplerParameteri(this.sampler,a.TEXTURE_MAG_FILTER,this.magFilter):a.samplerParameteri(this.sampler,a.TEXTURE_MAG_FILTER,a.LINEAR),a.samplerParameteri(this.sampler,a.TEXTURE_WRAP_S,this.wrapS),a.samplerParameteri(this.sampler,a.TEXTURE_WRAP_T,this.wrapT)};var Hm=Jr.TextureInfo=function(a){this.index=a.index,this.texCoord=a.texCoord!==void 0?a.texCoord:0,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null},M1=Jr.PbrMetallicRoughness=function(a){this.baseColorFactor=a.baseColorFactor!==void 0?a.baseColorFactor:[1,1,1,1],this.baseColorTexture=a.baseColorTexture!==void 0?new Hm(a.baseColorTexture):null,this.metallicFactor=a.metallicFactor!==void 0?a.metallicFactor:1,this.roughnessFactor=a.roughnessFactor!==void 0?a.roughnessFactor:1,this.metallicRoughnessTexture=a.metallicRoughnessTexture!==void 0?new Hm(a.metallicRoughnessTexture):null,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null},_1=Jr.NormalTextureInfo=function(a){this.index=a.index,this.texCoord=a.texCoord!==void 0?a.texCoord:0,this.scale=a.scale!==void 0?a.scale:1,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null},ed=Jr.OcclusionTextureInfo=function(a){this.index=a.index,this.texCoord=a.texCoord!==void 0?a.texCoord:0,this.strength=a.strength!==void 0?a.strength:1,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null},vh=Jr.Material=function(a){this.name=a.name!==void 0?a.name:null,this.pbrMetallicRoughness=a.pbrMetallicRoughness!==void 0?new M1(a.pbrMetallicRoughness):new M1({baseColorFactor:[1,1,1,1],metallicFactor:1,metallicRoughnessTexture:1}),this.normalTexture=a.normalTexture!==void 0?new _1(a.normalTexture):null,this.occlusionTexture=a.occlusionTexture!==void 0?new ed(a.occlusionTexture):null,this.emissiveTexture=a.emissiveTexture!==void 0?new Hm(a.emissiveTexture):null,this.emissiveFactor=a.emissiveFactor!==void 0?a.emissiveFactor:[0,0,0],this.alphaMode=a.alphaMode!==void 0?a.alphaMode:"OPAQUE",this.alphaCutoff=a.alphaCutoff!==void 0?a.alphaCutoff:.5,this.doubleSided=a.doubleSided||!1,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null},Nm=Jr.Skin=function(a,A,i){this.name=A.name!==void 0?A.name:null,this.skinID=i,this.joints=Array(A.joints.length);var u;for(i=0,u=this.joints.length;i<u;i++)this.joints[i]=a.nodes[A.joints[i]];if(this.skeleton=A.skeleton!==void 0?a.nodes[A.skeleton]:null,this.inverseBindMatrices=A.inverseBindMatrices!==void 0?a.accessors[A.inverseBindMatrices]:null,this.extensions=A.extensions!==void 0?A.extensions:null,this.extras=A.extras!==void 0?A.extras:null,this.uniformBlockID=Sf++,this.inverseBindMatrices)for(this.inverseBindMatricesData=ga(this.inverseBindMatrices),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(1040),i=0,u=this.inverseBindMatricesData.length;i<u;i+=16)this.inverseBindMatrix.push(ur.fromValues(this.inverseBindMatricesData[i],this.inverseBindMatricesData[i+1],this.inverseBindMatricesData[i+2],this.inverseBindMatricesData[i+3],this.inverseBindMatricesData[i+4],this.inverseBindMatricesData[i+5],this.inverseBindMatricesData[i+6],this.inverseBindMatricesData[i+7],this.inverseBindMatricesData[i+8],this.inverseBindMatricesData[i+9],this.inverseBindMatricesData[i+10],this.inverseBindMatricesData[i+11],this.inverseBindMatricesData[i+12],this.inverseBindMatricesData[i+13],this.inverseBindMatricesData[i+14],this.inverseBindMatricesData[i+15]))},Ag=Jr.SkinLink=function(a,A,i){if(this.isLink=!0,a.skins||(a.skins=[]),a.skins.push(this),this.name=A.name,this.skinID=a.skins.length-1,this.joints=A.joints,this.skeleton=A.skeleton,this.inverseBindMatrices=i!==void 0?a.accessors[i]:null,this.uniformBlockID=Sf++,this.inverseBindMatrices)for(this.inverseBindMatricesData=ga(this.inverseBindMatrices),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(1040),a=0,A=this.inverseBindMatricesData.length;a<A;a+=16)this.inverseBindMatrix.push(ur.fromValues(this.inverseBindMatricesData[a],this.inverseBindMatricesData[a+1],this.inverseBindMatricesData[a+2],this.inverseBindMatricesData[a+3],this.inverseBindMatricesData[a+4],this.inverseBindMatricesData[a+5],this.inverseBindMatricesData[a+6],this.inverseBindMatricesData[a+7],this.inverseBindMatricesData[a+8],this.inverseBindMatricesData[a+9],this.inverseBindMatricesData[a+10],this.inverseBindMatricesData[a+11],this.inverseBindMatricesData[a+12],this.inverseBindMatricesData[a+13],this.inverseBindMatricesData[a+14],this.inverseBindMatricesData[a+15]))},Rx=Jr.Target=function(a){this.nodeID=a.node!==void 0?a.node:null,this.path=a.path,this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null},Px=Jr.Channel=function(a,A){this.sampler=A.samplers[a.sampler],this.target=new Rx(a.target),this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null},s0=Jr.AnimationSampler=function(a,A){this.input=a.accessors[A.input],this.output=a.accessors[A.output],this.inputTypedArray=ga(this.input),this.outputTypedArray=ga(this.output),this.interpolation=A.interpolation!==void 0?A.interpolation:"LINEAR",this.extensions=A.extensions!==void 0?A.extensions:null,this.extras=A.extras!==void 0?A.extras:null,this.curIdx=0,this.curValue=Si.create(),this.endT=this.inputTypedArray[this.inputTypedArray.length-1],this.inputMax=this.endT-this.inputTypedArray[0]},a0=Si.create(),A0=Si.create();s0.prototype.getValue=function(a){a>this.endT&&(a-=this.inputMax*Math.ceil((a-this.endT)/this.inputMax),this.curIdx=0);for(var A=this.inputTypedArray.length;this.curIdx<=A-2&&a>=this.inputTypedArray[this.curIdx+1];)this.curIdx++;this.curIdx>=A-1&&(a-=this.inputMax,this.curIdx=0),A=Lf[this.output.type];var i=A===4?dc.slerp:Si.lerp,u=this.curIdx,m=u*A,p=m+A;for(a=Math.max(0,a-this.inputTypedArray[u])/(this.inputTypedArray[u+1]-this.inputTypedArray[u]),u=0;u<A;u++)a0[u]=this.outputTypedArray[m+u],A0[u]=this.outputTypedArray[p+u];switch(this.interpolation){case"LINEAR":i(this.curValue,a0,A0,a)}};var Ux=Jr.Animation=function(a,A){this.name=A.name!==void 0?A.name:null;var i;this.samplers=[];var u=0;for(i=A.samplers.length;u<i;u++)this.samplers[u]=new s0(a,A.samplers[u]);for(this.channels=[],u=0,i=A.channels.length;u<i;u++)this.channels[u]=new Px(A.channels[u],this);this.extensions=A.extensions!==void 0?A.extensions:null,this.extras=A.extras!==void 0?A.extras:null},Dx=Jr.glTFModel=function(a){this.json=a,this.defaultScene=a.scene!==void 0?a.scene:0,this.version=Number(a.asset.version),a.accessors&&(this.accessors=Array(a.accessors.length)),a.bufferViews&&(this.bufferViews=Array(a.bufferViews.length)),a.scenes&&(this.scenes=Array(a.scenes.length)),a.nodes&&(this.nodes=Array(a.nodes.length)),a.meshes&&(this.meshes=Array(a.meshes.length)),a.materials&&(this.materials=Array(a.materials.length)),a.textures&&(this.textures=Array(a.textures.length)),a.samplers&&(this.samplers=Array(a.samplers.length)),a.images&&(this.images=Array(a.images.length)),a.skins&&(this.skins=Array(a.skins.length)),a.animations&&(this.animations=Array(a.animations.length)),a.cameras&&(this.cameras=Array(a.cameras.length)),this.extensions=a.extensions!==void 0?a.extensions:null,this.extras=a.extras!==void 0?a.extras:null},mA=Jr.glTFLoader=function(a){this._init(),this.glTF=null,this.enableGLAvatar=!1,this.linkSkeletonGltf=null};mA.prototype._init=function(){this._loadDone=!1,this._bufferLoaded=this._bufferRequested=0,this._buffers=[],this._bufferTasks={},this._finishedPendingTasks=this._pendingTasks=this._imageLoaded=this._imageRequested=this._shaderLoaded=this._shaderRequested=0,this.onload=null,ca=this},mA.prototype._checkComplete=function(){this._bufferRequested==this._bufferLoaded&&this._imageRequested==this._imageLoaded&&(this._loadDone=!0),this._loadDone&&this._pendingTasks==this._finishedPendingTasks&&(this._postprocess(),this.onload(this.glTF))},mA.prototype.loadGLTF_GL_Avatar_Skin=function(a,A,i){this.enableGLAvatar=!0,this.skeletonGltf=A,this.loadGLTF(a,i)},mA.prototype.loadGLTF=function(a,A){this._init(),this.onload=A||function(u){},this.baseUri=np(a);var i=this;jl(a,function(u){u=JSON.parse(u),i.glTF=new Dx(u);var m=function(M,R){if(i._buffers[R]=M,i._bufferLoaded++,i._bufferTasks[R]){var k,_=0;for(k=i._bufferTasks[R].length;_<k;++_)i._bufferTasks[R][_](M)}i._checkComplete()};if(u.buffers)for(var p in u.buffers){i._bufferRequested++;var y=u.buffers[p].uri;y.indexOf("base64")===-1&&(y=i.baseUri+y),qu(y,m,p)}p=function(M,R){i._imageLoaded++,i.glTF.images[R]=M,i._checkComplete()};var v;if(u.images)for(v in u.images)i._imageRequested++,Oa(i.baseUri+u.images[v].uri,v,p);i._checkComplete()})},mA.prototype._postprocess=function(){function a(k,_){var T=M[k.nodeID];_!==null?ur.mul(T,M[_.nodeID],k.matrix):ur.copy(T,k.matrix)}function A(k,_){var T=M[k.nodeID];_=_!==null?_.bvh:R.boundingBox,k.mesh&&(m=k.mesh,m.boundingBox&&(k.aabb=bu.getAABBFromOBB(m.boundingBox,T),k.children.length===0&&(en.copy(k.bvh.min,k.aabb.min),en.copy(k.bvh.max,k.aabb.max)))),en.min(_.min,_.min,k.bvh.min),en.max(_.max,_.max,k.bvh.max)}ca=this;var i,u,m;if(this.glTF.cameras){var p=0;for(i=this.glTF.cameras.length;p<i;p++)this.glTF.cameras[p]=new ku(this.glTF.json.cameras[p])}if(this.glTF.bufferViews)for(p=0,i=this.glTF.bufferViews.length;p<i;p++)this.glTF.bufferViews[p]=new Cc(this.glTF.json.bufferViews[p],this._buffers[this.glTF.json.bufferViews[p].buffer]);if(this.glTF.accessors)for(p=0,i=this.glTF.accessors.length;p<i;p++)this.glTF.accessors[p]=new i0(this.glTF.json.accessors[p],this.glTF.bufferViews[this.glTF.json.accessors[p].bufferView]);if(this.glTF.materials)for(p=0,i=this.glTF.materials.length;p<i;p++)this.glTF.materials[p]=new vh(this.glTF.json.materials[p]);if(this.glTF.samplers)for(p=0,i=this.glTF.samplers.length;p<i;p++)this.glTF.samplers[p]=new o0(this.glTF.json.samplers[p]);if(this.glTF.textures)for(p=0,i=this.glTF.textures.length;p<i;p++)this.glTF.textures[p]=new gA(this.glTF.json.textures[p]);for(p=0,i=this.glTF.meshes.length;p<i;p++)this.glTF.meshes[p]=new Mc(this.glTF.json.meshes[p],p);for(p=0,i=this.glTF.nodes.length;p<i;p++)this.glTF.nodes[p]=new td(this.glTF.json.nodes[p],p);for(p=0,i=this.glTF.nodes.length;p<i;p++){var y=this.glTF.nodes[p],v=0;for(u=y.children.length;v<u;v++)y.children[v]=this.glTF.nodes[y.children[v]]}var M=Array(this.glTF.nodes.length);for(p=0,i=M.length;p<i;p++)M[p]=ur.create();for(p=0,i=this.glTF.scenes.length;p<i;p++){var R=this.glTF.scenes[p]=new Fx(this.glTF,this.glTF.json.scenes[p]);for(R.boundingBox=new bu,v=0,u=R.nodes.length;v<u;v++)y=R.nodes[v],y.traverseTwoExecFun(null,a,A);R.boundingBox.calculateTransform()}for(v=0,u=this.glTF.nodes.length;v<u;v++)y=this.glTF.nodes[v],y.bvh!==null&&y.bvh.calculateTransform();if(this.glTF.animations)for(p=0,i=this.glTF.animations.length;p<i;p++)this.glTF.animations[p]=new Ux(this.glTF,this.glTF.json.animations[p]);if(this.glTF.json.skins)for(p=0,i=this.glTF.skins.length;p<i;p++)for(this.glTF.skins[p]=new Nm(this.glTF,this.glTF.json.skins[p],p),y=this.glTF.skins[p].joints,v=0,u=y.length;v<u;v++)y[v].jointID=v;for(p=0,i=this.glTF.nodes.length;p<i;p++)y=this.glTF.nodes[p],y.skin!==null&&typeof y.skin=="number"&&(y.skin=this.glTF.skins[y.skin])};var Lf={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zm=function(a){function A(i,u){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i,u))}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{scale:1}}},{key:"initialize",value:function(i){var u=this;this.gl=i;var m=this.getOptions();this.gltfObj=ip({gl:i,options:m}),new mA().loadGLTF(m.url,function(p){u.gltfObj.setupScene(p),u.webglLayer.render()})}},{key:"onChanged",value:function(i,u){}},{key:"render",value:function(i){var u=i.gl;i=i.matrix;var m=this.getData(),p=this.getOptions(),y=p.scale,v=[y,y,y];for(p.unit==="px"&&this.map&&(v=this.map.getZoomUnits(),v=[y*v,y*v,y*v]),y=0;y<m.length;y++){var M=m[y].geometry.coordinates;p=ur.create();var R=ur.create();M=this.normizedPoint(M),ur.identity(p),ur.translate(p,p,[M[0],M[1],M[2]]),ur.rotateX(p,p,Math.PI/2),ur.rotateY(p,p,(m[y].angle||0)*Math.PI/180),ur.scale(p,p,v),ur.mul(R,i,p),this.gltfObj.render({gl:u,matrix:R})}}}]),A}(ui),Gu=Gu||{};(function(){function a(i,u,m){return m=i.createShader(m),i.shaderSource(m,u),i.compileShader(m),m}Gu.getShaderSource=function(i){return document.getElementById(i).textContent.replace(/^\s+|\s+$/g,"")},Gu.createProgram=function(i,u,m){var p=i.createProgram();return u=a(i,u,i.VERTEX_SHADER),m=a(i,m,i.FRAGMENT_SHADER),i.attachShader(p,u),i.deleteShader(u),i.attachShader(p,m),i.deleteShader(m),i.linkProgram(p),i.getProgramInfoLog(p),i.getShaderInfoLog(u),i.getShaderInfoLog(m),p};var A=Gu.loadImage=function(i,u){var m=new Image;return m.crossOrigin="Anonymous",m.src=i,m.onload=u,m};Gu.loadImages=function(i,u){function m(){0>=--y&&u(p)}for(var p=[],y=i.length,v=0;v<y;++v)p.push(A(i[v],m))}})();var rd=function(a){function A(i){fr(this,A);var u=on(this,(A.__proto__||Er(A)).call(this,i));return i=u.getOptions(),u.gltfLayer=new zm({url:i.url,scale:i.scale}),u.children=[u.gltfLayer],u.autoUpdate=!0,u.index=[],u.newData=[],u.isStarted=i.autoPlay!==!1,u}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{url:"https://mapv-website.bj.bcebos.com/gl/examples/model/car.gltf",scale:1,step:1,defaultAngle:90}}},{key:"onOptionsChanged",value:function(i){this.gltfLayer.setOptions({})}},{key:"onDataChanged",value:function(i){var u=this;this.index=[],this.newData=[];for(var m=0;m<i.length;m++){this.index.push(0);var p=i[m].geometry.coordinates;i[m].geometry.type==="LineString"?this.newData.push(this._addPath(p)):p.forEach(function(y){u.newData.push(u._addPath(y))})}this.updatePoints()}},{key:"lnglatToMercator",value:function(i,u){return u=u*Math.PI/180,u=31890685e-1*Math.log((1+Math.sin(u))/(1-Math.sin(u))),[parseFloat((i*Math.PI/180*6378137).toFixed(2)),parseFloat(u.toFixed(2))]}},{key:"getDeg",value:function(i,u){-180<i[0]&&180>i[0]&&(i=this.lnglatToMercator(i[0],i[1]),u=this.lnglatToMercator(u[0],u[1]));var m=180*Math.atan((u[1]-i[1])/(u[0]-i[0]))/Math.PI;return u[0]>i[0]&&(m-=180),m}},{key:"getPoint",value:function(i,u,m){return[i[0]+(u[0]-i[0])*m,i[1]+(u[1]-i[1])*m,i[2]&&u[2]?i[2]+(u[2]-i[2])*m:0]}},{key:"updatePoints",value:function(){for(var i=this.getOptions(),u=this.newData,m=[],p=0;p<u.length;p++){for(var y=u[p],v=Math.floor(this.index[p]),M=v+1;y[M]&&y[M][0]===y[v][0]&&y[M][1]===y[v][1];)M++;M>=y.length-1&&(M=--v),M=this.getDeg(y[v],y[M]),m.push({geometry:{type:"Point",coordinates:this.getPoint(y[v],y[v+1],this.index[p]%1)},angle:M-i.defaultAngle})}this.pointData=m,this.gltfLayer.setData(m,{autoRender:!1})}},{key:"getCurrentPoint",value:function(){return this.pointData}},{key:"getDistance",value:function(i,u){var m=i[1]*Math.PI/180,p=u[1]*Math.PI/180;return i=2*Math.asin(Math.sqrt(Math.pow(Math.sin((m-p)/2),2)+Math.cos(m)*Math.cos(p)*Math.pow(Math.sin((i[0]*Math.PI/180-u[0]*Math.PI/180)/2),2))),i=Math.round(6378137e4*i)/1e4}},{key:"_addPath",value:function(i){for(var u=i.length,m=0,p=[],y=[],v=1;v<u;v++){var M=this.getDistance(i[v-1],i[v]);p.push(M),m+=M}for(M=[0],v=1;v<u;v++){var R=(p[v-1]/m).toFixed(2);M[v]=M[v-1]+parseFloat(R,10),y=y.concat(this._getPath(i[v-1],i[v],1e3*R))}return this._pathPercents=M,y}},{key:"_getPath",value:function(i,u,m){if(m===0)return[i];for(var p=[],y=0;y<=m;y++)p.push([(u[0]-i[0])/m*y+i[0],(u[1]-i[1])/m*y+i[1],u[2]&&i[2]?(u[2]-i[2])/m*y+i[2]:0]);return p}},{key:"start",value:function(){this.isStarted=!0}},{key:"stop",value:function(){this.isStarted=!1}},{key:"render",value:function(i){if(Ka(A.prototype.__proto__||Er(A.prototype),"render",this).call(this,i),i=this.getOptions(),this.isStarted)for(var u=this.newData,m=0;m<this.index.length;m++)this.index[m]+=i.step,this.index[m]>u[m].length-2&&(this.index[m]=0);this.updatePoints()}}]),A}(Vo),nd=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="BoardTextLayer",u=i.canvas=document.createElement("canvas"),u=i.ctx=u.getContext("2d"),u.textAlign="start",u.textBaseline="top",i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,collides:!0,unit:"px",angle:0,translateX:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],shadow:{},maxHeightLine:20,lineBreak:`
`}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new Ur(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uUnitPx;uniform float zoomUnits;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/mat3 rotateZ(float angle){float cos0=cos(angle);float sin0=sin(angle);return mat3(cos0,sin0,0.,-sin0,cos0,0.,0.,0.,1.);}vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;float z=coord.z;mat3 mat=rotateZ(rotation);vec3 rotated=vec3(size[0],0.0,size[1]);if(corner==1.0){rotated=mat*vec3(-size[0],0.0,size[1]);}else if(corner==2.0){rotated=mat*vec3(size[0],0.0,size[1]);}else if(corner==3.0){rotated=mat*vec3(size[0],0.0,-size[1]);}else{rotated=mat*vec3(-size[0],0.0,-size[1]);}x+=rotated.x;y+=rotated.y;z+=rotated.z;return vec3(x,y,z);}void main(){vTextCoord=aTextCoord;vec2 pixelOffset=offset;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;pixelOffset*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);current.z+=zIndex;gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y-pixelOffset[1],current.z,1.0);}",fragmentShader:`precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){vec4 textureColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));if(textureColor.a<=0.1&&uIsPickRender==false){discard;}gl_FragColor=textureColor;
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:u.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){this.gl&&this.processCache(i,u)}},{key:"processCache",value:function(i,u){this.cachedData=[];for(var m=0;m<u.length;m++){var p=this.normizedPoint(u[m].geometry.coordinates),y=u[m].text;"properties"in u[m]&&"text"in u[m].properties&&(y=u[m].properties.text);var v=this.getProperty("angle",i.angle,u[m]),M=this.getProperty("color",i.color,u[m]),R=this.getProperty("maxHeightLine",i.maxHeightLine,u[m]);p&&y!==void 0&&this.cachedData.push({point:p,text:y,angle:v,color:M,maxHeightLine:R,index:m})}}},{key:"render",value:function(i){if(this.cachedData&&this.cachedData.length&&this.map){var u=i.gl,m=i.matrix,p=this.getOptions(),y=this.program;y.use(u),this.throttleUpdate(i),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:Gs(u,p.blend),polygonOffset:p.polygonOffset,depthTest:p.depthTest,depthMask:p.depthWrite});var v=this.map.getZoomUnits();y.setUniforms(ln(this.getCommonUniforms(i),{matrix:m,textureImage:this.texture,offset:p.offset,zoomUnits:v,zIndex:p.zIndex,uUnitPx:p.unit==="px"})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,this.index.length,u.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(i){this.updateText(i)}},{key:"updateText",value:function(i){var u=i.gl,m=i.matrix,p=this.getOptions();i=p.fontSize;var y=p.fontFamily,v=p.translateX,M=p.padding,R=p.margin,k=p.collides,_=p.enablePicked,T=p.shadow;p=p.lineBreak;var O=u.canvas.width/window.devicePixelRatio,U=u.canvas.height/window.devicePixelRatio,G=this.canvas,X=this.ctx;X.save(),X.scale(window.devicePixelRatio,window.devicePixelRatio),X.textBaseline="top",X.font="normal bold 20px "+y;var W=new Hs;u=[];for(var Y=0;Y<this.cachedData.length;Y++){var J=this.cachedData[Y],ot=J.point,ut=J.text,lt=J.angle,wt=J.index,Qt=J.color;J=J.maxHeightLine;var zt=ni(ot,3),ne=Si.clone([zt[0],zt[1],zt[2],1]);Si.transformMat4(ne,ne,m),Si.scale(ne,ne,1/ne[3]),zt=(ne[0]+1)/2*O,ne=(-ne[1]+1)/2*U;var pe=X.measureText(ut),be=ut.split(p),Ie=be.map(function(Ce){return X.measureText(Ce).width});Ie=Math.max.apply(Math,Fn(Ie));for(var hr=20,Qr=0;Qr<be.length-1;Qr++)hr+=J;if(be=hr,pe=Math.min(pe.width,Ie)+1,pe+=2*M[0]+v,be+=2*M[1],hr=pe+R[0],Ie=be+R[1],zt-=hr/2,ne-=Ie/2,hr=zt+hr,Ie=ne+Ie,!(0>hr||0>Ie||zt>O||ne>U)){if(k){if(zt={minX:zt,maxX:hr,minY:ne,maxY:Ie},W.collides(zt))continue;W.insert(zt)}u.push({w:pe,h:be,point:ot,text:ut,color:Qt,angle:lt,maxHeightLine:J,dataIndex:wt})}}for(X.restore(),m=[],R=[],k=[],O=[],W=to(u),U=W.w,W=W.h,0>=U&&(U=1),0>=W&&(W=1),G.width=U*window.devicePixelRatio,G.height=W*window.devicePixelRatio,X.save(),X.scale(window.devicePixelRatio,window.devicePixelRatio),X.textBaseline="top",X.font="normal bold 20px "+y,X.shadowColor=T&&T.color,X.shadowOffsetX=T&&T.offsetX,X.shadowOffsetY=T&&T.offsetY,X.shadowBlur=T&&T.blur,y=0,T=u.length;y<T;++y){for(G=u[y],X.fillStyle=G.color,Vs(X,G.text,G.x+M[0]+v,G.y+M[1],G.maxHeightLine,p),ut=ni(G.point,3),Y=ut[0],ot=ut[1],ut=ut[2],lt=0;4>lt;lt++)m.push(Y,ot,ut),m.push(lt),m.push(G.w,G.h),m.push(i/20,G.angle*Math.PI/180);Y=G.x/U,ot=(G.x+G.w)/U,ut=(G.y+G.h)/W,lt=G.y/W,R.push(Y,ut,Y,lt,ot,lt,ot,ut),Y=4*y,k.push(Y,Y+2,Y+1,Y,Y+3,Y+2),_&&(G=this.indexToRgb(G.dataIndex),O.push(G[0]/255,G[1]/255,G[2]/255),O.push(G[0]/255,G[1]/255,G[2]/255),O.push(G[0]/255,G[1]/255,G[2]/255),O.push(G[0]/255,G[1]/255,G[2]/255))}X.restore(),this.loadTexture(),this.index=k,this.vertexBuffer.updateData(new Float32Array(m)),this.uvBuffer.updateData(new Float32Array(R)),this.indexBuffer.updateData(new Uint32Array(k)),_&&this.pickBuffer.updateData(new Float32Array(O))}},{key:"loadTexture",value:function(){var i=this;this.canvas?wo(this.gl,this.canvas,function(u){i.texture=u},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),A}(ui);typeof CanvasRenderingContext2D.prototype.roundRect!="function"&&(CanvasRenderingContext2D.prototype.roundRect=function(a,A,i,u,m){return i<2*m&&(m=i/2),u<2*m&&(m=u/2),this.beginPath(),this.moveTo(a+m,A),this.arcTo(a+i,A,a+i,A+u,m),this.arcTo(a+i,A+u,a,A+u,m),this.arcTo(a,A+u,a,A,m),this.arcTo(a,A,a+i,A,m),this.closePath(),this});var _c=function(a){function A(i){fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.name="LabelLayer",i.pickedIndex=null;var u=i.canvas=document.createElement("canvas");return i.ctx=u.getContext("2d"),i.arrowHeight=8,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,textColor:"#0f0",borderColor:"#f00",backgroundColor:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,lineHeight:20,textAlign:"left",collides:!1,offset:[0,0],padding:[2,2],polygonOffset:[0,0],borderRadius:5,borderWidth:1,stroke:{color:"#fff",width:0}}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new Ur(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x;y+=size.y;}else if(corner==2.0){x+=size.x;y+=size.y;}else if(corner==3.0){x+=size.x;y+=-size.y;}else{x+=-size.x;y+=-size.y;}return vec3(x,y+size.y,coord.z);}void main(){vTextCoord=aTextCoord;vec2 pixelOffset=offset*zoomUnits;vec4 projection=matrix*vec4(position.x+pixelOffset[0],position.y-pixelOffset[1],position.z+zIndex,1.0);vec3 screen=projection.xyz/projection.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio;vec3 current=transformCoord(screen,halfSize,corner);gl_Position=vec4(current,1.0);}",fragmentShader:"precision highp float;uniform sampler2D textureImage;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));}",defines:u.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=[{name:"position",buffer:this.vertexBuffer,size:3,stride:24,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:24,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:24,type:"FLOAT",offset:16},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){this.gl&&this.processCache(i,u)}},{key:"processCache",value:function(i,u){for(this.cachedData=[],this.pickedIndex=null,i=0;i<u.length;i++){var m=u[i],p=this.normizedPoint(m.geometry.coordinates);p&&this.cachedData.push({point:p,item:m,index:i})}}},{key:"setPickedIndex",value:function(i,u){var m=this;u!=="onMousemove"?0<=i&&(this.pickedIndex=i,setTimeout(function(){m.webglLayer.render()})):this.pickedIndex=i}},{key:"render",value:function(i){if(this.cachedData&&this.cachedData.length&&this.map){var u=i.gl,m=i.matrix,p=this.getOptions(),y=this.program;y.use(u),this.updateText(i),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA],polygonOffset:p.polygonOffset,depthTest:p.depthTest,depthMask:p.depthWrite});var v=this.map.getZoomUnits();i=ln(this.getCommonUniforms(i),{matrix:m,devicePixelRatio:window.devicePixelRatio,textureImage:this.texture,offset:p.offset,zoomUnits:v,zIndex:p.zIndex}),delete i.uSelectedColor,y.setUniforms(i),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,this.index.length,u.UNSIGNED_INT,0))}}},{key:"updateText",value:function(i){var u=this,m=i.gl,p=i.matrix,y=this.getOptions().enablePicked;i=this.canvas;var v=this.ctx;m=this.createMapbox(v,m,p),p=to(m);var M=p.w,R=p.h;0>=M&&(M=1),0>=R&&(R=1),i.width=M*window.devicePixelRatio,i.height=R*window.devicePixelRatio;var k=[],_=[],T=[],O=[];m.forEach(function(U,G){u.drawItem(v,U);var X=ni(U.point,3),W=X[0],Y=X[1];X=X[2];for(var J=0;4>J;J++)k.push(W,Y,X),k.push(J),k.push(U.w,U.h);W=U.x/M,Y=(U.x+U.w)/M,X=(U.y+U.h)/R,J=U.y/R,_.push(W,X,W,J,Y,J,Y,X),G*=4,T.push(G,G+2,G+1,G,G+3,G+2),y&&(U=u.indexToRgb(U.dataIndex),O.push(U[0]/255,U[1]/255,U[2]/255),O.push(U[0]/255,U[1]/255,U[2]/255),O.push(U[0]/255,U[1]/255,U[2]/255),O.push(U[0]/255,U[1]/255,U[2]/255))}),this.loadTexture(),this.index=T,this.vertexBuffer.updateData(new Float32Array(k)),this.uvBuffer.updateData(new Float32Array(_)),this.indexBuffer.updateData(new Uint32Array(T)),y&&this.pickBuffer.updateData(new Float32Array(O))}},{key:"createMapbox",value:function(i,u,m){function p(G){var X=G.point,W=G.item;G=G.index;var Y=ni(X,3);Y=Si.clone([Y[0],Y[1],Y[2],1]),Si.transformMat4(Y,Y,m),Si.scale(Y,Y,1/Y[3]);var J=(Y[0]+1)/2*_,ot=(-Y[1]+1)/2*T;Y=this.computeTextWH(W,i,M,k);var ut=ni(Y,2);Y=ut[0],ut=ut[1],J-=Y/2,ot-=ut/2;var lt=J+Y,wt=ot+ut;if(!(0>lt||0>wt||J>_||ot>T)){if(R){if(J={minX:J,maxX:lt,minY:ot,maxY:wt},O.collides(J))return;O.insert(J)}U.push({w:Y,h:ut,point:X,item:W,dataIndex:G})}}var y=this,v=this.getOptions(),M=v.padding,R=v.collides,k=v.fontSize,_=u.canvas.width/window.devicePixelRatio,T=u.canvas.height/window.devicePixelRatio,O=new Hs,U=[];return this.cachedData[this.pickedIndex]&&p.bind(this)(this.cachedData[this.pickedIndex]),this.cachedData.forEach(function(G){y.pickedIndex!==G.index&&p.bind(y)(G)}),U}},{key:"computeTextWH",value:function(i,u){var m=this.getOptions(),p=m.padding,y=m.fontSize,v=m.fontFamily,M=m.lineHeight;return m=m.borderWidth,u.save(),u.scale(window.devicePixelRatio,window.devicePixelRatio),u.font=y+"px "+v,i=i.properties.text.split(`
`),y=i.reduce(function(R,k){return k=u.measureText(k),R<k.width?k.width:R},0),u.restore(),[y+2*p[1]+2*m,2*p[0]+2*m+M*i.length+this.arrowHeight+m]}},{key:"drawItem",value:function(i,u){var m=this.getOptions(),p=m.padding,y=m.backgroundColor,v=m.textColor,M=m.fontSize,R=m.borderColor,k=m.borderRadius,_=m.fontFamily,T=m.lineHeight,O=m.textAlign,U=m.pickedTextColor,G=m.pickedBorderColor,X=m.pickedBackgroundColor,W=m.shadow,Y=m.stroke,J=m.borderWidth,ot=u.x,ut=u.y;m=u.w;var lt=u.h,wt=u.item;u=u.dataIndex;var Qt="";Mn(wt.properties)==="object"&&(wt=wt.properties,Qt=wt.text||"",W=wt.shadow||W,Y=wt.stroke||Y,M=wt.fontSize||M,O=wt.textAlign||O,T=wt.lineHeight||T,v=wt.textColor||v,_=wt.fontFamily||_,R=wt.borderColor||R,y=wt.backgroundColor||y),this.pickedIndex===u&&(v=U||v,R=G||R,y=X||y),U=Qt.split(`
`),G=lt-this.arrowHeight-J,i.save(),i.beginPath(),i.scale(window.devicePixelRatio,window.devicePixelRatio),i.textBaseline="top",i.font=M+"px "+_,i.translate(ot,ut),i.fillStyle=y,i.strokeStyle=R,i.lineWidth=J,_=J/2,i.roundRect(_,_+.5,m-J,G,k),i.closePath(),i.fill(),0<J&&i.stroke(),i.beginPath(),k=this.arrowHeight+J,ot=m/2,ut=k/2,i.moveTo(ot-ut,G+_),i.lineTo(ot+ut,G+_),i.lineTo(ot,G+_+.8*k),i.closePath(),i.fillStyle=0<J?R:y,i.fill(),i.beginPath(),i.fillStyle=v,W&&(i.shadowColor=W.color,i.shadowOffsetX=W.offsetX,i.shadowOffsetY=W.offsetY,i.shadowBlur=W.blur);var zt=O==="center"?ot:O==="right"?m-_-p[1]:_+p[1];i.textAlign=O,U.forEach(function(ne,pe){pe=J+p[0]+(pe+.5)*T-.5*M,0<Y.width&&(i.lineWidth=Y.width,i.strokeStyle=Y.color,i.strokeText(ne,zt,pe)),i.fillText(ne,zt,pe)}),i.restore()}},{key:"loadTexture",value:function(){var i=this;this.canvas?wo(this.gl,this.canvas,function(u){i.texture=u},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),A}(ui);Mo.prototype.parseColors=function(a){this.arrFeatureStyles=[[2,a[0]||"rgba(79,210,125,1)",2,2,0,[],0,0],[2,a[0]||"rgba(79,210,125,1)",3,2,0,[],0,0],[2,a[0]||"rgba(79,210,125,1)",3,2,0,[],0,0],[2,a[0]||"rgba(79,210,125,1)",5,2,0,[],0,0],[2,a[0]||"rgba(79,210,125,1)",6,2,0,[],0,0],[2,a[2]||"rgba(255,208,69,1)",2,2,0,[],0,0],[2,a[2]||"rgba(255,208,69,1)",3,2,0,[],0,0],[2,a[2]||"rgba(255,208,69,1)",3,2,0,[],0,0],[2,a[2]||"rgba(255,208,69,1)",5,2,0,[],0,0],[2,a[2]||"rgba(255,208,69,1)",6,2,0,[],0,0],[2,a[1]||"rgba(232,14,14,1)",2,2,0,[],0,0],[2,a[1]||"rgba(232,14,14,1)",3,2,0,[],0,0],[2,a[1]||"rgba(232,14,14,1)",3,2,0,[],0,0],[2,a[1]||"rgba(232,14,14,1)",5,2,0,[],0,0],[2,a[1]||"rgba(232,14,14,1)",6,2,0,[],0,0],[2,a[3]||"rgba(181,0,0,1)",2,2,0,[],0,0],[2,a[3]||"rgba(181,0,0,1)",3,2,0,[],0,0],[2,a[3]||"rgba(181,0,0,1)",3,2,0,[],0,0],[2,a[3]||"rgba(181,0,0,1)",5,2,0,[],0,0],[2,a[3]||"rgba(181,0,0,1)",6,2,0,[],0,0],[2,"rgba(255,255,255,1)",4,0,0,[],0,0],[2,"rgba(255,255,255,1)",5.5,0,0,[],0,0],[2,"rgba(255,255,255,1)",7,0,0,[],0,0],[2,"rgba(255,255,255,1)",8.5,0,0,[],0,0],[2,"rgba(255,255,255,1)",10,0,0,[],0,0]]},Mo.prototype.setColors=function(a){this.parseColors(a)},Mo.prototype.initialize=function(a){this._initialize||(this._initialize=!0)},Mo.prototype.clearCache=function(a){this.cache={}},Mo.prototype.setMap=function(a){a?(this.map=a,this._initialize?this.canvaslayer.show():this.initialize(a)):this.canvaslayer.hide()},Mo.prototype.draw=function(a){a=a||{},a.clearCache&&this.clearCache(),this.canvaslayer.draw()},Mo.prototype.clear=function(){},Mo.prototype.update=function(){var a=this.map,A=this.getDataZoom(),i=Math.pow(2,18-A),u=256*i,m=Nn.convertLL2MC(a.getCenter()),p=Math.ceil(m.lng/u),y=Math.ceil(m.lat/u),v=this.tileSize,M=A-Math.round(a.getZoom());for(0<M&&(v/=Math.pow(2,M)),u=[p,y,(m.lng-p*u)/u*v,(m.lat-y*u)/u*v],p=a.getBounds(),m=p.getNorthEast(),p=p.getSouthWest(),a.getSize(),a.getSize(),a=(m.lng-p.lng)/i,i=(m.lat-p.lat)/i,m=u[1]-Math.ceil((i/2-u[3])/v),p=u[0]+Math.ceil((a/2+u[2])/v),y=u[1]+Math.ceil((i/2+u[3])/v),i=[],v=u[0]-Math.ceil((a/2-u[2])/v);v<p;v++)for(u=m;u<y;u++)i.push([v,u,A]);for(this.tilesOrder=i,this._loadCount={},v=0;v<i.length;v++)u=i[v][0],a=i[v][1],this._loadCount[u+"_"+a+"_"+i[v][2]]=!1;for(v=0;v<i.length;v++)u=i[v][0],a=i[v][1],this.showTile(u,a,A)},Mo.prototype.showTile=function(a,A,i){this._parseDataAndDraw(a,A,i)},Mo.prototype.drawCurrentData=function(){this.clear();for(var a=[],A=0;A<this.tilesOrder.length;A++){var i=this.tilesOrder[A][0],u=this.tilesOrder[A][1],m=this.tilesOrder[A][2],p=this.cache[this.getCacheKey(i,u,m)];if(p)for(i=this._drawFeatures(p,i,u,m),u=0;u<i.length;u++)a.push(i[u])}this.lineLayer.setData(a)},Mo.prototype.isAllLoaded=function(){var a=!0,A;for(A in this._loadCount)if(!this._loadCount[A]){a=!1;break}return a},Mo.prototype.getCacheKey=function(a,A,i){return a+"_"+A+"_"+i},Mo.prototype.getDataZoom=function(){var a=Math.round(this.map.getZoom());return 19<a&&(a=19),a},Mo.prototype._parseDataAndDraw=function(a,A,i){var u=this,m=u.map,p=m.getCenter(),y=Math.round(m.getZoom()),v=this.getCacheKey(a,A,i),M="_cbk"+(1e5*Math.random()).toFixed(0),R=this.getTileUrl(a,A,i,"BMapGL."+M);BMapGL[M]=function(k){u._loadCount[a+"_"+A+"_"+i]=!0;var _=m.getCenter(),T=Math.round(m.getZoom());_.equals(p)&&T===y?(_=k.content&&k.content.tf,k.data&&(_=k.data),u.cache[v]=_?{traffic:_,precision:k.precision}:null,u.drawTogether&&u.isAllLoaded()&&u.drawCurrentData()):T!==y&&u.clear(),delete BMapGL[M]},u.cache[v]!==void 0?(u._loadCount[a+"_"+A+"_"+i]=!0,u.drawTogether&&u.isAllLoaded()&&u.drawCurrentData()):this.request(R)},Mo.prototype.getTileUrl=function(a,A,i,u){return"https://sp3.baidu.com/7_AZsjOpB1gCo2Kml5_Y_DAcsMJiwa/traffic/?qt=vtraffic&x="+a+"&y="+A+"&z="+i+"&fn="+u+"&t="+new Date().getTime()},Mo.prototype._drawFeatures=function(a,A,i,u){var m=10;u=Math.pow(2,18-u),this.map.getCenter();var p=this.tileSize;if(A=[A*p*u,(i+1)*p*u],i=[],a&&a.traffic){m*=a.precision,a=a.traffic,p=0;for(var y=a.length;p<y;p++){var v=a[p],M=v[1];v=this.arrFeatureStyles[v[3]];var R=M[0]/m,k=-M[1]/m,_=[];_.push([A[0]+R*u,A[1]+k*u,1]);for(var T=2,O=M.length;T<O;T+=2)R+=M[T]/m,k-=M[T+1]/m,_.push([A[0]+R*u,A[1]+k*u,1]);i.push({color:v[1],geometry:{type:"LineString",coordinates:_}})}}return i},Mo.prototype.request=function(a,A){if(A){var i=(1e5*Math.random()).toFixed(0);BMapGL._rd["_cbk"+i]=function(m){A&&A(m),delete BMapGL._rd["_cbk"+i]},a+="&callback=BMapGL._rd._cbk"+i}var u=document.createElement("script");u.type="text/javascript",u.charset="utf-8",u.src=a,u.addEventListener?u.addEventListener("load",function(m){m=m.target,m.parentNode.removeChild(m)},!1):u.attachEvent&&u.attachEvent("onreadystatechange",function(m){m=window.event.srcElement,!m||m.readyState!=="loaded"&&m.readyState!=="complete"||m.parentNode.removeChild(m)}),setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(u),u=null},1)},Mo.prototype.getRGBA=function(a){return a>>>=0,"rgba("+(a>>24&255)+","+(a>>16&255)+","+(a>>8&255)+","+(a&255)/256+")"},Mo.prototype.getLineCap=function(a){return["butt","square","round"][a]},Mo.prototype.getLineJoin=function(a){return["miter","bevel","round"][a]};var Bc=function(a){function A(i){fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i)),i.autoUpdate=!0,i.getOptions();var u=new w1({color:"rgba(257, 254, 47, 0.9)",minZoom:18,duration:.8,interval:.2,trailLength:.4});return i.lineLayer=u,i.children=[u],i}return tn(A,a),mr(A,[{key:"initialize",value:function(i){Ka(A.prototype.__proto__||Er(A.prototype),"initialize",this).call(this,i),i=this.map.map;var u=new Mo({});u.lineLayer=this.lineLayer,this.trafficTileManager=u,u.setMap(i),u.update(),i.addEventListener("moveend",function(){u.update()}),i.addEventListener("zoomend",function(){u.update()}),i.addEventListener("ondraw",function(){})}},{key:"onOptionsChanged",value:function(i){}},{key:"onDataChanged",value:function(i){}},{key:"getDefaultOptions",value:function(){return{}}}]),A}(Vo),Ff=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="HeatmapLayer",i.bufferData=[],i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{size:13,unit:"px",height:0,max:100,min:0,opacity:1,minOpacity:0,maxOpacity:1,blend:"normal"}}},{key:"initialize",value:function(i){var u=this;this.gl=i;var m=this.getOptions();this.inverseMatrix=ur.create(Float64Array),this.frameBuffer=new Zi(i),this.webglLayer.map.onResize(function(){u.frameBuffer=new Zi(i)}),this.circle=Xl(64),this.circleTexture=or(i,this.circle,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}).texture,this.intensity=new ci({gradient:m.gradient}),this.paletteTexture=or(i,this.intensity.paletteCtx.canvas,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}).texture,this.offlineProgram=new Ur(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform mat4 pointToPixelMatrix;uniform mat4 pixelToViewMatrix;uniform mat4 projectionMatrix;uniform int unit;uniform float size;uniform float max;uniform float min;attribute vec3 aPos;attribute vec2 aOffset;attribute float aCount;varying vec2 vOffset;varying float vCount;varying vec3 vPosition;void main(){vOffset=aOffset;vCount=(aCount-min)/(max-min);if(unit==1){vec2 pos=(pointToPixelMatrix*vec4(aPos.xy,0.0,1.0)).xy+aOffset.xy*size/2.0;gl_Position=projectionMatrix*pixelToViewMatrix*vec4(pos,0.0,1.0);}else{vec2 pos=aPos.xy+aOffset.xy*size;gl_Position=u_matrix*vec4(pos,0.0,1.0);}vPosition=vec3(gl_Position.z/gl_Position.w);}",fragmentShader:"varying vec2 vOffset;varying float vCount;varying vec3 vPosition;uniform sampler2D uCircle;void main(){vec4 circle=texture2D(uCircle,(vOffset+1.0)/2.0);float intensity=circle.a*vCount;if(intensity<=0.0){discard;}gl_FragColor=vec4(vPosition,intensity);}"},this),this.offlineBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.offlineIndexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.offlineVertexArray=new Li({gl:i,program:this.offlineProgram,attributes:[{stride:24,name:"aPos",buffer:this.offlineBuffer,size:3,type:"FLOAT",offset:0},{stride:24,name:"aOffset",buffer:this.offlineBuffer,size:2,type:"FLOAT",offset:12},{stride:24,name:"aCount",buffer:this.offlineBuffer,size:1,type:"FLOAT",offset:20}]}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.program=new Ur(this.gl,{vertexShader:"attribute vec2 aPos;varying vec2 vPos;uniform float uHeight;uniform mat4 pixelToViewMatrix;uniform mat4 projectionMatrix;uniform sampler2D u_sampler;uniform mat4 inverseMatrix;void main(){vPos=aPos;if(uHeight<=0.0){gl_Position=vec4(aPos,0.0,1.0);}else{vec4 gray=texture2D(u_sampler,(aPos+1.0)/2.0);vec4 m0=inverseMatrix*vec4(aPos.xy,0.0,1.0);vec4 m1=inverseMatrix*vec4(aPos.xy,1.0,1.0);m0/=m0.w;m1/=m1.w;vec4 pixel=m0+(-m0.z/(m1.z-m0.z))*(m1-m0);pixel.z=uHeight*gray.a;gl_Position=projectionMatrix*pixelToViewMatrix*vec4(pixel.xyz,1.0);}}",fragmentShader:"uniform sampler2D u_sampler;uniform sampler2D u_samplerPalette;uniform float uHeight;uniform float opacity;uniform float minOpacity;uniform float maxOpacity;uniform bool u_strict;varying vec2 vPos;void main(){vec4 gray=texture2D(u_sampler,(vPos+1.0)/2.0);float grayAlpha=gray.a;if(grayAlpha<=0.0){discard;}gl_FragColor=texture2D(u_samplerPalette,vec2(grayAlpha,1.0));float addAlpha=1.0;if(gray.a<0.3){addAlpha=gray.a*3.3;}gl_FragColor.a*=addAlpha;gl_FragColor.a=max(gl_FragColor.a,minOpacity);gl_FragColor.a=min(gl_FragColor.a,maxOpacity);gl_FragColor.a*=opacity;}"},this),this.buffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new Li({gl:i,program:this.program,attributes:[{stride:8,name:"aPos",buffer:this.buffer,size:2,type:"FLOAT",offset:0}]}),m=[];for(var p=[],y=Math.floor(i.canvas.width/4),v=Math.floor(i.canvas.height/4),M=y+1,R=0;R<=v;R++)for(var k=0;k<=y;k++)if(m.push(2*k/y-1,2*R/v-1),k<y&&R<v){var _=M*R+k,T=M*(R+1)+k;p.push(_,_+1,T+1),p.push(_,T+1,T)}this.bufferData=m,this.buffer.updateData(new Float32Array(m)),this.indexData=p,this.indexBuffer.updateData(new Uint32Array(p))}},{key:"onDestroy",value:function(){this.bufferData=[]}},{key:"onOptionsChanged",value:function(i,u){var m=this.gl;m&&i.gradient!==u.gradient&&(this.intensity=new ci({gradient:i.gradient}),this.paletteTexture=or(m,this.intensity.paletteCtx.canvas,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}).texture)}},{key:"onDataChanged",value:function(i){if(this.gl){var u=[],m=[];this.getOptions();for(var p=0;p<i.length;p++){var y=i[p],v=this.normizedPoint(i[p].geometry.coordinates),M=y.count===void 0?1:y.count;"properties"in y&&"count"in y.properties&&(M=y.properties.count),u.push(v[0],v[1],v[2]),u.push(-1,-1),u.push(M),u.push(v[0],v[1],v[2]),u.push(-1,1),u.push(M),u.push(v[0],v[1],v[2]),u.push(1,1),u.push(M),u.push(v[0],v[1],v[2]),u.push(1,-1),u.push(M),y=4*p,m.push(y+0,y+2,y+1),m.push(y+0,y+3,y+2)}this.offlineBufferData=u,this.offlineIndexData=m,this.offlineBuffer.updateData(new Float32Array(u)),this.offlineIndexBuffer.updateData(new Uint32Array(m))}}},{key:"render",value:function(i){var u=i.gl,m=i.matrix,p=i.pointToPixelMatrix,y=i.pixelToViewMatrix;if(i=i.projectionMatrix,this.offlineBufferData&&!(0>=this.offlineBufferData.length)){var v=this.getOptions();this.setGLState({blend:!0,blendFunc:[u.ONE,u.ONE],depthTest:!1}),u.bindFramebuffer(u.FRAMEBUFFER,this.frameBuffer.framebuffer),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),this.offlineProgram.use(u),this.offlineProgram.setUniforms({u_matrix:m,uCircle:this.circleTexture,pointToPixelMatrix:p,pixelToViewMatrix:y,projectionMatrix:i,unit:v.unit==="px"?1:0,size:v.size,max:v.max,min:v.min}),this.offlineVertexArray.bind(),this.offlineIndexBuffer.bind(),u.drawElements(u.TRIANGLES,this.offlineIndexData.length,u.UNSIGNED_INT,0),u.bindFramebuffer(u.FRAMEBUFFER,null),this.program.use(u),this.vertexArray.bind(),m=this.inverseMatrix,ur.identity(m),ur.multiply(m,i,y),ur.invert(m,m),this.setGLState({blend:!0,blendFunc:Gs(u,v.blend),depthTest:!!v.height}),this.program.setUniforms({u_sampler:this.frameBuffer.framebuffer.texture,u_samplerPalette:this.paletteTexture,uHeight:v.height,opacity:v.opacity,minOpacity:v.minOpacity,maxOpacity:v.maxOpacity,pixelToViewMatrix:y,inverseMatrix:m,projectionMatrix:i}),this.indexBuffer.bind(),u.drawElements(u.TRIANGLES,this.indexData.length,u.UNSIGNED_INT,0)}}}]),A}(ui),ug=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="BarLayer",i.selectedColor=[-1,-1,-1],i.textureCache={},i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{color:"rgba(0, 180, 0, 1.0)",edgeCount:4,unit:"m",height:1e5,type:"normal",size:5e4}}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions(),m={normal:[`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aEdgeIndex;attribute float aPointIndex;attribute float aEdgeCount;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vEdgeIndex=aEdgeIndex;vEdgeCount=aEdgeCount;vPointIndex=aPointIndex;float z=aPos.z*uZoomUnits;float x=aPos.x;float y=aPos.y;vSize=aSize*uZoomUnits;float a=radians(360.0/aEdgeCount);float b=a/2.0;float r=vSize/cos(b);if(aEdgeIndex<0.0){float index=aPointIndex;float angle=0.0;if(mod(index,2.0)==0.0){angle=a*(index/2.0)-b;}else{angle=-a*((index-1.0)/2.0)-b;}y=y+r*sin(angle);x=x+r*cos(angle);}else{float i=aEdgeIndex-1.0;float j=aPointIndex;float angle=a*i+b;y=y+r*sin(angle);x=x+r*cos(angle);}vPosition=vec4(aPos,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;if(aEdgeIndex==1.0&&aPointIndex==1.0){gl_PointSize=20.0;}else{gl_PointSize=10.0;}
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,"varying vec4 vColor;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;varying vec4 vPosition;varying vec4 vFragPosition;uniform mat4 uMatrix;void main(){vec4 color=vColor;if(vEdgeIndex<0.0){color.r+=0.2;color.g+=0.2;color.b+=0.2;}else{float i=ceil(vEdgeIndex);;float d=i/vEdgeCount*0.5;if(i<=vEdgeCount/2.0){d=0.2*(i/vEdgeCount*0.5)-0.1;}else{d=0.2*(vEdgeCount-i)/vEdgeCount*0.5-0.1;}color.r+=d;color.g+=d;color.b+=d;}gl_FragColor=color;}"],light:[`attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aEdgeIndex;attribute float aPointIndex;attribute float aEdgeCount;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vEdgeIndex=aEdgeIndex;vEdgeCount=aEdgeCount;vPointIndex=aPointIndex;float z=aPos.z*uZoomUnits;float x=aPos.x;float y=aPos.y;vSize=aSize*uZoomUnits;float a=radians(360.0/aEdgeCount);float b=a/2.0;float i=aEdgeIndex;float j=aPointIndex;float angle=a*(i-1.0)+b;float r=vSize/cos(b);y=y+r*sin(angle);x=x+r*cos(angle);if(j==1.0){z=0.0;}vPosition=vec4(aPos.xyz,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;
#if defined(PICK)
if(mapvIsPicked()){vColor=uSelectedColor;}
#endif
}`,"varying vec4 vColor;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;varying vec4 vPosition;varying vec4 vFragPosition;uniform mat4 uMatrix;void main(){vec4 color=vColor;color.a=1.0-vFragPosition.z/vPosition.z;gl_FragColor=color;}"]};m=m[u.type]||m.normal,this.program=new Ur(this.gl,{vertexShader:m[0],fragmentShader:m[1],defines:u.enablePicked?["PICK"]:[]},this),this.buffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=[{stride:44,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:44,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:12},{stride:44,name:"aEdgeIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:16},{stride:44,name:"aPointIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:20},{stride:44,name:"aEdgeCount",buffer:this.buffer,size:1,type:"FLOAT",offset:24},{stride:44,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:28}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onChanged",value:function(i,u){this.gl&&u&&(this.uniforms={},this.data=u,this.options=i,this.processData(),i.enablePicked&&this.parsePickData(u))}},{key:"processData",value:function(){var i=[],u=[];this.options.type==="light"?this.createLightBuffer(this.data,i,u):this.createNormalBuffer(this.data,i,u),this.bufferData=i,this.indexData=u,this.buffer.updateData(new Float32Array(i)),this.indexBuffer.updateData(new Uint32Array(u))}},{key:"createNormalBuffer",value:function(i,u,m){var p=this,y=parseInt(this.options.edgeCount,10)||4;i.forEach(function(v,M){var R=v.color||p.options.color,k=v.size||p.options.size,_=Array.isArray(v.value)?v.value:typeof v.value=="number"?[v.value]:[1],T=p.normizedPoint(v.geometry.coordinates),O=v.height||p.options.height,U=_.reduce(function(W,Y){return Number(W)+Number(Y)}),G=0,X="blue";for(_.forEach(function(W,Y){X=p.normizedColor(typeof R=="function"?R(W,Y,_):Array.isArray(R)?R[Y]:R),W=typeof O=="function"?O(W,Y,_):Array.isArray(O)?O[Y]:O/U*W;var J=m[m.length-1],ot=u.length/11;for(0<ot&&(y%2==1&&Y===0?m.push(J,J,ot):m.push(J,ot)),Y=1;Y<=2*y;Y++)Y%2==0?u.push.apply(u,[T[0],T[1],G,k,Y/2,2,y].concat(Fn(X))):u.push.apply(u,[T[0],T[1],G+W,k,(Y+1)/2,1,y].concat(Fn(X))),m.push(ot+Y-1),Y===2*y&&(u.push.apply(u,[T[0],T[1],G+W,k,Y/2+1,1,y].concat(Fn(X))),u.push.apply(u,[T[0],T[1],G,k,Y/2+1,2,y].concat(Fn(X))),m.push(ot+Y,ot+Y+1));G+=W}),M=m[m.length-1],v=u.length/11,0<v&&m.push(M,v),M=1;M<=y;M++)u.push.apply(u,[T[0],T[1],G,k,-1,M,y].concat(Fn(X))),m.push(v+M-1)})}},{key:"createLightBuffer",value:function(i,u,m){var p=this,y=parseInt(this.options.edgeCount,10)||4;i.forEach(function(v,M){M=v.color||p.options.color,M=p.normizedColor(typeof M=="function"?M(v.value):typeof M=="string"?M:"blue");var R=v.size||p.options.size,k=p.normizedPoint(v.geometry.coordinates),_=v.height||p.options.height;for(_=typeof _=="function"?_(v.value):_,v=1;v<=y;v++){var T=m[m.length-1],O=u.length/11;for(0<O&&m.push(T,O),T=1;T<=2*y;T++)T%2==0?u.push.apply(u,[k[0],k[1],_,R,T/2,1,y].concat(Fn(M))):u.push.apply(u,[k[0],k[1],_,R,(T+1)/2,2,y].concat(Fn(M))),m.push(O+T-1),T===2*y&&m.push(O,O+1)}})}},{key:"render",value:function(i){var u=this.program,m=i.gl,p=i.matrix;this.setGLState({cullFace:this.options.type==="normal"}),u.use(m),this.vertexArray.bind(),this.indexBuffer.bind();var y=this.map.getZoomUnits();ln(this.uniforms,this.getCommonUniforms(i),{uZoomUnits:this.options.unit==="px"?y:1,uMatrix:p}),u.setUniforms(this.uniforms),m.drawElements(m.TRIANGLE_STRIP,this.indexData.length,m.UNSIGNED_INT,0)}}]),A}(ui),Qm=function(a){function A(i){fr(this,A);var u=on(this,(A.__proto__||Er(A)).call(this,i));return i=u.getOptions(),u.fillPoint=new Za({enablePicked:i.enablePicked,autoSelect:i.autoSelect}),u.shadowPoint=new Za,u.textPoint=new fA,u.children=[u.shadowPoint,u.fillPoint,u.textPoint],u}return tn(A,a),mr(A,[{key:"pick",value:function(i,u){return this.fillPoint.pick(i,u)}},{key:"onOptionsChanged",value:function(i){this.shadowPoint.setOptions({depthTest:!1,polygonOffset:[1,1],color:i.shadowColor,size:i.shadowSize,borderWidth:i.shadowBorderWidth,borderColor:i.shadowBorderColor}),this.fillPoint.setOptions({onClick:function(u){i.onClick&&i.onClick(u)},selectedIndex:i.selectedIndex,selectedColor:i.selectedColor,depthTest:!1,color:i.fillColor,size:i.fillSize,borderWidth:i.fillBorderWidth,borderColor:i.fillBorderColor}),this.textPoint.setOptions({collides:!1,polygonOffset:[-1,-1],color:i.fontColor,fontFamily:i.fontFamily,fontSize:i.fontSize})}},{key:"onDataChanged",value:function(i){var u=this,m=this.getOptions(),p=JSON.parse(oh(i)).map(function(v){return v.properties.size=u.getProperty("shadowSize",m.shadowSize,v),v.properties.color=u.getProperty("shadowColor",m.shadowColor,v),v.properties.borderColor=u.getProperty("shadowBorderColor",m.shadowBorderColor,v),v.properties.borderWidth=u.getProperty("shadowBorderWidth",m.shadowBorderWidth,v),v}),y=JSON.parse(oh(i)).map(function(v){return v.properties.size=u.getProperty("fillSize",m.fillSize,v),v.properties.color=u.getProperty("fillColor",m.fillColor,v),v.properties.borderColor=u.getProperty("fillBorderColor",m.fillBorderColor,v),v.properties.borderWidth=u.getProperty("fillBorderWidth",m.fillBorderWidth,v),v});this.shadowPoint.setData(p),this.fillPoint.setData(y),this.textPoint.setData(i)}},{key:"getProperty",value:function(i,u,m){return Object.prototype.toString.call(u)==="[object Function]"?u(m):(u=m[i]||u,"properties"in m&&i in m.properties&&(u=m.properties[i]),u)}},{key:"getDefaultOptions",value:function(){return{enablePicked:!1,selectedIndex:-1,selectedColor:"#ffff00",autoSelect:!0,fillColor:"rgba(255, 50, 10, 1)",fillSize:20,fillBorderColor:"#ffffff",fillBorderWidth:1.2,shadowColor:"rgba(255, 80, 110, 0.7)",shadowSize:40,shadowBorderColor:"rgba(255, 80, 110, 1)",shadowBorderWidth:1.2,fontSize:12,fontFamily:"Microsoft Yahei",fontColor:"#ffffff"}}}]),A}(Vo),bm=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="MaskLayer",i.bufferData=[],i.indices=[],i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{blend:"deeper",color:"rgba(100, 100, 100, 0.6)",height:0,polygonOffset:[0,0],depthTest:!1,depthWrite:!1}}},{key:"initialize",value:function(i){this.gl=i,this.program=new Ur(this.gl,{vertexShader:"precision highp float;attribute vec2 a_position;uniform mat4 u_matrix;uniform float u_height;void main(){vec4 position=u_matrix*vec4(a_position.xy,u_height,1.0);gl_Position=position;}",fragmentShader:"precision highp float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}",defines:[]},this),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});var u=[{stride:8,name:"a_position",buffer:this.vertexBuffer,size:2,type:"FLOAT",offset:0}];u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onDestroy",value:function(){this.bufferData=[],this.index=[]}},{key:"onChanged",value:function(i,u){var m=this;if(this.gl){i=[];for(var p=[],y=[],v=[[this.normizedPoint([-180,-90]),this.normizedPoint([180,-90]),this.normizedPoint([180,90]),this.normizedPoint([-180,90])]],M=0;M<u.length;M++)if(u[M].geometry.coordinates)if(u[M].geometry.type==="LineString"&&y.push(u[M].geometry.coordinates.map(function(_){return m.normizedPoint(_)})),u[M].geometry.type==="MultiPolygon")for(var R=u[M].geometry.coordinates,k=0;k<R.length;k++)y=y.concat(R[k].map(function(_){return _.map(function(T){return m.normizedPoint(T)})}));else for(R=0;R<u[M].geometry.coordinates.length;R++)y.push(u[M].geometry.coordinates[R].map(function(_){return m.normizedPoint(_)}));if(0<u.length){for(y=sr.flatten(v.concat(y)),u=y.vertices,y=y.holes,v=[],M=0;M<u.length;M+=3)v.push(u[M+0],u[M+1]);this.parseBufferData(i,p,v,y)}this.bufferData=i,this.index=p,this.vertexBuffer.updateData(new Float32Array(i)),this.indexBuffer.updateData(new Uint32Array(p))}}},{key:"parseBufferData",value:function(i,u,m,p){var y=i.length/2;for(p=p&&p.length?sr(m,p,2):sr(m),i.push.apply(i,Fn(m)),i=0;i<p.length;i++)u.push(p[i]+y)}},{key:"render",value:function(i){if(this.index&&this.index.length){var u=i.gl,m=i.matrix,p=this.getOptions(),y=this.program;y.use(u),i=ln(this.getCommonUniforms(i),{u_matrix:m,u_height:p.height,u_color:this.normizedColor(p.color)}),y.setUniforms(i),this.setGLState({blend:!0,blendFunc:Gs(u,p.blend),polygonOffset:p.polygonOffset,depthTest:p.depthTest,depthMask:p.depthWrite}),this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,this.index.length,u.UNSIGNED_INT,0)}}}]),A}(ui),Rf=function(a){function A(){return fr(this,A),on(this,(A.__proto__||Er(A)).apply(this,arguments))}return tn(A,a),mr(A,[{key:"toBBox",value:function(i){var u=ni(i.item.geometry.coordinates,2);return i=u[0],u=u[1],{minX:i,minY:u,maxX:i,maxY:u}}},{key:"compareMinX",value:function(i,u){return i.item.geometry.coordinates[0]-u.item.geometry.coordinates[0]}},{key:"compareMinY",value:function(i,u){return i.item.geometry.coordinates[1]-u.item.geometry.coordinates[1]}}]),A}(Hs),Ox=function(a){function A(i,u){return fr(this,A),i=on(this,(A.__proto__||Er(A)).call(this,i,u)),i.name="PointCanvasCustomLayer",u=i.canvas=document.createElement("canvas"),i.ctx=u.getContext("2d"),i.geoRBush=new Rf,i}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,flat:!1,collides:!0,unit:"px",angle:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],itemDimension:[20,20],renderItem:this.defaultOptionRenderItem}}},{key:"defaultOptionRenderItem",value:function(i,u,m){m.fillStyle="red",m.fillRect(u.x,u.y,u.w,u.h)}},{key:"initialize",value:function(i){this.gl=i;var u=this.getOptions();this.texture=null,this.lastUpdateTime=0,this.program=new Ur(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uFlat;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***\u70B9A(x,y)\uFF0C\u7ED5\u539F\u70B9\u987A\u65F6\u9488\u65CB\u8F6C\u89D2\u5EA6a\u65B0\u5750\u6807\u7684\u8BA1\u7B97\u516C\u5F0F*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)+size.x*sin(rotation);}else if(corner==2.0){x+=size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)-size.x*sin(rotation);}else if(corner==3.0){x+=size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)-size.x*sin(rotation);}else{x+=-size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)+size.x*sin(rotation);}return vec3(x,y,coord.z);}void main(){vTextCoord=aTextCoord;if(uFlat){vec2 pixelOffset=offset;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;pixelOffset*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);current.z+=zIndex;gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y-pixelOffset[1],current.z,1.0);}else{vec2 pixelOffset=offset*zoomUnits;vec4 projection=matrix*vec4(position.x+pixelOffset[0],position.y-pixelOffset[1],position.z,1.0);vec3 screen=projection.xyz/projection.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio*scale;vec3 current=transformCoord(screen,halfSize,corner);current.z+=zIndex;gl_Position=vec4(current,1.0);}}",fragmentShader:`precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));
#if defined(PICK)
if(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}
#endif
}`,defines:u.enablePicked?["PICK"]:[]},this),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.uvBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),u=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}],u=u.concat(this.getCommonAttributes()),this.vertexArray=new Li({gl:i,program:this.program,attributes:u})}},{key:"onDestroy",value:function(){}},{key:"onChanged",value:function(i,u){this.gl&&this.processCache(i,u)}},{key:"processCache",value:function(i,u){for(this.cachedData=[],this.geoRBush.clear(),i=0;i<u.length;i++){var m=u[i],p=this.normizedPoint(m.geometry.coordinates);p&&this.cachedData.push({point:p,item:m,extra:{},index:i})}this.geoRBush.load(this.cachedData)}},{key:"render",value:function(i){if(this.cachedData&&this.cachedData.length&&this.map){var u=i.gl,m=i.matrix,p=this.getOptions(),y=this.program;y.use(u),this.throttleUpdate(i),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA],polygonOffset:p.polygonOffset,depthTest:p.depthTest,depthMask:p.depthWrite});var v=this.map.getZoomUnits();y.setUniforms(ln(this.getCommonUniforms(i),{matrix:m,devicePixelRatio:window.devicePixelRatio,textureImage:this.texture,uFlat:p.flat,offset:p.offset,zoomUnits:v,zIndex:p.zIndex,uUnitPx:p.unit==="px"})),0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,this.index.length,u.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(i){this.updateText(i)}},{key:"updateText",value:function(i){var u=i.gl,m=i.matrix,p=this.getOptions(),y=p.padding,v=p.margin,M=p.collides;i=p.enablePicked;var R=p.itemDimension,k=p.beforeRenderAll,_=p.beforeComputeDimension;p=p.renderItem;var T=this.map.getBounds(),O=u.canvas.width/window.devicePixelRatio,U=u.canvas.height/window.devicePixelRatio,G=this.canvas;u=this.ctx,u.save(),u.scale(window.devicePixelRatio,window.devicePixelRatio),_&&_(u),_=T.getNorthEast(),T=T.getSouthWest();var X=_.lng,W=T.lng;for(X<W&&(X+=360),T=this.geoRBush.search({minX:W,minY:T.lat,maxX:X,maxY:_.lat}),X=new Hs,_=[],W=0;W<T.length;W++){var Y=T[W],J=Y.point,ot=Y.item,ut=Y.extra;Y=Y.index;var lt=ni(J,3);lt=Si.clone([lt[0],lt[1],lt[2],1]),Si.transformMat4(lt,lt,m),Si.scale(lt,lt,1/lt[3]);var wt=(lt[0]+1)/2*O,Qt=(-lt[1]+1)/2*U,zt=Array.isArray(R)?R:R(ot,u,ut);lt=zt[0]+2*y[0],zt=zt[1]+2*y[1];var ne=lt+v[0],pe=zt+v[1];if(wt-=ne/2,Qt-=pe/2,ne=wt+ne,pe=Qt+pe,!(0>ne||0>pe||wt>O||Qt>U)){if(M){if(pe={minX:wt,maxX:ne,minY:Qt,maxY:pe},X.collides(pe))continue;X.insert(pe)}_.push({w:lt,h:zt,point:J,item:ot,extra:ut,dataIndex:Y})}}for(u.restore(),y=to(_),m=y.w,y=y.h,0>=m&&(m=1),0>=y&&(y=1),G.width=m*window.devicePixelRatio,G.height=y*window.devicePixelRatio,u.save(),u.scale(window.devicePixelRatio,window.devicePixelRatio),k&&k(u),k=[],G=[],v=[],M=[],R=0,O=_.length;R<O;++R){for(U=_[R],p(U.item,U,u,U.extra),W=ni(U.point,3),T=W[0],X=W[1],W=W[2],J=0;4>J;J++)k.push(T,X,W),k.push(J),k.push(U.w,U.h),k.push(1,0);T=U.x/m,X=(U.x+U.w)/m,W=(U.y+U.h)/y,J=U.y/y,G.push(T,W,T,J,X,J,X,W),T=4*R,v.push(T,T+2,T+1,T,T+3,T+2),i&&(U=this.indexToRgb(U.dataIndex),M.push(U[0]/255,U[1]/255,U[2]/255),M.push(U[0]/255,U[1]/255,U[2]/255),M.push(U[0]/255,U[1]/255,U[2]/255),M.push(U[0]/255,U[1]/255,U[2]/255))}u.restore(),this.loadTexture(),this.index=v,this.vertexBuffer.updateData(new Float32Array(k)),this.uvBuffer.updateData(new Float32Array(G)),this.indexBuffer.updateData(new Uint32Array(v)),i&&this.pickBuffer.updateData(new Float32Array(M))}},{key:"loadTexture",value:function(){var i=this;this.canvas?wo(this.gl,this.canvas,function(u){i.texture=u},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]),A}(ui),yh=function(){function a(A,i){fr(this,a),this.name="Mask",this.webglLayer=A,this.options=i||{},this.bufferData=[],this.indices=[]}return mr(a,[{key:"initialize",value:function(A){return this.gl=A,this.program=new Ur(this.gl,{vertexShader:"precision highp float;attribute vec2 a_position;uniform mat4 u_matrix;uniform float u_height;void main(){vec4 position=u_matrix*vec4(a_position.xy,u_height,1.0);gl_Position=position;}",fragmentShader:"precision highp float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}",defines:[]},this),this.vertexBuffer=new ir({gl:A,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:A,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new Li({gl:A,program:this.program,attributes:[{stride:8,name:"a_position",buffer:this.vertexBuffer,size:2,type:"FLOAT",offset:0}]}),this}},{key:"onDestroy",value:function(){this.bufferData=[],this.index=[]}},{key:"setData",value:function(A){var i=this;if(this.gl){for(var u=[],m=[],p=0;p<A.length;p++)if(A[p].geometry.coordinates){var y=[];if(A[p].geometry.type==="LineString"&&(y=[A[p].geometry.coordinates.map(function(k){return i.normizedPoint(k)})]),A[p].geometry.type==="MultiPolygon")for(var v=A[p].geometry.coordinates,M=0;M<v.length;M++)y=y.concat(v[M].map(function(k){return k.map(function(_){return i.normizedPoint(_)})}));else for(v=0;v<A[p].geometry.coordinates.length;v++)y.push(A[p].geometry.coordinates[v].map(function(k){return i.normizedPoint(k)}));v=sr.flatten(y),y=v.vertices,v=v.holes,M=[];for(var R=0;R<y.length;R+=3)M.push(y[R+0],y[R+1]);this.parseBufferData(u,m,M,v)}return this.bufferData=u,this.index=m,this.vertexBuffer.updateData(new Float32Array(u)),this.indexBuffer.updateData(new Uint32Array(m)),this}}},{key:"parseBufferData",value:function(A,i,u,m){var p=A.length/2;for(m=m&&m.length?sr(u,m,2):sr(u),A.push.apply(A,Fn(u)),A=0;A<m.length;A++)i.push(m[A]+p)}},{key:"render",value:function(A){if(this.index&&this.index.length){var i=A.gl,u=A.matrix,m=this.options;A=this.program,A.use(i),u={u_matrix:u,u_height:m.height||0,u_color:this.normizedColor(m.color)},A.setUniforms(u),this.indexBuffer.bind(),this.vertexArray.bind(),i.drawElements(i.TRIANGLES,this.index.length,i.UNSIGNED_INT,0)}}},{key:"normizedColor",value:function(A){var i=A;return A instanceof Array||(i=kt(A).unitArray()),i[3]===void 0&&(i[3]=1),i}},{key:"normizedPoint",value:function(A){var i=this.getPointOffset();if(!A||!A[0]||!A[1])return[i[0],i[1],0];var u=Number(A[0]),m=Number(A[1]);-180<=u&&180>=u&&-90<=m&&90>=m&&(m=this.webglLayer.map.lnglatToMercator(u,m),u=m[0],m=m[1]);var p=Number(A[2])||0;return this.webglLayer&&this.webglLayer.options.mapType==="cesium"&&window.Cesium?(u=this.convertLngLat([u,m]),p=window.Cesium.Cartesian3.fromDegrees(u[0],u[1],p),u=p.x,m=p.y,p=p.z):this.webglLayer&&this.webglLayer.options.mapType==="bmapgl"&&this.webglLayer.map.map.mapType==="B_EARTH_MAP"&&(u=this.convertLngLat([u,m]),p=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:u[0],lat:u[1]}),u=p.x,m=p.y,p=p.z),3<A.length?[u-i[0],m-i[1],p].concat(Fn(A.slice(3))):[u-i[0],m-i[1],p]}},{key:"convertLngLat",value:function(A){return[A[0]/2003750834e-2*180,180/Math.PI*(2*Math.atan(Math.exp(A[1]/2003750834e-2*180*Math.PI/180))-Math.PI/2)]}},{key:"getPointOffset",value:function(){var A=[0,0],i=this.options;return this.webglLayer&&this.webglLayer.options.pointOffset?A=this.webglLayer.options.pointOffset:i.pointOffset&&(A=i.pointOffset),A}}]),a}(),u0=function(a){function A(i,u){return fr(this,A),on(this,(A.__proto__||Er(A)).call(this,i,u))}return tn(A,a),mr(A,[{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(i){var u=this.getOptions();if(u.source&&u.source.image&&u.domain&&(typeof u.source.image=="string"||u.source.width&&u.source.height)){var m=u.refColors,p=u.refImage;if((m||p)&&(!m||m.colors&&m.positions)&&(!p||typeof p.url=="string")){this.gl=i;var y=[];m?this.imageData=Nh(m.colors,m.positions,m.clamp,m.color,m.height):(this.imageData={data:p.url},y.push("USE_IMAGE_TEXTURE"),this.imageTexture=!0),u.isTerrain&&(this.isTerrain=u.isTerrain,y.push("USE_TERRAIN"),this.gridRowMax=1600,u.gridRowMax&&(this.gridRowMax=u.gridRowMax),this.gridColMax=1600,u.gridColMax&&(this.gridColMax=u.gridColMax)),this.texture=null,m=`
        float generateValue(vec4 rgba){
            return rgba.r;
        }`,u.fomularC&&(m=u.fomularC),u=`precision highp float;attribute vec3 a_pos;attribute vec2 a_texture_coord;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform sampler2D uTile;uniform float u_baseLine;uniform float u_elevationScale;varying vec2 v_texture_coord;void main(){v_texture_coord=a_texture_coord;vec3 pos=a_pos.xyz;
#if defined(USE_TERRAIN)
vec4 terrainColor=texture2D(uTile,vec2(a_texture_coord.s,a_texture_coord.t));float value=generateValue(terrainColor);float h=(value-u_baseLine)*u_elevationScale;pos.z=max(0.,h);
#endif
vec4 position=u_proj_matrix*u_mv_matrix*vec4(pos,1.0);gl_Position=position;}`.replace("void main()",m+`
void main()`),m=`precision highp float;varying vec2 v_texture_coord;uniform sampler2D uTile;uniform sampler2D uColorRamp;uniform bool uUseFilter;uniform vec4 uFilterColor;uniform float u_opacity;uniform float u_noData;uniform vec3 u_noTextureData;uniform vec2 u_clamp;uniform vec2 u_domain;uniform vec3 u_linearOpacity;uniform bool u_isOneBand;uniform float u_brightness;uniform float u_contrast;uniform float u_exposure;uniform float u_saturation;vec4 indexToRgba(float value){float index=value;float b=floor(index/65536.);index-=b*65536.;float g=floor(index/256.);index-=g*256.;float r=index;return vec4(r,g,b,255.);}vec3 adjustBrightness(vec3 color,float value){return color+value;}vec3 adjustContrast(vec3 color,float value){return 0.5+(1.0+value)*(color-0.5);}vec3 adjustExposure(vec3 color,float value){return color*(1.0+value);}vec3 adjustSaturation(vec3 color,float value){const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);vec3 grayscale=vec3(dot(color,luminosityFactor));return mix(grayscale,color,1.0+value);}void main(){vec4 data=texture2D(uTile,vec2(v_texture_coord.s,v_texture_coord.t));float value=generateValue(data);vec4 textureColor=vec4(0,0,0,0);if(value>=u_clamp.s&&value<=u_clamp.t){float normalisedValue=(value-u_domain.s)/(u_domain.t-u_domain.s);
#if defined(USE_IMAGE_TEXTURE)
vec4 color=texture2D(uColorRamp,vec2(v_texture_coord.s,v_texture_coord.t));if(vec3(color.rgb)==u_noTextureData){color=vec4(0,0,0,0);}
#else
vec4 color=texture2D(uColorRamp,vec2(normalisedValue,0));
#endif
color.a=smoothstep(u_linearOpacity.s,u_linearOpacity.t,color.a*normalisedValue)+u_linearOpacity.p;textureColor=color;textureColor.a=textureColor.a*u_opacity;vec3 mixColor=adjustBrightness(textureColor.rgb,u_brightness);mixColor=adjustContrast(mixColor,u_contrast);mixColor=adjustExposure(mixColor,u_exposure);mixColor=adjustSaturation(mixColor,u_saturation);textureColor=vec4(mixColor,textureColor.a);if(uIsPickRender&&u_isOneBand){textureColor=indexToRgba(value)/255.;}if(uIsPickRender&&!u_isOneBand){textureColor=data;}}if(value==u_noData){textureColor=vec4(0,0,0,0);}if(uUseFilter){textureColor=textureColor*uFilterColor;}gl_FragColor=textureColor;}`.replace("void main()",m+`
void main()`),this.program=new Ur(this.gl,{vertexShader:u,fragmentShader:m,defines:y},this),this.vertexBuffer=new ir({gl:i,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.indexBuffer=new ir({gl:i,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexArray=new Li({gl:i,program:this.program,attributes:[{name:"a_pos",buffer:this.vertexBuffer,stride:20,size:3,type:"FLOAT",offset:0},{name:"a_texture_coord",buffer:this.vertexBuffer,size:2,stride:20,type:"FLOAT",offset:12}]})}}}},{key:"onChanged",value:function(i,u){var m=this;this.gl&&(this.loadDataTexture&&clearTimeout(this.loadDataTexture),this.loadDataTexture=setTimeout(function(){m.loadTexture(function(){m.parseData(u),m.webglLayer.render()})},0))}},{key:"drawMask",value:function(i){var u=i.gl,m=i.matrix,p=i.projectionMatrix,y=i.viewMatrix;if(i=i.polygons){var v=new yh(this.webglLayer,{color:"rgba(19, 14, 7, 0.8)"});this.setGLState({stencilTest:!0,depthTest:!1,depthMask:!1}),u.clear(u.STENCIL_BUFFER_BIT),u.stencilFunc(u.ALWAYS,1,255),u.stencilOp(u.KEEP,u.KEEP,u.REPLACE),u.colorMask(!1,!1,!1,!1),v.initialize(u).setData(i).render({gl:u,matrix:m,projectionMatrix:p,viewMatrix:y})}}},{key:"onOptionsChanged",value:function(i,u){this.gl&&(this.initialize(this.gl),this.loadTexture(),this.webglLayer.render())}},{key:"render",value:function(i){var u=i.gl,m=i.matrix,p=i.projectionMatrix,y=i.viewMatrix,v=i.isPickRender;i=this.getOptions();var M=this.program;(M||this.texture)&&(i.stencilData&&this.drawMask({gl:u,matrix:m,projectionMatrix:p,viewMatrix:y,polygons:i.stencilData}),this.setGLState({blend:!0,blendEquation:u.FUNC_ADD,blendFunc:[u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA],stencilTest:!!i.stencilData,depthTest:i.depthTest,depthMask:i.depthMask}),M.use(u),i.stencilData&&(u.stencilFunc(u.EQUAL,1,1),u.stencilOp(u.KEEP,u.KEEP,u.KEEP),u.colorMask(!0,!0,!0,!0)),this.colorRamp&&this.texture&&(m=[0,0,0],i.linearOpacity&&this.formaLinear(i.linearOpacity,m),p={uColorRamp:this.colorRamp,uTile:this.texture,u_proj_matrix:p,uUseFilter:!!i.filterColor,uFilterColor:this.normizedColor(i.filterColor||"rgba(0, 0, 100, 1.0)"),u_mv_matrix:y,uIsPickRender:!!v,u_noData:i.noData||-99999,u_domain:i.domain,u_clamp:i.clamp?i.clamp:i.domain,u_linearOpacity:m,u_opacity:i.opacity||1,u_isOneBand:!!this.isOneBand,u_brightness:i.brightness||0,u_contrast:i.contrast||0,u_exposure:i.exposure||0,u_saturation:i.saturation||0},this.isTerrain&&(p.u_baseLine=i.baseLine||0,p.u_elevationScale=i.elevationScale||1),this.imageTexture&&(p.u_noTextureData=i.baseLine||0),M.setUniforms(p),this.index&&0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),u.drawElements(u.TRIANGLES,this.index.length,u.UNSIGNED_INT,0)),i.stencilData&&!i.stencilAfter&&(u.clear(u.STENCIL_BUFFER_BIT),u.stencilMask(255),u.stencilFunc(u.ALWAYS,1,255))))}},{key:"onDestroy",value:function(){this.texturePixels=this.texture=this.colorRamp=this.indexBuffer=this.vertexBuffer=this.index=this.program=null}},{key:"pickAfter",value:function(i,u){var m,p;return this.isOneBand?(u=m=p=u,i=1):(u=i[0],m=i[1],p=i[2],i=i[3]),this.getOptions().fomularJS?this.getOptions().fomularJS({r:u,g:m,b:p,a:i}):u}},{key:"formaLinear",value:function(i,u){i.start&&(u[0]=i.start||0),i.end&&(u[1]=i.end||0),i.base&&(u[2]=i.base||0)}},{key:"loadTexture",value:function(i){var u=this,m=this.getOptions();m.source.image&&this.imageData?wo(this.gl,this.imageData.data,function(p,y){u.colorRamp=p,Mn(m.source.image)==="object"?(u.isOneBand=!0,wo(u.gl,m.source.image,function(v,M,R){u.texture=v,u.texturePixels=R,u.textureWidth=R.width,u.textureHeight=R.height,i&&i(),u.webglLayer.render()},{TEXTURE_MIN_FILTER:"NEAREST",TEXTURE_MAG_FILTER:"NEAREST",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"},{width:m.source.width,height:m.source.height,format:"LUMINANCE",type:"FLOAT"})):(u.isOneBand=!1,wo(u.gl,m.source.image,function(v,M,R){u.texture=v,u.texturePixels=R,u.textureWidth=R.width,u.textureHeight=R.height,i&&i(),u.webglLayer.render()},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}))},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"},{width:this.imageData.width,height:this.imageData.height,flipY:!0,format:"RGBA",type:"UNSIGNED_BYTE"}):(this.texture=null,i&&i())}},{key:"parseData",value:function(i){var u=this;if(this.vertexBuffer){var m=[],p=[];if(i&&i[0]){var y=i[0].geometry.coordinates[0];y=y.map(function(X){return u.normizedPoint(X)}),i=y[0][0];var v=y[0][1],M=y[2][0],R=y[2][1];this.bound=[i,v,M,R],this.gridRowMax>this.textureHeight&&(this.gridRowMax=this.textureHeight),this.gridColMax>this.textureWidth&&(this.gridColMax=this.textureWidth),y=this.isTerrain?this.gridColMax:1;var k=this.isTerrain?this.gridRowMax:1,_=y+1;M=(M-i)/y,R=(R-v)/k;for(var T=0;T<=k;T++)for(var O=0;O<=y;O++)if(m.push(i+M*O,v+R*T,0),m.push(O/y,T/k),O<y&&T<k){var U=_*T+O,G=_*(T+1)+O;p.push(U,G+1,U+1),p.push(U,G,G+1)}}this.index=p,this.vertexBuffer.updateData(new Float32Array(m)),this.indexBuffer.updateData(new Uint32Array(p))}}},{key:"getValue",value:function(i,u){return this.isTerrain&&i&&this.bound&&(i=this.normizedPoint(i),this.containsPoint(i,this.bound)&&(i=this.uvPoint(i,this.bound),u=this.pixelByUV(i,u,this.getOptions().fomularJS),u.result))?u:0}},{key:"containsPoint",value:function(i,u){if(i)return i[0]>=u[0]&&i[0]<=u[2]&&i[1]>=u[1]&&i[1]<=u[3]}},{key:"uvPoint",value:function(i,u){if(i)return[(i[0]-u[0])/(u[2]-u[0]),(u[3]-i[1])/(u[3]-u[1])]}},{key:"pixelByUV",value:function(i,u,m){if(this.texturePixels){var p=this.texturePixels,y=p.width,v=p.height,M=p.data,R=Math.floor(i[0]*(y-1));i=Math.floor(i[1]*(v-1));var k=1;return p.type==="RGBA"&&(k=4),this._getPixelBound(R,i,u,y,v,M,k,m)}return null}},{key:"_getPixelBound",value:function(i,u,m,p,y,v,M,R){var k=i-m;0>k&&(k=0),i+=m,i>p-1&&(i=p-1);var _=u-m;0>_&&(_=0),u+=m,u>y-1&&(u=y-1),m=y=0;for(var T=[0,0,0,1],O=k;O<=i;O++)for(var U=_;U<=u;U++){var G=(U*p+O)*M,X=v[G],W=v[G+this.min(0,M-3)],Y=v[G+this.min(0,M-2)];G=M===4?v[G+3]:1;var J=R?R({r:X,g:W,b:Y,a:G}):X;J>y&&(y=J,T=[X,W,Y,G]),m+=J}return{result:m/((i-k+1)*(u-_+1)),pixel:T,max:y}}},{key:"min",value:function(i,u){return u<i?i:u}}]),A}(ui);window._hmt_private||(window._hmt=window._hmt||[],function(){var a=document.createElement("script");a.src="https://hm.baidu.com/hm.js?e8002ef3d9e0d8274b5b74cc4a027d08";var A=document.getElementsByTagName("script")[0];A.parentNode.insertBefore(a,A)}()),Ut.version="1.0.0-beta.191",Ut.View=$d,Ut.CanvasLayer=ce,Ut.CircleLayer=function a(){var A=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return fr(this,a),Gp.includes(A.type)?new vc(A):new mc(A)},Ut.GridLayer=Qi,Ut.HeatGridLayer=bi,Ut.ShapeLayer=Ve,Ut.SimpleLineLayer=dh,Ut.LineLayer3D=yc,Ut.LineLayer=ou,Ut.LineRainbowLayer=Rm,Ut.WallSpriteLayer=Kp,Ut.LinePointLayer=dA,Ut.WallLayer=xx,Ut.WallTripLayer=Xi,Ut.HeatLineLayer=y1,Ut.HoneycombLayer=Cx,Ut.WebglLayer=ph,Ut.PointLayer=Za,Ut.GroundRippleLayer=Mx,Ut.RippleLayer=_x,Ut.SparkLayer=Bx,Ut.ClusterLayer=Ex,Ut.IconClusterLayer=Ix,Ut.HeatPointLayer=wc,Ut.ShapeLineLayer=Tx,Ut.PointTripLayer=Sx,Ut.LineTripLayer=$p,Ut.IconCollidesLayer=Lx,Ut.LineFlowLayer=w1,Ut.TileLayer=No,Ut.IconLayer=vn,Ut.BoardLayer=ha,Ut.PolygonLayer=ag,Ut.CarLineLayer=rd,Ut.Layer=ui,Ut.TextLayer=fA,Ut.BoardTextLayer=nd,Ut.LabelLayer=_c,Ut.TrafficLayer=Bc,Ut.GltfLayer=zm,Ut.HeatmapLayer=Ff,Ut.BarLayer=ug,Ut.MarkerListLayer=Qm,Ut.MaskLayer=bm,Ut.PointCanvasCustomLayer=Ox,Ut.PixelLayer=u0,Ut.FXAA=Np,Ut.SMAA=zp,Ut.BlurEffect=Qp,Ut.BloomEffect=Tl,Ut.BrightEffect=vf,Ut.DepthEffect=qd,Ut.EffectManager=gc,Ut.getContext=Ju,Ut.createTexture=or,Ut.loadTextureImage=wo,Ut.getBlend=Gs,Ut.FrameBufferObject=Zi,Ut.Program=Ur,Ut.StateManager=El,Ut.Buffer=ir,Ut.VertexArray=Li,Ut.CommonLayer=cA,Ut.MercatorProjection=Nn,Ut.Canvas=ns,Ut.Intensity=ci,Ut.BezierCurve=Ui,Ut.GeodesicCurve=ks,Ut.OdCurve=Qd,Ut.utilCity={getProvinceNameByCityName:function(a){for(var A=0;A<Pu.length;A++)for(var i=Pu[A].n,u=Pu[A].cities,m=0;m<u.length;m++)if(u[m].n==a)return i;return null},getCenterByCityName:function(a){a=a.replace("\u5E02","");for(var A=0;A<wp.length;A++)if(wp[A].n==a)return eA(wp[A].g);for(A=0;A<Cp.length;A++)if(Cp[A].n==a)return eA(Cp[A].g);for(A=0;A<Pu.length;A++){if(Pu[A].n==a)return eA(Pu[A].g);for(var i=Pu[A].cities,u=0;u<i.length;u++)if(i[u].n==a)return eA(i[u].g)}return null}},Ut.isMobile=bd,Ut.isIOSMobile=kd,Ut.Encryptor={encode:function(a){a=Jd.deflateRaw(a);for(var A=[],i=0;i<a.length;i++)A.push(a[i]^23);return new Uint8Array(A)},decode:function(a){a=new Uint8Array(a);for(var A=[],i=0;i<a.length;i++)A.push(a[i]^23);a=new Uint8Array(A);try{var u=window.flate.deflate_decode_raw(a);return new TextDecoder("utf-8").decode(u)}catch(m){return console.warn("inflate by pako!"),Jd.inflateRaw(a,{to:"string"})}},download:function(a,A){var i=new Blob([a],{type:"application/octet-binary"});a=document.createElement("a"),i=window.URL.createObjectURL(i),a.href=i,a.download=A||"mapvgl_download",a.click()}},Ut.createFusionView=function(a,A){var i=void 0,u=!1;a.addEventListener("glmoduleloaded",function(m){u||(u=!0,setTimeout(function(){i=new $d({cameraNear:10,cameraFar:4e3,gl:a._webglPainter.gl,canvas:a._webglPainter.gl.canvas,autoUpdate:!1,map:a}),i.webglLayer.canvas.style.zIndex=1;var p=i.webglLayer.stateManager;a.insertRender=function(){p.setState({blend:!0,depthTest:!1}),i.render()},A&&A(i)},3e3))}),setTimeout(function(){if(!u&&a._webglMapScene&&a._webglPainter&&a._webglPainter.gl&&a._webglPainter.gl.canvas){u=!0,i=new $d({cameraNear:10,cameraFar:4e3,gl:a._webglPainter.gl,canvas:a._webglPainter.gl.canvas,autoUpdate:!1,map:a}),i.webglLayer.canvas.style.zIndex=1;var m=i.webglLayer.stateManager;a.insertRender=function(){m.setState({blend:!0,depthTest:!1}),i.render()},A&&A(i)}},4e3)},Ut.toRadian=Ee,Ut.toAngle=gt,Ut.ceilPowerOfTwo=Qe,Ut.floorPowerOfTwo=Rn,Ut.approximatelyEqual=An,Ut.isClosed=Oe,Ut.generateColorRamp=Nh,Ut.__moduleExports=ls,Ut.vec4=Si,Ut.vec3=en,Ut.vec2=zn,Ut.quat2=qv,Ut.quat=dc,Ut.mat4=ur,Ut.mat3=xm,Ut.mat2d=wm,Ut.mat2=Bl,Ut.glMatrix=Hp,Object.defineProperty(Ut,"__esModule",{value:!0})})},98762:function(wn,se,Nt){function xe(Ut,ce,Gt){for(var Ot=ce.length,ue=new Uint8Array(3*Ot/4-(ce[Ot-2]=="="?2:ce[Ot-1]=="="?1:0)),ve=new Uint8Array(130),ct=0;64>ct;ct++)ve["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(ct)]=ct;for(var kt=ct=0;ct<Ot;ct+=4){var bt=ve[ce.charCodeAt(ct+1)],Ht=ve[ce.charCodeAt(ct+2)];ue[kt++]=ve[ce.charCodeAt(ct)]<<2|bt>>4,ue[kt++]=(bt&15)<<4|Ht>>2,ue[kt++]=(Ht&3)<<6|ve[ce.charCodeAt(ct+3)]&63}return Gt&&!Ut?WebAssembly.instantiate(ue,Gt):Gt||Ut?(Ut=new WebAssembly.Module(ue),Gt?new WebAssembly.Instance(Ut,Gt):Ut):WebAssembly.compile(ue)}(function(Ut,ce){ce(se)})(this,function(Ut){function ce(){throw Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function Gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ot(t,r){return r={exports:{}},t(r,r.exports),r.exports}function ue(t){var r,n;this.promise=new t(function(s,c){if(r!==void 0||n!==void 0)throw TypeError("Bad Promise constructor");r=s,n=c}),this.resolve=Ah(r),this.reject=Ah(n)}function ve(){}function ct(t,r){this.x=t||0,this.y=r||0}function kt(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function bt(t,r,n,s,c,h,d,f,x,E){Object.defineProperty(this,"id",{value:Fx++}),this.uuid=Jr.generateUUID(),this.name="",this.image=t!==void 0?t:bt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=r!==void 0?r:bt.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:1001,this.wrapT=s!==void 0?s:1001,this.magFilter=c!==void 0?c:1006,this.minFilter=h!==void 0?h:1008,this.anisotropy=x!==void 0?x:1,this.format=d!==void 0?d:1023,this.internalFormat=null,this.type=f!==void 0?f:1009,this.offset=new ct(0,0),this.repeat=new ct(1,1),this.center=new ct(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=E!==void 0?E:3e3,this.version=0,this.onUpdate=null}function Ht(t,r,n,s){this.x=t||0,this.y=r||0,this.z=n||0,this.w=s!==void 0?s:1}function Zt(t,r,n){this.width=t,this.height=r,this.scissor=new Ht(0,0,t,r),this.scissorTest=!1,this.viewport=new Ht(0,0,t,r),n=n||{},this.texture=new bt(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=r,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:1006,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!0,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}function he(t,r,n){Zt.call(this,t,r,n),this.samples=4}function Ee(t,r,n,s){this._x=t||0,this._y=r||0,this._z=n||0,this._w=s!==void 0?s:1}function gt(t,r,n){this.x=t||0,this.y=r||0,this.z=n||0}function Qe(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Rn(t,r,n,s){this._x=t||0,this._y=r||0,this._z=n||0,this._order=s||Rn.DefaultOrder}function An(){this.mask=1}function Oe(){Object.defineProperty(this,"id",{value:M1++}),this.uuid=Jr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Oe.DefaultUp.clone();var t=new gt,r=new Rn,n=new Ee,s=new gt(1,1,1);r._onChange(function(){n.setFromEuler(r,!1)}),n._onChange(function(){r.setFromQuaternion(n,void 0,!1)}),vn(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Qe},normalMatrix:{value:new kt}}),this.matrix=new Qe,this.matrixWorld=new Qe,this.matrixAutoUpdate=Oe.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new An,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Nn(){Oe.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.environment=this.background=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function hi(t,r){this.min=t!==void 0?t:new gt(Infinity,Infinity,Infinity),this.max=r!==void 0?r:new gt(-Infinity,-Infinity,-Infinity)}function Bi(t,r,n,s,c){var h,d=0;for(h=t.length-3;d<=h;d+=3){Rf.fromArray(t,d);var f=c.x*Math.abs(Rf.x)+c.y*Math.abs(Rf.y)+c.z*Math.abs(Rf.z),x=r.dot(Rf),E=n.dot(Rf),N=s.dot(Rf);if(Math.max(-Math.max(x,E,N),Math.min(x,E,N))>f)return!1}return!0}function mo(t,r){this.center=t!==void 0?t:new gt,this.radius=r!==void 0?r:-1}function ns(t,r){this.origin=t!==void 0?t:new gt,this.direction=r!==void 0?r:new gt(0,0,-1)}function ci(t,r){this.normal=t!==void 0?t:new gt(1,0,0),this.constant=r!==void 0?r:0}function Ui(t,r,n){this.a=t!==void 0?t:new gt,this.b=r!==void 0?r:new gt,this.c=n!==void 0?n:new gt}function Je(t,r,n){return r===void 0&&n===void 0?this.set(t):this.setRGB(t,r,n)}function ks(t,r,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(r-t)*n:.5>n?r:n<2/3?t+6*(r-t)*(2/3-n):t}function MA(t){return .04045>t?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function eA(t){return .0031308>t?12.92*t:1.055*Math.pow(t,.41666)-.055}function _A(t,r,n,s,c,h){this.a=t,this.b=r,this.c=n,this.normal=s&&s.isVector3?s:new gt,this.vertexNormals=Array.isArray(s)?s:[],this.color=c&&c.isColor?c:new Je,this.vertexColors=Array.isArray(c)?c:[],this.materialIndex=h!==void 0?h:0}function hn(){Object.defineProperty(this,"id",{value:ut++}),this.uuid=Jr.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=this.flatShading=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.version=0}function Qo(t){hn.call(this),this.type="MeshBasicMaterial",this.color=new Je(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphTargets=this.skinning=!1,this.setValues(t)}function Kr(t,r,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=r,this.count=t!==void 0?t.length/r:0,this.normalized=n===!0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function $f(t,r,n){Kr.call(this,new Int8Array(t),r,n)}function gu(t,r,n){Kr.call(this,new Uint8Array(t),r,n)}function Gl(t,r,n){Kr.call(this,new Uint8ClampedArray(t),r,n)}function Hh(t,r,n){Kr.call(this,new Int16Array(t),r,n)}function BA(t,r,n){Kr.call(this,new Uint16Array(t),r,n)}function EA(t,r,n){Kr.call(this,new Int32Array(t),r,n)}function Ju(t,r,n){Kr.call(this,new Uint32Array(t),r,n)}function or(t,r,n){Kr.call(this,new Float32Array(t),r,n)}function wo(t,r,n){Kr.call(this,new Float64Array(t),r,n)}function Gs(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Nh(t){if(t.length===0)return-Infinity;for(var r=t[0],n=1,s=t.length;n<s;++n)t[n]>r&&(r=t[n]);return r}function sr(){Object.defineProperty(this,"id",{value:wt+=2}),this.uuid=Jr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:Infinity},this.userData={}}function $i(t,r){Oe.call(this),this.type="Mesh",this.geometry=t!==void 0?t:new sr,this.material=r!==void 0?r:new Qo,this.updateMorphTargets()}function ge(t,r,n,s,c,h,d,f){return(r.side===1?s.intersectTriangle(d,h,c,!0,f):s.intersectTriangle(c,h,d,r.side!==2,f))===null?null:(B1.copy(f),B1.applyMatrix4(t.matrixWorld),r=n.ray.origin.distanceTo(B1),r<n.near||r>n.far?null:{distance:r,point:B1.clone(),object:t})}function rn(t,r,n,s,c,h,d,f,x,E,N,C){if(Ze.fromBufferAttribute(c,E),sn.fromBufferAttribute(c,N),an.fromBufferAttribute(c,C),c=t.morphTargetInfluences,r.morphTargets&&h&&c){ao.set(0,0,0),id.set(0,0,0),Wo.set(0,0,0);for(var I=0,S=h.length;I<S;I++){var F=c[I],D=h[I];F!==0&&(er.fromBufferAttribute(D,E),Ms.fromBufferAttribute(D,N),so.fromBufferAttribute(D,C),d?(ao.addScaledVector(er,F),id.addScaledVector(Ms,F),Wo.addScaledVector(so,F)):(ao.addScaledVector(er.sub(Ze),F),id.addScaledVector(Ms.sub(sn),F),Wo.addScaledVector(so.sub(an),F)))}Ze.add(ao),sn.add(id),an.add(Wo)}return t.isSkinnedMesh&&(t.boneTransform(E,Ze),t.boneTransform(N,sn),t.boneTransform(C,an)),(t=ge(t,r,n,s,Ze,sn,an,l0))&&(f&&(Ec.fromBufferAttribute(f,E),od.fromBufferAttribute(f,N),Dl.fromBufferAttribute(f,C),t.uv=Ui.getUV(l0,Ze,sn,an,Ec,od,Dl,new ct)),x&&(Ec.fromBufferAttribute(x,E),od.fromBufferAttribute(x,N),Dl.fromBufferAttribute(x,C),t.uv2=Ui.getUV(l0,Ze,sn,an,Ec,od,Dl,new ct)),f=new _A(E,N,C),Ui.getNormal(Ze,sn,an,f.normal),t.face=f),t}function ze(){Object.defineProperty(this,"id",{value:i_+=2}),this.uuid=Jr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function Sr(t){var r={},n;for(n in t){r[n]={};for(var s in t[n]){var c=t[n][s];c&&(c.isColor||c.isMatrix3||c.isMatrix4||c.isVector2||c.isVector3||c.isVector4||c.isTexture)?r[n][s]=c.clone():Array.isArray(c)?r[n][s]=c.slice():r[n][s]=c}}return r}function ar(t){for(var r={},n=0;n<t.length;n++){var s=Sr(t[n]),c;for(c in s)r[c]=s[c]}return r}function gr(t){hn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function un(){Oe.call(this),this.type="Camera",this.matrixWorldInverse=new Qe,this.projectionMatrix=new Qe,this.projectionMatrixInverse=new Qe}function Wr(t,r,n,s){un.call(this),this.type="PerspectiveCamera",this.fov=t!==void 0?t:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=s!==void 0?s:2e3,this.focus=10,this.aspect=r!==void 0?r:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Yr(t,r,n){if(Oe.call(this),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{this.renderTarget=n;var s=new Wr(90,1,t,r);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new gt(1,0,0)),this.add(s);var c=new Wr(90,1,t,r);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new gt(-1,0,0)),this.add(c);var h=new Wr(90,1,t,r);h.layers=this.layers,h.up.set(0,0,1),h.lookAt(new gt(0,1,0)),this.add(h);var d=new Wr(90,1,t,r);d.layers=this.layers,d.up.set(0,0,-1),d.lookAt(new gt(0,-1,0)),this.add(d);var f=new Wr(90,1,t,r);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new gt(0,0,1)),this.add(f);var x=new Wr(90,1,t,r);x.layers=this.layers,x.up.set(0,-1,0),x.lookAt(new gt(0,0,-1)),this.add(x),this.update=function(E,N){this.parent===null&&this.updateMatrixWorld();var C=E.xr.enabled,I=E.getRenderTarget();E.xr.enabled=!1;var S=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,E.setRenderTarget(n,0),E.render(N,s),E.setRenderTarget(n,1),E.render(N,c),E.setRenderTarget(n,2),E.render(N,h),E.setRenderTarget(n,3),E.render(N,d),E.setRenderTarget(n,4),E.render(N,f),n.texture.generateMipmaps=S,E.setRenderTarget(n,5),E.render(N,x),E.setRenderTarget(I),E.xr.enabled=C},this.clear=function(E,N,C,I){for(var S=E.getRenderTarget(),F=0;6>F;F++)E.setRenderTarget(n,F),E.clear(N,C,I);E.setRenderTarget(S)}}}function ri(t,r,n){$p(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=n),Zt.call(this,t,t,r)}function Vn(t,r,n,s,c,h,d,f,x,E,N,C){bt.call(this,null,h,d,f,x,E,s,c,N,C),this.image={data:t||null,width:r||1,height:n||1},this.magFilter=x!==void 0?x:1003,this.minFilter=E!==void 0?E:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1,this.needsUpdate=!0}function Pn(t,r,n,s,c,h){this.planes=[t!==void 0?t:new ci,r!==void 0?r:new ci,n!==void 0?n:new ci,s!==void 0?s:new ci,c!==void 0?c:new ci,h!==void 0?h:new ci]}function bn(){function t(c,h){n!==!1&&(s(c,h),r.requestAnimationFrame(t))}var r=null,n=!1,s=null;return{start:function(){n!==!0&&s!==null&&(r.requestAnimationFrame(t),n=!0)},stop:function(){n=!1},setAnimationLoop:function(c){s=c},setContext:function(c){r=c}}}function Zr(t,r){function n(h,d){var f=h.array,x=h.usage,E=t.createBuffer();return t.bindBuffer(d,E),t.bufferData(d,f,x),h.onUploadCallback(),d=5126,f instanceof Float32Array?d=5126:f instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):f instanceof Uint16Array?d=5123:f instanceof Int16Array?d=5122:f instanceof Uint32Array?d=5125:f instanceof Int32Array?d=5124:f instanceof Int8Array?d=5120:f instanceof Uint8Array&&(d=5121),{buffer:E,type:d,bytesPerElement:f.BYTES_PER_ELEMENT,version:h.version}}var s=r.isWebGL2,c=new mi;return{get:function(h){return h.isInterleavedBufferAttribute&&(h=h.data),c.get(h)},remove:function(h){h.isInterleavedBufferAttribute&&(h=h.data);var d=c.get(h);d&&(t.deleteBuffer(d.buffer),c.delete(h))},update:function(h,d){h.isInterleavedBufferAttribute&&(h=h.data);var f=c.get(h);if(f===void 0)c.set(h,n(h,d));else if(f.version<h.version){var x=h.array,E=h.updateRange;t.bindBuffer(d,f.buffer),E.count===-1?t.bufferSubData(d,0,x):(s?t.bufferSubData(d,E.offset*x.BYTES_PER_ELEMENT,x,E.offset,E.count):t.bufferSubData(d,E.offset*x.BYTES_PER_ELEMENT,x.subarray(E.offset,E.offset+E.count)),E.count=-1),f.version=h.version}}}}function jr(t,r,n,s){ze.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:n,heightSegments:s},this.fromBufferGeometry(new qr(t,r,n,s)),this.mergeVertices()}function qr(t,r,n,s){sr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:r,widthSegments:n,heightSegments:s},t=t||1,r=r||1;var c=t/2,h=r/2;n=Math.floor(n)||1,s=Math.floor(s)||1;var d=n+1,f=s+1,x=t/n,E=r/s,N=[],C=[],I=[],S=[];for(t=0;t<f;t++){var F=t*E-h;for(r=0;r<d;r++)C.push(r*x-c,-F,0),I.push(0,0,1),S.push(r/n),S.push(1-t/s)}for(t=0;t<s;t++)for(r=0;r<n;r++)c=r+d*(t+1),h=r+1+d*(t+1),f=r+1+d*t,N.push(r+d*t,c,f),N.push(c,h,f);this.setIndex(N),this.setAttribute("position",new or(C,3)),this.setAttribute("normal",new or(I,3)),this.setAttribute("uv",new or(S,2))}function nn(t,r,n,s){function c(I,S){r.buffers.color.setClear(I.r,I.g,I.b,S,s)}var h=new Je(0),d=0,f,x,E=null,N=0,C=null;return{getClearColor:function(){return h},setClearColor:function(I,S){h.set(I),d=S!==void 0?S:1,c(h,d)},getClearAlpha:function(){return d},setClearAlpha:function(I){d=I,c(h,d)},render:function(I,S,F,D){S=S.background,F=t.xr,(F=F.getSession&&F.getSession())&&F.environmentBlendMode==="additive"&&(S=null),S===null?c(h,d):S&&S.isColor&&(c(S,1),D=!0),(t.autoClear||D)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),S&&(S.isCubeTexture||S.isWebGLCubeRenderTarget||S.mapping===306)?(x===void 0&&(x=new $i(new I1(1,1,1),new gr({type:"BackgroundCubeMaterial",uniforms:Sr(Pf.cube.uniforms),vertexShader:Pf.cube.vertexShader,fragmentShader:Pf.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),x.geometry.deleteAttribute("uv"),x.onBeforeRender=function(K,Z,$){this.matrixWorld.copyPosition($.matrixWorld)},Object.defineProperty(x.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(x)),D=S.isWebGLCubeRenderTarget?S.texture:S,x.material.uniforms.envMap.value=D,x.material.uniforms.flipEnvMap.value=D.isCubeTexture?-1:1,(E!==S||N!==D.version||C!==t.toneMapping)&&(x.material.needsUpdate=!0,E=S,N=D.version,C=t.toneMapping),I.unshift(x,x.geometry,x.material,0,0,null)):S&&S.isTexture&&(f===void 0&&(f=new $i(new qr(2,2),new gr({type:"BackgroundMaterial",uniforms:Sr(Pf.background.uniforms),vertexShader:Pf.background.vertexShader,fragmentShader:Pf.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(f)),f.material.uniforms.t2D.value=S,S.matrixAutoUpdate===!0&&S.updateMatrix(),f.material.uniforms.uvTransform.value.copy(S.matrix),(E!==S||N!==S.version||C!==t.toneMapping)&&(f.material.needsUpdate=!0,E=S,N=S.version,C=t.toneMapping),I.unshift(f,f.geometry,f.material,0,0,null))}}}function Sn(t,r,n,s){var c=s.isWebGL2,h;this.setMode=function(d){h=d},this.render=function(d,f){t.drawArrays(h,d,f),n.update(f,h)},this.renderInstances=function(d,f,x,E){if(E!==0){if(c){d=t;var N="drawArraysInstanced"}else if(d=r.get("ANGLE_instanced_arrays"),N="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[N](h,f,x,E),n.update(x,h,E)}}}function wr(t,r,n){function s(st){if(st==="highp"){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";st="mediump"}return st==="mediump"&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var c,h=typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&t instanceof WebGL2ComputeRenderingContext,d=n.precision!==void 0?n.precision:"highp",f=s(d);f!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",f,"instead."),d=f),n=n.logarithmicDepthBuffer===!0,f=t.getParameter(34930);var x=t.getParameter(35660),E=t.getParameter(3379),N=t.getParameter(34076),C=t.getParameter(34921),I=t.getParameter(36347),S=t.getParameter(36348),F=t.getParameter(36349),D=0<x,K=h||!!r.get("OES_texture_float"),Z=D&&K,$=h?t.getParameter(36183):0;return{isWebGL2:h,getMaxAnisotropy:function(){if(c!==void 0)return c;var st=r.get("EXT_texture_filter_anisotropic");return c=st!==null?t.getParameter(st.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:s,precision:d,logarithmicDepthBuffer:n,maxTextures:f,maxVertexTextures:x,maxTextureSize:E,maxCubemapSize:N,maxAttributes:C,maxVertexUniforms:I,maxVaryings:S,maxFragmentUniforms:F,vertexTextures:D,floatFragmentTextures:K,floatVertexTextures:Z,maxSamples:$}}function Xn(){function t(){E.value!==s&&(E.value=s,E.needsUpdate=0<c),n.numPlanes=c,n.numIntersection=0}function r(N,C,I,S){var F=N!==null?N.length:0,D=null;if(F!==0){if(D=E.value,S!==!0||D===null)for(S=I+4*F,C=C.matrixWorldInverse,x.getNormalMatrix(C),(D===null||D.length<S)&&(D=new Float32Array(S)),S=0;S!==F;++S,I+=4)f.copy(N[S]).applyMatrix4(C,x),f.normal.toArray(D,I),D[I+3]=f.constant;E.value=D,E.needsUpdate=!0}return n.numPlanes=F,n.numIntersection=0,D}var n=this,s=null,c=0,h=!1,d=!1,f=new ci,x=new kt,E={value:null,needsUpdate:!1};this.uniform=E,this.numIntersection=this.numPlanes=0,this.init=function(N,C,I){var S=N.length!==0||C||c!==0||h;return h=C,s=r(N,I,0),c=N.length,S},this.beginShadows=function(){d=!0,r(null)},this.endShadows=function(){d=!1,t()},this.setState=function(N,C,I,S,F,D){if(!h||N===null||N.length===0||d&&!I)d?r(null):t();else{I=d?0:c;var K=4*I,Z=F.clippingState||null;for(E.value=Z,Z=r(N,S,K,D),N=0;N!==K;++N)Z[N]=s[N];F.clippingState=Z,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=I}}}function Di(t){var r={};return{get:function(n){if(r[n]!==void 0)return r[n];switch(n){case"WEBGL_depth_texture":var s=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=t.getExtension(n)}return s===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r[n]=s}}}function xi(t,r,n){function s(f){var x=f.target;f=h.get(x),f.index!==null&&r.remove(f.index);for(var E in f.attributes)r.remove(f.attributes[E]);x.removeEventListener("dispose",s),h.delete(x),(E=d.get(f))&&(r.remove(E),d.delete(f)),n.memory.geometries--}function c(f){var x=[],E=f.index,N=f.attributes.position;if(E!==null){var C=E.array;E=E.version,N=0;for(var I=C.length;N<I;N+=3){var S=C[N+0],F=C[N+1],D=C[N+2];x.push(S,F,F,D,D,S)}}else for(C=N.array,E=N.version,N=0,I=C.length/3-1;N<I;N+=3)S=N+0,F=N+1,D=N+2,x.push(S,F,F,D,D,S);x=new(65535<Nh(x)?Ju:BA)(x,1),x.version=E,r.update(x,34963),(C=d.get(f))&&r.remove(C),d.set(f,x)}var h=new mi,d=new mi;return{get:function(f,x){var E=h.get(x);return E||(x.addEventListener("dispose",s),x.isBufferGeometry?E=x:x.isGeometry&&(x._bufferGeometry===void 0&&(x._bufferGeometry=new sr().setFromObject(f)),E=x._bufferGeometry),h.set(x,E),n.memory.geometries++,E)},update:function(f){var x=f.index,E=f.attributes;x!==null&&r.update(x,34963);for(var N in E)r.update(E[N],34962);f=f.morphAttributes;for(N in f){x=f[N],E=0;for(var C=x.length;E<C;E++)r.update(x[E],34962)}},getWireframeAttribute:function(f){var x=d.get(f);if(x){var E=f.index;E!==null&&x.version<E.version&&c(f)}else c(f);return d.get(f)}}}function to(t,r,n,s){var c=s.isWebGL2,h,d,f;this.setMode=function(x){h=x},this.setIndex=function(x){d=x.type,f=x.bytesPerElement},this.render=function(x,E){t.drawElements(h,E,d,x*f),n.update(E,h)},this.renderInstances=function(x,E,N,C){if(C!==0){if(c){x=t;var I="drawElementsInstanced"}else if(x=r.get("ANGLE_instanced_arrays"),I="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[I](h,N,d,E*f,C),n.update(N,h,C)}}}function ai(t){var r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function(n,s,c){switch(c=c||1,r.calls++,s){case 4:r.triangles+=n/3*c;break;case 1:r.lines+=n/2*c;break;case 3:r.lines+=c*(n-1);break;case 2:r.lines+=c*n;break;case 0:r.points+=c*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}function Wi(t,r){return Math.abs(r[1])-Math.abs(t[1])}function Ei(t){var r={},n=new Float32Array(8);return{update:function(s,c,h,d){var f=s.morphTargetInfluences,x=f===void 0?0:f.length;if(s=r[c.id],s===void 0){s=[];for(var E=0;E<x;E++)s[E]=[E,0];r[c.id]=s}var N=h.morphTargets&&c.morphAttributes.position;for(h=h.morphNormals&&c.morphAttributes.normal,E=0;E<x;E++){var C=s[E];C[1]!==0&&(N&&c.deleteAttribute("morphTarget"+E),h&&c.deleteAttribute("morphNormal"+E))}for(E=0;E<x;E++)C=s[E],C[0]=E,C[1]=f[E];for(s.sort(Wi),E=f=0;8>E;E++){if((C=s[E])&&(x=C[0],C=C[1])){N&&c.setAttribute("morphTarget"+E,N[x]),h&&c.setAttribute("morphNormal"+E,h[x]),n[E]=C,f+=C;continue}n[E]=0}c=c.morphTargetsRelative?1:1-f,d.getUniforms().setValue(t,"morphTargetBaseInfluence",c),d.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function Ai(t,r,n,s){var c=new mi;return{update:function(h){var d=s.render.frame,f=h.geometry,x=r.get(h,f);return c.get(x)!==d&&(f.isGeometry&&x.updateFromObject(h),r.update(x),c.set(x,d)),h.isInstancedMesh&&n.update(h.instanceMatrix,34962),x},dispose:function(){c=new mi}}}function Oi(t,r,n,s,c,h,d,f,x,E){t=t!==void 0?t:[],bt.call(this,t,r!==void 0?r:301,n,s,c,h,d!==void 0?d:1022,f,x,E),this.flipY=!1}function wi(t,r,n,s){bt.call(this,null),this.image={data:t||null,width:r||1,height:n||1,depth:s||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function Fe(t,r,n,s){bt.call(this,null),this.image={data:t||null,width:r||1,height:n||1,depth:s||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function Ci(t,r,n){var s=t[0];if(0>=s||0<s)return t;var c=r*n,h=IC[c];if(h===void 0&&(h=new Float32Array(c),IC[c]=h),r!==0)for(s.toArray(h,0),s=1,c=0;s!==r;++s)c+=n,t[s].toArray(h,c);return h}function Hi(t,r){if(t.length!==r.length)return!1;for(var n=0,s=t.length;n<s;n++)if(t[n]!==r[n])return!1;return!0}function Ni(t,r){for(var n=0,s=r.length;n<s;n++)t[n]=r[n]}function Ii(t,r){var n=TC[r];n===void 0&&(n=new Int32Array(r),TC[r]=n);for(var s=0;s!==r;++s)n[s]=t.allocateTextureUnit();return n}function vo(t,r){var n=this.cache;n[0]!==r&&(t.uniform1f(this.addr,r),n[0]=r)}function Fo(t,r){var n=this.cache;r.x!==void 0?(n[0]!==r.x||n[1]!==r.y)&&(t.uniform2f(this.addr,r.x,r.y),n[0]=r.x,n[1]=r.y):Hi(n,r)||(t.uniform2fv(this.addr,r),Ni(n,r))}function bo(t,r){var n=this.cache;r.x!==void 0?(n[0]!==r.x||n[1]!==r.y||n[2]!==r.z)&&(t.uniform3f(this.addr,r.x,r.y,r.z),n[0]=r.x,n[1]=r.y,n[2]=r.z):r.r!==void 0?(n[0]!==r.r||n[1]!==r.g||n[2]!==r.b)&&(t.uniform3f(this.addr,r.r,r.g,r.b),n[0]=r.r,n[1]=r.g,n[2]=r.b):Hi(n,r)||(t.uniform3fv(this.addr,r),Ni(n,r))}function WA(t,r){var n=this.cache;r.x!==void 0?(n[0]!==r.x||n[1]!==r.y||n[2]!==r.z||n[3]!==r.w)&&(t.uniform4f(this.addr,r.x,r.y,r.z,r.w),n[0]=r.x,n[1]=r.y,n[2]=r.z,n[3]=r.w):Hi(n,r)||(t.uniform4fv(this.addr,r),Ni(n,r))}function rA(t,r){var n=this.cache,s=r.elements;s===void 0?Hi(n,r)||(t.uniformMatrix2fv(this.addr,!1,r),Ni(n,r)):Hi(n,s)||(FC.set(s),t.uniformMatrix2fv(this.addr,!1,FC),Ni(n,s))}function $r(t,r){var n=this.cache,s=r.elements;s===void 0?Hi(n,r)||(t.uniformMatrix3fv(this.addr,!1,r),Ni(n,r)):Hi(n,s)||(LC.set(s),t.uniformMatrix3fv(this.addr,!1,LC),Ni(n,s))}function Is(t,r){var n=this.cache,s=r.elements;s===void 0?Hi(n,r)||(t.uniformMatrix4fv(this.addr,!1,r),Ni(n,r)):Hi(n,s)||(SC.set(s),t.uniformMatrix4fv(this.addr,!1,SC),Ni(n,s))}function fa(t,r,n){var s=this.cache,c=n.allocateTextureUnit();s[0]!==c&&(t.uniform1i(this.addr,c),s[0]=c),n.safeSetTexture2D(r||BC,c)}function ko(t,r,n){var s=this.cache,c=n.allocateTextureUnit();s[0]!==c&&(t.uniform1i(this.addr,c),s[0]=c),n.setTexture2DArray(r||s_,c)}function Mi(t,r,n){var s=this.cache,c=n.allocateTextureUnit();s[0]!==c&&(t.uniform1i(this.addr,c),s[0]=c),n.setTexture3D(r||a_,c)}function Co(t,r,n){var s=this.cache,c=n.allocateTextureUnit();s[0]!==c&&(t.uniform1i(this.addr,c),s[0]=c),n.safeSetTextureCube(r||EC,c)}function nA(t,r){var n=this.cache;n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r)}function jA(t,r){var n=this.cache;Hi(n,r)||(t.uniform2iv(this.addr,r),Ni(n,r))}function mu(t,r){var n=this.cache;Hi(n,r)||(t.uniform3iv(this.addr,r),Ni(n,r))}function IA(t,r){var n=this.cache;Hi(n,r)||(t.uniform4iv(this.addr,r),Ni(n,r))}function XA(t,r){var n=this.cache;n[0]!==r&&(t.uniform1ui(this.addr,r),n[0]=r)}function pa(t){switch(t){case 5126:return vo;case 35664:return Fo;case 35665:return bo;case 35666:return WA;case 35674:return rA;case 35675:return $r;case 35676:return Is;case 5124:case 35670:return nA;case 35667:case 35671:return jA;case 35668:case 35672:return mu;case 35669:case 35673:return IA;case 5125:return XA;case 35678:case 36198:case 36298:case 36306:case 35682:return fa;case 35679:case 36299:case 36307:return Mi;case 35680:case 36300:case 36308:case 36293:return Co;case 36289:case 36303:case 36311:case 36292:return ko}}function Ro(t,r){t.uniform1fv(this.addr,r)}function vu(t,r){t.uniform1iv(this.addr,r)}function Da(t,r){t.uniform2iv(this.addr,r)}function tp(t,r){t.uniform3iv(this.addr,r)}function Ts(t,r){t.uniform4iv(this.addr,r)}function ep(t,r){r=Ci(r,this.size,2),t.uniform2fv(this.addr,r)}function Vl(t,r){r=Ci(r,this.size,3),t.uniform3fv(this.addr,r)}function is(t,r){r=Ci(r,this.size,4),t.uniform4fv(this.addr,r)}function zh(t,r){r=Ci(r,this.size,4),t.uniformMatrix2fv(this.addr,!1,r)}function Wl(t,r){r=Ci(r,this.size,9),t.uniformMatrix3fv(this.addr,!1,r)}function Qh(t,r){r=Ci(r,this.size,16),t.uniformMatrix4fv(this.addr,!1,r)}function Ss(t,r,n){var s=r.length,c=Ii(n,s);for(t.uniform1iv(this.addr,c),t=0;t!==s;++t)n.safeSetTexture2D(r[t]||BC,c[t])}function rp(t,r,n){var s=r.length,c=Ii(n,s);for(t.uniform1iv(this.addr,c),t=0;t!==s;++t)n.safeSetTextureCube(r[t]||EC,c[t])}function iA(t){switch(t){case 5126:return Ro;case 35664:return ep;case 35665:return Vl;case 35666:return is;case 35674:return zh;case 35675:return Wl;case 35676:return Qh;case 5124:case 35670:return vu;case 35667:case 35671:return Da;case 35668:case 35672:return tp;case 35669:case 35673:return Ts;case 35678:case 36198:case 36298:case 36306:case 35682:return Ss;case 35680:case 36300:case 36308:case 36293:return rp}}function yu(t,r,n){this.id=t,this.addr=n,this.cache=[],this.setValue=pa(r.type)}function da(t,r,n){this.id=t,this.addr=n,this.cache=[],this.size=r.size,this.setValue=iA(r.type)}function bh(t){this.id=t,this.seq=[],this.map={}}function ga(t,r){this.seq=[],this.map={};for(var n=t.getProgramParameter(r,35718),s=0;s<n;++s){var c=t.getActiveUniform(r,s),h=t.getUniformLocation(r,c.name),d=this,f=c.name,x=f.length;for(Nx.lastIndex=0;;){var E=Nx.exec(f),N=Nx.lastIndex,C=E[1],I=E[3];if(E[2]==="]"&&(C|=0),I===void 0||I==="["&&N+2===x){f=d,c=I===void 0?new yu(C,c,h):new da(C,c,h),f.seq.push(c),f.map[c.id]=c;break}else I=d.map[C],I===void 0&&(I=new bh(C),C=d,d=I,C.seq.push(d),C.map[d.id]=d),d=I}}}function np(t,r,n){return r=t.createShader(r),t.shaderSource(r,n),t.compileShader(r),r}function jl(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+t)}}function qu(t,r,n){var s=t.getShaderParameter(r,35713),c=t.getShaderInfoLog(r).trim();if(s&&c==="")return"";for(t=t.getShaderSource(r).split(`
`),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t=t.join(`
`),"THREE.WebGLShader: gl.getShaderInfoLog() "+n+`
`+c+t}function Oa(t,r){return r=jl(r),"vec4 "+t+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function ip(t,r){return r=jl(r),"vec4 "+t+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Vs(t,r){switch(r){case 1:r="Linear";break;case 2:r="Reinhard";break;case 3:r="Uncharted2";break;case 4:r="OptimizedCineon";break;case 5:r="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+r)}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Mo(t){var r=[],n;for(n in t){var s=t[n];s!==!1&&r.push("#define "+n+" "+s)}return r.join(`
`)}function Xl(t){return t!==""}function kh(t,r){return t.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,r.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,r.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,r.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,r.numPointLightShadows)}function $u(t,r){return t.replace(/NUM_CLIPPING_PLANES/g,r.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,r.numClippingPlanes-r.numClipIntersection)}function Gh(t,r){if(t=Ri[r],t===void 0)throw Error("Can not resolve #include <"+r+">");return t.replace(zx,Gh)}function fr(t,r,n,s){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ma(t,r,n,s)}function ma(t,r,n,s){for(t="",r=parseInt(r);r<parseInt(n);r++)t+=s.replace(/\[ i \]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return t}function op(t){var r="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?r+=`
#define HIGH_PRECISION`:t.precision==="mediump"?r+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(r+=`
#define LOW_PRECISION`),r}function Ti(t){var r="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===1?r="SHADOWMAP_TYPE_PCF":t.shadowMapType===2?r="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===3&&(r="SHADOWMAP_TYPE_VSM"),r}function sp(t){var r="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case 301:case 302:r="ENVMAP_TYPE_CUBE";break;case 306:case 307:r="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:r="ENVMAP_TYPE_EQUIREC";break;case 305:r="ENVMAP_TYPE_SPHERE"}return r}function ra(t){var r="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case 302:case 304:r="ENVMAP_MODE_REFRACTION"}return r}function bc(t){var r="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:r="ENVMAP_BLENDING_MULTIPLY";break;case 1:r="ENVMAP_BLENDING_MIX";break;case 2:r="ENVMAP_BLENDING_ADD"}return r}function Ha(t,r,n){var s=t.getContext(),c=n.defines,h=n.vertexShader,d=n.fragmentShader,f=Ti(n),x=sp(n),E=ra(n),N=bc(n),C=0<t.gammaFactor?t.gammaFactor:1,I=n.isWebGL2?"":[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xl).join(`
`),S=Mo(c),F=s.createProgram();n.isRawShaderMaterial?(c=[S].filter(Xl).join(`
`),0<c.length&&(c+=`
`),f=[I,S].filter(Xl).join(`
`),0<f.length&&(f+=`
`)):(c=[op(n),"#define SHADER_NAME "+n.shaderName,S,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+C,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+E:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xl).join(`
`),f=[I,op(n),"#define SHADER_NAME "+n.shaderName,S,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+C,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+x:"",n.envMap?"#define "+E:"",n.envMap?"#define "+N:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==0?"#define TONE_MAPPING":"",n.toneMapping!==0?Ri.tonemapping_pars_fragment:"",n.toneMapping!==0?Vs("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.matcapEncoding||n.envMapEncoding||n.emissiveMapEncoding||n.lightMapEncoding?Ri.encodings_pars_fragment:"",n.mapEncoding?Oa("mapTexelToLinear",n.mapEncoding):"",n.matcapEncoding?Oa("matcapTexelToLinear",n.matcapEncoding):"",n.envMapEncoding?Oa("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Oa("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMapEncoding?Oa("lightMapTexelToLinear",n.lightMapEncoding):"",n.outputEncoding?ip("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Xl).join(`
`)),h=h.replace(zx,Gh),h=kh(h,n),h=$u(h,n),d=d.replace(zx,Gh),d=kh(d,n),d=$u(d,n),h=h.replace(PC,ma).replace(RC,fr),d=d.replace(PC,ma).replace(RC,fr),n.isWebGL2&&!n.isRawShaderMaterial&&(x=!1,E=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&h.match(E)!==null&&d.match(E)!==null&&(x=!0,h=h.replace(E,""),d=d.replace(E,"")),c=`#version 300 es

#define attribute in
#define varying out
#define texture2D texture
`+c,f=[`#version 300 es

#define varying in`,x?"":"out highp vec4 pc_fragColor;",x?"":"#define gl_FragColor pc_fragColor",`#define gl_FragDepthEXT gl_FragDepth
#define texture2D texture
#define textureCube texture
#define texture2DProj textureProj
#define texture2DLodEXT textureLod
#define texture2DProjLodEXT textureProjLod
#define textureCubeLodEXT textureLod
#define texture2DGradEXT textureGrad
#define texture2DProjGradEXT textureProjGrad
#define textureCubeGradEXT textureGrad`].join(`
`)+`
`+f),d=f+d,h=np(s,35633,c+h),d=np(s,35632,d),s.attachShader(F,h),s.attachShader(F,d),n.index0AttributeName!==void 0?s.bindAttribLocation(F,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(F,0,"position"),s.linkProgram(F),t.debug.checkShaderErrors&&(t=s.getProgramInfoLog(F).trim(),x=s.getShaderInfoLog(h).trim(),E=s.getShaderInfoLog(d).trim(),C=N=!0,s.getProgramParameter(F,35714)===!1?(N=!1,I=qu(s,h,"vertex"),S=qu(s,d,"fragment"),console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(F,35715),"gl.getProgramInfoLog",t,I,S)):t!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):(x===""||E==="")&&(C=!1),C&&(this.diagnostics={runnable:N,programLog:t,vertexShader:{log:x,prefix:c},fragmentShader:{log:E,prefix:f}})),s.deleteShader(h),s.deleteShader(d);var D;this.getUniforms=function(){return D===void 0&&(D=new ga(s,F)),D};var K;return this.getAttributes=function(){if(K===void 0){for(var Z={},$=s.getProgramParameter(F,35721),st=0;st<$;st++){var ht=s.getActiveAttrib(F,st).name;Z[ht]=s.getAttribLocation(F,ht)}K=Z}return K},this.destroy=function(){s.deleteProgram(F),this.program=void 0},this.name=n.shaderName,this.id=A_++,this.cacheKey=r,this.usedTimes=1,this.program=F,this.vertexShader=h,this.fragmentShader=d,this}function kc(t,r,n){function s(S){if(S)S.isTexture?F=S.encoding:S.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),F=S.texture.encoding);else var F=3e3;return F}var c=[],h=n.isWebGL2,d=n.logarithmicDepthBuffer,f=n.floatVertexTextures,x=n.precision,E=n.maxVertexUniforms,N=n.vertexTextures,C={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},I="precision isWebGL2 supportsVertexTextures outputEncoding instancing map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(S,F,D,K,Z,$,st){var ht=K.fog;K=S.isMeshStandardMaterial?K.environment:null,K=S.envMap||K;var Et=C[S.type];if(st.isSkinnedMesh){var It=st.skeleton.bones;if(f)It=1024;else{var Bt=Math.min(Math.floor((E-20)/4),It.length);Bt<It.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+It.length+" bones. This GPU supports "+Bt+"."),It=0):It=Bt}}else It=0;S.precision!==null&&(x=n.getMaxPrecision(S.precision),x!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",x,"instead.")),Et?(Bt=Pf[Et],Bt={name:S.type,uniforms:lg.clone(Bt.uniforms),vertexShader:Bt.vertexShader,fragmentShader:Bt.fragmentShader}):Bt={name:S.type,uniforms:S.uniforms,vertexShader:S.vertexShader,fragmentShader:S.fragmentShader},S.onBeforeCompile(Bt,t);var Xt=t.getRenderTarget();return{isWebGL2:h,shaderID:Et,shaderName:Bt.name,uniforms:Bt.uniforms,vertexShader:Bt.vertexShader,fragmentShader:Bt.fragmentShader,defines:S.defines,isRawShaderMaterial:S.isRawShaderMaterial,isShaderMaterial:S.isShaderMaterial,precision:x,instancing:st.isInstancedMesh===!0,supportsVertexTextures:N,outputEncoding:Xt!==null?s(Xt.texture):t.outputEncoding,map:!!S.map,mapEncoding:s(S.map),matcap:!!S.matcap,matcapEncoding:s(S.matcap),envMap:!!K,envMapMode:K&&K.mapping,envMapEncoding:s(K),envMapCubeUV:!!K&&(K.mapping===306||K.mapping===307),lightMap:!!S.lightMap,lightMapEncoding:s(S.lightMap),aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,emissiveMapEncoding:s(S.emissiveMap),bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===1,tangentSpaceNormalMap:S.normalMapType===0,clearcoatMap:!!S.clearcoatMap,clearcoatRoughnessMap:!!S.clearcoatRoughnessMap,clearcoatNormalMap:!!S.clearcoatNormalMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,alphaMap:!!S.alphaMap,gradientMap:!!S.gradientMap,sheen:!!S.sheen,combine:S.combine,vertexTangents:S.normalMap&&S.vertexTangents,vertexColors:S.vertexColors,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.displacementMap,uvsVertexOnly:!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatNormalMap)&&!!S.displacementMap,fog:!!ht,useFog:S.fog,fogExp2:ht&&ht.isFogExp2,flatShading:S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:d,skinning:S.skinning&&0<It,maxBones:It,useVertexTexture:f,morphTargets:S.morphTargets,morphNormals:S.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numClippingPlanes:Z,numClipIntersection:$,dithering:S.dithering,shadowMapEnabled:t.shadowMap.enabled&&0<D.length,shadowMapType:t.shadowMap.type,toneMapping:S.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,alphaTest:S.alphaTest,doubleSided:S.side===2,flipSided:S.side===1,depthPacking:S.depthPacking!==void 0?S.depthPacking:!1,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||r.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:h||r.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:h||r.get("EXT_shader_texture_lod")!==null,onBeforeCompile:S.onBeforeCompile}},this.getProgramCacheKey=function(S){var F=[];if(S.shaderID?F.push(S.shaderID):(F.push(S.fragmentShader),F.push(S.vertexShader)),S.defines!==void 0)for(var D in S.defines)F.push(D),F.push(S.defines[D]);if(S.isRawShaderMaterial===void 0){for(D=0;D<I.length;D++)F.push(S[I[D]]);F.push(t.outputEncoding),F.push(t.gammaFactor)}return F.push(S.onBeforeCompile.toString()),F.join()},this.acquireProgram=function(S,F){for(var D,K=0,Z=c.length;K<Z;K++){var $=c[K];if($.cacheKey===F){D=$,++D.usedTimes;break}}return D===void 0&&(D=new Ha(t,F,S),c.push(D)),D},this.releaseProgram=function(S){if(--S.usedTimes==0){var F=c.indexOf(S);c[F]=c[c.length-1],c.pop(),S.destroy()}},this.programs=c}function Vh(){var t=new mi;return{get:function(r){var n=t.get(r);return n===void 0&&(n={},t.set(r,n)),n},remove:function(r){t.delete(r)},update:function(r,n,s){t.get(r)[n]=s},dispose:function(){t=new mi}}}function TA(t,r){return t.groupOrder!==r.groupOrder?t.groupOrder-r.groupOrder:t.renderOrder!==r.renderOrder?t.renderOrder-r.renderOrder:t.program!==r.program?t.program.id-r.program.id:t.material.id!==r.material.id?t.material.id-r.material.id:t.z!==r.z?t.z-r.z:t.id-r.id}function Po(t,r){return t.groupOrder!==r.groupOrder?t.groupOrder-r.groupOrder:t.renderOrder!==r.renderOrder?t.renderOrder-r.renderOrder:t.z!==r.z?r.z-t.z:t.id-r.id}function fi(){function t(d,f,x,E,N,C){var I=r[n];return I===void 0?(I={id:d.id,object:d,geometry:f,material:x,program:x.program||h,groupOrder:E,renderOrder:d.renderOrder,z:N,group:C},r[n]=I):(I.id=d.id,I.object=d,I.geometry=f,I.material=x,I.program=x.program||h,I.groupOrder=E,I.renderOrder=d.renderOrder,I.z=N,I.group=C),n++,I}var r=[],n=0,s=[],c=[],h={id:-1};return{opaque:s,transparent:c,init:function(){n=0,s.length=0,c.length=0},push:function(d,f,x,E,N,C){d=t(d,f,x,E,N,C),(x.transparent===!0?c:s).push(d)},unshift:function(d,f,x,E,N,C){d=t(d,f,x,E,N,C),(x.transparent===!0?c:s).unshift(d)},finish:function(){for(var d=n,f=r.length;d<f;d++){var x=r[d];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.program=null,x.group=null}},sort:function(d,f){1<s.length&&s.sort(d||TA),1<c.length&&c.sort(f||Po)}}}function Wn(){function t(n){n=n.target,n.removeEventListener("dispose",t),r.delete(n)}var r=new mi;return{get:function(n,s){var c=r.get(n);if(c===void 0){var h=new fi;r.set(n,new mi),r.get(n).set(s,h),n.addEventListener("dispose",t)}else h=c.get(s),h===void 0&&(h=new fi,c.set(s,h));return h},dispose:function(){r=new mi}}}function yo(){var t={};return{get:function(r){if(t[r.id]!==void 0)return t[r.id];switch(r.type){case"DirectionalLight":var n={direction:new gt,color:new Je};break;case"SpotLight":n={position:new gt,direction:new gt,color:new Je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new gt,color:new Je,distance:0,decay:0};break;case"HemisphereLight":n={direction:new gt,skyColor:new Je,groundColor:new Je};break;case"RectAreaLight":n={color:new Je,position:new gt,halfWidth:new gt,halfHeight:new gt}}return t[r.id]=n}}}function Cn(){var t={};return{get:function(r){if(t[r.id]!==void 0)return t[r.id];switch(r.type){case"DirectionalLight":var n={shadowBias:0,shadowRadius:1,shadowMapSize:new ct};break;case"SpotLight":n={shadowBias:0,shadowRadius:1,shadowMapSize:new ct};break;case"PointLight":n={shadowBias:0,shadowRadius:1,shadowMapSize:new ct,shadowCameraNear:1,shadowCameraFar:1e3}}return t[r.id]=n}}}function Ln(t,r){return(r.castShadow?1:0)-(t.castShadow?1:0)}function Na(){for(var t=new yo,r=Cn(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},s=0;9>s;s++)n.probe.push(new gt);var c=new gt,h=new Qe,d=new Qe;return{setup:function(f,x,E){for(var N=0,C=0,I=0,S=0;9>S;S++)n.probe[S].set(0,0,0);var F=x=0,D=0,K=0,Z=0,$=0,st=0,ht=0;E=E.matrixWorldInverse,f.sort(Ln),S=0;for(var Et=f.length;S<Et;S++){var It=f[S],Bt=It.color,Xt=It.intensity,Yt=It.distance,fe=It.shadow&&It.shadow.map?It.shadow.map.texture:null;if(It.isAmbientLight)N+=Bt.r*Xt,C+=Bt.g*Xt,I+=Bt.b*Xt;else if(It.isLightProbe)for(fe=0;9>fe;fe++)n.probe[fe].addScaledVector(It.sh.coefficients[fe],Xt);else if(It.isDirectionalLight){var te=t.get(It);te.color.copy(It.color).multiplyScalar(It.intensity),te.direction.setFromMatrixPosition(It.matrixWorld),c.setFromMatrixPosition(It.target.matrixWorld),te.direction.sub(c),te.direction.transformDirection(E),It.castShadow&&(Xt=It.shadow,Bt=r.get(It),Bt.shadowBias=Xt.bias,Bt.shadowRadius=Xt.radius,Bt.shadowMapSize=Xt.mapSize,n.directionalShadow[x]=Bt,n.directionalShadowMap[x]=fe,n.directionalShadowMatrix[x]=It.shadow.matrix,$++),n.directional[x]=te,x++}else It.isSpotLight?(te=t.get(It),te.position.setFromMatrixPosition(It.matrixWorld),te.position.applyMatrix4(E),te.color.copy(Bt).multiplyScalar(Xt),te.distance=Yt,te.direction.setFromMatrixPosition(It.matrixWorld),c.setFromMatrixPosition(It.target.matrixWorld),te.direction.sub(c),te.direction.transformDirection(E),te.coneCos=Math.cos(It.angle),te.penumbraCos=Math.cos(It.angle*(1-It.penumbra)),te.decay=It.decay,It.castShadow&&(Xt=It.shadow,Bt=r.get(It),Bt.shadowBias=Xt.bias,Bt.shadowRadius=Xt.radius,Bt.shadowMapSize=Xt.mapSize,n.spotShadow[D]=Bt,n.spotShadowMap[D]=fe,n.spotShadowMatrix[D]=It.shadow.matrix,ht++),n.spot[D]=te,D++):It.isRectAreaLight?(te=t.get(It),te.color.copy(Bt).multiplyScalar(Xt),te.position.setFromMatrixPosition(It.matrixWorld),te.position.applyMatrix4(E),d.identity(),h.copy(It.matrixWorld),h.premultiply(E),d.extractRotation(h),te.halfWidth.set(.5*It.width,0,0),te.halfHeight.set(0,.5*It.height,0),te.halfWidth.applyMatrix4(d),te.halfHeight.applyMatrix4(d),n.rectArea[K]=te,K++):It.isPointLight?(te=t.get(It),te.position.setFromMatrixPosition(It.matrixWorld),te.position.applyMatrix4(E),te.color.copy(It.color).multiplyScalar(It.intensity),te.distance=It.distance,te.decay=It.decay,It.castShadow&&(Xt=It.shadow,Bt=r.get(It),Bt.shadowBias=Xt.bias,Bt.shadowRadius=Xt.radius,Bt.shadowMapSize=Xt.mapSize,Bt.shadowCameraNear=Xt.camera.near,Bt.shadowCameraFar=Xt.camera.far,n.pointShadow[F]=Bt,n.pointShadowMap[F]=fe,n.pointShadowMatrix[F]=It.shadow.matrix,st++),n.point[F]=te,F++):It.isHemisphereLight&&(te=t.get(It),te.direction.setFromMatrixPosition(It.matrixWorld),te.direction.transformDirection(E),te.direction.normalize(),te.skyColor.copy(It.color).multiplyScalar(Xt),te.groundColor.copy(It.groundColor).multiplyScalar(Xt),n.hemi[Z]=te,Z++)}n.ambient[0]=N,n.ambient[1]=C,n.ambient[2]=I,f=n.hash,(f.directionalLength!==x||f.pointLength!==F||f.spotLength!==D||f.rectAreaLength!==K||f.hemiLength!==Z||f.numDirectionalShadows!==$||f.numPointShadows!==st||f.numSpotShadows!==ht)&&(n.directional.length=x,n.spot.length=D,n.rectArea.length=K,n.point.length=F,n.hemi.length=Z,n.directionalShadow.length=$,n.directionalShadowMap.length=$,n.pointShadow.length=st,n.pointShadowMap.length=st,n.spotShadow.length=ht,n.spotShadowMap.length=ht,n.directionalShadowMatrix.length=$,n.pointShadowMatrix.length=st,n.spotShadowMatrix.length=ht,f.directionalLength=x,f.pointLength=F,f.spotLength=D,f.rectAreaLength=K,f.hemiLength=Z,f.numDirectionalShadows=$,f.numPointShadows=st,f.numSpotShadows=ht,n.version=u_++)},state:n}}function SA(){var t=new Na,r=[],n=[];return{init:function(){r.length=0,n.length=0},state:{lightsArray:r,shadowsArray:n,lights:t},setupLights:function(s){t.setup(r,n,s)},pushLight:function(s){r.push(s)},pushShadow:function(s){n.push(s)}}}function Kl(){function t(n){n=n.target,n.removeEventListener("dispose",t),r.delete(n)}var r=new mi;return{get:function(n,s){if(r.has(n)===!1){var c=new SA;r.set(n,new mi),r.get(n).set(s,c),n.addEventListener("dispose",t)}else r.get(n).has(s)===!1?(c=new SA,r.get(n).set(s,c)):c=r.get(n).get(s);return c},dispose:function(){r=new mi}}}function za(t){hn.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Ko(t){hn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new gt,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function LA(t,r,n){function s(ht,Et,It){It=ht<<0|Et<<1|It<<2;var Bt=C[It];return Bt===void 0&&(Bt=new za({depthPacking:3201,morphTargets:ht,skinning:Et}),C[It]=Bt),Bt}function c(ht,Et,It){It=ht<<0|Et<<1|It<<2;var Bt=I[It];return Bt===void 0&&(Bt=new Ko({morphTargets:ht,skinning:Et}),I[It]=Bt),Bt}function h(ht,Et,It,Bt,Xt,Yt,fe){var te=s,le=ht.customDepthMaterial;return Bt.isPointLight===!0&&(te=c,le=ht.customDistanceMaterial),le===void 0?(le=!1,It.morphTargets===!0&&(le=Et.morphAttributes&&Et.morphAttributes.position&&0<Et.morphAttributes.position.length),Et=!1,ht.isSkinnedMesh===!0&&(It.skinning===!0?Et=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",ht)),ht=te(le,Et,ht.isInstancedMesh===!0)):ht=le,t.localClippingEnabled&&It.clipShadows===!0&&It.clippingPlanes.length!==0&&(le=ht.uuid,te=It.uuid,Et=S[le],Et===void 0&&(Et={},S[le]=Et),le=Et[te],le===void 0&&(le=ht.clone(),Et[te]=le),ht=le),ht.visible=It.visible,ht.wireframe=It.wireframe,ht.side=fe===3?It.shadowSide!==null?It.shadowSide:It.side:It.shadowSide!==null?It.shadowSide:F[It.side],ht.clipShadows=It.clipShadows,ht.clippingPlanes=It.clippingPlanes,ht.clipIntersection=It.clipIntersection,ht.wireframeLinewidth=It.wireframeLinewidth,ht.linewidth=It.linewidth,Bt.isPointLight===!0&&ht.isMeshDistanceMaterial===!0&&(ht.referencePosition.setFromMatrixPosition(Bt.matrixWorld),ht.nearDistance=Xt,ht.farDistance=Yt),ht}function d(ht,Et,It,Bt,Xt){if(ht.visible!==!1){if(ht.layers.test(Et.layers)&&(ht.isMesh||ht.isLine||ht.isPoints)&&(ht.castShadow||ht.receiveShadow&&Xt===3)&&(!ht.frustumCulled||f.intersectsObject(ht))){ht.modelViewMatrix.multiplyMatrices(It.matrixWorldInverse,ht.matrixWorld);var Yt=r.update(ht),fe=ht.material;if(Array.isArray(fe))for(var te=Yt.groups,le=0,tr=te.length;le<tr;le++){var Me=te[le],xr=fe[Me.materialIndex];xr&&xr.visible&&(xr=h(ht,Yt,xr,Bt,It.near,It.far,Xt),t.renderBufferDirect(It,null,Yt,xr,ht,Me))}else fe.visible&&(xr=h(ht,Yt,fe,Bt,It.near,It.far,Xt),t.renderBufferDirect(It,null,Yt,xr,ht,null))}for(ht=ht.children,Yt=0,fe=ht.length;Yt<fe;Yt++)d(ht[Yt],Et,It,Bt,Xt)}}var f=new Pn,x=new ct,E=new ct,N=new Ht,C=[],I=[],S={},F={0:1,1:0,2:2},D=new gr({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new ct},radius:{value:4}},vertexShader:`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`}),K=D.clone();K.defines.HORIZONAL_PASS=1;var Z=new sr;Z.setAttribute("position",new Kr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var $=new $i(Z,D),st=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(ht,Et,It){if(st.enabled!==!1&&(st.autoUpdate!==!1||st.needsUpdate!==!1)&&ht.length!==0){var Bt=t.getRenderTarget(),Xt=t.getActiveCubeFace(),Yt=t.getActiveMipmapLevel(),fe=t.state;fe.setBlending(0),fe.buffers.color.setClear(1,1,1,1),fe.buffers.depth.setTest(!0),fe.setScissorTest(!1);for(var te=0,le=ht.length;te<le;te++){var tr=ht[te],Me=tr.shadow;if(Me===void 0)console.warn("THREE.WebGLShadowMap:",tr,"has no shadow.");else{x.copy(Me.mapSize);var xr=Me.getFrameExtents();x.multiply(xr),E.copy(Me.mapSize),(x.x>n||x.y>n)&&(x.x>n&&(E.x=Math.floor(n/xr.x),x.x=E.x*xr.x,Me.mapSize.x=E.x),x.y>n&&(E.y=Math.floor(n/xr.y),x.y=E.y*xr.y,Me.mapSize.y=E.y)),Me.map!==null||Me.isPointLightShadow||this.type!==3||(xr={minFilter:1006,magFilter:1006,format:1023},Me.map=new Zt(x.x,x.y,xr),Me.map.texture.name=tr.name+".shadowMap",Me.mapPass=new Zt(x.x,x.y,xr),Me.camera.updateProjectionMatrix()),Me.map===null&&(xr={minFilter:1003,magFilter:1003,format:1023},Me.map=new Zt(x.x,x.y,xr),Me.map.texture.name=tr.name+".shadowMap",Me.camera.updateProjectionMatrix()),t.setRenderTarget(Me.map),t.clear(),xr=Me.getViewportCount();for(var br=0;br<xr;br++){var _r=Me.getViewport(br);N.set(E.x*_r.x,E.y*_r.y,E.x*_r.z,E.y*_r.w),fe.viewport(N),Me.updateMatrices(tr,br),f=Me.getFrustum(),d(Et,It,Me.camera,tr,this.type)}Me.isPointLightShadow||this.type!==3||(tr=Me,Me=It,xr=r.update($),D.uniforms.shadow_pass.value=tr.map.texture,D.uniforms.resolution.value=tr.mapSize,D.uniforms.radius.value=tr.radius,t.setRenderTarget(tr.mapPass),t.clear(),t.renderBufferDirect(Me,null,xr,D,$,null),K.uniforms.shadow_pass.value=tr.mapPass.texture,K.uniforms.resolution.value=tr.mapSize,K.uniforms.radius.value=tr.radius,t.setRenderTarget(tr.map),t.clear(),t.renderBufferDirect(Me,null,xr,K,$,null))}}st.needsUpdate=!1,t.setRenderTarget(Bt,Xt,Yt)}}}function ap(t,r,n){function s(xt,Se,Re){var Te=new Uint8Array(4),ye=t.createTexture();for(t.bindTexture(xt,ye),t.texParameteri(xt,10241,9728),t.texParameteri(xt,10240,9728),xt=0;xt<Re;xt++)t.texImage2D(Se+xt,0,6408,1,1,0,6408,5121,Te);return ye}function c(xt,Se){$[xt]=1,st[xt]===0&&(t.enableVertexAttribArray(xt),st[xt]=1),ht[xt]!==Se&&((F?t:r.get("ANGLE_instanced_arrays"))[F?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](xt,Se),ht[xt]=Se)}function h(xt){Et[xt]!==!0&&(t.enable(xt),Et[xt]=!0)}function d(xt){Et[xt]!==!1&&(t.disable(xt),Et[xt]=!1)}function f(xt,Se,Re,Te,ye,He,kr,cn){if(xt===0)Bt&&(d(3042),Bt=!1);else if(Bt||(h(3042),Bt=!0),xt!==5){if(xt!==Xt||cn!==xr){if((Yt!==100||le!==100)&&(t.blendEquation(32774),le=Yt=100),cn)switch(xt){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",xt)}else switch(xt){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",xt)}Me=tr=te=fe=null,Xt=xt,xr=cn}}else ye=ye||Se,He=He||Re,kr=kr||Te,(Se!==Yt||ye!==le)&&(t.blendEquationSeparate(Jt[Se],Jt[ye]),Yt=Se,le=ye),(Re!==fe||Te!==te||He!==tr||kr!==Me)&&(t.blendFuncSeparate(ae[Re],ae[Te],ae[He],ae[kr]),fe=Re,te=Te,tr=He,Me=kr),Xt=xt,xr=null}function x(xt){br!==xt&&(xt?t.frontFace(2304):t.frontFace(2305),br=xt)}function E(xt){xt!==0?(h(2884),xt!==_r&&(xt===1?t.cullFace(1029):xt===2?t.cullFace(1028):t.cullFace(1032))):d(2884),_r=xt}function N(xt,Se,Re){xt?(h(32823),(Dr!==Se||Ct!==Re)&&(t.polygonOffset(Se,Re),Dr=Se,Ct=Re)):d(32823)}function C(xt){xt===void 0&&(xt=33984+Mt-1),Pt!==xt&&(t.activeTexture(xt),Pt=xt)}var I,S,F=n.isWebGL2,D=new function(){var xt=!1,Se=new Ht,Re=null,Te=new Ht(0,0,0,0);return{setMask:function(ye){Re===ye||xt||(t.colorMask(ye,ye,ye,ye),Re=ye)},setLocked:function(ye){xt=ye},setClear:function(ye,He,kr,cn,Pe){Pe===!0&&(ye*=cn,He*=cn,kr*=cn),Se.set(ye,He,kr,cn),Te.equals(Se)===!1&&(t.clearColor(ye,He,kr,cn),Te.copy(Se))},reset:function(){xt=!1,Re=null,Te.set(-1,0,0,0)}}},K=new function(){var xt=!1,Se=null,Re=null,Te=null;return{setTest:function(ye){ye?h(2929):d(2929)},setMask:function(ye){Se===ye||xt||(t.depthMask(ye),Se=ye)},setFunc:function(ye){if(Re!==ye){if(ye)switch(ye){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);Re=ye}},setLocked:function(ye){xt=ye},setClear:function(ye){Te!==ye&&(t.clearDepth(ye),Te=ye)},reset:function(){xt=!1,Te=Re=Se=null}}},Z=new function(){var xt=!1,Se=null,Re=null,Te=null,ye=null,He=null,kr=null,cn=null,Pe=null;return{setTest:function(Br){xt||(Br?h(2960):d(2960))},setMask:function(Br){Se===Br||xt||(t.stencilMask(Br),Se=Br)},setFunc:function(Br,Bn,dr){(Re!==Br||Te!==Bn||ye!==dr)&&(t.stencilFunc(Br,Bn,dr),Re=Br,Te=Bn,ye=dr)},setOp:function(Br,Bn,dr){(He!==Br||kr!==Bn||cn!==dr)&&(t.stencilOp(Br,Bn,dr),He=Br,kr=Bn,cn=dr)},setLocked:function(Br){xt=Br},setClear:function(Br){Pe!==Br&&(t.clearStencil(Br),Pe=Br)},reset:function(){xt=!1,Pe=cn=kr=He=ye=Te=Re=Se=null}}};n=t.getParameter(34921);var $=new Uint8Array(n),st=new Uint8Array(n),ht=new Uint8Array(n),Et={},It=null,Bt=null,Xt=null,Yt=null,fe=null,te=null,le=null,tr=null,Me=null,xr=!1,br=null,_r=null,Gn=null,Dr=null,Ct=null,Mt=t.getParameter(35661),_t=!1;n=0,n=t.getParameter(7938),n.indexOf("WebGL")!==-1?(n=parseFloat(/^WebGL ([0-9])/.exec(n)[1]),_t=1<=n):n.indexOf("OpenGL ES")!==-1&&(n=parseFloat(/^OpenGL ES ([0-9])/.exec(n)[1]),_t=2<=n);var Pt=null,at={},vt=new Ht,yt=new Ht,Dt={};Dt[3553]=s(3553,3553,1),Dt[34067]=s(34067,34069,6),D.setClear(0,0,0,1),K.setClear(1),Z.setClear(0),h(2929),K.setFunc(3),x(!1),E(1),h(2884),f(0);var Jt=(I={},Fr(I,100,32774),Fr(I,101,32778),Fr(I,102,32779),I);F?(Jt[103]=32775,Jt[104]=32776):(I=r.get("EXT_blend_minmax"),I!==null&&(Jt[103]=I.MIN_EXT,Jt[104]=I.MAX_EXT));var ae=(S={},Fr(S,200,0),Fr(S,201,1),Fr(S,202,768),Fr(S,204,770),Fr(S,210,776),Fr(S,208,774),Fr(S,206,772),Fr(S,203,769),Fr(S,205,771),Fr(S,209,775),Fr(S,207,773),S);return{buffers:{color:D,depth:K,stencil:Z},initAttributes:function(){for(var xt=0,Se=$.length;xt<Se;xt++)$[xt]=0},enableAttribute:function(xt){c(xt,0)},enableAttributeAndDivisor:c,disableUnusedAttributes:function(){for(var xt=0,Se=st.length;xt!==Se;++xt)st[xt]!==$[xt]&&(t.disableVertexAttribArray(xt),st[xt]=0)},vertexAttribPointer:function(xt,Se,Re,Te,ye,He){F!==!0||Re!==5124&&Re!==5125?t.vertexAttribPointer(xt,Se,Re,Te,ye,He):t.vertexAttribIPointer(xt,Se,Re,Te,ye,He)},enable:h,disable:d,useProgram:function(xt){return It!==xt?(t.useProgram(xt),It=xt,!0):!1},setBlending:f,setMaterial:function(xt,Se){xt.side===2?d(2884):h(2884);var Re=xt.side===1;Se&&(Re=!Re),x(Re),xt.blending===1&&xt.transparent===!1?f(0):f(xt.blending,xt.blendEquation,xt.blendSrc,xt.blendDst,xt.blendEquationAlpha,xt.blendSrcAlpha,xt.blendDstAlpha,xt.premultipliedAlpha),K.setFunc(xt.depthFunc),K.setTest(xt.depthTest),K.setMask(xt.depthWrite),D.setMask(xt.colorWrite),Se=xt.stencilWrite,Z.setTest(Se),Se&&(Z.setMask(xt.stencilWriteMask),Z.setFunc(xt.stencilFunc,xt.stencilRef,xt.stencilFuncMask),Z.setOp(xt.stencilFail,xt.stencilZFail,xt.stencilZPass)),N(xt.polygonOffset,xt.polygonOffsetFactor,xt.polygonOffsetUnits)},setFlipSided:x,setCullFace:E,setLineWidth:function(xt){xt!==Gn&&(_t&&t.lineWidth(xt),Gn=xt)},setPolygonOffset:N,setScissorTest:function(xt){xt?h(3089):d(3089)},activeTexture:C,bindTexture:function(xt,Se){Pt===null&&C();var Re=at[Pt];Re===void 0&&(Re={type:void 0,texture:void 0},at[Pt]=Re),(Re.type!==xt||Re.texture!==Se)&&(t.bindTexture(xt,Se||Dt[xt]),Re.type=xt,Re.texture=Se)},unbindTexture:function(){var xt=at[Pt];xt!==void 0&&xt.type!==void 0&&(t.bindTexture(xt.type,null),xt.type=void 0,xt.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(xt){console.error("THREE.WebGLState:",xt)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(xt){console.error("THREE.WebGLState:",xt)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(xt){console.error("THREE.WebGLState:",xt)}},scissor:function(xt){vt.equals(xt)===!1&&(t.scissor(xt.x,xt.y,xt.z,xt.w),vt.copy(xt))},viewport:function(xt){yt.equals(xt)===!1&&(t.viewport(xt.x,xt.y,xt.z,xt.w),yt.copy(xt))},reset:function(){for(var xt=0;xt<st.length;xt++)st[xt]===1&&(t.disableVertexAttribArray(xt),st[xt]=0);Et={},Pt=null,at={},_r=br=Xt=It=null,D.reset(),K.reset(),Z.reset()}}}function Xg(t,r,n,s,c,h,d){function f(at,vt){return Gn?new OffscreenCanvas(at,vt):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function x(at,vt,yt,Dt){var Jt=1;if((at.width>Dt||at.height>Dt)&&(Jt=Dt/Math.max(at.width,at.height)),1>Jt||vt===!0){if(typeof HTMLImageElement!="undefined"&&at instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&at instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&at instanceof ImageBitmap)return Dt=vt?Jr.floorPowerOfTwo:Math.floor,vt=Dt(Jt*at.width),Jt=Dt(Jt*at.height),_r===void 0&&(_r=f(vt,Jt)),yt=yt?f(vt,Jt):_r,yt.width=vt,yt.height=Jt,yt.getContext("2d").drawImage(at,0,0,vt,Jt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+at.width+"x"+at.height+") to ("+vt+"x"+Jt+")."),yt;"data"in at&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+at.width+"x"+at.height+").")}return at}function E(at){return Jr.isPowerOfTwo(at.width)&&Jr.isPowerOfTwo(at.height)}function N(at,vt){return at.generateMipmaps&&vt&&at.minFilter!==1003&&at.minFilter!==1006}function C(at,vt,yt,Dt){t.generateMipmap(at),s.get(vt).__maxMipLevel=Math.log(Math.max(yt,Dt))*Math.LOG2E}function I(at,vt,yt){if(te===!1)return vt;if(at!==null){if(t[at]!==void 0)return t[at];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+at+"'")}return at=vt,vt===6403&&(yt===5126&&(at=33326),yt===5131&&(at=33325),yt===5121&&(at=33321)),vt===6407&&(yt===5126&&(at=34837),yt===5131&&(at=34843),yt===5121&&(at=32849)),vt===6408&&(yt===5126&&(at=34836),yt===5131&&(at=34842),yt===5121&&(at=32856)),at!==33325&&at!==33326&&at!==34842&&at!==34836||r.get("EXT_color_buffer_float"),at}function S(at){return at===1003||at===1004||at===1005?9728:9729}function F(at){at=at.target,at.removeEventListener("dispose",F);var vt=s.get(at);vt.__webglInit!==void 0&&(t.deleteTexture(vt.__webglTexture),s.remove(at)),at.isVideoTexture&&br.delete(at),d.memory.textures--}function D(at){at=at.target,at.removeEventListener("dispose",D);var vt=s.get(at),yt=s.get(at.texture);if(at){if(yt.__webglTexture!==void 0&&t.deleteTexture(yt.__webglTexture),at.depthTexture&&at.depthTexture.dispose(),at.isWebGLCubeRenderTarget)for(yt=0;6>yt;yt++)t.deleteFramebuffer(vt.__webglFramebuffer[yt]),vt.__webglDepthbuffer&&t.deleteRenderbuffer(vt.__webglDepthbuffer[yt]);else t.deleteFramebuffer(vt.__webglFramebuffer),vt.__webglDepthbuffer&&t.deleteRenderbuffer(vt.__webglDepthbuffer),vt.__webglMultisampledFramebuffer&&t.deleteFramebuffer(vt.__webglMultisampledFramebuffer),vt.__webglColorRenderbuffer&&t.deleteRenderbuffer(vt.__webglColorRenderbuffer),vt.__webglDepthRenderbuffer&&t.deleteRenderbuffer(vt.__webglDepthRenderbuffer);s.remove(at.texture),s.remove(at)}d.memory.textures--}function K(at,vt){var yt=s.get(at);if(at.isVideoTexture){var Dt=d.render.frame;br.get(at)!==Dt&&(br.set(at,Dt),at.update())}if(0<at.version&&yt.__version!==at.version)if(Dt=at.image,Dt===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Dt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Et(yt,at,vt);return}n.activeTexture(33984+vt),n.bindTexture(3553,yt.__webglTexture)}function Z(at,vt){if(at.image.length===6){var yt=s.get(at);if(0<at.version&&yt.__version!==at.version){ht(yt,at),n.activeTexture(33984+vt),n.bindTexture(34067,yt.__webglTexture),t.pixelStorei(37440,at.flipY);var Dt=at&&(at.isCompressedTexture||at.image[0].isCompressedTexture);vt=at.image[0]&&at.image[0].isDataTexture;for(var Jt=[],ae=0;6>ae;ae++)Jt[ae]=Dt||vt?vt?at.image[ae].image:at.image[ae]:x(at.image[ae],!1,!0,tr);var xt=Jt[0],Se=E(xt)||te,Re=h.convert(at.format),Te=h.convert(at.type),ye=I(at.internalFormat,Re,Te);if(st(34067,at,Se),Dt){for(ae=0;6>ae;ae++){var He=Jt[ae].mipmaps;for(Dt=0;Dt<He.length;Dt++){var kr=He[Dt];at.format!==1023&&at.format!==1022?Re!==null?n.compressedTexImage2D(34069+ae,Dt,ye,kr.width,kr.height,0,kr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+ae,Dt,ye,kr.width,kr.height,0,Re,Te,kr.data)}}yt.__maxMipLevel=He.length-1}else{for(He=at.mipmaps,ae=0;6>ae;ae++)if(vt)for(n.texImage2D(34069+ae,0,ye,Jt[ae].width,Jt[ae].height,0,Re,Te,Jt[ae].data),Dt=0;Dt<He.length;Dt++)kr=He[Dt],kr=kr.image[ae].image,n.texImage2D(34069+ae,Dt+1,ye,kr.width,kr.height,0,Re,Te,kr.data);else for(n.texImage2D(34069+ae,0,ye,Re,Te,Jt[ae]),Dt=0;Dt<He.length;Dt++)kr=He[Dt],n.texImage2D(34069+ae,Dt+1,ye,Re,Te,kr.image[ae]);yt.__maxMipLevel=He.length}N(at,Se)&&C(34067,at,xt.width,xt.height),yt.__version=at.version,at.onUpdate&&at.onUpdate(at)}else n.activeTexture(33984+vt),n.bindTexture(34067,yt.__webglTexture)}}function $(at,vt){n.activeTexture(33984+vt),n.bindTexture(34067,s.get(at).__webglTexture)}function st(at,vt,yt){yt?(t.texParameteri(at,10242,Ct[vt.wrapS]),t.texParameteri(at,10243,Ct[vt.wrapT]),at!==32879&&at!==35866||t.texParameteri(at,32882,Ct[vt.wrapR]),t.texParameteri(at,10240,Mt[vt.magFilter]),t.texParameteri(at,10241,Mt[vt.minFilter])):(t.texParameteri(at,10242,33071),t.texParameteri(at,10243,33071),at!==32879&&at!==35866||t.texParameteri(at,32882,33071),vt.wrapS===1001&&vt.wrapT===1001||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(at,10240,S(vt.magFilter)),t.texParameteri(at,10241,S(vt.minFilter)),vt.minFilter!==1003&&vt.minFilter!==1006&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(yt=r.get("EXT_texture_filter_anisotropic"))||vt.type===1015&&r.get("OES_texture_float_linear")===null||vt.type===1016&&(te||r.get("OES_texture_half_float_linear"))===null||!(1<vt.anisotropy||s.get(vt).__currentAnisotropy)||(t.texParameterf(at,yt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(vt.anisotropy,c.getMaxAnisotropy())),s.get(vt).__currentAnisotropy=vt.anisotropy)}function ht(at,vt){at.__webglInit===void 0&&(at.__webglInit=!0,vt.addEventListener("dispose",F),at.__webglTexture=t.createTexture(),d.memory.textures++)}function Et(at,vt,yt){var Dt=3553;vt.isDataTexture2DArray&&(Dt=35866),vt.isDataTexture3D&&(Dt=32879),ht(at,vt),n.activeTexture(33984+yt),n.bindTexture(Dt,at.__webglTexture),t.pixelStorei(37440,vt.flipY),t.pixelStorei(37441,vt.premultiplyAlpha),t.pixelStorei(3317,vt.unpackAlignment),yt=te?!1:vt.wrapS!==1001||vt.wrapT!==1001||vt.minFilter!==1003&&vt.minFilter!==1006,yt=yt&&E(vt.image)===!1,yt=x(vt.image,yt,!1,Me);var Jt=E(yt)||te,ae=h.convert(vt.format),xt=h.convert(vt.type),Se=I(vt.internalFormat,ae,xt);st(Dt,vt,Jt);var Re=vt.mipmaps;if(vt.isDepthTexture)Se=6402,te?Se=vt.type===1015?36012:vt.type===1014?33190:vt.type===1020?35056:33189:vt.type===1015&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),vt.format===1026&&Se===6402&&vt.type!==1012&&vt.type!==1014&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),vt.type=1012,xt=h.convert(vt.type)),vt.format===1027&&Se===6402&&(Se=34041,vt.type!==1020&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),vt.type=1020,xt=h.convert(vt.type))),n.texImage2D(3553,0,Se,yt.width,yt.height,0,ae,xt,null);else if(vt.isDataTexture)if(0<Re.length&&Jt){for(var Te=0,ye=Re.length;Te<ye;Te++){var He=Re[Te];n.texImage2D(3553,Te,Se,He.width,He.height,0,ae,xt,He.data)}vt.generateMipmaps=!1,at.__maxMipLevel=Re.length-1}else n.texImage2D(3553,0,Se,yt.width,yt.height,0,ae,xt,yt.data),at.__maxMipLevel=0;else if(vt.isCompressedTexture){for(Te=0,ye=Re.length;Te<ye;Te++)He=Re[Te],vt.format!==1023&&vt.format!==1022?ae!==null?n.compressedTexImage2D(3553,Te,Se,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,Te,Se,He.width,He.height,0,ae,xt,He.data);at.__maxMipLevel=Re.length-1}else if(vt.isDataTexture2DArray)n.texImage3D(35866,0,Se,yt.width,yt.height,yt.depth,0,ae,xt,yt.data),at.__maxMipLevel=0;else if(vt.isDataTexture3D)n.texImage3D(32879,0,Se,yt.width,yt.height,yt.depth,0,ae,xt,yt.data),at.__maxMipLevel=0;else if(0<Re.length&&Jt){for(Te=0,ye=Re.length;Te<ye;Te++)He=Re[Te],n.texImage2D(3553,Te,Se,ae,xt,He);vt.generateMipmaps=!1,at.__maxMipLevel=Re.length-1}else n.texImage2D(3553,0,Se,ae,xt,yt),at.__maxMipLevel=0;N(vt,Jt)&&C(Dt,vt,yt.width,yt.height),at.__version=vt.version,vt.onUpdate&&vt.onUpdate(vt)}function It(at,vt,yt,Dt){var Jt=h.convert(vt.texture.format),ae=h.convert(vt.texture.type),xt=I(vt.texture.internalFormat,Jt,ae);n.texImage2D(Dt,0,xt,vt.width,vt.height,0,Jt,ae,null),t.bindFramebuffer(36160,at),t.framebufferTexture2D(36160,yt,Dt,s.get(vt.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function Bt(at,vt,yt){if(t.bindRenderbuffer(36161,at),vt.depthBuffer&&!vt.stencilBuffer){var Dt=33189;yt?((yt=vt.depthTexture)&&yt.isDepthTexture&&(yt.type===1015?Dt=36012:yt.type===1014&&(Dt=33190)),yt=Xt(vt),t.renderbufferStorageMultisample(36161,yt,Dt,vt.width,vt.height)):t.renderbufferStorage(36161,Dt,vt.width,vt.height),t.framebufferRenderbuffer(36160,36096,36161,at)}else vt.depthBuffer&&vt.stencilBuffer?(yt?(yt=Xt(vt),t.renderbufferStorageMultisample(36161,yt,35056,vt.width,vt.height)):t.renderbufferStorage(36161,34041,vt.width,vt.height),t.framebufferRenderbuffer(36160,33306,36161,at)):(at=h.convert(vt.texture.format),Dt=h.convert(vt.texture.type),Dt=I(vt.texture.internalFormat,at,Dt),yt?(yt=Xt(vt),t.renderbufferStorageMultisample(36161,yt,Dt,vt.width,vt.height)):t.renderbufferStorage(36161,Dt,vt.width,vt.height));t.bindRenderbuffer(36161,null)}function Xt(at){return te&&at.isWebGLMultisampleRenderTarget?Math.min(xr,at.samples):0}var Yt,fe,te=c.isWebGL2,le=c.maxTextures,tr=c.maxCubemapSize,Me=c.maxTextureSize,xr=c.maxSamples,br=new mi,_r,Gn=!1;try{Gn=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(at){}var Dr=0,Ct=(Yt={},Fr(Yt,1e3,10497),Fr(Yt,1001,33071),Fr(Yt,1002,33648),Yt),Mt=(fe={},Fr(fe,1003,9728),Fr(fe,1004,9984),Fr(fe,1005,9986),Fr(fe,1006,9729),Fr(fe,1007,9985),Fr(fe,1008,9987),fe),_t=!1,Pt=!1;this.allocateTextureUnit=function(){var at=Dr;return at>=le&&console.warn("THREE.WebGLTextures: Trying to use "+at+" texture units while this GPU supports only "+le),Dr+=1,at},this.resetTextureUnits=function(){Dr=0},this.setTexture2D=K,this.setTexture2DArray=function(at,vt){var yt=s.get(at);0<at.version&&yt.__version!==at.version?Et(yt,at,vt):(n.activeTexture(33984+vt),n.bindTexture(35866,yt.__webglTexture))},this.setTexture3D=function(at,vt){var yt=s.get(at);0<at.version&&yt.__version!==at.version?Et(yt,at,vt):(n.activeTexture(33984+vt),n.bindTexture(32879,yt.__webglTexture))},this.setTextureCube=Z,this.setTextureCubeDynamic=$,this.setupRenderTarget=function(at){var vt=s.get(at),yt=s.get(at.texture);at.addEventListener("dispose",D),yt.__webglTexture=t.createTexture(),d.memory.textures++;var Dt=at.isWebGLCubeRenderTarget===!0,Jt=at.isWebGLMultisampleRenderTarget===!0,ae=E(at)||te;if(!te||at.texture.format!==1022||at.texture.type!==1015&&at.texture.type!==1016||(at.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Dt)for(vt.__webglFramebuffer=[],Jt=0;6>Jt;Jt++)vt.__webglFramebuffer[Jt]=t.createFramebuffer();else if(vt.__webglFramebuffer=t.createFramebuffer(),Jt)if(te){vt.__webglMultisampledFramebuffer=t.createFramebuffer(),vt.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,vt.__webglColorRenderbuffer),Jt=h.convert(at.texture.format);var xt=h.convert(at.texture.type);Jt=I(at.texture.internalFormat,Jt,xt),xt=Xt(at),t.renderbufferStorageMultisample(36161,xt,Jt,at.width,at.height),t.bindFramebuffer(36160,vt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,vt.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),at.depthBuffer&&(vt.__webglDepthRenderbuffer=t.createRenderbuffer(),Bt(vt.__webglDepthRenderbuffer,at,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Dt){for(n.bindTexture(34067,yt.__webglTexture),st(34067,at.texture,ae),Jt=0;6>Jt;Jt++)It(vt.__webglFramebuffer[Jt],at,36064,34069+Jt);N(at.texture,ae)&&C(34067,at.texture,at.width,at.height),n.bindTexture(34067,null)}else n.bindTexture(3553,yt.__webglTexture),st(3553,at.texture,ae),It(vt.__webglFramebuffer,at,36064,3553),N(at.texture,ae)&&C(3553,at.texture,at.width,at.height),n.bindTexture(3553,null);if(at.depthBuffer){if(vt=s.get(at),yt=at.isWebGLCubeRenderTarget===!0,at.depthTexture){if(yt)throw Error("target.depthTexture not supported in Cube render targets");if(at&&at.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,vt.__webglFramebuffer),!at.depthTexture||!at.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(s.get(at.depthTexture).__webglTexture&&at.depthTexture.image.width===at.width&&at.depthTexture.image.height===at.height||(at.depthTexture.image.width=at.width,at.depthTexture.image.height=at.height,at.depthTexture.needsUpdate=!0),K(at.depthTexture,0),vt=s.get(at.depthTexture).__webglTexture,at.depthTexture.format===1026)t.framebufferTexture2D(36160,36096,3553,vt,0);else if(at.depthTexture.format===1027)t.framebufferTexture2D(36160,33306,3553,vt,0);else throw Error("Unknown depthTexture format")}else if(yt)for(vt.__webglDepthbuffer=[],yt=0;6>yt;yt++)t.bindFramebuffer(36160,vt.__webglFramebuffer[yt]),vt.__webglDepthbuffer[yt]=t.createRenderbuffer(),Bt(vt.__webglDepthbuffer[yt],at,!1);else t.bindFramebuffer(36160,vt.__webglFramebuffer),vt.__webglDepthbuffer=t.createRenderbuffer(),Bt(vt.__webglDepthbuffer,at,!1);t.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(at){var vt=at.texture,yt=E(at)||te;if(N(vt,yt)){yt=at.isWebGLCubeRenderTarget?34067:3553;var Dt=s.get(vt).__webglTexture;n.bindTexture(yt,Dt),C(yt,vt,at.width,at.height),n.bindTexture(yt,null)}},this.updateMultisampleRenderTarget=function(at){if(at.isWebGLMultisampleRenderTarget)if(te){var vt=s.get(at);t.bindFramebuffer(36008,vt.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,vt.__webglFramebuffer);var yt=at.width,Dt=at.height,Jt=16384;at.depthBuffer&&(Jt|=256),at.stencilBuffer&&(Jt|=1024),t.blitFramebuffer(0,0,yt,Dt,0,0,yt,Dt,Jt,9728),t.bindFramebuffer(36160,vt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(at,vt){at&&at.isWebGLRenderTarget&&(_t===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),_t=!0),at=at.texture),K(at,vt)},this.safeSetTextureCube=function(at,vt){at&&at.isWebGLCubeRenderTarget&&(Pt===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Pt=!0),at=at.texture),at&&at.isCubeTexture||Array.isArray(at.image)&&at.image.length===6?Z(at,vt):$(at,vt)}}function Kg(t,r,n){var s=n.isWebGL2;return{convert:function(c){if(c===1009)return 5121;if(c===1017)return 32819;if(c===1018)return 32820;if(c===1019)return 33635;if(c===1010)return 5120;if(c===1011)return 5122;if(c===1012)return 5123;if(c===1013)return 5124;if(c===1014)return 5125;if(c===1015)return 5126;if(c===1016){if(s)return 5131;var h=r.get("OES_texture_half_float");return h!==null?h.HALF_FLOAT_OES:null}if(c===1021)return 6406;if(c===1022)return 6407;if(c===1023)return 6408;if(c===1024)return 6409;if(c===1025)return 6410;if(c===1026)return 6402;if(c===1027)return 34041;if(c===1028)return 6403;if(c===1029)return 36244;if(c===1030)return 33319;if(c===1031)return 33320;if(c===1032)return 36248;if(c===1033)return 36249;if(c===33776||c===33777||c===33778||c===33779)if(h=r.get("WEBGL_compressed_texture_s3tc"),h!==null){if(c===33776)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(c===33777)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(c===33778)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(c===33779)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(c===35840||c===35841||c===35842||c===35843)if(h=r.get("WEBGL_compressed_texture_pvrtc"),h!==null){if(c===35840)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(c===35841)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(c===35842)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(c===35843)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(c===36196)return h=r.get("WEBGL_compressed_texture_etc1"),h!==null?h.COMPRESSED_RGB_ETC1_WEBGL:null;if((c===37492||c===37496)&&(h=r.get("WEBGL_compressed_texture_etc"),h!==null)){if(c===37492)return h.COMPRESSED_RGB8_ETC2;if(c===37496)return h.COMPRESSED_RGBA8_ETC2_EAC}if(c===37808||c===37809||c===37810||c===37811||c===37812||c===37813||c===37814||c===37815||c===37816||c===37817||c===37818||c===37819||c===37820||c===37821||c===37840||c===37841||c===37842||c===37843||c===37844||c===37845||c===37846||c===37847||c===37848||c===37849||c===37850||c===37851||c===37852||c===37853)return h=r.get("WEBGL_compressed_texture_astc"),h!==null?c:null;if(c===36492)return h=r.get("EXT_texture_compression_bptc"),h!==null?c:null;if(c===1020)return s?34042:(h=r.get("WEBGL_depth_texture"),h!==null?h.UNSIGNED_INT_24_8_WEBGL:null)}}}function Wh(t){Wr.call(this),this.cameras=t||[]}function va(){Oe.call(this),this.type="Group"}function FA(){this._grip=this._targetRay=null}function Yo(t,r){function n(Yt){var fe=F.get(Yt.inputSource);fe&&fe.dispatchEvent({type:Yt.type})}function s(){F.forEach(function(Yt,fe){Yt.disconnect(fe)}),F.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),Xt.stop(),f.isPresenting=!1,f.dispatchEvent({type:"sessionend"})}function c(Yt){N=Yt,Xt.setContext(x),Xt.start(),f.isPresenting=!0,f.dispatchEvent({type:"sessionstart"})}function h(Yt){for(var fe=x.inputSources,te=0;te<S.length;te++)F.set(fe[te],S[te]);for(te=0;te<Yt.removed.length;te++){fe=Yt.removed[te];var le=F.get(fe);le&&(le.dispatchEvent({type:"disconnected",data:fe}),F.delete(fe))}for(te=0;te<Yt.added.length;te++)fe=Yt.added[te],(le=F.get(fe))&&le.dispatchEvent({type:"connected",data:fe})}function d(Yt,fe){fe===null?Yt.matrixWorld.copy(Yt.matrix):Yt.matrixWorld.multiplyMatrices(fe.matrixWorld,Yt.matrix),Yt.matrixWorldInverse.getInverse(Yt.matrixWorld)}var f=this,x=null,E=1,N=null,C="local-floor",I=null,S=[],F=new Ye,D=new Wr;D.layers.enable(1),D.viewport=new Ht;var K=new Wr;K.layers.enable(2),K.viewport=new Ht;var Z=[D,K],$=new Wh;$.layers.enable(1),$.layers.enable(2);var st=null,ht=null;this.isPresenting=this.enabled=!1,this.getController=function(Yt){var fe=S[Yt];return fe===void 0&&(fe=new FA,S[Yt]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(Yt){var fe=S[Yt];return fe===void 0&&(fe=new FA,S[Yt]=fe),fe.getGripSpace()},this.setFramebufferScaleFactor=function(Yt){E=Yt,f.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Yt){C=Yt,f.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return N},this.getSession=function(){return x},this.setSession=function(Yt){x=Yt,x!==null&&(x.addEventListener("select",n),x.addEventListener("selectstart",n),x.addEventListener("selectend",n),x.addEventListener("squeeze",n),x.addEventListener("squeezestart",n),x.addEventListener("squeezeend",n),x.addEventListener("end",s),Yt=r.getContextAttributes(),Yt.xrCompatible!==!0&&r.makeXRCompatible(),Yt=new XRWebGLLayer(x,r,{antialias:Yt.antialias,alpha:Yt.alpha,depth:Yt.depth,stencil:Yt.stencil,framebufferScaleFactor:E}),x.updateRenderState({baseLayer:Yt}),x.requestReferenceSpace(C).then(c),x.addEventListener("inputsourceschange",h))};var Et=new gt,It=new gt;this.getCamera=function(Yt){$.near=K.near=D.near=Yt.near,$.far=K.far=D.far=Yt.far,(st!==$.near||ht!==$.far)&&(x.updateRenderState({depthNear:$.near,depthFar:$.far}),st=$.near,ht=$.far);var fe=Yt.parent,te=$.cameras;d($,fe);for(var le=0;le<te.length;le++)d(te[le],fe);for(Yt.matrixWorld.copy($.matrixWorld),Yt=Yt.children,le=0,fe=Yt.length;le<fe;le++)Yt[le].updateMatrixWorld(!0);if(te.length===2){Et.setFromMatrixPosition(D.matrixWorld),It.setFromMatrixPosition(K.matrixWorld),te=Et.distanceTo(It);var tr=D.projectionMatrix.elements,Me=K.projectionMatrix.elements,xr=tr[14]/(tr[10]-1);le=tr[14]/(tr[10]+1),Yt=(tr[9]+1)/tr[5],fe=(tr[9]-1)/tr[5];var br=(tr[8]-1)/tr[0],_r=(Me[8]+1)/Me[0];Me=xr*br,tr=xr*_r,_r=te/(-br+_r),br=_r*-br,D.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(br),$.translateZ(_r),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.getInverse($.matrixWorld),xr+=_r,_r=le+_r,$.projectionMatrix.makePerspective(Me-br,tr+(te-br),Yt*le/_r*xr,fe*le/_r*xr,xr,_r)}else $.projectionMatrix.copy(D.projectionMatrix);return $};var Bt=null,Xt=new bn;Xt.setAnimationLoop(function(Yt,fe){if(I=fe.getViewerPose(N),I!==null){var te=I.views,le=x.renderState.baseLayer;t.setFramebuffer(le.framebuffer);var tr=!1;te.length!==$.cameras.length&&($.cameras.length=0,tr=!0);for(var Me=0;Me<te.length;Me++){var xr=te[Me],br=le.getViewport(xr),_r=Z[Me];_r.matrix.fromArray(xr.transform.matrix),_r.projectionMatrix.fromArray(xr.projectionMatrix),_r.viewport.set(br.x,br.y,br.width,br.height),Me===0&&$.matrix.copy(_r.matrix),tr===!0&&$.cameras.push(_r)}}for(te=x.inputSources,Me=0;Me<S.length;Me++)S[Me].update(te[Me],fe,N);Bt&&Bt(Yt,fe)}),this.setAnimationLoop=function(Yt){Bt=Yt},this.dispose=function(){}}function Ls(t){function r(s,c,h){if(s.opacity.value=c.opacity,c.color&&s.diffuse.value.copy(c.color),c.emissive&&s.emissive.value.copy(c.emissive).multiplyScalar(c.emissiveIntensity),c.map&&(s.map.value=c.map),c.alphaMap&&(s.alphaMap.value=c.alphaMap),c.specularMap&&(s.specularMap.value=c.specularMap),(h=c.envMap||h)&&(s.envMap.value=h,s.flipEnvMap.value=h.isCubeTexture?-1:1,s.reflectivity.value=c.reflectivity,s.refractionRatio.value=c.refractionRatio,s.maxMipLevel.value=t.get(h).__maxMipLevel),c.lightMap&&(s.lightMap.value=c.lightMap,s.lightMapIntensity.value=c.lightMapIntensity),c.aoMap&&(s.aoMap.value=c.aoMap,s.aoMapIntensity.value=c.aoMapIntensity),c.map)var d=c.map;else c.specularMap?d=c.specularMap:c.displacementMap?d=c.displacementMap:c.normalMap?d=c.normalMap:c.bumpMap?d=c.bumpMap:c.roughnessMap?d=c.roughnessMap:c.metalnessMap?d=c.metalnessMap:c.alphaMap?d=c.alphaMap:c.emissiveMap&&(d=c.emissiveMap);if(d!==void 0&&(d.isWebGLRenderTarget&&(d=d.texture),d.matrixAutoUpdate===!0&&d.updateMatrix(),s.uvTransform.value.copy(d.matrix)),c.aoMap)var f=c.aoMap;else c.lightMap&&(f=c.lightMap);f!==void 0&&(f.isWebGLRenderTarget&&(f=f.texture),f.matrixAutoUpdate===!0&&f.updateMatrix(),s.uv2Transform.value.copy(f.matrix))}function n(s,c,h){s.roughness.value=c.roughness,s.metalness.value=c.metalness,c.roughnessMap&&(s.roughnessMap.value=c.roughnessMap),c.metalnessMap&&(s.metalnessMap.value=c.metalnessMap),c.emissiveMap&&(s.emissiveMap.value=c.emissiveMap),c.bumpMap&&(s.bumpMap.value=c.bumpMap,s.bumpScale.value=c.bumpScale,c.side===1&&(s.bumpScale.value*=-1)),c.normalMap&&(s.normalMap.value=c.normalMap,s.normalScale.value.copy(c.normalScale),c.side===1&&s.normalScale.value.negate()),c.displacementMap&&(s.displacementMap.value=c.displacementMap,s.displacementScale.value=c.displacementScale,s.displacementBias.value=c.displacementBias),(c.envMap||h)&&(s.envMapIntensity.value=c.envMapIntensity)}return{refreshFogUniforms:function(s,c){s.fogColor.value.copy(c.color),c.isFog?(s.fogNear.value=c.near,s.fogFar.value=c.far):c.isFogExp2&&(s.fogDensity.value=c.density)},refreshMaterialUniforms:function(s,c,h,d,f){if(c.isMeshBasicMaterial)r(s,c);else if(c.isMeshLambertMaterial)r(s,c),c.emissiveMap&&(s.emissiveMap.value=c.emissiveMap);else if(c.isMeshToonMaterial)r(s,c),s.specular.value.copy(c.specular),s.shininess.value=Math.max(c.shininess,1e-4),c.gradientMap&&(s.gradientMap.value=c.gradientMap),c.emissiveMap&&(s.emissiveMap.value=c.emissiveMap),c.bumpMap&&(s.bumpMap.value=c.bumpMap,s.bumpScale.value=c.bumpScale,c.side===1&&(s.bumpScale.value*=-1)),c.normalMap&&(s.normalMap.value=c.normalMap,s.normalScale.value.copy(c.normalScale),c.side===1&&s.normalScale.value.negate()),c.displacementMap&&(s.displacementMap.value=c.displacementMap,s.displacementScale.value=c.displacementScale,s.displacementBias.value=c.displacementBias);else if(c.isMeshPhongMaterial)r(s,c),s.specular.value.copy(c.specular),s.shininess.value=Math.max(c.shininess,1e-4),c.emissiveMap&&(s.emissiveMap.value=c.emissiveMap),c.bumpMap&&(s.bumpMap.value=c.bumpMap,s.bumpScale.value=c.bumpScale,c.side===1&&(s.bumpScale.value*=-1)),c.normalMap&&(s.normalMap.value=c.normalMap,s.normalScale.value.copy(c.normalScale),c.side===1&&s.normalScale.value.negate()),c.displacementMap&&(s.displacementMap.value=c.displacementMap,s.displacementScale.value=c.displacementScale,s.displacementBias.value=c.displacementBias);else if(c.isMeshStandardMaterial)r(s,c,h),c.isMeshPhysicalMaterial?(n(s,c,h),s.reflectivity.value=c.reflectivity,s.clearcoat.value=c.clearcoat,s.clearcoatRoughness.value=c.clearcoatRoughness,c.sheen&&s.sheen.value.copy(c.sheen),c.clearcoatMap&&(s.clearcoatMap.value=c.clearcoatMap),c.clearcoatRoughnessMap&&(s.clearcoatRoughnessMap.value=c.clearcoatRoughnessMap),c.clearcoatNormalMap&&(s.clearcoatNormalScale.value.copy(c.clearcoatNormalScale),s.clearcoatNormalMap.value=c.clearcoatNormalMap,c.side===1&&s.clearcoatNormalScale.value.negate()),s.transparency.value=c.transparency):n(s,c,h);else if(c.isMeshMatcapMaterial)r(s,c),c.matcap&&(s.matcap.value=c.matcap),c.bumpMap&&(s.bumpMap.value=c.bumpMap,s.bumpScale.value=c.bumpScale,c.side===1&&(s.bumpScale.value*=-1)),c.normalMap&&(s.normalMap.value=c.normalMap,s.normalScale.value.copy(c.normalScale),c.side===1&&s.normalScale.value.negate()),c.displacementMap&&(s.displacementMap.value=c.displacementMap,s.displacementScale.value=c.displacementScale,s.displacementBias.value=c.displacementBias);else if(c.isMeshDepthMaterial)r(s,c),c.displacementMap&&(s.displacementMap.value=c.displacementMap,s.displacementScale.value=c.displacementScale,s.displacementBias.value=c.displacementBias);else if(c.isMeshDistanceMaterial)r(s,c),c.displacementMap&&(s.displacementMap.value=c.displacementMap,s.displacementScale.value=c.displacementScale,s.displacementBias.value=c.displacementBias),s.referencePosition.value.copy(c.referencePosition),s.nearDistance.value=c.nearDistance,s.farDistance.value=c.farDistance;else if(c.isMeshNormalMaterial)r(s,c),c.bumpMap&&(s.bumpMap.value=c.bumpMap,s.bumpScale.value=c.bumpScale,c.side===1&&(s.bumpScale.value*=-1)),c.normalMap&&(s.normalMap.value=c.normalMap,s.normalScale.value.copy(c.normalScale),c.side===1&&s.normalScale.value.negate()),c.displacementMap&&(s.displacementMap.value=c.displacementMap,s.displacementScale.value=c.displacementScale,s.displacementBias.value=c.displacementBias);else if(c.isLineBasicMaterial)s.diffuse.value.copy(c.color),s.opacity.value=c.opacity,c.isLineDashedMaterial&&(s.dashSize.value=c.dashSize,s.totalSize.value=c.dashSize+c.gapSize,s.scale.value=c.scale);else if(c.isPointsMaterial){if(s.diffuse.value.copy(c.color),s.opacity.value=c.opacity,s.size.value=c.size*d,s.scale.value=.5*f,c.map&&(s.map.value=c.map),c.alphaMap&&(s.alphaMap.value=c.alphaMap),c.map)var x=c.map;else c.alphaMap&&(x=c.alphaMap);x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),s.uvTransform.value.copy(x.matrix))}else if(c.isSpriteMaterial){if(s.diffuse.value.copy(c.color),s.opacity.value=c.opacity,s.rotation.value=c.rotation,c.map&&(s.map.value=c.map),c.alphaMap&&(s.alphaMap.value=c.alphaMap),c.map)var E=c.map;else c.alphaMap&&(E=c.alphaMap);E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),s.uvTransform.value.copy(E.matrix))}else c.isShadowMaterial?(s.color.value.copy(c.color),s.opacity.value=c.opacity):c.isShaderMaterial&&(c.uniformsNeedUpdate=!1)}}}function Ws(t){var r;function n(){Br=new Di(Pe),Bn=new wr(Pe,Br,t),Bn.isWebGL2===!1&&(Br.get("WEBGL_depth_texture"),Br.get("OES_texture_float"),Br.get("OES_texture_half_float"),Br.get("OES_texture_half_float_linear"),Br.get("OES_standard_derivatives"),Br.get("OES_element_index_uint"),Br.get("ANGLE_instanced_arrays")),Br.get("OES_texture_float_linear"),yA=new Kg(Pe,Br,Bn),dr=new ap(Pe,Br,Bn),dr.scissor(_t.copy(xt).multiplyScalar(yt).floor()),dr.viewport(Mt.copy(ae).multiplyScalar(yt).floor()),ts=new ai(Pe),li=new Vh,Ja=new Xg(Pe,Br,dr,li,Bn,yA,ts),Hl=new Zr(Pe,Bn),Df=new xi(Pe,Hl,ts),cu=new Ai(Pe,Df,Hl,ts),q1=new Ei(Pe),Tc=new kc(Yt,Br,Bn),Sc=new Ls(li),kA=new Wn,Mh=new Kl,Ua=new nn(Yt,dr,cu,st),$1=new Sn(Pe,Br,ts,Bn),Nl=new to(Pe,Br,ts,Bn),ts.programs=Tc.programs,Yt.capabilities=Bn,Yt.extensions=Br,Yt.properties=li,Yt.renderLists=kA,Yt.state=dr,Yt.info=ts}function s(Ft){Ft.preventDefault(),fe=!0}function c(){fe=!1,n()}function h(Ft){Ft=Ft.target,Ft.removeEventListener("dispose",h),d(Ft),li.remove(Ft)}function d(Ft){var Ue=li.get(Ft).program;Ft.program=void 0,Ue!==void 0&&Tc.releaseProgram(Ue)}function f(Ft,Ue){Ft.render(function(ie){Yt.renderBufferImmediate(ie,Ue)})}function x(Ft,Ue,ie,Ge){if(Ft.visible!==!1){if(Ft.layers.test(Ue.layers)){if(Ft.isGroup)ie=Ft.renderOrder;else if(Ft.isLOD)Ft.autoUpdate===!0&&Ft.update(Ue);else if(Ft.isLight)Xt.pushLight(Ft),Ft.castShadow&&Xt.pushShadow(Ft);else if(Ft.isSprite){if(!Ft.frustumCulled||Re.intersectsSprite(Ft)){Ge&&cn.setFromMatrixPosition(Ft.matrixWorld).applyMatrix4(kr);var yr=cu.update(Ft),Kn=Ft.material;Kn.visible&&Bt.push(Ft,yr,Kn,ie,cn.z,null)}}else if(Ft.isImmediateRenderObject)Ge&&cn.setFromMatrixPosition(Ft.matrixWorld).applyMatrix4(kr),Bt.push(Ft,null,Ft.material,ie,cn.z,null);else if((Ft.isMesh||Ft.isLine||Ft.isPoints)&&(Ft.isSkinnedMesh&&Ft.skeleton.frame!==ts.render.frame&&(Ft.skeleton.update(),Ft.skeleton.frame=ts.render.frame),!Ft.frustumCulled||Re.intersectsObject(Ft)))if(Ge&&cn.setFromMatrixPosition(Ft.matrixWorld).applyMatrix4(kr),yr=cu.update(Ft),Kn=Ft.material,Array.isArray(Kn))for(var Rr=yr.groups,dn=0,jn=Rr.length;dn<jn;dn++){var Vi=Rr[dn],vi=Kn[Vi.materialIndex];vi&&vi.visible&&Bt.push(Ft,yr,vi,ie,cn.z,Vi)}else Kn.visible&&Bt.push(Ft,yr,Kn,ie,cn.z,null)}for(Ft=Ft.children,dn=0,jn=Ft.length;dn<jn;dn++)x(Ft[dn],Ue,ie,Ge)}}function E(Ft,Ue,ie,Ge){for(var yr=0,Kn=Ft.length;yr<Kn;yr++){var Rr=Ft[yr],dn=Rr.object,jn=Rr.geometry,Vi=Ge===void 0?Rr.material:Ge;if(Rr=Rr.group,ie.isArrayCamera){Ct=ie;for(var vi=ie.cameras,zl=0,Lo=vi.length;zl<Lo;zl++){var Bs=vi[zl];dn.layers.test(Bs.layers)&&(dr.viewport(Mt.copy(Bs.viewport)),Xt.setupLights(Bs),N(dn,Ue,Bs,jn,Vi,Rr))}}else Ct=null,N(dn,Ue,ie,jn,Vi,Rr)}}function N(Ft,Ue,ie,Ge,yr,Kn){if(Ft.onBeforeRender(Yt,Ue,ie,Ge,yr,Kn),Xt=Mh.get(Ue,Ct||ie),Ft.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,Ft.matrixWorld),Ft.normalMatrix.getNormalMatrix(Ft.modelViewMatrix),Ft.isImmediateRenderObject){var Rr=I(ie,Ue,yr,Ft);dr.setMaterial(yr),_r=r=null,Gn=!1,f(Ft,Rr)}else Yt.renderBufferDirect(ie,Ue,Ge,yr,Ft,Kn);Ft.onAfterRender(Yt,Ue,ie,Ge,yr,Kn),Xt=Mh.get(Ue,Ct||ie)}function C(Ft,Ue,ie){var Ge=li.get(Ft),yr=Xt.state.lights,Kn=yr.state.version;ie=Tc.getParameters(Ft,yr.state,Xt.state.shadowsArray,Ue,Te.numPlanes,Te.numIntersection,ie);var Rr=Tc.getProgramCacheKey(ie),dn=Ge.program,jn=!0;if(dn===void 0)Ft.addEventListener("dispose",h);else if(dn.cacheKey!==Rr)d(Ft);else{if(Ge.lightsStateVersion!==Kn)Ge.lightsStateVersion=Kn;else if(ie.shaderID!==void 0)return;jn=!1}if(jn&&(dn=Tc.acquireProgram(ie,Rr),Ge.program=dn,Ge.uniforms=ie.uniforms,Ge.outputEncoding=ie.outputEncoding,Ft.program=dn),ie=dn.getAttributes(),Ft.morphTargets)for(Rr=Ft.numSupportedMorphTargets=0;Rr<Yt.maxMorphTargets;Rr++)0<=ie["morphTarget"+Rr]&&Ft.numSupportedMorphTargets++;if(Ft.morphNormals)for(Rr=Ft.numSupportedMorphNormals=0;Rr<Yt.maxMorphNormals;Rr++)0<=ie["morphNormal"+Rr]&&Ft.numSupportedMorphNormals++;ie=Ge.uniforms,(!Ft.isShaderMaterial&&!Ft.isRawShaderMaterial||Ft.clipping===!0)&&(Ge.numClippingPlanes=Te.numPlanes,Ge.numIntersection=Te.numIntersection,ie.clippingPlanes=Te.uniform),Ge.environment=Ft.isMeshStandardMaterial?Ue.environment:null,Ge.fog=Ue.fog,Ge.needsLights=Ft.isMeshLambertMaterial||Ft.isMeshToonMaterial||Ft.isMeshPhongMaterial||Ft.isMeshStandardMaterial||Ft.isShadowMaterial||Ft.isShaderMaterial&&Ft.lights===!0,Ge.lightsStateVersion=Kn,Ge.needsLights&&(ie.ambientLightColor.value=yr.state.ambient,ie.lightProbe.value=yr.state.probe,ie.directionalLights.value=yr.state.directional,ie.directionalLightShadows.value=yr.state.directionalShadow,ie.spotLights.value=yr.state.spot,ie.spotLightShadows.value=yr.state.spotShadow,ie.rectAreaLights.value=yr.state.rectArea,ie.pointLights.value=yr.state.point,ie.pointLightShadows.value=yr.state.pointShadow,ie.hemisphereLights.value=yr.state.hemi,ie.directionalShadowMap.value=yr.state.directionalShadowMap,ie.directionalShadowMatrix.value=yr.state.directionalShadowMatrix,ie.spotShadowMap.value=yr.state.spotShadowMap,ie.spotShadowMatrix.value=yr.state.spotShadowMatrix,ie.pointShadowMap.value=yr.state.pointShadowMap,ie.pointShadowMatrix.value=yr.state.pointShadowMatrix),Ft=Ge.program.getUniforms(),Ft=ga.seqWithValue(Ft.seq,ie),Ge.uniformsList=Ft}function I(Ft,Ue,ie,Ge){Ja.resetTextureUnits();var yr=Ue.fog,Kn=ie.isMeshStandardMaterial?Ue.environment:null,Rr=Me===null?Yt.outputEncoding:Me.texture.encoding,dn=li.get(ie),jn=Xt.state.lights;ye&&(He||Ft!==Dr)&&Te.setState(ie.clippingPlanes,ie.clipIntersection,ie.clipShadows,Ft,dn,Ft===Dr&&ie.id===br),ie.version===dn.__version?dn.program===void 0||ie.fog&&dn.fog!==yr||dn.environment!==Kn||dn.needsLights&&dn.lightsStateVersion!==jn.state.version?C(ie,Ue,Ge):dn.numClippingPlanes===void 0||dn.numClippingPlanes===Te.numPlanes&&dn.numIntersection===Te.numIntersection?dn.outputEncoding!==Rr&&C(ie,Ue,Ge):C(ie,Ue,Ge):(C(ie,Ue,Ge),dn.__version=ie.version);var Vi=!1,vi=!1,zl=!1;if(Ue=dn.program,Rr=Ue.getUniforms(),jn=dn.uniforms,dr.useProgram(Ue.program)&&(zl=vi=Vi=!0),ie.id!==br&&(br=ie.id,vi=!0),(Vi||Dr!==Ft)&&(Rr.setValue(Pe,"projectionMatrix",Ft.projectionMatrix),Bn.logarithmicDepthBuffer&&Rr.setValue(Pe,"logDepthBufFC",2/(Math.log(Ft.far+1)/Math.LN2)),Dr!==Ft&&(Dr=Ft,zl=vi=!0),(ie.isShaderMaterial||ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshStandardMaterial||ie.envMap)&&(Vi=Rr.map.cameraPosition,Vi!==void 0&&Vi.setValue(Pe,cn.setFromMatrixPosition(Ft.matrixWorld))),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&Rr.setValue(Pe,"isOrthographic",Ft.isOrthographicCamera===!0),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial||ie.skinning)&&Rr.setValue(Pe,"viewMatrix",Ft.matrixWorldInverse)),ie.skinning&&(Rr.setOptional(Pe,Ge,"bindMatrix"),Rr.setOptional(Pe,Ge,"bindMatrixInverse"),Ft=Ge.skeleton))if(Vi=Ft.bones,Bn.floatVertexTextures){if(Ft.boneTexture===void 0){Vi=Math.sqrt(4*Vi.length),Vi=Jr.ceilPowerOfTwo(Vi),Vi=Math.max(Vi,4);var Lo=new Float32Array(Vi*Vi*4);Lo.set(Ft.boneMatrices);var Bs=new Vn(Lo,Vi,Vi,1023,1015);Ft.boneMatrices=Lo,Ft.boneTexture=Bs,Ft.boneTextureSize=Vi}Rr.setValue(Pe,"boneTexture",Ft.boneTexture,Ja),Rr.setValue(Pe,"boneTextureSize",Ft.boneTextureSize)}else Rr.setOptional(Pe,Ft,"boneMatrices");return(vi||dn.receiveShadow!==Ge.receiveShadow)&&(dn.receiveShadow=Ge.receiveShadow,Rr.setValue(Pe,"receiveShadow",Ge.receiveShadow)),vi&&(Rr.setValue(Pe,"toneMappingExposure",Yt.toneMappingExposure),Rr.setValue(Pe,"toneMappingWhitePoint",Yt.toneMappingWhitePoint),dn.needsLights&&(vi=zl,jn.ambientLightColor.needsUpdate=vi,jn.lightProbe.needsUpdate=vi,jn.directionalLights.needsUpdate=vi,jn.directionalLightShadows.needsUpdate=vi,jn.pointLights.needsUpdate=vi,jn.pointLightShadows.needsUpdate=vi,jn.spotLights.needsUpdate=vi,jn.spotLightShadows.needsUpdate=vi,jn.rectAreaLights.needsUpdate=vi,jn.hemisphereLights.needsUpdate=vi),yr&&ie.fog&&Sc.refreshFogUniforms(jn,yr),Sc.refreshMaterialUniforms(jn,ie,Kn,yt,vt),jn.ltc_1!==void 0&&(jn.ltc_1.value=Hr.LTC_1),jn.ltc_2!==void 0&&(jn.ltc_2.value=Hr.LTC_2),ga.upload(Pe,dn.uniformsList,jn,Ja)),ie.isShaderMaterial&&ie.uniformsNeedUpdate===!0&&(ga.upload(Pe,dn.uniformsList,jn,Ja),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&Rr.setValue(Pe,"center",Ge.center),Rr.setValue(Pe,"modelViewMatrix",Ge.modelViewMatrix),Rr.setValue(Pe,"normalMatrix",Ge.normalMatrix),Rr.setValue(Pe,"modelMatrix",Ge.matrixWorld),Ue}t=t||{};var S=t.canvas!==void 0?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),F=t.context!==void 0?t.context:null,D=t.alpha!==void 0?t.alpha:!1,K=t.depth!==void 0?t.depth:!0,Z=t.stencil!==void 0?t.stencil:!0,$=t.antialias!==void 0?t.antialias:!1,st=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,ht=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,Et=t.powerPreference!==void 0?t.powerPreference:"default",It=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1,Bt=null,Xt=null;this.domElement=S,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingWhitePoint=this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Yt=this,fe=!1,te=null,le=0,tr=0,Me=null,xr=null,br=-1,_r=r=null,Gn=!1,Dr=null,Ct=null,Mt=new Ht,_t=new Ht,Pt=null,at=S.width,vt=S.height,yt=1,Dt=null,Jt=null,ae=new Ht(0,0,at,vt),xt=new Ht(0,0,at,vt),Se=!1,Re=new Pn,Te=new Xn,ye=!1,He=!1,kr=new Qe,cn=new gt;try{D={alpha:D,depth:K,stencil:Z,antialias:$,premultipliedAlpha:st,preserveDrawingBuffer:ht,powerPreference:Et,failIfMajorPerformanceCaveat:It},S.addEventListener("webglcontextlost",s,!1),S.addEventListener("webglcontextrestored",c,!1);var Pe=F||S.getContext("webgl",D)||S.getContext("experimental-webgl",D);if(Pe===null)throw S.getContext("webgl")!==null?Error("Error creating WebGL context with your selected attributes."):Error("Error creating WebGL context.");Pe.getShaderPrecisionFormat===void 0&&(Pe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ft){throw console.error("THREE.WebGLRenderer: "+Ft.message),Ft}var Br,Bn,dr,ts,li,Ja,Hl,Df,cu,Tc,Sc,kA,Mh,Ua,q1,$1,Nl,yA;n();var GA=new Yo(Yt,Pe);this.xr=GA;var Of=new LA(Yt,cu,Bn.maxTextureSize);this.shadowMap=Of,this.getContext=function(){return Pe},this.getContextAttributes=function(){return Pe.getContextAttributes()},this.forceContextLoss=function(){var Ft=Br.get("WEBGL_lose_context");Ft&&Ft.loseContext()},this.forceContextRestore=function(){var Ft=Br.get("WEBGL_lose_context");Ft&&Ft.restoreContext()},this.getPixelRatio=function(){return yt},this.setPixelRatio=function(Ft){Ft!==void 0&&(yt=Ft,this.setSize(at,vt,!1))},this.getSize=function(Ft){return Ft===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),Ft=new ct),Ft.set(at,vt)},this.setSize=function(Ft,Ue,ie){GA.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(at=Ft,vt=Ue,S.width=Math.floor(Ft*yt),S.height=Math.floor(Ue*yt),ie!==!1&&(S.style.width=Ft+"px",S.style.height=Ue+"px"),this.setViewport(0,0,Ft,Ue))},this.getDrawingBufferSize=function(Ft){return Ft===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),Ft=new ct),Ft.set(at*yt,vt*yt).floor()},this.setDrawingBufferSize=function(Ft,Ue,ie){at=Ft,vt=Ue,yt=ie,S.width=Math.floor(Ft*ie),S.height=Math.floor(Ue*ie),this.setViewport(0,0,Ft,Ue)},this.getCurrentViewport=function(Ft){return Ft===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),Ft=new Ht),Ft.copy(Mt)},this.getViewport=function(Ft){return Ft.copy(ae)},this.setViewport=function(Ft,Ue,ie,Ge){Ft.isVector4?ae.set(Ft.x,Ft.y,Ft.z,Ft.w):ae.set(Ft,Ue,ie,Ge),dr.viewport(Mt.copy(ae).multiplyScalar(yt).floor())},this.getScissor=function(Ft){return Ft.copy(xt)},this.setScissor=function(Ft,Ue,ie,Ge){Ft.isVector4?xt.set(Ft.x,Ft.y,Ft.z,Ft.w):xt.set(Ft,Ue,ie,Ge),dr.scissor(_t.copy(xt).multiplyScalar(yt).floor())},this.getScissorTest=function(){return Se},this.setScissorTest=function(Ft){dr.setScissorTest(Se=Ft)},this.setOpaqueSort=function(Ft){Dt=Ft},this.setTransparentSort=function(Ft){Jt=Ft},this.getClearColor=function(){return Ua.getClearColor()},this.setClearColor=function(){Ua.setClearColor.apply(Ua,arguments)},this.getClearAlpha=function(){return Ua.getClearAlpha()},this.setClearAlpha=function(){Ua.setClearAlpha.apply(Ua,arguments)},this.clear=function(Ft,Ue,ie){var Ge=0;(Ft===void 0||Ft)&&(Ge|=16384),(Ue===void 0||Ue)&&(Ge|=256),(ie===void 0||ie)&&(Ge|=1024),Pe.clear(Ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){S.removeEventListener("webglcontextlost",s,!1),S.removeEventListener("webglcontextrestored",c,!1),kA.dispose(),Mh.dispose(),li.dispose(),cu.dispose(),GA.dispose(),yg.stop()},this.renderBufferImmediate=function(Ft,Ue){dr.initAttributes();var ie=li.get(Ft);Ft.hasPositions&&!ie.position&&(ie.position=Pe.createBuffer()),Ft.hasNormals&&!ie.normal&&(ie.normal=Pe.createBuffer()),Ft.hasUvs&&!ie.uv&&(ie.uv=Pe.createBuffer()),Ft.hasColors&&!ie.color&&(ie.color=Pe.createBuffer()),Ue=Ue.getAttributes(),Ft.hasPositions&&(Pe.bindBuffer(34962,ie.position),Pe.bufferData(34962,Ft.positionArray,35048),dr.enableAttribute(Ue.position),Pe.vertexAttribPointer(Ue.position,3,5126,!1,0,0)),Ft.hasNormals&&(Pe.bindBuffer(34962,ie.normal),Pe.bufferData(34962,Ft.normalArray,35048),dr.enableAttribute(Ue.normal),Pe.vertexAttribPointer(Ue.normal,3,5126,!1,0,0)),Ft.hasUvs&&(Pe.bindBuffer(34962,ie.uv),Pe.bufferData(34962,Ft.uvArray,35048),dr.enableAttribute(Ue.uv),Pe.vertexAttribPointer(Ue.uv,2,5126,!1,0,0)),Ft.hasColors&&(Pe.bindBuffer(34962,ie.color),Pe.bufferData(34962,Ft.colorArray,35048),dr.enableAttribute(Ue.color),Pe.vertexAttribPointer(Ue.color,3,5126,!1,0,0)),dr.disableUnusedAttributes(),Pe.drawArrays(4,0,Ft.count),Ft.count=0};var fu=new Nn;this.renderBufferDirect=function(Ft,Ue,ie,Ge,yr,Kn){Ue===null&&(Ue=fu);var Rr=yr.isMesh&&0>yr.matrixWorld.determinant(),dn=I(Ft,Ue,Ge,yr);dr.setMaterial(Ge,Rr);var jn=!1;if((r!==ie.id||_r!==dn.id||Gn!==(Ge.wireframe===!0))&&(r=ie.id,_r=dn.id,Gn=Ge.wireframe===!0,jn=!0),(Ge.morphTargets||Ge.morphNormals)&&(q1.update(yr,ie,Ge,dn),jn=!0),yr.isInstancedMesh===!0&&(jn=!0),Ft=ie.index,Ue=ie.attributes.position,Ft===null){if(Ue===void 0||Ue.count===0)return}else if(Ft.count===0)return;var Vi=1;if(Ge.wireframe===!0&&(Ft=Df.getWireframeAttribute(ie),Vi=2),Rr=$1,Ft!==null){var vi=Hl.get(Ft);Rr=Nl,Rr.setIndex(vi)}if(jn){if(Bn.isWebGL2!==!1||!yr.isInstancedMesh&&!ie.isInstancedBufferGeometry||Br.get("ANGLE_instanced_arrays")!==null){dr.initAttributes(),jn=ie.attributes,dn=dn.getAttributes();var zl=Ge.defaultAttributeValues;for(Nf in dn){var Lo=dn[Nf];if(0<=Lo){var Bs=jn[Nf];if(Bs!==void 0){var _h=Bs.normalized,ty=Bs.itemSize,Wu=Hl.get(Bs);if(Wu!==void 0){var Jm=Wu.buffer,Hf=Wu.type;if(Wu=Wu.bytesPerElement,Bs.isInterleavedBufferAttribute){var cd=Bs.data,aw=cd.stride;Bs=Bs.offset,cd&&cd.isInstancedInterleavedBuffer?(dr.enableAttributeAndDivisor(Lo,cd.meshPerAttribute),ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=cd.meshPerAttribute*cd.count)):dr.enableAttribute(Lo),Pe.bindBuffer(34962,Jm),dr.vertexAttribPointer(Lo,ty,Hf,_h,aw*Wu,Bs*Wu)}else Bs.isInstancedBufferAttribute?(dr.enableAttributeAndDivisor(Lo,Bs.meshPerAttribute),ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=Bs.meshPerAttribute*Bs.count)):dr.enableAttribute(Lo),Pe.bindBuffer(34962,Jm),dr.vertexAttribPointer(Lo,ty,Hf,_h,0,0)}}else if(Nf==="instanceMatrix")Wu=Hl.get(yr.instanceMatrix),Wu!==void 0&&(Jm=Wu.buffer,Hf=Wu.type,dr.enableAttributeAndDivisor(Lo+0,1),dr.enableAttributeAndDivisor(Lo+1,1),dr.enableAttributeAndDivisor(Lo+2,1),dr.enableAttributeAndDivisor(Lo+3,1),Pe.bindBuffer(34962,Jm),Pe.vertexAttribPointer(Lo+0,4,Hf,!1,64,0),Pe.vertexAttribPointer(Lo+1,4,Hf,!1,64,16),Pe.vertexAttribPointer(Lo+2,4,Hf,!1,64,32),Pe.vertexAttribPointer(Lo+3,4,Hf,!1,64,48));else if(zl!==void 0&&(_h=zl[Nf],_h!==void 0))switch(_h.length){case 2:Pe.vertexAttrib2fv(Lo,_h);break;case 3:Pe.vertexAttrib3fv(Lo,_h);break;case 4:Pe.vertexAttrib4fv(Lo,_h);break;default:Pe.vertexAttrib1fv(Lo,_h)}}}dr.disableUnusedAttributes()}Ft!==null&&Pe.bindBuffer(34963,vi.buffer)}var Nf=ie.drawRange.start*Vi;jn=Kn!==null?Kn.start*Vi:0,vi=Math.max(Nf,jn),Kn=Math.max(0,Math.min(Ft!==null?Ft.count:Ue.count,Nf+ie.drawRange.count*Vi,jn+(Kn!==null?Kn.count*Vi:Infinity))-1-vi+1),Kn!==0&&(yr.isMesh?Ge.wireframe===!0?(dr.setLineWidth(Ge.wireframeLinewidth*(Me===null?yt:1)),Rr.setMode(1)):Rr.setMode(4):yr.isLine?(Ge=Ge.linewidth,Ge===void 0&&(Ge=1),dr.setLineWidth(Ge*(Me===null?yt:1)),yr.isLineSegments?Rr.setMode(1):yr.isLineLoop?Rr.setMode(2):Rr.setMode(3)):yr.isPoints?Rr.setMode(0):yr.isSprite&&Rr.setMode(4),yr.isInstancedMesh?Rr.renderInstances(ie,vi,Kn,yr.count):ie.isInstancedBufferGeometry?Rr.renderInstances(ie,vi,Kn,Math.min(ie.instanceCount,ie._maxInstanceCount)):Rr.render(vi,Kn))},this.compile=function(Ft,Ue){Xt=Mh.get(Ft,Ue),Xt.init(),Ft.traverse(function(Ge){Ge.isLight&&(Xt.pushLight(Ge),Ge.castShadow&&Xt.pushShadow(Ge))}),Xt.setupLights(Ue);var ie={};Ft.traverse(function(Ge){var yr=Ge.material;if(yr)if(Array.isArray(yr))for(var Kn=0;Kn<yr.length;Kn++){var Rr=yr[Kn];!(Rr.uuid in ie)&&(C(Rr,Ft,Ge),ie[Rr.uuid]=!0)}else!(yr.uuid in ie)&&(C(yr,Ft,Ge),ie[yr.uuid]=!0)})};var qa=null,yg=new bn;yg.setAnimationLoop(function(Ft){GA.isPresenting||qa&&qa(Ft)}),typeof window!="undefined"&&yg.setContext(window),this.setAnimationLoop=function(Ft){qa=Ft,GA.setAnimationLoop(Ft),yg.start()},this.render=function(Ft,Ue,ie,Ge){if(ie!==void 0){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var yr=ie}if(Ge!==void 0){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var Kn=Ge}Ue&&Ue.isCamera?fe||(_r=r=null,Gn=!1,br=-1,Dr=null,Ft.autoUpdate===!0&&Ft.updateMatrixWorld(),Ue.parent===null&&Ue.updateMatrixWorld(),GA.enabled&&GA.isPresenting&&(Ue=GA.getCamera(Ue)),Ft.onBeforeRender(Yt,Ft,Ue,yr||Me),Xt=Mh.get(Ft,Ue),Xt.init(),kr.multiplyMatrices(Ue.projectionMatrix,Ue.matrixWorldInverse),Re.setFromProjectionMatrix(kr),He=this.localClippingEnabled,ye=Te.init(this.clippingPlanes,He,Ue),Bt=kA.get(Ft,Ue),Bt.init(),x(Ft,Ue,0,Yt.sortObjects),Bt.finish(),Yt.sortObjects===!0&&Bt.sort(Dt,Jt),ye&&Te.beginShadows(),Of.render(Xt.state.shadowsArray,Ft,Ue),Xt.setupLights(Ue),ye&&Te.endShadows(),this.info.autoReset&&this.info.reset(),yr!==void 0&&this.setRenderTarget(yr),Ua.render(Bt,Ft,Ue,Kn),ie=Bt.opaque,Ge=Bt.transparent,Ft.overrideMaterial?(yr=Ft.overrideMaterial,ie.length&&E(ie,Ft,Ue,yr),Ge.length&&E(Ge,Ft,Ue,yr)):(ie.length&&E(ie,Ft,Ue),Ge.length&&E(Ge,Ft,Ue)),Ft.onAfterRender(Yt,Ft,Ue),Me!==null&&(Ja.updateRenderTargetMipmap(Me),Ja.updateMultisampleRenderTarget(Me)),dr.buffers.depth.setTest(!0),dr.buffers.depth.setMask(!0),dr.buffers.color.setMask(!0),dr.setPolygonOffset(!1),Xt=Bt=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(Ft){te!==Ft&&Me===null&&Pe.bindFramebuffer(36160,Ft),te=Ft},this.getActiveCubeFace=function(){return le},this.getActiveMipmapLevel=function(){return tr},this.getRenderTarget=function(){return Me},this.setRenderTarget=function(Ft,Ue,ie){Me=Ft,le=Ue,tr=ie,Ft&&li.get(Ft).__webglFramebuffer===void 0&&Ja.setupRenderTarget(Ft);var Ge=te,yr=!1;Ft?(Ge=li.get(Ft).__webglFramebuffer,Ft.isWebGLCubeRenderTarget?(Ge=Ge[Ue||0],yr=!0):Ge=Ft.isWebGLMultisampleRenderTarget?li.get(Ft).__webglMultisampledFramebuffer:Ge,Mt.copy(Ft.viewport),_t.copy(Ft.scissor),Pt=Ft.scissorTest):(Mt.copy(ae).multiplyScalar(yt).floor(),_t.copy(xt).multiplyScalar(yt).floor(),Pt=Se),xr!==Ge&&(Pe.bindFramebuffer(36160,Ge),xr=Ge),dr.viewport(Mt),dr.scissor(_t),dr.setScissorTest(Pt),yr&&(Ft=li.get(Ft.texture),Pe.framebufferTexture2D(36160,36064,34069+(Ue||0),Ft.__webglTexture,ie||0))},this.readRenderTargetPixels=function(Ft,Ue,ie,Ge,yr,Kn,Rr){if(Ft&&Ft.isWebGLRenderTarget){var dn=li.get(Ft).__webglFramebuffer;if(Ft.isWebGLCubeRenderTarget&&Rr!==void 0&&(dn=dn[Rr]),dn){Rr=!1,dn!==xr&&(Pe.bindFramebuffer(36160,dn),Rr=!0);try{var jn=Ft.texture,Vi=jn.format,vi=jn.type;Vi!==1023&&yA.convert(Vi)!==Pe.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):vi===1009||yA.convert(vi)===Pe.getParameter(35738)||vi===1015&&(Bn.isWebGL2||Br.get("OES_texture_float")||Br.get("WEBGL_color_buffer_float"))||vi===1016&&(Bn.isWebGL2?Br.get("EXT_color_buffer_float"):Br.get("EXT_color_buffer_half_float"))?Pe.checkFramebufferStatus(36160)===36053?0<=Ue&&Ue<=Ft.width-Ge&&0<=ie&&ie<=Ft.height-yr&&Pe.readPixels(Ue,ie,Ge,yr,yA.convert(Vi),yA.convert(vi),Kn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{Rr&&Pe.bindFramebuffer(36160,xr)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(Ft,Ue,ie){ie===void 0&&(ie=0);var Ge=Math.pow(2,-ie),yr=Math.floor(Ue.image.width*Ge);Ge=Math.floor(Ue.image.height*Ge);var Kn=yA.convert(Ue.format);Ja.setTexture2D(Ue,0),Pe.copyTexImage2D(3553,ie,Kn,Ft.x,Ft.y,yr,Ge,0),dr.unbindTexture()},this.copyTextureToTexture=function(Ft,Ue,ie,Ge){Ge===void 0&&(Ge=0);var yr=Ue.image.width,Kn=Ue.image.height,Rr=yA.convert(ie.format),dn=yA.convert(ie.type);Ja.setTexture2D(ie,0),Ue.isDataTexture?Pe.texSubImage2D(3553,Ge,Ft.x,Ft.y,yr,Kn,Rr,dn,Ue.image.data):Ue.isCompressedTexture?Pe.compressedTexSubImage2D(3553,Ge,Ft.x,Ft.y,Ue.mipmaps[0].width,Ue.mipmaps[0].height,Rr,Ue.mipmaps[0].data):Pe.texSubImage2D(3553,Ge,Ft.x,Ft.y,Rr,dn,Ue.image),Ge===0&&ie.generateMipmaps&&Pe.generateMipmap(3553),dr.unbindTexture()},this.initTexture=function(Ft){Ja.setTexture2D(Ft,0),dr.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function KA(t,r){this.name="",this.color=new Je(t),this.density=r!==void 0?r:25e-5}function Ki(t,r,n){this.name="",this.color=new Je(t),this.near=r!==void 0?r:1,this.far=n!==void 0?n:1e3}function ya(t,r){this.array=t,this.stride=r,this.count=t!==void 0?t.length/r:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function Qa(t,r,n,s){this.name="",this.data=t,this.itemSize=r,this.offset=n,this.normalized=s===!0}function tl(t){hn.call(this),this.type="SpriteMaterial",this.color=new Je(16777215),this.alphaMap=this.map=null,this.rotation=0,this.transparent=this.sizeAttenuation=!0,this.setValues(t)}function Yl(t){if(Oe.call(this),this.type="Sprite",Gm===void 0){Gm=new sr;var r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);r=new ya(r,5),Gm.setIndex([0,1,2,0,2,3]),Gm.setAttribute("position",new Qa(r,3,0,!1)),Gm.setAttribute("uv",new Qa(r,2,3,!1))}this.geometry=Gm,this.material=t!==void 0?t:new tl,this.center=new ct(.5,.5)}function Ap(t,r,n,s,c,h){jm.subVectors(t,n).addScalar(.5).multiply(s),c!==void 0?(c0.x=h*jm.x-c*jm.y,c0.y=c*jm.x+h*jm.y):c0.copy(jm),t.copy(r),t.x+=c0.x,t.y+=c0.y,t.applyMatrix4(UC)}function js(){Oe.call(this),this._currentLevel=0,this.type="LOD",vn(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function xa(t,r){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),$i.call(this,t,r),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qe,this.bindMatrixInverse=new Qe}function na(t,r){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,r===void 0)this.calculateInverses();else if(this.bones.length===r.length)this.boneInverses=r.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],t=0,r=this.bones.length;t<r;t++)this.boneInverses.push(new Qe)}function os(){Oe.call(this),this.type="Bone"}function Xr(t,r,n){$i.call(this,t,r),this.instanceMatrix=new Kr(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function pi(t){hn.call(this),this.type="LineBasicMaterial",this.color=new Je(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.morphTargets=!1,this.setValues(t)}function Xs(t,r,n){n===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Oe.call(this),this.type="Line",this.geometry=t!==void 0?t:new sr,this.material=r!==void 0?r:new pi,this.updateMorphTargets()}function uo(t,r){Xs.call(this,t,r),this.type="LineSegments"}function _o(t,r){Xs.call(this,t,r),this.type="LineLoop"}function ba(t){hn.call(this),this.type="PointsMaterial",this.color=new Je(16777215),this.alphaMap=this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}function xu(t,r){Oe.call(this),this.type="Points",this.geometry=t!==void 0?t:new sr,this.material=r!==void 0?r:new ba,this.updateMorphTargets()}function jh(t,r,n,s,c,h,d){var f=bx.distanceSqToPoint(t);f<n&&(n=new gt,bx.closestPointToPoint(t,n),n.applyMatrix4(s),t=c.ray.origin.distanceTo(n),t<c.near||t>c.far||h.push({distance:t,distanceToRay:Math.sqrt(f),point:n,index:r,face:null,object:d}))}function Yg(t,r,n,s,c,h,d,f,x){bt.call(this,t,r,n,s,c,h,d,f,x),this.format=d!==void 0?d:1022,this.minFilter=h!==void 0?h:1006,this.magFilter=c!==void 0?c:1006,this.generateMipmaps=!1}function Gc(t,r,n,s,c,h,d,f,x,E,N,C){bt.call(this,null,h,d,f,x,E,s,c,N,C),this.image={width:r,height:n},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function up(t,r,n,s,c,h,d,f,x){bt.call(this,t,r,n,s,c,h,d,f,x),this.needsUpdate=!0}function ln(t,r,n,s,c,h,d,f,x,E){if(E=E!==void 0?E:1026,E!==1026&&E!==1027)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&E===1026&&(n=1012),n===void 0&&E===1027&&(n=1020),bt.call(this,null,s,c,h,d,f,E,n,x),this.image={width:t,height:r},this.magFilter=d!==void 0?d:1003,this.minFilter=f!==void 0?f:1003,this.generateMipmaps=this.flipY=!1}function Vc(t){sr.call(this),this.type="WireframeGeometry";var r=[],n,s,c,h=[0,0],d={},f=["a","b","c"];if(t&&t.isGeometry){var x=t.faces,E=0;for(s=x.length;E<s;E++){var N=x[E];for(n=0;3>n;n++){var C=N[f[n]],I=N[f[(n+1)%3]];h[0]=Math.min(C,I),h[1]=Math.max(C,I),C=h[0]+","+h[1],d[C]===void 0&&(d[C]={index1:h[0],index2:h[1]})}}for(C in d)E=d[C],f=t.vertices[E.index1],r.push(f.x,f.y,f.z),f=t.vertices[E.index2],r.push(f.x,f.y,f.z)}else if(t&&t.isBufferGeometry)if(f=new gt,t.index!==null){x=t.attributes.position,N=t.index;var S=t.groups;for(S.length===0&&(S=[{start:0,count:N.count,materialIndex:0}]),t=0,c=S.length;t<c;++t)for(E=S[t],n=E.start,s=E.count,E=n,s=n+s;E<s;E+=3)for(n=0;3>n;n++)C=N.getX(E+n),I=N.getX(E+(n+1)%3),h[0]=Math.min(C,I),h[1]=Math.max(C,I),C=h[0]+","+h[1],d[C]===void 0&&(d[C]={index1:h[0],index2:h[1]});for(C in d)E=d[C],f.fromBufferAttribute(x,E.index1),r.push(f.x,f.y,f.z),f.fromBufferAttribute(x,E.index2),r.push(f.x,f.y,f.z)}else for(x=t.attributes.position,E=0,s=x.count/3;E<s;E++)for(n=0;3>n;n++)d=3*E+n,f.fromBufferAttribute(x,d),r.push(f.x,f.y,f.z),d=3*E+(n+1)%3,f.fromBufferAttribute(x,d),r.push(f.x,f.y,f.z);this.setAttribute("position",new or(r,3))}function lp(t,r,n){ze.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:r,stacks:n},this.fromBufferGeometry(new Xh(t,r,n)),this.mergeVertices()}function Xh(t,r,n){sr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:r,stacks:n};var s=[],c=[],h=[],d=[],f=new gt,x=new gt,E=new gt,N=new gt,C=new gt,I,S;3>t.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var F=r+1;for(I=0;I<=n;I++){var D=I/n;for(S=0;S<=r;S++){var K=S/r;t(K,D,x),c.push(x.x,x.y,x.z),0<=K-1e-5?(t(K-1e-5,D,E),N.subVectors(x,E)):(t(K+1e-5,D,E),N.subVectors(E,x)),0<=D-1e-5?(t(K,D-1e-5,E),C.subVectors(x,E)):(t(K,D+1e-5,E),C.subVectors(E,x)),f.crossVectors(N,C).normalize(),h.push(f.x,f.y,f.z),d.push(K,D)}}for(I=0;I<n;I++)for(S=0;S<r;S++)t=I*F+S+1,f=(I+1)*F+S+1,x=(I+1)*F+S,s.push(I*F+S,t,x),s.push(t,f,x);this.setIndex(s),this.setAttribute("position",new or(c,3)),this.setAttribute("normal",new or(h,3)),this.setAttribute("uv",new or(d,2))}function hp(t,r,n,s){ze.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:r,radius:n,detail:s},this.fromBufferGeometry(new Zo(t,r,n,s)),this.mergeVertices()}function Zo(t,r,n,s){function c(E){f.push(E.x,E.y,E.z)}function h(E,N){E*=3,N.x=t[E+0],N.y=t[E+1],N.z=t[E+2]}function d(E,N,C,I){0>I&&E.x===1&&(x[N]=E.x-1),C.x===0&&C.z===0&&(x[N]=I/2/Math.PI+.5)}sr.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:r,radius:n,detail:s},n=n||1,s=s||0;var f=[],x=[];(function(E){for(var N=new gt,C=new gt,I=new gt,S=0;S<r.length;S+=3){h(r[S+0],N),h(r[S+1],C),h(r[S+2],I);var F,D,K=N,Z=C,$=I,st=Math.pow(2,E),ht=[];for(D=0;D<=st;D++){ht[D]=[];var Et=K.clone().lerp($,D/st),It=Z.clone().lerp($,D/st),Bt=st-D;for(F=0;F<=Bt;F++)ht[D][F]=F===0&&D===st?Et:Et.clone().lerp(It,F/Bt)}for(D=0;D<st;D++)for(F=0;F<2*(st-D)-1;F++)K=Math.floor(F/2),F%2==0?(c(ht[D][K+1]),c(ht[D+1][K]),c(ht[D][K])):(c(ht[D][K+1]),c(ht[D+1][K+1]),c(ht[D+1][K]))}})(s),function(E){for(var N=new gt,C=0;C<f.length;C+=3)N.x=f[C+0],N.y=f[C+1],N.z=f[C+2],N.normalize().multiplyScalar(E),f[C+0]=N.x,f[C+1]=N.y,f[C+2]=N.z}(n),function(){for(var E=new gt,N=0;N<f.length;N+=3)E.x=f[N+0],E.y=f[N+1],E.z=f[N+2],x.push(Math.atan2(E.z,-E.x)/2/Math.PI+.5,1-(Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))/Math.PI+.5));E=new gt,N=new gt;for(var C=new gt,I=new gt,S=new ct,F=new ct,D=new ct,K=0,Z=0;K<f.length;K+=9,Z+=6){E.set(f[K+0],f[K+1],f[K+2]),N.set(f[K+3],f[K+4],f[K+5]),C.set(f[K+6],f[K+7],f[K+8]),S.set(x[Z+0],x[Z+1]),F.set(x[Z+2],x[Z+3]),D.set(x[Z+4],x[Z+5]),I.copy(E).add(N).add(C).divideScalar(3);var $=Math.atan2(I.z,-I.x);d(S,Z+0,E,$),d(F,Z+2,N,$),d(D,Z+4,C,$)}for(E=0;E<x.length;E+=6)N=x[E+0],C=x[E+2],I=x[E+4],S=Math.min(N,C,I),.9<Math.max(N,C,I)&&.1>S&&(.2>N&&(x[E+0]+=1),.2>C&&(x[E+2]+=1),.2>I&&(x[E+4]+=1))}(),this.setAttribute("position",new or(f,3)),this.setAttribute("normal",new or(f.slice(),3)),this.setAttribute("uv",new or(x,2)),s===0?this.computeVertexNormals():this.normalizeNormals()}function Er(t,r){ze.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:r},this.fromBufferGeometry(new Wc(t,r)),this.mergeVertices()}function Wc(t,r){Zo.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,r),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:r}}function cp(t,r){ze.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:r},this.fromBufferGeometry(new wa(t,r)),this.mergeVertices()}function wa(t,r){Zo.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,r),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:r}}function Bo(t,r){ze.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:r},this.fromBufferGeometry(new jc(t,r)),this.mergeVertices()}function jc(t,r){var n=(1+Math.sqrt(5))/2;Zo.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,r),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:r}}function mr(t,r){ze.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:r},this.fromBufferGeometry(new Ca(t,r)),this.mergeVertices()}function Ca(t,r){var n=(1+Math.sqrt(5))/2,s=1/n;Zo.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,r),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:r}}function Kh(t,r,n,s,c,h){ze.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:r,radius:n,radialSegments:s,closed:c},h!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new el(t,r,n,s,c),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function el(t,r,n,s,c){function h(Z){N=t.getPointAt(Z/r,N);var $=d.normals[Z];for(Z=d.binormals[Z],I=0;I<=s;I++){var st=I/s*Math.PI*2,ht=Math.sin(st);st=-Math.cos(st),x.x=st*$.x+ht*Z.x,x.y=st*$.y+ht*Z.y,x.z=st*$.z+ht*Z.z,x.normalize(),F.push(x.x,x.y,x.z),f.x=N.x+n*x.x,f.y=N.y+n*x.y,f.z=N.z+n*x.z,S.push(f.x,f.y,f.z)}}sr.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:r,radius:n,radialSegments:s,closed:c},r=r||64,n=n||1,s=s||8,c=c||!1;var d=t.computeFrenetFrames(r,c);this.tangents=d.tangents,this.normals=d.normals,this.binormals=d.binormals;var f=new gt,x=new gt,E=new ct,N=new gt,C,I,S=[],F=[],D=[],K=[];for(C=0;C<r;C++)h(C);for(h(c===!1?r:0),C=0;C<=r;C++)for(I=0;I<=s;I++)E.x=C/r,E.y=I/s,D.push(E.x,E.y);(function(){for(I=1;I<=r;I++)for(C=1;C<=s;C++){var Z=(s+1)*I+(C-1),$=(s+1)*I+C,st=(s+1)*(I-1)+C;K.push((s+1)*(I-1)+(C-1),Z,st),K.push(Z,$,st)}})(),this.setIndex(K),this.setAttribute("position",new or(S,3)),this.setAttribute("normal",new or(F,3)),this.setAttribute("uv",new or(D,2))}function Zl(t,r,n,s,c,h,d){ze.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:r,tubularSegments:n,radialSegments:s,p:c,q:h},d!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new wu(t,r,n,s,c,h)),this.mergeVertices()}function wu(t,r,n,s,c,h){function d(It,Bt,Xt,Yt,fe){var te=Math.sin(It);Bt=Xt/Bt*It,Xt=Math.cos(Bt),fe.x=Yt*(2+Xt)*.5*Math.cos(It),fe.y=Yt*(2+Xt)*te*.5,fe.z=Yt*Math.sin(Bt)*.5}sr.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:r,tubularSegments:n,radialSegments:s,p:c,q:h},t=t||1,r=r||.4,n=Math.floor(n)||64,s=Math.floor(s)||8,c=c||2,h=h||3;var f=[],x=[],E=[],N=[],C,I=new gt,S=new gt,F=new gt,D=new gt,K=new gt,Z=new gt,$=new gt;for(C=0;C<=n;++C){var st=C/n*c*Math.PI*2;for(d(st,c,h,t,F),d(st+.01,c,h,t,D),Z.subVectors(D,F),$.addVectors(D,F),K.crossVectors(Z,$),$.crossVectors(K,Z),K.normalize(),$.normalize(),st=0;st<=s;++st){var ht=st/s*Math.PI*2,Et=-r*Math.cos(ht);ht=r*Math.sin(ht),I.x=F.x+(Et*$.x+ht*K.x),I.y=F.y+(Et*$.y+ht*K.y),I.z=F.z+(Et*$.z+ht*K.z),x.push(I.x,I.y,I.z),S.subVectors(I,F).normalize(),E.push(S.x,S.y,S.z),N.push(C/n),N.push(st/s)}}for(st=1;st<=n;st++)for(C=1;C<=s;C++)t=(s+1)*st+(C-1),r=(s+1)*st+C,c=(s+1)*(st-1)+C,f.push((s+1)*(st-1)+(C-1),t,c),f.push(t,r,c);this.setIndex(f),this.setAttribute("position",new or(x,3)),this.setAttribute("normal",new or(E,3)),this.setAttribute("uv",new or(N,2))}function RA(t,r,n,s,c){ze.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:r,radialSegments:n,tubularSegments:s,arc:c},this.fromBufferGeometry(new di(t,r,n,s,c)),this.mergeVertices()}function di(t,r,n,s,c){sr.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:r,radialSegments:n,tubularSegments:s,arc:c},t=t||1,r=r||.4,n=Math.floor(n)||8,s=Math.floor(s)||6,c=c||2*Math.PI;var h=[],d=[],f=[],x=[],E=new gt,N=new gt,C=new gt,I,S;for(I=0;I<=n;I++)for(S=0;S<=s;S++){var F=S/s*c,D=I/n*Math.PI*2;N.x=(t+r*Math.cos(D))*Math.cos(F),N.y=(t+r*Math.cos(D))*Math.sin(F),N.z=r*Math.sin(D),d.push(N.x,N.y,N.z),E.x=t*Math.cos(F),E.y=t*Math.sin(F),C.subVectors(N,E).normalize(),f.push(C.x,C.y,C.z),x.push(S/s),x.push(I/n)}for(I=1;I<=n;I++)for(S=1;S<=s;S++)t=(s+1)*(I-1)+S-1,r=(s+1)*(I-1)+S,c=(s+1)*I+S,h.push((s+1)*I+S-1,t,c),h.push(t,r,c);this.setIndex(h),this.setAttribute("position",new or(d,3)),this.setAttribute("normal",new or(f,3)),this.setAttribute("uv",new or(x,2))}function Cu(t,r,n,s,c){for(var h,d=0,f=r,x=n-s;f<n;f+=s)d+=(t[x]-t[f])*(t[f+1]+t[x+1]),x=f;if(c===0<d)for(c=r;c<n;c+=s)h=Kc(c,t[c],t[c+1],h);else for(c=n-s;c>=r;c-=s)h=Kc(c,t[c],t[c+1],h);return h&&rl(h,h.next)&&($l(h),h=h.next),h}function eo(t,r){if(!t)return t;r||(r=t);do{var n=!1;if(t.steiner||!rl(t,t.next)&&Zn(t.prev,t,t.next)!==0)t=t.next;else{if($l(t),t=r=t.prev,t===t.next)break;n=!0}}while(n||t!==r);return r}function Yh(t,r,n,s,c,h,d){if(t){if(!d&&h){var f=t,x=f;do x.z===null&&(x.z=YA(x.x,x.y,s,c,h)),x.prevZ=x.prev,x=x.nextZ=x.next;while(x!==f);x.prevZ.nextZ=null,x.prevZ=null,f=x;var E,N,C,I,S=1;do{x=f;var F=f=null;for(N=0;x;){N++;var D=x;for(E=C=0;E<S&&(C++,D=D.nextZ,D);E++);for(I=S;0<C||0<I&&D;)C!==0&&(I===0||!D||x.z<=D.z)?(E=x,x=x.nextZ,C--):(E=D,D=D.nextZ,I--),F?F.nextZ=E:f=E,E.prevZ=F,F=E;x=D}F.nextZ=null,S*=2}while(1<N)}for(f=t;t.prev!==t.next;){if(x=t.prev,D=t.next,h)F=Jl(t,s,c,h);else t:if(F=t,N=F.prev,C=F,S=F.next,0<=Zn(N,C,S))F=!1;else{for(E=F.next.next;E!==F.prev;){if(Mu(N.x,N.y,C.x,C.y,S.x,S.y,E.x,E.y)&&0<=Zn(E.prev,E,E.next)){F=!1;break t}E=E.next}F=!0}if(F)r.push(x.i/n),r.push(t.i/n),r.push(D.i/n),$l(t),f=t=D.next;else if(t=D,t===f){if(!d)Yh(eo(t),r,n,s,c,h,1);else if(d===1){t=eo(t),d=r,f=n,x=t;do D=x.prev,F=x.next.next,!rl(D,F)&&_u(D,x,x.next,F)&&ql(D,F)&&ql(F,D)&&(d.push(D.i/f),d.push(x.i/f),d.push(F.i/f),$l(x),$l(x.next),x=t=F),x=x.next;while(x!==t);t=eo(x),Yh(t,r,n,s,c,h,2)}else if(d===2)t:{d=t;do{for(f=d.next.next;f!==d.prev;){if(x=d.i!==f.i){if(x=d,D=f,F=x.next.i!==D.i&&x.prev.i!==D.i){e:{F=x;do{if(F.i!==x.i&&F.next.i!==x.i&&F.i!==D.i&&F.next.i!==D.i&&_u(F,F.next,x,D)){F=!0;break e}F=F.next}while(F!==x);F=!1}F=!F}if(F){if(F=ql(x,D)&&ql(D,x)){F=x,N=!1,C=(x.x+D.x)/2,S=(x.y+D.y)/2;do F.y>S!=F.next.y>S&&F.next.y!==F.y&&C<(F.next.x-F.x)*(S-F.y)/(F.next.y-F.y)+F.x&&(N=!N),F=F.next;while(F!==x);F=N}F=F&&(Zn(x.prev,x,D.prev)||Zn(x,D.prev,D))||rl(x,D)&&0<Zn(x.prev,x,x.next)&&0<Zn(D.prev,D,D.next)}x=F}if(x){t=Xc(d,f),d=eo(d,d.next),t=eo(t,t.next),Yh(d,r,n,s,c,h),Yh(t,r,n,s,c,h);break t}f=f.next}d=d.next}while(d!==t)}break}}}}function Jl(t,r,n,s){var c=t.prev,h=t.next;if(0<=Zn(c,t,h))return!1;var d=c.x>t.x?c.x>h.x?c.x:h.x:t.x>h.x?t.x:h.x,f=c.y>t.y?c.y>h.y?c.y:h.y:t.y>h.y?t.y:h.y,x=YA(c.x<t.x?c.x<h.x?c.x:h.x:t.x<h.x?t.x:h.x,c.y<t.y?c.y<h.y?c.y:h.y:t.y<h.y?t.y:h.y,r,n,s);for(r=YA(d,f,r,n,s),n=t.prevZ,s=t.nextZ;n&&n.z>=x&&s&&s.z<=r;){if(n!==t.prev&&n!==t.next&&Mu(c.x,c.y,t.x,t.y,h.x,h.y,n.x,n.y)&&0<=Zn(n.prev,n,n.next)||(n=n.prevZ,s!==t.prev&&s!==t.next&&Mu(c.x,c.y,t.x,t.y,h.x,h.y,s.x,s.y)&&0<=Zn(s.prev,s,s.next)))return!1;s=s.nextZ}for(;n&&n.z>=x;){if(n!==t.prev&&n!==t.next&&Mu(c.x,c.y,t.x,t.y,h.x,h.y,n.x,n.y)&&0<=Zn(n.prev,n,n.next))return!1;n=n.prevZ}for(;s&&s.z<=r;){if(s!==t.prev&&s!==t.next&&Mu(c.x,c.y,t.x,t.y,h.x,h.y,s.x,s.y)&&0<=Zn(s.prev,s,s.next))return!1;s=s.nextZ}return!0}function Ks(t,r){return t.x-r.x}function Zg(t,r){var n=r,s=t.x,c=t.y,h=-Infinity;do{if(c<=n.y&&c>=n.next.y&&n.next.y!==n.y){var d=n.x+(c-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=s&&d>h){if(h=d,d===s){if(c===n.y)return n;if(c===n.next.y)return n.next}var f=n.x<n.next.x?n:n.next}}n=n.next}while(n!==r);if(!f)return null;if(s===h)return f;r=f,d=f.x;var x=f.y,E=Infinity;n=f;do{if(s>=n.x&&n.x>=d&&s!==n.x&&Mu(c<x?s:h,c,d,x,c<x?h:s,c,n.x,n.y)){var N=Math.abs(c-n.y)/(s-n.x),C;if((C=ql(n,t))&&!(C=N<E)&&(C=N===E)&&!(C=n.x>f.x)&&(C=n.x===f.x)){C=f;var I=n;C=0>Zn(C.prev,C,I.prev)&&0>Zn(I.next,C,C.next)}C&&(f=n,E=N)}n=n.next}while(n!==r);return f}function YA(t,r,n,s,c){return t=32767*(t-n)*c,r=32767*(r-s)*c,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,(t|t<<1)&1431655765|((r|r<<1)&1431655765)<<1}function Uo(t){var r=t,n=t;do(r.x<n.x||r.x===n.x&&r.y<n.y)&&(n=r),r=r.next;while(r!==t);return n}function Mu(t,r,n,s,c,h,d,f){return 0<=(c-d)*(r-f)-(t-d)*(h-f)&&0<=(t-d)*(s-f)-(n-d)*(r-f)&&0<=(n-d)*(h-f)-(c-d)*(s-f)}function Zn(t,r,n){return(r.y-t.y)*(n.x-r.x)-(r.x-t.x)*(n.y-r.y)}function rl(t,r){return t.x===r.x&&t.y===r.y}function _u(t,r,n,s){var c=ji(Zn(t,r,n)),h=ji(Zn(t,r,s)),d=ji(Zn(n,s,t)),f=ji(Zn(n,s,r));return!!(c!==h&&d!==f||c===0&&ia(t,n,r)||h===0&&ia(t,s,r)||d===0&&ia(n,t,s)||f===0&&ia(n,r,s))}function ia(t,r,n){return r.x<=Math.max(t.x,n.x)&&r.x>=Math.min(t.x,n.x)&&r.y<=Math.max(t.y,n.y)&&r.y>=Math.min(t.y,n.y)}function ji(t){return 0<t?1:0>t?-1:0}function ql(t,r){return 0>Zn(t.prev,t,t.next)?0<=Zn(t,r,t.next)&&0<=Zn(t,t.prev,r):0>Zn(t,r,t.prev)||0>Zn(t,t.next,r)}function Xc(t,r){var n=new nl(t.i,t.x,t.y),s=new nl(r.i,r.x,r.y),c=t.next,h=r.prev;return t.next=r,r.prev=t,n.next=c,c.prev=n,s.next=n,n.prev=s,h.next=s,s.prev=h,s}function Kc(t,r,n,s){return t=new nl(t,r,n),s?(t.next=s.next,t.prev=s,s.next.prev=t,s.next=t):(t.prev=t,t.next=t),t}function $l(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function nl(t,r,n){this.i=t,this.x=r,this.y=n,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Zh(t){var r=t.length;2<r&&t[r-1].equals(t[0])&&t.pop()}function Fd(t,r){for(var n=0;n<r.length;n++)t.push(r[n].x),t.push(r[n].y)}function Go(t,r){ze.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:r},this.fromBufferGeometry(new ss(t,r)),this.mergeVertices()}function ss(t,r){function n(x){function E(ye,He,kr){return He||console.error("THREE.ExtrudeGeometry: vec does not exist"),He.clone().multiplyScalar(kr).add(ye)}function N(ye,He,kr){var cn=ye.x-He.x,Pe=ye.y-He.y,Br=kr.x-ye.x,Bn=kr.y-ye.y,dr=cn*cn+Pe*Pe;if(Math.abs(cn*Bn-Pe*Br)>No){var ts=Math.sqrt(dr),li=Math.sqrt(Br*Br+Bn*Bn);if(dr=He.x-Pe/ts,He=He.y+cn/ts,Bn=((kr.x-Bn/li-dr)*Bn-(kr.y+Br/li-He)*Br)/(cn*Bn-Pe*Br),Br=dr+cn*Bn-ye.x,cn=He+Pe*Bn-ye.y,Pe=Br*Br+cn*cn,2>=Pe)return new ct(Br,cn);Pe=Math.sqrt(Pe/2)}else ye=!1,cn>No?Br>No&&(ye=!0):cn<-No?Br<-No&&(ye=!0):wc(Pe)===wc(Bn)&&(ye=!0),ye?(Br=-Pe,Pe=Math.sqrt(dr)):(Br=cn,cn=Pe,Pe=Math.sqrt(dr/2));return new ct(Br/Pe,cn/Pe)}function C(ye,He){for(Dt=ye.length;0<=--Dt;){var kr=Dt,cn=Dt-1;0>cn&&(cn=ye.length-1);var Pe,Br=$+2*Xt;for(Pe=0;Pe<Br;Pe++){var Bn=at*Pe,dr=at*(Pe+1),ts=He+cn+Bn,li=He+cn+dr;dr=He+kr+dr,F(He+kr+Bn),F(ts),F(dr),F(ts),F(li),F(dr),Bn=c.length/3,Bn=fe.generateSideWallUV(s,c,Bn-6,Bn-3,Bn-2,Bn-1),D(Bn[0]),D(Bn[1]),D(Bn[3]),D(Bn[1]),D(Bn[2]),D(Bn[3])}}}function I(ye,He,kr){K.push(ye),K.push(He),K.push(kr)}function S(ye,He,kr){F(ye),F(He),F(kr),ye=c.length/3,ye=fe.generateTopUV(s,c,ye-3,ye-2,ye-1),D(ye[0]),D(ye[1]),D(ye[2])}function F(ye){c.push(K[3*ye]),c.push(K[3*ye+1]),c.push(K[3*ye+2])}function D(ye){h.push(ye.x),h.push(ye.y)}var K=[],Z=r.curveSegments!==void 0?r.curveSegments:12,$=r.steps!==void 0?r.steps:1,st=r.depth!==void 0?r.depth:100,ht=r.bevelEnabled!==void 0?r.bevelEnabled:!0,Et=r.bevelThickness!==void 0?r.bevelThickness:6,It=r.bevelSize!==void 0?r.bevelSize:Et-2,Bt=r.bevelOffset!==void 0?r.bevelOffset:0,Xt=r.bevelSegments!==void 0?r.bevelSegments:3,Yt=r.extrudePath,fe=r.UVGenerator!==void 0?r.UVGenerator:c_;r.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),st=r.amount);var te=!1;if(Yt){var le=Yt.getSpacedPoints($);te=!0,ht=!1;var tr=Yt.computeFrenetFrames($,!1),Me=new gt,xr=new gt,br=new gt}ht||(Bt=It=Et=Xt=0);var _r;Z=x.extractPoints(Z),x=Z.shape;var Gn=Z.holes;if(!sd.isClockWise(x)){x=x.reverse();var Dr=0;for(_r=Gn.length;Dr<_r;Dr++){var Ct=Gn[Dr];sd.isClockWise(Ct)&&(Gn[Dr]=Ct.reverse())}}var Mt=sd.triangulateShape(x,Gn),_t=x;for(Dr=0,_r=Gn.length;Dr<_r;Dr++)Ct=Gn[Dr],x=x.concat(Ct);var Pt,at=x.length,vt,yt=Mt.length;Z=[];var Dt=0,Jt=_t.length,ae=Jt-1;for(Pt=Dt+1;Dt<Jt;Dt++,ae++,Pt++)ae===Jt&&(ae=0),Pt===Jt&&(Pt=0),Z[Dt]=N(_t[Dt],_t[ae],_t[Pt]);Yt=[];var xt=Z.concat();for(Dr=0,_r=Gn.length;Dr<_r;Dr++){Ct=Gn[Dr];var Se=[];for(Dt=0,Jt=Ct.length,ae=Jt-1,Pt=Dt+1;Dt<Jt;Dt++,ae++,Pt++)ae===Jt&&(ae=0),Pt===Jt&&(Pt=0),Se[Dt]=N(Ct[Dt],Ct[ae],Ct[Pt]);Yt.push(Se),xt=xt.concat(Se)}for(ae=0;ae<Xt;ae++){Jt=ae/Xt;var Re=Et*Math.cos(Jt*Math.PI/2);for(Pt=It*Math.sin(Jt*Math.PI/2)+Bt,Dt=0,Jt=_t.length;Dt<Jt;Dt++){var Te=E(_t[Dt],Z[Dt],Pt);I(Te.x,Te.y,-Re)}for(Dr=0,_r=Gn.length;Dr<_r;Dr++)for(Ct=Gn[Dr],Se=Yt[Dr],Dt=0,Jt=Ct.length;Dt<Jt;Dt++)Te=E(Ct[Dt],Se[Dt],Pt),I(Te.x,Te.y,-Re)}for(Pt=It+Bt,Dt=0;Dt<at;Dt++)Te=ht?E(x[Dt],xt[Dt],Pt):x[Dt],te?(xr.copy(tr.normals[0]).multiplyScalar(Te.x),Me.copy(tr.binormals[0]).multiplyScalar(Te.y),br.copy(le[0]).add(xr).add(Me),I(br.x,br.y,br.z)):I(Te.x,Te.y,0);for(Jt=1;Jt<=$;Jt++)for(Dt=0;Dt<at;Dt++)Te=ht?E(x[Dt],xt[Dt],Pt):x[Dt],te?(xr.copy(tr.normals[Jt]).multiplyScalar(Te.x),Me.copy(tr.binormals[Jt]).multiplyScalar(Te.y),br.copy(le[Jt]).add(xr).add(Me),I(br.x,br.y,br.z)):I(Te.x,Te.y,st/$*Jt);for(ae=Xt-1;0<=ae;ae--){for(Jt=ae/Xt,Re=Et*Math.cos(Jt*Math.PI/2),Pt=It*Math.sin(Jt*Math.PI/2)+Bt,Dt=0,Jt=_t.length;Dt<Jt;Dt++)Te=E(_t[Dt],Z[Dt],Pt),I(Te.x,Te.y,st+Re);for(Dr=0,_r=Gn.length;Dr<_r;Dr++)for(Ct=Gn[Dr],Se=Yt[Dr],Dt=0,Jt=Ct.length;Dt<Jt;Dt++)Te=E(Ct[Dt],Se[Dt],Pt),te?I(Te.x,Te.y+le[$-1].y,le[$-1].x+Re):I(Te.x,Te.y,st+Re)}(function(){var ye=c.length/3;if(ht){var He=0*at;for(Dt=0;Dt<yt;Dt++)vt=Mt[Dt],S(vt[2]+He,vt[1]+He,vt[0]+He);for(He=at*($+2*Xt),Dt=0;Dt<yt;Dt++)vt=Mt[Dt],S(vt[0]+He,vt[1]+He,vt[2]+He)}else{for(Dt=0;Dt<yt;Dt++)vt=Mt[Dt],S(vt[2],vt[1],vt[0]);for(Dt=0;Dt<yt;Dt++)vt=Mt[Dt],S(vt[0]+at*$,vt[1]+at*$,vt[2]+at*$)}s.addGroup(ye,c.length/3-ye,0)})(),function(){var ye=c.length/3,He=0;for(C(_t,He),He+=_t.length,Dr=0,_r=Gn.length;Dr<_r;Dr++)Ct=Gn[Dr],C(Ct,He),He+=Ct.length;s.addGroup(ye,c.length/3-ye,1)}()}sr.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:r},t=Array.isArray(t)?t:[t];for(var s=this,c=[],h=[],d=0,f=t.length;d<f;d++)n(t[d]);this.setAttribute("position",new or(c,3)),this.setAttribute("uv",new or(h,2)),this.computeVertexNormals()}function Bu(t,r,n){if(n.shapes=[],Array.isArray(t))for(var s=0,c=t.length;s<c;s++)n.shapes.push(t[s].uuid);else n.shapes.push(t.uuid);return r.extrudePath!==void 0&&(n.options.extrudePath=r.extrudePath.toJSON()),n}function Eo(t,r){ze.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:r},this.fromBufferGeometry(new Ma(t,r)),this.mergeVertices()}function Ma(t,r){r=r||{};var n=r.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ze;t=n.generateShapes(t,r.size),r.depth=r.height!==void 0?r.height:50,r.bevelThickness===void 0&&(r.bevelThickness=10),r.bevelSize===void 0&&(r.bevelSize=8),r.bevelEnabled===void 0&&(r.bevelEnabled=!1),ss.call(this,t,r),this.type="TextBufferGeometry"}function Yc(t,r,n,s,c,h,d){ze.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:r,heightSegments:n,phiStart:s,phiLength:c,thetaStart:h,thetaLength:d},this.fromBufferGeometry(new il(t,r,n,s,c,h,d)),this.mergeVertices()}function il(t,r,n,s,c,h,d){sr.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:r,heightSegments:n,phiStart:s,phiLength:c,thetaStart:h,thetaLength:d},t=t||1,r=Math.max(3,Math.floor(r)||8),n=Math.max(2,Math.floor(n)||6),s=s!==void 0?s:0,c=c!==void 0?c:2*Math.PI,h=h!==void 0?h:0,d=d!==void 0?d:Math.PI;var f=Math.min(h+d,Math.PI),x,E,N=0,C=[],I=new gt,S=new gt,F=[],D=[],K=[],Z=[];for(E=0;E<=n;E++){var $=[],st=E/n,ht=0;for(E==0&&h==0?ht=.5/r:E==n&&f==Math.PI&&(ht=-.5/r),x=0;x<=r;x++){var Et=x/r;I.x=-t*Math.cos(s+Et*c)*Math.sin(h+st*d),I.y=t*Math.cos(h+st*d),I.z=t*Math.sin(s+Et*c)*Math.sin(h+st*d),D.push(I.x,I.y,I.z),S.copy(I).normalize(),K.push(S.x,S.y,S.z),Z.push(Et+ht,1-st),$.push(N++)}C.push($)}for(E=0;E<n;E++)for(x=0;x<r;x++)t=C[E][x+1],s=C[E][x],c=C[E+1][x],d=C[E+1][x+1],(E!==0||0<h)&&F.push(t,s,d),(E!==n-1||f<Math.PI)&&F.push(s,c,d);this.setIndex(F),this.setAttribute("position",new or(D,3)),this.setAttribute("normal",new or(K,3)),this.setAttribute("uv",new or(Z,2))}function th(t,r,n,s,c,h){ze.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:r,thetaSegments:n,phiSegments:s,thetaStart:c,thetaLength:h},this.fromBufferGeometry(new Jh(t,r,n,s,c,h)),this.mergeVertices()}function Jh(t,r,n,s,c,h){sr.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:r,thetaSegments:n,phiSegments:s,thetaStart:c,thetaLength:h},t=t||.5,r=r||1,c=c!==void 0?c:0,h=h!==void 0?h:2*Math.PI,n=n!==void 0?Math.max(3,n):8,s=s!==void 0?Math.max(1,s):1;var d=[],f=[],x=[],E=[],N=t,C=(r-t)/s,I=new gt,S=new ct,F,D;for(F=0;F<=s;F++){for(D=0;D<=n;D++)t=c+D/n*h,I.x=N*Math.cos(t),I.y=N*Math.sin(t),f.push(I.x,I.y,I.z),x.push(0,0,1),S.x=(I.x/r+1)/2,S.y=(I.y/r+1)/2,E.push(S.x,S.y);N+=C}for(F=0;F<s;F++)for(r=F*(n+1),D=0;D<n;D++)t=D+r,c=t+n+1,h=t+n+2,N=t+1,d.push(t,c,N),d.push(c,h,N);this.setIndex(d),this.setAttribute("position",new or(f,3)),this.setAttribute("normal",new or(x,3)),this.setAttribute("uv",new or(E,2))}function Zc(t,r,n,s){ze.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:r,phiStart:n,phiLength:s},this.fromBufferGeometry(new ZA(t,r,n,s)),this.mergeVertices()}function ZA(t,r,n,s){sr.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:r,phiStart:n,phiLength:s},r=Math.floor(r)||12,n=n||0,s=s||2*Math.PI,s=Jr.clamp(s,0,2*Math.PI);var c=[],h=[],d=[],f=1/r,x=new gt,E=new ct,N;for(N=0;N<=r;N++){var C=n+N*f*s,I=Math.sin(C),S=Math.cos(C);for(C=0;C<=t.length-1;C++)x.x=t[C].x*I,x.y=t[C].y,x.z=t[C].x*S,h.push(x.x,x.y,x.z),E.x=N/r,E.y=C/(t.length-1),d.push(E.x,E.y)}for(N=0;N<r;N++)for(C=0;C<t.length-1;C++)n=C+N*t.length,f=n+t.length,x=n+t.length+1,E=n+1,c.push(n,f,E),c.push(f,x,E);if(this.setIndex(c),this.setAttribute("position",new or(h,3)),this.setAttribute("uv",new or(d,2)),this.computeVertexNormals(),s===2*Math.PI)for(s=this.attributes.normal.array,c=new gt,h=new gt,d=new gt,n=r*t.length*3,C=N=0;N<t.length;N++,C+=3)c.x=s[C+0],c.y=s[C+1],c.z=s[C+2],h.x=s[n+C+0],h.y=s[n+C+1],h.z=s[n+C+2],d.addVectors(c,h).normalize(),s[C+0]=s[n+C+0]=d.x,s[C+1]=s[n+C+1]=d.y,s[C+2]=s[n+C+2]=d.z}function oa(t,r){ze.call(this),this.type="ShapeGeometry",(typeof r=="undefined"?"undefined":QA(r))==="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),r=r.curveSegments),this.parameters={shapes:t,curveSegments:r},this.fromBufferGeometry(new Eu(t,r)),this.mergeVertices()}function Eu(t,r){function n(N){var C,I=c.length/3;N=N.extractPoints(r);var S=N.shape,F=N.holes;for(sd.isClockWise(S)===!1&&(S=S.reverse()),N=0,C=F.length;N<C;N++){var D=F[N];sd.isClockWise(D)===!0&&(F[N]=D.reverse())}var K=sd.triangulateShape(S,F);for(N=0,C=F.length;N<C;N++)D=F[N],S=S.concat(D);for(N=0,C=S.length;N<C;N++)D=S[N],c.push(D.x,D.y,0),h.push(0,0,1),d.push(D.x,D.y);for(N=0,C=K.length;N<C;N++)S=K[N],s.push(S[0]+I,S[1]+I,S[2]+I),x+=3}sr.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:r},r=r||12;var s=[],c=[],h=[],d=[],f=0,x=0;if(Array.isArray(t)===!1)n(t);else for(var E=0;E<t.length;E++)n(t[E]),this.addGroup(f,x,E),f+=x,x=0;this.setIndex(s),this.setAttribute("position",new or(c,3)),this.setAttribute("normal",new or(h,3)),this.setAttribute("uv",new or(d,2))}function Jg(t,r){if(r.shapes=[],Array.isArray(t))for(var n=0,s=t.length;n<s;n++)r.shapes.push(t[n].uuid);else r.shapes.push(t.uuid);return r}function ol(t,r){sr.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:r};var n=[];r=Math.cos(Jr.DEG2RAD*(r!==void 0?r:1));var s=[0,0],c={},h=["a","b","c"];if(t.isBufferGeometry){var d=new ze;d.fromBufferGeometry(t)}else d=t.clone();d.mergeVertices(),d.computeFaceNormals(),t=d.vertices,d=d.faces;for(var f=0,x=d.length;f<x;f++)for(var E=d[f],N=0;3>N;N++){var C=E[h[N]],I=E[h[(N+1)%3]];s[0]=Math.min(C,I),s[1]=Math.max(C,I),C=s[0]+","+s[1],c[C]===void 0?c[C]={index1:s[0],index2:s[1],face1:f,face2:void 0}:c[C].face2=f}for(C in c)s=c[C],(s.face2===void 0||d[s.face1].normal.dot(d[s.face2].normal)<=r)&&(h=t[s.index1],n.push(h.x,h.y,h.z),h=t[s.index2],n.push(h.x,h.y,h.z));this.setAttribute("position",new or(n,3))}function ka(t,r,n,s,c,h,d,f){ze.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:r,height:n,radialSegments:s,heightSegments:c,openEnded:h,thetaStart:d,thetaLength:f},this.fromBufferGeometry(new Iu(t,r,n,s,c,h,d,f)),this.mergeVertices()}function Iu(t,r,n,s,c,h,d,f){function x($){var st,ht=new ct,Et=new gt,It=0,Bt=$===!0?t:r,Xt=$===!0?1:-1,Yt=F;for(st=1;st<=s;st++)C.push(0,K*Xt,0),I.push(0,Xt,0),S.push(.5,.5),F++;var fe=F;for(st=0;st<=s;st++){var te=st/s*f+d,le=Math.cos(te);te=Math.sin(te),Et.x=Bt*te,Et.y=K*Xt,Et.z=Bt*le,C.push(Et.x,Et.y,Et.z),I.push(0,Xt,0),ht.x=.5*le+.5,ht.y=.5*te*Xt+.5,S.push(ht.x,ht.y),F++}for(st=0;st<s;st++)ht=Yt+st,Et=fe+st,$===!0?N.push(Et,Et+1,ht):N.push(Et+1,Et,ht),It+=3;E.addGroup(Z,It,$===!0?1:2),Z+=It}sr.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:r,height:n,radialSegments:s,heightSegments:c,openEnded:h,thetaStart:d,thetaLength:f};var E=this;t=t!==void 0?t:1,r=r!==void 0?r:1,n=n||1,s=Math.floor(s)||8,c=Math.floor(c)||1,h=h!==void 0?h:!1,d=d!==void 0?d:0,f=f!==void 0?f:2*Math.PI;var N=[],C=[],I=[],S=[],F=0,D=[],K=n/2,Z=0;(function(){var $,st,ht=new gt,Et=new gt,It=0,Bt=(r-t)/n;for(st=0;st<=c;st++){var Xt=[],Yt=st/c,fe=Yt*(r-t)+t;for($=0;$<=s;$++){var te=$/s,le=te*f+d,tr=Math.sin(le);le=Math.cos(le),Et.x=fe*tr,Et.y=-Yt*n+K,Et.z=fe*le,C.push(Et.x,Et.y,Et.z),ht.set(tr,Bt,le).normalize(),I.push(ht.x,ht.y,ht.z),S.push(te,1-Yt),Xt.push(F++)}D.push(Xt)}for($=0;$<s;$++)for(st=0;st<c;st++)ht=D[st+1][$],Et=D[st+1][$+1],Bt=D[st][$+1],N.push(D[st][$],ht,Bt),N.push(ht,Et,Bt),It+=6;E.addGroup(Z,It,0),Z+=It})(),h===!1&&(0<t&&x(!0),0<r&&x(!1)),this.setIndex(N),this.setAttribute("position",new or(C,3)),this.setAttribute("normal",new or(I,3)),this.setAttribute("uv",new or(S,2))}function Fs(t,r,n,s,c,h,d){ka.call(this,0,t,r,n,s,c,h,d),this.type="ConeGeometry",this.parameters={radius:t,height:r,radialSegments:n,heightSegments:s,openEnded:c,thetaStart:h,thetaLength:d}}function Rs(t,r,n,s,c,h,d){Iu.call(this,0,t,r,n,s,c,h,d),this.type="ConeBufferGeometry",this.parameters={radius:t,height:r,radialSegments:n,heightSegments:s,openEnded:c,thetaStart:h,thetaLength:d}}function sl(t,r,n,s){ze.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:r,thetaStart:n,thetaLength:s},this.fromBufferGeometry(new gs(t,r,n,s)),this.mergeVertices()}function gs(t,r,n,s){sr.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:r,thetaStart:n,thetaLength:s},t=t||1,r=r!==void 0?Math.max(3,r):8,n=n!==void 0?n:0,s=s!==void 0?s:2*Math.PI;var c=[],h=[],d=[],f=[],x,E=new gt,N=new ct;h.push(0,0,0),d.push(0,0,1),f.push(.5,.5);var C=0;for(x=3;C<=r;C++,x+=3){var I=n+C/r*s;E.x=t*Math.cos(I),E.y=t*Math.sin(I),h.push(E.x,E.y,E.z),d.push(0,0,1),N.x=(h[x]/t+1)/2,N.y=(h[x+1]/t+1)/2,f.push(N.x,N.y)}for(x=1;x<=r;x++)c.push(x,x+1,0);this.setIndex(c),this.setAttribute("position",new or(h,3)),this.setAttribute("normal",new or(d,3)),this.setAttribute("uv",new or(f,2))}function eh(t){hn.call(this),this.type="ShadowMaterial",this.color=new Je(0),this.transparent=!0,this.setValues(t)}function al(t){gr.call(this,t),this.type="RawShaderMaterial"}function ms(t){hn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Je(16777215),this.roughness=1,this.metalness=0,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Ys(t){ms.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ct(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(t)}function _a(t){hn.call(this),this.type="MeshPhongMaterial",this.color=new Je(16777215),this.specular=new Je(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Ps(t){hn.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Je(16777215),this.specular=new Je(1118481),this.shininess=30,this.lightMap=this.gradientMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=this.specularMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function oA(t){hn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.fog=!1,this.setValues(t)}function Tu(t){hn.call(this),this.type="MeshLambertMaterial",this.color=new Je(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Su(t){hn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Je(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Lu(t){pi.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function Zs(t,r,n,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new r.constructor(n),this.sampleValues=r,this.valueSize=n}function Jc(t,r,n,s){Zs.call(this,t,r,n,s),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function JA(t,r,n,s){Zs.call(this,t,r,n,s)}function fp(t,r,n,s){Zs.call(this,t,r,n,s)}function Js(t,r,n,s){if(t===void 0)throw Error("THREE.KeyframeTrack: track name is undefined");if(r===void 0||r.length===0)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=fs.convertArray(r,this.TimeBufferType),this.values=fs.convertArray(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}function qh(t,r,n){Js.call(this,t,r,n)}function pp(t,r,n,s){Js.call(this,t,r,n,s)}function Al(t,r,n,s){Js.call(this,t,r,n,s)}function dp(t,r,n,s){Zs.call(this,t,r,n,s)}function $h(t,r,n,s){Js.call(this,t,r,n,s)}function gp(t,r,n,s){Js.call(this,t,r,n,s)}function rh(t,r,n,s){Js.call(this,t,r,n,s)}function sA(t,r,n,s){this.name=t,this.tracks=n,this.duration=r!==void 0?r:-1,this.blendMode=s!==void 0?s:2500,this.uuid=Jr.generateUUID(),0>this.duration&&this.resetDuration()}function qA(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Al;case"vector":case"vector2":case"vector3":case"vector4":return rh;case"color":return pp;case"quaternion":return $h;case"bool":case"boolean":return qh;case"string":return gp}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function qg(t){if(t.type===void 0)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var r=qA(t.type);if(t.times===void 0){var n=[],s=[];fs.flattenJSON(t.keys,n,s,"value"),t.times=n,t.values=s}return r.parse!==void 0?r.parse(t):new r(t.name,t.times,t.values,t.interpolation)}function nh(t,r,n){var s=this,c=!1,h=0,d=0,f=void 0,x=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=n,this.itemStart=function(E){d++,c===!1&&s.onStart!==void 0&&s.onStart(E,h,d),c=!0},this.itemEnd=function(E){h++,s.onProgress!==void 0&&s.onProgress(E,h,d),h===d&&(c=!1,s.onLoad!==void 0)&&s.onLoad()},this.itemError=function(E){s.onError!==void 0&&s.onError(E)},this.resolveURL=function(E){return f?f(E):E},this.setURLModifier=function(E){return f=E,this},this.addHandler=function(E,N){return x.push(E,N),this},this.removeHandler=function(E){return E=x.indexOf(E),E!==-1&&x.splice(E,2),this},this.getHandler=function(E){for(var N=0,C=x.length;N<C;N+=2){var I=x[N],S=x[N+1];if(I.global&&(I.lastIndex=0),I.test(E))return S}return null}}function Mn(t){this.manager=t!==void 0?t:WC,this.crossOrigin="anonymous",this.resourcePath=this.path="",this.requestHeader={}}function Ba(t){Mn.call(this,t)}function on(t){Mn.call(this,t)}function $g(t){Mn.call(this,t)}function tm(t){Mn.call(this,t)}function Fu(t){Mn.call(this,t)}function Rd(t){Mn.call(this,t)}function qc(t){Mn.call(this,t)}function fn(){this.type="Curve",this.arcLengthDivisions=200}function aA(t,r,n,s,c,h,d,f){fn.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=r||0,this.xRadius=n||1,this.yRadius=s||1,this.aStartAngle=c||0,this.aEndAngle=h||2*Math.PI,this.aClockwise=d||!1,this.aRotation=f||0}function ul(t,r,n,s,c,h){aA.call(this,t,r,n,n,s,c,h),this.type="ArcCurve"}function tn(){var t=0,r=0,n=0,s=0;return{initCatmullRom:function(c,h,d,f,x){c=x*(d-c),f=x*(f-h),t=h,r=c,n=-3*h+3*d-2*c-f,s=2*h-2*d+c+f},initNonuniformCatmullRom:function(c,h,d,f,x,E,N){c=((h-c)/x-(d-c)/(x+E)+(d-h)/E)*E,f=((d-h)/E-(f-h)/(E+N)+(f-d)/N)*E,t=h,r=c,n=-3*h+3*d-2*c-f,s=2*h-2*d+c+f},calc:function(c){var h=c*c;return t+r*c+n*h+s*h*c}}}function sa(t,r,n,s){fn.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=r||!1,this.curveType=n||"centripetal",this.tension=s||.5}function em(t,r,n,s,c){r=.5*(s-r),c=.5*(c-n);var h=t*t;return(2*n-2*s+r+c)*t*h+(-3*n+3*s-2*r-c)*h+r*t+n}function ll(t,r,n,s){var c=1-t;return c*c*r+2*(1-t)*t*n+t*t*s}function hl(t,r,n,s,c){var h=1-t,d=1-t;return h*h*h*r+3*d*d*t*n+3*(1-t)*t*t*s+t*t*t*c}function $A(t,r,n,s){fn.call(this),this.type="CubicBezierCurve",this.v0=t||new ct,this.v1=r||new ct,this.v2=n||new ct,this.v3=s||new ct}function Ga(t,r,n,s){fn.call(this),this.type="CubicBezierCurve3",this.v0=t||new gt,this.v1=r||new gt,this.v2=n||new gt,this.v3=s||new gt}function Va(t,r){fn.call(this),this.type="LineCurve",this.v1=t||new ct,this.v2=r||new ct}function AA(t,r){fn.call(this),this.type="LineCurve3",this.v1=t||new gt,this.v2=r||new gt}function tu(t,r,n){fn.call(this),this.type="QuadraticBezierCurve",this.v0=t||new ct,this.v1=r||new ct,this.v2=n||new ct}function Wa(t,r,n){fn.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new gt,this.v1=r||new gt,this.v2=n||new gt}function aa(t){fn.call(this),this.type="SplineCurve",this.points=t||[]}function cl(){fn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ni(t){cl.call(this),this.type="Path",this.currentPoint=new ct,t&&this.setFromPoints(t)}function fl(t){ni.call(this,t),this.uuid=Jr.generateUUID(),this.type="Shape",this.holes=[]}function Yi(t,r){Oe.call(this),this.type="Light",this.color=new Je(t),this.intensity=r!==void 0?r:1,this.receiveShadow=void 0}function mp(t,r,n){Yi.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Oe.DefaultUp),this.updateMatrix(),this.groundColor=new Je(r)}function PA(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new ct(512,512),this.mapPass=this.map=null,this.matrix=new Qe,this._frustum=new Pn,this._frameExtents=new ct(1,1),this._viewportCount=1,this._viewports=[new Ht(0,0,1,1)]}function $c(){PA.call(this,new Wr(50,1,.5,500))}function tf(t,r,n,s,c,h){Yi.call(this,t,r),this.type="SpotLight",this.position.copy(Oe.DefaultUp),this.updateMatrix(),this.target=new Oe,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(d){this.intensity=d/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=s!==void 0?s:Math.PI/3,this.penumbra=c!==void 0?c:0,this.decay=h!==void 0?h:1,this.shadow=new $c}function Pd(){PA.call(this,new Wr(90,1,.5,500)),this._frameExtents=new ct(4,2),this._viewportCount=6,this._viewports=[new Ht(2,1,1,1),new Ht(0,1,1,1),new Ht(3,1,1,1),new Ht(1,1,1,1),new Ht(3,0,1,1),new Ht(1,0,1,1)],this._cubeDirections=[new gt(1,0,0),new gt(-1,0,0),new gt(0,0,1),new gt(0,0,-1),new gt(0,1,0),new gt(0,-1,0)],this._cubeUps=[new gt(0,1,0),new gt(0,1,0),new gt(0,1,0),new gt(0,1,0),new gt(0,0,1),new gt(0,0,-1)]}function eu(t,r,n,s){Yi.call(this,t,r),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(c){this.intensity=c/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=s!==void 0?s:1,this.shadow=new Pd}function Ea(t,r,n,s,c,h){un.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t!==void 0?t:-1,this.right=r!==void 0?r:1,this.top=n!==void 0?n:1,this.bottom=s!==void 0?s:-1,this.near=c!==void 0?c:.1,this.far=h!==void 0?h:2e3,this.updateProjectionMatrix()}function Ud(){PA.call(this,new Ea(-5,5,5,-5,.5,500))}function Fn(t,r){Yi.call(this,t,r),this.type="DirectionalLight",this.position.copy(Oe.DefaultUp),this.updateMatrix(),this.target=new Oe,this.shadow=new Ud}function Dd(t,r){Yi.call(this,t,r),this.type="AmbientLight",this.castShadow=void 0}function Od(t,r,n,s){Yi.call(this,t,r),this.type="RectAreaLight",this.width=n!==void 0?n:10,this.height=s!==void 0?s:10}function Hd(){this.coefficients=[];for(var t=0;9>t;t++)this.coefficients.push(new gt)}function uA(t,r){Yi.call(this,void 0,r),this.type="LightProbe",this.sh=t!==void 0?t:new Hd}function ih(t){Mn.call(this,t),this.textures={}}function vp(){sr.call(this),this.type="InstancedBufferGeometry",this.instanceCount=Infinity}function Nd(t,r,n,s){typeof n=="number"&&(s=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Kr.call(this,t,r,n),this.meshPerAttribute=s||1}function oh(t){Mn.call(this,t)}function ja(t){Mn.call(this,t)}function rm(t){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Mn.call(this,t),this.options=void 0}function nm(){this.type="ShapePath",this.color=new Je,this.subPaths=[],this.currentPath=null}function im(t){this.type="Font",this.data=t}function tc(t){Mn.call(this,t)}function Io(t){Mn.call(this,t)}function ec(t,r,n){uA.call(this,void 0,n),t=new Je().set(t),n=new Je().set(r),r=new gt(t.r,t.g,t.b),t=new gt(n.r,n.g,n.b),n=Math.sqrt(Math.PI);var s=n*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(t).multiplyScalar(n),this.sh.coefficients[1].copy(r).sub(t).multiplyScalar(s)}function rc(t,r){uA.call(this,void 0,r),t=new Je().set(t),this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Ru(t){this.autoStart=t!==void 0?t:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function zd(){Oe.call(this),this.type="AudioListener",this.context=KC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ru}function ru(t){Oe.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.loopEnd=this.loopStart=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._progress=this._startedAt=0,this.filters=[]}function Ia(t){ru.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function yp(t,r){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=r!==void 0?r:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function sh(t,r,n){switch(this.binding=t,this.valueSize=n,r){case"quaternion":t=this._slerp,r=this._slerpAdditive;var s=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=t=this._select,s=this._setAdditiveIdentityOther,this.buffer=Array(5*n);break;default:t=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=t,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}function xp(t,r,n){n=n||as.parseTrackName(r),this._targetGroup=t,this._bindings=t.subscribe_(r,n)}function as(t,r,n){this.path=r,this.parsedPath=n||as.parseTrackName(r),this.node=as.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Qd(t,r,n,s){this._mixer=t,this._clip=r,this._localRoot=n||null,this.blendMode=s||r.blendMode,t=r.tracks,r=t.length,n=Array(r),s={endingStart:2400,endingEnd:2400};for(var c=0;c!==r;++c){var h=t[c].createInterpolant(null);n[c]=h,h.settings=s}this._interpolantSettings=s,this._interpolants=n,this._propertyBindings=Array(r),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function wp(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function Pu(t,r){typeof t=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=r),this.value=t}function Cp(t,r,n){ya.call(this,t,r),this.meshPerAttribute=n||1}function nc(t,r,n,s){this.ray=new ns(t,r),this.near=n||0,this.far=s||Infinity,this.camera=null,this.layers=new An,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},vn(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function bd(t,r){return t.distance-r.distance}function ah(t,r,n,s){if(t.layers.test(r.layers)&&t.raycast(r,n),s===!0){t=t.children,s=0;for(var c=t.length;s<c;s++)ah(t[s],r,n,!0)}}function kd(t,r){this.min=t!==void 0?t:new ct(Infinity,Infinity),this.max=r!==void 0?r:new ct(-Infinity,-Infinity)}function Mp(t,r){this.start=t!==void 0?t:new gt,this.end=r!==void 0?r:new gt}function lo(t){Oe.call(this),this.material=t,this.render=function(){},this.hasUvs=this.hasColors=this.hasNormals=this.hasPositions=!1,this.uvArray=this.colorArray=this.normalArray=this.positionArray=null,this.count=0}function ef(t,r){Oe.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t=new sr,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var n=0,s=1;32>n;n++,s++){var c=n/32*Math.PI*2,h=s/32*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}t.setAttribute("position",new or(r,3)),r=new pi({fog:!1,toneMapped:!1}),this.cone=new uo(t,r),this.add(this.cone),this.update()}function Gd(t){var r=[];t&&t.isBone&&r.push(t);for(var n=0;n<t.children.length;n++)r.push.apply(r,Gd(t.children[n]));return r}function Ta(t){for(var r=Gd(t),n=new sr,s=[],c=[],h=new Je(0,0,1),d=new Je(0,1,0),f=0;f<r.length;f++){var x=r[f];x.parent&&x.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),c.push(h.r,h.g,h.b),c.push(d.r,d.g,d.b))}n.setAttribute("position",new or(s,3)),n.setAttribute("color",new or(c,3)),s=new pi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),uo.call(this,n,s),this.type="SkeletonHelper",this.root=t,this.bones=r,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Uu(t,r,n){this.light=t,this.light.updateMatrixWorld(),this.color=n,t=new il(r,4,2),r=new Qo({wireframe:!0,fog:!1,toneMapped:!1}),$i.call(this,t,r),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function UA(t,r,n){Oe.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t=new wa(r),t.rotateY(.5*Math.PI),this.material=new Qo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0),r=t.getAttribute("position"),r=new Float32Array(3*r.count),t.setAttribute("color",new Kr(r,3)),this.add(new $i(t,this.material)),this.update()}function pl(t,r,n,s){t=t||10,r=r||10,n=new Je(n!==void 0?n:4473924),s=new Je(s!==void 0?s:8947848);var c=r/2,h=t/r,d=t/2;t=[];for(var f=[],x=0,E=0,N=-d;x<=r;x++,N+=h){t.push(-d,0,N,d,0,N),t.push(N,0,-d,N,0,d);var C=x===c?n:s;C.toArray(f,E),E+=3,C.toArray(f,E),E+=3,C.toArray(f,E),E+=3,C.toArray(f,E),E+=3}r=new sr,r.setAttribute("position",new or(t,3)),r.setAttribute("color",new or(f,3)),n=new pi({vertexColors:!0,toneMapped:!1}),uo.call(this,r,n),this.type="GridHelper"}function rf(t,r,n,s,c,h){t=t||10,r=r||16,n=n||8,s=s||64,c=new Je(c!==void 0?c:4473924),h=new Je(h!==void 0?h:8947848);var d=[],f=[],x;for(x=0;x<=r;x++){var E=x/r*2*Math.PI,N=Math.sin(E)*t;E=Math.cos(E)*t,d.push(0,0,0),d.push(N,0,E);var C=x&1?c:h;f.push(C.r,C.g,C.b),f.push(C.r,C.g,C.b)}for(x=0;x<=n;x++){C=x&1?c:h;var I=t-t/n*x;for(r=0;r<s;r++)E=r/s*2*Math.PI,N=Math.sin(E)*I,E=Math.cos(E)*I,d.push(N,0,E),f.push(C.r,C.g,C.b),E=(r+1)/s*2*Math.PI,N=Math.sin(E)*I,E=Math.cos(E)*I,d.push(N,0,E),f.push(C.r,C.g,C.b)}t=new sr,t.setAttribute("position",new or(d,3)),t.setAttribute("color",new or(f,3)),d=new pi({vertexColors:!0,toneMapped:!1}),uo.call(this,t,d),this.type="PolarGridHelper"}function dl(t,r,n){Oe.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,r===void 0&&(r=1),t=new sr,t.setAttribute("position",new or([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3)),r=new pi({fog:!1,toneMapped:!1}),this.lightPlane=new Xs(t,r),this.add(this.lightPlane),t=new sr,t.setAttribute("position",new or([0,0,0,0,0,1],3)),this.targetLine=new Xs(t,r),this.add(this.targetLine),this.update()}function nf(t){function r(S,F,D){n(S,D),n(F,D)}function n(S,F){h.push(0,0,0),d.push(F.r,F.g,F.b),f[S]===void 0&&(f[S]=[]),f[S].push(h.length/3-1)}var s=new sr,c=new pi({color:16777215,vertexColors:!0,toneMapped:!1}),h=[],d=[],f={},x=new Je(16755200),E=new Je(16711680),N=new Je(43775),C=new Je(16777215),I=new Je(3355443);r("n1","n2",x),r("n2","n4",x),r("n4","n3",x),r("n3","n1",x),r("f1","f2",x),r("f2","f4",x),r("f4","f3",x),r("f3","f1",x),r("n1","f1",x),r("n2","f2",x),r("n3","f3",x),r("n4","f4",x),r("p","n1",E),r("p","n2",E),r("p","n3",E),r("p","n4",E),r("u1","u2",N),r("u2","u3",N),r("u3","u1",N),r("c","t",C),r("p","c",I),r("cn1","cn2",I),r("cn3","cn4",I),r("cf1","cf2",I),r("cf3","cf4",I),s.setAttribute("position",new or(h,3)),s.setAttribute("color",new or(d,3)),uo.call(this,s,c),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=f,this.update()}function Do(t,r,n,s,c,h,d){if(V1.set(c,h,d).unproject(s),t=r[t],t!==void 0)for(n=n.getAttribute("position"),r=0,s=t.length;r<s;r++)n.setXYZ(t[r],V1.x,V1.y,V1.z)}function gl(t,r){this.object=t,r===void 0&&(r=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new Float32Array(24),s=new sr;s.setIndex(new Kr(t,1)),s.setAttribute("position",new Kr(n,3)),uo.call(this,s,new pi({color:r,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function ml(t,r){this.type="Box3Helper",this.box=t,r=r||16776960,t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new sr;n.setIndex(new Kr(t,1)),n.setAttribute("position",new or([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),uo.call(this,n,new pi({color:r,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function vs(t,r,n){this.plane=t,this.size=r===void 0?1:r,t=n!==void 0?n:16776960,r=new sr,r.setAttribute("position",new or([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Xs.call(this,r,new pi({color:t,toneMapped:!1})),this.type="PlaneHelper",r=new sr,r.setAttribute("position",new or([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),r.computeBoundingSphere(),this.add(new $i(r,new Qo({color:t,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function nr(t,r,n,s,c,h){Oe.call(this),this.type="ArrowHelper",t===void 0&&(t=new gt(0,0,1)),r===void 0&&(r=new gt(0,0,0)),n===void 0&&(n=1),s===void 0&&(s=16776960),c===void 0&&(c=.2*n),h===void 0&&(h=.2*c),j1===void 0&&(j1=new sr,j1.setAttribute("position",new or([0,0,0,0,1,0],3)),Kx=new Iu(0,.5,1,5,1),Kx.translate(0,-.5,0)),this.position.copy(r),this.line=new Xs(j1,new pi({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $i(Kx,new Qo({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,c,h)}function _p(t){t=t||1;var r=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t];t=new sr,t.setAttribute("position",new or(r,3)),t.setAttribute("color",new or([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),r=new pi({vertexColors:!0,toneMapped:!1}),uo.call(this,t,r),this.type="AxesHelper"}function Vd(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),sa.call(this,t),this.type="catmullrom"}function DA(){}function Xa(t,r){for(var n in r)t[n]=r[n]}function Aa(t,r){this.lng=t,this.lat=r}function of(t,r){this.x=t,this.y=r}function OA(t){for(var r=t.length;0<=--r;)t[r]=0}function ic(t,r){return function(n){return r(t(n))}}function om(t){var r=function(n){return n==null?n:(1<arguments.length&&(n=Array.prototype.slice.call(arguments)),t(n))};return"conversion"in t&&(r.conversion=t.conversion),r}function sm(t){var r=function(n){if(n==null)return n;1<arguments.length&&(n=Array.prototype.slice.call(arguments));var s=t(n);if((typeof s=="undefined"?"undefined":QA(s))==="object")for(var c=s.length,h=0;h<c;h++)s[h]=Math.round(s[h]);return s};return"conversion"in t&&(r.conversion=t.conversion),r}function ys(t,r){if(!(this instanceof ys))return new ys(t,r);if(r&&r in u2&&(r=null),r&&!(r in Vu))throw Error("Unknown model: "+r);if(typeof t=="undefined")this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof ys)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){if(r=v0.get(t),r===null)throw Error("Unable to parse color from string: "+t);this.model=r.model;var n=Vu[this.model].channels;this.color=r.value.slice(0,n),this.valpha=typeof r.value[n]=="number"?r.value[n]:1}else if(t.length)this.model=r||"rgb",n=Vu[this.model].channels,r=Zx.call(t,0,n),this.color=Wd(r,n),this.valpha=typeof t[n]=="number"?t[n]:1;else if(typeof t=="number")t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{if(this.valpha=1,r=Xi(t),"alpha"in t&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0),r=r.sort().join(""),!(r in Jx))throw Error("Unable to parse color from object: "+Za(t));this.model=Jx[r],n=Vu[this.model].labels;var s=[];for(r=0;r<n.length;r++)s.push(t[n[r]]);this.color=Wd(s)}if(X1[this.model])for(n=Vu[this.model].channels,r=0;r<n;r++)(t=X1[this.model][r])&&(this.color[r]=t(this.color[r]));this.valpha=Math.max(0,Math.min(1,this.valpha)),bi&&bi(this)}function vl(t){return function(r){return Number(r.toFixed(t))}}function ho(t,r,n){return t=Array.isArray(t)?t:[t],t.forEach(function(s){(X1[s]||(X1[s]=[]))[r]=n}),t=t[0],function(s){if(arguments.length){n&&(s=n(s));var c=this[t]();return c.color[r]=s,c}return c=this[t]().color[r],n&&(c=n(c)),c}}function co(t){return function(r){return Math.max(0,Math.min(t,r))}}function Wd(t,r){for(var n=0;n<r;n++)typeof t[n]!="number"&&(t[n]=0);return t}function As(t,r){for(var n=["webgl2","experimental-webgl2","webgl","experimental-webgl"],s=void 0,c=0;c<n.length;c++)try{if(s=t.getContext(n[c],{stencil:!0,alpha:!0,premultipliedAlpha:!1,antialias:r.antialias||!0,preserveDrawingBuffer:r.preserveDrawingBuffer||!1}))break}catch(h){}return s}function To(){this.needsSwap=this.enabled=!0,this.renderToScreen=this.clear=!1}var Tn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Nt.g!="undefined"?Nt.g:typeof self!="undefined"?self:{},_n=Ot(function(t){t=t.exports=typeof window!="undefined"&&Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")(),typeof __g=="number"&&(__g=t)}),Jn=Ot(function(t){t=t.exports={version:"2.6.5"},typeof __e=="number"&&(__e=t)}),Ah=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t},xs=function(t,r,n){if(Ah(t),r===void 0)return t;switch(n){case 1:return function(s){return t.call(r,s)};case 2:return function(s,c){return t.call(r,s,c)};case 3:return function(s,c,h){return t.call(r,s,c,h)}}return function(){return t.apply(r,arguments)}},ro=function(t){return typeof t=="object"?t!==null:typeof t=="function"},Us=function(t){if(!ro(t))throw TypeError(t+" is not an object!");return t},Ds=function(t){try{return!!t()}catch(r){return!0}},Sa=!Ds(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),Os=_n.document,Bp=ro(Os)&&ro(Os.createElement),Ep=!Sa&&!Ds(function(){return Object.defineProperty(Bp?Os.createElement("div"):{},"a",{get:function(){return 7}}).a!=7}),sf=function(t,r){if(!ro(t))return t;var n,s;if(r&&typeof(n=t.toString)=="function"&&!ro(s=n.call(t))||typeof(n=t.valueOf)=="function"&&!ro(s=n.call(t))||!r&&typeof(n=t.toString)=="function"&&!ro(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")},am=Object.defineProperty,qs={f:Sa?Object.defineProperty:function(t,r,n){if(Us(t),r=sf(r,!0),Us(n),Ep)try{return am(t,r,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t}},HA=function(t,r){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:r}},nu=Sa?function(t,r,n){return qs.f(t,r,HA(1,n))}:function(t,r,n){return t[r]=n,t},jd={}.hasOwnProperty,zi=function(t,r){return jd.call(t,r)},Jo=function(t,r,n){var s=t&Jo.F,c=t&Jo.G,h=t&Jo.S,d=t&Jo.P,f=t&Jo.B,x=t&Jo.W,E=c?Jn:Jn[r]||(Jn[r]={}),N=E.prototype;h=c?_n:h?_n[r]:(_n[r]||{}).prototype;var C;c&&(n=r);for(C in n)if(r=!s&&h&&h[C]!==void 0,!r||!zi(E,C)){var I=r?h[C]:n[C];E[C]=c&&typeof h[C]!="function"?n[C]:f&&r?xs(I,_n):x&&h[C]==I?function(S){var F=function(D,K,Z){if(this instanceof S){switch(arguments.length){case 0:return new S;case 1:return new S(D);case 2:return new S(D,K)}return new S(D,K,Z)}return S.apply(this,arguments)};return F.prototype=S.prototype,F}(I):d&&typeof I=="function"?xs(Function.call,I):I,d&&((E.virtual||(E.virtual={}))[C]=I,t&Jo.R&&N&&!N[C]&&nu(N,C,I))}};Jo.F=1,Jo.G=2,Jo.S=4,Jo.P=8,Jo.B=16,Jo.W=32,Jo.U=64,Jo.R=128;var pr=Jo,yl={}.toString,ua=function(t){return yl.call(t).slice(8,-1)},lA=Object("z").propertyIsEnumerable(0)?Object:function(t){return ua(t)=="String"?t.split(""):Object(t)},oo=function(t){if(t==null)throw TypeError("Can't call method on  "+t);return t},kn=function(t){return lA(oo(t))},oc=Math.ceil,Xd=Math.floor,iu=function(t){return isNaN(t=+t)?0:(0<t?Xd:oc)(t)},af=Math.min,Du=function(t){return 0<t?af(iu(t),9007199254740991):0},Xv=Math.max,Kv=Math.min,qo=Ot(function(t){var r=_n["__core-js_shared__"]||(_n["__core-js_shared__"]={});(t.exports=function(n,s){return r[n]||(r[n]=s!==void 0?s:{})})("versions",[]).push({version:Jn.version,mode:"pure",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),Ip=0,Am=Math.random(),Af=function(t){return"Symbol(".concat(t===void 0?"":t,")_",(++Ip+Am).toString(36))},sc=qo("keys"),ac=function(t){return sc[t]||(sc[t]=Af(t))},um=function(t){return function(r,n,s){r=kn(r);var c=Du(r.length);if(s=iu(s),s=0>s?Xv(s+c,0):Kv(s,c),t&&n!=n){for(;c>s;)if(n=r[s++],n!=n)return!0}else for(;c>s;s++)if((t||s in r)&&r[s]===n)return t||s||0;return!t&&-1}}(!1),uf=ac("IE_PROTO"),Ou=function(t,r){t=kn(t);var n=0,s=[],c;for(c in t)c!=uf&&zi(t,c)&&s.push(c);for(;r.length>n;)zi(t,c=r[n++])&&(~um(s,c)||s.push(c));return s},xl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),uh=Object.keys||function(t){return Ou(t,xl)},Tp=Sa?Object.defineProperties:function(t,r){Us(t);for(var n=uh(r),s=n.length,c=0,h;s>c;)qs.f(t,h=n[c++],r[h]);return t},lm=_n.document,lf=lm&&lm.documentElement,hm=ac("IE_PROTO"),us=function(){},NA=function(){var t=Bp?Os.createElement("iframe"):{},r=xl.length;for(t.style.display="none",lf.appendChild(t),t.src="javascript:",t=t.contentWindow.document,t.open(),t.write("<script>document.F=Object</script>"),t.close(),NA=t.F;r--;)delete NA.prototype[xl[r]];return NA()},wl=Object.create||function(t,r){if(t!==null){us.prototype=Us(t);var n=new us;us.prototype=null,n[hm]=t}else n=NA();return r===void 0?n:Tp(n,r)};pr(pr.S,"Object",{create:wl});var Yv=Jn.Object,cm=function(t,r){return Yv.create(t,r)},Sp=Ot(function(t){t.exports={default:cm,__esModule:!0}}),pt=Gt(Sp),Kd=Object.getOwnPropertySymbols,Lp={}.propertyIsEnumerable,Fp=Object.assign,Ac=!Fp||Ds(function(){var t={},r={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(s){r[s]=s}),Fp({},t)[n]!=7||Object.keys(Fp({},r)).join("")!="abcdefghijklmnopqrst"})?function(t,r){for(var n=Object(oo(t)),s=arguments.length,c=1,h=Kd,d=Lp;s>c;)for(var f=lA(arguments[c++]),x=h?uh(f).concat(h(f)):uh(f),E=x.length,N=0,C;E>N;)d.call(f,C=x[N++])&&(n[C]=f[C]);return n}:Fp;pr(pr.S+pr.F,"Object",{assign:Ac});var fm=Jn.Object.assign,Zv=Ot(function(t){t.exports={default:fm,__esModule:!0}}),dt=Gt(Zv);pr(pr.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}});var Cl=Jn.Math.log2,pm=Ot(function(t){t.exports={default:Cl,__esModule:!0}}),dm=Gt(pm),Oo={},Ho=Ot(function(t){var r=qo("wks"),n=_n.Symbol,s=typeof n=="function";(t.exports=function(c){return r[c]||(r[c]=s&&n[c]||(s?n:Af)("Symbol."+c))}).store=r}),gm=qs.f,mm=Ho("toStringTag"),Ml=function(t,r,n){t&&!zi(t=n?t:t.prototype,mm)&&gm(t,mm,{configurable:!0,value:r})},Yd={};nu(Yd,Ho("iterator"),function(){return this});var hf=function(t,r,n){t.prototype=wl(Yd,{next:HA(1,n)}),Ml(t,r+" Iterator")},uc=ac("IE_PROTO"),vm=Object.prototype,Rp=Object.getPrototypeOf||function(t){return t=Object(oo(t)),zi(t,uc)?t[uc]:typeof t.constructor=="function"&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?vm:null},lc=Ho("iterator"),hc=!([].keys&&"next"in[].keys()),Pp=function(){return this},cf=function(t,r,n,s,c,h,d){hf(n,r,s),s=function(Z){return!hc&&Z in N?N[Z]:function(){return new n(this,Z)}};var f=r+" Iterator",x=c=="values",E=!1,N=t.prototype,C=N[lc]||N["@@iterator"]||c&&N[c],I=C||s(c),S=c?x?s("entries"):I:void 0,F=r=="Array"&&N.entries||C,D;if(F&&(t=Rp(F.call(new t)),t!==Object.prototype&&t.next&&Ml(t,f,!0)),x&&C&&C.name!=="values"&&(E=!0,I=function(){return C.call(this)}),d&&(hc||E||!N[lc])&&nu(N,lc,I),Oo[r]=I,Oo[f]=Pp,c){var K={values:x?I:s("values"),keys:h?I:s("keys"),entries:S};if(d)for(D in K)D in N||nu(N,D,K[D]);else pr(pr.P+pr.F*(hc||E),r,K)}return K},Hu=function(t){return function(r,n){r=String(oo(r)),n=iu(n);var s=r.length,c;if(0>n||n>=s)return t?"":void 0;var h=r.charCodeAt(n);return 55296>h||56319<h||n+1===s||56320>(c=r.charCodeAt(n+1))||57343<c?t?r.charAt(n):h:t?r.slice(n,n+2):(h-55296<<10)+(c-56320)+65536}}(!0);cf(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(t=Hu(t,r),this._i+=t.length,{value:t,done:!1})});var ff=function(t,r,n,s){try{return s?r(Us(n)[0],n[1]):r(n)}catch(c){throw r=t.return,r!==void 0&&Us(r.call(t)),c}},Up=Ho("iterator"),Zd=Array.prototype,Jv=Ho("toStringTag"),pf=ua(function(){return arguments}())=="Arguments",lh=function(t){var r;if(t===void 0)var n="Undefined";else{if(t===null)var s="Null";else{t:{var c=t=Object(t);try{s=c[Jv];break t}catch(h){}s=void 0}s=typeof(n=s)=="string"?n:pf?ua(t):(r=ua(t))=="Object"&&typeof t.callee=="function"?"Arguments":r}n=s}return n},_l=Ho("iterator"),df=Jn.getIteratorMethod=function(t){if(t!=null)return t[_l]||t["@@iterator"]||Oo[lh(t)]},hh=Ho("iterator"),ym=!1;try{[7][hh]().return=function(){ym=!0}}catch(t){}var Jd=function(t,r){if(!r&&!ym)return!1;var n=!1;try{r=[7];var s=r[hh]();s.next=function(){return{done:n=!0}},r[hh]=function(){return s},t(r)}catch(c){}return n};pr(pr.S+pr.F*!Jd(function(t){}),"Array",{from:function(t){var r=Object(oo(t)),n=typeof this=="function"?this:Array,s=arguments.length,c=1<s?arguments[1]:void 0,h=c!==void 0,d=0,f=df(r),x;if(h&&(c=xs(c,2<s?arguments[2]:void 0,2)),f!=null&&(n!=Array||f===void 0||Oo.Array!==f&&Zd[Up]!==f))for(r=f.call(r),n=new n;!(x=r.next()).done;d++)s=n,f=d,x=h?ff(r,c,[x.value,d],!0):x.value,f in s?qs.f(s,f,HA(0,x)):s[f]=x;else for(s=Du(r.length),n=new n(s);s>d;d++){f=n,x=d;var E=h?c(r[d],d):r[d];x in f?qs.f(f,x,HA(0,E)):f[x]=E}return n.length=d,n}});var zA=Jn.Array.from,cc=Ot(function(t){t.exports={default:zA,__esModule:!0}}),fc=Gt(cc),hA=function(t,r){return{value:r,done:!!t}};cf(Array,"Array",function(t,r){this._t=kn(t),this._i=0,this._k=r},function(){var t=this._t,r=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,hA(1)):r=="keys"?hA(0,n):r=="values"?hA(0,t[n]):hA(0,[n,t[n]])},"values"),Oo.Arguments=Oo.Array;for(var gf=Ho("toStringTag"),mf="CSSRuleList CSSStyleDeclaration CSSValueList ClientRectList DOMRectList DOMStringList DOMTokenList DataTransferItemList FileList HTMLAllCollection HTMLCollection HTMLFormElement HTMLSelectElement MediaList MimeTypeArray NamedNodeMap NodeList PaintRequestList Plugin PluginArray SVGLengthList SVGNumberList SVGPathSegList SVGPointList SVGStringList SVGTransformList SourceBufferList StyleSheetList TextTrackCueList TextTrackList TouchList".split(" "),ch=0;ch<mf.length;ch++){var pc=mf[ch],Dp=_n[pc],Op=Dp&&Dp.prototype;Op&&!Op[gf]&&nu(Op,gf,pc),Oo[pc]=Oo.Array}var ls=function(t,r,n,s){if(!(t instanceof r)||s!==void 0&&s in t)throw TypeError(n+": incorrect invocation!");return t},Si=Ot(function(t){var r={},n={};t=t.exports=function(s,c,h,d,f){f=f?function(){return s}:df(s),h=xs(h,d,c?2:1),d=0;var x,E;if(typeof f!="function")throw TypeError(s+" is not iterable!");if(f===void 0||Oo.Array!==f&&Zd[Up]!==f){for(d=f.call(s);!(E=d.next()).done;)if(f=ff(d,h,E.value,c),f===r||f===n)return f}else for(x=Du(s.length);x>d;d++)if(f=c?h(Us(E=s[d])[0],E[1]):h(s[d]),f===r||f===n)return f},t.BREAK=r,t.RETURN=n}),en=Ho("species"),zn=function(t,r){t=Us(t).constructor;var n;return t===void 0||(n=Us(t)[en])==null?r:Ah(n)},qv=function(t,r,n){var s=n===void 0;switch(r.length){case 0:return s?t():t.call(n);case 1:return s?t(r[0]):t.call(n,r[0]);case 2:return s?t(r[0],r[1]):t.call(n,r[0],r[1]);case 3:return s?t(r[0],r[1],r[2]):t.call(n,r[0],r[1],r[2]);case 4:return s?t(r[0],r[1],r[2],r[3]):t.call(n,r[0],r[1],r[2],r[3])}return t.apply(n,r)},dc=_n.process,ur=_n.setImmediate,xm=_n.clearImmediate,wm=_n.MessageChannel,Bl=_n.Dispatch,Hp=0,Ur={},hs=function(){var t=+this;if(Ur.hasOwnProperty(t)){var r=Ur[t];delete Ur[t],r()}},El=function(t){hs.call(t.data)};if(!ur||!xm)if(ur=function(t){for(var r=[],n=1;arguments.length>n;)r.push(arguments[n++]);return Ur[++Hp]=function(){qv(typeof t=="function"?t:Function(t),r)},ir(Hp),Hp},xm=function(t){delete Ur[t]},ua(dc)=="process")var ir=function(t){dc.nextTick(xs(hs,t,1))};else if(Bl&&Bl.now)ir=function(t){Bl.now(xs(hs,t,1))};else if(wm){var Nu=new wm,Li=Nu.port2;Nu.port1.onmessage=El,ir=xs(Li.postMessage,Li,1)}else _n.addEventListener&&typeof postMessage=="function"&&!_n.importScripts?(ir=function(t){_n.postMessage(t+"","*")},_n.addEventListener("message",El,!1)):ir="onreadystatechange"in(Bp?Os.createElement("script"):{})?function(t){lf.appendChild(Bp?Os.createElement("script"):{}).onreadystatechange=function(){lf.removeChild(this),hs.call(t)}}:function(t){setTimeout(xs(hs,t,1),0)};var Zi=ur,Il=_n.MutationObserver||_n.WebKitMutationObserver,Np=_n.process,zp=_n.Promise,Qp=ua(Np)=="process",Tl={f:function(t){return new ue(t)}},vf=function(t){try{return{e:!1,v:t()}}catch(r){return{e:!0,v:r}}},qd=_n.navigator,gc=qd&&qd.userAgent||"",fh=function(t,r){if(Us(t),ro(r)&&r.constructor===t)return r;t=Tl.f(t);var n=t.resolve;return n(r),t.promise},bp=function(t,r,n){for(var s in r)n&&t[s]?t[s]=r[s]:nu(t,s,r[s]);return t},Cm=Ho("species"),Mm=function(t){t=typeof Jn[t]=="function"?Jn[t]:_n[t],Sa&&t&&!t[Cm]&&qs.f(t,Cm,{configurable:!0,get:function(){return this}})},_m=function(){var t,r,n=function(){var f;for(Qp&&(f=Np.domain)&&f.exit();t;){var x=t.fn;t=t.next;try{x()}catch(E){throw t?s():r=void 0,E}}r=void 0,f&&f.enter()};if(Qp)var s=function(){Np.nextTick(n)};else if(!Il||_n.navigator&&_n.navigator.standalone)if(zp&&zp.resolve){var c=zp.resolve(void 0);s=function(){c.then(n)}}else s=function(){Zi.call(_n,n)};else{var h=!0,d=document.createTextNode("");new Il(n).observe(d,{characterData:!0}),s=function(){d.data=h=!h}}return function(f){f={fn:f,next:void 0},r&&(r.next=f),t||(t=f,s()),r=f}}(),kp=_n.TypeError,ph=_n.process,Bm=ph&&ph.versions,$d=Bm&&Bm.v8||"",cA=_n.Promise,ui=lh(ph)=="process",mc=function(){},yf,vc=yf=Tl.f,Gp=!!function(){try{var t=cA.resolve(1),r=(t.constructor={})[Ho("species")]=function(n){n(mc,mc)};return(ui||typeof PromiseRejectionEvent=="function")&&t.then(mc)instanceof r&&$d.indexOf("6.6")!==0&&gc.indexOf("Chrome/66")===-1}catch(n){}}(),Em=function(t){var r;return ro(t)&&typeof(r=t.then)=="function"?r:!1},Ka=function(t,r){if(!t._n){t._n=!0;var n=t._c;_m(function(){for(var s=t._v,c=t._s==1,h=0;n.length>h;){var d=void 0,f=void 0,x=void 0,E=n[h++],N=c?E.ok:E.fail,C=E.resolve,I=E.reject,S=E.domain;try{N?(c||(t._h==2&&$v(t),t._h=1),N===!0?x=s:(S&&S.enter(),x=N(s),S&&(S.exit(),d=!0)),x===E.promise?I(kp("Promise-chain cycle")):(f=Em(x))?f.call(x,C,I):C(x)):I(s)}catch(F){S&&!d&&S.exit(),I(F)}}t._c=[],t._n=!1,r&&!t._h&&Im(t)})}},Im=function(t){Zi.call(_n,function(){var r=t._v,n=t._h!==1&&(t._a||t._c).length===0,s,c;if(n){var h=vf(function(){ui?ph.emit("unhandledRejection",r,t):(s=_n.onunhandledrejection)?s({promise:t,reason:r}):(c=_n.console)&&c.error&&c.error("Unhandled promise rejection",r)});t._h=ui||t._h!==1&&(t._a||t._c).length===0?2:1}if(t._a=void 0,n&&h.e)throw h.v})},$v=function(t){Zi.call(_n,function(){var r;ui?ph.emit("rejectionHandled",t):(r=_n.onrejectionhandled)&&r({promise:t,reason:t._v})})},zu=function(t){var r=this;r._d||(r._d=!0,r=r._w||r,r._v=t,r._s=2,r._a||(r._a=r._c.slice()),Ka(r,!0))},Sl=function(t){var r=this,n;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw kp("Promise can't be resolved itself");(n=Em(t))?_m(function(){var s={_w:r,_d:!1};try{n.call(t,xs(Sl,s,1),xs(zu,s,1))}catch(c){zu.call(s,c)}}):(r._v=t,r._s=1,Ka(r,!1))}catch(s){zu.call({_w:r,_d:!1},s)}}};if(!Gp){cA=function(t){ls(this,cA,"Promise","_h"),Ah(t),Vp.call(this);try{t(xs(Sl,this,1),xs(zu,this,1))}catch(r){zu.call(this,r)}};var Vp=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1};Vp.prototype=bp(cA.prototype,{then:function(t,r){var n=vc(zn(this,cA));return n.ok=typeof t=="function"?t:!0,n.fail=typeof r=="function"&&r,n.domain=ui?ph.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Ka(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}});var Wp=function(){var t=new Vp;this.promise=t,this.resolve=xs(Sl,t,1),this.reject=xs(zu,t,1)};Tl.f=vc=function(t){return t===cA||t===jp?new Wp(t):yf(t)}}pr(pr.G+pr.W+pr.F*!Gp,{Promise:cA}),Ml(cA,"Promise"),Mm("Promise");var jp=Jn.Promise;pr(pr.S+pr.F*!Gp,"Promise",{reject:function(t){var r=vc(this),n=r.reject;return n(t),r.promise}}),pr(pr.S+1*pr.F,"Promise",{resolve:function(t){return fh(this===jp?cA:this,t)}}),pr(pr.S+pr.F*!(Gp&&Jd(function(t){cA.all(t).catch(mc)})),"Promise",{all:function(t){var r=this,n=vc(r),s=n.resolve,c=n.reject,h=vf(function(){var d=[],f=0,x=1;Si(t,!1,function(E){var N=f++,C=!1;d.push(void 0),x++,r.resolve(E).then(function(I){C||(C=!0,d[N]=I,--x||s(d))},c)}),--x||s(d)});return h.e&&c(h.v),n.promise},race:function(t){var r=this,n=vc(r),s=n.reject,c=vf(function(){Si(t,!1,function(h){r.resolve(h).then(n.resolve,s)})});return c.e&&s(c.v),n.promise}}),pr(pr.P+pr.R,"Promise",{finally:function(t){var r=zn(this,Jn.Promise||_n.Promise),n=typeof t=="function";return this.then(n?function(s){return fh(r,t()).then(function(){return s})}:t,n?function(s){return fh(r,t()).then(function(){throw s})}:t)}}),pr(pr.S,"Promise",{try:function(t){var r=Tl.f(this);return t=vf(t),(t.e?r.reject:r.resolve)(t.v),r.promise}});var tg=Jn.Promise,Tm=Ot(function(t){t.exports={default:tg,__esModule:!0}}),Ve=Gt(Tm),Hs=Ot(function(t){var r=Af("meta"),n=qs.f,s=0,c=Object.isExtensible||function(){return!0},h=!Ds(function(){return c(Object.preventExtensions({}))}),d=function(x){n(x,r,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(x,E){if(!ro(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!zi(x,r)){if(!c(x))return"F";if(!E)return"E";d(x)}return x[r].i},getWeak:function(x,E){if(!zi(x,r)){if(!c(x))return!0;if(!E)return!1;d(x)}return x[r].w},onFreeze:function(x){return h&&f.NEED&&c(x)&&!zi(x,r)&&d(x),x}}}),fA=function(t,r){var n=(Jn.Object||{})[t]||Object[t],s={};s[t]=r(n),pr(pr.S+pr.F*Ds(function(){n(1)}),"Object",s)},Vo=Hs.onFreeze;fA("freeze",function(t){return function(r){return t&&ro(r)?t(Vo(r)):r}});var t0=Jn.Object.freeze,Qi=Ot(function(t){t.exports={default:t0,__esModule:!0}}),bi=Gt(Qi),dh={f:Ho},e0=dh.f("iterator"),Ll=Ot(function(t){t.exports={default:e0,__esModule:!0}});Gt(Ll);var Sm=qs.f,la=function(t){var r=Jn.Symbol||(Jn.Symbol={});t.charAt(0)=="_"||t in r||Sm(r,t,{value:dh.f(t)})},La=Array.isArray||function(t){return ua(t)=="Array"},r0=xl.concat("length","prototype"),xf=Object.getOwnPropertyNames||function(t){return Ou(t,r0)},Lm=xf,eg={}.toString,rg=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ng=function(t){if(rg&&eg.call(t)=="[object Window]")try{var r=Lm(t)}catch(n){r=rg.slice()}else r=Lm(kn(t));return r},wf=Object.getOwnPropertyDescriptor,yc={f:Sa?wf:function(t,r){if(t=kn(t),r=sf(r,!0),Ep)try{return wf(t,r)}catch(n){}if(zi(t,r))return HA(!Lp.call(t,r),t[r])}},Fm=Hs.KEY,Xp=yc.f,ou=qs.f,Rm=ng,Fa=_n.Symbol,Kp=_n.JSON,su=Kp&&Kp.stringify,ki=Ho("_hidden"),ig=Ho("toPrimitive"),Cf={}.propertyIsEnumerable,Mf=qo("symbol-registry"),au=qo("symbols"),Qu=qo("op-symbols"),Ns=Object.prototype,Au=typeof Fa=="function",_f=_n.QObject,uu=!_f||!_f.prototype||!_f.prototype.findChild,gh=Sa&&Ds(function(){return wl(ou({},"a",{get:function(){return ou(this,"a",{value:7}).a}})).a!=7})?function(t,r,n){var s=Xp(Ns,r);s&&delete Ns[r],ou(t,r,n),s&&t!==Ns&&ou(Ns,r,s)}:ou,xc=function(t){var r=au[t]=wl(Fa.prototype);return r._k=t,r},Bf=Au&&typeof Fa.iterator=="symbol"?function(t){return typeof t=="symbol"}:function(t){return t instanceof Fa},Fl=function(t,r,n){return t===Ns&&Fl(Qu,r,n),Us(t),r=sf(r,!0),Us(n),zi(au,r)?(n.enumerable?(zi(t,ki)&&t[ki][r]&&(t[ki][r]=!1),n=wl(n,{enumerable:HA(0,!1)})):(zi(t,ki)||ou(t,ki,HA(1,{})),t[ki][r]=!0),gh(t,r,n)):ou(t,r,n)},Yp=function(t,r){Us(t);var n=r=kn(r),s=uh(n),c=Kd;if(c){c=c(n);for(var h=Lp,d=0,f;c.length>d;)h.call(n,f=c[d++])&&s.push(f)}n=0,f=s.length;for(var x;f>n;)Fl(t,x=s[n++],r[x]);return t},Pm=function(t){var r=Cf.call(this,t=sf(t,!0));return this===Ns&&zi(au,t)&&!zi(Qu,t)?!1:r||!zi(this,t)||!zi(au,t)||zi(this,ki)&&this[ki][t]?r:!0},Zp=function(t,r){if(t=kn(t),r=sf(r,!0),t!==Ns||!zi(au,r)||zi(Qu,r)){var n=Xp(t,r);return!n||!zi(au,r)||zi(t,ki)&&t[ki][r]||(n.enumerable=!0),n}},og=function(t){t=Rm(kn(t));for(var r=[],n=0,s;t.length>n;)zi(au,s=t[n++])||s==ki||s==Fm||r.push(s);return r},Jp=function(t){var r=t===Ns;t=Rm(r?Qu:kn(t));for(var n=[],s=0,c;t.length>s;)zi(au,c=t[s++])&&(r?zi(Ns,c):1)&&n.push(au[c]);return n};Au||(Fa=function(){if(this instanceof Fa)throw TypeError("Symbol is not a constructor!");var t=Af(0<arguments.length?arguments[0]:void 0),r=function(n){this===Ns&&r.call(Qu,n),zi(this,ki)&&zi(this[ki],t)&&(this[ki][t]=!1),gh(this,t,HA(1,n))};return Sa&&uu&&gh(Ns,t,{configurable:!0,set:r}),xc(t)},nu(Fa.prototype,"toString",function(){return this._k}),yc.f=Zp,qs.f=Fl,xf=ng=og,Lp=Pm,Kd=Jp,dh.f=function(t){return xc(Ho(t))}),pr(pr.G+pr.W+pr.F*!Au,{Symbol:Fa});for(var qp="hasInstance isConcatSpreadable iterator match replace search species split toPrimitive toStringTag unscopables".split(" "),sg=0;qp.length>sg;)Ho(qp[sg++]);for(var Ef=uh(Ho.store),If=0;Ef.length>If;)la(Ef[If++]);pr(pr.S+pr.F*!Au,"Symbol",{for:function(t){return zi(Mf,t+="")?Mf[t]:Mf[t]=Fa(t)},keyFor:function(t){if(!Bf(t))throw TypeError(t+" is not a symbol!");for(var r in Mf)if(Mf[r]===t)return r},useSetter:function(){uu=!0},useSimple:function(){uu=!1}}),pr(pr.S+pr.F*!Au,"Object",{create:function(t,r){return r===void 0?wl(t):Yp(wl(t),r)},defineProperty:Fl,defineProperties:Yp,getOwnPropertyDescriptor:Zp,getOwnPropertyNames:og,getOwnPropertySymbols:Jp}),Kp&&pr(pr.S+pr.F*(!Au||Ds(function(){var t=Fa();return su([t])!="[null]"||su({a:t})!="{}"||su(Object(t))!="{}"})),"JSON",{stringify:function(t){for(var r=[t],n=1,s;arguments.length>n;)r.push(arguments[n++]);if(s=n=r[1],(ro(n)||t!==void 0)&&!Bf(t))return La(n)||(n=function(c,h){if(typeof s=="function"&&(h=s.call(this,c,h)),!Bf(h))return h}),r[1]=n,su.apply(Kp,r)}}),Fa.prototype[ig]||nu(Fa.prototype,ig,Fa.prototype.valueOf),Ml(Fa,"Symbol"),Ml(Math,"Math",!0),Ml(_n.JSON,"JSON",!0),la("asyncIterator"),la("observable");var Um=Jn.Symbol,Tf=Ot(function(t){t.exports={default:Um,__esModule:!0}});Gt(Tf);var Rl=Ot(function(t,r){r.__esModule=!0,t=Ll&&Ll.__esModule?Ll:{default:Ll};var n=Tf&&Tf.__esModule?Tf:{default:Tf},s=typeof n.default=="function"&&typeof t.default=="symbol"?function(c){return typeof c}:function(c){return c&&typeof n.default=="function"&&c.constructor===n.default&&c!==n.default.prototype?"symbol":typeof c};r.default=typeof n.default=="function"&&s(t.default)==="symbol"?function(c){return typeof c=="undefined"?"undefined":s(c)}:function(c){return c&&typeof n.default=="function"&&c.constructor===n.default&&c!==n.default.prototype?"symbol":typeof c=="undefined"?"undefined":s(c)}}),QA=Gt(Rl),Ra=function(t,r){if(!ro(t)||t._t!==r)throw TypeError("Incompatible receiver, "+r+" required!");return t},Dm=qs.f,H=Hs.fastKey,P=Sa?"_s":"size",b=function(t,r){var n=H(r);if(n!=="F")return t._i[n];for(t=t._f;t;t=t.n)if(t.k==r)return t},Q={getConstructor:function(t,r,n,s){var c=t(function(h,d){ls(h,c,r,"_i"),h._t=r,h._i=wl(null),h._f=void 0,h._l=void 0,h[P]=0,d!=null&&Si(d,n,h[s],h)});return bp(c.prototype,{clear:function(){for(var h=Ra(this,r),d=h._i,f=h._f;f;f=f.n)f.r=!0,f.p&&(f.p=f.p.n=void 0),delete d[f.i];h._f=h._l=void 0,h[P]=0},delete:function(h){var d=Ra(this,r);if(h=b(d,h)){var f=h.n,x=h.p;delete d._i[h.i],h.r=!0,x&&(x.n=f),f&&(f.p=x),d._f==h&&(d._f=f),d._l==h&&(d._l=x),d[P]--}return!!h},forEach:function(h){Ra(this,r);for(var d=xs(h,1<arguments.length?arguments[1]:void 0,3),f;f=f?f.n:this._f;)for(d(f.v,f.k,this);f&&f.r;)f=f.p},has:function(h){return!!b(Ra(this,r),h)}}),Sa&&Dm(c.prototype,"size",{get:function(){return Ra(this,r)[P]}}),c},def:function(t,r,n){var s=b(t,r),c;return s?s.v=n:(t._l=s={i:c=H(r,!0),k:r,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=s),r&&(r.n=s),t[P]++,c!=="F"&&(t._i[c]=s)),t},getEntry:b,setStrong:function(t,r,n){cf(t,r,function(s,c){this._t=Ra(s,r),this._k=c,this._l=void 0},function(){for(var s=this._k,c=this._l;c&&c.r;)c=c.p;return this._t&&(this._l=c=c?c.n:this._t._f)?s=="keys"?hA(0,c.k):s=="values"?hA(0,c.v):hA(0,[c.k,c.v]):(this._t=void 0,hA(1))},n?"entries":"values",!n,!0),Mm(r)}},q=Ho("species"),nt=function(t,r){if(La(t)){var n=t.constructor;typeof n!="function"||n!==Array&&!La(n.prototype)||(n=void 0),ro(n)&&(n=n[q],n===null&&(n=void 0))}return new(n===void 0?Array:n)(r)},ft=function(t,r){var n=t==1,s=t==2,c=t==3,h=t==4,d=t==6,f=t==5||d,x=r||nt;return function(E,N,C){var I=Object(oo(E)),S=lA(I);N=xs(N,C,3),C=Du(S.length);var F=0;E=n?x(E,C):s?x(E,0):void 0;for(var D,K;C>F;F++)if((f||F in S)&&(D=S[F],K=N(D,F,I),t)){if(n)E[F]=K;else if(K)switch(t){case 3:return!0;case 5:return D;case 6:return F;case 2:E.push(D)}else if(h)return!1}return d?-1:c||h?h:E}},St=qs.f,Tt=ft(0),Wt=function(t,r,n,s,c,h){var d=_n[t],f=d,x=c?"set":"add",E=f&&f.prototype,N={};return Sa&&typeof f=="function"&&(h||E.forEach&&!Ds(function(){new f().entries().next()}))?(f=r(function(C,I){ls(C,f,t,"_c"),C._c=new d,I!=null&&Si(I,c,C[x],C)}),Tt("add clear delete forEach get has set keys values entries toJSON".split(" "),function(C){var I=C=="add"||C=="set";C in E&&(!h||C!="clear")&&nu(f.prototype,C,function(S,F){return ls(this,f,C),!I&&h&&!ro(S)?C=="get"?void 0:!1:(S=this._c[C](S===0?0:S,F),I?this:S)})}),h||St(f.prototype,"size",{get:function(){return this._c.size}})):(f=s.getConstructor(r,t,c,x),bp(f.prototype,n),Hs.NEED=!0),Ml(f,t),N[t]=f,pr(pr.G+pr.W+pr.F,N),h||s.setStrong(f,t,c),f};Wt("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){return(t=Q.getEntry(Ra(this,"Map"),t))&&t.v},set:function(t,r){return Q.def(Ra(this,"Map"),t===0?0:t,r)}},Q,!0),pr(pr.P+pr.R,"Map",{toJSON:function(t){return function(){if(lh(this)!=t)throw TypeError(t+"#toJSON isn't generic");var r=[];return Si(this,!1,r.push,r,void 0),r}}("Map")});var $t=function(t){pr(pr.S,t,{of:function(){for(var r=arguments.length,n=Array(r);r--;)n[r]=arguments[r];return new this(n)}})};$t("Map");var me=function(t){pr(pr.S,t,{from:function(r,n,s){var c;if(Ah(this),(c=n!==void 0)&&Ah(n),r==null)return new this;var h=[];if(c){var d=0,f=xs(n,s,2);Si(r,!1,function(x){h.push(f(x,d++))})}else Si(r,!1,h.push,h);return new this(h)}})};me("Map");var we=Jn.Map,Lr=Ot(function(t){t.exports={default:we,__esModule:!0}}),Ye=Gt(Lr);pr(pr.S+pr.F*!Sa,"Object",{defineProperty:qs.f});var lr=Jn.Object,mn=function(t,r,n){return lr.defineProperty(t,r,n)},Ar=Ot(function(t){t.exports={default:mn,__esModule:!0}}),qe=Gt(Ar),gi=Ot(function(t,r){r.__esModule=!0;var n=Ar&&Ar.__esModule?Ar:{default:Ar};r.default=function(s,c,h){return c in s?(0,n.default)(s,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):s[c]=h,s}}),Fr=Gt(gi),Fi=Hs.getWeak,vr=ft(5),qn=ft(6),Gi=0,Dn=function(t){return t._l||(t._l=new cs)},cs=function(){this.a=[]},$o=function(t,r){return vr(t.a,function(n){return n[0]===r})};cs.prototype={get:function(t){if(t=$o(this,t))return t[1]},has:function(t){return!!$o(this,t)},set:function(t,r){var n=$o(this,t);n?n[1]=r:this.a.push([t,r])},delete:function(t){var r=qn(this.a,function(n){return n[0]===t});return~r&&this.a.splice(r,1),!!~r}};var ws={getConstructor:function(t,r,n,s){var c=t(function(h,d){ls(h,c,r,"_i"),h._t=r,h._i=Gi++,h._l=void 0,d!=null&&Si(d,n,h[s],h)});return bp(c.prototype,{delete:function(h){if(!ro(h))return!1;var d=Fi(h);return d===!0?Dn(Ra(this,r)).delete(h):d&&zi(d,this._i)&&delete d[this._i]},has:function(h){if(!ro(h))return!1;var d=Fi(h);return d===!0?Dn(Ra(this,r)).has(h):d&&zi(d,this._i)}}),c},def:function(t,r,n){var s=Fi(Us(r),!0);return s===!0?Dn(t).set(r,n):s[t._i]=n,t},ufstore:Dn};Ot(function(t){var r=ft(0),n=!_n.ActiveXObject&&"ActiveXObject"in _n,s=Hs.getWeak,c=Object.isExtensible,h=ws.ufstore,d=function(N){return function(){return N(this,0<arguments.length?arguments[0]:void 0)}},f={get:function(N){if(ro(N)){var C=s(N);return C===!0?h(Ra(this,"WeakMap")).get(N):C?C[this._i]:void 0}},set:function(N,C){return ws.def(Ra(this,"WeakMap"),N,C)}},x=t.exports=Wt("WeakMap",d,f,ws,!0,!0);if(Ra&&n){var E=ws.getConstructor(d,"WeakMap");Ac(E.prototype,f),Hs.NEED=!0,r(["delete","has","get","set"],function(N){var C=x.prototype,I=C[N];nu(C,N,function(S,F){return ro(S)&&!c(S)?(this._f||(this._f=new E),S=this._f[N](S,F),N=="set"?this:S):I.call(this,S,F)})})}}),$t("WeakMap"),me("WeakMap");var Cs=Jn.WeakMap,lu=Ot(function(t){t.exports={default:Cs,__esModule:!0}}),mi=Gt(lu);fA("getPrototypeOf",function(){return function(t){return Rp(Object(oo(t)))}});var Pl=Jn.Object.getPrototypeOf,Ul=Ot(function(t){t.exports={default:Pl,__esModule:!0}}),fo=Gt(Ul),zs=Ot(function(t,r){r.__esModule=!0,r.default=function(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}}),$n=Gt(zs),pA=Ot(function(t,r){r.__esModule=!0;var n=Rl&&Rl.__esModule?Rl:{default:Rl};r.default=function(s,c){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||(typeof c=="undefined"?"undefined":(0,n.default)(c))!=="object"&&typeof c!="function"?s:c}}),Ji=Gt(pA),Ya=Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{n=xs(Function.call,yc.f(Object.prototype,"__proto__").set,2),n(t,[]),r=!(t instanceof Array)}catch(s){r=!0}return function(s,c){if(Us(s),!ro(c)&&c!==null)throw TypeError(c+": can't set as prototype!");return r?s.__proto__=c:n(s,c),s}}({},!1):void 0);pr(pr.S,"Object",{setPrototypeOf:Ya});var mh=Jn.Object.setPrototypeOf,hu=Ot(function(t){t.exports={default:mh,__esModule:!0}});Gt(hu);var dA=Ot(function(t,r){function n(d){return d&&d.__esModule?d:{default:d}}r.__esModule=!0;var s=n(hu),c=n(Sp),h=n(Rl);r.default=function(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof f=="undefined"?"undefined":(0,h.default)(f)));d.prototype=(0,c.default)(f&&f.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),f&&(s.default?(0,s.default)(d,f):d.__proto__=f)}}),So=Gt(dA);fA("keys",function(){return function(t){return uh(Object(oo(t)))}});var xx=Jn.Object.keys,wx=Ot(function(t){t.exports={default:xx,__esModule:!0}}),Xi=Gt(wx),y1=Jn.JSON||(Jn.JSON={stringify:JSON.stringify}),n0=function(t){return y1.stringify.apply(y1,arguments)},Cx=Ot(function(t){t.exports={default:n0,__esModule:!0}}),Za=Gt(Cx);pr(pr.S+pr.F*!Sa,"Object",{defineProperties:Tp});var Mx=Jn.Object,_x=function(t,r){return Mx.defineProperties(t,r)},Bx=Ot(function(t){t.exports={default:_x,__esModule:!0}}),vn=Gt(Bx);pr(pr.S,"Math",{sign:Math.sign||function(t){return(t=+t)==0||t!=t?t:0>t?-1:1}});var Ex=Jn.Math.sign,Ix=Ot(function(t){t.exports={default:Ex,__esModule:!0}}),wc=Gt(Ix),Tx=Math.floor;pr(pr.S,"Number",{isInteger:function(t){return!ro(t)&&isFinite(t)&&Tx(t)===t}});var x1=Jn.Number.isInteger,Sx=Ot(function(t){t.exports={default:x1,__esModule:!0}}),$p=Gt(Sx);pr(pr.S,"Number",{EPSILON:Math.pow(2,-52)});var Lx=Math.pow(2,-52),w1=Ot(function(t){t.exports={default:Lx,__esModule:!0}}),No=Gt(w1);No===void 0&&(Number.EPSILON=Math.pow(2,-52)),$p===void 0&&(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}),wc===void 0&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),!("name"in Function.prototype)&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),dt===void 0&&(Object.assign=function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1;n<arguments.length;n++){var s=arguments[n];if(s!=null)for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(r[c]=s[c])}return r}),dt(ve.prototype,{addEventListener:function(t,r){this._listeners===void 0&&(this._listeners={});var n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(r)===-1&&n[t].push(r)},hasEventListener:function(t,r){if(this._listeners===void 0)return!1;var n=this._listeners;return n[t]!==void 0&&n[t].indexOf(r)!==-1},removeEventListener:function(t,r){this._listeners!==void 0&&(t=this._listeners[t],t!==void 0&&(r=t.indexOf(r),r!==-1&&t.splice(r,1)))},dispatchEvent:function(t){if(this._listeners!==void 0){var r=this._listeners[t.type];if(r!==void 0){t.target=this,r=r.slice(0);for(var n=0,s=r.length;n<s;n++)r[n].call(this,t)}}}});for(var ha=[],ag=0;256>ag;ag++)ha[ag]=(16>ag?"0":"")+ag.toString(16);var Jr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(ha[t&255]+ha[t>>8&255]+ha[t>>16&255]+ha[t>>24&255]+"-"+ha[r&255]+ha[r>>8&255]+"-"+ha[r>>16&15|64]+ha[r>>24&255]+"-"+ha[n&63|128]+ha[n>>8&255]+"-"+ha[n>>16&255]+ha[n>>24&255]+ha[s&255]+ha[s>>8&255]+ha[s>>16&255]+ha[s>>24&255]).toUpperCase()},clamp:function(t,r,n){return Math.max(r,Math.min(n,t))},euclideanModulo:function(t,r){return(t%r+r)%r},mapLinear:function(t,r,n,s,c){return s+(t-r)*(c-s)/(n-r)},lerp:function(t,r,n){return(1-n)*t+n*r},smoothstep:function(t,r,n){return t<=r?0:t>=n?1:(t=(t-r)/(n-r),t*t*(3-2*t))},smootherstep:function(t,r,n){return t<=r?0:t>=n?1:(t=(t-r)/(n-r),t*t*t*(t*(6*t-15)+10))},randInt:function(t,r){return t+Math.floor(Math.random()*(r-t+1))},randFloat:function(t,r){return t+Math.random()*(r-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Jr.DEG2RAD},radToDeg:function(t){return t*Jr.RAD2DEG},isPowerOfTwo:function(t){return(t&t-1)==0&&t!==0},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,r,n,s,c){var h=Math.cos,d=Math.sin,f=h(n/2);n=d(n/2);var x=h((r+s)/2),E=d((r+s)/2),N=h((r-s)/2),C=d((r-s)/2);switch(h=h((s-r)/2),r=d((s-r)/2),c){case"XYX":t.set(f*E,n*N,n*C,f*x);break;case"YZY":t.set(n*C,f*E,n*N,f*x);break;case"ZXZ":t.set(n*N,n*C,f*E,f*x);break;case"XZX":t.set(f*E,n*r,n*h,f*x);break;case"YXY":t.set(n*h,f*E,n*r,f*x);break;case"ZYZ":t.set(n*r,n*h,f*E,f*x);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+c)}}};vn(ct.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),dt(ct.prototype,{isVector2:!0,set:function(t,r){return this.x=t,this.y=r,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,r){return r!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,r)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this},addScaledVector:function(t,r){return this.x+=t.x*r,this.y+=t.y*r,this},sub:function(t,r){return r!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var r=this.x,n=this.y;return t=t.elements,this.x=t[0]*r+t[3]*n+t[6],this.y=t[1]*r+t[4]*n+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this},clampScalar:function(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this},clampLength:function(t,r){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var r=this.x-t.x;return t=this.y-t.y,r*r+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this},lerpVectors:function(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,r){return r===void 0&&(r=0),this.x=t[r],this.y=t[r+1],this},toArray:function(t,r){return t===void 0&&(t=[]),r===void 0&&(r=0),t[r]=this.x,t[r+1]=this.y,t},fromBufferAttribute:function(t,r,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(r),this.y=t.getY(r),this},rotateAround:function(t,r){var n=Math.cos(r);r=Math.sin(r);var s=this.x-t.x,c=this.y-t.y;return this.x=s*n-c*r+t.x,this.y=s*r+c*n+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),dt(kt.prototype,{isMatrix3:!0,set:function(t,r,n,s,c,h,d,f,x){var E=this.elements;return E[0]=t,E[1]=s,E[2]=d,E[3]=r,E[4]=c,E[5]=f,E[6]=n,E[7]=h,E[8]=x,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(t){var r=this.elements;return t=t.elements,r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],this},extractBasis:function(t,r,n){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,r){var n=t.elements,s=r.elements;r=this.elements,t=n[0];var c=n[3],h=n[6],d=n[1],f=n[4],x=n[7],E=n[2],N=n[5];n=n[8];var C=s[0],I=s[3],S=s[6],F=s[1],D=s[4],K=s[7],Z=s[2],$=s[5];return s=s[8],r[0]=t*C+c*F+h*Z,r[3]=t*I+c*D+h*$,r[6]=t*S+c*K+h*s,r[1]=d*C+f*F+x*Z,r[4]=d*I+f*D+x*$,r[7]=d*S+f*K+x*s,r[2]=E*C+N*F+n*Z,r[5]=E*I+N*D+n*$,r[8]=E*S+N*K+n*s,this},multiplyScalar:function(t){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this},determinant:function(){var t=this.elements,r=t[0],n=t[1],s=t[2],c=t[3],h=t[4],d=t[5],f=t[6],x=t[7];return t=t[8],r*h*t-r*d*x-n*c*t+n*d*f+s*c*x-s*h*f},getInverse:function(t,r){r!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=t.elements;t=this.elements,r=n[0];var s=n[1],c=n[2],h=n[3],d=n[4],f=n[5],x=n[6],E=n[7];n=n[8];var N=n*d-f*E,C=f*x-n*h,I=E*h-d*x,S=r*N+s*C+c*I;return S===0?this.set(0,0,0,0,0,0,0,0,0):(S=1/S,t[0]=N*S,t[1]=(c*E-n*s)*S,t[2]=(f*s-c*d)*S,t[3]=C*S,t[4]=(n*r-c*x)*S,t[5]=(c*h-f*r)*S,t[6]=I*S,t[7]=(s*x-E*r)*S,t[8]=(d*r-s*h)*S,this)},transpose:function(){var t=this.elements,r=t[1];return t[1]=t[3],t[3]=r,r=t[2],t[2]=t[6],t[6]=r,r=t[5],t[5]=t[7],t[7]=r,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this},setUvTransform:function(t,r,n,s,c,h,d){var f=Math.cos(c);c=Math.sin(c),this.set(n*f,n*c,-n*(f*h+c*d)+h+t,-s*c,s*f,-s*(-c*h+f*d)+d+r,0,0,1)},scale:function(t,r){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=r,n[4]*=r,n[7]*=r,this},rotate:function(t){var r=Math.cos(t);t=Math.sin(t);var n=this.elements,s=n[0],c=n[3],h=n[6],d=n[1],f=n[4],x=n[7];return n[0]=r*s+t*d,n[3]=r*c+t*f,n[6]=r*h+t*x,n[1]=-t*s+r*d,n[4]=-t*c+r*f,n[7]=-t*h+r*x,this},translate:function(t,r){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=r*n[2],n[4]+=r*n[5],n[7]+=r*n[8],this},equals:function(t){var r=this.elements;t=t.elements;for(var n=0;9>n;n++)if(r[n]!==t[n])return!1;return!0},fromArray:function(t,r){r===void 0&&(r=0);for(var n=0;9>n;n++)this.elements[n]=t[n+r];return this},toArray:function(t,r){t===void 0&&(t=[]),r===void 0&&(r=0);var n=this.elements;return t[r]=n[0],t[r+1]=n[1],t[r+2]=n[2],t[r+3]=n[3],t[r+4]=n[4],t[r+5]=n[5],t[r+6]=n[6],t[r+7]=n[7],t[r+8]=n[8],t}});var Sf,ca={getDataURL:function(t){if(typeof HTMLCanvasElement=="undefined")return t.src;if(!(t instanceof HTMLCanvasElement)){Sf===void 0&&(Sf=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Sf.width=t.width,Sf.height=t.height;var r=Sf.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),t=Sf}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Fx=0;bt.DEFAULT_IMAGE=void 0,bt.DEFAULT_MAPPING=300,bt.prototype=dt(pt(ve.prototype),{constructor:bt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var r=t===void 0||typeof t=="string";if(!r&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var s=this.image;if(s.uuid===void 0&&(s.uuid=Jr.generateUUID()),!r&&t.images[s.uuid]===void 0){if(Array.isArray(s))for(var c=[],h=0,d=s.length;h<d;h++)c.push(ca.getDataURL(s[h]));else c=ca.getDataURL(s);t.images[s.uuid]={uuid:s.uuid,url:c}}n.image=s.uuid}return r||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==300)return t;if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=Math.abs(Math.floor(t.x)%2)===1?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=Math.abs(Math.floor(t.y)%2)===1?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(bt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),vn(Ht.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),dt(Ht.prototype,{isVector4:!0,set:function(t,r,n,s){return this.x=t,this.y=r,this.z=n,this.w=s,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this},add:function(t,r){return r!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,r)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this},addScaledVector:function(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this},sub:function(t,r){return r!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var r=this.x,n=this.y,s=this.z,c=this.w;return t=t.elements,this.x=t[0]*r+t[4]*n+t[8]*s+t[12]*c,this.y=t[1]*r+t[5]*n+t[9]*s+t[13]*c,this.z=t[2]*r+t[6]*n+t[10]*s+t[14]*c,this.w=t[3]*r+t[7]*n+t[11]*s+t[15]*c,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var r=Math.sqrt(1-t.w*t.w);return 1e-4>r?(this.x=1,this.z=this.y=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this},setAxisAngleFromRotationMatrix:function(t){t=t.elements;var r=t[0],n=t[4],s=t[8],c=t[1],h=t[5],d=t[9],f=t[2],x=t[6],E=t[10];return .01>Math.abs(n-c)&&.01>Math.abs(s-f)&&.01>Math.abs(d-x)?.1>Math.abs(n+c)&&.1>Math.abs(s+f)&&.1>Math.abs(d+x)&&.1>Math.abs(r+h+E-3)?(this.set(1,0,0,0),this):(t=Math.PI,r=(r+1)/2,h=(h+1)/2,E=(E+1)/2,n=(n+c)/4,s=(s+f)/4,d=(d+x)/4,r>h&&r>E?.01>r?(x=0,n=f=.707106781):(x=Math.sqrt(r),f=n/x,n=s/x):h>E?.01>h?(x=.707106781,f=0,n=.707106781):(f=Math.sqrt(h),x=n/f,n=d/f):.01>E?(f=x=.707106781,n=0):(n=Math.sqrt(E),x=s/n,f=d/n),this.set(x,f,n,t),this):(t=Math.sqrt((x-d)*(x-d)+(s-f)*(s-f)+(c-n)*(c-n)),.001>Math.abs(t)&&(t=1),this.x=(x-d)/t,this.y=(s-f)/t,this.z=(c-n)/t,this.w=Math.acos((r+h+E-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this.w=Math.max(t.w,Math.min(r.w,this.w)),this},clampScalar:function(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this.w=Math.max(t,Math.min(r,this.w)),this},clampLength:function(t,r){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this},lerpVectors:function(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this.z=t.z+(r.z-t.z)*n,this.w=t.w+(r.w-t.w)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,r){return r===void 0&&(r=0),this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this},toArray:function(t,r){return t===void 0&&(t=[]),r===void 0&&(r=0),t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t},fromBufferAttribute:function(t,r,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),Zt.prototype=dt(pt(ve.prototype),{constructor:Zt,isWebGLRenderTarget:!0,setSize:function(t,r){(this.width!==t||this.height!==r)&&(this.width=t,this.height=r,this.texture.image.width=t,this.texture.image.height=r,this.dispose()),this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),he.prototype=dt(pt(Zt.prototype),{constructor:he,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Zt.prototype.copy.call(this,t),this.samples=t.samples,this}}),dt(Ee,{slerp:function(t,r,n,s){return n.copy(t).slerp(r,s)},slerpFlat:function(t,r,n,s,c,h,d){var f=n[s+0],x=n[s+1],E=n[s+2];n=n[s+3],s=c[h+0];var N=c[h+1],C=c[h+2];if(c=c[h+3],n!==c||f!==s||x!==N||E!==C){h=1-d;var I=f*s+x*N+E*C+n*c,S=0<=I?1:-1,F=1-I*I;F>No&&(F=Math.sqrt(F),I=Math.atan2(F,I*S),h=Math.sin(h*I)/F,d=Math.sin(d*I)/F),S*=d,f=f*h+s*S,x=x*h+N*S,E=E*h+C*S,n=n*h+c*S,h===1-d&&(d=1/Math.sqrt(f*f+x*x+E*E+n*n),f*=d,x*=d,E*=d,n*=d)}t[r]=f,t[r+1]=x,t[r+2]=E,t[r+3]=n},multiplyQuaternionsFlat:function(t,r,n,s,c,h){var d=n[s],f=n[s+1],x=n[s+2];n=n[s+3],s=c[h];var E=c[h+1],N=c[h+2];return c=c[h+3],t[r]=d*c+n*s+f*N-x*E,t[r+1]=f*c+n*E+x*s-d*N,t[r+2]=x*c+n*N+d*E-f*s,t[r+3]=n*c-d*s-f*E-x*N,t}}),vn(Ee.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),dt(Ee.prototype,{isQuaternion:!0,set:function(t,r,n,s){return this._x=t,this._y=r,this._z=n,this._w=s,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,r){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,s=t._y,c=t._z;t=t.order;var h=Math.cos,d=Math.sin,f=h(n/2),x=h(s/2);switch(h=h(c/2),n=d(n/2),s=d(s/2),c=d(c/2),t){case"XYZ":this._x=n*x*h+f*s*c,this._y=f*s*h-n*x*c,this._z=f*x*c+n*s*h,this._w=f*x*h-n*s*c;break;case"YXZ":this._x=n*x*h+f*s*c,this._y=f*s*h-n*x*c,this._z=f*x*c-n*s*h,this._w=f*x*h+n*s*c;break;case"ZXY":this._x=n*x*h-f*s*c,this._y=f*s*h+n*x*c,this._z=f*x*c+n*s*h,this._w=f*x*h-n*s*c;break;case"ZYX":this._x=n*x*h-f*s*c,this._y=f*s*h+n*x*c,this._z=f*x*c-n*s*h,this._w=f*x*h+n*s*c;break;case"YZX":this._x=n*x*h+f*s*c,this._y=f*s*h+n*x*c,this._z=f*x*c-n*s*h,this._w=f*x*h-n*s*c;break;case"XZY":this._x=n*x*h-f*s*c,this._y=f*s*h-n*x*c,this._z=f*x*c+n*s*h,this._w=f*x*h+n*s*c;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+t)}return r!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(t,r){r/=2;var n=Math.sin(r);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(r),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var r=t.elements,n=r[0];t=r[4];var s=r[8],c=r[1],h=r[5],d=r[9],f=r[2],x=r[6];r=r[10];var E=n+h+r;return 0<E?(n=.5/Math.sqrt(E+1),this._w=.25/n,this._x=(x-d)*n,this._y=(s-f)*n,this._z=(c-t)*n):n>h&&n>r?(n=2*Math.sqrt(1+n-h-r),this._w=(x-d)/n,this._x=.25*n,this._y=(t+c)/n,this._z=(s+f)/n):h>r?(n=2*Math.sqrt(1+h-n-r),this._w=(s-f)/n,this._x=(t+c)/n,this._y=.25*n,this._z=(d+x)/n):(n=2*Math.sqrt(1+r-n-h),this._w=(c-t)/n,this._x=(s+f)/n,this._y=(d+x)/n,this._z=.25*n),this._onChangeCallback(),this},setFromUnitVectors:function(t,r){var n=t.dot(r)+1;return 1e-6>n?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x),this._w=n,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Jr.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,r){var n=this.angleTo(t);return n===0?this:(this.slerp(t,Math.min(1,r/n)),this)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return t===0?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this._onChangeCallback(),this},multiply:function(t,r){return r!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,r)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,r){var n=t._x,s=t._y,c=t._z;t=t._w;var h=r._x,d=r._y,f=r._z;return r=r._w,this._x=n*r+t*h+s*f-c*d,this._y=s*r+t*d+c*h-n*f,this._z=c*r+t*f+n*d-s*h,this._w=t*r-n*h-s*d-c*f,this._onChangeCallback(),this},slerp:function(t,r){if(r===0)return this;if(r===1)return this.copy(t);var n=this._x,s=this._y,c=this._z,h=this._w,d=h*t._w+n*t._x+s*t._y+c*t._z;if(0>d?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,d=-d):this.copy(t),1<=d)return this._w=h,this._x=n,this._y=s,this._z=c,this;if(t=1-d*d,t<=No)return d=1-r,this._w=d*h+r*this._w,this._x=d*n+r*this._x,this._y=d*s+r*this._y,this._z=d*c+r*this._z,this.normalize(),this._onChangeCallback(),this;t=Math.sqrt(t);var f=Math.atan2(t,d);return d=Math.sin((1-r)*f)/t,r=Math.sin(r*f)/t,this._w=h*d+this._w*r,this._x=n*d+this._x*r,this._y=s*d+this._y*r,this._z=c*d+this._z*r,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,r){return r===void 0&&(r=0),this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this},toArray:function(t,r){return t===void 0&&(t=[]),r===void 0&&(r=0),t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t},fromBufferAttribute:function(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var bu=new gt,i0=new Ee;dt(gt.prototype,{isVector3:!0,set:function(t,r,n){return this.x=t,this.y=r,this.z=n,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,r){return r!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,r)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this},addScaledVector:function(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this},sub:function(t,r){return r!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this},multiply:function(t,r){return r!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,r)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(i0.setFromEuler(t))},applyAxisAngle:function(t,r){return this.applyQuaternion(i0.setFromAxisAngle(t,r))},applyMatrix3:function(t){var r=this.x,n=this.y,s=this.z;return t=t.elements,this.x=t[0]*r+t[3]*n+t[6]*s,this.y=t[1]*r+t[4]*n+t[7]*s,this.z=t[2]*r+t[5]*n+t[8]*s,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var r=this.x,n=this.y,s=this.z;t=t.elements;var c=1/(t[3]*r+t[7]*n+t[11]*s+t[15]);return this.x=(t[0]*r+t[4]*n+t[8]*s+t[12])*c,this.y=(t[1]*r+t[5]*n+t[9]*s+t[13])*c,this.z=(t[2]*r+t[6]*n+t[10]*s+t[14])*c,this},applyQuaternion:function(t){var r=this.x,n=this.y,s=this.z,c=t.x,h=t.y,d=t.z;t=t.w;var f=t*r+h*s-d*n,x=t*n+d*r-c*s,E=t*s+c*n-h*r;return r=-c*r-h*n-d*s,this.x=f*t+r*-c+x*-d-E*-h,this.y=x*t+r*-h+E*-c-f*-d,this.z=E*t+r*-d+f*-h-x*-c,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var r=this.x,n=this.y,s=this.z;return t=t.elements,this.x=t[0]*r+t[4]*n+t[8]*s,this.y=t[1]*r+t[5]*n+t[9]*s,this.z=t[2]*r+t[6]*n+t[10]*s,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this},clampScalar:function(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this},clampLength:function(t,r){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this},lerpVectors:function(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this.z=t.z+(r.z-t.z)*n,this},cross:function(t,r){return r!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,r)):this.crossVectors(this,t)},crossVectors:function(t,r){var n=t.x,s=t.y;t=t.z;var c=r.x,h=r.y;return r=r.z,this.x=s*r-t*h,this.y=t*c-n*r,this.z=n*h-s*c,this},projectOnVector:function(t){var r=t.lengthSq();return r===0?this.set(0,0,0):(r=t.dot(this)/r,this.copy(t).multiplyScalar(r))},projectOnPlane:function(t){return bu.copy(this).projectOnVector(t),this.sub(bu)},reflect:function(t){return this.sub(bu.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var r=Math.sqrt(this.lengthSq()*t.lengthSq());return r===0?Math.PI/2:(t=this.dot(t)/r,Math.acos(Jr.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var r=this.x-t.x,n=this.y-t.y;return t=this.z-t.z,r*r+n*n+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,r,n){var s=Math.sin(r)*t;return this.x=s*Math.sin(n),this.y=Math.cos(r)*t,this.z=s*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,r,n){return this.x=t*Math.sin(r),this.y=n,this.z=t*Math.cos(r),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var r=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=r,this.y=n,this.z=t,this},setFromMatrixColumn:function(t,r){return this.fromArray(t.elements,4*r)},setFromMatrix3Column:function(t,r){return this.fromArray(t.elements,3*r)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,r){return r===void 0&&(r=0),this.x=t[r],this.y=t[r+1],this.z=t[r+2],this},toArray:function(t,r){return t===void 0&&(t=[]),r===void 0&&(r=0),t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t},fromBufferAttribute:function(t,r,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Cc=new gt,ku=new Qe,td=new gt(0,0,0),C1=new gt(1,1,1),Mc=new gt,Om=new gt,gA=new gt;dt(Qe.prototype,{isMatrix4:!0,set:function(t,r,n,s,c,h,d,f,x,E,N,C,I,S,F,D){var K=this.elements;return K[0]=t,K[4]=r,K[8]=n,K[12]=s,K[1]=c,K[5]=h,K[9]=d,K[13]=f,K[2]=x,K[6]=E,K[10]=N,K[14]=C,K[3]=I,K[7]=S,K[11]=F,K[15]=D,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Qe().fromArray(this.elements)},copy:function(t){var r=this.elements;return t=t.elements,r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],this},copyPosition:function(t){var r=this.elements;return t=t.elements,r[12]=t[12],r[13]=t[13],r[14]=t[14],this},extractBasis:function(t,r,n){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,r,n){return this.set(t.x,r.x,n.x,0,t.y,r.y,n.y,0,t.z,r.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var r=this.elements,n=t.elements,s=1/Cc.setFromMatrixColumn(t,0).length(),c=1/Cc.setFromMatrixColumn(t,1).length();return t=1/Cc.setFromMatrixColumn(t,2).length(),r[0]=n[0]*s,r[1]=n[1]*s,r[2]=n[2]*s,r[3]=0,r[4]=n[4]*c,r[5]=n[5]*c,r[6]=n[6]*c,r[7]=0,r[8]=n[8]*t,r[9]=n[9]*t,r[10]=n[10]*t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=this.elements,n=t.x,s=t.y,c=t.z,h=Math.cos(n);n=Math.sin(n);var d=Math.cos(s);s=Math.sin(s);var f=Math.cos(c);if(c=Math.sin(c),t.order==="XYZ"){t=h*f;var x=h*c,E=n*f,N=n*c;r[0]=d*f,r[4]=-d*c,r[8]=s,r[1]=x+E*s,r[5]=t-N*s,r[9]=-n*d,r[2]=N-t*s,r[6]=E+x*s,r[10]=h*d}else t.order==="YXZ"?(t=d*f,x=d*c,E=s*f,N=s*c,r[0]=t+N*n,r[4]=E*n-x,r[8]=h*s,r[1]=h*c,r[5]=h*f,r[9]=-n,r[2]=x*n-E,r[6]=N+t*n,r[10]=h*d):t.order==="ZXY"?(t=d*f,x=d*c,E=s*f,N=s*c,r[0]=t-N*n,r[4]=-h*c,r[8]=E+x*n,r[1]=x+E*n,r[5]=h*f,r[9]=N-t*n,r[2]=-h*s,r[6]=n,r[10]=h*d):t.order==="ZYX"?(t=h*f,x=h*c,E=n*f,N=n*c,r[0]=d*f,r[4]=E*s-x,r[8]=t*s+N,r[1]=d*c,r[5]=N*s+t,r[9]=x*s-E,r[2]=-s,r[6]=n*d,r[10]=h*d):t.order==="YZX"?(t=h*d,x=h*s,E=n*d,N=n*s,r[0]=d*f,r[4]=N-t*c,r[8]=E*c+x,r[1]=c,r[5]=h*f,r[9]=-n*f,r[2]=-s*f,r[6]=x*c+E,r[10]=t-N*c):t.order==="XZY"&&(t=h*d,x=h*s,E=n*d,N=n*s,r[0]=d*f,r[4]=-c,r[8]=s*f,r[1]=t*c+N,r[5]=h*f,r[9]=x*c-E,r[2]=E*c-x,r[6]=n*f,r[10]=N*c+t);return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(td,t,C1)},lookAt:function(t,r,n){var s=this.elements;return gA.subVectors(t,r),gA.lengthSq()===0&&(gA.z=1),gA.normalize(),Mc.crossVectors(n,gA),Mc.lengthSq()===0&&(Math.abs(n.z)===1?gA.x+=1e-4:gA.z+=1e-4,gA.normalize(),Mc.crossVectors(n,gA)),Mc.normalize(),Om.crossVectors(gA,Mc),s[0]=Mc.x,s[4]=Om.x,s[8]=gA.x,s[1]=Mc.y,s[5]=Om.y,s[9]=gA.y,s[2]=Mc.z,s[6]=Om.z,s[10]=gA.z,this},multiply:function(t,r){return r!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,r)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,r){var n=t.elements,s=r.elements;r=this.elements,t=n[0];var c=n[4],h=n[8],d=n[12],f=n[1],x=n[5],E=n[9],N=n[13],C=n[2],I=n[6],S=n[10],F=n[14],D=n[3],K=n[7],Z=n[11];n=n[15];var $=s[0],st=s[4],ht=s[8],Et=s[12],It=s[1],Bt=s[5],Xt=s[9],Yt=s[13],fe=s[2],te=s[6],le=s[10],tr=s[14],Me=s[3],xr=s[7],br=s[11];return s=s[15],r[0]=t*$+c*It+h*fe+d*Me,r[4]=t*st+c*Bt+h*te+d*xr,r[8]=t*ht+c*Xt+h*le+d*br,r[12]=t*Et+c*Yt+h*tr+d*s,r[1]=f*$+x*It+E*fe+N*Me,r[5]=f*st+x*Bt+E*te+N*xr,r[9]=f*ht+x*Xt+E*le+N*br,r[13]=f*Et+x*Yt+E*tr+N*s,r[2]=C*$+I*It+S*fe+F*Me,r[6]=C*st+I*Bt+S*te+F*xr,r[10]=C*ht+I*Xt+S*le+F*br,r[14]=C*Et+I*Yt+S*tr+F*s,r[3]=D*$+K*It+Z*fe+n*Me,r[7]=D*st+K*Bt+Z*te+n*xr,r[11]=D*ht+K*Xt+Z*le+n*br,r[15]=D*Et+K*Yt+Z*tr+n*s,this},multiplyScalar:function(t){var r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this},determinant:function(){var t=this.elements,r=t[0],n=t[4],s=t[8],c=t[12],h=t[1],d=t[5],f=t[9],x=t[13],E=t[2],N=t[6],C=t[10],I=t[14];return t[3]*(+c*f*N-s*x*N-c*d*C+n*x*C+s*d*I-n*f*I)+t[7]*(+r*f*I-r*x*C+c*h*C-s*h*I+s*x*E-c*f*E)+t[11]*(+r*x*N-r*d*I-c*h*N+n*h*I+c*d*E-n*x*E)+t[15]*(-s*d*E-r*f*N+r*d*C+s*h*N-n*h*C+n*f*E)},transpose:function(){var t=this.elements,r=t[1];return t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this},setPosition:function(t,r,n){var s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=r,s[14]=n),this},getInverse:function(t,r){r!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate."),r=this.elements;var n=t.elements;t=n[0];var s=n[1],c=n[2],h=n[3],d=n[4],f=n[5],x=n[6],E=n[7],N=n[8],C=n[9],I=n[10],S=n[11],F=n[12],D=n[13],K=n[14];n=n[15];var Z=C*K*E-D*I*E+D*x*S-f*K*S-C*x*n+f*I*n,$=F*I*E-N*K*E-F*x*S+d*K*S+N*x*n-d*I*n,st=N*D*E-F*C*E+F*f*S-d*D*S-N*f*n+d*C*n,ht=F*C*x-N*D*x-F*f*I+d*D*I+N*f*K-d*C*K,Et=t*Z+s*$+c*st+h*ht;return Et===0?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(Et=1/Et,r[0]=Z*Et,r[1]=(D*I*h-C*K*h-D*c*S+s*K*S+C*c*n-s*I*n)*Et,r[2]=(f*K*h-D*x*h+D*c*E-s*K*E-f*c*n+s*x*n)*Et,r[3]=(C*x*h-f*I*h-C*c*E+s*I*E+f*c*S-s*x*S)*Et,r[4]=$*Et,r[5]=(N*K*h-F*I*h+F*c*S-t*K*S-N*c*n+t*I*n)*Et,r[6]=(F*x*h-d*K*h-F*c*E+t*K*E+d*c*n-t*x*n)*Et,r[7]=(d*I*h-N*x*h+N*c*E-t*I*E-d*c*S+t*x*S)*Et,r[8]=st*Et,r[9]=(F*C*h-N*D*h-F*s*S+t*D*S+N*s*n-t*C*n)*Et,r[10]=(d*D*h-F*f*h+F*s*E-t*D*E-d*s*n+t*f*n)*Et,r[11]=(N*f*h-d*C*h-N*s*E+t*C*E+d*s*S-t*f*S)*Et,r[12]=ht*Et,r[13]=(N*D*c-F*C*c+F*s*I-t*D*I-N*s*K+t*C*K)*Et,r[14]=(F*f*c-d*D*c-F*s*x+t*D*x+d*s*K-t*f*K)*Et,r[15]=(d*C*c-N*f*c+N*s*x-t*C*x-d*s*I+t*f*I)*Et,this)},scale:function(t){var r=this.elements,n=t.x,s=t.y;return t=t.z,r[0]*=n,r[4]*=s,r[8]*=t,r[1]*=n,r[5]*=s,r[9]*=t,r[2]*=n,r[6]*=s,r[10]*=t,r[3]*=n,r[7]*=s,r[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,r,n){return this.set(1,0,0,t,0,1,0,r,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var r=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,r,-t,0,0,t,r,0,0,0,0,1),this},makeRotationY:function(t){var r=Math.cos(t);return t=Math.sin(t),this.set(r,0,t,0,0,1,0,0,-t,0,r,0,0,0,0,1),this},makeRotationZ:function(t){var r=Math.cos(t);return t=Math.sin(t),this.set(r,-t,0,0,t,r,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,r){var n=Math.cos(r);r=Math.sin(r);var s=1-n,c=t.x,h=t.y;t=t.z;var d=s*c,f=s*h;return this.set(d*c+n,d*h-r*t,d*t+r*h,0,d*h+r*t,f*h+n,f*t-r*c,0,d*t-r*h,f*t+r*c,s*t*t+n,0,0,0,0,1),this},makeScale:function(t,r,n){return this.set(t,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,r,n){return this.set(1,r,n,0,t,1,n,0,t,r,1,0,0,0,0,1),this},compose:function(t,r,n){var s=this.elements,c=r._x,h=r._y,d=r._z,f=r._w,x=c+c,E=h+h,N=d+d;r=c*x;var C=c*E;c*=N;var I=h*E;h*=N,d*=N,x*=f,E*=f,f*=N,N=n.x;var S=n.y;return n=n.z,s[0]=(1-(I+d))*N,s[1]=(C+f)*N,s[2]=(c-E)*N,s[3]=0,s[4]=(C-f)*S,s[5]=(1-(r+d))*S,s[6]=(h+x)*S,s[7]=0,s[8]=(c+E)*n,s[9]=(h-x)*n,s[10]=(1-(r+I))*n,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this},decompose:function(t,r,n){var s=this.elements,c=Cc.set(s[0],s[1],s[2]).length(),h=Cc.set(s[4],s[5],s[6]).length(),d=Cc.set(s[8],s[9],s[10]).length();0>this.determinant()&&(c=-c),t.x=s[12],t.y=s[13],t.z=s[14],ku.copy(this),t=1/c,s=1/h;var f=1/d;return ku.elements[0]*=t,ku.elements[1]*=t,ku.elements[2]*=t,ku.elements[4]*=s,ku.elements[5]*=s,ku.elements[6]*=s,ku.elements[8]*=f,ku.elements[9]*=f,ku.elements[10]*=f,r.setFromRotationMatrix(ku),n.x=c,n.y=h,n.z=d,this},makePerspective:function(t,r,n,s,c,h){h===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var d=this.elements;return d[0]=2*c/(r-t),d[4]=0,d[8]=(r+t)/(r-t),d[12]=0,d[1]=0,d[5]=2*c/(n-s),d[9]=(n+s)/(n-s),d[13]=0,d[2]=0,d[6]=0,d[10]=-(h+c)/(h-c),d[14]=-2*h*c/(h-c),d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this},makeOrthographic:function(t,r,n,s,c,h){var d=this.elements,f=1/(r-t),x=1/(n-s),E=1/(h-c);return d[0]=2*f,d[4]=0,d[8]=0,d[12]=-((r+t)*f),d[1]=0,d[5]=2*x,d[9]=0,d[13]=-((n+s)*x),d[2]=0,d[6]=0,d[10]=-2*E,d[14]=-((h+c)*E),d[3]=0,d[7]=0,d[11]=0,d[15]=1,this},equals:function(t){var r=this.elements;t=t.elements;for(var n=0;16>n;n++)if(r[n]!==t[n])return!1;return!0},fromArray:function(t,r){r===void 0&&(r=0);for(var n=0;16>n;n++)this.elements[n]=t[n+r];return this},toArray:function(t,r){t===void 0&&(t=[]),r===void 0&&(r=0);var n=this.elements;return t[r]=n[0],t[r+1]=n[1],t[r+2]=n[2],t[r+3]=n[3],t[r+4]=n[4],t[r+5]=n[5],t[r+6]=n[6],t[r+7]=n[7],t[r+8]=n[8],t[r+9]=n[9],t[r+10]=n[10],t[r+11]=n[11],t[r+12]=n[12],t[r+13]=n[13],t[r+14]=n[14],t[r+15]=n[15],t}});var o0=new Qe,Hm=new Ee;Rn.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),Rn.DefaultOrder="XYZ",vn(Rn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),dt(Rn.prototype,{isEuler:!0,set:function(t,r,n,s){return this._x=t,this._y=r,this._z=n,this._order=s||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,r,n){var s=Jr.clamp,c=t.elements;t=c[0];var h=c[4],d=c[8],f=c[1],x=c[5],E=c[9],N=c[2],C=c[6];switch(c=c[10],r=r||this._order,r){case"XYZ":this._y=Math.asin(s(d,-1,1)),.9999999>Math.abs(d)?(this._x=Math.atan2(-E,c),this._z=Math.atan2(-h,t)):(this._x=Math.atan2(C,x),this._z=0);break;case"YXZ":this._x=Math.asin(-s(E,-1,1)),.9999999>Math.abs(E)?(this._y=Math.atan2(d,c),this._z=Math.atan2(f,x)):(this._y=Math.atan2(-N,t),this._z=0);break;case"ZXY":this._x=Math.asin(s(C,-1,1)),.9999999>Math.abs(C)?(this._y=Math.atan2(-N,c),this._z=Math.atan2(-h,x)):(this._y=0,this._z=Math.atan2(f,t));break;case"ZYX":this._y=Math.asin(-s(N,-1,1)),.9999999>Math.abs(N)?(this._x=Math.atan2(C,c),this._z=Math.atan2(f,t)):(this._x=0,this._z=Math.atan2(-h,x));break;case"YZX":this._z=Math.asin(s(f,-1,1)),.9999999>Math.abs(f)?(this._x=Math.atan2(-E,x),this._y=Math.atan2(-N,t)):(this._x=0,this._y=Math.atan2(d,c));break;case"XZY":this._z=Math.asin(-s(h,-1,1)),.9999999>Math.abs(h)?(this._x=Math.atan2(C,x),this._y=Math.atan2(d,t)):(this._x=Math.atan2(-E,c),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,n!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(t,r,n){return o0.makeRotationFromQuaternion(t),this.setFromRotationMatrix(o0,r,n)},setFromVector3:function(t,r){return this.set(t.x,t.y,t.z,r||this._order)},reorder:function(t){return Hm.setFromEuler(this),this.setFromQuaternion(Hm,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,r){return t===void 0&&(t=[]),r===void 0&&(r=0),t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new gt(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),dt(An.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return(this.mask&t.mask)!=0}});var M1=0,_1=new gt,ed=new Ee,vh=new Qe,Nm=new gt,Ag=new gt,Rx=new gt,Px=new Ee,s0=new gt(1,0,0),a0=new gt(0,1,0),A0=new gt(0,0,1),Ux={type:"added"},Dx={type:"removed"};Oe.DefaultUp=new gt(0,1,0),Oe.DefaultMatrixAutoUpdate=!0,Oe.prototype=dt(pt(ve.prototype),{constructor:Oe,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,r){this.quaternion.setFromAxisAngle(t,r)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,r){return ed.setFromAxisAngle(t,r),this.quaternion.multiply(ed),this},rotateOnWorldAxis:function(t,r){return ed.setFromAxisAngle(t,r),this.quaternion.premultiply(ed),this},rotateX:function(t){return this.rotateOnAxis(s0,t)},rotateY:function(t){return this.rotateOnAxis(a0,t)},rotateZ:function(t){return this.rotateOnAxis(A0,t)},translateOnAxis:function(t,r){return _1.copy(t).applyQuaternion(this.quaternion),this.position.add(_1.multiplyScalar(r)),this},translateX:function(t){return this.translateOnAxis(s0,t)},translateY:function(t){return this.translateOnAxis(a0,t)},translateZ:function(t){return this.translateOnAxis(A0,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(vh.getInverse(this.matrixWorld))},lookAt:function(t,r,n){t.isVector3?Nm.copy(t):Nm.set(t,r,n),t=this.parent,this.updateWorldMatrix(!0,!1),Ag.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vh.lookAt(Ag,Nm,this.up):vh.lookAt(Nm,Ag,this.up),this.quaternion.setFromRotationMatrix(vh),t&&(vh.extractRotation(t.matrixWorld),ed.setFromRotationMatrix(vh),this.quaternion.premultiply(ed.inverse()))},add:function(t){if(1<arguments.length){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Ux)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length){for(var r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}return r=this.children.indexOf(t),r!==-1&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(Dx)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),vh.getInverse(this.matrixWorld),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),vh.multiply(t.parent.matrixWorld)),t.applyMatrix4(vh),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,r){if(this[t]===r)return this;for(var n=0,s=this.children.length;n<s;n++){var c=this.children[n].getObjectByProperty(t,r);if(c!==void 0)return c}},getWorldPosition:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new gt),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Ee),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ag,t,Rx),t},getWorldScale:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new gt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ag,Px,t),t},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new gt),this.updateMatrixWorld(!0);var r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var r=this.children,n=0,s=r.length;n<s;n++)r[n].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var r=this.children,n=0,s=r.length;n<s;n++)r[n].traverseVisible(t)}},traverseAncestors:function(t){var r=this.parent;r!==null&&(t(r),r.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var r=this.children,n=0,s=r.length;n<s;n++)r[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,r){var n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),r===!0)for(t=this.children,r=0,n=t.length;r<n;r++)t[r].updateWorldMatrix(!1,!0)},toJSON:function(t){function r(N,C){return N[C.uuid]===void 0&&(N[C.uuid]=C.toJSON(t)),C.uuid}function n(N){var C=[],I;for(I in N){var S=N[I];delete S.metadata,C.push(S)}return C}var s=t===void 0||typeof t=="string",c={};s&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},c.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var h={};if(h.uuid=this.uuid,h.type=this.type,this.name!==""&&(h.name=this.name),this.castShadow===!0&&(h.castShadow=!0),this.receiveShadow===!0&&(h.receiveShadow=!0),this.visible===!1&&(h.visible=!1),this.frustumCulled===!1&&(h.frustumCulled=!1),this.renderOrder!==0&&(h.renderOrder=this.renderOrder),Za(this.userData)!=="{}"&&(h.userData=this.userData),h.layers=this.layers.mask,h.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(h.matrixAutoUpdate=!1),this.isInstancedMesh&&(h.type="InstancedMesh",h.count=this.count,h.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){h.geometry=r(t.geometries,this.geometry);var d=this.geometry.parameters;if(d!==void 0&&d.shapes!==void 0)if(d=d.shapes,Array.isArray(d))for(var f=0,x=d.length;f<x;f++)r(t.shapes,d[f]);else r(t.shapes,d)}if(this.material!==void 0)if(Array.isArray(this.material)){for(d=[],f=0,x=this.material.length;f<x;f++)d.push(r(t.materials,this.material[f]));h.material=d}else h.material=r(t.materials,this.material);if(0<this.children.length)for(h.children=[],f=0;f<this.children.length;f++)h.children.push(this.children[f].toJSON(t).object);if(s){s=n(t.geometries),f=n(t.materials),x=n(t.textures);var E=n(t.images);d=n(t.shapes),0<s.length&&(c.geometries=s),0<f.length&&(c.materials=f),0<x.length&&(c.textures=x),0<E.length&&(c.images=E),0<d.length&&(c.shapes=d)}return c.object=h,c},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t,r){if(r===void 0&&(r=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(Za(t.userData)),r===!0)for(r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}),Nn.prototype=dt(pt(Oe.prototype),{constructor:Nn,isScene:!0,copy:function(t,r){return Oe.prototype.copy.call(this,t,r),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var r=Oe.prototype.toJSON.call(this,t);return this.background!==null&&(r.object.background=this.background.toJSON(t)),this.environment!==null&&(r.object.environment=this.environment.toJSON(t)),this.fog!==null&&(r.object.fog=this.fog.toJSON()),r},dispose:function(){this.dispatchEvent({type:"dispose"})}});var mA=[new gt,new gt,new gt,new gt,new gt,new gt,new gt,new gt],Lf=new gt,zm=new hi,Gu=new gt,rd=new gt,nd=new gt,_c=new gt,Bc=new gt,Ff=new gt,ug=new gt,Qm=new gt,bm=new gt,Rf=new gt;dt(hi.prototype,{isBox3:!0,set:function(t,r){return this.min.copy(t),this.max.copy(r),this},setFromArray:function(t){for(var r=Infinity,n=Infinity,s=Infinity,c=-Infinity,h=-Infinity,d=-Infinity,f=0,x=t.length;f<x;f+=3){var E=t[f],N=t[f+1],C=t[f+2];E<r&&(r=E),N<n&&(n=N),C<s&&(s=C),E>c&&(c=E),N>h&&(h=N),C>d&&(d=C)}return this.min.set(r,n,s),this.max.set(c,h,d),this},setFromBufferAttribute:function(t){for(var r=Infinity,n=Infinity,s=Infinity,c=-Infinity,h=-Infinity,d=-Infinity,f=0,x=t.count;f<x;f++){var E=t.getX(f),N=t.getY(f),C=t.getZ(f);E<r&&(r=E),N<n&&(n=N),C<s&&(s=C),E>c&&(c=E),N>h&&(h=N),C>d&&(d=C)}return this.min.set(r,n,s),this.max.set(c,h,d),this},setFromPoints:function(t){this.makeEmpty();for(var r=0,n=t.length;r<n;r++)this.expandByPoint(t[r]);return this},setFromCenterAndSize:function(t,r){return r=Lf.copy(r).multiplyScalar(.5),this.min.copy(t).sub(r),this.max.copy(t).add(r),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return t===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new gt),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return t===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new gt),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var r=t.geometry;r!==void 0&&(r.boundingBox===null&&r.computeBoundingBox(),zm.copy(r.boundingBox),zm.applyMatrix4(t.matrixWorld),this.union(zm)),t=t.children,r=0;for(var n=t.length;r<n;r++)this.expandByObject(t[r]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,r){return r===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),r=new gt),r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,Lf),Lf.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){if(0<t.normal.x)var r=t.normal.x*this.min.x,n=t.normal.x*this.max.x;else r=t.normal.x*this.max.x,n=t.normal.x*this.min.x;return 0<t.normal.y?(r+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(r+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),r<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){return this.isEmpty()||(this.getCenter(ug),Qm.subVectors(this.max,ug),Gu.subVectors(t.a,ug),rd.subVectors(t.b,ug),nd.subVectors(t.c,ug),_c.subVectors(rd,Gu),Bc.subVectors(nd,rd),Ff.subVectors(Gu,nd),t=[0,-_c.z,_c.y,0,-Bc.z,Bc.y,0,-Ff.z,Ff.y,_c.z,0,-_c.x,Bc.z,0,-Bc.x,Ff.z,0,-Ff.x,-_c.y,_c.x,0,-Bc.y,Bc.x,0,-Ff.y,Ff.x,0],!Bi(t,Gu,rd,nd,Qm))||(t=[1,0,0,0,1,0,0,0,1],!Bi(t,Gu,rd,nd,Qm))?!1:(bm.crossVectors(_c,Bc),t=[bm.x,bm.y,bm.z],Bi(t,Gu,rd,nd,Qm))},clampPoint:function(t,r){return r===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),r=new gt),r.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Lf.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return t===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Lf).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(mA[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),mA[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),mA[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),mA[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),mA[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),mA[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),mA[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),mA[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(mA),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Ox=new hi;dt(mo.prototype,{set:function(t,r){return this.center.copy(t),this.radius=r,this},setFromPoints:function(t,r){var n=this.center;r!==void 0?n.copy(r):Ox.setFromPoints(t).getCenter(n);for(var s=r=0,c=t.length;s<c;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return 0>this.radius},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,r){var n=this.center.distanceToSquared(t);return r===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),r=new gt),r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){return t===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new hi),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var yh=new gt,u0=new gt,a=new gt,A=new gt,i=new gt,u=new gt,m=new gt;dt(ns.prototype,{set:function(t,r){return this.origin.copy(t),this.direction.copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,r){return r===void 0&&(console.warn("THREE.Ray: .at() target is now required"),r=new gt),r.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,yh)),this},closestPointToPoint:function(t,r){return r===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),r=new gt),r.subVectors(t,this.origin),t=r.dot(this.direction),0>t?r.copy(this.origin):r.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var r=yh.subVectors(t,this.origin).dot(this.direction);return 0>r?this.origin.distanceToSquared(t):(yh.copy(this.direction).multiplyScalar(r).add(this.origin),yh.distanceToSquared(t))},distanceSqToSegment:function(t,r,n,s){u0.copy(t).add(r).multiplyScalar(.5),a.copy(r).sub(t).normalize(),A.copy(this.origin).sub(u0);var c=.5*t.distanceTo(r),h=-this.direction.dot(a),d=A.dot(this.direction),f=-A.dot(a),x=A.lengthSq(),E=Math.abs(1-h*h);if(0<E){t=h*f-d,r=h*d-f;var N=c*E;0<=t?r>=-N?r<=N?(c=1/E,t*=c,r*=c,h=t*(t+h*r+2*d)+r*(h*t+r+2*f)+x):(r=c,t=Math.max(0,-(h*r+d)),h=-t*t+r*(r+2*f)+x):(r=-c,t=Math.max(0,-(h*r+d)),h=-t*t+r*(r+2*f)+x):r<=-N?(t=Math.max(0,-(-h*c+d)),r=0<t?-c:Math.min(Math.max(-c,-f),c),h=-t*t+r*(r+2*f)+x):r<=N?(t=0,r=Math.min(Math.max(-c,-f),c),h=r*(r+2*f)+x):(t=Math.max(0,-(h*c+d)),r=0<t?c:Math.min(Math.max(-c,-f),c),h=-t*t+r*(r+2*f)+x)}else r=0<h?-c:c,t=Math.max(0,-(h*r+d)),h=-t*t+r*(r+2*f)+x;return n&&n.copy(this.direction).multiplyScalar(t).add(this.origin),s&&s.copy(a).multiplyScalar(r).add(u0),h},intersectSphere:function(t,r){yh.subVectors(t.center,this.origin);var n=yh.dot(this.direction),s=yh.dot(yh)-n*n;return t=t.radius*t.radius,s>t?null:(t=Math.sqrt(t-s),s=n-t,n+=t,0>s&&0>n?null:0>s?this.at(n,r):this.at(s,r))},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var r=t.normal.dot(this.direction);return r===0?t.distanceToPoint(this.origin)===0?0:null:(t=-(this.origin.dot(t.normal)+t.constant)/r,0<=t?t:null)},intersectPlane:function(t,r){return t=this.distanceToPlane(t),t===null?null:this.at(t,r)},intersectsPlane:function(t){var r=t.distanceToPoint(this.origin);return r===0||0>t.normal.dot(this.direction)*r},intersectBox:function(t,r){var n=1/this.direction.x,s=1/this.direction.y,c=1/this.direction.z,h=this.origin;if(0<=n){var d=(t.min.x-h.x)*n;n*=t.max.x-h.x}else d=(t.max.x-h.x)*n,n*=t.min.x-h.x;if(0<=s){var f=(t.min.y-h.y)*s;s*=t.max.y-h.y}else f=(t.max.y-h.y)*s,s*=t.min.y-h.y;return d>s||f>n||((f>d||d!==d)&&(d=f),(s<n||n!==n)&&(n=s),0<=c?(f=(t.min.z-h.z)*c,t=(t.max.z-h.z)*c):(f=(t.max.z-h.z)*c,t=(t.min.z-h.z)*c),d>t||f>n)?null:((f>d||d!==d)&&(d=f),(t<n||n!==n)&&(n=t),0>n?null:this.at(0<=d?d:n,r))},intersectsBox:function(t){return this.intersectBox(t,yh)!==null},intersectTriangle:function(t,r,n,s,c){if(i.subVectors(r,t),u.subVectors(n,t),m.crossVectors(i,u),r=this.direction.dot(m),0<r){if(s)return null;s=1}else if(0>r)s=-1,r=-r;else return null;return A.subVectors(this.origin,t),t=s*this.direction.dot(u.crossVectors(A,u)),0>t||(n=s*this.direction.dot(i.cross(A)),0>n||t+n>r)?null:(t=-s*A.dot(m),0>t?null:this.at(t/r,c))},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var p=new gt,y=new gt,v=new kt;dt(ci.prototype,{isPlane:!0,set:function(t,r){return this.normal.copy(t),this.constant=r,this},setComponents:function(t,r,n,s){return this.normal.set(t,r,n),this.constant=s,this},setFromNormalAndCoplanarPoint:function(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this},setFromCoplanarPoints:function(t,r,n){return r=p.subVectors(n,r).cross(y.subVectors(t,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,t),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,r){return r===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),r=new gt),r.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,r){r===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),r=new gt);var n=t.delta(p),s=this.normal.dot(n);if(s===0){if(this.distanceToPoint(t.start)===0)return r.copy(t.start)}else if(s=-(t.start.dot(this.normal)+this.constant)/s,!(0>s||1<s))return r.copy(n).multiplyScalar(s).add(t.start)},intersectsLine:function(t){var r=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>r&&0<t||0>t&&0<r},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return t===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new gt),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,r){return r=r||v.getNormalMatrix(t),t=this.coplanarPoint(p).applyMatrix4(t),r=this.normal.applyMatrix3(r).normalize(),this.constant=-t.dot(r),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var M=new gt,R=new gt,k=new gt,_=new gt,T=new gt,O=new gt,U=new gt,G=new gt,X=new gt,W=new gt;dt(Ui,{getNormal:function(t,r,n,s){return s===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),s=new gt),s.subVectors(n,r),M.subVectors(t,r),s.cross(M),t=s.lengthSq(),0<t?s.multiplyScalar(1/Math.sqrt(t)):s.set(0,0,0)},getBarycoord:function(t,r,n,s,c){M.subVectors(s,r),R.subVectors(n,r),k.subVectors(t,r),t=M.dot(M),r=M.dot(R),n=M.dot(k);var h=R.dot(R);s=R.dot(k);var d=t*h-r*r;return c===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),c=new gt),d===0?c.set(-2,-1,-1):(d=1/d,h=(h*n-r*s)*d,t=(t*s-r*n)*d,c.set(1-h-t,t,h))},containsPoint:function(t,r,n,s){return Ui.getBarycoord(t,r,n,s,_),0<=_.x&&0<=_.y&&1>=_.x+_.y},getUV:function(t,r,n,s,c,h,d,f){return this.getBarycoord(t,r,n,s,_),f.set(0,0),f.addScaledVector(c,_.x),f.addScaledVector(h,_.y),f.addScaledVector(d,_.z),f},isFrontFacing:function(t,r,n,s){return M.subVectors(n,r),R.subVectors(t,r),0>M.cross(R).dot(s)}}),dt(Ui.prototype,{set:function(t,r,n){return this.a.copy(t),this.b.copy(r),this.c.copy(n),this},setFromPointsAndIndices:function(t,r,n,s){return this.a.copy(t[r]),this.b.copy(t[n]),this.c.copy(t[s]),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return M.subVectors(this.c,this.b),R.subVectors(this.a,this.b),.5*M.cross(R).length()},getMidpoint:function(t){return t===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new gt),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Ui.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return t===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new ci),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,r){return Ui.getBarycoord(t,this.a,this.b,this.c,r)},getUV:function(t,r,n,s,c){return Ui.getUV(t,this.a,this.b,this.c,r,n,s,c)},containsPoint:function(t){return Ui.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Ui.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,r){r===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),r=new gt);var n=this.a,s=this.b,c=this.c;T.subVectors(s,n),O.subVectors(c,n),G.subVectors(t,n);var h=T.dot(G),d=O.dot(G);if(0>=h&&0>=d)return r.copy(n);X.subVectors(t,s);var f=T.dot(X),x=O.dot(X);if(0<=f&&x<=f)return r.copy(s);var E=h*x-f*d;if(0>=E&&0<=h&&0>=f)return s=h/(h-f),r.copy(n).addScaledVector(T,s);W.subVectors(t,c),t=T.dot(W);var N=O.dot(W);return 0<=N&&t<=N?r.copy(c):(h=t*d-h*N,0>=h&&0<=d&&0>=N?(E=d/(d-N),r.copy(n).addScaledVector(O,E)):(d=f*N-t*x,0>=d&&0<=x-f&&0<=t-N?(U.subVectors(c,s),E=(x-f)/(x-f+(t-N)),r.copy(s).addScaledVector(U,E)):(c=1/(d+h+E),s=h*c,E*=c,r.copy(n).addScaledVector(T,s).addScaledVector(O,E))))},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},J={h:0,s:0,l:0},ot={h:0,s:0,l:0};dt(Je.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this},setRGB:function(t,r,n){return this.r=t,this.g=r,this.b=n,this},setHSL:function(t,r,n){return t=Jr.euclideanModulo(t,1),r=Jr.clamp(r,0,1),n=Jr.clamp(n,0,1),r===0?this.r=this.g=this.b=n:(r=.5>=n?n*(1+r):n+r-n*r,n=2*n-r,this.r=ks(n,r,t+1/3),this.g=ks(n,r,t),this.b=ks(n,r,t-1/3)),this},setStyle:function(t){function r(d){d!==void 0&&1>parseFloat(d)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var s=n[2];switch(n[1]){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,r(n[5]),this;if(n=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,r(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){s=parseFloat(n[1])/360;var c=parseInt(n[2],10)/100,h=parseInt(n[3],10)/100;return r(n[5]),this.setHSL(s,c,h)}}}else if(n=/^#([A-Fa-f0-9]+)$/.exec(t)){if(n=n[1],s=n.length,s===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(t){var r=Y[t];return r!==void 0?this.setHex(r):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,r){return r===void 0&&(r=2),this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},copyLinearToGamma:function(t,r){return r===void 0&&(r=2),r=0<r?1/r:1,this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=MA(t.r),this.g=MA(t.g),this.b=MA(t.b),this},copyLinearToSRGB:function(t){return this.r=eA(t.r),this.g=eA(t.g),this.b=eA(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){t===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var r=this.r,n=this.g,s=this.b,c=Math.max(r,n,s),h=Math.min(r,n,s),d,f=(h+c)/2;if(h===c)h=d=0;else{var x=c-h;switch(h=.5>=f?x/(c+h):x/(2-c-h),c){case r:d=(n-s)/x+(n<s?6:0);break;case n:d=(s-r)/x+2;break;case s:d=(r-n)/x+4}d/=6}return t.h=d,t.s=h,t.l=f,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,r,n){return this.getHSL(J),J.h+=t,J.s+=r,J.l+=n,this.setHSL(J.h,J.s,J.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this},lerpHSL:function(t,r){this.getHSL(J),t.getHSL(ot),t=Jr.lerp(J.h,ot.h,r);var n=Jr.lerp(J.s,ot.s,r);return r=Jr.lerp(J.l,ot.l,r),this.setHSL(t,n,r),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,r){return r===void 0&&(r=0),this.r=t[r],this.g=t[r+1],this.b=t[r+2],this},toArray:function(t,r){return t===void 0&&(t=[]),r===void 0&&(r=0),t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t},toJSON:function(){return this.getHex()}}),Je.NAMES=Y,dt(_A.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var r=0,n=t.vertexNormals.length;r<n;r++)this.vertexNormals[r]=t.vertexNormals[r].clone();for(r=0,n=t.vertexColors.length;r<n;r++)this.vertexColors[r]=t.vertexColors[r].clone();return this}});var ut=0;hn.prototype=dt(pt(ve.prototype),{constructor:hn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(t!==void 0)for(var r in t){var n=t[r];if(n===void 0)console.warn("THREE.Material: '"+r+"' parameter is undefined.");else if(r==="shading")console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===1;else{var s=this[r];s===void 0?console.warn("THREE."+this.type+": '"+r+"' is not a property of this material."):s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[r]=n}}},toJSON:function(t){function r(c){var h=[],d;for(d in c){var f=c[d];delete f.metadata,h.push(f)}return h}var n=t===void 0||typeof t=="string";n&&(t={textures:{},images:{}});var s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),this.roughness!==void 0&&(s.roughness=this.roughness),this.metalness!==void 0&&(s.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(s.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),this.shininess!==void 0&&(s.shininess=this.shininess),this.clearcoat!==void 0&&(s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,s.reflectivity=this.reflectivity,s.refractionRatio=this.refractionRatio,this.combine!==void 0&&(s.combine=this.combine),this.envMapIntensity!==void 0&&(s.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),this.size!==void 0&&(s.size=this.size),this.sizeAttenuation!==void 0&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==1&&(s.blending=this.blending),this.flatShading===!0&&(s.flatShading=this.flatShading),this.side!==0&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),1>this.opacity&&(s.opacity=this.opacity),this.transparent===!0&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(s.rotation=this.rotation),this.polygonOffset===!0&&(s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(s.linewidth=this.linewidth),this.dashSize!==void 0&&(s.dashSize=this.dashSize),this.gapSize!==void 0&&(s.gapSize=this.gapSize),this.scale!==void 0&&(s.scale=this.scale),this.dithering===!0&&(s.dithering=!0),0<this.alphaTest&&(s.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(s.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(s.wireframe=this.wireframe),1<this.wireframeLinewidth&&(s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(s.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(s.morphTargets=!0),this.morphNormals===!0&&(s.morphNormals=!0),this.skinning===!0&&(s.skinning=!0),this.visible===!1&&(s.visible=!1),this.toneMapped===!1&&(s.toneMapped=!1),Za(this.userData)!=="{}"&&(s.userData=this.userData),n&&(n=r(t.textures),t=r(t.images),0<n.length&&(s.textures=n),0<t.length&&(s.images=t)),s},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var r=t.clippingPlanes,n=null;if(r!==null){var s=r.length;n=Array(s);for(var c=0;c!==s;++c)n[c]=r[c].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(Za(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(hn.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Qo.prototype=pt(hn.prototype),Qo.prototype.constructor=Qo,Qo.prototype.isMeshBasicMaterial=!0,Qo.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var lt=new gt;Object.defineProperty(Kr.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),dt(Kr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,r,n){t*=this.itemSize,n*=r.itemSize;for(var s=0,c=this.itemSize;s<c;s++)this.array[t+s]=r.array[n+s];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var r=this.array,n=0,s=0,c=t.length;s<c;s++){var h=t[s];h===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),h=new Je),r[n++]=h.r,r[n++]=h.g,r[n++]=h.b}return this},copyVector2sArray:function(t){for(var r=this.array,n=0,s=0,c=t.length;s<c;s++){var h=t[s];h===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),h=new ct),r[n++]=h.x,r[n++]=h.y}return this},copyVector3sArray:function(t){for(var r=this.array,n=0,s=0,c=t.length;s<c;s++){var h=t[s];h===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),h=new gt),r[n++]=h.x,r[n++]=h.y,r[n++]=h.z}return this},copyVector4sArray:function(t){for(var r=this.array,n=0,s=0,c=t.length;s<c;s++){var h=t[s];h===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),h=new Ht),r[n++]=h.x,r[n++]=h.y,r[n++]=h.z,r[n++]=h.w}return this},applyMatrix3:function(t){for(var r=0,n=this.count;r<n;r++)lt.x=this.getX(r),lt.y=this.getY(r),lt.z=this.getZ(r),lt.applyMatrix3(t),this.setXYZ(r,lt.x,lt.y,lt.z);return this},applyMatrix4:function(t){for(var r=0,n=this.count;r<n;r++)lt.x=this.getX(r),lt.y=this.getY(r),lt.z=this.getZ(r),lt.applyMatrix4(t),this.setXYZ(r,lt.x,lt.y,lt.z);return this},applyNormalMatrix:function(t){for(var r=0,n=this.count;r<n;r++)lt.x=this.getX(r),lt.y=this.getY(r),lt.z=this.getZ(r),lt.applyNormalMatrix(t),this.setXYZ(r,lt.x,lt.y,lt.z);return this},transformDirection:function(t){for(var r=0,n=this.count;r<n;r++)lt.x=this.getX(r),lt.y=this.getY(r),lt.z=this.getZ(r),lt.transformDirection(t),this.setXYZ(r,lt.x,lt.y,lt.z);return this},set:function(t,r){return r===void 0&&(r=0),this.array.set(t,r),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,r){return this.array[t*this.itemSize]=r,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,r){return this.array[t*this.itemSize+1]=r,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,r){return this.array[t*this.itemSize+2]=r,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,r){return this.array[t*this.itemSize+3]=r,this},setXY:function(t,r,n){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=n,this},setXYZ:function(t,r,n,s){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=n,this.array[t+2]=s,this},setXYZW:function(t,r,n,s,c){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=n,this.array[t+2]=s,this.array[t+3]=c,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),$f.prototype=pt(Kr.prototype),$f.prototype.constructor=$f,gu.prototype=pt(Kr.prototype),gu.prototype.constructor=gu,Gl.prototype=pt(Kr.prototype),Gl.prototype.constructor=Gl,Hh.prototype=pt(Kr.prototype),Hh.prototype.constructor=Hh,BA.prototype=pt(Kr.prototype),BA.prototype.constructor=BA,EA.prototype=pt(Kr.prototype),EA.prototype.constructor=EA,Ju.prototype=pt(Kr.prototype),Ju.prototype.constructor=Ju,or.prototype=pt(Kr.prototype),or.prototype.constructor=or,wo.prototype=pt(Kr.prototype),wo.prototype.constructor=wo,dt(Gs.prototype,{computeGroups:function(t){var r=[],n=void 0;t=t.faces;for(var s=0;s<t.length;s++){var c=t[s];if(c.materialIndex!==n){n=c.materialIndex,h!==void 0&&(h.count=3*s-h.start,r.push(h));var h={start:3*s,materialIndex:n}}}h!==void 0&&(h.count=3*s-h.start,r.push(h)),this.groups=r},fromGeometry:function(t){var r=t.faces,n=t.vertices,s=t.faceVertexUvs,c=s[0]&&0<s[0].length,h=s[1]&&0<s[1].length,d=t.morphTargets,f=d.length;if(0<f){for(var x=[],E=0;E<f;E++)x[E]={name:d[E].name,data:[]};this.morphTargets.position=x}var N=t.morphNormals,C=N.length;if(0<C){var I=[];for(E=0;E<C;E++)I[E]={name:N[E].name,data:[]};this.morphTargets.normal=I}var S=t.skinIndices,F=t.skinWeights,D=S.length===n.length,K=F.length===n.length;for(0<n.length&&r.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),E=0;E<r.length;E++){var Z=r[E];this.vertices.push(n[Z.a],n[Z.b],n[Z.c]);var $=Z.vertexNormals;for($.length===3?this.normals.push($[0],$[1],$[2]):($=Z.normal,this.normals.push($,$,$)),$=Z.vertexColors,$.length===3?this.colors.push($[0],$[1],$[2]):($=Z.color,this.colors.push($,$,$)),c===!0&&($=s[0][E],$!==void 0?this.uvs.push($[0],$[1],$[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",E),this.uvs.push(new ct,new ct,new ct))),h===!0&&($=s[1][E],$!==void 0?this.uvs2.push($[0],$[1],$[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",E),this.uvs2.push(new ct,new ct,new ct))),$=0;$<f;$++){var st=d[$].vertices;x[$].data.push(st[Z.a],st[Z.b],st[Z.c])}for($=0;$<C;$++)st=N[$].vertexNormals[E],I[$].data.push(st.a,st.b,st.c);D&&this.skinIndices.push(S[Z.a],S[Z.b],S[Z.c]),K&&this.skinWeights.push(F[Z.a],F[Z.b],F[Z.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this}});var wt=1,Qt=new Qe,zt=new Oe,ne=new gt,pe=new hi,be=new hi,Ie=new gt;sr.prototype=dt(pt(ve.prototype),{constructor:sr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<Nh(t)?Ju:BA)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,r){return this.attributes[t]=r,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,r,n){this.groups.push({start:t,count:r,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,r){this.drawRange.start=t,this.drawRange.count=r},applyMatrix4:function(t){var r=this.attributes.position;if(r!==void 0&&(r.applyMatrix4(t),r.needsUpdate=!0),r=this.attributes.normal,r!==void 0){var n=new kt().getNormalMatrix(t);r.applyNormalMatrix(n),r.needsUpdate=!0}return r=this.attributes.tangent,r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(t){return Qt.makeRotationX(t),this.applyMatrix4(Qt),this},rotateY:function(t){return Qt.makeRotationY(t),this.applyMatrix4(Qt),this},rotateZ:function(t){return Qt.makeRotationZ(t),this.applyMatrix4(Qt),this},translate:function(t,r,n){return Qt.makeTranslation(t,r,n),this.applyMatrix4(Qt),this},scale:function(t,r,n){return Qt.makeScale(t,r,n),this.applyMatrix4(Qt),this},lookAt:function(t){return zt.lookAt(t),zt.updateMatrix(),this.applyMatrix4(zt.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ne).negate(),this.translate(ne.x,ne.y,ne.z),this},setFromObject:function(t){var r=t.geometry;if(t.isPoints||t.isLine){t=new or(3*r.vertices.length,3);var n=new or(3*r.colors.length,3);this.setAttribute("position",t.copyVector3sArray(r.vertices)),this.setAttribute("color",n.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length&&(t=new or(r.lineDistances.length,1),this.setAttribute("lineDistance",t.copyArray(r.lineDistances))),r.boundingSphere!==null&&(this.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(this.boundingBox=r.boundingBox.clone())}else t.isMesh&&r&&r.isGeometry&&this.fromGeometry(r);return this},setFromPoints:function(t){for(var r=[],n=0,s=t.length;n<s;n++){var c=t[n];r.push(c.x,c.y,c.z||0)}return this.setAttribute("position",new or(r,3)),this},updateFromObject:function(t){var r=t.geometry;if(t.isMesh){var n=r.__directGeometry;if(r.elementsNeedUpdate===!0&&(n=void 0,r.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(r);n.verticesNeedUpdate=r.verticesNeedUpdate,n.normalsNeedUpdate=r.normalsNeedUpdate,n.colorsNeedUpdate=r.colorsNeedUpdate,n.uvsNeedUpdate=r.uvsNeedUpdate,n.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=n}return r.verticesNeedUpdate===!0&&(n=this.attributes.position,n!==void 0&&(n.copyVector3sArray(r.vertices),n.needsUpdate=!0),r.verticesNeedUpdate=!1),r.normalsNeedUpdate===!0&&(n=this.attributes.normal,n!==void 0&&(n.copyVector3sArray(r.normals),n.needsUpdate=!0),r.normalsNeedUpdate=!1),r.colorsNeedUpdate===!0&&(n=this.attributes.color,n!==void 0&&(n.copyColorsArray(r.colors),n.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(n=this.attributes.uv,n!==void 0&&(n.copyVector2sArray(r.uvs),n.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,n!==void 0&&(n.copyArray(r.lineDistances),n.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(t.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=new Gs().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var r=new Float32Array(3*t.vertices.length);this.setAttribute("position",new Kr(r,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(r=new Float32Array(3*t.normals.length),this.setAttribute("normal",new Kr(r,3).copyVector3sArray(t.normals))),0<t.colors.length&&(r=new Float32Array(3*t.colors.length),this.setAttribute("color",new Kr(r,3).copyColorsArray(t.colors))),0<t.uvs.length&&(r=new Float32Array(2*t.uvs.length),this.setAttribute("uv",new Kr(r,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(r=new Float32Array(2*t.uvs2.length),this.setAttribute("uv2",new Kr(r,2).copyVector2sArray(t.uvs2))),this.groups=t.groups;for(var n in t.morphTargets){r=[];for(var s=t.morphTargets[n],c=0,h=s.length;c<h;c++){var d=s[c],f=new or(3*d.data.length,3);f.name=d.name,r.push(f.copyVector3sArray(d.data))}this.morphAttributes[n]=r}return 0<t.skinIndices.length&&(n=new or(4*t.skinIndices.length,4),this.setAttribute("skinIndex",n.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(n=new or(4*t.skinWeights.length,4),this.setAttribute("skinWeight",n.copyVector4sArray(t.skinWeights))),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new hi);var t=this.attributes.position,r=this.morphAttributes.position;if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),r){t=0;for(var n=r.length;t<n;t++)pe.setFromBufferAttribute(r[t]),this.morphTargetsRelative?(Ie.addVectors(this.boundingBox.min,pe.min),this.boundingBox.expandByPoint(Ie),Ie.addVectors(this.boundingBox.max,pe.max),this.boundingBox.expandByPoint(Ie)):(this.boundingBox.expandByPoint(pe.min),this.boundingBox.expandByPoint(pe.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new mo);var t=this.attributes.position,r=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(pe.setFromBufferAttribute(t),r)for(var s=0,c=r.length;s<c;s++){var h=r[s];be.setFromBufferAttribute(h),this.morphTargetsRelative?(Ie.addVectors(pe.min,be.min),pe.expandByPoint(Ie),Ie.addVectors(pe.max,be.max),pe.expandByPoint(Ie)):(pe.expandByPoint(be.min),pe.expandByPoint(be.max))}pe.getCenter(n);var d=0;for(s=0,c=t.count;s<c;s++)Ie.fromBufferAttribute(t,s),d=Math.max(d,n.distanceToSquared(Ie));if(r)for(s=0,c=r.length;s<c;s++){h=r[s];for(var f=this.morphTargetsRelative,x=0,E=h.count;x<E;x++)Ie.fromBufferAttribute(h,x),f&&(ne.fromBufferAttribute(t,x),Ie.add(ne)),d=Math.max(d,n.distanceToSquared(Ie))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,r=this.attributes;if(r.position){var n=r.position.array;if(r.normal===void 0)this.setAttribute("normal",new Kr(new Float32Array(n.length),3));else for(var s=r.normal.array,c=0,h=s.length;c<h;c++)s[c]=0;s=r.normal.array;var d=new gt,f=new gt,x=new gt,E=new gt,N=new gt;if(t){var C=t.array;for(c=0,h=t.count;c<h;c+=3){t=3*C[c+0];var I=3*C[c+1],S=3*C[c+2];d.fromArray(n,t),f.fromArray(n,I),x.fromArray(n,S),E.subVectors(x,f),N.subVectors(d,f),E.cross(N),s[t]+=E.x,s[t+1]+=E.y,s[t+2]+=E.z,s[I]+=E.x,s[I+1]+=E.y,s[I+2]+=E.z,s[S]+=E.x,s[S+1]+=E.y,s[S+2]+=E.z}}else for(c=0,h=n.length;c<h;c+=9)d.fromArray(n,c),f.fromArray(n,c+3),x.fromArray(n,c+6),E.subVectors(x,f),N.subVectors(d,f),E.cross(N),s[c]=E.x,s[c+1]=E.y,s[c+2]=E.z,s[c+3]=E.x,s[c+4]=E.y,s[c+5]=E.z,s[c+6]=E.x,s[c+7]=E.y,s[c+8]=E.z;this.normalizeNormals(),r.normal.needsUpdate=!0}},merge:function(t,r){if(t&&t.isBufferGeometry){r===void 0&&(r=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes,s;for(s in n)if(t.attributes[s]!==void 0){var c=n[s].array,h=t.attributes[s],d=h.array,f=h.itemSize*r;h=Math.min(d.length,c.length-f);for(var x=0;x<h;x++,f++)c[f]=d[x]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,r=0,n=t.count;r<n;r++)Ie.x=t.getX(r),Ie.y=t.getY(r),Ie.z=t.getZ(r),Ie.normalize(),t.setXYZ(r,Ie.x,Ie.y,Ie.z)},toNonIndexed:function(){function t(N,C){var I=N.array,S=N.itemSize;N=N.normalized;for(var F=new I.constructor(C.length*S),D,K=0,Z=0,$=C.length;Z<$;Z++){D=C[Z]*S;for(var st=0;st<S;st++)F[K++]=I[D++]}return new Kr(F,S,N)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var r=new sr,n=this.index.array,s=this.attributes,c;for(c in s){var h=s[c];h=t(h,n),r.setAttribute(c,h)}var d=this.morphAttributes;for(c in d){var f=[],x=d[c];s=0;for(var E=x.length;s<E;s++)h=x[s],h=t(h,n),f.push(h);r.morphAttributes[c]=f}for(r.morphTargetsRelative=this.morphTargetsRelative,n=this.groups,s=0,c=n.length;s<c;s++)h=n[s],r.addGroup(h.start,h.count,h.materialIndex);return r},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),0<Xi(this.userData).length&&(t.userData=this.userData),this.parameters!==void 0){var r=this.parameters;for(E in r)r[E]!==void 0&&(t[E]=r[E]);return t}t.data={attributes:{}},r=this.index,r!==null&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var n=this.attributes;for(E in n){r=n[E];var s=r.toJSON();r.name!==""&&(s.name=r.name),t.data.attributes[E]=s}n={};var c=!1;for(E in this.morphAttributes){for(var h=this.morphAttributes[E],d=[],f=0,x=h.length;f<x;f++)r=h[f],s=r.toJSON(),r.name!==""&&(s.name=r.name),d.push(s);0<d.length&&(n[E]=d,c=!0)}c&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);var E=this.groups;return 0<E.length&&(t.data.groups=JSON.parse(Za(E))),E=this.boundingSphere,E!==null&&(t.data.boundingSphere={center:E.center.toArray(),radius:E.radius}),t},clone:function(){return new sr().copy(this)},copy:function(t){var r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var n=t.index;n!==null&&this.setIndex(n.clone()),n=t.attributes;for(d in n)this.setAttribute(d,n[d].clone());var s=t.morphAttributes;for(d in s){var c=[],h=s[d];for(n=0,r=h.length;n<r;n++)c.push(h[n].clone());this.morphAttributes[d]=c}this.morphTargetsRelative=t.morphTargetsRelative;var d=t.groups;for(n=0,r=d.length;n<r;n++)s=d[n],this.addGroup(s.start,s.count,s.materialIndex);return d=t.boundingBox,d!==null&&(this.boundingBox=d.clone()),d=t.boundingSphere,d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var hr=new Qe,Qr=new ns,Ce=new mo,Ze=new gt,sn=new gt,an=new gt,er=new gt,Ms=new gt,so=new gt,ao=new gt,id=new gt,Wo=new gt,Ec=new ct,od=new ct,Dl=new ct,l0=new gt,B1=new gt;$i.prototype=dt(pt(Oe.prototype),{constructor:$i,isMesh:!0,copy:function(t){return Oe.prototype.copy.call(this,t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=dt({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var r=Xi(t);if(0<r.length){var n=t[r[0]];if(n!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,r=n.length;t<r;t++){var s=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=t}}}else t=t.morphTargets,t!==void 0&&0<t.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(t,r){var n=this.geometry,s=this.material,c=this.matrixWorld;if(s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Ce.copy(n.boundingSphere),Ce.applyMatrix4(c),t.ray.intersectsSphere(Ce)!==!1&&(hr.getInverse(c),Qr.copy(t.ray).applyMatrix4(hr),n.boundingBox===null||Qr.intersectsBox(n.boundingBox)!==!1))){if(n.isBufferGeometry){var h=n.index;c=n.attributes.position;var d=n.morphAttributes.position,f=n.morphTargetsRelative,x=n.attributes.uv,E=n.attributes.uv2,N=n.groups,C=n.drawRange,I,S;if(h!==null)if(Array.isArray(s)){var F=0;for(I=N.length;F<I;F++){var D=N[F],K=s[D.materialIndex],Z=Math.max(D.start,C.start);for(S=n=Math.min(D.start+D.count,C.start+C.count);Z<S;Z+=3){n=h.getX(Z);var $=h.getX(Z+1),st=h.getX(Z+2);(n=rn(this,K,t,Qr,c,d,f,x,E,n,$,st))&&(n.faceIndex=Math.floor(Z/3),n.face.materialIndex=D.materialIndex,r.push(n))}}}else for(Z=Math.max(0,C.start),n=Math.min(h.count,C.start+C.count),F=Z,I=n;F<I;F+=3)n=h.getX(F),$=h.getX(F+1),st=h.getX(F+2),(n=rn(this,s,t,Qr,c,d,f,x,E,n,$,st))&&(n.faceIndex=Math.floor(F/3),r.push(n));else if(c!==void 0)if(Array.isArray(s))for(F=0,I=N.length;F<I;F++)for(D=N[F],K=s[D.materialIndex],Z=Math.max(D.start,C.start),S=n=Math.min(D.start+D.count,C.start+C.count);Z<S;Z+=3)n=Z,$=Z+1,st=Z+2,(n=rn(this,K,t,Qr,c,d,f,x,E,n,$,st))&&(n.faceIndex=Math.floor(Z/3),n.face.materialIndex=D.materialIndex,r.push(n));else for(Z=Math.max(0,C.start),n=Math.min(c.count,C.start+C.count),F=Z,I=n;F<I;F+=3)n=F,$=F+1,st=F+2,(n=rn(this,s,t,Qr,c,d,f,x,E,n,$,st))&&(n.faceIndex=Math.floor(F/3),r.push(n))}else if(n.isGeometry)for(c=Array.isArray(s),d=n.vertices,f=n.faces,n=n.faceVertexUvs[0],0<n.length&&(h=n),C=0,F=f.length;C<F;C++)I=f[C],n=c?s[I.materialIndex]:s,n!==void 0&&(x=d[I.a],E=d[I.b],N=d[I.c],n=ge(this,n,t,Qr,x,E,N,l0))&&(h&&h[C]&&(D=h[C],Ec.copy(D[0]),od.copy(D[1]),Dl.copy(D[2]),n.uv=Ui.getUV(l0,x,E,N,Ec,od,Dl,new ct)),n.face=I,n.faceIndex=C,r.push(n))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var i_=0,Ic=new Qe,Hx=new Oe,E1=new gt;ze.prototype=dt(pt(ve.prototype),{constructor:ze,isGeometry:!0,applyMatrix4:function(t){for(var r=new kt().getNormalMatrix(t),n=0,s=this.vertices.length;n<s;n++)this.vertices[n].applyMatrix4(t);for(n=0,s=this.faces.length;n<s;n++){t=this.faces[n],t.normal.applyMatrix3(r).normalize();for(var c=0,h=t.vertexNormals.length;c<h;c++)t.vertexNormals[c].applyMatrix3(r).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(t){return Ic.makeRotationX(t),this.applyMatrix4(Ic),this},rotateY:function(t){return Ic.makeRotationY(t),this.applyMatrix4(Ic),this},rotateZ:function(t){return Ic.makeRotationZ(t),this.applyMatrix4(Ic),this},translate:function(t,r,n){return Ic.makeTranslation(t,r,n),this.applyMatrix4(Ic),this},scale:function(t,r,n){return Ic.makeScale(t,r,n),this.applyMatrix4(Ic),this},lookAt:function(t){return Hx.lookAt(t),Hx.updateMatrix(),this.applyMatrix4(Hx.matrix),this},fromBufferGeometry:function(t){function r(S,F,D,K){var Z=f===void 0?[]:[n.colors[S].clone(),n.colors[F].clone(),n.colors[D].clone()],$=d===void 0?[]:[new gt().fromArray(d,3*S),new gt().fromArray(d,3*F),new gt().fromArray(d,3*D)];K=new _A(S,F,D,$,Z,K),n.faces.push(K),x!==void 0&&n.faceVertexUvs[0].push([new ct().fromArray(x,2*S),new ct().fromArray(x,2*F),new ct().fromArray(x,2*D)]),E!==void 0&&n.faceVertexUvs[1].push([new ct().fromArray(E,2*S),new ct().fromArray(E,2*F),new ct().fromArray(E,2*D)])}var n=this,s=t.index!==null?t.index.array:void 0,c=t.attributes;if(c.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var h=c.position.array,d=c.normal!==void 0?c.normal.array:void 0,f=c.color!==void 0?c.color.array:void 0,x=c.uv!==void 0?c.uv.array:void 0,E=c.uv2!==void 0?c.uv2.array:void 0;for(E!==void 0&&(this.faceVertexUvs[1]=[]),c=0;c<h.length;c+=3)n.vertices.push(new gt().fromArray(h,c)),f!==void 0&&n.colors.push(new Je().fromArray(f,c));var N=t.groups;if(0<N.length)for(c=0;c<N.length;c++){h=N[c];var C=h.start,I=C;for(C+=h.count;I<C;I+=3)s!==void 0?r(s[I],s[I+1],s[I+2],h.materialIndex):r(I,I+1,I+2,h.materialIndex)}else if(s!==void 0)for(c=0;c<s.length;c+=3)r(s[c],s[c+1],s[c+2]);else for(c=0;c<h.length/3;c+=3)r(c,c+1,c+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(E1).negate(),this.translate(E1.x,E1.y,E1.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,r=this.boundingSphere.radius;r=r===0?1:1/r;var n=new Qe;return n.set(r,0,0,-r*t.x,0,r,0,-r*t.y,0,0,r,-r*t.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){for(var t=new gt,r=new gt,n=0,s=this.faces.length;n<s;n++){var c=this.faces[n],h=this.vertices[c.a],d=this.vertices[c.b];t.subVectors(this.vertices[c.c],d),r.subVectors(h,d),t.cross(r),t.normalize(),c.normal.copy(t)}},computeVertexNormals:function(t){t===void 0&&(t=!0);var r,n=Array(this.vertices.length),s=0;for(r=this.vertices.length;s<r;s++)n[s]=new gt;if(t){var c=new gt,h=new gt;for(t=0,s=this.faces.length;t<s;t++){r=this.faces[t];var d=this.vertices[r.a],f=this.vertices[r.b],x=this.vertices[r.c];c.subVectors(x,f),h.subVectors(d,f),c.cross(h),n[r.a].add(c),n[r.b].add(c),n[r.c].add(c)}}else for(this.computeFaceNormals(),t=0,s=this.faces.length;t<s;t++)r=this.faces[t],n[r.a].add(r.normal),n[r.b].add(r.normal),n[r.c].add(r.normal);for(s=0,r=this.vertices.length;s<r;s++)n[s].normalize();for(t=0,s=this.faces.length;t<s;t++)r=this.faces[t],d=r.vertexNormals,d.length===3?(d[0].copy(n[r.a]),d[1].copy(n[r.b]),d[2].copy(n[r.c])):(d[0]=n[r.a].clone(),d[1]=n[r.b].clone(),d[2]=n[r.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t;this.computeFaceNormals();var r=0;for(t=this.faces.length;r<t;r++){var n=this.faces[r],s=n.vertexNormals;s.length===3?(s[0].copy(n.normal),s[1].copy(n.normal),s[2].copy(n.normal)):(s[0]=n.normal.clone(),s[1]=n.normal.clone(),s[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,r,n=0;for(r=this.faces.length;n<r;n++){var s=this.faces[n];s.__originalFaceNormal?s.__originalFaceNormal.copy(s.normal):s.__originalFaceNormal=s.normal.clone(),s.__originalVertexNormals||(s.__originalVertexNormals=[]);var c=0;for(t=s.vertexNormals.length;c<t;c++)s.__originalVertexNormals[c]?s.__originalVertexNormals[c].copy(s.vertexNormals[c]):s.__originalVertexNormals[c]=s.vertexNormals[c].clone()}var h=new ze;for(h.faces=this.faces,c=0,t=this.morphTargets.length;c<t;c++){if(!this.morphNormals[c]){this.morphNormals[c]={},this.morphNormals[c].faceNormals=[],this.morphNormals[c].vertexNormals=[],s=this.morphNormals[c].faceNormals;var d=this.morphNormals[c].vertexNormals;for(n=0,r=this.faces.length;n<r;n++){var f=new gt,x={a:new gt,b:new gt,c:new gt};s.push(f),d.push(x)}}for(d=this.morphNormals[c],h.vertices=this.morphTargets[c].vertices,h.computeFaceNormals(),h.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)s=this.faces[n],f=d.faceNormals[n],x=d.vertexNormals[n],f.copy(s.normal),x.a.copy(s.vertexNormals[0]),x.b.copy(s.vertexNormals[1]),x.c.copy(s.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)s=this.faces[n],s.normal=s.__originalFaceNormal,s.vertexNormals=s.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new hi),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new mo),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,r,n){if(t&&t.isGeometry){var s,c=this.vertices.length,h=this.vertices,d=t.vertices,f=this.faces,x=t.faces,E=this.colors,N=t.colors;n===void 0&&(n=0),r!==void 0&&(s=new kt().getNormalMatrix(r));for(var C=0,I=d.length;C<I;C++){var S=d[C].clone();r!==void 0&&S.applyMatrix4(r),h.push(S)}for(C=0,I=N.length;C<I;C++)E.push(N[C].clone());for(C=0,I=x.length;C<I;C++){d=x[C];var F=d.vertexNormals;for(N=d.vertexColors,E=new _A(d.a+c,d.b+c,d.c+c),E.normal.copy(d.normal),s!==void 0&&E.normal.applyMatrix3(s).normalize(),r=0,h=F.length;r<h;r++)S=F[r].clone(),s!==void 0&&S.applyMatrix3(s).normalize(),E.vertexNormals.push(S);for(E.color.copy(d.color),r=0,h=N.length;r<h;r++)S=N[r],E.vertexColors.push(S.clone());E.materialIndex=d.materialIndex+n,f.push(E)}for(C=0,I=t.faceVertexUvs.length;C<I;C++)for(n=t.faceVertexUvs[C],this.faceVertexUvs[C]===void 0&&(this.faceVertexUvs[C]=[]),r=0,h=n.length;r<h;r++){for(s=n[r],c=[],f=0,x=s.length;f<x;f++)c.push(s[f].clone());this.faceVertexUvs[C].push(c)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t={},r=[],n=[],s=Math.pow(10,4),c,h=0;for(c=this.vertices.length;h<c;h++){var d=this.vertices[h];d=Math.round(d.x*s)+"_"+Math.round(d.y*s)+"_"+Math.round(d.z*s),t[d]===void 0?(t[d]=h,r.push(this.vertices[h]),n[h]=r.length-1):n[h]=n[t[d]]}for(t=[],h=0,c=this.faces.length;h<c;h++)for(s=this.faces[h],s.a=n[s.a],s.b=n[s.b],s.c=n[s.c],s=[s.a,s.b,s.c],d=0;3>d;d++)if(s[d]===s[(d+1)%3]){t.push(h);break}for(h=t.length-1;0<=h;h--)for(s=t[h],this.faces.splice(s,1),n=0,c=this.faceVertexUvs.length;n<c;n++)this.faceVertexUvs[n].splice(s,1);return h=this.vertices.length-r.length,this.vertices=r,h},setFromPoints:function(t){this.vertices=[];for(var r=0,n=t.length;r<n;r++){var s=t[r];this.vertices.push(new gt(s.x,s.y,s.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,r=t.length,n=0;n<r;n++)t[n]._id=n;t.sort(function(x,E){return x.materialIndex-E.materialIndex});var s=this.faceVertexUvs[0],c=this.faceVertexUvs[1],h,d;for(s&&s.length===r&&(h=[]),c&&c.length===r&&(d=[]),n=0;n<r;n++){var f=t[n]._id;h&&h.push(s[f]),d&&d.push(c[f])}h&&(this.faceVertexUvs[0]=h),d&&(this.faceVertexUvs[1]=d)},toJSON:function(){function t(Et,It,Bt){return Bt?Et|1<<It:Et&~(1<<It)}function r(Et){var It=Et.x.toString()+Et.y.toString()+Et.z.toString();return E[It]!==void 0||(E[It]=x.length/3,x.push(Et.x,Et.y,Et.z)),E[It]}function n(Et){var It=Et.r.toString()+Et.g.toString()+Et.b.toString();return C[It]!==void 0||(C[It]=N.length,N.push(Et.getHex())),C[It]}function s(Et){var It=Et.x.toString()+Et.y.toString();return S[It]!==void 0||(S[It]=I.length/2,I.push(Et.x,Et.y)),S[It]}var c={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(c.uuid=this.uuid,c.type=this.type,this.name!==""&&(c.name=this.name),this.parameters!==void 0){var h=this.parameters,d;for(d in h)h[d]!==void 0&&(c[d]=h[d]);return c}for(h=[],d=0;d<this.vertices.length;d++){var f=this.vertices[d];h.push(f.x,f.y,f.z)}f=[];var x=[],E={},N=[],C={},I=[],S={};for(d=0;d<this.faces.length;d++){var F=this.faces[d],D=this.faceVertexUvs[0][d]!==void 0,K=0<F.normal.length(),Z=0<F.vertexNormals.length,$=F.color.r!==1||F.color.g!==1||F.color.b!==1,st=0<F.vertexColors.length,ht=0;ht=t(ht,0,0),ht=t(ht,1,!0),ht=t(ht,2,!1),ht=t(ht,3,D),ht=t(ht,4,K),ht=t(ht,5,Z),ht=t(ht,6,$),ht=t(ht,7,st),f.push(ht),f.push(F.a,F.b,F.c),f.push(F.materialIndex),D&&(D=this.faceVertexUvs[0][d],f.push(s(D[0]),s(D[1]),s(D[2]))),K&&f.push(r(F.normal)),Z&&(K=F.vertexNormals,f.push(r(K[0]),r(K[1]),r(K[2]))),$&&f.push(n(F.color)),st&&(F=F.vertexColors,f.push(n(F[0]),n(F[1]),n(F[2])))}return c.data={},c.data.vertices=h,c.data.normals=x,0<N.length&&(c.data.colors=N),0<I.length&&(c.data.uvs=[I]),c.data.faces=f,c},clone:function(){return new ze().copy(this)},copy:function(t){var r,n,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var c=t.vertices,h=0;for(r=c.length;h<r;h++)this.vertices.push(c[h].clone());for(c=t.colors,h=0,r=c.length;h<r;h++)this.colors.push(c[h].clone());for(c=t.faces,h=0,r=c.length;h<r;h++)this.faces.push(c[h].clone());for(h=0,r=t.faceVertexUvs.length;h<r;h++){var d=t.faceVertexUvs[h];for(this.faceVertexUvs[h]===void 0&&(this.faceVertexUvs[h]=[]),c=0,n=d.length;c<n;c++){var f=d[c],x=[],E=0;for(s=f.length;E<s;E++)x.push(f[E].clone());this.faceVertexUvs[h].push(x)}}for(E=t.morphTargets,h=0,r=E.length;h<r;h++){if(s={},s.name=E[h].name,E[h].vertices!==void 0)for(s.vertices=[],c=0,n=E[h].vertices.length;c<n;c++)s.vertices.push(E[h].vertices[c].clone());if(E[h].normals!==void 0)for(s.normals=[],c=0,n=E[h].normals.length;c<n;c++)s.normals.push(E[h].normals[c].clone());this.morphTargets.push(s)}for(E=t.morphNormals,h=0,r=E.length;h<r;h++){if(s={},E[h].vertexNormals!==void 0)for(s.vertexNormals=[],c=0,n=E[h].vertexNormals.length;c<n;c++)d=E[h].vertexNormals[c],f={},f.a=d.a.clone(),f.b=d.b.clone(),f.c=d.c.clone(),s.vertexNormals.push(f);if(E[h].faceNormals!==void 0)for(s.faceNormals=[],c=0,n=E[h].faceNormals.length;c<n;c++)s.faceNormals.push(E[h].faceNormals[c].clone());this.morphNormals.push(s)}for(c=t.skinWeights,h=0,r=c.length;h<r;h++)this.skinWeights.push(c[h].clone());for(c=t.skinIndices,h=0,r=c.length;h<r;h++)this.skinIndices.push(c[h].clone());for(c=t.lineDistances,h=0,r=c.length;h<r;h++)this.lineDistances.push(c[h]);return h=t.boundingBox,h!==null&&(this.boundingBox=h.clone()),h=t.boundingSphere,h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var o_=function(t){function r(n,s,c,h,d,f){$n(this,r);var x=Ji(this,(r.__proto__||fo(r)).call(this));return x.type="BoxGeometry",x.parameters={width:n,height:s,depth:c,widthSegments:h,heightSegments:d,depthSegments:f},x.fromBufferGeometry(new I1(n,s,c,h,d,f)),x.mergeVertices(),x}return So(r,t),r}(ze),I1=function(t){function r(n,s,c,h,d,f){function x(Z,$,st,ht,Et,It,Bt,Xt,Yt,fe,te){var le=It/Yt,tr=Bt/fe,Me=It/2,xr=Bt/2,br=Xt/2;Bt=Yt+1;for(var _r=fe+1,Gn=It=0,Dr=new gt,Ct=0;Ct<_r;Ct++)for(var Mt=Ct*tr-xr,_t=0;_t<Bt;_t++)Dr[Z]=(_t*le-Me)*ht,Dr[$]=Mt*Et,Dr[st]=br,I.push(Dr.x,Dr.y,Dr.z),Dr[Z]=0,Dr[$]=0,Dr[st]=0<Xt?1:-1,S.push(Dr.x,Dr.y,Dr.z),F.push(_t/Yt),F.push(1-Ct/fe),It+=1;for(Z=0;Z<fe;Z++)for($=0;$<Yt;$++)st=D+$+Bt*(Z+1),ht=D+($+1)+Bt*(Z+1),Et=D+($+1)+Bt*Z,C.push(D+$+Bt*Z,st,Et),C.push(st,ht,Et),Gn+=6;N.addGroup(K,Gn,te),K+=Gn,D+=It}$n(this,r);var E=Ji(this,(r.__proto__||fo(r)).call(this));E.type="BoxBufferGeometry",E.parameters={width:n,height:s,depth:c,widthSegments:h,heightSegments:d,depthSegments:f};var N=E;n=n||1,s=s||1,c=c||1,h=Math.floor(h)||1,d=Math.floor(d)||1,f=Math.floor(f)||1;var C=[],I=[],S=[],F=[],D=0,K=0;return x("z","y","x",-1,-1,c,s,n,f,d,0),x("z","y","x",1,-1,c,s,-n,f,d,1),x("x","z","y",1,1,n,c,s,h,f,2),x("x","z","y",1,-1,n,c,-s,h,f,3),x("x","y","z",1,-1,n,s,c,h,d,4),x("x","y","z",-1,-1,n,s,-c,h,d,5),E.setIndex(C),E.setAttribute("position",new or(I,3)),E.setAttribute("normal",new or(S,3)),E.setAttribute("uv",new or(F,2)),E}return So(r,t),r}(sr),lg={clone:Sr,merge:ar};gr.prototype=pt(hn.prototype),gr.prototype.constructor=gr,gr.prototype.isShaderMaterial=!0,gr.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Sr(t.uniforms),this.defines=dt({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=dt({},t.extensions),this},gr.prototype.toJSON=function(t){var r=hn.prototype.toJSON.call(this,t);r.uniforms={};for(var n in this.uniforms){var s=this.uniforms[n].value;r.uniforms[n]=s&&s.isTexture?{type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?{type:"c",value:s.getHex()}:s&&s.isVector2?{type:"v2",value:s.toArray()}:s&&s.isVector3?{type:"v3",value:s.toArray()}:s&&s.isVector4?{type:"v4",value:s.toArray()}:s&&s.isMatrix3?{type:"m3",value:s.toArray()}:s&&s.isMatrix4?{type:"m4",value:s.toArray()}:{value:s}}0<Xi(this.defines).length&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,t={};for(var c in this.extensions)this.extensions[c]===!0&&(t[c]=!0);return 0<Xi(t).length&&(r.extensions=t),r},un.prototype=dt(pt(Oe.prototype),{constructor:un,isCamera:!0,copy:function(t,r){return Oe.prototype.copy.call(this,t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new gt),this.updateMatrixWorld(!0);var r=this.matrixWorld.elements;return t.set(-r[8],-r[9],-r[10]).normalize()},updateMatrixWorld:function(t){Oe.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,r){Oe.prototype.updateWorldMatrix.call(this,t,r),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),Wr.prototype=dt(pt(un.prototype),{constructor:Wr,isPerspectiveCamera:!0,copy:function(t,r){return un.prototype.copy.call(this,t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:dt({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*Jr.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Jr.DEG2RAD*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Jr.RAD2DEG*Math.atan(Math.tan(.5*Jr.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,r,n,s,c,h){this.aspect=t/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=s,this.view.width=c,this.view.height=h,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,r=t*Math.tan(.5*Jr.DEG2RAD*this.fov)/this.zoom,n=2*r,s=this.aspect*n,c=-.5*s,h=this.view;if(this.view!==null&&this.view.enabled){var d=h.fullWidth,f=h.fullHeight;c+=h.offsetX*s/d,r-=h.offsetY*n/f,s*=h.width/d,n*=h.height/f}h=this.filmOffset,h!==0&&(c+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+s,r,r-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return t=Oe.prototype.toJSON.call(this,t),t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=dt({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Yr.prototype=pt(Oe.prototype),Yr.prototype.constructor=Yr,ri.prototype=pt(Zt.prototype),ri.prototype.constructor=ri,ri.prototype.isWebGLCubeRenderTarget=!0,ri.prototype.fromEquirectangularTexture=function(t,r){this.texture.type=r.type,this.texture.format=r.format,this.texture.encoding=r.encoding;var n=new Nn,s=new gr({type:"CubemapFromEquirect",uniforms:Sr({tEquirect:{value:null}}),vertexShader:`varying vec3 vWorldDirection;
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragmentShader:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
}`,side:1,blending:0});return s.uniforms.tEquirect.value=r,r=new $i(new I1(5,5,5),s),n.add(r),new Yr(1,10,this).update(t,n),r.geometry.dispose(),r.material.dispose(),this},Vn.prototype=pt(bt.prototype),Vn.prototype.constructor=Vn,Vn.prototype.isDataTexture=!0;var km=new mo,T1=new gt;dt(Pn.prototype,{set:function(t,r,n,s,c,h){var d=this.planes;return d[0].copy(t),d[1].copy(r),d[2].copy(n),d[3].copy(s),d[4].copy(c),d[5].copy(h),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){for(var r=this.planes,n=0;6>n;n++)r[n].copy(t.planes[n]);return this},setFromProjectionMatrix:function(t){var r=this.planes,n=t.elements;t=n[0];var s=n[1],c=n[2],h=n[3],d=n[4],f=n[5],x=n[6],E=n[7],N=n[8],C=n[9],I=n[10],S=n[11],F=n[12],D=n[13],K=n[14];return n=n[15],r[0].setComponents(h-t,E-d,S-N,n-F).normalize(),r[1].setComponents(h+t,E+d,S+N,n+F).normalize(),r[2].setComponents(h+s,E+f,S+C,n+D).normalize(),r[3].setComponents(h-s,E-f,S-C,n-D).normalize(),r[4].setComponents(h-c,E-x,S-I,n-K).normalize(),r[5].setComponents(h+c,E+x,S+I,n+K).normalize(),this},intersectsObject:function(t){var r=t.geometry;return r.boundingSphere===null&&r.computeBoundingSphere(),km.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(km)},intersectsSprite:function(t){return km.center.set(0,0,0),km.radius=.7071067811865476,km.applyMatrix4(t.matrixWorld),this.intersectsSphere(km)},intersectsSphere:function(t){var r=this.planes,n=t.center;t=-t.radius;for(var s=0;6>s;s++)if(r[s].distanceToPoint(n)<t)return!1;return!0},intersectsBox:function(t){for(var r=this.planes,n=0;6>n;n++){var s=r[n];if(T1.x=0<s.normal.x?t.max.x:t.min.x,T1.y=0<s.normal.y?t.max.y:t.min.y,T1.z=0<s.normal.z?t.max.z:t.min.z,0>s.distanceToPoint(T1))return!1}return!0},containsPoint:function(t){for(var r=this.planes,n=0;6>n;n++)if(0>r[n].distanceToPoint(t))return!1;return!0}});var Hr={common:{diffuse:{value:new Je(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new kt},uv2Transform:{value:new kt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ct(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Je(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new kt}},sprite:{diffuse:{value:new Je(15658734)},opacity:{value:1},center:{value:new ct(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new kt}}};jr.prototype=pt(ze.prototype),jr.prototype.constructor=jr,qr.prototype=pt(sr.prototype),qr.prototype.constructor=qr;var Ri={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex:`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common:`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin:`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps:`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment:`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex:`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag:`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag:`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert:`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`},Pf={basic:{uniforms:ar([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.fog]),vertexShader:Ri.meshbasic_vert,fragmentShader:Ri.meshbasic_frag},lambert:{uniforms:ar([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.fog,Hr.lights,{emissive:{value:new Je(0)}}]),vertexShader:Ri.meshlambert_vert,fragmentShader:Ri.meshlambert_frag},phong:{uniforms:ar([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.fog,Hr.lights,{emissive:{value:new Je(0)},specular:{value:new Je(1118481)},shininess:{value:30}}]),vertexShader:Ri.meshphong_vert,fragmentShader:Ri.meshphong_frag},standard:{uniforms:ar([Hr.common,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.roughnessmap,Hr.metalnessmap,Hr.fog,Hr.lights,{emissive:{value:new Je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ri.meshphysical_vert,fragmentShader:Ri.meshphysical_frag},toon:{uniforms:ar([Hr.common,Hr.specularmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.gradientmap,Hr.fog,Hr.lights,{emissive:{value:new Je(0)},specular:{value:new Je(1118481)},shininess:{value:30}}]),vertexShader:Ri.meshtoon_vert,fragmentShader:Ri.meshtoon_frag},matcap:{uniforms:ar([Hr.common,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.fog,{matcap:{value:null}}]),vertexShader:Ri.meshmatcap_vert,fragmentShader:Ri.meshmatcap_frag},points:{uniforms:ar([Hr.points,Hr.fog]),vertexShader:Ri.points_vert,fragmentShader:Ri.points_frag},dashed:{uniforms:ar([Hr.common,Hr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ri.linedashed_vert,fragmentShader:Ri.linedashed_frag},depth:{uniforms:ar([Hr.common,Hr.displacementmap]),vertexShader:Ri.depth_vert,fragmentShader:Ri.depth_frag},normal:{uniforms:ar([Hr.common,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,{opacity:{value:1}}]),vertexShader:Ri.normal_vert,fragmentShader:Ri.normal_frag},sprite:{uniforms:ar([Hr.sprite,Hr.fog]),vertexShader:Ri.sprite_vert,fragmentShader:Ri.sprite_frag},background:{uniforms:{uvTransform:{value:new kt},t2D:{value:null}},vertexShader:Ri.background_vert,fragmentShader:Ri.background_frag},cube:{uniforms:ar([Hr.envmap,{opacity:{value:1}}]),vertexShader:Ri.cube_vert,fragmentShader:Ri.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ri.equirect_vert,fragmentShader:Ri.equirect_frag},distanceRGBA:{uniforms:ar([Hr.common,Hr.displacementmap,{referencePosition:{value:new gt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ri.distanceRGBA_vert,fragmentShader:Ri.distanceRGBA_frag},shadow:{uniforms:ar([Hr.lights,Hr.fog,{color:{value:new Je(0)},opacity:{value:1}}]),vertexShader:Ri.shadow_vert,fragmentShader:Ri.shadow_frag}};Pf.physical={uniforms:ar([Pf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ct(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Je(0)},transparency:{value:0}}]),vertexShader:Ri.meshphysical_vert,fragmentShader:Ri.meshphysical_frag},Oi.prototype=pt(bt.prototype),Oi.prototype.constructor=Oi,Oi.prototype.isCubeTexture=!0,Object.defineProperty(Oi.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),wi.prototype=pt(bt.prototype),wi.prototype.constructor=wi,wi.prototype.isDataTexture2DArray=!0,Fe.prototype=pt(bt.prototype),Fe.prototype.constructor=Fe,Fe.prototype.isDataTexture3D=!0;var BC=new bt,s_=new wi,a_=new Fe,EC=new Oi,IC=[],TC=[],SC=new Float32Array(16),LC=new Float32Array(9),FC=new Float32Array(4);da.prototype.updateCache=function(t){var r=this.cache;t instanceof Float32Array&&r.length!==t.length&&(this.cache=new Float32Array(t.length)),Ni(r,t)},bh.prototype.setValue=function(t,r,n){for(var s=this.seq,c=0,h=s.length;c!==h;++c){var d=s[c];d.setValue(t,r[d.id],n)}};var Nx=/([\w\d_]+)(\])?(\[|\.)?/g;ga.prototype.setValue=function(t,r,n,s){r=this.map[r],r!==void 0&&r.setValue(t,n,s)},ga.prototype.setOptional=function(t,r,n){r=r[n],r!==void 0&&this.setValue(t,n,r)},ga.upload=function(t,r,n,s){for(var c=0,h=r.length;c!==h;++c){var d=r[c],f=n[d.id];f.needsUpdate!==!1&&d.setValue(t,f.value,s)}},ga.seqWithValue=function(t,r){for(var n=[],s=0,c=t.length;s!==c;++s){var h=t[s];h.id in r&&n.push(h)}return n};var A_=0,zx=/^[ \t]*#include +<([\w\d./]+)>/gm,RC=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,PC=/#pragma unroll_loop_start[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,u_=0;za.prototype=pt(hn.prototype),za.prototype.constructor=za,za.prototype.isMeshDepthMaterial=!0,za.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Ko.prototype=pt(hn.prototype),Ko.prototype.constructor=Ko,Ko.prototype.isMeshDistanceMaterial=!0,Ko.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Wh.prototype=dt(pt(Wr.prototype),{constructor:Wh,isArrayCamera:!0}),va.prototype=dt(pt(Oe.prototype),{constructor:va,isGroup:!0}),dt(FA.prototype,{constructor:FA,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new va,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new va,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(t,r,n){var s=null,c=null,h=this._targetRay,d=this._grip;return t&&(h!==null&&(s=r.getPose(t.targetRaySpace,n),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale))),d!==null&&t.gripSpace&&(c=r.getPose(t.gripSpace,n),c!==null&&(d.matrix.fromArray(c.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale)))),h!==null&&(h.visible=s!==null),d!==null&&(d.visible=c!==null),this}}),dt(Yo.prototype,ve.prototype),dt(KA.prototype,{isFogExp2:!0,clone:function(){return new KA(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),dt(Ki.prototype,{isFog:!0,clone:function(){return new Ki(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(ya.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),dt(ya.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,r,n){t*=this.stride,n*=r.stride;for(var s=0,c=this.stride;s<c;s++)this.array[t+s]=r.array[n+s];return this},set:function(t,r){return r===void 0&&(r=0),this.array.set(t,r),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});var hg=new gt;vn(Qa.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),dt(Qa.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var r=0,n=this.data.count;r<n;r++)hg.x=this.getX(r),hg.y=this.getY(r),hg.z=this.getZ(r),hg.applyMatrix4(t),this.setXYZ(r,hg.x,hg.y,hg.z);return this},setX:function(t,r){return this.data.array[t*this.data.stride+this.offset]=r,this},setY:function(t,r){return this.data.array[t*this.data.stride+this.offset+1]=r,this},setZ:function(t,r){return this.data.array[t*this.data.stride+this.offset+2]=r,this},setW:function(t,r){return this.data.array[t*this.data.stride+this.offset+3]=r,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,r,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=r,this.data.array[t+1]=n,this},setXYZ:function(t,r,n,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=r,this.data.array[t+1]=n,this.data.array[t+2]=s,this},setXYZW:function(t,r,n,s,c){return t=t*this.data.stride+this.offset,this.data.array[t+0]=r,this.data.array[t+1]=n,this.data.array[t+2]=s,this.data.array[t+3]=c,this},clone:function(){for(var t=[],r=0;r<this.count;r++)for(var n=r*this.data.stride+this.offset,s=0;s<this.itemSize;s++)t.push(this.data.array[n+s]);return new Kr(new this.array.constructor(t),this.itemSize,this.normalized)},toJSON:function(){for(var t=[],r=0;r<this.count;r++)for(var n=r*this.data.stride+this.offset,s=0;s<this.itemSize;s++)t.push(this.data.array[n+s]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}}),tl.prototype=pt(hn.prototype),tl.prototype.constructor=tl,tl.prototype.isSpriteMaterial=!0,tl.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var Gm,h0=new gt,Vm=new gt,Wm=new gt,jm=new ct,c0=new ct,UC=new Qe,S1=new gt,f0=new gt,L1=new gt,DC=new ct,Qx=new ct,OC=new ct;Yl.prototype=dt(pt(Oe.prototype),{constructor:Yl,isSprite:!0,raycast:function(t,r){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Vm.setFromMatrixScale(this.matrixWorld),UC.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Wm.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Vm.multiplyScalar(-Wm.z);var n=this.material.rotation;if(n!==0)var s=Math.cos(n),c=Math.sin(n);n=this.center,Ap(S1.set(-.5,-.5,0),Wm,n,Vm,c,s),Ap(f0.set(.5,-.5,0),Wm,n,Vm,c,s),Ap(L1.set(.5,.5,0),Wm,n,Vm,c,s),DC.set(0,0),Qx.set(1,0),OC.set(1,1);var h=t.ray.intersectTriangle(S1,f0,L1,!1,h0);h===null&&(Ap(f0.set(-.5,.5,0),Wm,n,Vm,c,s),Qx.set(0,1),h=t.ray.intersectTriangle(S1,L1,f0,!1,h0),h===null)||(c=t.ray.origin.distanceTo(h0),c<t.near||c>t.far||r.push({distance:c,point:h0.clone(),uv:Ui.getUV(h0,S1,f0,L1,DC,Qx,OC,new ct),face:null,object:this}))},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Oe.prototype.copy.call(this,t),t.center!==void 0&&this.center.copy(t.center),this}});var F1=new gt,HC=new gt;js.prototype=dt(pt(Oe.prototype),{constructor:js,isLOD:!0,copy:function(t){Oe.prototype.copy.call(this,t,!1);for(var r=t.levels,n=0,s=r.length;n<s;n++){var c=r[n];this.addLevel(c.object.clone(),c.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,r){r===void 0&&(r=0),r=Math.abs(r);for(var n=this.levels,s=0;s<n.length&&!(r<n[s].distance);s++);return n.splice(s,0,{distance:r,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var r=this.levels;if(0<r.length){for(var n=1,s=r.length;n<s&&!(t<r[n].distance);n++);return r[n-1].object}return null},raycast:function(t,r){if(0<this.levels.length){F1.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(F1);this.getObjectForDistance(n).raycast(t,r)}},update:function(t){var r=this.levels;if(1<r.length){F1.setFromMatrixPosition(t.matrixWorld),HC.setFromMatrixPosition(this.matrixWorld),t=F1.distanceTo(HC)/t.zoom,r[0].object.visible=!0;for(var n=1,s=r.length;n<s&&t>=r[n].distance;n++)r[n-1].object.visible=!1,r[n].object.visible=!0;for(this._currentLevel=n-1;n<s;n++)r[n].object.visible=!1}},toJSON:function(t){t=Oe.prototype.toJSON.call(this,t),this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,n=0,s=r.length;n<s;n++){var c=r[n];t.object.levels.push({object:c.object.uuid,distance:c.distance})}return t}}),xa.prototype=dt(pt($i.prototype),{constructor:xa,isSkinnedMesh:!0,bind:function(t,r){this.skeleton=t,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.getInverse(r)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Ht,r=this.geometry.attributes.skinWeight,n=0,s=r.count;n<s;n++){t.x=r.getX(n),t.y=r.getY(n),t.z=r.getZ(n),t.w=r.getW(n);var c=1/t.manhattanLength();c!==Infinity?t.multiplyScalar(c):t.set(1,0,0,0),r.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){$i.prototype.updateMatrixWorld.call(this,t),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var t=new gt,r=new Ht,n=new Ht,s=new gt,c=new Qe;return function(h,d){var f=this.skeleton,x=this.geometry;for(r.fromBufferAttribute(x.attributes.skinIndex,h),n.fromBufferAttribute(x.attributes.skinWeight,h),t.fromBufferAttribute(x.attributes.position,h).applyMatrix4(this.bindMatrix),d.set(0,0,0),h=0;4>h;h++)if(x=n.getComponent(h),x!==0){var E=r.getComponent(h);c.multiplyMatrices(f.bones[E].matrixWorld,f.boneInverses[E]),d.addScaledVector(s.copy(t).applyMatrix4(c),x)}return d.applyMatrix4(this.bindMatrixInverse)}}()});var NC=new Qe,l_=new Qe;dt(na.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,r=this.bones.length;t<r;t++){var n=new Qe;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,r,n=0;for(r=this.bones.length;n<r;n++)(t=this.bones[n])&&t.matrixWorld.getInverse(this.boneInverses[n]);for(n=0,r=this.bones.length;n<r;n++)(t=this.bones[n])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,r=this.boneInverses,n=this.boneMatrices,s=this.boneTexture,c=0,h=t.length;c<h;c++)NC.multiplyMatrices(t[c]?t[c].matrixWorld:l_,r[c]),NC.toArray(n,16*c);s!==void 0&&(s.needsUpdate=!0)},clone:function(){return new na(this.bones,this.boneInverses)},getBoneByName:function(t){for(var r=0,n=this.bones.length;r<n;r++){var s=this.bones[r];if(s.name===t)return s}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),os.prototype=dt(pt(Oe.prototype),{constructor:os,isBone:!0});var zC=new Qe,QC=new Qe,R1=[],p0=new $i;Xr.prototype=dt(pt($i.prototype),{constructor:Xr,isInstancedMesh:!0,getMatrixAt:function(t,r){r.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,r){var n=this.matrixWorld,s=this.count;if(p0.geometry=this.geometry,p0.material=this.material,p0.material!==void 0)for(var c=0;c<s;c++){this.getMatrixAt(c,zC),QC.multiplyMatrices(n,zC),p0.matrixWorld=QC,p0.raycast(t,R1);for(var h=0,d=R1.length;h<d;h++){var f=R1[h];f.instanceId=c,f.object=this,r.push(f)}R1.length=0}},setMatrixAt:function(t,r){r.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),pi.prototype=pt(hn.prototype),pi.prototype.constructor=pi,pi.prototype.isLineBasicMaterial=!0,pi.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};var bC=new gt,kC=new gt,GC=new Qe,P1=new ns,U1=new mo;Xs.prototype=dt(pt(Oe.prototype),{constructor:Xs,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var r=t.attributes.position,n=[0],s=1,c=r.count;s<c;s++)bC.fromBufferAttribute(r,s-1),kC.fromBufferAttribute(r,s),n[s]=n[s-1],n[s]+=bC.distanceTo(kC);t.setAttribute("lineDistance",new or(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(r=t.vertices,n=t.lineDistances,n[0]=0,s=1,c=r.length;s<c;s++)n[s]=n[s-1],n[s]+=r[s-1].distanceTo(r[s]);return this},raycast:function(t,r){var n=this.geometry,s=this.matrixWorld,c=t.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),U1.copy(n.boundingSphere),U1.applyMatrix4(s),U1.radius+=c,t.ray.intersectsSphere(U1)!==!1){GC.getInverse(s),P1.copy(t.ray).applyMatrix4(GC),s=c/((this.scale.x+this.scale.y+this.scale.z)/3),s*=s;var h=new gt,d=new gt;c=new gt;var f=new gt,x=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var E=n.index,N=n.attributes.position.array;if(E!==null){E=E.array,n=0;for(var C=E.length-1;n<C;n+=x){var I=E[n+1];h.fromArray(N,3*E[n]),d.fromArray(N,3*I),I=P1.distanceSqToSegment(h,d,f,c),I>s||(f.applyMatrix4(this.matrixWorld),I=t.ray.origin.distanceTo(f),I<t.near||I>t.far||r.push({distance:I,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}else for(n=0,C=N.length/3-1;n<C;n+=x)h.fromArray(N,3*n),d.fromArray(N,3*n+3),I=P1.distanceSqToSegment(h,d,f,c),I>s||(f.applyMatrix4(this.matrixWorld),I=t.ray.origin.distanceTo(f),I<t.near||I>t.far||r.push({distance:I,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(n.isGeometry)for(h=n.vertices,d=h.length,n=0;n<d-1;n+=x)I=P1.distanceSqToSegment(h[n],h[n+1],f,c),I>s||(f.applyMatrix4(this.matrixWorld),I=t.ray.origin.distanceTo(f),I<t.near||I>t.far||r.push({distance:I,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var r=Xi(t);if(0<r.length){var n=t[r[0]];if(n!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,r=n.length;t<r;t++){var s=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=t}}}else t=t.morphTargets,t!==void 0&&0<t.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var D1=new gt,O1=new gt;uo.prototype=dt(pt(Xs.prototype),{constructor:uo,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var r=t.attributes.position,n=[],s=0,c=r.count;s<c;s+=2)D1.fromBufferAttribute(r,s),O1.fromBufferAttribute(r,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+D1.distanceTo(O1);t.setAttribute("lineDistance",new or(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(r=t.vertices,n=t.lineDistances,s=0,c=r.length;s<c;s+=2)D1.copy(r[s]),O1.copy(r[s+1]),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+D1.distanceTo(O1);return this}}),_o.prototype=dt(pt(Xs.prototype),{constructor:_o,isLineLoop:!0}),ba.prototype=pt(hn.prototype),ba.prototype.constructor=ba,ba.prototype.isPointsMaterial=!0,ba.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var VC=new Qe,bx=new ns,H1=new mo,N1=new gt;xu.prototype=dt(pt(Oe.prototype),{constructor:xu,isPoints:!0,raycast:function(t,r){var n=this.geometry,s=this.matrixWorld,c=t.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),H1.copy(n.boundingSphere),H1.applyMatrix4(s),H1.radius+=c,t.ray.intersectsSphere(H1)!==!1)if(VC.getInverse(s),bx.copy(t.ray).applyMatrix4(VC),c/=(this.scale.x+this.scale.y+this.scale.z)/3,c*=c,n.isBufferGeometry){var h=n.index;if(n=n.attributes.position.array,h!==null){var d=h.array;h=0;for(var f=d.length;h<f;h++){var x=d[h];N1.fromArray(n,3*x),jh(N1,x,c,s,t,r,this)}}else for(h=0,d=n.length/3;h<d;h++)N1.fromArray(n,3*h),jh(N1,h,c,s,t,r,this)}else for(n=n.vertices,h=0,d=n.length;h<d;h++)jh(n[h],h,c,s,t,r,this)},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var r=Xi(t);if(0<r.length){var n=t[r[0]];if(n!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,r=n.length;t<r;t++){var s=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=t}}}else t=t.morphTargets,t!==void 0&&0<t.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Yg.prototype=dt(pt(bt.prototype),{constructor:Yg,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Gc.prototype=pt(bt.prototype),Gc.prototype.constructor=Gc,Gc.prototype.isCompressedTexture=!0,up.prototype=pt(bt.prototype),up.prototype.constructor=up,up.prototype.isCanvasTexture=!0,ln.prototype=pt(bt.prototype),ln.prototype.constructor=ln,ln.prototype.isDepthTexture=!0,Vc.prototype=pt(sr.prototype),Vc.prototype.constructor=Vc,lp.prototype=pt(ze.prototype),lp.prototype.constructor=lp,Xh.prototype=pt(sr.prototype),Xh.prototype.constructor=Xh,hp.prototype=pt(ze.prototype),hp.prototype.constructor=hp,Zo.prototype=pt(sr.prototype),Zo.prototype.constructor=Zo,Er.prototype=pt(ze.prototype),Er.prototype.constructor=Er,Wc.prototype=pt(Zo.prototype),Wc.prototype.constructor=Wc,cp.prototype=pt(ze.prototype),cp.prototype.constructor=cp,wa.prototype=pt(Zo.prototype),wa.prototype.constructor=wa,Bo.prototype=pt(ze.prototype),Bo.prototype.constructor=Bo,jc.prototype=pt(Zo.prototype),jc.prototype.constructor=jc,mr.prototype=pt(ze.prototype),mr.prototype.constructor=mr,Ca.prototype=pt(Zo.prototype),Ca.prototype.constructor=Ca,Kh.prototype=pt(ze.prototype),Kh.prototype.constructor=Kh,el.prototype=pt(sr.prototype),el.prototype.constructor=el,el.prototype.toJSON=function(){var t=sr.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},Zl.prototype=pt(ze.prototype),Zl.prototype.constructor=Zl,wu.prototype=pt(sr.prototype),wu.prototype.constructor=wu,RA.prototype=pt(ze.prototype),RA.prototype.constructor=RA,di.prototype=pt(sr.prototype),di.prototype.constructor=di;var h_={triangulate:function(t,r,n){n=n||2;var s=r&&r.length,c=s?r[0]*n:t.length,h=Cu(t,0,c,n,!0),d=[];if(!h||h.next===h.prev)return d;var f;if(s){var x=n;s=[];var E,N=0;for(E=r.length;N<E;N++){var C=r[N]*x,I=N<E-1?r[N+1]*x:t.length;C=Cu(t,C,I,x,!1),C===C.next&&(C.steiner=!0),s.push(Uo(C))}for(s.sort(Ks),N=0;N<s.length;N++)x=s[N],r=h,(r=Zg(x,r))&&(x=Xc(r,x),eo(r,r.next),eo(x,x.next)),h=eo(h,h.next)}if(t.length>80*n){var S=f=t[0],F=s=t[1];for(x=n;x<c;x+=n)N=t[x],r=t[x+1],N<S&&(S=N),r<F&&(F=r),N>f&&(f=N),r>s&&(s=r);f=Math.max(f-S,s-F),f=f!==0?1/f:0}return Yh(h,d,n,S,F,f),d}},sd={area:function(t){for(var r=t.length,n=0,s=r-1,c=0;c<r;s=c++)n+=t[s].x*t[c].y-t[c].x*t[s].y;return .5*n},isClockWise:function(t){return 0>sd.area(t)},triangulateShape:function(t,r){var n=[],s=[],c=[];Zh(t),Fd(n,t);var h=t.length;for(r.forEach(Zh),t=0;t<r.length;t++)s.push(h),h+=r[t].length,Fd(n,r[t]);for(r=h_.triangulate(n,s),t=0;t<r.length;t+=3)c.push(r.slice(t,t+3));return c}};Go.prototype=pt(ze.prototype),Go.prototype.constructor=Go,Go.prototype.toJSON=function(){var t=ze.prototype.toJSON.call(this);return Bu(this.parameters.shapes,this.parameters.options,t)},ss.prototype=pt(sr.prototype),ss.prototype.constructor=ss,ss.prototype.toJSON=function(){var t=sr.prototype.toJSON.call(this);return Bu(this.parameters.shapes,this.parameters.options,t)};var c_={generateTopUV:function(t,r,n,s,c){t=r[3*s],s=r[3*s+1];var h=r[3*c];return c=r[3*c+1],[new ct(r[3*n],r[3*n+1]),new ct(t,s),new ct(h,c)]},generateSideWallUV:function(t,r,n,s,c,h){t=r[3*n];var d=r[3*n+1];n=r[3*n+2];var f=r[3*s],x=r[3*s+1];s=r[3*s+2];var E=r[3*c],N=r[3*c+1];c=r[3*c+2];var C=r[3*h],I=r[3*h+1];return r=r[3*h+2],.01>Math.abs(d-x)?[new ct(t,1-n),new ct(f,1-s),new ct(E,1-c),new ct(C,1-r)]:[new ct(d,1-n),new ct(x,1-s),new ct(N,1-c),new ct(I,1-r)]}};Eo.prototype=pt(ze.prototype),Eo.prototype.constructor=Eo,Ma.prototype=pt(ss.prototype),Ma.prototype.constructor=Ma,Yc.prototype=pt(ze.prototype),Yc.prototype.constructor=Yc,il.prototype=pt(sr.prototype),il.prototype.constructor=il,th.prototype=pt(ze.prototype),th.prototype.constructor=th,Jh.prototype=pt(sr.prototype),Jh.prototype.constructor=Jh,Zc.prototype=pt(ze.prototype),Zc.prototype.constructor=Zc,ZA.prototype=pt(sr.prototype),ZA.prototype.constructor=ZA,oa.prototype=pt(ze.prototype),oa.prototype.constructor=oa,oa.prototype.toJSON=function(){var t=ze.prototype.toJSON.call(this);return Jg(this.parameters.shapes,t)},Eu.prototype=pt(sr.prototype),Eu.prototype.constructor=Eu,Eu.prototype.toJSON=function(){var t=sr.prototype.toJSON.call(this);return Jg(this.parameters.shapes,t)},ol.prototype=pt(sr.prototype),ol.prototype.constructor=ol,ka.prototype=pt(ze.prototype),ka.prototype.constructor=ka,Iu.prototype=pt(sr.prototype),Iu.prototype.constructor=Iu,Fs.prototype=pt(ka.prototype),Fs.prototype.constructor=Fs,Rs.prototype=pt(Iu.prototype),Rs.prototype.constructor=Rs,sl.prototype=pt(ze.prototype),sl.prototype.constructor=sl,gs.prototype=pt(sr.prototype),gs.prototype.constructor=gs;var bA=bi({__proto__:null,WireframeGeometry:Vc,ParametricGeometry:lp,ParametricBufferGeometry:Xh,TetrahedronGeometry:Er,TetrahedronBufferGeometry:Wc,OctahedronGeometry:cp,OctahedronBufferGeometry:wa,IcosahedronGeometry:Bo,IcosahedronBufferGeometry:jc,DodecahedronGeometry:mr,DodecahedronBufferGeometry:Ca,PolyhedronGeometry:hp,PolyhedronBufferGeometry:Zo,TubeGeometry:Kh,TubeBufferGeometry:el,TorusKnotGeometry:Zl,TorusKnotBufferGeometry:wu,TorusGeometry:RA,TorusBufferGeometry:di,TextGeometry:Eo,TextBufferGeometry:Ma,SphereGeometry:Yc,SphereBufferGeometry:il,RingGeometry:th,RingBufferGeometry:Jh,PlaneGeometry:jr,PlaneBufferGeometry:qr,LatheGeometry:Zc,LatheBufferGeometry:ZA,ShapeGeometry:oa,ShapeBufferGeometry:Eu,ExtrudeGeometry:Go,ExtrudeBufferGeometry:ss,EdgesGeometry:ol,ConeGeometry:Fs,ConeBufferGeometry:Rs,CylinderGeometry:ka,CylinderBufferGeometry:Iu,CircleGeometry:sl,CircleBufferGeometry:gs,BoxGeometry:o_,BoxBufferGeometry:I1});eh.prototype=pt(hn.prototype),eh.prototype.constructor=eh,eh.prototype.isShadowMaterial=!0,eh.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.color.copy(t.color),this},al.prototype=pt(gr.prototype),al.prototype.constructor=al,al.prototype.isRawShaderMaterial=!0,ms.prototype=pt(hn.prototype),ms.prototype.constructor=ms,ms.prototype.isMeshStandardMaterial=!0,ms.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},Ys.prototype=pt(ms.prototype),Ys.prototype.constructor=Ys,Ys.prototype.isMeshPhysicalMaterial=!0,Ys.prototype.copy=function(t){return ms.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,this.sheen=t.sheen?(this.sheen||new Je).copy(t.sheen):null,this.transparency=t.transparency,this},_a.prototype=pt(hn.prototype),_a.prototype.constructor=_a,_a.prototype.isMeshPhongMaterial=!0,_a.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ps.prototype=pt(hn.prototype),Ps.prototype.constructor=Ps,Ps.prototype.isMeshToonMaterial=!0,Ps.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},oA.prototype=pt(hn.prototype),oA.prototype.constructor=oA,oA.prototype.isMeshNormalMaterial=!0,oA.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Tu.prototype=pt(hn.prototype),Tu.prototype.constructor=Tu,Tu.prototype.isMeshLambertMaterial=!0,Tu.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Su.prototype=pt(hn.prototype),Su.prototype.constructor=Su,Su.prototype.isMeshMatcapMaterial=!0,Su.prototype.copy=function(t){return hn.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Lu.prototype=pt(pi.prototype),Lu.prototype.constructor=Lu,Lu.prototype.isLineDashedMaterial=!0,Lu.prototype.copy=function(t){return pi.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var f_=bi({__proto__:null,ShadowMaterial:eh,SpriteMaterial:tl,RawShaderMaterial:al,ShaderMaterial:gr,PointsMaterial:ba,MeshPhysicalMaterial:Ys,MeshStandardMaterial:ms,MeshPhongMaterial:_a,MeshToonMaterial:Ps,MeshNormalMaterial:oA,MeshLambertMaterial:Tu,MeshDepthMaterial:za,MeshDistanceMaterial:Ko,MeshBasicMaterial:Qo,MeshMatcapMaterial:Su,LineDashedMaterial:Lu,LineBasicMaterial:pi,Material:hn}),fs={arraySlice:function(t,r,n){return fs.isTypedArray(t)?new t.constructor(t.subarray(r,n!==void 0?n:t.length)):t.slice(r,n)},convertArray:function(t,r,n){return!t||!n&&t.constructor===r?t:typeof r.BYTES_PER_ELEMENT=="number"?new r(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var r=t.length,n=Array(r),s=0;s!==r;++s)n[s]=s;return n.sort(function(c,h){return t[c]-t[h]}),n},sortedArray:function(t,r,n){for(var s=t.length,c=new t.constructor(s),h=0,d=0;d!==s;++h)for(var f=n[h]*r,x=0;x!==r;++x)c[d++]=t[f+x];return c},flattenJSON:function(t,r,n,s){for(var c=1,h=t[0];h!==void 0&&h[s]===void 0;)h=t[c++];if(h!==void 0){var d=h[s];if(d!==void 0)if(Array.isArray(d))do d=h[s],d!==void 0&&(r.push(h.time),n.push.apply(n,d)),h=t[c++];while(h!==void 0);else if(d.toArray!==void 0)do d=h[s],d!==void 0&&(r.push(h.time),d.toArray(n,n.length)),h=t[c++];while(h!==void 0);else do d=h[s],d!==void 0&&(r.push(h.time),n.push(d)),h=t[c++];while(h!==void 0)}},subclip:function(t,r,n,s,c){c=c||30,t=t.clone(),t.name=r;var h=[];for(r=0;r<t.tracks.length;++r){for(var d=t.tracks[r],f=d.getValueSize(),x=[],E=[],N=0;N<d.times.length;++N){var C=d.times[N]*c;if(!(C<n||C>=s))for(x.push(d.times[N]),C=0;C<f;++C)E.push(d.values[N*f+C])}x.length!==0&&(d.times=fs.convertArray(x,d.times.constructor),d.values=fs.convertArray(E,d.values.constructor),h.push(d))}for(t.tracks=h,n=Infinity,r=0;r<t.tracks.length;++r)n>t.tracks[r].times[0]&&(n=t.tracks[r].times[0]);for(r=0;r<t.tracks.length;++r)t.tracks[r].shift(-1*n);return t.resetDuration(),t},makeClipAdditive:function(t,r,n,s){r===void 0&&(r=0),n===void 0&&(n=t),(s===void 0||0>=s)&&(s=30);var c=t.tracks.length;for(r/=s,s=0;s<c;++s){var h=n.tracks[s],d=h.ValueTypeName;if(d!=="bool"&&d!=="string"){var f=t.tracks.find(function(F){return F.name===h.name&&F.ValueTypeName===d});if(f!==void 0){var x=h.getValueSize(),E=h.times.length-1;r<=h.times[0]?E=fs.arraySlice(h.values,0,h.valueSize):r>=h.times[E]?E=fs.arraySlice(h.values,E*x):(E=h.createInterpolant(),E.evaluate(r),E=E.resultBuffer),d==="quaternion"&&new Ee(E[0],E[1],E[2],E[3]).normalize().conjugate().toArray(E);for(var N=f.times.length,C=0;C<N;++C){var I=C*x;if(d==="quaternion")Ee.multiplyQuaternionsFlat(f.values,I,E,0,f.values,I);else for(var S=0;S<x;++S)f.values[I+S]-=E[S]}}}}return t.blendMode=2501,t}};dt(Zs.prototype,{evaluate:function(t){var r=this.parameterPositions,n=this._cachedIndex,s=r[n],c=r[n-1];t:{e:{r:{n:if(!(t<s)){for(var h=n+2;;){if(s===void 0){if(t<c)break n;return this._cachedIndex=n=r.length,this.afterEnd_(n-1,t,c)}if(n===h)break;if(c=s,s=r[++n],t<s)break e}s=r.length;break r}if(t>=c)break t;for(h=r[1],t<h&&(n=2,c=h),h=n-2;;){if(c===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,s);if(n===h)break;if(s=c,c=r[--n-1],t>=c)break e}s=n,n=0}for(;n<s;)c=n+s>>>1,t<r[c]?s=c:n=c+1;if(s=r[n],c=r[n-1],c===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,s);if(s===void 0)return this._cachedIndex=n=r.length,this.afterEnd_(n-1,c,t)}this._cachedIndex=n,this.intervalChanged_(n,c,s)}return this.interpolate_(n,c,t,s)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var r=this.resultBuffer,n=this.sampleValues,s=this.valueSize;t*=s;for(var c=0;c!==s;++c)r[c]=n[t+c];return r},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),dt(Zs.prototype,{beforeStart_:Zs.prototype.copySampleValue_,afterEnd_:Zs.prototype.copySampleValue_}),Jc.prototype=dt(pt(Zs.prototype),{constructor:Jc,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,r,n){var s=this.parameterPositions,c=t-2,h=t+1,d=s[c],f=s[h];if(d===void 0)switch(this.getSettings_().endingStart){case 2401:c=t,d=2*r-n;break;case 2402:c=s.length-2,d=r+s[c]-s[c+1];break;default:c=t,d=n}if(f===void 0)switch(this.getSettings_().endingEnd){case 2401:h=t,f=2*n-r;break;case 2402:h=1,f=n+s[1]-s[0];break;default:h=t-1,f=r}t=.5*(n-r),s=this.valueSize,this._weightPrev=t/(r-d),this._weightNext=t/(f-n),this._offsetPrev=c*s,this._offsetNext=h*s},interpolate_:function(t,r,n,s){var c=this.resultBuffer,h=this.sampleValues,d=this.valueSize;t*=d;var f=t-d,x=this._offsetPrev,E=this._offsetNext,N=this._weightPrev,C=this._weightNext,I=(n-r)/(s-r);for(n=I*I,s=n*I,r=-N*s+2*N*n-N*I,N=(1+N)*s+(-1.5-2*N)*n+(-.5+N)*I+1,I=(-1-C)*s+(1.5+C)*n+.5*I,C=C*s-C*n,n=0;n!==d;++n)c[n]=r*h[x+n]+N*h[f+n]+I*h[t+n]+C*h[E+n];return c}}),JA.prototype=dt(pt(Zs.prototype),{constructor:JA,interpolate_:function(t,r,n,s){var c=this.resultBuffer,h=this.sampleValues,d=this.valueSize;t*=d;var f=t-d;for(r=(n-r)/(s-r),n=1-r,s=0;s!==d;++s)c[s]=h[f+s]*n+h[t+s]*r;return c}}),fp.prototype=dt(pt(Zs.prototype),{constructor:fp,interpolate_:function(t){return this.copySampleValue_(t-1)}}),dt(Js,{toJSON:function(t){var r=t.constructor;if(r.toJSON!==void 0)r=r.toJSON(t);else{r={name:t.name,times:fs.convertArray(t.times,Array),values:fs.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(r.interpolation=n)}return r.type=t.ValueTypeName,r}}),dt(Js.prototype,{constructor:Js,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new fp(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new JA(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Jc(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var r=this.InterpolantFactoryMethodDiscrete;break;case 2301:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(r===void 0){if(r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=r,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(t!==0)for(var r=this.times,n=0,s=r.length;n!==s;++n)r[n]+=t;return this},scale:function(t){if(t!==1)for(var r=this.times,n=0,s=r.length;n!==s;++n)r[n]*=t;return this},trim:function(t,r){for(var n=this.times,s=n.length,c=0,h=s-1;c!==s&&n[c]<t;)++c;for(;h!==-1&&n[h]>r;)--h;return++h,(c!==0||h!==s)&&(c>=h&&(h=Math.max(h,1),c=h-1),t=this.getValueSize(),this.times=fs.arraySlice(n,c,h),this.values=fs.arraySlice(this.values,c*t,h*t)),this},validate:function(){var t=!0,r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times;r=this.values;var s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var c=null,h=0;h!==s;h++){var d=n[h];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,d),t=!1;break}if(c!==null&&c>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,d,c),t=!1;break}c=d}if(r!==void 0&&fs.isTypedArray(r)){for(h=0,n=r.length;h!==n;++h)if(s=r[h],isNaN(s)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,s),t=!1;break}}return t},optimize:function(){for(var t=fs.arraySlice(this.times),r=fs.arraySlice(this.values),n=this.getValueSize(),s=this.getInterpolation()===2302,c=1,h=t.length-1,d=1;d<h;++d){var f=!1,x=t[d];if(x!==t[d+1]&&(d!==1||x!==x[0]))if(s)f=!0;else{var E=d*n,N=E-n,C=E+n;for(x=0;x!==n;++x){var I=r[E+x];if(I!==r[N+x]||I!==r[C+x]){f=!0;break}}}if(f){if(d!==c)for(t[c]=t[d],f=d*n,E=c*n,x=0;x!==n;++x)r[E+x]=r[f+x];++c}}if(0<h){for(t[c]=t[h],f=h*n,E=c*n,x=0;x!==n;++x)r[E+x]=r[f+x];++c}return c!==t.length?(this.times=fs.arraySlice(t,0,c),this.values=fs.arraySlice(r,0,c*n)):(this.times=t,this.values=r),this},clone:function(){var t=fs.arraySlice(this.times,0),r=fs.arraySlice(this.values,0);return t=new this.constructor(this.name,t,r),t.createInterpolant=this.createInterpolant,t}}),qh.prototype=dt(pt(Js.prototype),{constructor:qh,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),pp.prototype=dt(pt(Js.prototype),{constructor:pp,ValueTypeName:"color"}),Al.prototype=dt(pt(Js.prototype),{constructor:Al,ValueTypeName:"number"}),dp.prototype=dt(pt(Zs.prototype),{constructor:dp,interpolate_:function(t,r,n,s){var c=this.resultBuffer,h=this.sampleValues,d=this.valueSize;for(t*=d,r=(n-r)/(s-r),n=t+d;t!==n;t+=4)Ee.slerpFlat(c,0,h,t-d,h,t,r);return c}}),$h.prototype=dt(pt(Js.prototype),{constructor:$h,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new dp(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),gp.prototype=dt(pt(Js.prototype),{constructor:gp,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),rh.prototype=dt(pt(Js.prototype),{constructor:rh,ValueTypeName:"vector"}),dt(sA,{parse:function(t){for(var r=[],n=t.tracks,s=1/(t.fps||1),c=0,h=n.length;c!==h;++c)r.push(qg(n[c]).scale(s));return new sA(t.name,t.duration,r,t.blendMode)},toJSON:function(t){var r=[],n=t.tracks;t={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(var s=0,c=n.length;s!==c;++s)r.push(Js.toJSON(n[s]));return t},CreateFromMorphTargetSequence:function(t,r,n,s){for(var c=r.length,h=[],d=0;d<c;d++){var f=[],x=[];f.push((d+c-1)%c,d,(d+1)%c),x.push(0,1,0);var E=fs.getKeyframeOrder(f);f=fs.sortedArray(f,1,E),x=fs.sortedArray(x,1,E),s||f[0]!==0||(f.push(c),x.push(x[0])),h.push(new Al(".morphTargetInfluences["+r[d].name+"]",f,x).scale(1/n))}return new sA(t,-1,h)},findByName:function(t,r){var n=t;for(Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations),t=0;t<n.length;t++)if(n[t].name===r)return n[t];return null},CreateClipsFromMorphTargetSequences:function(t,r,n){for(var s={},c=/^([\w-]*?)([\d]+)$/,h=0,d=t.length;h<d;h++){var f=t[h],x=f.name.match(c);if(x&&1<x.length){var E=x[1];(x=s[E])||(s[E]=x=[]),x.push(f)}}t=[];for(E in s)t.push(sA.CreateFromMorphTargetSequence(E,s[E],r,n));return t},parseAnimation:function(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var n=function(K,Z,$,st,ht){if($.length!==0){var Et=[],It=[];fs.flattenJSON($,Et,It,st),Et.length!==0&&ht.push(new K(Z,Et,It))}},s=[],c=t.name||"default",h=t.length||-1,d=t.fps||30,f=t.blendMode;t=t.hierarchy||[];for(var x=0;x<t.length;x++){var E=t[x].keys;if(E&&E.length!==0)if(E[0].morphTargets){h={};for(var N=0;N<E.length;N++)if(E[N].morphTargets)for(var C=0;C<E[N].morphTargets.length;C++)h[E[N].morphTargets[C]]=-1;for(var I in h){var S=[],F=[];for(C=0;C!==E[N].morphTargets.length;++C){var D=E[N];S.push(D.time),F.push(D.morphTarget===I?1:0)}s.push(new Al(".morphTargetInfluence["+I+"]",S,F))}h=h.length*(d||1)}else N=".bones["+r[x].name+"]",n(rh,N+".position",E,"pos",s),n($h,N+".quaternion",E,"rot",s),n(rh,N+".scale",E,"scl",s)}return s.length===0?null:new sA(c,h,s,f)}}),dt(sA.prototype,{resetDuration:function(){for(var t=0,r=0,n=this.tracks.length;r!==n;++r){var s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new sA(this.name,this.duration,t,this.blendMode)}});var Xm={enabled:!1,files:{},add:function(t,r){this.enabled!==!1&&(this.files[t]=r)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},WC=new nh;dt(Mn.prototype,{load:function(){},loadAsync:function(t,r){var n=this;return new Ve(function(s,c){n.load(t,s,r,c)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var xh={};Ba.prototype=dt(pt(Mn.prototype),{constructor:Ba,load:function(t,r,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var c=this,h=Xm.get(t);if(h!==void 0)return c.manager.itemStart(t),setTimeout(function(){r&&r(h),c.manager.itemEnd(t)},0),h;if(xh[t]!==void 0)xh[t].push({onLoad:r,onProgress:n,onError:s});else{var d=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(d){n=d[1];var f=!!d[2];d=d[3],d=decodeURIComponent(d),f&&(d=atob(d));try{var x=(this.responseType||"").toLowerCase();switch(x){case"arraybuffer":case"blob":var E=new Uint8Array(d.length);for(f=0;f<d.length;f++)E[f]=d.charCodeAt(f);var N=x==="blob"?new Blob([E.buffer],{type:n}):E.buffer;break;case"document":N=new DOMParser().parseFromString(d,n);break;case"json":N=JSON.parse(d);break;default:N=d}setTimeout(function(){r&&r(N),c.manager.itemEnd(t)},0)}catch(I){setTimeout(function(){s&&s(I),c.manager.itemError(t),c.manager.itemEnd(t)},0)}}else{xh[t]=[],xh[t].push({onLoad:r,onProgress:n,onError:s});var C=new XMLHttpRequest;C.open("GET",t,!0),C.addEventListener("load",function(I){var S=this.response,F=xh[t];if(delete xh[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Xm.add(t,S);for(var D=0,K=F.length;D<K;D++){var Z=F[D];Z.onLoad&&Z.onLoad(S)}}else{for(D=0,K=F.length;D<K;D++)Z=F[D],Z.onError&&Z.onError(I);c.manager.itemError(t)}c.manager.itemEnd(t)},!1),C.addEventListener("progress",function(I){for(var S=xh[t],F=0,D=S.length;F<D;F++){var K=S[F];K.onProgress&&K.onProgress(I)}},!1),C.addEventListener("error",function(I){var S=xh[t];delete xh[t];for(var F=0,D=S.length;F<D;F++){var K=S[F];K.onError&&K.onError(I)}c.manager.itemError(t),c.manager.itemEnd(t)},!1),C.addEventListener("abort",function(I){var S=xh[t];delete xh[t];for(var F=0,D=S.length;F<D;F++){var K=S[F];K.onError&&K.onError(I)}c.manager.itemError(t),c.manager.itemEnd(t)},!1),this.responseType!==void 0&&(C.responseType=this.responseType),this.withCredentials!==void 0&&(C.withCredentials=this.withCredentials),C.overrideMimeType&&C.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(f in this.requestHeader)C.setRequestHeader(f,this.requestHeader[f]);C.send(null)}return c.manager.itemStart(t),C}},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),on.prototype=dt(pt(Mn.prototype),{constructor:on,load:function(t,r,n,s){var c=this,h=new Ba(c.manager);h.setPath(c.path),h.load(t,function(d){try{r(c.parse(JSON.parse(d)))}catch(f){s?s(f):console.error(f),c.manager.itemError(t)}},n,s)},parse:function(t){for(var r=[],n=0;n<t.length;n++){var s=sA.parse(t[n]);r.push(s)}return r}}),$g.prototype=dt(pt(Mn.prototype),{constructor:$g,load:function(t,r,n,s){function c(I){x.load(t[I],function(S){S=h.parse(S,!0),d[I]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},E+=1,E===6&&(S.mipmapCount===1&&(f.minFilter=1006),f.format=S.format,f.needsUpdate=!0,r&&r(f))},n,s)}var h=this,d=[],f=new Gc;f.image=d;var x=new Ba(this.manager);if(x.setPath(this.path),x.setResponseType("arraybuffer"),Array.isArray(t))for(var E=0,N=0,C=t.length;N<C;++N)c(N);else x.load(t,function(I){if(I=h.parse(I,!0),I.isCubemap)for(var S=I.mipmaps.length/I.mipmapCount,F=0;F<S;F++){d[F]={mipmaps:[]};for(var D=0;D<I.mipmapCount;D++)d[F].mipmaps.push(I.mipmaps[F*I.mipmapCount+D]),d[F].format=I.format,d[F].width=I.width,d[F].height=I.height}else f.image.width=I.width,f.image.height=I.height,f.mipmaps=I.mipmaps;I.mipmapCount===1&&(f.minFilter=1006),f.format=I.format,f.needsUpdate=!0,r&&r(f)},n,s);return f}}),tm.prototype=dt(pt(Mn.prototype),{constructor:tm,load:function(t,r,n,s){var c=this,h=new Vn,d=new Ba(this.manager);return d.setResponseType("arraybuffer"),d.setPath(this.path),d.load(t,function(f){(f=c.parse(f))&&(f.image!==void 0?h.image=f.image:f.data!==void 0&&(h.image.width=f.width,h.image.height=f.height,h.image.data=f.data),h.wrapS=f.wrapS!==void 0?f.wrapS:1001,h.wrapT=f.wrapT!==void 0?f.wrapT:1001,h.magFilter=f.magFilter!==void 0?f.magFilter:1006,h.minFilter=f.minFilter!==void 0?f.minFilter:1006,h.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.format!==void 0&&(h.format=f.format),f.type!==void 0&&(h.type=f.type),f.mipmaps!==void 0&&(h.mipmaps=f.mipmaps,h.minFilter=1008),f.mipmapCount===1&&(h.minFilter=1006),h.needsUpdate=!0,r&&r(h,f))},n,s),h}}),Fu.prototype=dt(pt(Mn.prototype),{constructor:Fu,load:function(t,r,n,s){function c(){x.removeEventListener("load",c,!1),x.removeEventListener("error",h,!1),Xm.add(t,this),r&&r(this),d.manager.itemEnd(t)}function h(E){x.removeEventListener("load",c,!1),x.removeEventListener("error",h,!1),s&&s(E),d.manager.itemError(t),d.manager.itemEnd(t)}this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var d=this,f=Xm.get(t);if(f!==void 0)return d.manager.itemStart(t),setTimeout(function(){r&&r(f),d.manager.itemEnd(t)},0),f;var x=document.createElementNS("http://www.w3.org/1999/xhtml","img");return x.addEventListener("load",c,!1),x.addEventListener("error",h,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(x.crossOrigin=this.crossOrigin),d.manager.itemStart(t),x.src=t,x}}),Rd.prototype=dt(pt(Mn.prototype),{constructor:Rd,load:function(t,r,n,s){function c(x){d.load(t[x],function(E){h.images[x]=E,f++,f===6&&(h.needsUpdate=!0,r&&r(h))},void 0,s)}var h=new Oi,d=new Fu(this.manager);d.setCrossOrigin(this.crossOrigin),d.setPath(this.path);var f=0;for(n=0;n<t.length;++n)c(n);return h}}),qc.prototype=dt(pt(Mn.prototype),{constructor:qc,load:function(t,r,n,s){var c=new bt,h=new Fu(this.manager);return h.setCrossOrigin(this.crossOrigin),h.setPath(this.path),h.load(t,function(d){c.image=d,d=0<t.search(/\.jpe?g($|\?)/i)||t.search(/^data:image\/jpeg/)===0,c.format=d?1022:1023,c.needsUpdate=!0,r!==void 0&&r(c)},n,s),c}}),dt(fn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,r){return t=this.getUtoTmapping(t),this.getPoint(t,r)},getPoints:function(t){t===void 0&&(t=5);for(var r=[],n=0;n<=t;n++)r.push(this.getPoint(n/t));return r},getSpacedPoints:function(t){t===void 0&&(t=5);for(var r=[],n=0;n<=t;n++)r.push(this.getPointAt(n/t));return r},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r=[],n=this.getPoint(0),s,c=0;for(r.push(0),s=1;s<=t;s++){var h=this.getPoint(s/t);c+=h.distanceTo(n),r.push(c),n=h}return this.cacheArcLengths=r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,r){var n=this.getLengths(),s=n.length;r=r||t*n[s-1];for(var c=0,h=s-1,d;c<=h;)if(t=Math.floor(c+(h-c)/2),d=n[t]-r,0>d)c=t+1;else if(0<d)h=t-1;else{h=t;break}return t=h,n[t]===r?t/(s-1):(c=n[t],(t+(r-c)/(n[t+1]-c))/(s-1))},getTangent:function(t,r){var n=t-1e-4;return t+=1e-4,0>n&&(n=0),1<t&&(t=1),n=this.getPoint(n),t=this.getPoint(t),r=r||(n.isVector2?new ct:new gt),r.copy(t).sub(n).normalize(),r},getTangentAt:function(t,r){return t=this.getUtoTmapping(t),this.getTangent(t,r)},computeFrenetFrames:function(t,r){var n=new gt,s=[],c=[],h=[],d=new gt,f=new Qe,x;for(x=0;x<=t;x++){var E=x/t;s[x]=this.getTangentAt(E,new gt),s[x].normalize()}c[0]=new gt,h[0]=new gt,x=Number.MAX_VALUE,E=Math.abs(s[0].x);var N=Math.abs(s[0].y),C=Math.abs(s[0].z);for(E<=x&&(x=E,n.set(1,0,0)),N<=x&&(x=N,n.set(0,1,0)),C<=x&&n.set(0,0,1),d.crossVectors(s[0],n).normalize(),c[0].crossVectors(s[0],d),h[0].crossVectors(s[0],c[0]),x=1;x<=t;x++)c[x]=c[x-1].clone(),h[x]=h[x-1].clone(),d.crossVectors(s[x-1],s[x]),d.length()>No&&(d.normalize(),n=Math.acos(Jr.clamp(s[x-1].dot(s[x]),-1,1)),c[x].applyMatrix4(f.makeRotationAxis(d,n))),h[x].crossVectors(s[x],c[x]);if(r===!0)for(n=Math.acos(Jr.clamp(c[0].dot(c[t]),-1,1)),n/=t,0<s[0].dot(d.crossVectors(c[0],c[t]))&&(n=-n),x=1;x<=t;x++)c[x].applyMatrix4(f.makeRotationAxis(s[x],n*x)),h[x].crossVectors(s[x],c[x]);return{tangents:s,normals:c,binormals:h}},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),aA.prototype=pt(fn.prototype),aA.prototype.constructor=aA,aA.prototype.isEllipseCurve=!0,aA.prototype.getPoint=function(t,r){r=r||new ct;for(var n=2*Math.PI,s=this.aEndAngle-this.aStartAngle,c=Math.abs(s)<No;0>s;)s+=n;for(;s>n;)s-=n;s<No&&(s=c?0:n),this.aClockwise!==!0||c||(s=s===n?-n:s-n),n=this.aStartAngle+t*s,t=this.aX+this.xRadius*Math.cos(n);var h=this.aY+this.yRadius*Math.sin(n);return this.aRotation!==0&&(n=Math.cos(this.aRotation),s=Math.sin(this.aRotation),c=t-this.aX,h-=this.aY,t=c*n-h*s+this.aX,h=c*s+h*n+this.aY),r.set(t,h)},aA.prototype.copy=function(t){return fn.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},aA.prototype.toJSON=function(){var t=fn.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},aA.prototype.fromJSON=function(t){return fn.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},ul.prototype=pt(aA.prototype),ul.prototype.constructor=ul,ul.prototype.isArcCurve=!0;var z1=new gt,kx=new tn,Gx=new tn,Vx=new tn;sa.prototype=pt(fn.prototype),sa.prototype.constructor=sa,sa.prototype.isCatmullRomCurve3=!0,sa.prototype.getPoint=function(t,r){r=r||new gt;var n=this.points,s=n.length;t*=s-(this.closed?0:1);var c=Math.floor(t);if(t-=c,this.closed?c+=0<c?0:(Math.floor(Math.abs(c)/s)+1)*s:t===0&&c===s-1&&(c=s-2,t=1),this.closed||0<c)var h=n[(c-1)%s];else z1.subVectors(n[0],n[1]).add(n[0]),h=z1;var d=n[c%s],f=n[(c+1)%s];if(this.closed||c+2<s?n=n[(c+2)%s]:(z1.subVectors(n[s-1],n[s-2]).add(n[s-1]),n=z1),this.curveType==="centripetal"||this.curveType==="chordal"){var x=this.curveType==="chordal"?.5:.25;s=Math.pow(h.distanceToSquared(d),x),c=Math.pow(d.distanceToSquared(f),x),x=Math.pow(f.distanceToSquared(n),x),1e-4>c&&(c=1),1e-4>s&&(s=c),1e-4>x&&(x=c),kx.initNonuniformCatmullRom(h.x,d.x,f.x,n.x,s,c,x),Gx.initNonuniformCatmullRom(h.y,d.y,f.y,n.y,s,c,x),Vx.initNonuniformCatmullRom(h.z,d.z,f.z,n.z,s,c,x)}else this.curveType==="catmullrom"&&(kx.initCatmullRom(h.x,d.x,f.x,n.x,this.tension),Gx.initCatmullRom(h.y,d.y,f.y,n.y,this.tension),Vx.initCatmullRom(h.z,d.z,f.z,n.z,this.tension));return r.set(kx.calc(t),Gx.calc(t),Vx.calc(t)),r},sa.prototype.copy=function(t){fn.prototype.copy.call(this,t),this.points=[];for(var r=0,n=t.points.length;r<n;r++)this.points.push(t.points[r].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},sa.prototype.toJSON=function(){var t=fn.prototype.toJSON.call(this);t.points=[];for(var r=0,n=this.points.length;r<n;r++)t.points.push(this.points[r].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},sa.prototype.fromJSON=function(t){fn.prototype.fromJSON.call(this,t),this.points=[];for(var r=0,n=t.points.length;r<n;r++){var s=t.points[r];this.points.push(new gt().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},$A.prototype=pt(fn.prototype),$A.prototype.constructor=$A,$A.prototype.isCubicBezierCurve=!0,$A.prototype.getPoint=function(t,r){r=r||new ct;var n=this.v0,s=this.v1,c=this.v2,h=this.v3;return r.set(hl(t,n.x,s.x,c.x,h.x),hl(t,n.y,s.y,c.y,h.y)),r},$A.prototype.copy=function(t){return fn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},$A.prototype.toJSON=function(){var t=fn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},$A.prototype.fromJSON=function(t){return fn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Ga.prototype=pt(fn.prototype),Ga.prototype.constructor=Ga,Ga.prototype.isCubicBezierCurve3=!0,Ga.prototype.getPoint=function(t,r){r=r||new gt;var n=this.v0,s=this.v1,c=this.v2,h=this.v3;return r.set(hl(t,n.x,s.x,c.x,h.x),hl(t,n.y,s.y,c.y,h.y),hl(t,n.z,s.z,c.z,h.z)),r},Ga.prototype.copy=function(t){return fn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ga.prototype.toJSON=function(){var t=fn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ga.prototype.fromJSON=function(t){return fn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Va.prototype=pt(fn.prototype),Va.prototype.constructor=Va,Va.prototype.isLineCurve=!0,Va.prototype.getPoint=function(t,r){return r=r||new ct,t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r},Va.prototype.getPointAt=function(t,r){return this.getPoint(t,r)},Va.prototype.getTangent=function(t,r){return t=r||new ct,t=t.copy(this.v2).sub(this.v1).normalize()},Va.prototype.copy=function(t){return fn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Va.prototype.toJSON=function(){var t=fn.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Va.prototype.fromJSON=function(t){return fn.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},AA.prototype=pt(fn.prototype),AA.prototype.constructor=AA,AA.prototype.isLineCurve3=!0,AA.prototype.getPoint=function(t,r){return r=r||new gt,t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r},AA.prototype.getPointAt=function(t,r){return this.getPoint(t,r)},AA.prototype.copy=function(t){return fn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},AA.prototype.toJSON=function(){var t=fn.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},AA.prototype.fromJSON=function(t){return fn.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},tu.prototype=pt(fn.prototype),tu.prototype.constructor=tu,tu.prototype.isQuadraticBezierCurve=!0,tu.prototype.getPoint=function(t,r){r=r||new ct;var n=this.v0,s=this.v1,c=this.v2;return r.set(ll(t,n.x,s.x,c.x),ll(t,n.y,s.y,c.y)),r},tu.prototype.copy=function(t){return fn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},tu.prototype.toJSON=function(){var t=fn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},tu.prototype.fromJSON=function(t){return fn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Wa.prototype=pt(fn.prototype),Wa.prototype.constructor=Wa,Wa.prototype.isQuadraticBezierCurve3=!0,Wa.prototype.getPoint=function(t,r){r=r||new gt;var n=this.v0,s=this.v1,c=this.v2;return r.set(ll(t,n.x,s.x,c.x),ll(t,n.y,s.y,c.y),ll(t,n.z,s.z,c.z)),r},Wa.prototype.copy=function(t){return fn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Wa.prototype.toJSON=function(){var t=fn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Wa.prototype.fromJSON=function(t){return fn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},aa.prototype=pt(fn.prototype),aa.prototype.constructor=aa,aa.prototype.isSplineCurve=!0,aa.prototype.getPoint=function(t,r){r=r||new ct;var n=this.points,s=(n.length-1)*t;t=Math.floor(s),s-=t;var c=n[t===0?t:t-1],h=n[t],d=n[t>n.length-2?n.length-1:t+1];return n=n[t>n.length-3?n.length-1:t+2],r.set(em(s,c.x,h.x,d.x,n.x),em(s,c.y,h.y,d.y,n.y)),r},aa.prototype.copy=function(t){fn.prototype.copy.call(this,t),this.points=[];for(var r=0,n=t.points.length;r<n;r++)this.points.push(t.points[r].clone());return this},aa.prototype.toJSON=function(){var t=fn.prototype.toJSON.call(this);t.points=[];for(var r=0,n=this.points.length;r<n;r++)t.points.push(this.points[r].toArray());return t},aa.prototype.fromJSON=function(t){fn.prototype.fromJSON.call(this,t),this.points=[];for(var r=0,n=t.points.length;r<n;r++){var s=t.points[r];this.points.push(new ct().fromArray(s))}return this};var Wx=bi({__proto__:null,ArcCurve:ul,CatmullRomCurve3:sa,CubicBezierCurve:$A,CubicBezierCurve3:Ga,EllipseCurve:aA,LineCurve:Va,LineCurve3:AA,QuadraticBezierCurve:tu,QuadraticBezierCurve3:Wa,SplineCurve:aa});cl.prototype=dt(pt(fn.prototype),{constructor:cl,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);t.equals(r)||this.curves.push(new Va(r,t))},getPoint:function(t){var r=t*this.getLength(),n=this.getCurveLengths();for(t=0;t<n.length;){if(n[t]>=r)return r=n[t]-r,t=this.curves[t],n=t.getLength(),t.getPointAt(n===0?0:1-r/n);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],r=0,n=0,s=this.curves.length;n<s;n++)r+=this.curves[n].getLength(),t.push(r);return this.cacheLengths=t},getSpacedPoints:function(t){t===void 0&&(t=40);for(var r=[],n=0;n<=t;n++)r.push(this.getPoint(n/t));return this.autoClose&&r.push(r[0]),r},getPoints:function(t){t=t||12;for(var r=[],n,s=0,c=this.curves;s<c.length;s++){var h=c[s];h=h.getPoints(h&&h.isEllipseCurve?2*t:h&&(h.isLineCurve||h.isLineCurve3)?1:h&&h.isSplineCurve?t*h.points.length:t);for(var d=0;d<h.length;d++){var f=h[d];n&&n.equals(f)||(r.push(f),n=f)}}return this.autoClose&&1<r.length&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(t){fn.prototype.copy.call(this,t),this.curves=[];for(var r=0,n=t.curves.length;r<n;r++)this.curves.push(t.curves[r].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=fn.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var r=0,n=this.curves.length;r<n;r++)t.curves.push(this.curves[r].toJSON());return t},fromJSON:function(t){fn.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var r=0,n=t.curves.length;r<n;r++){var s=t.curves[r];this.curves.push(new Wx[s.type]().fromJSON(s))}return this}}),ni.prototype=dt(pt(cl.prototype),{constructor:ni,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var r=1,n=t.length;r<n;r++)this.lineTo(t[r].x,t[r].y);return this},moveTo:function(t,r){return this.currentPoint.set(t,r),this},lineTo:function(t,r){var n=new Va(this.currentPoint.clone(),new ct(t,r));return this.curves.push(n),this.currentPoint.set(t,r),this},quadraticCurveTo:function(t,r,n,s){return t=new tu(this.currentPoint.clone(),new ct(t,r),new ct(n,s)),this.curves.push(t),this.currentPoint.set(n,s),this},bezierCurveTo:function(t,r,n,s,c,h){return t=new $A(this.currentPoint.clone(),new ct(t,r),new ct(n,s),new ct(c,h)),this.curves.push(t),this.currentPoint.set(c,h),this},splineThru:function(t){var r=[this.currentPoint.clone()].concat(t);return r=new aa(r),this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,r,n,s,c,h){return this.absarc(t+this.currentPoint.x,r+this.currentPoint.y,n,s,c,h),this},absarc:function(t,r,n,s,c,h){return this.absellipse(t,r,n,n,s,c,h),this},ellipse:function(t,r,n,s,c,h,d,f){return this.absellipse(t+this.currentPoint.x,r+this.currentPoint.y,n,s,c,h,d,f),this},absellipse:function(t,r,n,s,c,h,d,f){return t=new aA(t,r,n,s,c,h,d,f),0<this.curves.length&&(r=t.getPoint(0),r.equals(this.currentPoint)||this.lineTo(r.x,r.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t),this},copy:function(t){return cl.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=cl.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return cl.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),fl.prototype=dt(pt(ni.prototype),{constructor:fl,getPointsHoles:function(t){for(var r=[],n=0,s=this.holes.length;n<s;n++)r[n]=this.holes[n].getPoints(t);return r},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){ni.prototype.copy.call(this,t),this.holes=[];for(var r=0,n=t.holes.length;r<n;r++)this.holes.push(t.holes[r].clone());return this},toJSON:function(){var t=ni.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var r=0,n=this.holes.length;r<n;r++)t.holes.push(this.holes[r].toJSON());return t},fromJSON:function(t){ni.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var r=0,n=t.holes.length;r<n;r++){var s=t.holes[r];this.holes.push(new ni().fromJSON(s))}return this}}),Yi.prototype=dt(pt(Oe.prototype),{constructor:Yi,isLight:!0,copy:function(t){return Oe.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return t=Oe.prototype.toJSON.call(this,t),t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}),mp.prototype=dt(pt(Yi.prototype),{constructor:mp,isHemisphereLight:!0,copy:function(t){return Yi.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),dt(PA.prototype,{_projScreenMatrix:new Qe,_lightPositionWorld:new gt,_lookTarget:new gt,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var r=this.camera,n=this.matrix,s=this._projScreenMatrix,c=this._lookTarget,h=this._lightPositionWorld;h.setFromMatrixPosition(t.matrixWorld),r.position.copy(h),c.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(c),r.updateMatrixWorld(),s.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(r.projectionMatrix),n.multiply(r.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t={};return this.bias!==0&&(t.bias=this.bias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),$c.prototype=dt(pt(PA.prototype),{constructor:$c,isSpotLightShadow:!0,updateMatrices:function(t){var r=this.camera,n=2*Jr.RAD2DEG*t.angle,s=this.mapSize.width/this.mapSize.height,c=t.distance||r.far;(n!==r.fov||s!==r.aspect||c!==r.far)&&(r.fov=n,r.aspect=s,r.far=c,r.updateProjectionMatrix()),PA.prototype.updateMatrices.call(this,t)}}),tf.prototype=dt(pt(Yi.prototype),{constructor:tf,isSpotLight:!0,copy:function(t){return Yi.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Pd.prototype=dt(pt(PA.prototype),{constructor:Pd,isPointLightShadow:!0,updateMatrices:function(t,r){r===void 0&&(r=0);var n=this.camera,s=this.matrix,c=this._lightPositionWorld,h=this._lookTarget,d=this._projScreenMatrix;c.setFromMatrixPosition(t.matrixWorld),n.position.copy(c),h.copy(n.position),h.add(this._cubeDirections[r]),n.up.copy(this._cubeUps[r]),n.lookAt(h),n.updateMatrixWorld(),s.makeTranslation(-c.x,-c.y,-c.z),d.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d)}}),eu.prototype=dt(pt(Yi.prototype),{constructor:eu,isPointLight:!0,copy:function(t){return Yi.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Ea.prototype=dt(pt(un.prototype),{constructor:Ea,isOrthographicCamera:!0,copy:function(t,r){return un.prototype.copy.call(this,t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:dt({},t.view),this},setViewOffset:function(t,r,n,s,c,h){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=s,this.view.width=c,this.view.height=h,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2,c=n-t;n+=t,t=s+r,r=s-r,this.view!==null&&this.view.enabled&&(s=(this.right-this.left)/this.view.fullWidth/this.zoom,r=(this.top-this.bottom)/this.view.fullHeight/this.zoom,c+=s*this.view.offsetX,n=c+s*this.view.width,t-=r*this.view.offsetY,r=t-r*this.view.height),this.projectionMatrix.makeOrthographic(c,n,t,r,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return t=Oe.prototype.toJSON.call(this,t),t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=dt({},this.view)),t}}),Ud.prototype=dt(pt(PA.prototype),{constructor:Ud,isDirectionalLightShadow:!0,updateMatrices:function(t){PA.prototype.updateMatrices.call(this,t)}}),Fn.prototype=dt(pt(Yi.prototype),{constructor:Fn,isDirectionalLight:!0,copy:function(t){return Yi.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Dd.prototype=dt(pt(Yi.prototype),{constructor:Dd,isAmbientLight:!0}),Od.prototype=dt(pt(Yi.prototype),{constructor:Od,isRectAreaLight:!0,copy:function(t){return Yi.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return t=Yi.prototype.toJSON.call(this,t),t.object.width=this.width,t.object.height=this.height,t}}),dt(Hd.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var r=0;9>r;r++)this.coefficients[r].copy(t[r]);return this},zero:function(){for(var t=0;9>t;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,r){var n=t.x,s=t.y;t=t.z;var c=this.coefficients;return r.copy(c[0]).multiplyScalar(.282095),r.addScaledVector(c[1],.488603*s),r.addScaledVector(c[2],.488603*t),r.addScaledVector(c[3],.488603*n),r.addScaledVector(c[4],1.092548*n*s),r.addScaledVector(c[5],1.092548*s*t),r.addScaledVector(c[6],.315392*(3*t*t-1)),r.addScaledVector(c[7],1.092548*n*t),r.addScaledVector(c[8],.546274*(n*n-s*s)),r},getIrradianceAt:function(t,r){var n=t.x,s=t.y;t=t.z;var c=this.coefficients;return r.copy(c[0]).multiplyScalar(.886227),r.addScaledVector(c[1],1.023328*s),r.addScaledVector(c[2],1.023328*t),r.addScaledVector(c[3],1.023328*n),r.addScaledVector(c[4],.858086*n*s),r.addScaledVector(c[5],.858086*s*t),r.addScaledVector(c[6],.743125*t*t-.247708),r.addScaledVector(c[7],.858086*n*t),r.addScaledVector(c[8],.429043*(n*n-s*s)),r},add:function(t){for(var r=0;9>r;r++)this.coefficients[r].add(t.coefficients[r]);return this},addScaledSH:function(t,r){for(var n=0;9>n;n++)this.coefficients[n].addScaledVector(t.coefficients[n],r);return this},scale:function(t){for(var r=0;9>r;r++)this.coefficients[r].multiplyScalar(t);return this},lerp:function(t,r){for(var n=0;9>n;n++)this.coefficients[n].lerp(t.coefficients[n],r);return this},equals:function(t){for(var r=0;9>r;r++)if(!this.coefficients[r].equals(t.coefficients[r]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(t,r){r===void 0&&(r=0);for(var n=this.coefficients,s=0;9>s;s++)n[s].fromArray(t,r+3*s);return this},toArray:function(t,r){t===void 0&&(t=[]),r===void 0&&(r=0);for(var n=this.coefficients,s=0;9>s;s++)n[s].toArray(t,r+3*s);return t}}),dt(Hd,{getBasisAt:function(t,r){var n=t.x,s=t.y;t=t.z,r[0]=.282095,r[1]=.488603*s,r[2]=.488603*t,r[3]=.488603*n,r[4]=1.092548*n*s,r[5]=1.092548*s*t,r[6]=.315392*(3*t*t-1),r[7]=1.092548*n*t,r[8]=.546274*(n*n-s*s)}}),uA.prototype=dt(pt(Yi.prototype),{constructor:uA,isLightProbe:!0,copy:function(t){return Yi.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){return t=Yi.prototype.toJSON.call(this,t),t.object.sh=this.sh.toArray(),t}}),ih.prototype=dt(pt(Mn.prototype),{constructor:ih,load:function(t,r,n,s){var c=this,h=new Ba(c.manager);h.setPath(c.path),h.load(t,function(d){try{r(c.parse(JSON.parse(d)))}catch(f){s?s(f):console.error(f),c.manager.itemError(t)}},n,s)},parse:function(t){function r(f){return n[f]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",f),n[f]}var n=this.textures,s=new f_[t.type];if(t.uuid!==void 0&&(s.uuid=t.uuid),t.name!==void 0&&(s.name=t.name),t.color!==void 0&&s.color.setHex(t.color),t.roughness!==void 0&&(s.roughness=t.roughness),t.metalness!==void 0&&(s.metalness=t.metalness),t.sheen!==void 0&&(s.sheen=new Je().setHex(t.sheen)),t.emissive!==void 0&&s.emissive.setHex(t.emissive),t.specular!==void 0&&s.specular.setHex(t.specular),t.shininess!==void 0&&(s.shininess=t.shininess),t.clearcoat!==void 0&&(s.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=t.clearcoatRoughness),t.fog!==void 0&&(s.fog=t.fog),t.flatShading!==void 0&&(s.flatShading=t.flatShading),t.blending!==void 0&&(s.blending=t.blending),t.combine!==void 0&&(s.combine=t.combine),t.side!==void 0&&(s.side=t.side),t.opacity!==void 0&&(s.opacity=t.opacity),t.transparent!==void 0&&(s.transparent=t.transparent),t.alphaTest!==void 0&&(s.alphaTest=t.alphaTest),t.depthTest!==void 0&&(s.depthTest=t.depthTest),t.depthWrite!==void 0&&(s.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(s.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(s.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(s.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(s.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(s.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(s.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(s.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(s.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(s.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(s.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(s.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(s.rotation=t.rotation),t.linewidth!==1&&(s.linewidth=t.linewidth),t.dashSize!==void 0&&(s.dashSize=t.dashSize),t.gapSize!==void 0&&(s.gapSize=t.gapSize),t.scale!==void 0&&(s.scale=t.scale),t.polygonOffset!==void 0&&(s.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(s.skinning=t.skinning),t.morphTargets!==void 0&&(s.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(s.morphNormals=t.morphNormals),t.dithering!==void 0&&(s.dithering=t.dithering),t.vertexTangents!==void 0&&(s.vertexTangents=t.vertexTangents),t.visible!==void 0&&(s.visible=t.visible),t.toneMapped!==void 0&&(s.toneMapped=t.toneMapped),t.userData!==void 0&&(s.userData=t.userData),t.vertexColors!==void 0&&(s.vertexColors=typeof t.vertexColors=="number"?0<t.vertexColors:t.vertexColors),t.uniforms!==void 0)for(var c in t.uniforms){var h=t.uniforms[c];switch(s.uniforms[c]={},h.type){case"t":s.uniforms[c].value=r(h.value);break;case"c":s.uniforms[c].value=new Je().setHex(h.value);break;case"v2":s.uniforms[c].value=new ct().fromArray(h.value);break;case"v3":s.uniforms[c].value=new gt().fromArray(h.value);break;case"v4":s.uniforms[c].value=new Ht().fromArray(h.value);break;case"m3":s.uniforms[c].value=new kt().fromArray(h.value);case"m4":s.uniforms[c].value=new Qe().fromArray(h.value);break;default:s.uniforms[c].value=h.value}}if(t.defines!==void 0&&(s.defines=t.defines),t.vertexShader!==void 0&&(s.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(s.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(var d in t.extensions)s.extensions[d]=t.extensions[d];return t.shading!==void 0&&(s.flatShading=t.shading===1),t.size!==void 0&&(s.size=t.size),t.sizeAttenuation!==void 0&&(s.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(s.map=r(t.map)),t.matcap!==void 0&&(s.matcap=r(t.matcap)),t.alphaMap!==void 0&&(s.alphaMap=r(t.alphaMap)),t.bumpMap!==void 0&&(s.bumpMap=r(t.bumpMap)),t.bumpScale!==void 0&&(s.bumpScale=t.bumpScale),t.normalMap!==void 0&&(s.normalMap=r(t.normalMap)),t.normalMapType!==void 0&&(s.normalMapType=t.normalMapType),t.normalScale!==void 0&&(c=t.normalScale,Array.isArray(c)===!1&&(c=[c,c]),s.normalScale=new ct().fromArray(c)),t.displacementMap!==void 0&&(s.displacementMap=r(t.displacementMap)),t.displacementScale!==void 0&&(s.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(s.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(s.roughnessMap=r(t.roughnessMap)),t.metalnessMap!==void 0&&(s.metalnessMap=r(t.metalnessMap)),t.emissiveMap!==void 0&&(s.emissiveMap=r(t.emissiveMap)),t.emissiveIntensity!==void 0&&(s.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(s.specularMap=r(t.specularMap)),t.envMap!==void 0&&(s.envMap=r(t.envMap)),t.envMapIntensity!==void 0&&(s.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(s.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(s.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(s.lightMap=r(t.lightMap)),t.lightMapIntensity!==void 0&&(s.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(s.aoMap=r(t.aoMap)),t.aoMapIntensity!==void 0&&(s.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(s.gradientMap=r(t.gradientMap)),t.clearcoatMap!==void 0&&(s.clearcoatMap=r(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=r(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=r(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new ct().fromArray(t.clearcoatNormalScale)),s},setTextures:function(t){return this.textures=t,this}});var ad={decodeText:function(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);for(var r="",n=0,s=t.length;n<s;n++)r+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(r))}catch(c){return r}},extractUrlBase:function(t){var r=t.lastIndexOf("/");return r===-1?"./":t.substr(0,r+1)}};vp.prototype=dt(pt(sr.prototype),{constructor:vp,isInstancedBufferGeometry:!0,copy:function(t){return sr.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t=sr.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),Nd.prototype=dt(pt(Kr.prototype),{constructor:Nd,isInstancedBufferAttribute:!0,copy:function(t){return Kr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=Kr.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),oh.prototype=dt(pt(Mn.prototype),{constructor:oh,load:function(t,r,n,s){var c=this,h=new Ba(c.manager);h.setPath(c.path),h.load(t,function(d){try{r(c.parse(JSON.parse(d)))}catch(f){s?s(f):console.error(f),c.manager.itemError(t)}},n,s)},parse:function(t){var r=t.isInstancedBufferGeometry?new vp:new sr,n=t.data.index;if(n!==void 0){var s=new jx[n.type](n.array);r.setIndex(new Kr(s,1))}n=t.data.attributes;for(var c in n){var h=n[c];s=new jx[h.type](h.array),s=new(h.isInstancedBufferAttribute?Nd:Kr)(s,h.itemSize,h.normalized),h.name!==void 0&&(s.name=h.name),r.setAttribute(c,s)}var d=t.data.morphAttributes;if(d)for(c in d){var f=d[c],x=[];n=0;for(var E=f.length;n<E;n++)h=f[n],s=new jx[h.type](h.array),s=new Kr(s,h.itemSize,h.normalized),h.name!==void 0&&(s.name=h.name),x.push(s);r.morphAttributes[c]=x}if(t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0),c=t.data.groups||t.data.drawcalls||t.data.offsets,c!==void 0)for(n=0,h=c.length;n!==h;++n)s=c[n],r.addGroup(s.start,s.count,s.materialIndex);return n=t.data.boundingSphere,n!==void 0&&(c=new gt,n.center!==void 0&&c.fromArray(n.center),r.boundingSphere=new mo(c,n.radius)),t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}});var jx={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};ja.prototype=dt(pt(Mn.prototype),{constructor:ja,load:function(t,r,n,s){var c=this,h=this.path===""?ad.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||h,h=new Ba(c.manager),h.setPath(this.path),h.load(t,function(d){var f=null;try{f=JSON.parse(d)}catch(x){s!==void 0&&s(x),console.error("THREE:ObjectLoader: Can't parse "+t+".",x.message);return}d=f.metadata,d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"?console.error("THREE.ObjectLoader: Can't load "+t):c.parse(f,r)},n,s)},parse:function(t,r){var n=this.parseShape(t.shapes);n=this.parseGeometries(t.geometries,n);var s=this.parseImages(t.images,function(){r!==void 0&&r(c)});s=this.parseTextures(t.textures,s),s=this.parseMaterials(t.materials,s);var c=this.parseObject(t.object,n,s);return t.animations&&(c.animations=this.parseAnimations(t.animations)),t.images!==void 0&&t.images.length!==0||r===void 0||r(c),c},parseShape:function(t){var r={};if(t!==void 0)for(var n=0,s=t.length;n<s;n++){var c=new fl().fromJSON(t[n]);r[c.uuid]=c}return r},parseGeometries:function(t,r){var n={};if(t!==void 0)for(var s=new oh,c=0,h=t.length;c<h;c++){var d=t[c];switch(d.type){case"PlaneGeometry":case"PlaneBufferGeometry":var f=new bA[d.type](d.width,d.height,d.widthSegments,d.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":f=new bA[d.type](d.width,d.height,d.depth,d.widthSegments,d.heightSegments,d.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":f=new bA[d.type](d.radius,d.segments,d.thetaStart,d.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":f=new bA[d.type](d.radiusTop,d.radiusBottom,d.height,d.radialSegments,d.heightSegments,d.openEnded,d.thetaStart,d.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":f=new bA[d.type](d.radius,d.height,d.radialSegments,d.heightSegments,d.openEnded,d.thetaStart,d.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":f=new bA[d.type](d.radius,d.widthSegments,d.heightSegments,d.phiStart,d.phiLength,d.thetaStart,d.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":f=new bA[d.type](d.radius,d.detail);break;case"RingGeometry":case"RingBufferGeometry":f=new bA[d.type](d.innerRadius,d.outerRadius,d.thetaSegments,d.phiSegments,d.thetaStart,d.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":f=new bA[d.type](d.radius,d.tube,d.radialSegments,d.tubularSegments,d.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":f=new bA[d.type](d.radius,d.tube,d.tubularSegments,d.radialSegments,d.p,d.q);break;case"TubeGeometry":case"TubeBufferGeometry":f=new bA[d.type](new Wx[d.path.type]().fromJSON(d.path),d.tubularSegments,d.radius,d.radialSegments,d.closed);break;case"LatheGeometry":case"LatheBufferGeometry":f=new bA[d.type](d.points,d.segments,d.phiStart,d.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":f=new bA[d.type](d.vertices,d.indices,d.radius,d.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":f=[];for(var x=0,E=d.shapes.length;x<E;x++){var N=r[d.shapes[x]];f.push(N)}f=new bA[d.type](f,d.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(f=[],x=0,E=d.shapes.length;x<E;x++)N=r[d.shapes[x]],f.push(N);x=d.options.extrudePath,x!==void 0&&(d.options.extrudePath=new Wx[x.type]().fromJSON(x)),f=new bA[d.type](f,d.options);break;case"BufferGeometry":case"InstancedBufferGeometry":f=s.parse(d);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+d.type+'"');continue}f.uuid=d.uuid,d.name!==void 0&&(f.name=d.name),f.isBufferGeometry===!0&&d.userData!==void 0&&(f.userData=d.userData),n[d.uuid]=f}return n},parseMaterials:function(t,r){var n={},s={};if(t!==void 0){var c=new ih;c.setTextures(r),r=0;for(var h=t.length;r<h;r++){var d=t[r];if(d.type==="MultiMaterial"){for(var f=[],x=0;x<d.materials.length;x++){var E=d.materials[x];n[E.uuid]===void 0&&(n[E.uuid]=c.parse(E)),f.push(n[E.uuid])}s[d.uuid]=f}else n[d.uuid]===void 0&&(n[d.uuid]=c.parse(d)),s[d.uuid]=n[d.uuid]}}return s},parseAnimations:function(t){for(var r=[],n=0;n<t.length;n++){var s=t[n],c=sA.parse(s);s.uuid!==void 0&&(c.uuid=s.uuid),r.push(c)}return r},parseImages:function(t,r){function n(I){return s.manager.itemStart(I),h.load(I,function(){s.manager.itemEnd(I)},void 0,function(){s.manager.itemError(I),s.manager.itemEnd(I)})}var s=this,c={};if(t!==void 0&&0<t.length){r=new nh(r);var h=new Fu(r);h.setCrossOrigin(this.crossOrigin),r=0;for(var d=t.length;r<d;r++){var f=t[r],x=f.url;if(Array.isArray(x)){c[f.uuid]=[];for(var E=0,N=x.length;E<N;E++){var C=x[E];C=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(C)?C:s.resourcePath+C,c[f.uuid].push(n(C))}}else C=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f.url)?f.url:s.resourcePath+f.url,c[f.uuid]=n(C)}}return c},parseTextures:function(t,r){function n(x,E){return typeof x=="number"?x:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",x),E[x])}var s={};if(t!==void 0)for(var c=0,h=t.length;c<h;c++){var d=t[c];d.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',d.uuid),r[d.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",d.image);var f=Array.isArray(r[d.image])?new Oi(r[d.image]):new bt(r[d.image]);f.needsUpdate=!0,f.uuid=d.uuid,d.name!==void 0&&(f.name=d.name),d.mapping!==void 0&&(f.mapping=n(d.mapping,p_)),d.offset!==void 0&&f.offset.fromArray(d.offset),d.repeat!==void 0&&f.repeat.fromArray(d.repeat),d.center!==void 0&&f.center.fromArray(d.center),d.rotation!==void 0&&(f.rotation=d.rotation),d.wrap!==void 0&&(f.wrapS=n(d.wrap[0],jC),f.wrapT=n(d.wrap[1],jC)),d.format!==void 0&&(f.format=d.format),d.type!==void 0&&(f.type=d.type),d.encoding!==void 0&&(f.encoding=d.encoding),d.minFilter!==void 0&&(f.minFilter=n(d.minFilter,XC)),d.magFilter!==void 0&&(f.magFilter=n(d.magFilter,XC)),d.anisotropy!==void 0&&(f.anisotropy=d.anisotropy),d.flipY!==void 0&&(f.flipY=d.flipY),d.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=d.premultiplyAlpha),d.unpackAlignment!==void 0&&(f.unpackAlignment=d.unpackAlignment),s[d.uuid]=f}return s},parseObject:function(t,r,n){function s(E){return r[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",E),r[E]}function c(E){if(E!==void 0){if(Array.isArray(E)){for(var N=[],C=0,I=E.length;C<I;C++){var S=E[C];n[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),N.push(n[S])}return N}return n[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),n[E]}}switch(t.type){case"Scene":var h=new Nn;t.background!==void 0&&$p(t.background)&&(h.background=new Je(t.background)),t.fog!==void 0&&(t.fog.type==="Fog"?h.fog=new Ki(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(h.fog=new KA(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":h=new Wr(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(h.focus=t.focus),t.zoom!==void 0&&(h.zoom=t.zoom),t.filmGauge!==void 0&&(h.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(h.filmOffset=t.filmOffset),t.view!==void 0&&(h.view=dt({},t.view));break;case"OrthographicCamera":h=new Ea(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(h.zoom=t.zoom),t.view!==void 0&&(h.view=dt({},t.view));break;case"AmbientLight":h=new Dd(t.color,t.intensity);break;case"DirectionalLight":h=new Fn(t.color,t.intensity);break;case"PointLight":h=new eu(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":h=new Od(t.color,t.intensity,t.width,t.height);break;case"SpotLight":h=new tf(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":h=new mp(t.color,t.groundColor,t.intensity);break;case"LightProbe":h=new uA().fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":h=s(t.geometry);var d=c(t.material);h=new $i(h,d);break;case"InstancedMesh":h=s(t.geometry),d=c(t.material);var f=t.instanceMatrix;h=new Xr(h,d,t.count),h.instanceMatrix=new Kr(new Float32Array(f.array),16);break;case"LOD":h=new js;break;case"Line":h=new Xs(s(t.geometry),c(t.material),t.mode);break;case"LineLoop":h=new _o(s(t.geometry),c(t.material));break;case"LineSegments":h=new uo(s(t.geometry),c(t.material));break;case"PointCloud":case"Points":h=new xu(s(t.geometry),c(t.material));break;case"Sprite":h=new Yl(c(t.material));break;case"Group":h=new va;break;default:h=new Oe}if(h.uuid=t.uuid,t.name!==void 0&&(h.name=t.name),t.matrix!==void 0?(h.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(h.matrixAutoUpdate=t.matrixAutoUpdate),h.matrixAutoUpdate&&h.matrix.decompose(h.position,h.quaternion,h.scale)):(t.position!==void 0&&h.position.fromArray(t.position),t.rotation!==void 0&&h.rotation.fromArray(t.rotation),t.quaternion!==void 0&&h.quaternion.fromArray(t.quaternion),t.scale!==void 0&&h.scale.fromArray(t.scale)),t.castShadow!==void 0&&(h.castShadow=t.castShadow),t.receiveShadow!==void 0&&(h.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(h.shadow.bias=t.shadow.bias),t.shadow.radius!==void 0&&(h.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&h.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(h.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(h.visible=t.visible),t.frustumCulled!==void 0&&(h.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(h.renderOrder=t.renderOrder),t.userData!==void 0&&(h.userData=t.userData),t.layers!==void 0&&(h.layers.mask=t.layers),t.children!==void 0)for(f=t.children,d=0;d<f.length;d++)h.add(this.parseObject(f[d],r,n));if(t.type==="LOD")for(t.autoUpdate!==void 0&&(h.autoUpdate=t.autoUpdate),t=t.levels,f=0;f<t.length;f++){d=t[f];var x=h.getObjectByProperty("uuid",d.object);x!==void 0&&h.addLevel(x,d.distance)}return h}});var p_={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},jC={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},XC={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};rm.prototype=dt(pt(Mn.prototype),{constructor:rm,setOptions:function(t){return this.options=t,this},load:function(t,r,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var c=this,h=Xm.get(t);if(h!==void 0)return c.manager.itemStart(t),setTimeout(function(){r&&r(h),c.manager.itemEnd(t)},0),h;fetch(t).then(function(d){return d.blob()}).then(function(d){return c.options===void 0?createImageBitmap(d):createImageBitmap(d,c.options)}).then(function(d){Xm.add(t,d),r&&r(d),c.manager.itemEnd(t)}).catch(function(d){s&&s(d),c.manager.itemError(t),c.manager.itemEnd(t)}),c.manager.itemStart(t)}}),dt(nm.prototype,{moveTo:function(t,r){return this.currentPath=new ni,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,r),this},lineTo:function(t,r){return this.currentPath.lineTo(t,r),this},quadraticCurveTo:function(t,r,n,s){return this.currentPath.quadraticCurveTo(t,r,n,s),this},bezierCurveTo:function(t,r,n,s,c,h){return this.currentPath.bezierCurveTo(t,r,n,s,c,h),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,r){function n(K){for(var Z=[],$=0,st=K.length;$<st;$++){var ht=K[$],Et=new fl;Et.curves=ht.curves,Z.push(Et)}return Z}function s(K,Z){for(var $=Z.length,st=!1,ht=$-1,Et=0;Et<$;ht=Et++){var It=Z[ht],Bt=Z[Et],Xt=Bt.x-It.x,Yt=Bt.y-It.y;if(Math.abs(Yt)>No){if(0>Yt&&(It=Z[Et],Xt=-Xt,Bt=Z[ht],Yt=-Yt),!(K.y<It.y||K.y>Bt.y))if(K.y===It.y){if(K.x===It.x)return!0}else{if(ht=Yt*(K.x-It.x)-Xt*(K.y-It.y),ht===0)return!0;0>ht||(st=!st)}}else if(K.y===It.y&&(Bt.x<=K.x&&K.x<=It.x||It.x<=K.x&&K.x<=Bt.x))return!0}return st}var c=sd.isClockWise,h=this.subPaths;if(h.length===0)return[];if(r===!0)return n(h);if(r=[],h.length===1){var d=h[0],f=new fl;return f.curves=d.curves,r.push(f),r}var x=!c(h[0].getPoints());x=t?!x:x,f=[];var E=[],N=[],C=0;E[C]=void 0,N[C]=[];for(var I=0,S=h.length;I<S;I++){d=h[I];var F=d.getPoints(),D=c(F);(D=t?!D:D)?(!x&&E[C]&&C++,E[C]={s:new fl,p:F},E[C].s.curves=d.curves,x&&C++,N[C]=[]):N[C].push({h:d,p:F[0]})}if(!E[0])return n(h);if(1<E.length){for(I=!1,t=[],c=0,h=E.length;c<h;c++)f[c]=[];for(c=0,h=E.length;c<h;c++)for(d=N[c],D=0;D<d.length;D++){for(x=d[D],C=!0,F=0;F<E.length;F++)s(x.p,E[F].p)&&(c!==F&&t.push({froms:c,tos:F,hole:D}),C?(C=!1,f[F].push(x)):I=!0);C&&f[c].push(x)}0<t.length&&(I||(N=f))}for(I=0,c=E.length;I<c;I++)for(f=E[I].s,r.push(f),t=N[I],h=0,d=t.length;h<d;h++)f.holes.push(t[h].h);return r}}),dt(im.prototype,{isFont:!0,generateShapes:function(t,r){r===void 0&&(r=100);var n=[],s=r;r=this.data;var c=fc?fc(t):String(t).split("");s/=r.resolution;var h=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*s;t=[];for(var d=0,f=0,x=0;x<c.length;x++){var E=c[x];if(E===`
`)d=0,f-=h;else{var N=E;E=s;var C=d,I=f,S=r,F=S.glyphs[N]||S.glyphs["?"];if(F){if(N=new nm,F.o){S=F._cachedOutline||(F._cachedOutline=F.o.split(" "));for(var D=0,K=S.length;D<K;)switch(S[D++]){case"m":var Z=S[D++]*E+C,$=S[D++]*E+I;N.moveTo(Z,$);break;case"l":Z=S[D++]*E+C,$=S[D++]*E+I,N.lineTo(Z,$);break;case"q":var st=S[D++]*E+C,ht=S[D++]*E+I,Et=S[D++]*E+C,It=S[D++]*E+I;N.quadraticCurveTo(Et,It,st,ht);break;case"b":st=S[D++]*E+C,ht=S[D++]*E+I,Et=S[D++]*E+C,It=S[D++]*E+I,Z=S[D++]*E+C,$=S[D++]*E+I,N.bezierCurveTo(Et,It,Z,$,st,ht)}}E={offsetX:F.ha*E,path:N}}else console.error('THREE.Font: character "'+N+'" does not exists in font family '+S.familyName+"."),E=void 0;d+=E.offsetX,t.push(E.path)}}for(r=0,c=t.length;r<c;r++)Array.prototype.push.apply(n,t[r].toShapes());return n}}),tc.prototype=dt(pt(Mn.prototype),{constructor:tc,load:function(t,r,n,s){var c=this,h=new Ba(this.manager);h.setPath(this.path),h.load(t,function(d){try{var f=JSON.parse(d)}catch(x){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),f=JSON.parse(d.substring(65,d.length-2))}d=c.parse(f),r&&r(d)},n,s)},parse:function(t){return new im(t)}});var Q1,KC={getContext:function(){return Q1===void 0&&(Q1=new(window.AudioContext||window.webkitAudioContext)),Q1},setContext:function(t){Q1=t}};Io.prototype=dt(pt(Mn.prototype),{constructor:Io,load:function(t,r,n,s){var c=this,h=new Ba(c.manager);h.setResponseType("arraybuffer"),h.setPath(c.path),h.load(t,function(d){try{var f=d.slice(0);KC.getContext().decodeAudioData(f,function(x){r(x)})}catch(x){s?s(x):console.error(x),c.manager.itemError(t)}},n,s)}}),ec.prototype=dt(pt(uA.prototype),{constructor:ec,isHemisphereLightProbe:!0,copy:function(t){return uA.prototype.copy.call(this,t),this},toJSON:function(t){return uA.prototype.toJSON.call(this,t)}}),rc.prototype=dt(pt(uA.prototype),{constructor:rc,isAmbientLightProbe:!0,copy:function(t){return uA.prototype.copy.call(this,t),this},toJSON:function(t){return uA.prototype.toJSON.call(this,t)}});var YC=new Qe,ZC=new Qe;dt(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Wr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Wr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function(t){var r=this._cache;if(r.focus!==t.focus||r.fov!==t.fov||r.aspect!==t.aspect*this.aspect||r.near!==t.near||r.far!==t.far||r.zoom!==t.zoom||r.eyeSep!==this.eyeSep){r.focus=t.focus,r.fov=t.fov,r.aspect=t.aspect*this.aspect,r.near=t.near,r.far=t.far,r.zoom=t.zoom,r.eyeSep=this.eyeSep;var n=t.projectionMatrix.clone(),s=r.eyeSep/2,c=s*r.near/r.focus,h=r.near*Math.tan(Jr.DEG2RAD*r.fov*.5)/r.zoom;ZC.elements[12]=-s,YC.elements[12]=s,s=-h*r.aspect+c;var d=h*r.aspect+c;n.elements[0]=2*r.near/(d-s),n.elements[8]=(d+s)/(d-s),this.cameraL.projectionMatrix.copy(n),s=-h*r.aspect-c,d=h*r.aspect-c,n.elements[0]=2*r.near/(d-s),n.elements[8]=(d+s)/(d-s),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(ZC),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(YC)}}),dt(Ru.prototype,{start:function(){this.oldTime=this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var r=(typeof performance=="undefined"?Date:performance).now();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}});var cg=new gt,JC=new Ee,d_=new gt,fg=new gt;zd.prototype=dt(pt(Oe.prototype),{constructor:zd,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){Oe.prototype.updateMatrixWorld.call(this,t),t=this.context.listener;var r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(cg,JC,d_),fg.set(0,0,-1).applyQuaternion(JC),t.positionX){var n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(cg.x,n),t.positionY.linearRampToValueAtTime(cg.y,n),t.positionZ.linearRampToValueAtTime(cg.z,n),t.forwardX.linearRampToValueAtTime(fg.x,n),t.forwardY.linearRampToValueAtTime(fg.y,n),t.forwardZ.linearRampToValueAtTime(fg.z,n),t.upX.linearRampToValueAtTime(r.x,n),t.upY.linearRampToValueAtTime(r.y,n),t.upZ.linearRampToValueAtTime(r.z,n)}else t.setPosition(cg.x,cg.y,cg.z),t.setOrientation(fg.x,fg.y,fg.z,r.x,r.y,r.z)}}),ru.prototype=dt(pt(Oe.prototype),{constructor:ru,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(t===void 0&&(t=0),this.isPlaying===!0)console.warn("THREE.Audio: Audio is already playing.");else if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+t,t=this.context.createBufferSource(),t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,r=this.filters.length;t<r;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,r=this.filters.length;t<r;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var pg=new gt,qC=new Ee,g_=new gt,dg=new gt;Ia.prototype=dt(pt(ru.prototype),{constructor:Ia,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,r,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=r,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(Oe.prototype.updateMatrixWorld.call(this,t),this.hasPlaybackControl!==!0||this.isPlaying!==!1)if(this.matrixWorld.decompose(pg,qC,g_),dg.set(0,0,1).applyQuaternion(qC),t=this.panner,t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(pg.x,r),t.positionY.linearRampToValueAtTime(pg.y,r),t.positionZ.linearRampToValueAtTime(pg.z,r),t.orientationX.linearRampToValueAtTime(dg.x,r),t.orientationY.linearRampToValueAtTime(dg.y,r),t.orientationZ.linearRampToValueAtTime(dg.z,r)}else t.setPosition(pg.x,pg.y,pg.z),t.setOrientation(dg.x,dg.y,dg.z)}}),dt(yp.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,r=this.getFrequencyData(),n=0;n<r.length;n++)t+=r[n];return t/r.length}}),dt(sh.prototype,{accumulate:function(t,r){var n=this.buffer,s=this.valueSize;t=t*s+s;var c=this.cumulativeWeight;if(c===0){for(c=0;c!==s;++c)n[t+c]=n[c];c=r}else c+=r,this._mixBufferRegion(n,t,0,r/c,s);this.cumulativeWeight=c},accumulateAdditive:function(t){var r=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(r,s,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){var r=this.valueSize,n=this.buffer;t=t*r+r;var s=this.cumulativeWeight,c=this.cumulativeWeightAdditive,h=this.binding;for(this.cumulativeWeightAdditive=this.cumulativeWeight=0,1>s&&this._mixBufferRegion(n,t,r*this._origIndex,1-s,r),0<c&&this._mixBufferRegionAdditive(n,t,this._addIndex*r,1,r),s=r,c=r+r;s!==c;++s)if(n[s]!==n[s+r]){h.setValue(n,t);break}},saveOriginalState:function(){var t=this.buffer,r=this.valueSize,n=r*this._origIndex;this.binding.getValue(t,n);for(var s=r;s!==n;++s)t[s]=t[n+s%r];this._setIdentity(),this.cumulativeWeightAdditive=this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,r=t+this.valueSize;t<r;t++)this.buffer[t]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[r+n]=this.buffer[t+n]},_select:function(t,r,n,s,c){if(.5<=s)for(s=0;s!==c;++s)t[r+s]=t[n+s]},_slerp:function(t,r,n,s){Ee.slerpFlat(t,r,t,r,t,n,s)},_slerpAdditive:function(t,r,n,s,c){c*=this._workIndex,Ee.multiplyQuaternionsFlat(t,c,t,r,t,n),Ee.slerpFlat(t,r,t,r,t,c,s)},_lerp:function(t,r,n,s,c){for(var h=1-s,d=0;d!==c;++d){var f=r+d;t[f]=t[f]*h+t[n+d]*s}},_lerpAdditive:function(t,r,n,s,c){for(var h=0;h!==c;++h){var d=r+h;t[d]+=t[n+h]*s}}});var m_=/[\[\]\.:\/]/g,v_="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",y_=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),x_=/(WCOD+)?/.source.replace("WCOD",v_),w_=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),C_=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),M_=new RegExp("^"+y_+x_+w_+C_+"$"),__=["material","materials","bones"];dt(xp.prototype,{getValue:function(t,r){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];n!==void 0&&n.getValue(t,r)},setValue:function(t,r){for(var n=this._bindings,s=this._targetGroup.nCachedObjects_,c=n.length;s!==c;++s)n[s].setValue(t,r)},bind:function(){for(var t=this._bindings,r=this._targetGroup.nCachedObjects_,n=t.length;r!==n;++r)t[r].bind()},unbind:function(){for(var t=this._bindings,r=this._targetGroup.nCachedObjects_,n=t.length;r!==n;++r)t[r].unbind()}}),dt(as,{Composite:xp,create:function(t,r,n){return t&&t.isAnimationObjectGroup?new as.Composite(t,r,n):new as(t,r,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(m_,"")},parseTrackName:function(t){var r=M_.exec(t);if(!r)throw Error("PropertyBinding: Cannot parse trackName: "+t);r={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]};var n=r.nodeName&&r.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){var s=r.nodeName.substring(n+1);__.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r},findNode:function(t,r){if(!r||r===""||r==="."||r===-1||r===t.name||r===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(r);if(n!==void 0)return n}return t.children&&(t=function s(c){for(var h=0;h<c.length;h++){var d=c[h];if(d.name===r||d.uuid===r||(d=s(d.children)))return d}return null}(t.children))?t:null}}),dt(as.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,r){t[r]=this.node[this.propertyName]},function(t,r){for(var n=this.resolvedProperty,s=0,c=n.length;s!==c;++s)t[r++]=n[s]},function(t,r){t[r]=this.resolvedProperty[this.propertyIndex]},function(t,r){this.resolvedProperty.toArray(t,r)}],SetterByBindingTypeAndVersioning:[[function(t,r){this.targetObject[this.propertyName]=t[r]},function(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0},function(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,r){for(var n=this.resolvedProperty,s=0,c=n.length;s!==c;++s)n[s]=t[r++]},function(t,r){for(var n=this.resolvedProperty,s=0,c=n.length;s!==c;++s)n[s]=t[r++];this.targetObject.needsUpdate=!0},function(t,r){for(var n=this.resolvedProperty,s=0,c=n.length;s!==c;++s)n[s]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,r){this.resolvedProperty[this.propertyIndex]=t[r]},function(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0},function(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,r){this.resolvedProperty.fromArray(t,r)},function(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0},function(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,r){this.bind(),this.getValue(t,r)},setValue:function(t,r){this.bind(),this.setValue(t,r)},bind:function(){var t=this.node,r=this.parsedPath,n=r.objectName,s=r.propertyName,c=r.propertyIndex;if(t||(this.node=t=as.findNode(this.rootNode,r.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var h=r.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}for(t=t.skeleton.bones,n=0;n<t.length;n++)if(t[n].name===h){h=n;break}break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(h!==void 0){if(t[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[h]}}if(h=t[s],h===void 0)console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+s+" but it wasn't found.",t);else{if(r=this.Versioning.None,this.targetObject=t,t.needsUpdate!==void 0?r=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(r=this.Versioning.MatrixWorldNeedsUpdate),n=this.BindingType.Direct,c!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[c]!==void 0&&(c=t.morphTargetDictionary[c])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}n=this.BindingType.ArrayElement,this.resolvedProperty=h,this.propertyIndex=c}else h.fromArray!==void 0&&h.toArray!==void 0?(n=this.BindingType.HasFromToArray,this.resolvedProperty=h):Array.isArray(h)?(n=this.BindingType.EntireArray,this.resolvedProperty=h):this.propertyName=s;this.getValue=this.GetterByBindingType[n],this.setValue=this.SetterByBindingTypeAndVersioning[n][r]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),dt(as.prototype,{_getValue_unbound:as.prototype.getValue,_setValue_unbound:as.prototype.setValue}),dt(function(){this.uuid=Jr.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var r=0,n=arguments.length;r!==n;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var s=this;this.stats={objects:{get total(){return s._objects.length},get inUse(){return this.total-s.nCachedObjects_}},get bindingsPerObject(){return s._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,r=t.length,n=this.nCachedObjects_,s=this._indicesByUUID,c=this._paths,h=this._parsedPaths,d=this._bindings,f=d.length,x=void 0,E=0,N=arguments.length;E!==N;++E){var C=arguments[E],I=C.uuid,S=s[I];if(S===void 0){S=r++,s[I]=S,t.push(C),I=0;for(var F=f;I!==F;++I)d[I].push(new as(C,c[I],h[I]))}else if(S<n){x=t[S];var D=--n;for(F=t[D],s[F.uuid]=S,t[S]=F,s[I]=D,t[D]=C,I=0,F=f;I!==F;++I){var K=d[I],Z=K[S];K[S]=K[D],Z===void 0&&(Z=new as(C,c[I],h[I])),K[D]=Z}}else t[S]!==x&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,r=this.nCachedObjects_,n=this._indicesByUUID,s=this._bindings,c=s.length,h=0,d=arguments.length;h!==d;++h){var f=arguments[h],x=f.uuid,E=n[x];if(E!==void 0&&E>=r){var N=r++,C=t[N];for(n[C.uuid]=E,t[E]=C,n[x]=N,t[N]=f,f=0,x=c;f!==x;++f){C=s[f];var I=C[E];C[E]=C[N],C[N]=I}}}this.nCachedObjects_=r},uncache:function(){for(var t=this._objects,r=t.length,n=this.nCachedObjects_,s=this._indicesByUUID,c=this._bindings,h=c.length,d=0,f=arguments.length;d!==f;++d){var x=arguments[d].uuid,E=s[x];if(E!==void 0)if(delete s[x],E<n){x=--n;var N=t[x],C=--r,I=t[C];for(s[N.uuid]=E,t[E]=N,s[I.uuid]=x,t[x]=I,t.pop(),N=0,I=h;N!==I;++N){var S=c[N],F=S[C];S[E]=S[x],S[x]=F,S.pop()}}else for(C=--r,I=t[C],s[I.uuid]=E,t[E]=I,t.pop(),N=0,I=h;N!==I;++N)S=c[N],S[E]=S[C],S.pop()}this.nCachedObjects_=n},subscribe_:function(t,r){var n=this._bindingsIndicesByPath,s=n[t],c=this._bindings;if(s!==void 0)return c[s];var h=this._paths,d=this._parsedPaths,f=this._objects,x=this.nCachedObjects_,E=Array(f.length);for(s=c.length,n[t]=s,h.push(t),d.push(r),c.push(E),n=x,s=f.length;n!==s;++n)E[n]=new as(f[n],t,r);return E},unsubscribe_:function(t){var r=this._bindingsIndicesByPath,n=r[t];if(n!==void 0){var s=this._paths,c=this._parsedPaths,h=this._bindings,d=h.length-1,f=h[d];r[t[d]]=n,h[n]=f,h.pop(),c[n]=c[d],c.pop(),s[n]=s[d],s.pop()}}}),dt(Qd.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,r){return this.loop=t,this.repetitions=r,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,r,n){if(t.fadeOut(r),this.fadeIn(r),n){n=this._clip.duration;var s=t._clip.duration,c=n/s;t.warp(1,s/n,r),this.warp(c,1,r)}return this},crossFadeTo:function(t,r,n){return t.crossFadeFrom(this,r,n)},stopFading:function(){var t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,r,n){var s=this._mixer,c=s.time,h=this._timeScaleInterpolant,d=this.timeScale;return h===null&&(this._timeScaleInterpolant=h=s._lendControlInterpolant()),s=h.parameterPositions,h=h.sampleValues,s[0]=c,s[1]=c+n,h[0]=t/d,h[1]=r/d,this},stopWarping:function(){var t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,r,n,s){if(this.enabled){var c=this._startTime;if(c!==null){if(r=(t-c)*n,0>r||n===0)return;this._startTime=null,r*=n}if(r*=this._updateTimeScale(t),n=this._updateTime(r),t=this._updateWeight(t),0<t)switch(r=this._interpolants,c=this._propertyBindings,this.blendMode){case 2501:for(var h=0,d=r.length;h!==d;++h)r[h].evaluate(n),c[h].accumulateAdditive(t);break;default:for(h=0,d=r.length;h!==d;++h)r[h].evaluate(n),c[h].accumulate(s,t)}}else this._updateWeight(t)},_updateWeight:function(t){var r=0;if(this.enabled){r=this.weight;var n=this._weightInterpolant;if(n!==null){var s=n.evaluate(t)[0];r*=s,t>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=r},_updateTimeScale:function(t){var r=0;if(!this.paused){r=this.timeScale;var n=this._timeScaleInterpolant;if(n!==null){var s=n.evaluate(t)[0];r*=s,t>n.parameterPositions[1]&&(this.stopWarping(),r===0?this.paused=!0:this.timeScale=r)}}return this._effectiveTimeScale=r},_updateTime:function(t){var r=this.time+t,n=this._clip.duration,s=this.loop,c=this._loopCount,h=s===2202;if(t===0)return c===-1?r:h&&(c&1)==1?n-r:r;if(s===2200)t:{if(c===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1)),r>=n)r=n;else if(0>r)r=0;else{this.time=r;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}else{if(c===-1&&(0<=t?(c=0,this._setEndings(!0,this.repetitions===0,h)):this._setEndings(this.repetitions===0,!0,h)),r>=n||0>r){s=Math.floor(r/n),r-=n*s,c+=Math.abs(s);var d=this.repetitions-c;0>=d?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r=0<t?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(d===1?(t=0>t,this._setEndings(t,!t,h)):this._setEndings(!1,!1,h),this._loopCount=c,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s}))}else this.time=r;if(h&&(c&1)==1)return n-r}return r},_setEndings:function(t,r,n){var s=this._interpolantSettings;n?(s.endingStart=2401,s.endingEnd=2401):(s.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,s.endingEnd=r?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,r,n){var s=this._mixer,c=s.time,h=this._weightInterpolant;return h===null&&(this._weightInterpolant=h=s._lendControlInterpolant()),s=h.parameterPositions,h=h.sampleValues,s[0]=c,h[0]=r,s[1]=c+t,h[1]=n,this}}),wp.prototype=dt(pt(ve.prototype),{constructor:wp,_bindAction:function(t,r){var n=t._localRoot||this._root,s=t._clip.tracks,c=s.length,h=t._propertyBindings;t=t._interpolants;var d=n.uuid,f=this._bindingsByRootAndName,x=f[d];for(x===void 0&&(x={},f[d]=x),f=0;f!==c;++f){var E=s[f],N=E.name,C=x[N];if(C===void 0){if(C=h[f],C!==void 0){C._cacheIndex===null&&(++C.referenceCount,this._addInactiveBinding(C,d,N));continue}C=new sh(as.create(n,N,r&&r._propertyBindings[f].binding.parsedPath),E.ValueTypeName,E.getValueSize()),++C.referenceCount,this._addInactiveBinding(C,d,N)}h[f]=C,t[f].resultBuffer=C.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){var r=(t._localRoot||this._root).uuid,n=t._clip.uuid,s=this._actionsByClip[n];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,n,r)}for(r=t._propertyBindings,n=0,s=r.length;n!==s;++n){var c=r[n];c.useCount++==0&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var r=t._propertyBindings,n=0,s=r.length;n!==s;++n){var c=r[n];--c.useCount==0&&(c.restoreOriginalState(),this._takeBackBinding(c))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return t=t._cacheIndex,t!==null&&t<this._nActiveActions},_addInactiveAction:function(t,r,n){var s=this._actions,c=this._actionsByClip,h=c[r];h===void 0?(h={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,c[r]=h):(r=h.knownActions,t._byClipCacheIndex=r.length,r.push(t)),t._cacheIndex=s.length,s.push(t),h.actionByRoot[n]=t},_removeInactiveAction:function(t){var r=this._actions,n=r[r.length-1],s=t._cacheIndex;n._cacheIndex=s,r[s]=n,r.pop(),t._cacheIndex=null,r=t._clip.uuid,n=this._actionsByClip,s=n[r];var c=s.knownActions,h=c[c.length-1],d=t._byClipCacheIndex;h._byClipCacheIndex=d,c[d]=h,c.pop(),t._byClipCacheIndex=null,delete s.actionByRoot[(t._localRoot||this._root).uuid],c.length===0&&delete n[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){t=t._propertyBindings;for(var r=0,n=t.length;r!==n;++r){var s=t[r];--s.referenceCount==0&&this._removeInactiveBinding(s)}},_lendAction:function(t){var r=this._actions,n=t._cacheIndex,s=this._nActiveActions++,c=r[s];t._cacheIndex=s,r[s]=t,c._cacheIndex=n,r[n]=c},_takeBackAction:function(t){var r=this._actions,n=t._cacheIndex,s=--this._nActiveActions,c=r[s];t._cacheIndex=s,r[s]=t,c._cacheIndex=n,r[n]=c},_addInactiveBinding:function(t,r,n){var s=this._bindingsByRootAndName,c=s[r],h=this._bindings;c===void 0&&(c={},s[r]=c),c[n]=t,t._cacheIndex=h.length,h.push(t)},_removeInactiveBinding:function(t){var r=this._bindings,n=t.binding,s=n.rootNode.uuid;n=n.path;var c=this._bindingsByRootAndName,h=c[s],d=r[r.length-1];t=t._cacheIndex,d._cacheIndex=t,r[t]=d,r.pop(),delete h[n],Xi(h).length===0&&delete c[s]},_lendBinding:function(t){var r=this._bindings,n=t._cacheIndex,s=this._nActiveBindings++,c=r[s];t._cacheIndex=s,r[s]=t,c._cacheIndex=n,r[n]=c},_takeBackBinding:function(t){var r=this._bindings,n=t._cacheIndex,s=--this._nActiveBindings,c=r[s];t._cacheIndex=s,r[s]=t,c._cacheIndex=n,r[n]=c},_lendControlInterpolant:function(){var t=this._controlInterpolants,r=this._nActiveControlInterpolants++,n=t[r];return n===void 0&&(n=new JA(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=r,t[r]=n),n},_takeBackControlInterpolant:function(t){var r=this._controlInterpolants,n=t.__cacheIndex,s=--this._nActiveControlInterpolants,c=r[s];t.__cacheIndex=s,r[s]=t,c.__cacheIndex=n,r[n]=c},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,r,n){var s=r||this._root,c=s.uuid;s=typeof t=="string"?sA.findByName(s,t):t,t=s!==null?s.uuid:t;var h=this._actionsByClip[t],d=null;if(n===void 0&&(n=s!==null?s.blendMode:2500),h!==void 0){if(d=h.actionByRoot[c],d!==void 0&&d.blendMode===n)return d;d=h.knownActions[0],s===null&&(s=d._clip)}return s===null?null:(r=new Qd(this,s,r,n),this._bindAction(r,d),this._addInactiveAction(r,t,c),r)},existingAction:function(t,r){var n=r||this._root;return r=n.uuid,n=typeof t=="string"?sA.findByName(n,t):t,t=this._actionsByClip[n?n.uuid:t],t!==void 0&&t.actionByRoot[r]||null},stopAllAction:function(){for(var t=this._actions,r=this._nActiveActions-1;0<=r;--r)t[r].stop();return this},update:function(t){t*=this.timeScale;for(var r=this._actions,n=this._nActiveActions,s=this.time+=t,c=wc(t),h=this._accuIndex^=1,d=0;d!==n;++d)r[d]._update(s,t,c,h);for(t=this._bindings,r=this._nActiveBindings,d=0;d!==r;++d)t[d].apply(h);return this},setTime:function(t){for(var r=this.time=0;r<this._actions.length;r++)this._actions[r].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var r=this._actions;t=t.uuid;var n=this._actionsByClip,s=n[t];if(s!==void 0){s=s.knownActions;for(var c=0,h=s.length;c!==h;++c){var d=s[c];this._deactivateAction(d);var f=d._cacheIndex,x=r[r.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,x._cacheIndex=f,r[f]=x,r.pop(),this._removeInactiveBindingsForAction(d)}delete n[t]}},uncacheRoot:function(t){t=t.uuid;var r=this._actionsByClip;for(s in r){var n=r[s].actionByRoot[t];n!==void 0&&(this._deactivateAction(n),this._removeInactiveAction(n))}var s=this._bindingsByRootAndName[t];if(s!==void 0)for(var c in s)t=s[c],t.restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,r){t=this.existingAction(t,r),t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}}),Pu.prototype.clone=function(){return new Pu(this.value.clone===void 0?this.value:this.value.clone())},Cp.prototype=dt(pt(ya.prototype),{constructor:Cp,isInstancedInterleavedBuffer:!0,copy:function(t){return ya.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),dt(nc.prototype,{set:function(t,r){this.ray.set(t,r)},setFromCamera:function(t,r){r&&r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r&&r.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,r,n){return n=n||[],ah(t,this,n,r),n.sort(bd),n},intersectObjects:function(t,r,n){if(n=n||[],Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var s=0,c=t.length;s<c;s++)ah(t[s],this,n,r);return n.sort(bd),n}}),dt(function(t,r,n){return this.radius=t!==void 0?t:1,this.phi=r!==void 0?r:0,this.theta=n!==void 0?n:0,this}.prototype,{set:function(t,r,n){return this.radius=t,this.phi=r,this.theta=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,r,n){return this.radius=Math.sqrt(t*t+r*r+n*n),this.radius===0?this.phi=this.theta=0:(this.theta=Math.atan2(t,n),this.phi=Math.acos(Jr.clamp(r/this.radius,-1,1))),this}}),dt(function(t,r,n){return this.radius=t!==void 0?t:1,this.theta=r!==void 0?r:0,this.y=n!==void 0?n:0,this}.prototype,{set:function(t,r,n){return this.radius=t,this.theta=r,this.y=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,r,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=r,this}});var $C=new ct;dt(kd.prototype,{set:function(t,r){return this.min.copy(t),this.max.copy(r),this},setFromPoints:function(t){this.makeEmpty();for(var r=0,n=t.length;r<n;r++)this.expandByPoint(t[r]);return this},setFromCenterAndSize:function(t,r){return r=$C.copy(r).multiplyScalar(.5),this.min.copy(t).sub(r),this.max.copy(t).add(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return t===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new ct),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return t===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new ct),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,r){return r===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),r=new ct),r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,r){return r===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),r=new ct),r.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return $C.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var t2=new gt,b1=new gt;dt(Mp.prototype,{set:function(t,r){return this.start.copy(t),this.end.copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return t===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new gt),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return t===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),t=new gt),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,r){return r===void 0&&(console.warn("THREE.Line3: .at() target is now required"),r=new gt),this.delta(r).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,r){return t2.subVectors(t,this.start),b1.subVectors(this.end,this.start),t=b1.dot(b1),t=b1.dot(t2)/t,r&&(t=Jr.clamp(t,0,1)),t},closestPointToPoint:function(t,r,n){return t=this.closestPointToPointParameter(t,r),n===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new gt),this.delta(n).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),lo.prototype=pt(Oe.prototype),lo.prototype.constructor=lo,lo.prototype.isImmediateRenderObject=!0;var e2=new gt;ef.prototype=pt(Oe.prototype),ef.prototype.constructor=ef,ef.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ef.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,r=t*Math.tan(this.light.angle);this.cone.scale.set(r,r,t),e2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Ad=new gt,k1=new Qe,Xx=new Qe;Ta.prototype=pt(uo.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isSkeletonHelper=!0,Ta.prototype.updateMatrixWorld=function(t){var r=this.bones,n=this.geometry,s=n.getAttribute("position");Xx.getInverse(this.root.matrixWorld);for(var c=0,h=0;c<r.length;c++){var d=r[c];d.parent&&d.parent.isBone&&(k1.multiplyMatrices(Xx,d.matrixWorld),Ad.setFromMatrixPosition(k1),s.setXYZ(h,Ad.x,Ad.y,Ad.z),k1.multiplyMatrices(Xx,d.parent.matrixWorld),Ad.setFromMatrixPosition(k1),s.setXYZ(h+1,Ad.x,Ad.y,Ad.z),h+=2)}n.getAttribute("position").needsUpdate=!0,Oe.prototype.updateMatrixWorld.call(this,t)},Uu.prototype=pt($i.prototype),Uu.prototype.constructor=Uu,Uu.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Uu.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var B_=new gt,r2=new Je,n2=new Je;UA.prototype=pt(Oe.prototype),UA.prototype.constructor=UA,UA.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},UA.prototype.update=function(){var t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var r=t.geometry.getAttribute("color");r2.copy(this.light.color),n2.copy(this.light.groundColor);for(var n=0,s=r.count;n<s;n++){var c=n<s/2?r2:n2;r.setXYZ(n,c.r,c.g,c.b)}r.needsUpdate=!0}t.lookAt(B_.setFromMatrixPosition(this.light.matrixWorld).negate())},pl.prototype=dt(pt(uo.prototype),{constructor:pl,copy:function(t){return uo.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return new this.constructor().copy(this)}}),rf.prototype=pt(uo.prototype),rf.prototype.constructor=rf;var i2=new gt,G1=new gt,o2=new gt;dl.prototype=pt(Oe.prototype),dl.prototype.constructor=dl,dl.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},dl.prototype.update=function(){i2.setFromMatrixPosition(this.light.matrixWorld),G1.setFromMatrixPosition(this.light.target.matrixWorld),o2.subVectors(G1,i2),this.lightPlane.lookAt(G1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(G1),this.targetLine.scale.z=o2.length()};var V1=new gt,_s=new un;nf.prototype=pt(uo.prototype),nf.prototype.constructor=nf,nf.prototype.update=function(){var t=this.geometry,r=this.pointMap;_s.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Do("c",r,t,_s,0,0,-1),Do("t",r,t,_s,0,0,1),Do("n1",r,t,_s,-1,-1,-1),Do("n2",r,t,_s,1,-1,-1),Do("n3",r,t,_s,-1,1,-1),Do("n4",r,t,_s,1,1,-1),Do("f1",r,t,_s,-1,-1,1),Do("f2",r,t,_s,1,-1,1),Do("f3",r,t,_s,-1,1,1),Do("f4",r,t,_s,1,1,1),Do("u1",r,t,_s,.7,1.1,-1),Do("u2",r,t,_s,-.7,1.1,-1),Do("u3",r,t,_s,0,2,-1),Do("cf1",r,t,_s,-1,0,1),Do("cf2",r,t,_s,1,0,1),Do("cf3",r,t,_s,0,-1,1),Do("cf4",r,t,_s,0,1,1),Do("cn1",r,t,_s,-1,0,-1),Do("cn2",r,t,_s,1,0,-1),Do("cn3",r,t,_s,0,-1,-1),Do("cn4",r,t,_s,0,1,-1),t.getAttribute("position").needsUpdate=!0};var W1=new hi;gl.prototype=pt(uo.prototype),gl.prototype.constructor=gl,gl.prototype.update=function(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&W1.setFromObject(this.object),!W1.isEmpty()){t=W1.min;var r=W1.max,n=this.geometry.attributes.position,s=n.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}},gl.prototype.setFromObject=function(t){return this.object=t,this.update(),this},gl.prototype.copy=function(t){return uo.prototype.copy.call(this,t),this.object=t.object,this},gl.prototype.clone=function(){return new this.constructor().copy(this)},ml.prototype=pt(uo.prototype),ml.prototype.constructor=ml,ml.prototype.updateMatrixWorld=function(t){var r=this.box;r.isEmpty()||(r.getCenter(this.position),r.getSize(this.scale),this.scale.multiplyScalar(.5),Oe.prototype.updateMatrixWorld.call(this,t))},vs.prototype=pt(Xs.prototype),vs.prototype.constructor=vs,vs.prototype.updateMatrixWorld=function(t){var r=-this.plane.constant;1e-8>Math.abs(r)&&(r=1e-8),this.scale.set(.5*this.size,.5*this.size,r),this.children[0].material.side=0>r?1:0,this.lookAt(this.plane.normal),Oe.prototype.updateMatrixWorld.call(this,t)};var s2=new gt,j1,Kx;nr.prototype=pt(Oe.prototype),nr.prototype.constructor=nr,nr.prototype.setDirection=function(t){.99999<t.y?this.quaternion.set(0,0,0,1):-.99999>t.y?this.quaternion.set(1,0,0,0):(s2.set(t.z,0,-t.x).normalize(),this.quaternion.setFromAxisAngle(s2,Math.acos(t.y)))},nr.prototype.setLength=function(t,r,n){r===void 0&&(r=.2*t),n===void 0&&(n=.2*r),this.line.scale.set(1,Math.max(1e-4,t-r),1),this.line.updateMatrix(),this.cone.scale.set(n,r,n),this.cone.position.y=t,this.cone.updateMatrix()},nr.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},nr.prototype.copy=function(t){return Oe.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},nr.prototype.clone=function(){return new this.constructor().copy(this)},_p.prototype=pt(uo.prototype),_p.prototype.constructor=_p;var a2=[.125,.215,.35,.446,.526,.582],E_=5+a2.length,gg={};Fr(gg,3e3,0),Fr(gg,3001,1),Fr(gg,3002,2),Fr(gg,3004,3),Fr(gg,3005,4),Fr(gg,3006,5),Fr(gg,3007,6),new Ea,function(){for(var t=[],r=[],n=[],s=8,c=0;c<E_;c++){var h=Math.pow(2,s);r.push(h);var d=1/h;4<c?d=a2[c-8+4-1]:c==0&&(d=0),n.push(d),d=1/(h-1),h=-d/2,d=1+d/2;var f=[h,h,d,h,d,d,h,h,d,d,h,d];h=new Float32Array(108),d=new Float32Array(72);for(var x=new Float32Array(36),E=0;6>E;E++){var N=E%3*2/3-1,C=2<E?0:-1;h.set([N,C,0,N+2/3,C,0,N+2/3,C+1,0,N,C,0,N+2/3,C+1,0,N,C+1,0],18*E),d.set(f,12*E),x.set([E,E,E,E,E,E],6*E)}f=new sr,f.setAttribute("position",new Kr(h,3)),f.setAttribute("uv",new Kr(d,2)),f.setAttribute("faceIndex",new Kr(x,1)),t.push(f),4<s&&s--}return{_lodPlanes:t,_sizeLods:r,_sigmas:n}}(),fn.create=function(t,r){return t.prototype=pt(fn.prototype),t.prototype.constructor=t,t.prototype.getPoint=r,t},dt(cl.prototype,{createPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var r=new ze,n=0,s=t.length;n<s;n++){var c=t[n];r.vertices.push(new gt(c.x,c.y,c.z||0))}return r}}),dt(ni.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),function(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),sa.call(this,t),this.type="catmullrom",this.closed=!0}.prototype=pt(sa.prototype),function(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),sa.call(this,t),this.type="catmullrom"}.prototype=pt(sa.prototype),Vd.prototype=pt(sa.prototype),dt(Vd.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),pl.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Ta.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},dt(Mn.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ad.extractUrlBase(t)}}),Mn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},dt(ja.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),dt(kd.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),dt(hi.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),dt(mo.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Pn.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Mp.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},dt(Jr,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Jr.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Jr.ceilPowerOfTwo(t)}}),dt(kt.prototype,{flattenToArrayOffset:function(t,r){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,r)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),dt(Qe.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,r){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,r)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new gt().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,r,n,s,c,h){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,r,s,n,c,h)}}),ci.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Ee.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},dt(ns.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),dt(Ui.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,r)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),dt(Ui,{barycoordFromPoint:function(t,r,n,s,c){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ui.getBarycoord(t,r,n,s,c)},normal:function(t,r,n,s){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ui.getNormal(t,r,n,s)}}),dt(fl.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Go(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new oa(this,t)}}),dt(ct.prototype,{fromAttribute:function(t,r,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,r,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),dt(gt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,r){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(r,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,r,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,r,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),dt(Ht.prototype,{fromAttribute:function(t,r,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,r,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),dt(ze.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),dt(Oe.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,r){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(r,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),vn(Oe.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),dt($i.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),vn($i.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),vn(js.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(na.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),xa.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(fn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Wr.prototype.setLens=function(t,r){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),r!==void 0&&(this.filmGauge=r),this.setFocalLength(t)},vn(Yi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),vn(Kr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===35048},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),dt(Kr.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),dt(sr.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,r,n){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),r&&r.isBufferAttribute||r&&r.isInterleavedBufferAttribute?t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(r),this):this.setAttribute(t,r):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Kr(r,n)))},addDrawCall:function(t,r,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,r)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),vn(sr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),vn(vp.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),vn(nc.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),vn(ya.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===35048},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),dt(ya.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),dt(ss.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),vn(Pu.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),vn(hn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Je}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===1}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),vn(_a.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),vn(gr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),dt(Ws.prototype,{clearTarget:function(t,r,n,s){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(r,n,s)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),vn(Ws.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?3001:3e3}}}),vn(LA.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),vn(Zt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),vn(ru.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var r=this;return new Io().load(t,function(n){r.setBuffer(n)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),yp.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Yr.prototype.updateCubeMap=function(t,r){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,r)},ca.crossOrigin=void 0,ca.loadTexture=function(t,r,n,s){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var c=new qc;return c.setCrossOrigin(this.crossOrigin),t=c.load(t,n,void 0,s),r&&(t.mapping=r),t},ca.loadTextureCube=function(t,r,n,s){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var c=new Rd;return c.setCrossOrigin(this.crossOrigin),t=c.load(t,n,void 0,s),r&&(t.mapping=r),t},ca.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ca.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"117"}}));var mg=function(t){Mn.call(this,t)};mg.prototype=dt(pt(Mn.prototype),{constructor:mg,load:function(t,r,n,s){var c=this,h=this.path===""?ad.extractUrlBase(t):this.path,d=new Ba(this.manager);d.setPath(this.path),d.load(t,function(f){try{r(c.parse(f,h))}catch(x){s?s(x):console.error(x),c.manager.itemError(t)}},n,s)},setMaterialOptions:function(t){return this.materialOptions=t,this},parse:function(t,r){var n=t.split(`
`),s={},c=/\s+/;t={};for(var h=0;h<n.length;h++){var d=n[h];if(d=d.trim(),d.length!==0&&d.charAt(0)!=="#"){var f=d.indexOf(" "),x=0<=f?d.substring(0,f):d;x=x.toLowerCase(),d=0<=f?d.substring(f+1):"",d=d.trim(),x==="newmtl"?(s={name:d},t[d]=s):x==="ka"||x==="kd"||x==="ks"||x==="ke"?(d=d.split(c,3),s[x]=[parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2])]):s[x]=d}}return r=new mg.MaterialCreator(this.resourcePath||r,this.materialOptions),r.setCrossOrigin(this.crossOrigin),r.setManager(this.manager),r.setMaterials(t),r}}),mg.MaterialCreator=function(t,r){this.baseUrl=t||"",this.options=r,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:0,this.wrap=this.options&&this.options.wrap?this.options.wrap:1e3},mg.MaterialCreator.prototype={constructor:mg.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(t){return this.crossOrigin=t,this},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var r={},n;for(n in t){var s=t[n],c={};r[n]=c;for(var h in s){var d=!0,f=s[h],x=h.toLowerCase();switch(x){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(f=[f[0]/255,f[1]/255,f[2]/255]),this.options&&this.options.ignoreZeroRGBs&&f[0]===0&&f[1]===0&&f[2]===0&&(d=!1)}d&&(c[x]=f)}}return r},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0,r;for(r in this.materialsInfo)this.materialsArray[t]=this.create(r),this.nameLookup[r]=t,t++;return this.materialsArray},create:function(t){return this.materials[t]===void 0&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){function r(x,E){return typeof E!="string"||E===""?"":/^https?:\/\//i.test(E)?E:x+E}function n(x,E){if(!h[x]){E=s.getTextureParams(E,h);var N=s.loadTexture(r(s.baseUrl,E.url));N.repeat.copy(E.scale),N.offset.copy(E.offset),N.wrapS=s.wrap,N.wrapT=s.wrap,h[x]=N}}var s=this,c=this.materialsInfo[t],h={name:t,side:this.side},d;for(d in c){var f=c[d];if(f!=="")switch(d.toLowerCase()){case"kd":h.color=new Je().fromArray(f);break;case"ks":h.specular=new Je().fromArray(f);break;case"ke":h.emissive=new Je().fromArray(f);break;case"map_kd":n("map",f);break;case"map_ks":n("specularMap",f);break;case"map_ke":n("emissiveMap",f);break;case"norm":n("normalMap",f);break;case"map_bump":case"bump":n("bumpMap",f);break;case"map_d":n("alphaMap",f),h.transparent=!0;break;case"ns":h.shininess=parseFloat(f);break;case"d":f=parseFloat(f),1>f&&(h.opacity=f,h.transparent=!0);break;case"tr":f=parseFloat(f),this.options&&this.options.invertTrProperty&&(f=1-f),0<f&&(h.opacity=1-f,h.transparent=!0)}}return this.materials[t]=new _a(h),this.materials[t]},getTextureParams:function(t,r){var n={scale:new ct(1,1),offset:new ct(0,0)};t=t.split(/\s+/);var s=t.indexOf("-bm");return 0<=s&&(r.bumpScale=parseFloat(t[s+1]),t.splice(s,2)),s=t.indexOf("-s"),0<=s&&(n.scale.set(parseFloat(t[s+1]),parseFloat(t[s+2])),t.splice(s,4)),s=t.indexOf("-o"),0<=s&&(n.offset.set(parseFloat(t[s+1]),parseFloat(t[s+2])),t.splice(s,4)),n.url=t.join(" ").trim(),n},loadTexture:function(t,r,n,s,c){var h=this.manager!==void 0?this.manager:WC,d=h.getHandler(t);return d===null&&(d=new qc(h)),d.setCrossOrigin&&d.setCrossOrigin(this.crossOrigin),t=d.load(t,n,s,c),r!==void 0&&(t.mapping=r),t}};var I_=function(){function t(){var C={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(I,S){if(this.object&&this.object.fromDeclaration===!1)this.object.name=I,this.object.fromDeclaration=S!==!1;else{var F=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:I||"",fromDeclaration:S!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasNormalIndices:!1,hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(D,K){var Z=this._finalize(!1);return Z&&(Z.inherited||0>=Z.groupCount)&&this.materials.splice(Z.index,1),D={index:this.materials.length,name:D||"",mtllib:Array.isArray(K)&&0<K.length?K[K.length-1]:"",smooth:Z!==void 0?Z.smooth:this.smooth,groupStart:Z!==void 0?Z.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function($){return $={index:typeof $=="number"?$:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1},$.clone=this.clone.bind($),$}},this.materials.push(D),D},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(D){var K=this.currentMaterial();if(K&&K.groupEnd===-1&&(K.groupEnd=this.geometry.vertices.length/3,K.groupCount=K.groupEnd-K.groupStart,K.inherited=!1),D&&1<this.materials.length)for(var Z=this.materials.length-1;0<=Z;Z--)0>=this.materials[Z].groupCount&&this.materials.splice(Z,1);return D&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),K}},F&&F.name&&typeof F.clone=="function"&&(I=F.clone(0),I.inherited=!0,this.object.materials.push(I)),this.objects.push(this.object)}},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(I,S){return I=parseInt(I,10),3*(0<=I?I-1:I+S/3)},parseNormalIndex:function(I,S){return I=parseInt(I,10),3*(0<=I?I-1:I+S/3)},parseUVIndex:function(I,S){return I=parseInt(I,10),2*(0<=I?I-1:I+S/2)},addVertex:function(I,S,F){var D=this.vertices,K=this.object.geometry.vertices;K.push(D[I+0],D[I+1],D[I+2]),K.push(D[S+0],D[S+1],D[S+2]),K.push(D[F+0],D[F+1],D[F+2])},addVertexPoint:function(I){var S=this.vertices;this.object.geometry.vertices.push(S[I+0],S[I+1],S[I+2])},addVertexLine:function(I){var S=this.vertices;this.object.geometry.vertices.push(S[I+0],S[I+1],S[I+2])},addNormal:function(I,S,F){var D=this.normals,K=this.object.geometry.normals;K.push(D[I+0],D[I+1],D[I+2]),K.push(D[S+0],D[S+1],D[S+2]),K.push(D[F+0],D[F+1],D[F+2])},addFaceNormal:function(I,S,F){var D=this.vertices,K=this.object.geometry.normals;d.fromArray(D,I),f.fromArray(D,S),x.fromArray(D,F),N.subVectors(x,f),E.subVectors(d,f),N.cross(E),N.normalize(),K.push(N.x,N.y,N.z),K.push(N.x,N.y,N.z),K.push(N.x,N.y,N.z)},addColor:function(I,S,F){var D=this.colors,K=this.object.geometry.colors;D[I]!==void 0&&K.push(D[I+0],D[I+1],D[I+2]),D[S]!==void 0&&K.push(D[S+0],D[S+1],D[S+2]),D[F]!==void 0&&K.push(D[F+0],D[F+1],D[F+2])},addUV:function(I,S,F){var D=this.uvs,K=this.object.geometry.uvs;K.push(D[I+0],D[I+1]),K.push(D[S+0],D[S+1]),K.push(D[F+0],D[F+1])},addDefaultUV:function(){var I=this.object.geometry.uvs;I.push(0,0),I.push(0,0),I.push(0,0)},addUVLine:function(I){var S=this.uvs;this.object.geometry.uvs.push(S[I+0],S[I+1])},addFace:function(I,S,F,D,K,Z,$,st,ht){var Et=this.vertices.length;I=this.parseVertexIndex(I,Et),S=this.parseVertexIndex(S,Et),F=this.parseVertexIndex(F,Et),this.addVertex(I,S,F),this.addColor(I,S,F),$!==void 0&&$!==""?(F=this.normals.length,I=this.parseNormalIndex($,F),S=this.parseNormalIndex(st,F),F=this.parseNormalIndex(ht,F),this.addNormal(I,S,F),this.object.geometry.hasNormalIndices=!0):this.addFaceNormal(I,S,F),D!==void 0&&D!==""?($=this.uvs.length,I=this.parseUVIndex(D,$),S=this.parseUVIndex(K,$),F=this.parseUVIndex(Z,$),this.addUV(I,S,F),this.object.geometry.hasUVIndices=!0):this.addDefaultUV()},addPointGeometry:function(I){this.object.geometry.type="Points";for(var S=this.vertices.length,F=0,D=I.length;F<D;F++)this.addVertexPoint(this.parseVertexIndex(I[F],S))},addLineGeometry:function(I,S){this.object.geometry.type="Line";for(var F=this.vertices.length,D=this.uvs.length,K=0,Z=I.length;K<Z;K++)this.addVertexLine(this.parseVertexIndex(I[K],F));for(I=0,Z=S.length;I<Z;I++)this.addUVLine(this.parseUVIndex(S[I],D))}};return C.startObject("",!1),C}function r(C){Mn.call(this,C),this.materials=null}var n=/^[og]\s*(.+)?/,s=/^mtllib /,c=/^usemtl /,h=/^usemap /,d=new gt,f=new gt,x=new gt,E=new gt,N=new gt;return r.prototype=dt(pt(Mn.prototype),{constructor:r,load:function(C,I,S,F){var D=this,K=new Ba(D.manager);K.setPath(this.path),K.load(C,function(Z){try{I(D.parse(Z))}catch($){F?F($):console.error($),D.manager.itemError(C)}},S,F)},setMaterials:function(C){return this.materials=C,this},parse:function(C){var I=new t;C.indexOf(`\r
`)!==-1&&(C=C.replace(/\r\n/g,`
`)),C.indexOf(`\\
`)!==-1&&(C=C.replace(/\\\n/g,""));var S=C.split(`
`),F,D=typeof"".trimLeft=="function";C=0;for(var K=S.length;C<K;C++){var Z=S[C];Z=D?Z.trimLeft():Z.trim();var $=Z.length;if($!==0&&($=Z.charAt(0),$!=="#"))if($==="v")switch(Z=Z.split(/\s+/),Z[0]){case"v":I.vertices.push(parseFloat(Z[1]),parseFloat(Z[2]),parseFloat(Z[3])),7<=Z.length?I.colors.push(parseFloat(Z[4]),parseFloat(Z[5]),parseFloat(Z[6])):I.colors.push(void 0,void 0,void 0);break;case"vn":I.normals.push(parseFloat(Z[1]),parseFloat(Z[2]),parseFloat(Z[3]));break;case"vt":I.uvs.push(parseFloat(Z[1]),parseFloat(Z[2]))}else if($==="f"){Z=Z.substr(1).trim();var st=Z.split(/\s+/);for(Z=[],$=0,F=st.length;$<F;$++){var ht=st[$];0<ht.length&&(ht=ht.split("/"),Z.push(ht))}for(st=Z[0],$=1,F=Z.length-1;$<F;$++){ht=Z[$];var Et=Z[$+1];I.addFace(st[0],ht[0],Et[0],st[1],ht[1],Et[1],st[2],ht[2],Et[2])}}else if($==="l"){if($=Z.substring(1).trim().split(" "),F=[],st=[],Z.indexOf("/")===-1)F=$;else for(Z=0,ht=$.length;Z<ht;Z++)Et=$[Z].split("/"),Et[0]!==""&&F.push(Et[0]),Et[1]!==""&&st.push(Et[1]);I.addLineGeometry(F,st)}else $==="p"?(Z=Z.substr(1).trim(),Z=Z.split(" "),I.addPointGeometry(Z)):(F=n.exec(Z))!==null?(Z=(" "+F[0].substr(1).trim()).substr(1),I.startObject(Z)):c.test(Z)?I.object.startMaterial(Z.substring(7).trim(),I.materialLibraries):s.test(Z)?I.materialLibraries.push(Z.substring(7).trim()):h.test(Z)?console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.'):$==="s"?(F=Z.split(" "),1<F.length?(Z=F[1].trim().toLowerCase(),I.object.smooth=Z!=="0"&&Z!=="off"):I.object.smooth=!0,(Z=I.object.currentMaterial())&&(Z.smooth=I.object.smooth)):Z!=="\0"&&console.warn('THREE.OBJLoader: Unexpected line: "'+Z+'"')}for(I.finalize(),S=new va,S.materialLibraries=[].concat(I.materialLibraries),C=0,K=I.objects.length;C<K;C++)if(D=I.objects[C],Z=D.geometry,$=D.materials,F=Z.type==="Line",st=Z.type==="Points",ht=!1,Z.vertices.length!==0){Et=new sr,Et.setAttribute("position",new or(Z.vertices,3)),Z.hasNormalIndices===!0&&Et.setAttribute("normal",new or(Z.normals,3)),0<Z.colors.length&&(ht=!0,Et.setAttribute("color",new or(Z.colors,3))),Z.hasUVIndices===!0&&Et.setAttribute("uv",new or(Z.uvs,2));for(var It=[],Bt=0,Xt=$.length;Bt<Xt;Bt++){var Yt=$[Bt],fe=Yt.name+"_"+Yt.smooth+"_"+ht;if(Z=I.materials[fe],this.materials!==null)if(Z=this.materials.create(Yt.name),!F||!Z||Z instanceof pi)!st||!Z||Z instanceof ba||(te=new ba({size:10,sizeAttenuation:!1}),hn.prototype.copy.call(te,Z),te.color.copy(Z.color),te.map=Z.map,Z=te);else{var te=new pi;hn.prototype.copy.call(te,Z),te.color.copy(Z.color),Z=te}Z===void 0&&(Z=F?new pi:st?new ba({size:1,sizeAttenuation:!1}):new _a,Z.name=Yt.name,Z.flatShading=!Yt.smooth,Z.vertexColors=ht,I.materials[fe]=Z),It.push(Z)}if(1<It.length){for(Bt=0,Xt=$.length;Bt<Xt;Bt++)Yt=$[Bt],Et.addGroup(Yt.groupStart,Yt.groupCount,Bt);Z=F?new uo(Et,It):st?new xu(Et,It):new $i(Et,It)}else Z=F?new uo(Et,It[0]):st?new xu(Et,It[0]):new $i(Et,It[0]);Z.name=D.name,S.add(Z)}return S}}),r}(),T_=function(){function t(Ct){Mn.call(this,Ct),this.ddsLoader=this.dracoLoader=null}function r(){var Ct={};return{get:function(Mt){return Ct[Mt]},add:function(Mt,_t){Ct[Mt]=_t},remove:function(Mt){delete Ct[Mt]},removeAll:function(){Ct={}}}}function n(Ct){if(!Ct)throw Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=Xt.MSFT_TEXTURE_DDS,this.ddsLoader=Ct}function s(Ct){this.name=Xt.KHR_LIGHTS_PUNCTUAL,this.lightDefs=(Ct.extensions&&Ct.extensions[Xt.KHR_LIGHTS_PUNCTUAL]||{}).lights||[]}function c(){this.name=Xt.KHR_MATERIALS_UNLIT}function h(){this.name=Xt.KHR_MATERIALS_CLEARCOAT}function d(Ct){this.name=Xt.KHR_BINARY_GLTF,this.body=this.content=null;var Mt=new DataView(Ct,0,fe);if(this.header={magic:ad.decodeText(new Uint8Array(Ct.slice(0,4))),version:Mt.getUint32(4,!0),length:Mt.getUint32(8,!0)},this.header.magic!==Yt)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(2>this.header.version)throw Error("THREE.GLTFLoader: Legacy binary file detected.");Mt=new DataView(Ct,fe);for(var _t=0;_t<Mt.byteLength;){var Pt=Mt.getUint32(_t,!0);_t+=4;var at=Mt.getUint32(_t,!0);_t+=4,at===te.JSON?(at=new Uint8Array(Ct,fe+_t,Pt),this.content=ad.decodeText(at)):at===te.BIN&&(at=fe+_t,this.body=Ct.slice(at,at+Pt)),_t+=Pt}if(this.content===null)throw Error("THREE.GLTFLoader: JSON content not found.")}function f(Ct,Mt){if(!Mt)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Xt.KHR_DRACO_MESH_COMPRESSION,this.json=Ct,this.dracoLoader=Mt,this.dracoLoader.preload()}function x(){this.name=Xt.KHR_TEXTURE_TRANSFORM}function E(Ct){ms.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var Mt={specular:{value:new Je().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Mt,this.onBeforeCompile=function(_t){for(var Pt in Mt)_t.uniforms[Pt]=Mt[Pt];_t.fragmentShader=_t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),_t.fragmentShader=_t.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),_t.fragmentShader=_t.fragmentShader.replace("#include <roughnessmap_pars_fragment>",`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`),_t.fragmentShader=_t.fragmentShader.replace("#include <metalnessmap_pars_fragment>",`#ifdef USE_GLOSSINESSMAP
	uniform sampler2D glossinessMap;
#endif`),_t.fragmentShader=_t.fragmentShader.replace("#include <roughnessmap_fragment>",`vec3 specularFactor = specular;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	texelSpecular = sRGBToLinear( texelSpecular );
	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture
	specularFactor *= texelSpecular.rgb;
#endif`),_t.fragmentShader=_t.fragmentShader.replace("#include <metalnessmap_fragment>",`float glossinessFactor = glossiness;
#ifdef USE_GLOSSINESSMAP
	vec4 texelGlossiness = texture2D( glossinessMap, vUv );
	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture
	glossinessFactor *= texelGlossiness.a;
#endif`),_t.fragmentShader=_t.fragmentShader.replace("#include <lights_physical_fragment>",`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.
material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
material.specularColor = specularFactor.rgb;`)},vn(this,{specular:{get:function(){return Mt.specular.value},set:function(_t){Mt.specular.value=_t}},specularMap:{get:function(){return Mt.specularMap.value},set:function(_t){Mt.specularMap.value=_t}},glossiness:{get:function(){return Mt.glossiness.value},set:function(_t){Mt.glossiness.value=_t}},glossinessMap:{get:function(){return Mt.glossinessMap.value},set:function(_t){(Mt.glossinessMap.value=_t)?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(Ct)}function N(){return{name:Xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:"color map lightMap lightMapIntensity aoMap aoMapIntensity emissive emissiveIntensity emissiveMap bumpMap bumpScale normalMap normalMapType displacementMap displacementScale displacementBias specularMap specular glossinessMap glossiness alphaMap envMap envMapIntensity refractionRatio".split(" "),getMaterialType:function(){return E},extendParams:function(Ct,Mt,_t){var Pt=Mt.extensions[this.name];if(Ct.color=new Je(1,1,1),Ct.opacity=1,Mt=[],Array.isArray(Pt.diffuseFactor)){var at=Pt.diffuseFactor;Ct.color.fromArray(at),Ct.opacity=at[3]}return Pt.diffuseTexture!==void 0&&Mt.push(_t.assignTexture(Ct,"map",Pt.diffuseTexture)),Ct.emissive=new Je(0,0,0),Ct.glossiness=Pt.glossinessFactor!==void 0?Pt.glossinessFactor:1,Ct.specular=new Je(1,1,1),Array.isArray(Pt.specularFactor)&&Ct.specular.fromArray(Pt.specularFactor),Pt.specularGlossinessTexture!==void 0&&(Pt=Pt.specularGlossinessTexture,Mt.push(_t.assignTexture(Ct,"glossinessMap",Pt)),Mt.push(_t.assignTexture(Ct,"specularMap",Pt))),Ve.all(Mt)},createMaterial:function(Ct){var Mt=new E(Ct);return Mt.fog=!0,Mt.color=Ct.color,Mt.map=Ct.map===void 0?null:Ct.map,Mt.lightMap=null,Mt.lightMapIntensity=1,Mt.aoMap=Ct.aoMap===void 0?null:Ct.aoMap,Mt.aoMapIntensity=1,Mt.emissive=Ct.emissive,Mt.emissiveIntensity=1,Mt.emissiveMap=Ct.emissiveMap===void 0?null:Ct.emissiveMap,Mt.bumpMap=Ct.bumpMap===void 0?null:Ct.bumpMap,Mt.bumpScale=1,Mt.normalMap=Ct.normalMap===void 0?null:Ct.normalMap,Mt.normalMapType=0,Ct.normalScale&&(Mt.normalScale=Ct.normalScale),Mt.displacementMap=null,Mt.displacementScale=1,Mt.displacementBias=0,Mt.specularMap=Ct.specularMap===void 0?null:Ct.specularMap,Mt.specular=Ct.specular,Mt.glossinessMap=Ct.glossinessMap===void 0?null:Ct.glossinessMap,Mt.glossiness=Ct.glossiness,Mt.alphaMap=null,Mt.envMap=Ct.envMap===void 0?null:Ct.envMap,Mt.envMapIntensity=1,Mt.refractionRatio=.98,Mt}}}function C(){this.name=Xt.KHR_MESH_QUANTIZATION}function I(Ct,Mt,_t,Pt){Zs.call(this,Ct,Mt,_t,Pt)}function S(Ct,Mt){return typeof Ct!="string"||Ct===""?"":(/^https?:\/\//i.test(Mt)&&/^\//.test(Ct)&&(Mt=Mt.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(Ct)||/^data:.*,.*$/i.test(Ct)||/^blob:.*$/i.test(Ct)?Ct:Mt+Ct)}function F(Ct){return Ct.DefaultMaterial===void 0&&(Ct.DefaultMaterial=new ms({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),Ct.DefaultMaterial}function D(Ct,Mt,_t){for(var Pt in _t.extensions)Ct[Pt]===void 0&&(Mt.userData.gltfExtensions=Mt.userData.gltfExtensions||{},Mt.userData.gltfExtensions[Pt]=_t.extensions[Pt])}function K(Ct,Mt){Mt.extras!==void 0&&(QA(Mt.extras)==="object"?dt(Ct.userData,Mt.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Mt.extras))}function Z(Ct,Mt,_t){for(var Pt=!1,at=!1,vt=0,yt=Mt.length;vt<yt;vt++){var Dt=Mt[vt];if(Dt.POSITION!==void 0&&(Pt=!0),Dt.NORMAL!==void 0&&(at=!0),Pt&&at)break}if(!Pt&&!at)return Ve.resolve(Ct);var Jt=[],ae=[];for(vt=0,yt=Mt.length;vt<yt;vt++){if(Dt=Mt[vt],Pt){var xt=Dt.POSITION!==void 0?_t.getDependency("accessor",Dt.POSITION):Ct.attributes.position;Jt.push(xt)}at&&(xt=Dt.NORMAL!==void 0?_t.getDependency("accessor",Dt.NORMAL):Ct.attributes.normal,ae.push(xt))}return Ve.all([Ve.all(Jt),Ve.all(ae)]).then(function(Se){var Re=Se[0];return Se=Se[1],Pt&&(Ct.morphAttributes.position=Re),at&&(Ct.morphAttributes.normal=Se),Ct.morphTargetsRelative=!0,Ct})}function $(Ct){var Mt=Ct.extensions&&Ct.extensions[Xt.KHR_DRACO_MESH_COMPRESSION];return Mt?"draco:"+Mt.bufferView+":"+Mt.indices+":"+st(Mt.attributes):Ct.indices+":"+st(Ct.attributes)+":"+Ct.mode}function st(Ct){for(var Mt="",_t=Xi(Ct).sort(),Pt=0,at=_t.length;Pt<at;Pt++)Mt+=_t[Pt]+":"+Ct[_t[Pt]]+";";return Mt}function ht(Ct,Mt,_t){this.json=Ct||{},this.extensions=Mt||{},this.options=_t||{},this.cache=new r,this.associations=new Ye,this.primitiveCache={},this.textureLoader=new qc(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new Ba(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}function Et(Ct,Mt,_t){var Pt=Mt.attributes,at=new hi;if(Pt.POSITION!==void 0){var vt=_t.json.accessors[Pt.POSITION];if(Pt=vt.min,vt=vt.max,Pt!==void 0&&vt!==void 0){if(at.set(new gt(Pt[0],Pt[1],Pt[2]),new gt(vt[0],vt[1],vt[2])),Mt=Mt.targets,Mt!==void 0){for(var yt=new gt,Dt=new gt,Jt=0,ae=Mt.length;Jt<ae;Jt++)Pt=Mt[Jt],Pt.POSITION!==void 0&&(vt=_t.json.accessors[Pt.POSITION],Pt=vt.min,vt=vt.max,Pt!==void 0&&vt!==void 0?(Dt.setX(Math.max(Math.abs(Pt[0]),Math.abs(vt[0]))),Dt.setY(Math.max(Math.abs(Pt[1]),Math.abs(vt[1]))),Dt.setZ(Math.max(Math.abs(Pt[2]),Math.abs(vt[2]))),yt.max(Dt)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."));at.expandByVector(yt)}Ct.boundingBox=at,_t=new mo,at.getCenter(_t.center),_t.radius=at.min.distanceTo(at.max)/2,Ct.boundingSphere=_t}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function It(Ct,Mt,_t){function Pt(Jt,ae){return _t.getDependency("accessor",Jt).then(function(xt){Ct.setAttribute(ae,xt)})}var at=Mt.attributes,vt=[],yt;for(yt in at){var Dt=br[yt]||yt.toLowerCase();Dt in Ct.attributes||vt.push(Pt(at[yt],Dt))}return Mt.indices===void 0||Ct.index||(at=_t.getDependency("accessor",Mt.indices).then(function(Jt){Ct.setIndex(Jt)}),vt.push(at)),K(Ct,Mt),Et(Ct,Mt,_t),Ve.all(vt).then(function(){return Mt.targets!==void 0?Z(Ct,Mt.targets,_t):Ct})}function Bt(Ct,Mt){var _t=Ct.getIndex();if(_t===null){var Pt=[];if(_t=Ct.getAttribute("position"),_t!==void 0){for(var at=0;at<_t.count;at++)Pt.push(at);Ct.setIndex(Pt),_t=Ct.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),Ct}var vt=_t.count-2;if(Pt=[],Mt===2)for(at=1;at<=vt;at++)Pt.push(_t.getX(0)),Pt.push(_t.getX(at)),Pt.push(_t.getX(at+1));else for(at=0;at<vt;at++)at%2==0?(Pt.push(_t.getX(at)),Pt.push(_t.getX(at+1)),Pt.push(_t.getX(at+2))):(Pt.push(_t.getX(at+2)),Pt.push(_t.getX(at+1)),Pt.push(_t.getX(at)));return Pt.length/3!==vt&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles."),Ct=Ct.clone(),Ct.setIndex(Pt),Ct}t.prototype=dt(pt(Mn.prototype),{constructor:t,load:function(Ct,Mt,_t,Pt){var at=this,vt=this.resourcePath!==""?this.resourcePath:this.path!==""?this.path:ad.extractUrlBase(Ct);at.manager.itemStart(Ct);var yt=function(Jt){Pt?Pt(Jt):console.error(Jt),at.manager.itemError(Ct),at.manager.itemEnd(Ct)},Dt=new Ba(at.manager);Dt.setPath(this.path),Dt.setResponseType("arraybuffer"),Dt.setRequestHeader(this.requestHeader),at.crossOrigin==="use-credentials"&&Dt.setWithCredentials(!0),Dt.load(Ct,function(Jt){try{at.parse(Jt,vt,function(ae){Mt(ae),at.manager.itemEnd(Ct)},yt)}catch(ae){yt(ae)}},_t,yt)},setDRACOLoader:function(Ct){return this.dracoLoader=Ct,this},setDDSLoader:function(Ct){return this.ddsLoader=Ct,this},parse:function(Ct,Mt,_t,Pt){var at={};if(typeof Ct!="string")if(ad.decodeText(new Uint8Array(Ct,0,4))===Yt){try{at[Xt.KHR_BINARY_GLTF]=new d(Ct)}catch(Jt){Pt&&Pt(Jt);return}Ct=at[Xt.KHR_BINARY_GLTF].content}else Ct=ad.decodeText(new Uint8Array(Ct));if(Ct=JSON.parse(Ct),Ct.asset===void 0||2>Ct.asset.version[0])Pt&&Pt(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(Ct.extensionsUsed)for(var vt=0;vt<Ct.extensionsUsed.length;++vt){var yt=Ct.extensionsUsed[vt],Dt=Ct.extensionsRequired||[];switch(yt){case Xt.KHR_LIGHTS_PUNCTUAL:at[yt]=new s(Ct);break;case Xt.KHR_MATERIALS_CLEARCOAT:at[yt]=new h;break;case Xt.KHR_MATERIALS_UNLIT:at[yt]=new c;break;case Xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:at[yt]=new N;break;case Xt.KHR_DRACO_MESH_COMPRESSION:at[yt]=new f(Ct,this.dracoLoader);break;case Xt.MSFT_TEXTURE_DDS:at[yt]=new n(this.ddsLoader);break;case Xt.KHR_TEXTURE_TRANSFORM:at[yt]=new x;break;case Xt.KHR_MESH_QUANTIZATION:at[yt]=new C;break;default:0<=Dt.indexOf(yt)&&console.warn('THREE.GLTFLoader: Unknown extension "'+yt+'".')}}Mt=new ht(Ct,at,{path:Mt||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}),Mt.fileLoader.setRequestHeader(this.requestHeader),Mt.parse(_t,Pt)}}});var Xt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};s.prototype.loadLight=function(Ct){var Mt=this.lightDefs[Ct],_t=new Je(16777215);Mt.color!==void 0&&_t.fromArray(Mt.color);var Pt=Mt.range!==void 0?Mt.range:0;switch(Mt.type){case"directional":_t=new Fn(_t),_t.target.position.set(0,0,-1),_t.add(_t.target);break;case"point":_t=new eu(_t),_t.distance=Pt;break;case"spot":_t=new tf(_t),_t.distance=Pt,Mt.spot=Mt.spot||{},Mt.spot.innerConeAngle=Mt.spot.innerConeAngle!==void 0?Mt.spot.innerConeAngle:0,Mt.spot.outerConeAngle=Mt.spot.outerConeAngle!==void 0?Mt.spot.outerConeAngle:Math.PI/4,_t.angle=Mt.spot.outerConeAngle,_t.penumbra=1-Mt.spot.innerConeAngle/Mt.spot.outerConeAngle,_t.target.position.set(0,0,-1),_t.add(_t.target);break;default:throw Error('THREE.GLTFLoader: Unexpected light type, "'+Mt.type+'".')}return _t.position.set(0,0,0),_t.decay=2,Mt.intensity!==void 0&&(_t.intensity=Mt.intensity),_t.name=Mt.name||"light_"+Ct,Ve.resolve(_t)},c.prototype.getMaterialType=function(){return Qo},c.prototype.extendParams=function(Ct,Mt,_t){var Pt=[];if(Ct.color=new Je(1,1,1),Ct.opacity=1,Mt=Mt.pbrMetallicRoughness){if(Array.isArray(Mt.baseColorFactor)){var at=Mt.baseColorFactor;Ct.color.fromArray(at),Ct.opacity=at[3]}Mt.baseColorTexture!==void 0&&Pt.push(_t.assignTexture(Ct,"map",Mt.baseColorTexture))}return Ve.all(Pt)},h.prototype.getMaterialType=function(){return Ys},h.prototype.extendParams=function(Ct,Mt,_t){var Pt=[];return Mt=Mt.extensions[this.name],Mt.clearcoatFactor!==void 0&&(Ct.clearcoat=Mt.clearcoatFactor),Mt.clearcoatTexture!==void 0&&Pt.push(_t.assignTexture(Ct,"clearcoatMap",Mt.clearcoatTexture)),Mt.clearcoatRoughnessFactor!==void 0&&(Ct.clearcoatRoughness=Mt.clearcoatRoughnessFactor),Mt.clearcoatRoughnessTexture!==void 0&&Pt.push(_t.assignTexture(Ct,"clearcoatRoughnessMap",Mt.clearcoatRoughnessTexture)),Mt.clearcoatNormalTexture!==void 0&&(Pt.push(_t.assignTexture(Ct,"clearcoatNormalMap",Mt.clearcoatNormalTexture)),Mt.clearcoatNormalTexture.scale!==void 0&&(_t=Mt.clearcoatNormalTexture.scale,Ct.clearcoatNormalScale=new ct(_t,_t))),Ve.all(Pt)};var Yt="glTF",fe=12,te={JSON:1313821514,BIN:5130562};f.prototype.decodePrimitive=function(Ct,Mt){var _t=this.json,Pt=this.dracoLoader,at=Ct.extensions[this.name].bufferView,vt=Ct.extensions[this.name].attributes,yt={},Dt={},Jt={},ae;for(ae in vt){var xt=br[ae]||ae.toLowerCase();yt[xt]=vt[ae]}for(ae in Ct.attributes)if(xt=br[ae]||ae.toLowerCase(),vt[ae]!==void 0){var Se=_t.accessors[Ct.attributes[ae]];Jt[xt]=le[Se.componentType],Dt[xt]=Se.normalized===!0}return Mt.getDependency("bufferView",at).then(function(Re){return new Ve(function(Te){Pt.decodeDracoFile(Re,function(ye){for(var He in ye.attributes){var kr=ye.attributes[He],cn=Dt[He];cn!==void 0&&(kr.normalized=cn)}Te(ye)},yt,Jt)})})},x.prototype.extendTexture=function(Ct,Mt){return Ct=Ct.clone(),Mt.offset!==void 0&&Ct.offset.fromArray(Mt.offset),Mt.rotation!==void 0&&(Ct.rotation=Mt.rotation),Mt.scale!==void 0&&Ct.repeat.fromArray(Mt.scale),Mt.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),Ct.needsUpdate=!0,Ct},E.prototype=pt(ms.prototype),E.prototype.constructor=E,E.prototype.copy=function(Ct){return ms.prototype.copy.call(this,Ct),this.specularMap=Ct.specularMap,this.specular.copy(Ct.specular),this.glossinessMap=Ct.glossinessMap,this.glossiness=Ct.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},I.prototype=pt(Zs.prototype),I.prototype.constructor=I,I.prototype.copySampleValue_=function(Ct){var Mt=this.resultBuffer,_t=this.sampleValues,Pt=this.valueSize;Ct=Ct*Pt*3+Pt;for(var at=0;at!==Pt;at++)Mt[at]=_t[Ct+at];return Mt},I.prototype.beforeStart_=I.prototype.copySampleValue_,I.prototype.afterEnd_=I.prototype.copySampleValue_,I.prototype.interpolate_=function(Ct,Mt,_t,Pt){var at=this.resultBuffer,vt=this.sampleValues,yt=this.valueSize,Dt=2*yt,Jt=3*yt;Pt-=Mt,Mt=(_t-Mt)/Pt,_t=Mt*Mt;var ae=_t*Mt;Ct*=Jt,Jt=Ct-Jt;var xt=-2*ae+3*_t;ae-=_t;var Se=1-xt;for(Mt=ae-_t+Mt,_t=0;_t!==yt;_t++)at[_t]=Se*vt[Jt+_t+yt]+Mt*vt[Jt+_t+Dt]*Pt+xt*vt[Ct+_t+yt]+ae*vt[Ct+_t]*Pt;return at};var le={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tr={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},Me={33071:1001,33648:1002,10497:1e3},xr={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},br={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_r={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Gn={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300},Dr={"image/png":1023,"image/jpeg":1022};return ht.prototype.parse=function(Ct,Mt){var _t=this,Pt=this.json,at=this.extensions;this.cache.removeAll(),this.markDefs(),Ve.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(vt){vt={scene:vt[0][Pt.scene||0],scenes:vt[0],animations:vt[1],cameras:vt[2],asset:Pt.asset,parser:_t,userData:{}},D(at,vt,Pt),K(vt,Pt),Ct(vt)}).catch(Mt)},ht.prototype.markDefs=function(){for(var Ct=this.json.nodes||[],Mt=this.json.skins||[],_t=this.json.meshes||[],Pt={},at={},vt=0,yt=Mt.length;vt<yt;vt++)for(var Dt=Mt[vt].joints,Jt=0,ae=Dt.length;Jt<ae;Jt++)Ct[Dt[Jt]].isBone=!0;for(Mt=0,vt=Ct.length;Mt<vt;Mt++)yt=Ct[Mt],yt.mesh!==void 0&&(Pt[yt.mesh]===void 0&&(Pt[yt.mesh]=at[yt.mesh]=0),Pt[yt.mesh]++,yt.skin!==void 0&&(_t[yt.mesh].isSkinnedMesh=!0));this.json.meshReferences=Pt,this.json.meshUses=at},ht.prototype.getDependency=function(Ct,Mt){var _t=Ct+":"+Mt,Pt=this.cache.get(_t);if(!Pt){switch(Ct){case"scene":Pt=this.loadScene(Mt);break;case"node":Pt=this.loadNode(Mt);break;case"mesh":Pt=this.loadMesh(Mt);break;case"accessor":Pt=this.loadAccessor(Mt);break;case"bufferView":Pt=this.loadBufferView(Mt);break;case"buffer":Pt=this.loadBuffer(Mt);break;case"material":Pt=this.loadMaterial(Mt);break;case"texture":Pt=this.loadTexture(Mt);break;case"skin":Pt=this.loadSkin(Mt);break;case"animation":Pt=this.loadAnimation(Mt);break;case"camera":Pt=this.loadCamera(Mt);break;case"light":Pt=this.extensions[Xt.KHR_LIGHTS_PUNCTUAL].loadLight(Mt);break;default:throw Error("Unknown type: "+Ct)}this.cache.add(_t,Pt)}return Pt},ht.prototype.getDependencies=function(Ct){var Mt=this.cache.get(Ct);if(!Mt){var _t=this;Mt=Ve.all((this.json[Ct+(Ct==="mesh"?"es":"s")]||[]).map(function(Pt,at){return _t.getDependency(Ct,at)})),this.cache.add(Ct,Mt)}return Mt},ht.prototype.loadBuffer=function(Ct){var Mt=this.json.buffers[Ct],_t=this.fileLoader;if(Mt.type&&Mt.type!=="arraybuffer")throw Error("THREE.GLTFLoader: "+Mt.type+" buffer type is not supported.");if(Mt.uri===void 0&&Ct===0)return Ve.resolve(this.extensions[Xt.KHR_BINARY_GLTF].body);var Pt=this.options;return new Ve(function(at,vt){_t.load(S(Mt.uri,Pt.path),at,void 0,function(){vt(Error('THREE.GLTFLoader: Failed to load buffer "'+Mt.uri+'".'))})})},ht.prototype.loadBufferView=function(Ct){var Mt=this.json.bufferViews[Ct];return this.getDependency("buffer",Mt.buffer).then(function(_t){var Pt=Mt.byteOffset||0;return _t.slice(Pt,Pt+(Mt.byteLength||0))})},ht.prototype.loadAccessor=function(Ct){var Mt=this,_t=this.json,Pt=this.json.accessors[Ct];return Pt.bufferView===void 0&&Pt.sparse===void 0?Ve.resolve(null):(Ct=[],Pt.bufferView!==void 0?Ct.push(this.getDependency("bufferView",Pt.bufferView)):Ct.push(null),Pt.sparse!==void 0&&(Ct.push(this.getDependency("bufferView",Pt.sparse.indices.bufferView)),Ct.push(this.getDependency("bufferView",Pt.sparse.values.bufferView))),Ve.all(Ct).then(function(at){var vt=at[0],yt=xr[Pt.type],Dt=le[Pt.componentType],Jt=Dt.BYTES_PER_ELEMENT,ae=Pt.byteOffset||0,xt=Pt.bufferView!==void 0?_t.bufferViews[Pt.bufferView].byteStride:void 0,Se=Pt.normalized===!0;if(xt&&xt!==Jt*yt){var Re=Math.floor(ae/xt),Te="InterleavedBuffer:"+Pt.bufferView+":"+Pt.componentType+":"+Re+":"+Pt.count,ye=Mt.cache.get(Te);ye||(Re=new Dt(vt,Re*xt,Pt.count*xt/Jt),ye=new ya(Re,xt/Jt),Mt.cache.add(Te,ye)),Jt=new Qa(ye,yt,ae%xt/Jt,Se)}else Re=vt===null?new Dt(Pt.count*yt):new Dt(vt,ae,Pt.count*yt),Jt=new Kr(Re,yt,Se);if(Pt.sparse!==void 0){for(xt=Pt.sparse.values.byteOffset||0,ae=new le[Pt.sparse.indices.componentType](at[1],Pt.sparse.indices.byteOffset||0,Pt.sparse.count*xr.SCALAR),at=new Dt(at[2],xt,Pt.sparse.count*yt),vt!==null&&(Jt=new Kr(Jt.array.slice(),Jt.itemSize,Jt.normalized)),vt=0,Dt=ae.length;vt<Dt;vt++)if(xt=ae[vt],Jt.setX(xt,at[vt*yt]),2<=yt&&Jt.setY(xt,at[vt*yt+1]),3<=yt&&Jt.setZ(xt,at[vt*yt+2]),4<=yt&&Jt.setW(xt,at[vt*yt+3]),5<=yt)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}return Jt}))},ht.prototype.loadTexture=function(Ct){var Mt=this,_t=this.json,Pt=this.options,at=this.textureLoader,vt=self.URL||self.webkitURL,yt=_t.textures[Ct],Dt=yt.extensions||{},Jt=Dt[Xt.MSFT_TEXTURE_DDS]?_t.images[Dt[Xt.MSFT_TEXTURE_DDS].source]:_t.images[yt.source],ae=Jt.uri,xt=!1;return Jt.bufferView!==void 0&&(ae=Mt.getDependency("bufferView",Jt.bufferView).then(function(Se){return xt=!0,Se=new Blob([Se],{type:Jt.mimeType}),ae=vt.createObjectURL(Se)})),Ve.resolve(ae).then(function(Se){var Re=Pt.manager.getHandler(Se);return Re||(Re=Dt[Xt.MSFT_TEXTURE_DDS]?Mt.extensions[Xt.MSFT_TEXTURE_DDS].ddsLoader:at),new Ve(function(Te,ye){Re.load(S(Se,Pt.path),Te,void 0,ye)})}).then(function(Se){xt===!0&&vt.revokeObjectURL(ae),Se.flipY=!1,yt.name&&(Se.name=yt.name),Jt.mimeType in Dr&&(Se.format=Dr[Jt.mimeType]);var Re=(_t.samplers||{})[yt.sampler]||{};return Se.magFilter=tr[Re.magFilter]||1006,Se.minFilter=tr[Re.minFilter]||1008,Se.wrapS=Me[Re.wrapS]||1e3,Se.wrapT=Me[Re.wrapT]||1e3,Mt.associations.set(Se,{type:"textures",index:Ct}),Se})},ht.prototype.assignTexture=function(Ct,Mt,_t){var Pt=this;return this.getDependency("texture",_t.index).then(function(at){if(!at.isCompressedTexture)switch(Mt){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":at.format=1022}if(_t.texCoord===void 0||_t.texCoord==0||Mt==="aoMap"&&_t.texCoord==1||console.warn("THREE.GLTFLoader: Custom UV set "+_t.texCoord+" for texture "+Mt+" not yet supported."),Pt.extensions[Xt.KHR_TEXTURE_TRANSFORM]){var vt=_t.extensions!==void 0?_t.extensions[Xt.KHR_TEXTURE_TRANSFORM]:void 0;if(vt){var yt=Pt.associations.get(at);at=Pt.extensions[Xt.KHR_TEXTURE_TRANSFORM].extendTexture(at,vt),Pt.associations.set(at,yt)}}Ct[Mt]=at})},ht.prototype.assignFinalMaterial=function(Ct){var Mt=Ct.geometry,_t=Ct.material,Pt=Mt.attributes.tangent!==void 0,at=Mt.attributes.color!==void 0,vt=Mt.attributes.normal===void 0,yt=Ct.isSkinnedMesh===!0,Dt=0<Xi(Mt.morphAttributes).length,Jt=Dt&&Mt.morphAttributes.normal!==void 0;if(Ct.isPoints){var ae="PointsMaterial:"+_t.uuid,xt=this.cache.get(ae);xt||(xt=new ba,hn.prototype.copy.call(xt,_t),xt.color.copy(_t.color),xt.map=_t.map,xt.sizeAttenuation=!1,this.cache.add(ae,xt)),_t=xt}else Ct.isLine&&(ae="LineBasicMaterial:"+_t.uuid,xt=this.cache.get(ae),xt||(xt=new pi,hn.prototype.copy.call(xt,_t),xt.color.copy(_t.color),this.cache.add(ae,xt)),_t=xt);(Pt||at||vt||yt||Dt)&&(ae="ClonedMaterial:"+_t.uuid+":",_t.isGLTFSpecularGlossinessMaterial&&(ae+="specular-glossiness:"),yt&&(ae+="skinning:"),Pt&&(ae+="vertex-tangents:"),at&&(ae+="vertex-colors:"),vt&&(ae+="flat-shading:"),Dt&&(ae+="morph-targets:"),Jt&&(ae+="morph-normals:"),xt=this.cache.get(ae),xt||(xt=_t.clone(),yt&&(xt.skinning=!0),Pt&&(xt.vertexTangents=!0),at&&(xt.vertexColors=!0),vt&&(xt.flatShading=!0),Dt&&(xt.morphTargets=!0),Jt&&(xt.morphNormals=!0),this.cache.add(ae,xt),this.associations.set(xt,this.associations.get(_t))),_t=xt),_t.aoMap&&Mt.attributes.uv2===void 0&&Mt.attributes.uv!==void 0&&Mt.setAttribute("uv2",Mt.attributes.uv),_t.normalScale&&!Pt&&(_t.normalScale.y=-_t.normalScale.y),_t.clearcoatNormalScale&&!Pt&&(_t.clearcoatNormalScale.y=-_t.clearcoatNormalScale.y),Ct.material=_t},ht.prototype.loadMaterial=function(Ct){var Mt=this,_t=this.extensions,Pt=this.json.materials[Ct],at={},vt=Pt.extensions||{},yt=[];if(vt[Xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var Dt=_t[Xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS],Jt=Dt.getMaterialType();yt.push(Dt.extendParams(at,Pt,Mt))}else if(vt[Xt.KHR_MATERIALS_UNLIT])Dt=_t[Xt.KHR_MATERIALS_UNLIT],Jt=Dt.getMaterialType(),yt.push(Dt.extendParams(at,Pt,Mt));else{if(Jt=ms,Dt=Pt.pbrMetallicRoughness||{},at.color=new Je(1,1,1),at.opacity=1,Array.isArray(Dt.baseColorFactor)){var ae=Dt.baseColorFactor;at.color.fromArray(ae),at.opacity=ae[3]}Dt.baseColorTexture!==void 0&&yt.push(Mt.assignTexture(at,"map",Dt.baseColorTexture)),at.metalness=Dt.metallicFactor!==void 0?Dt.metallicFactor:1,at.roughness=Dt.roughnessFactor!==void 0?Dt.roughnessFactor:1,Dt.metallicRoughnessTexture!==void 0&&(yt.push(Mt.assignTexture(at,"metalnessMap",Dt.metallicRoughnessTexture)),yt.push(Mt.assignTexture(at,"roughnessMap",Dt.metallicRoughnessTexture)))}return Pt.doubleSided===!0&&(at.side=2),Dt=Pt.alphaMode||"OPAQUE",Dt==="BLEND"?(at.transparent=!0,at.depthWrite=!1):(at.transparent=!1,Dt==="MASK"&&(at.alphaTest=Pt.alphaCutoff!==void 0?Pt.alphaCutoff:.5)),Pt.normalTexture!==void 0&&Jt!==Qo&&(yt.push(Mt.assignTexture(at,"normalMap",Pt.normalTexture)),at.normalScale=new ct(1,1),Pt.normalTexture.scale!==void 0&&at.normalScale.set(Pt.normalTexture.scale,Pt.normalTexture.scale)),Pt.occlusionTexture!==void 0&&Jt!==Qo&&(yt.push(Mt.assignTexture(at,"aoMap",Pt.occlusionTexture)),Pt.occlusionTexture.strength!==void 0&&(at.aoMapIntensity=Pt.occlusionTexture.strength)),Pt.emissiveFactor!==void 0&&Jt!==Qo&&(at.emissive=new Je().fromArray(Pt.emissiveFactor)),Pt.emissiveTexture!==void 0&&Jt!==Qo&&yt.push(Mt.assignTexture(at,"emissiveMap",Pt.emissiveTexture)),vt[Xt.KHR_MATERIALS_CLEARCOAT]&&(Dt=_t[Xt.KHR_MATERIALS_CLEARCOAT],Jt=Dt.getMaterialType(),yt.push(Dt.extendParams(at,{extensions:vt},Mt))),Ve.all(yt).then(function(){var xt=Jt===E?_t[Xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(at):new Jt(at);return Pt.name&&(xt.name=Pt.name),xt.map&&(xt.map.encoding=3001),xt.emissiveMap&&(xt.emissiveMap.encoding=3001),K(xt,Pt),Mt.associations.set(xt,{type:"materials",index:Ct}),Pt.extensions&&D(_t,xt,Pt),xt})},ht.prototype.loadGeometries=function(Ct){function Mt(Se){return Pt[Xt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Se,_t).then(function(Re){return It(Re,Se,_t)})}for(var _t=this,Pt=this.extensions,at=this.primitiveCache,vt=[],yt=0,Dt=Ct.length;yt<Dt;yt++){var Jt=Ct[yt],ae=$(Jt),xt=at[ae];xt?vt.push(xt.promise):(xt=Jt.extensions&&Jt.extensions[Xt.KHR_DRACO_MESH_COMPRESSION]?Mt(Jt):It(new sr,Jt,_t),at[ae]={primitive:Jt,promise:xt},vt.push(xt))}return Ve.all(vt)},ht.prototype.loadMesh=function(Ct){for(var Mt=this,_t=this.json.meshes[Ct],Pt=_t.primitives,at=[],vt=0,yt=Pt.length;vt<yt;vt++){var Dt=Pt[vt].material===void 0?F(this.cache):this.getDependency("material",Pt[vt].material);at.push(Dt)}return at.push(Mt.loadGeometries(Pt)),Ve.all(at).then(function(Jt){var ae=Jt.slice(0,Jt.length-1),xt=Jt[Jt.length-1];Jt=[];for(var Se=0,Re=xt.length;Se<Re;Se++){var Te=xt[Se],ye=Pt[Se],He=ae[Se];if(ye.mode===4||ye.mode===5||ye.mode===6||ye.mode===void 0)Te=_t.isSkinnedMesh===!0?new xa(Te,He):new $i(Te,He),Te.isSkinnedMesh!==!0||Te.geometry.attributes.skinWeight.normalized||Te.normalizeSkinWeights(),ye.mode===5?Te.geometry=Bt(Te.geometry,1):ye.mode===6&&(Te.geometry=Bt(Te.geometry,2));else if(ye.mode===1)Te=new uo(Te,He);else if(ye.mode===3)Te=new Xs(Te,He);else if(ye.mode===2)Te=new _o(Te,He);else if(ye.mode===0)Te=new xu(Te,He);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+ye.mode);if(0<Xi(Te.geometry.morphAttributes).length){ye=Te;var kr=_t;if(ye.updateMorphTargets(),kr.weights!==void 0){He=0;for(var cn=kr.weights.length;He<cn;He++)ye.morphTargetInfluences[He]=kr.weights[He]}if(kr.extras&&Array.isArray(kr.extras.targetNames))if(kr=kr.extras.targetNames,ye.morphTargetInfluences.length===kr.length)for(ye.morphTargetDictionary={},He=0,cn=kr.length;He<cn;He++)ye.morphTargetDictionary[kr[He]]=He;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}Te.name=_t.name||"mesh_"+Ct,1<xt.length&&(Te.name+="_"+Se),K(Te,_t),Mt.assignFinalMaterial(Te),Jt.push(Te)}if(Jt.length===1)return Jt[0];for(ae=new va,Se=0,Re=Jt.length;Se<Re;Se++)ae.add(Jt[Se]);return ae})},ht.prototype.loadCamera=function(Ct){var Mt;Ct=this.json.cameras[Ct];var _t=Ct[Ct.type];if(_t)return Ct.type==="perspective"?Mt=new Wr(Jr.radToDeg(_t.yfov),_t.aspectRatio||1,_t.znear||1,_t.zfar||2e6):Ct.type==="orthographic"&&(Mt=new Ea(-_t.xmag,_t.xmag,_t.ymag,-_t.ymag,_t.znear,_t.zfar)),Ct.name&&(Mt.name=Ct.name),K(Mt,Ct),Ve.resolve(Mt);console.warn("THREE.GLTFLoader: Missing camera parameters.")},ht.prototype.loadSkin=function(Ct){Ct=this.json.skins[Ct];var Mt={joints:Ct.joints};return Ct.inverseBindMatrices===void 0?Ve.resolve(Mt):this.getDependency("accessor",Ct.inverseBindMatrices).then(function(_t){return Mt.inverseBindMatrices=_t,Mt})},ht.prototype.loadAnimation=function(Ct){for(var Mt=this.json.animations[Ct],_t=[],Pt=[],at=[],vt=[],yt=[],Dt=0,Jt=Mt.channels.length;Dt<Jt;Dt++){var ae=Mt.channels[Dt],xt=Mt.samplers[ae.sampler];ae=ae.target;var Se=Mt.parameters!==void 0?Mt.parameters[xt.input]:xt.input,Re=Mt.parameters!==void 0?Mt.parameters[xt.output]:xt.output;_t.push(this.getDependency("node",ae.node!==void 0?ae.node:ae.id)),Pt.push(this.getDependency("accessor",Se)),at.push(this.getDependency("accessor",Re)),vt.push(xt),yt.push(ae)}return Ve.all([Ve.all(_t),Ve.all(Pt),Ve.all(at),Ve.all(vt),Ve.all(yt)]).then(function(Te){var ye=Te[0],He=Te[1],kr=Te[2],cn=Te[3];Te=Te[4];for(var Pe=[],Br=0,Bn=ye.length;Br<Bn;Br++){var dr=ye[Br],ts=He[Br],li=kr[Br],Ja=cn[Br],Hl=Te[Br];if(dr!==void 0){switch(dr.updateMatrix(),dr.matrixAutoUpdate=!0,_r[Hl.path]){case _r.weights:var Df=Al;break;case _r.rotation:Df=$h;break;default:Df=rh}var cu=dr.name?dr.name:dr.uuid,Tc=Ja.interpolation!==void 0?Gn[Ja.interpolation]:2301,Sc=[];if(_r[Hl.path]===_r.weights?dr.traverse(function(Ua){Ua.isMesh===!0&&Ua.morphTargetInfluences&&Sc.push(Ua.name?Ua.name:Ua.uuid)}):Sc.push(cu),dr=li.array,li.normalized){if(dr.constructor===Int8Array)var kA=1/127;else if(dr.constructor===Uint8Array)kA=1/255;else if(dr.constructor==Int16Array)kA=1/32767;else if(dr.constructor===Uint16Array)kA=1/65535;else throw Error("THREE.GLTFLoader: Unsupported output accessor component type.");var Mh=new Float32Array(dr.length);for(li=0,cu=dr.length;li<cu;li++)Mh[li]=dr[li]*kA;dr=Mh}for(li=0,cu=Sc.length;li<cu;li++)kA=new Df(Sc[li]+"."+_r[Hl.path],ts.array,dr,Tc),Ja.interpolation==="CUBICSPLINE"&&(kA.createInterpolant=function(Ua){return new I(this.times,this.values,this.getValueSize()/3,Ua)},kA.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Pe.push(kA)}}return new sA(Mt.name?Mt.name:"animation_"+Ct,void 0,Pe)})},ht.prototype.loadNode=function(Ct){var Mt=this.json,_t=this.extensions,Pt=this,at=Mt.meshReferences,vt=Mt.meshUses,yt=Mt.nodes[Ct];return function(){var Dt=[];return yt.mesh!==void 0&&Dt.push(Pt.getDependency("mesh",yt.mesh).then(function(Jt){if(1<at[yt.mesh]){var ae=vt[yt.mesh]++;Jt=Jt.clone(),Jt.name+="_instance_"+ae}return yt.weights!==void 0&&Jt.traverse(function(xt){if(xt.isMesh)for(var Se=0,Re=yt.weights.length;Se<Re;Se++)xt.morphTargetInfluences[Se]=yt.weights[Se]}),Jt})),yt.camera!==void 0&&Dt.push(Pt.getDependency("camera",yt.camera)),yt.extensions&&yt.extensions[Xt.KHR_LIGHTS_PUNCTUAL]&&yt.extensions[Xt.KHR_LIGHTS_PUNCTUAL].light!==void 0&&Dt.push(Pt.getDependency("light",yt.extensions[Xt.KHR_LIGHTS_PUNCTUAL].light)),Ve.all(Dt)}().then(function(Dt){var Jt=yt.isBone===!0?new os:1<Dt.length?new va:Dt.length===1?Dt[0]:new Oe;if(Jt!==Dt[0])for(var ae=0,xt=Dt.length;ae<xt;ae++)Jt.add(Dt[ae]);return yt.name&&(Jt.userData.name=yt.name,Jt.name=as.sanitizeNodeName(yt.name)),K(Jt,yt),yt.extensions&&D(_t,Jt,yt),yt.matrix!==void 0?(Dt=new Qe,Dt.fromArray(yt.matrix),Jt.applyMatrix4(Dt)):(yt.translation!==void 0&&Jt.position.fromArray(yt.translation),yt.rotation!==void 0&&Jt.quaternion.fromArray(yt.rotation),yt.scale!==void 0&&Jt.scale.fromArray(yt.scale)),Pt.associations.set(Jt,{type:"nodes",index:Ct}),Jt})},ht.prototype.loadScene=function(){function Ct(Mt,_t,Pt,at){var vt=Pt.nodes[Mt];return at.getDependency("node",Mt).then(function(yt){if(vt.skin===void 0)return yt;var Dt;return at.getDependency("skin",vt.skin).then(function(Jt){Dt=Jt,Jt=[];for(var ae=0,xt=Dt.joints.length;ae<xt;ae++)Jt.push(at.getDependency("node",Dt.joints[ae]));return Ve.all(Jt)}).then(function(Jt){return yt.traverse(function(ae){if(ae.isMesh){for(var xt=[],Se=[],Re=0,Te=Jt.length;Re<Te;Re++){var ye=Jt[Re];ye?(xt.push(ye),ye=new Qe,Dt.inverseBindMatrices!==void 0&&ye.fromArray(Dt.inverseBindMatrices.array,16*Re),Se.push(ye)):console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Dt.joints[Re])}ae.bind(new na(xt,Se),ae.matrixWorld)}}),yt})}).then(function(yt){_t.add(yt);var Dt=[];if(vt.children)for(var Jt=vt.children,ae=0,xt=Jt.length;ae<xt;ae++)Dt.push(Ct(Jt[ae],yt,Pt,at));return Ve.all(Dt)})}return function(Mt){var _t=this.json,Pt=this.extensions;Mt=this.json.scenes[Mt];var at=new va;Mt.name&&(at.name=Mt.name),K(at,Mt),Mt.extensions&&D(Pt,at,Mt),Pt=Mt.nodes||[],Mt=[];for(var vt=0,yt=Pt.length;vt<yt;vt++)Mt.push(Ct(Pt[vt],at,_t,this));return Ve.all(Mt).then(function(){return at})}}(),t}(),ud={};ud.MTLLoader=mg,ud.OBJLoader=I_,ud.GLTFLoader=T_;var S_=Ot(function(t,r){r.__esModule=!0;var n=Ar&&Ar.__esModule?Ar:{default:Ar};r.default=function(){function s(c,h){for(var d=0;d<h.length;d++){var f=h[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),(0,n.default)(c,f.key,f)}}return function(c,h,d){return h&&s(c.prototype,h),d&&s(c,d),c}}()}),po=Gt(S_);Xa(Aa.prototype,{equals:function(t){return this.lat===t.lat&&this.lng===t.lng},clone:function(){return new Aa(this.lat,this.lng)},getLngSpan:function(t){return t=Math.abs(t-this.lng),180<t&&(t=360-t),t},sub:function(t){return new Aa(this.lat-t.lat,this.lng-t.lng)},toString:function(){return"Point"}}),Xa(DA,{EARTHRADIUS:637099681e-2,MCBAND:[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,1704480524535203,-10338987376042340,26112667856603880,-35149669176653700,26595700718403920,-10725012454188240,1800819912950474,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],getDistanceByMC:function(t,r){if(!t||!r||(t=this.convertMC2LL(t),!t))return 0;var n=this.toRadians(t.lng);if(t=this.toRadians(t.lat),r=this.convertMC2LL(r),!r)return 0;var s=this.toRadians(r.lng);return r=this.toRadians(r.lat),this.getDistance(n,s,t,r)},getDistanceByLL:function(t,r){if(!t||!r)return 0;t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74),r.lng=this.getLoop(r.lng,-180,180),r.lat=this.getRange(r.lat,-74,74);var n=this.toRadians(t.lng),s=this.toRadians(t.lat);return t=this.toRadians(r.lng),r=this.toRadians(r.lat),this.getDistance(n,t,s,r)},convertMC2LL:function(t){if(t==null)return new Aa(0,0);if(180>t.lng&&-180<t.lng&&90>t.lat&&-90<t.lat)return t;if(window.BMAPGL_84)return new Aa(180/Math.PI*(2*Math.atan(Math.exp(t.lat/2003750834e-2*180*Math.PI/180))-Math.PI/2),t.lng/2003750834e-2*180);for(var r=new Aa(Math.abs(t.lng),Math.abs(t.lat)),n=0;n<this.MCBAND.length;n++)if(r.lat>=this.MCBAND[n]){var s=this.MC2LL[n];break}return t=this.convertor(t,s),t=new Aa(t.lng.toFixed(6),t.lat.toFixed(6))},convertLL2MC:function(t){if(t==null)return new Aa(0,0);if(180<t.lng||-180>t.lng||90<t.lat||-90>t.lat)return t;if(window.BMAPGL_84){var r=t.lat*Math.PI/180;return new Aa(t.lng*Math.PI/180*6378137,31890685e-1*Math.log((1+Math.sin(r))/(1-Math.sin(r))))}t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74),r=new Aa(t.lng,t.lat);for(var n=0;n<this.LLBAND.length;n++)if(r.lat>=this.LLBAND[n]){var s=this.LL2MC[n];break}if(!s){for(n=0;n<this.LLBAND.length;n++)if(r.lat<=-this.LLBAND[n]){s=this.LL2MC[n];break}}return t=this.convertor(t,s),t=new Aa(Number(t.lng.toFixed(2)),Number(t.lat.toFixed(2)))},convertor:function(t,r){if(t&&r){var n=r[0]+r[1]*Math.abs(t.lng),s=Math.abs(t.lat)/r[9];return r=r[2]+r[3]*s+r[4]*s*s+r[5]*s*s*s+r[6]*s*s*s*s+r[7]*s*s*s*s*s+r[8]*s*s*s*s*s*s,n*=0>t.lng?-1:1,r*=0>t.lat?-1:1,new Aa(n,r)}},getDistance:function(t,r,n,s){return this.EARTHRADIUS*Math.acos(Math.sin(n)*Math.sin(s)+Math.cos(n)*Math.cos(s)*Math.cos(r-t))},toRadians:function(t){return Math.PI*t/180},toDegrees:function(t){return 180*t/Math.PI},getRange:function(t,r,n){return r!=null&&(t=Math.max(t,r)),n!=null&&(t=Math.min(t,n)),t},getLoop:function(t,r,n){for(;t>n;)t-=n-r;for(;t<r;)t+=n-r;return t}}),Xa(DA.prototype,{lngLatToMercator:function(t){return DA.convertLL2MC(t)},lngLatToPoint:function(t){return t=DA.convertLL2MC(t),new of(t.lng,t.lat)},mercatorToLngLat:function(t){return DA.convertMC2LL(t)},pointToLngLat:function(t){return t=new Aa(t.x,t.y),DA.convertMC2LL(t)},pointToPixel:function(t,r,n,s,c){if(t)return t=this.lngLatToMercator(t,c),r=this.getZoomUnits(r),new of(Math.round((t.lng-n.lng)/r+s.width/2),Math.round((n.lat-t.lat)/r+s.height/2))},pixelToPoint:function(t,r,n,s,c){if(t)return r=this.getZoomUnits(r),t=new Aa(n.lng+r*(t.x-s.width/2),n.lat-r*(t.y-s.height/2)),this.mercatorToLngLat(t,c)},getZoomUnits:function(t){return Math.pow(2,18-t)}});var L_=Ot(function(t,r){r.__esModule=!0;var n=cc&&cc.__esModule?cc:{default:cc};r.default=function(s){if(Array.isArray(s)){for(var c=0,h=Array(s.length);c<s.length;c++)h[c]=s[c];return h}return(0,n.default)(s)}}),A2=Gt(L_);(function(){function t(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};$n(this,t),this.options=r,this._initialize()}return po(t,[{key:"_initialize",value:function(){this.points=this.options.points}},{key:"_normalizaCoord",value:function(r){return r?(r instanceof Array&&(r={lng:Number(r[0]),lat:Number(r[1])}),DA.convertLL2MC(r)):null}},{key:"setOptions",value:function(){this.options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},this._initialize()}},{key:"getPoints",value:function(r){for(var n=[],s=this.points,c=0;c<s.length-1;c++){var h=this.getCurveByTwoPoints(this._normalizaCoord(s[c]),this._normalizaCoord(s[c+1]),r);h&&0<h.length&&(n=n.concat(h))}return n}},{key:"getCurveByTwoPoints",value:function(r,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:20;if(!r||!n)return null;var c=[],h=0;if((typeof n=="undefined"?"undefined":QA(n))===void 0)typeof c=="undefined"||QA(c);else{var d=parseFloat(r.lat),f=parseFloat(n.lat),x=parseFloat(r.lng),E=parseFloat(n.lng);E>x&&180<parseFloat(E-x)&&0>x&&(x=parseFloat(360+x),E=parseFloat(360+E));var N=0;if(f===d)var C=0,I=x-E;else E===x?(C=Math.PI/2,I=d-f):(C=Math.atan((f-d)/(E-x)),I=(f-d)/Math.sin(C));for(N===0&&(N=C+Math.PI/5),I/=2,C=I*Math.cos(N)+x,N=I*Math.sin(N)+d,I=0;I<s+1;I++){var S=x*(1-2*h+h*h)+C*(2*h-2*h*h)+E*h*h,F=n.lng;c.push([0>r.lng&&0<F?S-360:S,d*(1-2*h+h*h)+N*(2*h-2*h*h)+f*h*h]),h+=1/s}return c}}}]),t})();var d0=void 0,F_=function(){if(d0!==void 0)return d0;var t=navigator.userAgent,r="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";");d0=!1;for(var n=0;n<r.length;n++)if(0<t.indexOf(r[n])){d0=!0;break}return d0}(),g0=void 0;(function(){if(g0!==void 0)return g0;var t=navigator.userAgent,r=["iPhone","iPad","iPod"];g0=!1;for(var n=0;n<r.length;n++)if(0<t.indexOf(r[n])){g0=!0;break}return g0})(),OA(Array(576)),OA(Array(60)),OA(Array(512)),OA(Array(256)),OA(Array(29)),OA(Array(30)),new Uint32Array(function(){for(var t,r=[],n=0;256>n;n++){t=n;for(var s=0;8>s;s++)t=t&1?3988292384^t>>>1:t>>>1;r[n]=t}return r}());try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){}for(var Yx=new Uint8Array(256),ld=0;256>ld;ld++)Yx[ld]=252<=ld?6:248<=ld?5:240<=ld?4:224<=ld?3:192<=ld?2:1;Yx[254]=Yx[254]=1;var wh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},R_=yc.f;fA("getOwnPropertyDescriptor",function(){return function(t,r){return R_(kn(t),r)}});var P_=Jn.Object,U_=function(t,r){return P_.getOwnPropertyDescriptor(t,r)},D_=Ot(function(t){t.exports={default:U_,__esModule:!0}}),Qs=Gt(D_),m0=Ot(function(t){var r=Array.prototype.concat,n=Array.prototype.slice,s=t.exports=function(c){for(var h=[],d=0,f=c.length;d<f;d++){var x=c[d],E=(E=x)&&typeof E!="string"?E instanceof Array||Array.isArray(E)||0<=E.length&&(E.splice instanceof Function||Qs(E,E.length-1)&&E.constructor.name!=="String"):!1;E?h=r.call(h,n.call(x)):h.push(x)}return h};s.wrap=function(c){return function(){return c(s(arguments))}}}),v0=Ot(function(t){function r(d,f,x){return Math.min(Math.max(f,d),x)}function n(d){return d=d.toString(16).toUpperCase(),2>d.length?"0"+d:d}var s={},c;for(c in wh)wh.hasOwnProperty(c)&&(s[wh[c]]=c);var h=t.exports={to:{},get:{}};h.get=function(d){switch(d.substring(0,3).toLowerCase()){case"hsl":d=h.get.hsl(d);var f="hsl";break;case"hwb":d=h.get.hwb(d),f="hwb";break;default:d=h.get.rgb(d),f="rgb"}return d?{model:f,value:d}:null},h.get.rgb=function(d){if(!d)return null;var f=/^#([a-f0-9]{3,4})$/i,x=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,E=/^rgba?\(\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,N=/(\D+)/,C=[0,0,0,1],I;if(I=d.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(f=I[2],I=I[1],d=0;3>d;d++)x=2*d,C[d]=parseInt(I.slice(x,x+2),16);f&&(C[3]=Math.round(parseInt(f,16)/255*100)/100)}else if(I=d.match(f)){for(I=I[1],f=I[3],d=0;3>d;d++)C[d]=parseInt(I[d]+I[d],16);f&&(C[3]=Math.round(parseInt(f+f,16)/255*100)/100)}else if(I=d.match(x)){for(d=0;3>d;d++)C[d]=parseInt(I[d+1],0);I[4]&&(C[3]=parseFloat(I[4]))}else if(I=d.match(E)){for(d=0;3>d;d++)C[d]=Math.round(2.55*parseFloat(I[d+1]));I[4]&&(C[3]=parseFloat(I[4]))}else return(I=d.match(N))?I[1]==="transparent"?[0,0,0,0]:(C=wh[I[1]],C?(C[3]=1,C):null):null;for(d=0;3>d;d++)C[d]=r(C[d],0,255);return C[3]=r(C[3],0,1),C},h.get.hsl=function(d){if(!d)return null;var f=d.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(f){var x=parseFloat(f[4]);d=(parseFloat(f[1])+360)%360;var E=r(parseFloat(f[2]),0,100);return f=r(parseFloat(f[3]),0,100),x=r(isNaN(x)?1:x,0,1),[d,E,f,x]}return null},h.get.hwb=function(d){if(!d)return null;var f=d.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(f){var x=parseFloat(f[4]);d=(parseFloat(f[1])%360+360)%360;var E=r(parseFloat(f[2]),0,100);return f=r(parseFloat(f[3]),0,100),x=r(isNaN(x)?1:x,0,1),[d,E,f,x]}return null},h.to.hex=function(){var d=m0(arguments);return"#"+n(d[0])+n(d[1])+n(d[2])+(1>d[3]?n(Math.round(255*d[3])):"")},h.to.rgb=function(){var d=m0(arguments);return 4>d.length||d[3]===1?"rgb("+Math.round(d[0])+", "+Math.round(d[1])+", "+Math.round(d[2])+")":"rgba("+Math.round(d[0])+", "+Math.round(d[1])+", "+Math.round(d[2])+", "+d[3]+")"},h.to.rgb.percent=function(){var d=m0(arguments),f=Math.round(d[0]/255*100),x=Math.round(d[1]/255*100),E=Math.round(d[2]/255*100);return 4>d.length||d[3]===1?"rgb("+f+"%, "+x+"%, "+E+"%)":"rgba("+f+"%, "+x+"%, "+E+"%, "+d[3]+")"},h.to.hsl=function(){var d=m0(arguments);return 4>d.length||d[3]===1?"hsl("+d[0]+", "+d[1]+"%, "+d[2]+"%)":"hsla("+d[0]+", "+d[1]+"%, "+d[2]+"%, "+d[3]+")"},h.to.hwb=function(){var d=m0(arguments),f="";return 4<=d.length&&d[3]!==1&&(f=", "+d[3]),"hwb("+d[0]+", "+d[1]+"%, "+d[2]+"%"+f+")"},h.to.keyword=function(d){return s[d.slice(0,3)]}}),vg=Ot(function(t){var r={};for(c in wh)wh.hasOwnProperty(c)&&(r[wh[c]]=c);var n=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},s;for(s in n)if(n.hasOwnProperty(s)){if(!("channels"in n[s]))throw Error("missing channels property: "+s);if(!("labels"in n[s]))throw Error("missing channel labels property: "+s);if(n[s].labels.length!==n[s].channels)throw Error("channel and label counts mismatch: "+s);t=n[s].channels;var c=n[s].labels;delete n[s].channels,delete n[s].labels,Object.defineProperty(n[s],"channels",{value:t}),Object.defineProperty(n[s],"labels",{value:c})}n.rgb.hsl=function(h){var d=h[0]/255,f=h[1]/255,x=h[2]/255;h=Math.min(d,f,x);var E=Math.max(d,f,x),N=E-h,C;return E===h?C=0:d===E?C=(f-x)/N:f===E?C=2+(x-d)/N:x===E&&(C=4+(d-f)/N),C=Math.min(60*C,360),0>C&&(C+=360),d=(h+E)/2,[C,100*(E===h?0:.5>=d?N/(E+h):N/(2-E-h)),100*d]},n.rgb.hsv=function(h){var d,f=h[0]/255,x=h[1]/255,E=h[2]/255,N=Math.max(f,x,E),C=N-Math.min(f,x,E);if(C===0)var I=d=0;else{d=C/N,h=(N-f)/6/C+.5;var S=(N-x)/6/C+.5;C=(N-E)/6/C+.5,f===N?I=C-S:x===N?I=1/3+h-C:E===N&&(I=2/3+S-h),0>I?I+=1:1<I&&--I}return[360*I,100*d,100*N]},n.rgb.hwb=function(h){var d=h[0],f=h[1],x=h[2];h=n.rgb.hsl(h)[0];var E=1/255*Math.min(d,Math.min(f,x));return x=1-1/255*Math.max(d,Math.max(f,x)),[h,100*E,100*x]},n.rgb.cmyk=function(h){var d=h[0]/255,f=h[1]/255;h=h[2]/255;var x=Math.min(1-d,1-f,1-h);return[100*((1-d-x)/(1-x)||0),100*((1-f-x)/(1-x)||0),100*((1-h-x)/(1-x)||0),100*x]},n.rgb.keyword=function(h){var d=r[h];if(d)return d;d=Infinity;var f;for(f in wh)if(wh.hasOwnProperty(f)){var x=wh[f];if(x=Math.pow(h[0]-x[0],2)+Math.pow(h[1]-x[1],2)+Math.pow(h[2]-x[2],2),x<d){d=x;var E=f}}return E},n.keyword.rgb=function(h){return wh[h]},n.rgb.xyz=function(h){var d=h[0]/255,f=h[1]/255;return h=h[2]/255,d=.04045<d?Math.pow((d+.055)/1.055,2.4):d/12.92,f=.04045<f?Math.pow((f+.055)/1.055,2.4):f/12.92,h=.04045<h?Math.pow((h+.055)/1.055,2.4):h/12.92,[100*(.4124*d+.3576*f+.1805*h),100*(.2126*d+.7152*f+.0722*h),100*(.0193*d+.1192*f+.9505*h)]},n.rgb.lab=function(h){var d=n.rgb.xyz(h);h=d[0];var f=d[1];return d=d[2],h/=95.047,f/=100,d/=108.883,h=.008856<h?Math.pow(h,1/3):7.787*h+16/116,f=.008856<f?Math.pow(f,1/3):7.787*f+16/116,d=.008856<d?Math.pow(d,1/3):7.787*d+16/116,[116*f-16,500*(h-f),200*(f-d)]},n.hsl.rgb=function(h){var d=h[0]/360,f=h[1]/100;if(h=h[2]/100,f===0){var x=255*h;return[x,x,x]}f=.5>h?h*(1+f):h+f-h*f,h=2*h-f;for(var E=[0,0,0],N=0;3>N;N++)x=d+1/3*-(N-1),0>x&&x++,1<x&&x--,x=1>6*x?h+6*(f-h)*x:1>2*x?f:2>3*x?h+(f-h)*(2/3-x)*6:h,E[N]=255*x;return E},n.hsl.hsv=function(h){var d=h[0],f=h[1]/100;h=h[2]/100;var x=f,E=Math.max(h,.01);return h*=2,f*=1>=h?h:2-h,x*=1>=E?E:2-E,[d,100*(h===0?2*x/(E+x):2*f/(h+f)),(h+f)/2*100]},n.hsv.rgb=function(h){var d=h[0]/60,f=h[1]/100;h=h[2]/100;var x=Math.floor(d)%6,E=d-Math.floor(d);d=255*h*(1-f);var N=255*h*(1-f*E);switch(f=255*h*(1-f*(1-E)),h*=255,x){case 0:return[h,f,d];case 1:return[N,h,d];case 2:return[d,h,f];case 3:return[d,N,h];case 4:return[f,d,h];case 5:return[h,d,N]}},n.hsv.hsl=function(h){var d=h[0],f=h[1]/100;h=h[2]/100;var x=Math.max(h,.01),E=(2-f)*x;return x=f*x/(1>=E?E:2-E)||0,[d,100*x,(2-f)*h/2*100]},n.hwb.rgb=function(h){var d=h[0]/360,f=h[1]/100;h=h[2]/100;var x=f+h;switch(1<x&&(f/=x,h/=x),x=Math.floor(6*d),h=1-h,d=6*d-x,(x&1)!=0&&(d=1-d),d=f+d*(h-f),x){default:case 6:case 0:x=h;var E=d;break;case 1:x=d,E=h;break;case 2:x=f,E=h,f=d;break;case 3:x=f,E=d,f=h;break;case 4:x=d,E=f,f=h;break;case 5:x=h,E=f,f=d}return[255*x,255*E,255*f]},n.cmyk.rgb=function(h){var d=h[3]/100;return[255*(1-Math.min(1,h[0]/100*(1-d)+d)),255*(1-Math.min(1,h[1]/100*(1-d)+d)),255*(1-Math.min(1,h[2]/100*(1-d)+d))]},n.xyz.rgb=function(h){var d=h[0]/100,f=h[1]/100,x=h[2]/100;h=3.2406*d+-1.5372*f+-.4986*x;var E=-.9689*d+1.8758*f+.0415*x;return d=.0557*d+-.204*f+1.057*x,h=.0031308<h?1.055*Math.pow(h,1/2.4)-.055:12.92*h,E=.0031308<E?1.055*Math.pow(E,1/2.4)-.055:12.92*E,d=.0031308<d?1.055*Math.pow(d,1/2.4)-.055:12.92*d,h=Math.min(Math.max(0,h),1),E=Math.min(Math.max(0,E),1),d=Math.min(Math.max(0,d),1),[255*h,255*E,255*d]},n.xyz.lab=function(h){var d=h[0],f=h[1];return h=h[2],d/=95.047,f/=100,h/=108.883,d=.008856<d?Math.pow(d,1/3):7.787*d+16/116,f=.008856<f?Math.pow(f,1/3):7.787*f+16/116,h=.008856<h?Math.pow(h,1/3):7.787*h+16/116,[116*f-16,500*(d-f),200*(f-h)]},n.lab.xyz=function(h){var d=h[1],f=h[2];h=(h[0]+16)/116,d=d/500+h,f=h-f/200;var x=Math.pow(h,3),E=Math.pow(d,3),N=Math.pow(f,3);return[95.047*(.008856<E?E:(d-16/116)/7.787),100*(.008856<x?x:(h-16/116)/7.787),108.883*(.008856<N?N:(f-16/116)/7.787)]},n.lab.lch=function(h){var d=h[0],f=h[1];h=h[2];var x=360*Math.atan2(h,f)/2/Math.PI;return 0>x&&(x+=360),[d,Math.sqrt(f*f+h*h),x]},n.lch.lab=function(h){var d=h[0],f=h[1];return h=h[2]/360*2*Math.PI,[d,f*Math.cos(h),f*Math.sin(h)]},n.rgb.ansi16=function(h){var d=h[0],f=h[1],x=h[2],E=1 in arguments?arguments[1]:n.rgb.hsv(h)[2];return E=Math.round(E/50),E===0?30:(d=30+(Math.round(x/255)<<2|Math.round(f/255)<<1|Math.round(d/255)),E===2&&(d+=60),d)},n.hsv.ansi16=function(h){return n.rgb.ansi16(n.hsv.rgb(h),h[2])},n.rgb.ansi256=function(h){var d=h[0],f=h[1];return h=h[2],d===f&&f===h?8>d?16:248<d?231:Math.round((d-8)/247*24)+232:16+36*Math.round(d/255*5)+6*Math.round(f/255*5)+Math.round(h/255*5)},n.ansi16.rgb=function(h){var d=h%10;return d===0||d===7?(50<h&&(d+=3.5),d=d/10.5*255,[d,d,d]):(h=.5*(~~(50<h)+1),[(d&1)*h*255,(d>>1&1)*h*255,(d>>2&1)*h*255])},n.ansi256.rgb=function(h){if(232<=h){var d=10*(h-232)+8;return[d,d,d]}h-=16,d=Math.floor(h/36)/5*255;var f=Math.floor((h%=36)/6)/5*255;return[d,f,h%6/5*255]},n.rgb.hex=function(h){return h=(((Math.round(h[0])&255)<<16)+((Math.round(h[1])&255)<<8)+(Math.round(h[2])&255)).toString(16).toUpperCase(),"000000".substring(h.length)+h},n.hex.rgb=function(h){if(h=h.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i),!h)return[0,0,0];var d=h[0];return h[0].length===3&&(d=d.split("").map(function(f){return f+f}).join("")),h=parseInt(d,16),[h>>16&255,h>>8&255,h&255]},n.rgb.hcg=function(h){var d=h[0]/255,f=h[1]/255;h=h[2]/255;var x=Math.max(Math.max(d,f),h),E=Math.min(Math.min(d,f),h),N=x-E;return[(0>=N?0:x===d?(f-h)/N%6:x===f?2+(h-d)/N:(d-f)/N+8)/6%1*360,100*N,100*(1>N?E/(1-N):0)]},n.hsl.hcg=function(h){var d=h[1]/100,f=h[2]/100,x=0;return d=.5>f?2*d*f:2*d*(1-f),1>d&&(x=(f-.5*d)/(1-d)),[h[0],100*d,100*x]},n.hsv.hcg=function(h){var d=h[2]/100,f=h[1]/100*d,x=0;return 1>f&&(x=(d-f)/(1-f)),[h[0],100*f,100*x]},n.hcg.rgb=function(h){var d=h[1]/100,f=h[2]/100;if(d===0)return[255*f,255*f,255*f];var x=[0,0,0];h=h[0]/360%1*6;var E=h%1,N=1-E;switch(Math.floor(h)){case 0:x[0]=1,x[1]=E,x[2]=0;break;case 1:x[0]=N,x[1]=1,x[2]=0;break;case 2:x[0]=0,x[1]=1,x[2]=E;break;case 3:x[0]=0,x[1]=N,x[2]=1;break;case 4:x[0]=E,x[1]=0,x[2]=1;break;default:x[0]=1,x[1]=0,x[2]=N}return f*=1-d,[255*(d*x[0]+f),255*(d*x[1]+f),255*(d*x[2]+f)]},n.hcg.hsv=function(h){var d=h[1]/100,f=d+h[2]/100*(1-d),x=0;return 0<f&&(x=d/f),[h[0],100*x,100*f]},n.hcg.hsl=function(h){var d=h[1]/100,f=h[2]/100*(1-d)+.5*d,x=0;return 0<f&&.5>f?x=d/(2*f):.5<=f&&1>f&&(x=d/(2*(1-f))),[h[0],100*x,100*f]},n.hcg.hwb=function(h){var d=h[1]/100,f=d+h[2]/100*(1-d);return[h[0],100*(f-d),100*(1-f)]},n.hwb.hcg=function(h){var d=1-h[2]/100,f=d-h[1]/100,x=0;return 1>f&&(x=(d-f)/(1-f)),[h[0],100*f,100*x]},n.apple.rgb=function(h){return[h[0]/65535*255,h[1]/65535*255,h[2]/65535*255]},n.rgb.apple=function(h){return[h[0]/255*65535,h[1]/255*65535,h[2]/255*65535]},n.gray.rgb=function(h){return[h[0]/100*255,h[0]/100*255,h[0]/100*255]},n.gray.hsl=n.gray.hsv=function(h){return[0,0,h[0]]},n.gray.hwb=function(h){return[0,100,h[0]]},n.gray.cmyk=function(h){return[0,0,0,h[0]]},n.gray.lab=function(h){return[h[0],0,0]},n.gray.hex=function(h){return h=Math.round(h[0]/100*255)&255,h=((h<<16)+(h<<8)+h).toString(16).toUpperCase(),"000000".substring(h.length)+h},n.rgb.gray=function(h){return[(h[0]+h[1]+h[2])/3/255*100]}}),O_=function(t){for(var r={},n=Xi(vg),s=n.length,c=0;c<s;c++)r[n[c]]={distance:-1,parent:null};for(n=[t],r[t].distance=0;n.length;){t=n.pop(),s=Xi(vg[t]),c=s.length;for(var h=0;h<c;h++){var d=s[h],f=r[d];f.distance===-1&&(f.distance=r[t].distance+1,f.parent=t,n.unshift(d))}}for(n={},t=Xi(r),s=t.length,c=0;c<s;c++){var x=t[c];if(r[x].parent!==null){h=x,d=r,f=[d[x].parent,x];var E=vg[d[x].parent][x];for(x=d[x].parent;d[x].parent;)f.unshift(d[x].parent),E=ic(vg[d[x].parent][x],E),x=d[x].parent;E.conversion=f,n[h]=E}}return n},Km={};Xi(vg).forEach(function(t){Km[t]={},Object.defineProperty(Km[t],"channels",{value:vg[t].channels}),Object.defineProperty(Km[t],"labels",{value:vg[t].labels});var r=O_(t);Xi(r).forEach(function(n){var s=r[n];Km[t][n]=sm(s),Km[t][n].raw=om(s)})});var Vu=Km,Zx=[].slice,u2=["keyword","gray","hex"],Jx={};Xi(Vu).forEach(function(t){Jx[Zx.call(Vu[t].labels).sort().join("")]=t});var X1={};ys.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var r=this.model in v0.to?this:this.rgb();return r=r.round(typeof t=="number"?t:1),t=r.valpha===1?r.color:r.color.concat(this.valpha),v0.to[r.model](t)},percentString:function(t){return t=this.rgb().round(typeof t=="number"?t:1),t=t.valpha===1?t.color:t.color.concat(this.valpha),v0.to.rgb.percent(t)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},r=Vu[this.model].channels,n=Vu[this.model].labels,s=0;s<r;s++)t[n[s]]=this.color[s];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new ys(this.color.map(vl(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new ys(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:ho("rgb",0,co(255)),green:ho("rgb",1,co(255)),blue:ho("rgb",2,co(255)),hue:ho(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:ho("hsl",1,co(100)),lightness:ho("hsl",2,co(100)),saturationv:ho("hsv",1,co(100)),value:ho("hsv",2,co(100)),chroma:ho("hcg",1,co(100)),gray:ho("hcg",2,co(100)),white:ho("hwb",1,co(100)),wblack:ho("hwb",2,co(100)),cyan:ho("cmyk",0,co(100)),magenta:ho("cmyk",1,co(100)),yellow:ho("cmyk",2,co(100)),black:ho("cmyk",3,co(100)),x:ho("xyz",0,co(100)),y:ho("xyz",1,co(100)),z:ho("xyz",2,co(100)),l:ho("lab",0,co(100)),a:ho("lab",1),b:ho("lab",2),keyword:function(t){return arguments.length?new ys(t):Vu[this.model].keyword(this.color)},hex:function(t){return arguments.length?new ys(t):v0.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity:function(){for(var t=this.rgb().color,r=[],n=0;n<t.length;n++){var s=t[n]/255;r[n]=.03928>=s?s/12.92:Math.pow((s+.055)/1.055,2.4)}return .2126*r[0]+.7152*r[1]+.0722*r[2]},contrast:function(t){var r=this.luminosity();return t=t.luminosity(),r>t?(r+.05)/(t+.05):(t+.05)/(r+.05)},level:function(t){return t=this.contrast(t),7.1<=t?"AAA":4.5<=t?"AA":""},isDark:function(){var t=this.rgb().color;return 128>(299*t[0]+587*t[1]+114*t[2])/1e3},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),r=0;3>r;r++)t.color[r]=255-t.color[r];return t},lighten:function(t){var r=this.hsl();return r.color[2]+=r.color[2]*t,r},darken:function(t){var r=this.hsl();return r.color[2]-=r.color[2]*t,r},saturate:function(t){var r=this.hsl();return r.color[1]+=r.color[1]*t,r},desaturate:function(t){var r=this.hsl();return r.color[1]-=r.color[1]*t,r},whiten:function(t){var r=this.hwb();return r.color[1]+=r.color[1]*t,r},blacken:function(t){var r=this.hwb();return r.color[2]+=r.color[2]*t,r},grayscale:function(){var t=this.rgb().color;return t=.3*t[0]+.59*t[1]+.11*t[2],ys.rgb(t,t,t)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var r=this.hsl(),n=r.color[0];return n=(n+t)%360,r.color[0]=0>n?360+n:n,r},mix:function(t,r){if(!t||!t.rgb)throw Error('Argument to "mix" was not a Color instance, but rather an instance of '+(typeof t=="undefined"?"undefined":QA(t)));t=t.rgb();var n=this.rgb();r=r===void 0?.5:r;var s=2*r-1,c=t.alpha()-n.alpha();return s=((s*c==-1?s:(s+c)/(1+s*c))+1)/2,c=1-s,ys.rgb(s*t.red()+c*n.red(),s*t.green()+c*n.green(),s*t.blue()+c*n.blue(),t.alpha()*r+n.alpha()*(1-r))}},Xi(Vu).forEach(function(t){if(u2.indexOf(t)===-1){var r=Vu[t].channels;ys.prototype[t]=function(){if(this.model===t)return new ys(this);if(arguments.length)return new ys(arguments,t);var n=typeof arguments[r]=="number"?r:this.valpha,s=Vu[this.model][t].raw(this.color);return s=Array.isArray(s)?s:[s],new ys(s.concat(n),t)},ys[t]=function(n){return typeof n=="number"&&(n=Wd(Zx.call(arguments),r)),new ys(n,t)}}});var Ch=Ot(function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=function(h){r.ARRAY_TYPE=s=h},r.toRadian=function(h){return h*c},r.equals=function(h,d){return Math.abs(h-d)<=n*Math.max(1,Math.abs(h),Math.abs(d))},r.RANDOM=r.ARRAY_TYPE=r.EPSILON=void 0;var n=1e-6;r.EPSILON=n;var s=typeof Float32Array!="undefined"?Float32Array:Array;r.ARRAY_TYPE=s,r.RANDOM=Math.random;var c=Math.PI/180});Gt(Ch);var l2=Ot(function(t,r){function n(h,d,f){var x=d[0],E=d[1],N=d[2];d=d[3];var C=f[0],I=f[1],S=f[2];return f=f[3],h[0]=x*C+N*I,h[1]=E*C+d*I,h[2]=x*S+N*f,h[3]=E*S+d*f,h}function s(h,d,f){return h[0]=d[0]-f[0],h[1]=d[1]-f[1],h[2]=d[2]-f[2],h[3]=d[3]-f[3],h}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var h=new c.ARRAY_TYPE(4);return c.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h},r.clone=function(h){var d=new c.ARRAY_TYPE(4);return d[0]=h[0],d[1]=h[1],d[2]=h[2],d[3]=h[3],d},r.copy=function(h,d){return h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3],h},r.identity=function(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h},r.fromValues=function(h,d,f,x){var E=new c.ARRAY_TYPE(4);return E[0]=h,E[1]=d,E[2]=f,E[3]=x,E},r.set=function(h,d,f,x,E){return h[0]=d,h[1]=f,h[2]=x,h[3]=E,h},r.transpose=function(h,d){if(h===d){var f=d[1];h[1]=d[2],h[2]=f}else h[0]=d[0],h[1]=d[2],h[2]=d[1],h[3]=d[3];return h},r.invert=function(h,d){var f=d[0],x=d[1],E=d[2];d=d[3];var N=f*d-E*x;return N?(N=1/N,h[0]=d*N,h[1]=-x*N,h[2]=-E*N,h[3]=f*N,h):null},r.adjoint=function(h,d){var f=d[0];return h[0]=d[3],h[1]=-d[1],h[2]=-d[2],h[3]=f,h},r.determinant=function(h){return h[0]*h[3]-h[2]*h[1]},r.multiply=n,r.rotate=function(h,d,f){var x=d[0],E=d[1],N=d[2];d=d[3];var C=Math.sin(f);return f=Math.cos(f),h[0]=x*f+N*C,h[1]=E*f+d*C,h[2]=x*-C+N*f,h[3]=E*-C+d*f,h},r.scale=function(h,d,f){var x=d[1],E=d[2],N=d[3],C=f[0];return f=f[1],h[0]=d[0]*C,h[1]=x*C,h[2]=E*f,h[3]=N*f,h},r.fromRotation=function(h,d){var f=Math.sin(d);return d=Math.cos(d),h[0]=d,h[1]=f,h[2]=-f,h[3]=d,h},r.fromScaling=function(h,d){return h[0]=d[0],h[1]=0,h[2]=0,h[3]=d[1],h},r.str=function(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"},r.frob=function(h){return Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)+Math.pow(h[2],2)+Math.pow(h[3],2))},r.LDU=function(h,d,f,x){return h[2]=x[2]/x[0],f[0]=x[0],f[1]=x[1],f[3]=x[3]-h[2]*f[1],[h,d,f]},r.add=function(h,d,f){return h[0]=d[0]+f[0],h[1]=d[1]+f[1],h[2]=d[2]+f[2],h[3]=d[3]+f[3],h},r.subtract=s,r.exactEquals=function(h,d){return h[0]===d[0]&&h[1]===d[1]&&h[2]===d[2]&&h[3]===d[3]},r.equals=function(h,d){var f=h[0],x=h[1],E=h[2];h=h[3];var N=d[0],C=d[1],I=d[2];return d=d[3],Math.abs(f-N)<=c.EPSILON*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(x-C)<=c.EPSILON*Math.max(1,Math.abs(x),Math.abs(C))&&Math.abs(E-I)<=c.EPSILON*Math.max(1,Math.abs(E),Math.abs(I))&&Math.abs(h-d)<=c.EPSILON*Math.max(1,Math.abs(h),Math.abs(d))},r.multiplyScalar=function(h,d,f){return h[0]=d[0]*f,h[1]=d[1]*f,h[2]=d[2]*f,h[3]=d[3]*f,h},r.multiplyScalarAndAdd=function(h,d,f,x){return h[0]=d[0]+f[0]*x,h[1]=d[1]+f[1]*x,h[2]=d[2]+f[2]*x,h[3]=d[3]+f[3]*x,h},r.sub=r.mul=void 0;var c=function(h){if(h&&h.__esModule)return h;var d={};if(h!=null){for(var f in h)if(Object.prototype.hasOwnProperty.call(h,f)){var x=qe&&Qs?Qs(h,f):{};x.get||x.set?qe(d,f,x):d[f]=h[f]}}return d.default=h,d}(Ch);r.mul=n,r.sub=s});Gt(l2);var h2=Ot(function(t,r){function n(h,d,f){var x=d[0],E=d[1],N=d[2],C=d[3],I=d[4];d=d[5];var S=f[0],F=f[1],D=f[2],K=f[3],Z=f[4];return f=f[5],h[0]=x*S+N*F,h[1]=E*S+C*F,h[2]=x*D+N*K,h[3]=E*D+C*K,h[4]=x*Z+N*f+I,h[5]=E*Z+C*f+d,h}function s(h,d,f){return h[0]=d[0]-f[0],h[1]=d[1]-f[1],h[2]=d[2]-f[2],h[3]=d[3]-f[3],h[4]=d[4]-f[4],h[5]=d[5]-f[5],h}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var h=new c.ARRAY_TYPE(6);return c.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h},r.clone=function(h){var d=new c.ARRAY_TYPE(6);return d[0]=h[0],d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d},r.copy=function(h,d){return h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3],h[4]=d[4],h[5]=d[5],h},r.identity=function(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h},r.fromValues=function(h,d,f,x,E,N){var C=new c.ARRAY_TYPE(6);return C[0]=h,C[1]=d,C[2]=f,C[3]=x,C[4]=E,C[5]=N,C},r.set=function(h,d,f,x,E,N,C){return h[0]=d,h[1]=f,h[2]=x,h[3]=E,h[4]=N,h[5]=C,h},r.invert=function(h,d){var f=d[0],x=d[1],E=d[2],N=d[3],C=d[4];d=d[5];var I=f*N-x*E;return I?(I=1/I,h[0]=N*I,h[1]=-x*I,h[2]=-E*I,h[3]=f*I,h[4]=(E*d-N*C)*I,h[5]=(x*C-f*d)*I,h):null},r.determinant=function(h){return h[0]*h[3]-h[1]*h[2]},r.multiply=n,r.rotate=function(h,d,f){var x=d[0],E=d[1],N=d[2],C=d[3],I=d[4];d=d[5];var S=Math.sin(f);return f=Math.cos(f),h[0]=x*f+N*S,h[1]=E*f+C*S,h[2]=x*-S+N*f,h[3]=E*-S+C*f,h[4]=I,h[5]=d,h},r.scale=function(h,d,f){var x=d[1],E=d[2],N=d[3],C=d[4],I=d[5],S=f[0];return f=f[1],h[0]=d[0]*S,h[1]=x*S,h[2]=E*f,h[3]=N*f,h[4]=C,h[5]=I,h},r.translate=function(h,d,f){var x=d[0],E=d[1],N=d[2],C=d[3],I=d[4];d=d[5];var S=f[0];return f=f[1],h[0]=x,h[1]=E,h[2]=N,h[3]=C,h[4]=x*S+N*f+I,h[5]=E*S+C*f+d,h},r.fromRotation=function(h,d){var f=Math.sin(d);return d=Math.cos(d),h[0]=d,h[1]=f,h[2]=-f,h[3]=d,h[4]=0,h[5]=0,h},r.fromScaling=function(h,d){return h[0]=d[0],h[1]=0,h[2]=0,h[3]=d[1],h[4]=0,h[5]=0,h},r.fromTranslation=function(h,d){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=d[0],h[5]=d[1],h},r.str=function(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"},r.frob=function(h){return Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)+Math.pow(h[2],2)+Math.pow(h[3],2)+Math.pow(h[4],2)+Math.pow(h[5],2)+1)},r.add=function(h,d,f){return h[0]=d[0]+f[0],h[1]=d[1]+f[1],h[2]=d[2]+f[2],h[3]=d[3]+f[3],h[4]=d[4]+f[4],h[5]=d[5]+f[5],h},r.subtract=s,r.multiplyScalar=function(h,d,f){return h[0]=d[0]*f,h[1]=d[1]*f,h[2]=d[2]*f,h[3]=d[3]*f,h[4]=d[4]*f,h[5]=d[5]*f,h},r.multiplyScalarAndAdd=function(h,d,f,x){return h[0]=d[0]+f[0]*x,h[1]=d[1]+f[1]*x,h[2]=d[2]+f[2]*x,h[3]=d[3]+f[3]*x,h[4]=d[4]+f[4]*x,h[5]=d[5]+f[5]*x,h},r.exactEquals=function(h,d){return h[0]===d[0]&&h[1]===d[1]&&h[2]===d[2]&&h[3]===d[3]&&h[4]===d[4]&&h[5]===d[5]},r.equals=function(h,d){var f=h[0],x=h[1],E=h[2],N=h[3],C=h[4];h=h[5];var I=d[0],S=d[1],F=d[2],D=d[3],K=d[4];return d=d[5],Math.abs(f-I)<=c.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(x-S)<=c.EPSILON*Math.max(1,Math.abs(x),Math.abs(S))&&Math.abs(E-F)<=c.EPSILON*Math.max(1,Math.abs(E),Math.abs(F))&&Math.abs(N-D)<=c.EPSILON*Math.max(1,Math.abs(N),Math.abs(D))&&Math.abs(C-K)<=c.EPSILON*Math.max(1,Math.abs(C),Math.abs(K))&&Math.abs(h-d)<=c.EPSILON*Math.max(1,Math.abs(h),Math.abs(d))},r.sub=r.mul=void 0;var c=function(h){if(h&&h.__esModule)return h;var d={};if(h!=null){for(var f in h)if(Object.prototype.hasOwnProperty.call(h,f)){var x=qe&&Qs?Qs(h,f):{};x.get||x.set?qe(d,f,x):d[f]=h[f]}}return d.default=h,d}(Ch);r.mul=n,r.sub=s});Gt(h2);var qx=Ot(function(t,r){function n(h,d,f){var x=d[0],E=d[1],N=d[2],C=d[3],I=d[4],S=d[5],F=d[6],D=d[7];d=d[8];var K=f[0],Z=f[1],$=f[2],st=f[3],ht=f[4],Et=f[5],It=f[6],Bt=f[7];return f=f[8],h[0]=K*x+Z*C+$*F,h[1]=K*E+Z*I+$*D,h[2]=K*N+Z*S+$*d,h[3]=st*x+ht*C+Et*F,h[4]=st*E+ht*I+Et*D,h[5]=st*N+ht*S+Et*d,h[6]=It*x+Bt*C+f*F,h[7]=It*E+Bt*I+f*D,h[8]=It*N+Bt*S+f*d,h}function s(h,d,f){return h[0]=d[0]-f[0],h[1]=d[1]-f[1],h[2]=d[2]-f[2],h[3]=d[3]-f[3],h[4]=d[4]-f[4],h[5]=d[5]-f[5],h[6]=d[6]-f[6],h[7]=d[7]-f[7],h[8]=d[8]-f[8],h}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var h=new c.ARRAY_TYPE(9);return c.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h},r.fromMat4=function(h,d){return h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[4],h[4]=d[5],h[5]=d[6],h[6]=d[8],h[7]=d[9],h[8]=d[10],h},r.clone=function(h){var d=new c.ARRAY_TYPE(9);return d[0]=h[0],d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d[6]=h[6],d[7]=h[7],d[8]=h[8],d},r.copy=function(h,d){return h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3],h[4]=d[4],h[5]=d[5],h[6]=d[6],h[7]=d[7],h[8]=d[8],h},r.fromValues=function(h,d,f,x,E,N,C,I,S){var F=new c.ARRAY_TYPE(9);return F[0]=h,F[1]=d,F[2]=f,F[3]=x,F[4]=E,F[5]=N,F[6]=C,F[7]=I,F[8]=S,F},r.set=function(h,d,f,x,E,N,C,I,S,F){return h[0]=d,h[1]=f,h[2]=x,h[3]=E,h[4]=N,h[5]=C,h[6]=I,h[7]=S,h[8]=F,h},r.identity=function(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=1,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},r.transpose=function(h,d){if(h===d){var f=d[1],x=d[2],E=d[5];h[1]=d[3],h[2]=d[6],h[3]=f,h[5]=d[7],h[6]=x,h[7]=E}else h[0]=d[0],h[1]=d[3],h[2]=d[6],h[3]=d[1],h[4]=d[4],h[5]=d[7],h[6]=d[2],h[7]=d[5],h[8]=d[8];return h},r.invert=function(h,d){var f=d[0],x=d[1],E=d[2],N=d[3],C=d[4],I=d[5],S=d[6],F=d[7];d=d[8];var D=d*C-I*F,K=-d*N+I*S,Z=F*N-C*S,$=f*D+x*K+E*Z;return $?($=1/$,h[0]=D*$,h[1]=(-d*x+E*F)*$,h[2]=(I*x-E*C)*$,h[3]=K*$,h[4]=(d*f-E*S)*$,h[5]=(-I*f+E*N)*$,h[6]=Z*$,h[7]=(-F*f+x*S)*$,h[8]=(C*f-x*N)*$,h):null},r.adjoint=function(h,d){var f=d[0],x=d[1],E=d[2],N=d[3],C=d[4],I=d[5],S=d[6],F=d[7];return d=d[8],h[0]=C*d-I*F,h[1]=E*F-x*d,h[2]=x*I-E*C,h[3]=I*S-N*d,h[4]=f*d-E*S,h[5]=E*N-f*I,h[6]=N*F-C*S,h[7]=x*S-f*F,h[8]=f*C-x*N,h},r.determinant=function(h){var d=h[3],f=h[4],x=h[5],E=h[6],N=h[7],C=h[8];return h[0]*(C*f-x*N)+h[1]*(-C*d+x*E)+h[2]*(N*d-f*E)},r.multiply=n,r.translate=function(h,d,f){var x=d[0],E=d[1],N=d[2],C=d[3],I=d[4],S=d[5],F=d[6],D=d[7];d=d[8];var K=f[0];return f=f[1],h[0]=x,h[1]=E,h[2]=N,h[3]=C,h[4]=I,h[5]=S,h[6]=K*x+f*C+F,h[7]=K*E+f*I+D,h[8]=K*N+f*S+d,h},r.rotate=function(h,d,f){var x=d[0],E=d[1],N=d[2],C=d[3],I=d[4],S=d[5],F=d[6],D=d[7];d=d[8];var K=Math.sin(f);return f=Math.cos(f),h[0]=f*x+K*C,h[1]=f*E+K*I,h[2]=f*N+K*S,h[3]=f*C-K*x,h[4]=f*I-K*E,h[5]=f*S-K*N,h[6]=F,h[7]=D,h[8]=d,h},r.scale=function(h,d,f){var x=f[0];return f=f[1],h[0]=x*d[0],h[1]=x*d[1],h[2]=x*d[2],h[3]=f*d[3],h[4]=f*d[4],h[5]=f*d[5],h[6]=d[6],h[7]=d[7],h[8]=d[8],h},r.fromTranslation=function(h,d){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=1,h[5]=0,h[6]=d[0],h[7]=d[1],h[8]=1,h},r.fromRotation=function(h,d){var f=Math.sin(d);return d=Math.cos(d),h[0]=d,h[1]=f,h[2]=0,h[3]=-f,h[4]=d,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},r.fromScaling=function(h,d){return h[0]=d[0],h[1]=0,h[2]=0,h[3]=0,h[4]=d[1],h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},r.fromMat2d=function(h,d){return h[0]=d[0],h[1]=d[1],h[2]=0,h[3]=d[2],h[4]=d[3],h[5]=0,h[6]=d[4],h[7]=d[5],h[8]=1,h},r.fromQuat=function(h,d){var f=d[0],x=d[1],E=d[2];d=d[3];var N=f+f,C=x+x,I=E+E;f*=N;var S=x*N;x*=C;var F=E*N,D=E*C;return E*=I,N*=d,C*=d,d*=I,h[0]=1-x-E,h[3]=S-d,h[6]=F+C,h[1]=S+d,h[4]=1-f-E,h[7]=D-N,h[2]=F-C,h[5]=D+N,h[8]=1-f-x,h},r.normalFromMat4=function(h,d){var f=d[0],x=d[1],E=d[2],N=d[3],C=d[4],I=d[5],S=d[6],F=d[7],D=d[8],K=d[9],Z=d[10],$=d[11],st=d[12],ht=d[13],Et=d[14];d=d[15];var It=f*I-x*C,Bt=f*S-E*C,Xt=f*F-N*C,Yt=x*S-E*I,fe=x*F-N*I,te=E*F-N*S,le=D*ht-K*st,tr=D*Et-Z*st;D=D*d-$*st;var Me=K*Et-Z*ht;return K=K*d-$*ht,Z=Z*d-$*Et,$=It*Z-Bt*K+Xt*Me+Yt*D-fe*tr+te*le,$?($=1/$,h[0]=(I*Z-S*K+F*Me)*$,h[1]=(S*D-C*Z-F*tr)*$,h[2]=(C*K-I*D+F*le)*$,h[3]=(E*K-x*Z-N*Me)*$,h[4]=(f*Z-E*D+N*tr)*$,h[5]=(x*D-f*K-N*le)*$,h[6]=(ht*te-Et*fe+d*Yt)*$,h[7]=(Et*Xt-st*te-d*Bt)*$,h[8]=(st*fe-ht*Xt+d*It)*$,h):null},r.projection=function(h,d,f){return h[0]=2/d,h[1]=0,h[2]=0,h[3]=0,h[4]=-2/f,h[5]=0,h[6]=-1,h[7]=1,h[8]=1,h},r.str=function(h){return"mat3("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+")"},r.frob=function(h){return Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)+Math.pow(h[2],2)+Math.pow(h[3],2)+Math.pow(h[4],2)+Math.pow(h[5],2)+Math.pow(h[6],2)+Math.pow(h[7],2)+Math.pow(h[8],2))},r.add=function(h,d,f){return h[0]=d[0]+f[0],h[1]=d[1]+f[1],h[2]=d[2]+f[2],h[3]=d[3]+f[3],h[4]=d[4]+f[4],h[5]=d[5]+f[5],h[6]=d[6]+f[6],h[7]=d[7]+f[7],h[8]=d[8]+f[8],h},r.subtract=s,r.multiplyScalar=function(h,d,f){return h[0]=d[0]*f,h[1]=d[1]*f,h[2]=d[2]*f,h[3]=d[3]*f,h[4]=d[4]*f,h[5]=d[5]*f,h[6]=d[6]*f,h[7]=d[7]*f,h[8]=d[8]*f,h},r.multiplyScalarAndAdd=function(h,d,f,x){return h[0]=d[0]+f[0]*x,h[1]=d[1]+f[1]*x,h[2]=d[2]+f[2]*x,h[3]=d[3]+f[3]*x,h[4]=d[4]+f[4]*x,h[5]=d[5]+f[5]*x,h[6]=d[6]+f[6]*x,h[7]=d[7]+f[7]*x,h[8]=d[8]+f[8]*x,h},r.exactEquals=function(h,d){return h[0]===d[0]&&h[1]===d[1]&&h[2]===d[2]&&h[3]===d[3]&&h[4]===d[4]&&h[5]===d[5]&&h[6]===d[6]&&h[7]===d[7]&&h[8]===d[8]},r.equals=function(h,d){var f=h[0],x=h[1],E=h[2],N=h[3],C=h[4],I=h[5],S=h[6],F=h[7];h=h[8];var D=d[0],K=d[1],Z=d[2],$=d[3],st=d[4],ht=d[5],Et=d[6],It=d[7];return d=d[8],Math.abs(f-D)<=c.EPSILON*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(x-K)<=c.EPSILON*Math.max(1,Math.abs(x),Math.abs(K))&&Math.abs(E-Z)<=c.EPSILON*Math.max(1,Math.abs(E),Math.abs(Z))&&Math.abs(N-$)<=c.EPSILON*Math.max(1,Math.abs(N),Math.abs($))&&Math.abs(C-st)<=c.EPSILON*Math.max(1,Math.abs(C),Math.abs(st))&&Math.abs(I-ht)<=c.EPSILON*Math.max(1,Math.abs(I),Math.abs(ht))&&Math.abs(S-Et)<=c.EPSILON*Math.max(1,Math.abs(S),Math.abs(Et))&&Math.abs(F-It)<=c.EPSILON*Math.max(1,Math.abs(F),Math.abs(It))&&Math.abs(h-d)<=c.EPSILON*Math.max(1,Math.abs(h),Math.abs(d))},r.sub=r.mul=void 0;var c=function(h){if(h&&h.__esModule)return h;var d={};if(h!=null){for(var f in h)if(Object.prototype.hasOwnProperty.call(h,f)){var x=qe&&Qs?Qs(h,f):{};x.get||x.set?qe(d,f,x):d[f]=h[f]}}return d.default=h,d}(Ch);r.mul=n,r.sub=s});Gt(qx);var $x=Ot(function(t,r){function n(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function s(f,x,E){var N=x[0],C=x[1],I=x[2],S=x[3],F=x[4],D=x[5],K=x[6],Z=x[7],$=x[8],st=x[9],ht=x[10],Et=x[11],It=x[12],Bt=x[13],Xt=x[14];x=x[15];var Yt=E[0],fe=E[1],te=E[2],le=E[3];return f[0]=Yt*N+fe*F+te*$+le*It,f[1]=Yt*C+fe*D+te*st+le*Bt,f[2]=Yt*I+fe*K+te*ht+le*Xt,f[3]=Yt*S+fe*Z+te*Et+le*x,Yt=E[4],fe=E[5],te=E[6],le=E[7],f[4]=Yt*N+fe*F+te*$+le*It,f[5]=Yt*C+fe*D+te*st+le*Bt,f[6]=Yt*I+fe*K+te*ht+le*Xt,f[7]=Yt*S+fe*Z+te*Et+le*x,Yt=E[8],fe=E[9],te=E[10],le=E[11],f[8]=Yt*N+fe*F+te*$+le*It,f[9]=Yt*C+fe*D+te*st+le*Bt,f[10]=Yt*I+fe*K+te*ht+le*Xt,f[11]=Yt*S+fe*Z+te*Et+le*x,Yt=E[12],fe=E[13],te=E[14],le=E[15],f[12]=Yt*N+fe*F+te*$+le*It,f[13]=Yt*C+fe*D+te*st+le*Bt,f[14]=Yt*I+fe*K+te*ht+le*Xt,f[15]=Yt*S+fe*Z+te*Et+le*x,f}function c(f,x,E){var N=x[0],C=x[1],I=x[2],S=x[3],F=N+N,D=C+C,K=I+I;x=N*F;var Z=N*D;N*=K;var $=C*D;return C*=K,I*=K,F*=S,D*=S,S*=K,f[0]=1-($+I),f[1]=Z+S,f[2]=N-D,f[3]=0,f[4]=Z-S,f[5]=1-(x+I),f[6]=C+F,f[7]=0,f[8]=N+D,f[9]=C-F,f[10]=1-(x+$),f[11]=0,f[12]=E[0],f[13]=E[1],f[14]=E[2],f[15]=1,f}function h(f,x,E){return f[0]=x[0]-E[0],f[1]=x[1]-E[1],f[2]=x[2]-E[2],f[3]=x[3]-E[3],f[4]=x[4]-E[4],f[5]=x[5]-E[5],f[6]=x[6]-E[6],f[7]=x[7]-E[7],f[8]=x[8]-E[8],f[9]=x[9]-E[9],f[10]=x[10]-E[10],f[11]=x[11]-E[11],f[12]=x[12]-E[12],f[13]=x[13]-E[13],f[14]=x[14]-E[14],f[15]=x[15]-E[15],f}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var f=new d.ARRAY_TYPE(16);return d.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},r.clone=function(f){var x=new d.ARRAY_TYPE(16);return x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3],x[4]=f[4],x[5]=f[5],x[6]=f[6],x[7]=f[7],x[8]=f[8],x[9]=f[9],x[10]=f[10],x[11]=f[11],x[12]=f[12],x[13]=f[13],x[14]=f[14],x[15]=f[15],x},r.copy=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f[4]=x[4],f[5]=x[5],f[6]=x[6],f[7]=x[7],f[8]=x[8],f[9]=x[9],f[10]=x[10],f[11]=x[11],f[12]=x[12],f[13]=x[13],f[14]=x[14],f[15]=x[15],f},r.fromValues=function(f,x,E,N,C,I,S,F,D,K,Z,$,st,ht,Et,It){var Bt=new d.ARRAY_TYPE(16);return Bt[0]=f,Bt[1]=x,Bt[2]=E,Bt[3]=N,Bt[4]=C,Bt[5]=I,Bt[6]=S,Bt[7]=F,Bt[8]=D,Bt[9]=K,Bt[10]=Z,Bt[11]=$,Bt[12]=st,Bt[13]=ht,Bt[14]=Et,Bt[15]=It,Bt},r.set=function(f,x,E,N,C,I,S,F,D,K,Z,$,st,ht,Et,It,Bt){return f[0]=x,f[1]=E,f[2]=N,f[3]=C,f[4]=I,f[5]=S,f[6]=F,f[7]=D,f[8]=K,f[9]=Z,f[10]=$,f[11]=st,f[12]=ht,f[13]=Et,f[14]=It,f[15]=Bt,f},r.identity=n,r.transpose=function(f,x){if(f===x){var E=x[1],N=x[2],C=x[3],I=x[6],S=x[7],F=x[11];f[1]=x[4],f[2]=x[8],f[3]=x[12],f[4]=E,f[6]=x[9],f[7]=x[13],f[8]=N,f[9]=I,f[11]=x[14],f[12]=C,f[13]=S,f[14]=F}else f[0]=x[0],f[1]=x[4],f[2]=x[8],f[3]=x[12],f[4]=x[1],f[5]=x[5],f[6]=x[9],f[7]=x[13],f[8]=x[2],f[9]=x[6],f[10]=x[10],f[11]=x[14],f[12]=x[3],f[13]=x[7],f[14]=x[11],f[15]=x[15];return f},r.invert=function(f,x){var E=x[0],N=x[1],C=x[2],I=x[3],S=x[4],F=x[5],D=x[6],K=x[7],Z=x[8],$=x[9],st=x[10],ht=x[11],Et=x[12],It=x[13],Bt=x[14];x=x[15];var Xt=E*F-N*S,Yt=E*D-C*S,fe=E*K-I*S,te=N*D-C*F,le=N*K-I*F,tr=C*K-I*D,Me=Z*It-$*Et,xr=Z*Bt-st*Et,br=Z*x-ht*Et,_r=$*Bt-st*It,Gn=$*x-ht*It,Dr=st*x-ht*Bt,Ct=Xt*Dr-Yt*Gn+fe*_r+te*br-le*xr+tr*Me;return Ct?(Ct=1/Ct,f[0]=(F*Dr-D*Gn+K*_r)*Ct,f[1]=(C*Gn-N*Dr-I*_r)*Ct,f[2]=(It*tr-Bt*le+x*te)*Ct,f[3]=(st*le-$*tr-ht*te)*Ct,f[4]=(D*br-S*Dr-K*xr)*Ct,f[5]=(E*Dr-C*br+I*xr)*Ct,f[6]=(Bt*fe-Et*tr-x*Yt)*Ct,f[7]=(Z*tr-st*fe+ht*Yt)*Ct,f[8]=(S*Gn-F*br+K*Me)*Ct,f[9]=(N*br-E*Gn-I*Me)*Ct,f[10]=(Et*le-It*fe+x*Xt)*Ct,f[11]=($*fe-Z*le-ht*Xt)*Ct,f[12]=(F*xr-S*_r-D*Me)*Ct,f[13]=(E*_r-N*xr+C*Me)*Ct,f[14]=(It*Yt-Et*te-Bt*Xt)*Ct,f[15]=(Z*te-$*Yt+st*Xt)*Ct,f):null},r.adjoint=function(f,x){var E=x[0],N=x[1],C=x[2],I=x[3],S=x[4],F=x[5],D=x[6],K=x[7],Z=x[8],$=x[9],st=x[10],ht=x[11],Et=x[12],It=x[13],Bt=x[14];return x=x[15],f[0]=F*(st*x-ht*Bt)-$*(D*x-K*Bt)+It*(D*ht-K*st),f[1]=-(N*(st*x-ht*Bt)-$*(C*x-I*Bt)+It*(C*ht-I*st)),f[2]=N*(D*x-K*Bt)-F*(C*x-I*Bt)+It*(C*K-I*D),f[3]=-(N*(D*ht-K*st)-F*(C*ht-I*st)+$*(C*K-I*D)),f[4]=-(S*(st*x-ht*Bt)-Z*(D*x-K*Bt)+Et*(D*ht-K*st)),f[5]=E*(st*x-ht*Bt)-Z*(C*x-I*Bt)+Et*(C*ht-I*st),f[6]=-(E*(D*x-K*Bt)-S*(C*x-I*Bt)+Et*(C*K-I*D)),f[7]=E*(D*ht-K*st)-S*(C*ht-I*st)+Z*(C*K-I*D),f[8]=S*($*x-ht*It)-Z*(F*x-K*It)+Et*(F*ht-K*$),f[9]=-(E*($*x-ht*It)-Z*(N*x-I*It)+Et*(N*ht-I*$)),f[10]=E*(F*x-K*It)-S*(N*x-I*It)+Et*(N*K-I*F),f[11]=-(E*(F*ht-K*$)-S*(N*ht-I*$)+Z*(N*K-I*F)),f[12]=-(S*($*Bt-st*It)-Z*(F*Bt-D*It)+Et*(F*st-D*$)),f[13]=E*($*Bt-st*It)-Z*(N*Bt-C*It)+Et*(N*st-C*$),f[14]=-(E*(F*Bt-D*It)-S*(N*Bt-C*It)+Et*(N*D-C*F)),f[15]=E*(F*st-D*$)-S*(N*st-C*$)+Z*(N*D-C*F),f},r.determinant=function(f){var x=f[0],E=f[1],N=f[2],C=f[3],I=f[4],S=f[5],F=f[6],D=f[7],K=f[8],Z=f[9],$=f[10],st=f[11],ht=f[12],Et=f[13],It=f[14];return f=f[15],(x*S-E*I)*($*f-st*It)-(x*F-N*I)*(Z*f-st*Et)+(x*D-C*I)*(Z*It-$*Et)+(E*F-N*S)*(K*f-st*ht)-(E*D-C*S)*(K*It-$*ht)+(N*D-C*F)*(K*Et-Z*ht)},r.multiply=s,r.translate=function(f,x,E){var N=E[0],C=E[1];if(E=E[2],x===f)f[12]=x[0]*N+x[4]*C+x[8]*E+x[12],f[13]=x[1]*N+x[5]*C+x[9]*E+x[13],f[14]=x[2]*N+x[6]*C+x[10]*E+x[14],f[15]=x[3]*N+x[7]*C+x[11]*E+x[15];else{var I=x[0],S=x[1],F=x[2],D=x[3],K=x[4],Z=x[5],$=x[6],st=x[7],ht=x[8],Et=x[9],It=x[10],Bt=x[11];f[0]=I,f[1]=S,f[2]=F,f[3]=D,f[4]=K,f[5]=Z,f[6]=$,f[7]=st,f[8]=ht,f[9]=Et,f[10]=It,f[11]=Bt,f[12]=I*N+K*C+ht*E+x[12],f[13]=S*N+Z*C+Et*E+x[13],f[14]=F*N+$*C+It*E+x[14],f[15]=D*N+st*C+Bt*E+x[15]}return f},r.scale=function(f,x,E){var N=E[0],C=E[1];return E=E[2],f[0]=x[0]*N,f[1]=x[1]*N,f[2]=x[2]*N,f[3]=x[3]*N,f[4]=x[4]*C,f[5]=x[5]*C,f[6]=x[6]*C,f[7]=x[7]*C,f[8]=x[8]*E,f[9]=x[9]*E,f[10]=x[10]*E,f[11]=x[11]*E,f[12]=x[12],f[13]=x[13],f[14]=x[14],f[15]=x[15],f},r.rotate=function(f,x,E,N){var C=N[0],I=N[1];N=N[2];var S=Math.sqrt(C*C+I*I+N*N);if(S<d.EPSILON)return null;S=1/S,C*=S,I*=S,N*=S;var F=Math.sin(E),D=Math.cos(E),K=1-D;E=x[0],S=x[1];var Z=x[2],$=x[3],st=x[4],ht=x[5],Et=x[6],It=x[7],Bt=x[8],Xt=x[9],Yt=x[10],fe=x[11],te=C*C*K+D,le=I*C*K+N*F,tr=N*C*K-I*F,Me=C*I*K-N*F,xr=I*I*K+D,br=N*I*K+C*F,_r=C*N*K+I*F;return C=I*N*K-C*F,I=N*N*K+D,f[0]=E*te+st*le+Bt*tr,f[1]=S*te+ht*le+Xt*tr,f[2]=Z*te+Et*le+Yt*tr,f[3]=$*te+It*le+fe*tr,f[4]=E*Me+st*xr+Bt*br,f[5]=S*Me+ht*xr+Xt*br,f[6]=Z*Me+Et*xr+Yt*br,f[7]=$*Me+It*xr+fe*br,f[8]=E*_r+st*C+Bt*I,f[9]=S*_r+ht*C+Xt*I,f[10]=Z*_r+Et*C+Yt*I,f[11]=$*_r+It*C+fe*I,x!==f&&(f[12]=x[12],f[13]=x[13],f[14]=x[14],f[15]=x[15]),f},r.rotateX=function(f,x,E){var N=Math.sin(E);E=Math.cos(E);var C=x[4],I=x[5],S=x[6],F=x[7],D=x[8],K=x[9],Z=x[10],$=x[11];return x!==f&&(f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f[12]=x[12],f[13]=x[13],f[14]=x[14],f[15]=x[15]),f[4]=C*E+D*N,f[5]=I*E+K*N,f[6]=S*E+Z*N,f[7]=F*E+$*N,f[8]=D*E-C*N,f[9]=K*E-I*N,f[10]=Z*E-S*N,f[11]=$*E-F*N,f},r.rotateY=function(f,x,E){var N=Math.sin(E);E=Math.cos(E);var C=x[0],I=x[1],S=x[2],F=x[3],D=x[8],K=x[9],Z=x[10],$=x[11];return x!==f&&(f[4]=x[4],f[5]=x[5],f[6]=x[6],f[7]=x[7],f[12]=x[12],f[13]=x[13],f[14]=x[14],f[15]=x[15]),f[0]=C*E-D*N,f[1]=I*E-K*N,f[2]=S*E-Z*N,f[3]=F*E-$*N,f[8]=C*N+D*E,f[9]=I*N+K*E,f[10]=S*N+Z*E,f[11]=F*N+$*E,f},r.rotateZ=function(f,x,E){var N=Math.sin(E);E=Math.cos(E);var C=x[0],I=x[1],S=x[2],F=x[3],D=x[4],K=x[5],Z=x[6],$=x[7];return x!==f&&(f[8]=x[8],f[9]=x[9],f[10]=x[10],f[11]=x[11],f[12]=x[12],f[13]=x[13],f[14]=x[14],f[15]=x[15]),f[0]=C*E+D*N,f[1]=I*E+K*N,f[2]=S*E+Z*N,f[3]=F*E+$*N,f[4]=D*E-C*N,f[5]=K*E-I*N,f[6]=Z*E-S*N,f[7]=$*E-F*N,f},r.fromTranslation=function(f,x){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=x[0],f[13]=x[1],f[14]=x[2],f[15]=1,f},r.fromScaling=function(f,x){return f[0]=x[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=x[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=x[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},r.fromRotation=function(f,x,E){var N=E[0],C=E[1];E=E[2];var I=Math.sqrt(N*N+C*C+E*E);if(I<d.EPSILON)return null;I=1/I,N*=I,C*=I,E*=I,I=Math.sin(x),x=Math.cos(x);var S=1-x;return f[0]=N*N*S+x,f[1]=C*N*S+E*I,f[2]=E*N*S-C*I,f[3]=0,f[4]=N*C*S-E*I,f[5]=C*C*S+x,f[6]=E*C*S+N*I,f[7]=0,f[8]=N*E*S+C*I,f[9]=C*E*S-N*I,f[10]=E*E*S+x,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},r.fromXRotation=function(f,x){var E=Math.sin(x);return x=Math.cos(x),f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=x,f[6]=E,f[7]=0,f[8]=0,f[9]=-E,f[10]=x,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},r.fromYRotation=function(f,x){var E=Math.sin(x);return x=Math.cos(x),f[0]=x,f[1]=0,f[2]=-E,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=E,f[9]=0,f[10]=x,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},r.fromZRotation=function(f,x){var E=Math.sin(x);return x=Math.cos(x),f[0]=x,f[1]=E,f[2]=0,f[3]=0,f[4]=-E,f[5]=x,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},r.fromRotationTranslation=c,r.fromQuat2=function(f,x){var E=new d.ARRAY_TYPE(3),N=-x[0],C=-x[1],I=-x[2],S=x[3],F=x[4],D=x[5],K=x[6],Z=x[7],$=N*N+C*C+I*I+S*S;return 0<$?(E[0]=2*(F*S+Z*N+D*I-K*C)/$,E[1]=2*(D*S+Z*C+K*N-F*I)/$,E[2]=2*(K*S+Z*I+F*C-D*N)/$):(E[0]=2*(F*S+Z*N+D*I-K*C),E[1]=2*(D*S+Z*C+K*N-F*I),E[2]=2*(K*S+Z*I+F*C-D*N)),c(f,x,E),f},r.getTranslation=function(f,x){return f[0]=x[12],f[1]=x[13],f[2]=x[14],f},r.getScaling=function(f,x){var E=x[0],N=x[1],C=x[2],I=x[4],S=x[5],F=x[6],D=x[8],K=x[9];return x=x[10],f[0]=Math.sqrt(E*E+N*N+C*C),f[1]=Math.sqrt(I*I+S*S+F*F),f[2]=Math.sqrt(D*D+K*K+x*x),f},r.getRotation=function(f,x){var E=x[0]+x[5]+x[10];return 0<E?(E=2*Math.sqrt(E+1),f[3]=.25*E,f[0]=(x[6]-x[9])/E,f[1]=(x[8]-x[2])/E,f[2]=(x[1]-x[4])/E):x[0]>x[5]&&x[0]>x[10]?(E=2*Math.sqrt(1+x[0]-x[5]-x[10]),f[3]=(x[6]-x[9])/E,f[0]=.25*E,f[1]=(x[1]+x[4])/E,f[2]=(x[8]+x[2])/E):x[5]>x[10]?(E=2*Math.sqrt(1+x[5]-x[0]-x[10]),f[3]=(x[8]-x[2])/E,f[0]=(x[1]+x[4])/E,f[1]=.25*E,f[2]=(x[6]+x[9])/E):(E=2*Math.sqrt(1+x[10]-x[0]-x[5]),f[3]=(x[1]-x[4])/E,f[0]=(x[8]+x[2])/E,f[1]=(x[6]+x[9])/E,f[2]=.25*E),f},r.fromRotationTranslationScale=function(f,x,E,N){var C=x[0],I=x[1],S=x[2],F=x[3],D=C+C,K=I+I,Z=S+S;x=C*D;var $=C*K;C*=Z;var st=I*K;I*=Z,S*=Z,D*=F,K*=F,F*=Z,Z=N[0];var ht=N[1];return N=N[2],f[0]=(1-(st+S))*Z,f[1]=($+F)*Z,f[2]=(C-K)*Z,f[3]=0,f[4]=($-F)*ht,f[5]=(1-(x+S))*ht,f[6]=(I+D)*ht,f[7]=0,f[8]=(C+K)*N,f[9]=(I-D)*N,f[10]=(1-(x+st))*N,f[11]=0,f[12]=E[0],f[13]=E[1],f[14]=E[2],f[15]=1,f},r.fromRotationTranslationScaleOrigin=function(f,x,E,N,C){var I=x[0],S=x[1],F=x[2],D=x[3],K=I+I,Z=S+S,$=F+F;x=I*K;var st=I*Z,ht=I*$;I=S*Z,S*=$;var Et=F*$;F=D*K,Z*=D;var It=D*$,Bt=N[0],Xt=N[1];$=N[2],N=C[0],D=C[1],C=C[2],K=(1-(I+Et))*Bt;var Yt=(st+It)*Bt;return Bt*=ht-Z,st=(st-It)*Xt,Et=(1-(x+Et))*Xt,Xt*=S+F,ht=(ht+Z)*$,S=(S-F)*$,x=(1-(x+I))*$,f[0]=K,f[1]=Yt,f[2]=Bt,f[3]=0,f[4]=st,f[5]=Et,f[6]=Xt,f[7]=0,f[8]=ht,f[9]=S,f[10]=x,f[11]=0,f[12]=E[0]+N-(K*N+st*D+ht*C),f[13]=E[1]+D-(Yt*N+Et*D+S*C),f[14]=E[2]+C-(Bt*N+Xt*D+x*C),f[15]=1,f},r.fromQuat=function(f,x){var E=x[0],N=x[1],C=x[2];x=x[3];var I=E+E,S=N+N,F=C+C;E*=I;var D=N*I;N*=S;var K=C*I,Z=C*S;return C*=F,I*=x,S*=x,x*=F,f[0]=1-N-C,f[1]=D+x,f[2]=K-S,f[3]=0,f[4]=D-x,f[5]=1-E-C,f[6]=Z+I,f[7]=0,f[8]=K+S,f[9]=Z-I,f[10]=1-E-N,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},r.frustum=function(f,x,E,N,C,I,S){var F=1/(E-x),D=1/(C-N),K=1/(I-S);return f[0]=2*I*F,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=2*I*D,f[6]=0,f[7]=0,f[8]=(E+x)*F,f[9]=(C+N)*D,f[10]=(S+I)*K,f[11]=-1,f[12]=0,f[13]=0,f[14]=S*I*2*K,f[15]=0,f},r.perspective=function(f,x,E,N,C){return x=1/Math.tan(x/2),f[0]=x/E,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=x,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,C!=null&&C!==Infinity?(E=1/(N-C),f[10]=(C+N)*E,f[14]=2*C*N*E):(f[10]=-1,f[14]=-2*N),f},r.perspectiveFromFieldOfView=function(f,x,E,N){var C=Math.tan(x.upDegrees*Math.PI/180),I=Math.tan(x.downDegrees*Math.PI/180),S=Math.tan(x.leftDegrees*Math.PI/180);x=Math.tan(x.rightDegrees*Math.PI/180);var F=2/(S+x),D=2/(C+I);return f[0]=F,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=D,f[6]=0,f[7]=0,f[8]=-((S-x)*F*.5),f[9]=(C-I)*D*.5,f[10]=N/(E-N),f[11]=-1,f[12]=0,f[13]=0,f[14]=N*E/(E-N),f[15]=0,f},r.ortho=function(f,x,E,N,C,I,S){var F=1/(x-E),D=1/(N-C),K=1/(I-S);return f[0]=-2*F,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*D,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*K,f[11]=0,f[12]=(x+E)*F,f[13]=(C+N)*D,f[14]=(S+I)*K,f[15]=1,f},r.lookAt=function(f,x,E,N){var C=x[0],I=x[1];x=x[2];var S=N[0],F=N[1],D=N[2],K=E[0];N=E[1];var Z=E[2];if(Math.abs(C-K)<d.EPSILON&&Math.abs(I-N)<d.EPSILON&&Math.abs(x-Z)<d.EPSILON)return n(f);E=C-K,N=I-N,K=x-Z;var $=1/Math.sqrt(E*E+N*N+K*K);E*=$,N*=$,K*=$,Z=F*K-D*N,D=D*E-S*K,S=S*N-F*E,($=Math.sqrt(Z*Z+D*D+S*S))?($=1/$,Z*=$,D*=$,S*=$):S=D=Z=0,F=N*S-K*D;var st=K*Z-E*S,ht=E*D-N*Z;return($=Math.sqrt(F*F+st*st+ht*ht))?($=1/$,F*=$,st*=$,ht*=$):ht=st=F=0,f[0]=Z,f[1]=F,f[2]=E,f[3]=0,f[4]=D,f[5]=st,f[6]=N,f[7]=0,f[8]=S,f[9]=ht,f[10]=K,f[11]=0,f[12]=-(Z*C+D*I+S*x),f[13]=-(F*C+st*I+ht*x),f[14]=-(E*C+N*I+K*x),f[15]=1,f},r.targetTo=function(f,x,E,N){var C=x[0],I=x[1];x=x[2];var S=N[0],F=N[1],D=N[2];N=C-E[0];var K=I-E[1];E=x-E[2];var Z=N*N+K*K+E*E;0<Z&&(Z=1/Math.sqrt(Z),N*=Z,K*=Z,E*=Z);var $=F*E-D*K;return D=D*N-S*E,S=S*K-F*N,Z=$*$+D*D+S*S,0<Z&&(Z=1/Math.sqrt(Z),$*=Z,D*=Z,S*=Z),f[0]=$,f[1]=D,f[2]=S,f[3]=0,f[4]=K*S-E*D,f[5]=E*$-N*S,f[6]=N*D-K*$,f[7]=0,f[8]=N,f[9]=K,f[10]=E,f[11]=0,f[12]=C,f[13]=I,f[14]=x,f[15]=1,f},r.str=function(f){return"mat4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"},r.frob=function(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2)+Math.pow(f[4],2)+Math.pow(f[5],2)+Math.pow(f[6],2)+Math.pow(f[7],2)+Math.pow(f[8],2)+Math.pow(f[9],2)+Math.pow(f[10],2)+Math.pow(f[11],2)+Math.pow(f[12],2)+Math.pow(f[13],2)+Math.pow(f[14],2)+Math.pow(f[15],2))},r.add=function(f,x,E){return f[0]=x[0]+E[0],f[1]=x[1]+E[1],f[2]=x[2]+E[2],f[3]=x[3]+E[3],f[4]=x[4]+E[4],f[5]=x[5]+E[5],f[6]=x[6]+E[6],f[7]=x[7]+E[7],f[8]=x[8]+E[8],f[9]=x[9]+E[9],f[10]=x[10]+E[10],f[11]=x[11]+E[11],f[12]=x[12]+E[12],f[13]=x[13]+E[13],f[14]=x[14]+E[14],f[15]=x[15]+E[15],f},r.subtract=h,r.multiplyScalar=function(f,x,E){return f[0]=x[0]*E,f[1]=x[1]*E,f[2]=x[2]*E,f[3]=x[3]*E,f[4]=x[4]*E,f[5]=x[5]*E,f[6]=x[6]*E,f[7]=x[7]*E,f[8]=x[8]*E,f[9]=x[9]*E,f[10]=x[10]*E,f[11]=x[11]*E,f[12]=x[12]*E,f[13]=x[13]*E,f[14]=x[14]*E,f[15]=x[15]*E,f},r.multiplyScalarAndAdd=function(f,x,E,N){return f[0]=x[0]+E[0]*N,f[1]=x[1]+E[1]*N,f[2]=x[2]+E[2]*N,f[3]=x[3]+E[3]*N,f[4]=x[4]+E[4]*N,f[5]=x[5]+E[5]*N,f[6]=x[6]+E[6]*N,f[7]=x[7]+E[7]*N,f[8]=x[8]+E[8]*N,f[9]=x[9]+E[9]*N,f[10]=x[10]+E[10]*N,f[11]=x[11]+E[11]*N,f[12]=x[12]+E[12]*N,f[13]=x[13]+E[13]*N,f[14]=x[14]+E[14]*N,f[15]=x[15]+E[15]*N,f},r.exactEquals=function(f,x){return f[0]===x[0]&&f[1]===x[1]&&f[2]===x[2]&&f[3]===x[3]&&f[4]===x[4]&&f[5]===x[5]&&f[6]===x[6]&&f[7]===x[7]&&f[8]===x[8]&&f[9]===x[9]&&f[10]===x[10]&&f[11]===x[11]&&f[12]===x[12]&&f[13]===x[13]&&f[14]===x[14]&&f[15]===x[15]},r.equals=function(f,x){var E=f[0],N=f[1],C=f[2],I=f[3],S=f[4],F=f[5],D=f[6],K=f[7],Z=f[8],$=f[9],st=f[10],ht=f[11],Et=f[12],It=f[13],Bt=f[14];f=f[15];var Xt=x[0],Yt=x[1],fe=x[2],te=x[3],le=x[4],tr=x[5],Me=x[6],xr=x[7],br=x[8],_r=x[9],Gn=x[10],Dr=x[11],Ct=x[12],Mt=x[13],_t=x[14];return x=x[15],Math.abs(E-Xt)<=d.EPSILON*Math.max(1,Math.abs(E),Math.abs(Xt))&&Math.abs(N-Yt)<=d.EPSILON*Math.max(1,Math.abs(N),Math.abs(Yt))&&Math.abs(C-fe)<=d.EPSILON*Math.max(1,Math.abs(C),Math.abs(fe))&&Math.abs(I-te)<=d.EPSILON*Math.max(1,Math.abs(I),Math.abs(te))&&Math.abs(S-le)<=d.EPSILON*Math.max(1,Math.abs(S),Math.abs(le))&&Math.abs(F-tr)<=d.EPSILON*Math.max(1,Math.abs(F),Math.abs(tr))&&Math.abs(D-Me)<=d.EPSILON*Math.max(1,Math.abs(D),Math.abs(Me))&&Math.abs(K-xr)<=d.EPSILON*Math.max(1,Math.abs(K),Math.abs(xr))&&Math.abs(Z-br)<=d.EPSILON*Math.max(1,Math.abs(Z),Math.abs(br))&&Math.abs($-_r)<=d.EPSILON*Math.max(1,Math.abs($),Math.abs(_r))&&Math.abs(st-Gn)<=d.EPSILON*Math.max(1,Math.abs(st),Math.abs(Gn))&&Math.abs(ht-Dr)<=d.EPSILON*Math.max(1,Math.abs(ht),Math.abs(Dr))&&Math.abs(Et-Ct)<=d.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Ct))&&Math.abs(It-Mt)<=d.EPSILON*Math.max(1,Math.abs(It),Math.abs(Mt))&&Math.abs(Bt-_t)<=d.EPSILON*Math.max(1,Math.abs(Bt),Math.abs(_t))&&Math.abs(f-x)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))},r.sub=r.mul=void 0;var d=function(f){if(f&&f.__esModule)return f;var x={};if(f!=null){for(var E in f)if(Object.prototype.hasOwnProperty.call(f,E)){var N=qe&&Qs?Qs(f,E):{};N.get||N.set?qe(x,E,N):x[E]=f[E]}}return x.default=f,x}(Ch);r.mul=s,r.sub=h});Gt($x);var tw=Ot(function(t,r){function n(){var F=new S.ARRAY_TYPE(3);return S.ARRAY_TYPE!=Float32Array&&(F[0]=0,F[1]=0,F[2]=0),F}function s(F){var D=F[0],K=F[1];return F=F[2],Math.sqrt(D*D+K*K+F*F)}function c(F,D,K){var Z=new S.ARRAY_TYPE(3);return Z[0]=F,Z[1]=D,Z[2]=K,Z}function h(F,D,K){return F[0]=D[0]-K[0],F[1]=D[1]-K[1],F[2]=D[2]-K[2],F}function d(F,D,K){return F[0]=D[0]*K[0],F[1]=D[1]*K[1],F[2]=D[2]*K[2],F}function f(F,D,K){return F[0]=D[0]/K[0],F[1]=D[1]/K[1],F[2]=D[2]/K[2],F}function x(F,D){var K=D[0]-F[0],Z=D[1]-F[1];return F=D[2]-F[2],Math.sqrt(K*K+Z*Z+F*F)}function E(F,D){var K=D[0]-F[0],Z=D[1]-F[1];return F=D[2]-F[2],K*K+Z*Z+F*F}function N(F){var D=F[0],K=F[1];return F=F[2],D*D+K*K+F*F}function C(F,D){var K=D[0],Z=D[1],$=D[2];return K=K*K+Z*Z+$*$,0<K&&(K=1/Math.sqrt(K)),F[0]=D[0]*K,F[1]=D[1]*K,F[2]=D[2]*K,F}function I(F,D){return F[0]*D[0]+F[1]*D[1]+F[2]*D[2]}Object.defineProperty(r,"__esModule",{value:!0}),r.create=n,r.clone=function(F){var D=new S.ARRAY_TYPE(3);return D[0]=F[0],D[1]=F[1],D[2]=F[2],D},r.length=s,r.fromValues=c,r.copy=function(F,D){return F[0]=D[0],F[1]=D[1],F[2]=D[2],F},r.set=function(F,D,K,Z){return F[0]=D,F[1]=K,F[2]=Z,F},r.add=function(F,D,K){return F[0]=D[0]+K[0],F[1]=D[1]+K[1],F[2]=D[2]+K[2],F},r.subtract=h,r.multiply=d,r.divide=f,r.ceil=function(F,D){return F[0]=Math.ceil(D[0]),F[1]=Math.ceil(D[1]),F[2]=Math.ceil(D[2]),F},r.floor=function(F,D){return F[0]=Math.floor(D[0]),F[1]=Math.floor(D[1]),F[2]=Math.floor(D[2]),F},r.min=function(F,D,K){return F[0]=Math.min(D[0],K[0]),F[1]=Math.min(D[1],K[1]),F[2]=Math.min(D[2],K[2]),F},r.max=function(F,D,K){return F[0]=Math.max(D[0],K[0]),F[1]=Math.max(D[1],K[1]),F[2]=Math.max(D[2],K[2]),F},r.round=function(F,D){return F[0]=Math.round(D[0]),F[1]=Math.round(D[1]),F[2]=Math.round(D[2]),F},r.scale=function(F,D,K){return F[0]=D[0]*K,F[1]=D[1]*K,F[2]=D[2]*K,F},r.scaleAndAdd=function(F,D,K,Z){return F[0]=D[0]+K[0]*Z,F[1]=D[1]+K[1]*Z,F[2]=D[2]+K[2]*Z,F},r.distance=x,r.squaredDistance=E,r.squaredLength=N,r.negate=function(F,D){return F[0]=-D[0],F[1]=-D[1],F[2]=-D[2],F},r.inverse=function(F,D){return F[0]=1/D[0],F[1]=1/D[1],F[2]=1/D[2],F},r.normalize=C,r.dot=I,r.cross=function(F,D,K){var Z=D[0],$=D[1];D=D[2];var st=K[0],ht=K[1];return K=K[2],F[0]=$*K-D*ht,F[1]=D*st-Z*K,F[2]=Z*ht-$*st,F},r.lerp=function(F,D,K,Z){var $=D[0],st=D[1];return D=D[2],F[0]=$+Z*(K[0]-$),F[1]=st+Z*(K[1]-st),F[2]=D+Z*(K[2]-D),F},r.hermite=function(F,D,K,Z,$,st){var ht=st*st,Et=ht*(2*st-3)+1,It=ht*(st-2)+st,Bt=ht*(st-1);return st=ht*(3-2*st),F[0]=D[0]*Et+K[0]*It+Z[0]*Bt+$[0]*st,F[1]=D[1]*Et+K[1]*It+Z[1]*Bt+$[1]*st,F[2]=D[2]*Et+K[2]*It+Z[2]*Bt+$[2]*st,F},r.bezier=function(F,D,K,Z,$,st){var ht=1-st,Et=ht*ht,It=st*st,Bt=Et*ht;return Et*=3*st,ht*=3*It,st*=It,F[0]=D[0]*Bt+K[0]*Et+Z[0]*ht+$[0]*st,F[1]=D[1]*Bt+K[1]*Et+Z[1]*ht+$[1]*st,F[2]=D[2]*Bt+K[2]*Et+Z[2]*ht+$[2]*st,F},r.random=function(F,D){D=D||1;var K=2*S.RANDOM()*Math.PI,Z=2*S.RANDOM()-1,$=Math.sqrt(1-Z*Z)*D;return F[0]=Math.cos(K)*$,F[1]=Math.sin(K)*$,F[2]=Z*D,F},r.transformMat4=function(F,D,K){var Z=D[0],$=D[1];D=D[2];var st=K[3]*Z+K[7]*$+K[11]*D+K[15];return st=st||1,F[0]=(K[0]*Z+K[4]*$+K[8]*D+K[12])/st,F[1]=(K[1]*Z+K[5]*$+K[9]*D+K[13])/st,F[2]=(K[2]*Z+K[6]*$+K[10]*D+K[14])/st,F},r.transformMat3=function(F,D,K){var Z=D[0],$=D[1];return D=D[2],F[0]=Z*K[0]+$*K[3]+D*K[6],F[1]=Z*K[1]+$*K[4]+D*K[7],F[2]=Z*K[2]+$*K[5]+D*K[8],F},r.transformQuat=function(F,D,K){var Z=K[0],$=K[1],st=K[2],ht=D[0],Et=D[1];D=D[2];var It=$*D-st*Et,Bt=st*ht-Z*D,Xt=Z*Et-$*ht;return K=2*K[3],F[0]=ht+It*K+2*($*Xt-st*Bt),F[1]=Et+Bt*K+2*(st*It-Z*Xt),F[2]=D+Xt*K+2*(Z*Bt-$*It),F},r.rotateX=function(F,D,K,Z){var $=[],st=[];return $[0]=D[0]-K[0],$[1]=D[1]-K[1],$[2]=D[2]-K[2],st[0]=$[0],st[1]=$[1]*Math.cos(Z)-$[2]*Math.sin(Z),st[2]=$[1]*Math.sin(Z)+$[2]*Math.cos(Z),F[0]=st[0]+K[0],F[1]=st[1]+K[1],F[2]=st[2]+K[2],F},r.rotateY=function(F,D,K,Z){var $=[],st=[];return $[0]=D[0]-K[0],$[1]=D[1]-K[1],$[2]=D[2]-K[2],st[0]=$[2]*Math.sin(Z)+$[0]*Math.cos(Z),st[1]=$[1],st[2]=$[2]*Math.cos(Z)-$[0]*Math.sin(Z),F[0]=st[0]+K[0],F[1]=st[1]+K[1],F[2]=st[2]+K[2],F},r.rotateZ=function(F,D,K,Z){var $=[],st=[];return $[0]=D[0]-K[0],$[1]=D[1]-K[1],$[2]=D[2]-K[2],st[0]=$[0]*Math.cos(Z)-$[1]*Math.sin(Z),st[1]=$[0]*Math.sin(Z)+$[1]*Math.cos(Z),st[2]=$[2],F[0]=st[0]+K[0],F[1]=st[1]+K[1],F[2]=st[2]+K[2],F},r.angle=function(F,D){return F=c(F[0],F[1],F[2]),D=c(D[0],D[1],D[2]),C(F,F),C(D,D),D=I(F,D),1<D?0:-1>D?Math.PI:Math.acos(D)},r.zero=function(F){return F[0]=0,F[1]=0,F[2]=0,F},r.str=function(F){return"vec3("+F[0]+", "+F[1]+", "+F[2]+")"},r.exactEquals=function(F,D){return F[0]===D[0]&&F[1]===D[1]&&F[2]===D[2]},r.equals=function(F,D){var K=F[0],Z=F[1];F=F[2];var $=D[0],st=D[1];return D=D[2],Math.abs(K-$)<=S.EPSILON*Math.max(1,Math.abs(K),Math.abs($))&&Math.abs(Z-st)<=S.EPSILON*Math.max(1,Math.abs(Z),Math.abs(st))&&Math.abs(F-D)<=S.EPSILON*Math.max(1,Math.abs(F),Math.abs(D))},r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var S=function(F){if(F&&F.__esModule)return F;var D={};if(F!=null){for(var K in F)if(Object.prototype.hasOwnProperty.call(F,K)){var Z=qe&&Qs?Qs(F,K):{};Z.get||Z.set?qe(D,K,Z):D[K]=F[K]}}return D.default=F,D}(Ch);r.sub=h,r.mul=d,r.div=f,r.dist=x,r.sqrDist=E,r.len=s,r.sqrLen=N,t=function(){var F=n();return function(D,K,Z,$,st,ht){for(K||(K=3),Z||(Z=0),$=$?Math.min($*K+Z,D.length):D.length;Z<$;Z+=K)F[0]=D[Z],F[1]=D[Z+1],F[2]=D[Z+2],st(F,F,ht),D[Z]=F[0],D[Z+1]=F[1],D[Z+2]=F[2];return D}}(),r.forEach=t});Gt(tw);var ew=Ot(function(t,r){function n(){var C=new N.ARRAY_TYPE(4);return N.ARRAY_TYPE!=Float32Array&&(C[0]=0,C[1]=0,C[2]=0,C[3]=0),C}function s(C,I,S){return C[0]=I[0]-S[0],C[1]=I[1]-S[1],C[2]=I[2]-S[2],C[3]=I[3]-S[3],C}function c(C,I,S){return C[0]=I[0]*S[0],C[1]=I[1]*S[1],C[2]=I[2]*S[2],C[3]=I[3]*S[3],C}function h(C,I,S){return C[0]=I[0]/S[0],C[1]=I[1]/S[1],C[2]=I[2]/S[2],C[3]=I[3]/S[3],C}function d(C,I){var S=I[0]-C[0],F=I[1]-C[1],D=I[2]-C[2];return C=I[3]-C[3],Math.sqrt(S*S+F*F+D*D+C*C)}function f(C,I){var S=I[0]-C[0],F=I[1]-C[1],D=I[2]-C[2];return C=I[3]-C[3],S*S+F*F+D*D+C*C}function x(C){var I=C[0],S=C[1],F=C[2];return C=C[3],Math.sqrt(I*I+S*S+F*F+C*C)}function E(C){var I=C[0],S=C[1],F=C[2];return C=C[3],I*I+S*S+F*F+C*C}Object.defineProperty(r,"__esModule",{value:!0}),r.create=n,r.clone=function(C){var I=new N.ARRAY_TYPE(4);return I[0]=C[0],I[1]=C[1],I[2]=C[2],I[3]=C[3],I},r.fromValues=function(C,I,S,F){var D=new N.ARRAY_TYPE(4);return D[0]=C,D[1]=I,D[2]=S,D[3]=F,D},r.copy=function(C,I){return C[0]=I[0],C[1]=I[1],C[2]=I[2],C[3]=I[3],C},r.set=function(C,I,S,F,D){return C[0]=I,C[1]=S,C[2]=F,C[3]=D,C},r.add=function(C,I,S){return C[0]=I[0]+S[0],C[1]=I[1]+S[1],C[2]=I[2]+S[2],C[3]=I[3]+S[3],C},r.subtract=s,r.multiply=c,r.divide=h,r.ceil=function(C,I){return C[0]=Math.ceil(I[0]),C[1]=Math.ceil(I[1]),C[2]=Math.ceil(I[2]),C[3]=Math.ceil(I[3]),C},r.floor=function(C,I){return C[0]=Math.floor(I[0]),C[1]=Math.floor(I[1]),C[2]=Math.floor(I[2]),C[3]=Math.floor(I[3]),C},r.min=function(C,I,S){return C[0]=Math.min(I[0],S[0]),C[1]=Math.min(I[1],S[1]),C[2]=Math.min(I[2],S[2]),C[3]=Math.min(I[3],S[3]),C},r.max=function(C,I,S){return C[0]=Math.max(I[0],S[0]),C[1]=Math.max(I[1],S[1]),C[2]=Math.max(I[2],S[2]),C[3]=Math.max(I[3],S[3]),C},r.round=function(C,I){return C[0]=Math.round(I[0]),C[1]=Math.round(I[1]),C[2]=Math.round(I[2]),C[3]=Math.round(I[3]),C},r.scale=function(C,I,S){return C[0]=I[0]*S,C[1]=I[1]*S,C[2]=I[2]*S,C[3]=I[3]*S,C},r.scaleAndAdd=function(C,I,S,F){return C[0]=I[0]+S[0]*F,C[1]=I[1]+S[1]*F,C[2]=I[2]+S[2]*F,C[3]=I[3]+S[3]*F,C},r.distance=d,r.squaredDistance=f,r.length=x,r.squaredLength=E,r.negate=function(C,I){return C[0]=-I[0],C[1]=-I[1],C[2]=-I[2],C[3]=-I[3],C},r.inverse=function(C,I){return C[0]=1/I[0],C[1]=1/I[1],C[2]=1/I[2],C[3]=1/I[3],C},r.normalize=function(C,I){var S=I[0],F=I[1],D=I[2];I=I[3];var K=S*S+F*F+D*D+I*I;return 0<K&&(K=1/Math.sqrt(K)),C[0]=S*K,C[1]=F*K,C[2]=D*K,C[3]=I*K,C},r.dot=function(C,I){return C[0]*I[0]+C[1]*I[1]+C[2]*I[2]+C[3]*I[3]},r.cross=function(C,I,S,F){var D=S[0]*F[1]-S[1]*F[0],K=S[0]*F[2]-S[2]*F[0],Z=S[0]*F[3]-S[3]*F[0],$=S[1]*F[2]-S[2]*F[1],st=S[1]*F[3]-S[3]*F[1];S=S[2]*F[3]-S[3]*F[2],F=I[0];var ht=I[1],Et=I[2];return I=I[3],C[0]=ht*S-Et*st+I*$,C[1]=-(F*S)+Et*Z-I*K,C[2]=F*st-ht*Z+I*D,C[3]=-(F*$)+ht*K-Et*D,C},r.lerp=function(C,I,S,F){var D=I[0],K=I[1],Z=I[2];return I=I[3],C[0]=D+F*(S[0]-D),C[1]=K+F*(S[1]-K),C[2]=Z+F*(S[2]-Z),C[3]=I+F*(S[3]-I),C},r.random=function(C,I){I=I||1;do var S=2*N.RANDOM()-1,F=2*N.RANDOM()-1,D=S*S+F*F;while(1<=D);do var K=2*N.RANDOM()-1,Z=2*N.RANDOM()-1,$=K*K+Z*Z;while(1<=$);return D=Math.sqrt((1-D)/$),C[0]=I*S,C[1]=I*F,C[2]=I*K*D,C[3]=I*Z*D,C},r.transformMat4=function(C,I,S){var F=I[0],D=I[1],K=I[2];return I=I[3],C[0]=S[0]*F+S[4]*D+S[8]*K+S[12]*I,C[1]=S[1]*F+S[5]*D+S[9]*K+S[13]*I,C[2]=S[2]*F+S[6]*D+S[10]*K+S[14]*I,C[3]=S[3]*F+S[7]*D+S[11]*K+S[15]*I,C},r.transformQuat=function(C,I,S){var F=I[0],D=I[1],K=I[2],Z=S[0],$=S[1],st=S[2];S=S[3];var ht=S*F+$*K-st*D,Et=S*D+st*F-Z*K,It=S*K+Z*D-$*F;return F=-Z*F-$*D-st*K,C[0]=ht*S+F*-Z+Et*-st-It*-$,C[1]=Et*S+F*-$+It*-Z-ht*-st,C[2]=It*S+F*-st+ht*-$-Et*-Z,C[3]=I[3],C},r.zero=function(C){return C[0]=0,C[1]=0,C[2]=0,C[3]=0,C},r.str=function(C){return"vec4("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+")"},r.exactEquals=function(C,I){return C[0]===I[0]&&C[1]===I[1]&&C[2]===I[2]&&C[3]===I[3]},r.equals=function(C,I){var S=C[0],F=C[1],D=C[2];C=C[3];var K=I[0],Z=I[1],$=I[2];return I=I[3],Math.abs(S-K)<=N.EPSILON*Math.max(1,Math.abs(S),Math.abs(K))&&Math.abs(F-Z)<=N.EPSILON*Math.max(1,Math.abs(F),Math.abs(Z))&&Math.abs(D-$)<=N.EPSILON*Math.max(1,Math.abs(D),Math.abs($))&&Math.abs(C-I)<=N.EPSILON*Math.max(1,Math.abs(C),Math.abs(I))},r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var N=function(C){if(C&&C.__esModule)return C;var I={};if(C!=null){for(var S in C)if(Object.prototype.hasOwnProperty.call(C,S)){var F=qe&&Qs?Qs(C,S):{};F.get||F.set?qe(I,S,F):I[S]=C[S]}}return I.default=C,I}(Ch);r.sub=s,r.mul=c,r.div=h,r.dist=d,r.sqrDist=f,r.len=x,r.sqrLen=E,t=function(){var C=n();return function(I,S,F,D,K,Z){for(S||(S=4),F||(F=0),D=D?Math.min(D*S+F,I.length):I.length;F<D;F+=S)C[0]=I[F],C[1]=I[F+1],C[2]=I[F+2],C[3]=I[F+3],K(C,C,Z),I[F]=C[0],I[F+1]=C[1],I[F+2]=C[2],I[F+3]=C[3];return I}}(),r.forEach=t});Gt(ew);var rw=Ot(function(t,r){function n(S){if(S&&S.__esModule)return S;var F={};if(S!=null){for(var D in S)if(Object.prototype.hasOwnProperty.call(S,D)){var K=qe&&Qs?Qs(S,D):{};K.get||K.set?qe(F,D,K):F[D]=S[D]}}return F.default=S,F}function s(){var S=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(S[0]=0,S[1]=0,S[2]=0),S[3]=1,S}function c(S,F,D){D*=.5;var K=Math.sin(D);return S[0]=K*F[0],S[1]=K*F[1],S[2]=K*F[2],S[3]=Math.cos(D),S}function h(S,F,D){var K=F[0],Z=F[1],$=F[2];F=F[3];var st=D[0],ht=D[1],Et=D[2];return D=D[3],S[0]=K*D+F*st+Z*Et-$*ht,S[1]=Z*D+F*ht+$*st-K*Et,S[2]=$*D+F*Et+K*ht-Z*st,S[3]=F*D-K*st-Z*ht-$*Et,S}function d(S,F,D,K){var Z=F[0],$=F[1],st=F[2];F=F[3];var ht=D[0],Et=D[1],It=D[2];D=D[3];var Bt=Z*ht+$*Et+st*It+F*D;if(0>Bt&&(Bt=-Bt,ht=-ht,Et=-Et,It=-It,D=-D),1-Bt>x.EPSILON){var Xt=Math.acos(Bt),Yt=Math.sin(Xt);Bt=Math.sin((1-K)*Xt)/Yt,K=Math.sin(K*Xt)/Yt}else Bt=1-K;return S[0]=Bt*Z+K*ht,S[1]=Bt*$+K*Et,S[2]=Bt*st+K*It,S[3]=Bt*F+K*D,S}function f(S,F){var D=F[0]+F[4]+F[8];if(0<D)D=Math.sqrt(D+1),S[3]=.5*D,D=.5/D,S[0]=(F[5]-F[7])*D,S[1]=(F[6]-F[2])*D,S[2]=(F[1]-F[3])*D;else{var K=0;F[4]>F[0]&&(K=1),F[8]>F[3*K+K]&&(K=2);var Z=(K+1)%3,$=(K+2)%3;D=Math.sqrt(F[3*K+K]-F[3*Z+Z]-F[3*$+$]+1),S[K]=.5*D,D=.5/D,S[3]=(F[3*Z+$]-F[3*$+Z])*D,S[Z]=(F[3*Z+K]+F[3*K+Z])*D,S[$]=(F[3*$+K]+F[3*K+$])*D}return S}Object.defineProperty(r,"__esModule",{value:!0}),r.create=s,r.identity=function(S){return S[0]=0,S[1]=0,S[2]=0,S[3]=1,S},r.setAxisAngle=c,r.getAxisAngle=function(S,F){var D=2*Math.acos(F[3]),K=Math.sin(D/2);return K>x.EPSILON?(S[0]=F[0]/K,S[1]=F[1]/K,S[2]=F[2]/K):(S[0]=1,S[1]=0,S[2]=0),D},r.multiply=h,r.rotateX=function(S,F,D){D*=.5;var K=F[0],Z=F[1],$=F[2];F=F[3];var st=Math.sin(D);return D=Math.cos(D),S[0]=K*D+F*st,S[1]=Z*D+$*st,S[2]=$*D-Z*st,S[3]=F*D-K*st,S},r.rotateY=function(S,F,D){D*=.5;var K=F[0],Z=F[1],$=F[2];F=F[3];var st=Math.sin(D);return D=Math.cos(D),S[0]=K*D-$*st,S[1]=Z*D+F*st,S[2]=$*D+K*st,S[3]=F*D-Z*st,S},r.rotateZ=function(S,F,D){D*=.5;var K=F[0],Z=F[1],$=F[2];F=F[3];var st=Math.sin(D);return D=Math.cos(D),S[0]=K*D+Z*st,S[1]=Z*D-K*st,S[2]=$*D+F*st,S[3]=F*D-$*st,S},r.calculateW=function(S,F){var D=F[0],K=F[1];return F=F[2],S[0]=D,S[1]=K,S[2]=F,S[3]=Math.sqrt(Math.abs(1-D*D-K*K-F*F)),S},r.slerp=d,r.random=function(S){var F=x.RANDOM(),D=x.RANDOM(),K=x.RANDOM(),Z=Math.sqrt(1-F);return F=Math.sqrt(F),S[0]=Z*Math.sin(2*Math.PI*D),S[1]=Z*Math.cos(2*Math.PI*D),S[2]=F*Math.sin(2*Math.PI*K),S[3]=F*Math.cos(2*Math.PI*K),S},r.invert=function(S,F){var D=F[0],K=F[1],Z=F[2];F=F[3];var $=D*D+K*K+Z*Z+F*F;return $=$?1/$:0,S[0]=-D*$,S[1]=-K*$,S[2]=-Z*$,S[3]=F*$,S},r.conjugate=function(S,F){return S[0]=-F[0],S[1]=-F[1],S[2]=-F[2],S[3]=F[3],S},r.fromMat3=f,r.fromEuler=function(S,F,D,K){var Z=.5*Math.PI/180;F*=Z,D*=Z,K*=Z,Z=Math.sin(F),F=Math.cos(F);var $=Math.sin(D);D=Math.cos(D);var st=Math.sin(K);return K=Math.cos(K),S[0]=Z*D*K-F*$*st,S[1]=F*$*K+Z*D*st,S[2]=F*D*st-Z*$*K,S[3]=F*D*K+Z*$*st,S},r.str=function(S){return"quat("+S[0]+", "+S[1]+", "+S[2]+", "+S[3]+")"},r.setAxes=r.sqlerp=r.rotationTo=r.equals=r.exactEquals=r.normalize=r.sqrLen=r.squaredLength=r.len=r.length=r.lerp=r.dot=r.scale=r.mul=r.add=r.set=r.copy=r.fromValues=r.clone=void 0;var x=n(Ch),E=n(qx),N=n(tw);t=n(ew),r.clone=t.clone,r.fromValues=t.fromValues,r.copy=t.copy,r.set=t.set,r.add=t.add,r.mul=h,r.scale=t.scale,r.dot=t.dot,r.lerp=t.lerp;var C=t.length;r.length=C,r.len=C,C=t.squaredLength,r.squaredLength=C,r.sqrLen=C;var I=t.normalize;r.normalize=I,r.exactEquals=t.exactEquals,r.equals=t.equals,t=function(){var S=N.create(),F=N.fromValues(1,0,0),D=N.fromValues(0,1,0);return function(K,Z,$){var st=N.dot(Z,$);return-.999999>st?(N.cross(S,F,Z),1e-6>N.len(S)&&N.cross(S,D,Z),N.normalize(S,S),c(K,S,Math.PI),K):.999999<st?(K[0]=0,K[1]=0,K[2]=0,K[3]=1,K):(N.cross(S,Z,$),K[0]=S[0],K[1]=S[1],K[2]=S[2],K[3]=1+st,I(K,K))}}(),r.rotationTo=t,t=function(){var S=s(),F=s();return function(D,K,Z,$,st,ht){return d(S,K,st,ht),d(F,Z,$,ht),d(D,S,F,2*ht*(1-ht)),D}}(),r.sqlerp=t,t=function(){var S=E.create();return function(F,D,K,Z){return S[0]=K[0],S[3]=K[1],S[6]=K[2],S[1]=Z[0],S[4]=Z[1],S[7]=Z[2],S[2]=-D[0],S[5]=-D[1],S[8]=-D[2],I(F,f(F,S))}}(),r.setAxes=t});Gt(rw);var c2=Ot(function(t,r){function n(C){if(C&&C.__esModule)return C;var I={};if(C!=null){for(var S in C)if(Object.prototype.hasOwnProperty.call(C,S)){var F=qe&&Qs?Qs(C,S):{};F.get||F.set?qe(I,S,F):I[S]=C[S]}}return I.default=C,I}function s(C,I,S){var F=.5*S[0],D=.5*S[1];S=.5*S[2];var K=I[0],Z=I[1],$=I[2];return I=I[3],C[0]=K,C[1]=Z,C[2]=$,C[3]=I,C[4]=F*I+D*$-S*Z,C[5]=D*I+S*K-F*$,C[6]=S*I+F*Z-D*K,C[7]=-F*K-D*Z-S*$,C}function c(C,I){return C[0]=I[0],C[1]=I[1],C[2]=I[2],C[3]=I[3],C[4]=I[4],C[5]=I[5],C[6]=I[6],C[7]=I[7],C}function h(C,I,S){var F=I[0],D=I[1],K=I[2],Z=I[3],$=S[4],st=S[5],ht=S[6],Et=S[7],It=I[4],Bt=I[5],Xt=I[6];I=I[7];var Yt=S[0],fe=S[1],te=S[2];return S=S[3],C[0]=F*S+Z*Yt+D*te-K*fe,C[1]=D*S+Z*fe+K*Yt-F*te,C[2]=K*S+Z*te+F*fe-D*Yt,C[3]=Z*S-F*Yt-D*fe-K*te,C[4]=F*Et+Z*$+D*ht-K*st+It*S+I*Yt+Bt*te-Xt*fe,C[5]=D*Et+Z*st+K*$-F*ht+Bt*S+I*fe+Xt*Yt-It*te,C[6]=K*Et+Z*ht+F*st-D*$+Xt*S+I*te+It*fe-Bt*Yt,C[7]=Z*Et-F*$-D*st-K*ht+I*S-It*Yt-Bt*fe-Xt*te,C}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var C=new d.ARRAY_TYPE(8);return d.ARRAY_TYPE!=Float32Array&&(C[0]=0,C[1]=0,C[2]=0,C[4]=0,C[5]=0,C[6]=0,C[7]=0),C[3]=1,C},r.clone=function(C){var I=new d.ARRAY_TYPE(8);return I[0]=C[0],I[1]=C[1],I[2]=C[2],I[3]=C[3],I[4]=C[4],I[5]=C[5],I[6]=C[6],I[7]=C[7],I},r.fromValues=function(C,I,S,F,D,K,Z,$){var st=new d.ARRAY_TYPE(8);return st[0]=C,st[1]=I,st[2]=S,st[3]=F,st[4]=D,st[5]=K,st[6]=Z,st[7]=$,st},r.fromRotationTranslationValues=function(C,I,S,F,D,K,Z){var $=new d.ARRAY_TYPE(8);return $[0]=C,$[1]=I,$[2]=S,$[3]=F,D*=.5,K*=.5,Z*=.5,$[4]=D*F+K*S-Z*I,$[5]=K*F+Z*C-D*S,$[6]=Z*F+D*I-K*C,$[7]=-D*C-K*I-Z*S,$},r.fromRotationTranslation=s,r.fromTranslation=function(C,I){return C[0]=0,C[1]=0,C[2]=0,C[3]=1,C[4]=.5*I[0],C[5]=.5*I[1],C[6]=.5*I[2],C[7]=0,C},r.fromRotation=function(C,I){return C[0]=I[0],C[1]=I[1],C[2]=I[2],C[3]=I[3],C[4]=0,C[5]=0,C[6]=0,C[7]=0,C},r.fromMat4=function(C,I){var S=f.create();x.getRotation(S,I);var F=new d.ARRAY_TYPE(3);return x.getTranslation(F,I),s(C,S,F),C},r.copy=c,r.identity=function(C){return C[0]=0,C[1]=0,C[2]=0,C[3]=1,C[4]=0,C[5]=0,C[6]=0,C[7]=0,C},r.set=function(C,I,S,F,D,K,Z,$,st){return C[0]=I,C[1]=S,C[2]=F,C[3]=D,C[4]=K,C[5]=Z,C[6]=$,C[7]=st,C},r.getDual=function(C,I){return C[0]=I[4],C[1]=I[5],C[2]=I[6],C[3]=I[7],C},r.setDual=function(C,I){return C[4]=I[0],C[5]=I[1],C[6]=I[2],C[7]=I[3],C},r.getTranslation=function(C,I){var S=I[4],F=I[5],D=I[6],K=I[7],Z=-I[0],$=-I[1],st=-I[2];return I=I[3],C[0]=2*(S*I+K*Z+F*st-D*$),C[1]=2*(F*I+K*$+D*Z-S*st),C[2]=2*(D*I+K*st+S*$-F*Z),C},r.translate=function(C,I,S){var F=I[0],D=I[1],K=I[2],Z=I[3],$=.5*S[0],st=.5*S[1];S=.5*S[2];var ht=I[4],Et=I[5],It=I[6];return I=I[7],C[0]=F,C[1]=D,C[2]=K,C[3]=Z,C[4]=Z*$+D*S-K*st+ht,C[5]=Z*st+K*$-F*S+Et,C[6]=Z*S+F*st-D*$+It,C[7]=-F*$-D*st-K*S+I,C},r.rotateX=function(C,I,S){var F=-I[0],D=-I[1],K=-I[2],Z=I[3],$=I[4],st=I[5],ht=I[6],Et=I[7],It=$*Z+Et*F+st*K-ht*D,Bt=st*Z+Et*D+ht*F-$*K,Xt=ht*Z+Et*K+$*D-st*F;return $=Et*Z-$*F-st*D-ht*K,f.rotateX(C,I,S),F=C[0],D=C[1],K=C[2],Z=C[3],C[4]=It*Z+$*F+Bt*K-Xt*D,C[5]=Bt*Z+$*D+Xt*F-It*K,C[6]=Xt*Z+$*K+It*D-Bt*F,C[7]=$*Z-It*F-Bt*D-Xt*K,C},r.rotateY=function(C,I,S){var F=-I[0],D=-I[1],K=-I[2],Z=I[3],$=I[4],st=I[5],ht=I[6],Et=I[7],It=$*Z+Et*F+st*K-ht*D,Bt=st*Z+Et*D+ht*F-$*K,Xt=ht*Z+Et*K+$*D-st*F;return $=Et*Z-$*F-st*D-ht*K,f.rotateY(C,I,S),F=C[0],D=C[1],K=C[2],Z=C[3],C[4]=It*Z+$*F+Bt*K-Xt*D,C[5]=Bt*Z+$*D+Xt*F-It*K,C[6]=Xt*Z+$*K+It*D-Bt*F,C[7]=$*Z-It*F-Bt*D-Xt*K,C},r.rotateZ=function(C,I,S){var F=-I[0],D=-I[1],K=-I[2],Z=I[3],$=I[4],st=I[5],ht=I[6],Et=I[7],It=$*Z+Et*F+st*K-ht*D,Bt=st*Z+Et*D+ht*F-$*K,Xt=ht*Z+Et*K+$*D-st*F;return $=Et*Z-$*F-st*D-ht*K,f.rotateZ(C,I,S),F=C[0],D=C[1],K=C[2],Z=C[3],C[4]=It*Z+$*F+Bt*K-Xt*D,C[5]=Bt*Z+$*D+Xt*F-It*K,C[6]=Xt*Z+$*K+It*D-Bt*F,C[7]=$*Z-It*F-Bt*D-Xt*K,C},r.rotateByQuatAppend=function(C,I,S){var F=S[0],D=S[1],K=S[2];S=S[3];var Z=I[0],$=I[1],st=I[2],ht=I[3];return C[0]=Z*S+ht*F+$*K-st*D,C[1]=$*S+ht*D+st*F-Z*K,C[2]=st*S+ht*K+Z*D-$*F,C[3]=ht*S-Z*F-$*D-st*K,Z=I[4],$=I[5],st=I[6],ht=I[7],C[4]=Z*S+ht*F+$*K-st*D,C[5]=$*S+ht*D+st*F-Z*K,C[6]=st*S+ht*K+Z*D-$*F,C[7]=ht*S-Z*F-$*D-st*K,C},r.rotateByQuatPrepend=function(C,I,S){var F=I[0],D=I[1],K=I[2];I=I[3];var Z=S[0],$=S[1],st=S[2],ht=S[3];return C[0]=F*ht+I*Z+D*st-K*$,C[1]=D*ht+I*$+K*Z-F*st,C[2]=K*ht+I*st+F*$-D*Z,C[3]=I*ht-F*Z-D*$-K*st,Z=S[4],$=S[5],st=S[6],ht=S[7],C[4]=F*ht+I*Z+D*st-K*$,C[5]=D*ht+I*$+K*Z-F*st,C[6]=K*ht+I*st+F*$-D*Z,C[7]=I*ht-F*Z-D*$-K*st,C},r.rotateAroundAxis=function(C,I,S,F){if(Math.abs(F)<d.EPSILON)return c(C,I);var D=Math.sqrt(S[0]*S[0]+S[1]*S[1]+S[2]*S[2]);F*=.5;var K=Math.sin(F),Z=K*S[0]/D,$=K*S[1]/D;S=K*S[2]/D,F=Math.cos(F),D=I[0],K=I[1];var st=I[2],ht=I[3];return C[0]=D*F+ht*Z+K*S-st*$,C[1]=K*F+ht*$+st*Z-D*S,C[2]=st*F+ht*S+D*$-K*Z,C[3]=ht*F-D*Z-K*$-st*S,D=I[4],K=I[5],st=I[6],I=I[7],C[4]=D*F+I*Z+K*S-st*$,C[5]=K*F+I*$+st*Z-D*S,C[6]=st*F+I*S+D*$-K*Z,C[7]=I*F-D*Z-K*$-st*S,C},r.add=function(C,I,S){return C[0]=I[0]+S[0],C[1]=I[1]+S[1],C[2]=I[2]+S[2],C[3]=I[3]+S[3],C[4]=I[4]+S[4],C[5]=I[5]+S[5],C[6]=I[6]+S[6],C[7]=I[7]+S[7],C},r.multiply=h,r.scale=function(C,I,S){return C[0]=I[0]*S,C[1]=I[1]*S,C[2]=I[2]*S,C[3]=I[3]*S,C[4]=I[4]*S,C[5]=I[5]*S,C[6]=I[6]*S,C[7]=I[7]*S,C},r.lerp=function(C,I,S,F){var D=1-F;return 0>E(I,S)&&(F=-F),C[0]=I[0]*D+S[0]*F,C[1]=I[1]*D+S[1]*F,C[2]=I[2]*D+S[2]*F,C[3]=I[3]*D+S[3]*F,C[4]=I[4]*D+S[4]*F,C[5]=I[5]*D+S[5]*F,C[6]=I[6]*D+S[6]*F,C[7]=I[7]*D+S[7]*F,C},r.invert=function(C,I){var S=N(I);return C[0]=-I[0]/S,C[1]=-I[1]/S,C[2]=-I[2]/S,C[3]=I[3]/S,C[4]=-I[4]/S,C[5]=-I[5]/S,C[6]=-I[6]/S,C[7]=I[7]/S,C},r.conjugate=function(C,I){return C[0]=-I[0],C[1]=-I[1],C[2]=-I[2],C[3]=I[3],C[4]=-I[4],C[5]=-I[5],C[6]=-I[6],C[7]=I[7],C},r.normalize=function(C,I){var S=N(I);if(0<S){S=Math.sqrt(S);var F=I[0]/S,D=I[1]/S,K=I[2]/S,Z=I[3]/S,$=I[4],st=I[5],ht=I[6];I=I[7];var Et=F*$+D*st+K*ht+Z*I;C[0]=F,C[1]=D,C[2]=K,C[3]=Z,C[4]=($-F*Et)/S,C[5]=(st-D*Et)/S,C[6]=(ht-K*Et)/S,C[7]=(I-Z*Et)/S}return C},r.str=function(C){return"quat2("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+", "+C[4]+", "+C[5]+", "+C[6]+", "+C[7]+")"},r.exactEquals=function(C,I){return C[0]===I[0]&&C[1]===I[1]&&C[2]===I[2]&&C[3]===I[3]&&C[4]===I[4]&&C[5]===I[5]&&C[6]===I[6]&&C[7]===I[7]},r.equals=function(C,I){var S=C[0],F=C[1],D=C[2],K=C[3],Z=C[4],$=C[5],st=C[6];C=C[7];var ht=I[0],Et=I[1],It=I[2],Bt=I[3],Xt=I[4],Yt=I[5],fe=I[6];return I=I[7],Math.abs(S-ht)<=d.EPSILON*Math.max(1,Math.abs(S),Math.abs(ht))&&Math.abs(F-Et)<=d.EPSILON*Math.max(1,Math.abs(F),Math.abs(Et))&&Math.abs(D-It)<=d.EPSILON*Math.max(1,Math.abs(D),Math.abs(It))&&Math.abs(K-Bt)<=d.EPSILON*Math.max(1,Math.abs(K),Math.abs(Bt))&&Math.abs(Z-Xt)<=d.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Xt))&&Math.abs($-Yt)<=d.EPSILON*Math.max(1,Math.abs($),Math.abs(Yt))&&Math.abs(st-fe)<=d.EPSILON*Math.max(1,Math.abs(st),Math.abs(fe))&&Math.abs(C-I)<=d.EPSILON*Math.max(1,Math.abs(C),Math.abs(I))},r.sqrLen=r.squaredLength=r.len=r.length=r.dot=r.mul=r.setReal=r.getReal=void 0;var d=n(Ch),f=n(rw),x=n($x);r.getReal=f.copy,r.setReal=f.copy,r.mul=h;var E=f.dot;r.dot=E,t=f.length,r.length=t,r.len=t;var N=f.squaredLength;r.squaredLength=N,r.sqrLen=N});Gt(c2);var f2=Ot(function(t,r){function n(){var C=new N.ARRAY_TYPE(2);return N.ARRAY_TYPE!=Float32Array&&(C[0]=0,C[1]=0),C}function s(C,I,S){return C[0]=I[0]-S[0],C[1]=I[1]-S[1],C}function c(C,I,S){return C[0]=I[0]*S[0],C[1]=I[1]*S[1],C}function h(C,I,S){return C[0]=I[0]/S[0],C[1]=I[1]/S[1],C}function d(C,I){var S=I[0]-C[0];return C=I[1]-C[1],Math.sqrt(S*S+C*C)}function f(C,I){var S=I[0]-C[0];return C=I[1]-C[1],S*S+C*C}function x(C){var I=C[0];return C=C[1],Math.sqrt(I*I+C*C)}function E(C){var I=C[0];return C=C[1],I*I+C*C}Object.defineProperty(r,"__esModule",{value:!0}),r.create=n,r.clone=function(C){var I=new N.ARRAY_TYPE(2);return I[0]=C[0],I[1]=C[1],I},r.fromValues=function(C,I){var S=new N.ARRAY_TYPE(2);return S[0]=C,S[1]=I,S},r.copy=function(C,I){return C[0]=I[0],C[1]=I[1],C},r.set=function(C,I,S){return C[0]=I,C[1]=S,C},r.add=function(C,I,S){return C[0]=I[0]+S[0],C[1]=I[1]+S[1],C},r.subtract=s,r.multiply=c,r.divide=h,r.ceil=function(C,I){return C[0]=Math.ceil(I[0]),C[1]=Math.ceil(I[1]),C},r.floor=function(C,I){return C[0]=Math.floor(I[0]),C[1]=Math.floor(I[1]),C},r.min=function(C,I,S){return C[0]=Math.min(I[0],S[0]),C[1]=Math.min(I[1],S[1]),C},r.max=function(C,I,S){return C[0]=Math.max(I[0],S[0]),C[1]=Math.max(I[1],S[1]),C},r.round=function(C,I){return C[0]=Math.round(I[0]),C[1]=Math.round(I[1]),C},r.scale=function(C,I,S){return C[0]=I[0]*S,C[1]=I[1]*S,C},r.scaleAndAdd=function(C,I,S,F){return C[0]=I[0]+S[0]*F,C[1]=I[1]+S[1]*F,C},r.distance=d,r.squaredDistance=f,r.length=x,r.squaredLength=E,r.negate=function(C,I){return C[0]=-I[0],C[1]=-I[1],C},r.inverse=function(C,I){return C[0]=1/I[0],C[1]=1/I[1],C},r.normalize=function(C,I){var S=I[0],F=I[1];return S=S*S+F*F,0<S&&(S=1/Math.sqrt(S)),C[0]=I[0]*S,C[1]=I[1]*S,C},r.dot=function(C,I){return C[0]*I[0]+C[1]*I[1]},r.cross=function(C,I,S){return I=I[0]*S[1]-I[1]*S[0],C[0]=C[1]=0,C[2]=I,C},r.lerp=function(C,I,S,F){var D=I[0];return I=I[1],C[0]=D+F*(S[0]-D),C[1]=I+F*(S[1]-I),C},r.random=function(C,I){I=I||1;var S=2*N.RANDOM()*Math.PI;return C[0]=Math.cos(S)*I,C[1]=Math.sin(S)*I,C},r.transformMat2=function(C,I,S){var F=I[0];return I=I[1],C[0]=S[0]*F+S[2]*I,C[1]=S[1]*F+S[3]*I,C},r.transformMat2d=function(C,I,S){var F=I[0];return I=I[1],C[0]=S[0]*F+S[2]*I+S[4],C[1]=S[1]*F+S[3]*I+S[5],C},r.transformMat3=function(C,I,S){var F=I[0];return I=I[1],C[0]=S[0]*F+S[3]*I+S[6],C[1]=S[1]*F+S[4]*I+S[7],C},r.transformMat4=function(C,I,S){var F=I[0];return I=I[1],C[0]=S[0]*F+S[4]*I+S[12],C[1]=S[1]*F+S[5]*I+S[13],C},r.rotate=function(C,I,S,F){var D=I[0]-S[0];I=I[1]-S[1];var K=Math.sin(F);return F=Math.cos(F),C[0]=D*F-I*K+S[0],C[1]=D*K+I*F+S[1],C},r.angle=function(C,I){var S=C[0];C=C[1];var F=I[0];I=I[1];var D=S*S+C*C;0<D&&(D=1/Math.sqrt(D));var K=F*F+I*I;return 0<K&&(K=1/Math.sqrt(K)),S=(S*F+C*I)*D*K,1<S?0:-1>S?Math.PI:Math.acos(S)},r.zero=function(C){return C[0]=0,C[1]=0,C},r.str=function(C){return"vec2("+C[0]+", "+C[1]+")"},r.exactEquals=function(C,I){return C[0]===I[0]&&C[1]===I[1]},r.equals=function(C,I){var S=C[0];C=C[1];var F=I[0];return I=I[1],Math.abs(S-F)<=N.EPSILON*Math.max(1,Math.abs(S),Math.abs(F))&&Math.abs(C-I)<=N.EPSILON*Math.max(1,Math.abs(C),Math.abs(I))},r.forEach=r.sqrLen=r.sqrDist=r.dist=r.div=r.mul=r.sub=r.len=void 0;var N=function(C){if(C&&C.__esModule)return C;var I={};if(C!=null){for(var S in C)if(Object.prototype.hasOwnProperty.call(C,S)){var F=qe&&Qs?Qs(C,S):{};F.get||F.set?qe(I,S,F):I[S]=C[S]}}return I.default=C,I}(Ch);r.len=x,r.sub=s,r.mul=c,r.div=h,r.dist=d,r.sqrDist=f,r.sqrLen=E,t=function(){var C=n();return function(I,S,F,D,K,Z){for(S||(S=2),F||(F=0),D=D?Math.min(D*S+F,I.length):I.length;F<D;F+=S)C[0]=I[F],C[1]=I[F+1],K(C,C,Z),I[F]=C[0],I[F+1]=C[1];return I}}(),r.forEach=t});Gt(f2);var p2=Ot(function(t,r){function n(s){if(s&&s.__esModule)return s;var c={};if(s!=null){for(var h in s)if(Object.prototype.hasOwnProperty.call(s,h)){var d=qe&&Qs?Qs(s,h):{};d.get||d.set?qe(c,h,d):c[h]=s[h]}}return c.default=s,c}Object.defineProperty(r,"__esModule",{value:!0}),r.vec4=r.vec3=r.vec2=r.quat2=r.quat=r.mat4=r.mat3=r.mat2d=r.mat2=r.glMatrix=void 0,t=n(Ch),r.glMatrix=t,t=n(l2),r.mat2=t,t=n(h2),r.mat2d=t,t=n(qx),r.mat3=t,t=n($x),r.mat4=t,t=n(rw),r.quat=t,t=n(c2),r.quat2=t,t=n(f2),r.vec2=t,t=n(tw),r.vec3=t,t=n(ew),r.vec4=t});Gt(p2);var Pa=p2.mat4,Ol=function(){function t(r,n,s){$n(this,t),this.options=n,this.gl=r,s&&(this.map=s.map),s=this.getVertexShader(n.vertexShader);var c=this.getFragmentShader(n.fragmentShader);n=r.createShader(r.VERTEX_SHADER),r.shaderSource(n,s),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)?(s=r.createShader(r.FRAGMENT_SHADER),r.shaderSource(s,c),r.compileShader(s),r.getShaderParameter(s,r.COMPILE_STATUS)?(c=r.createProgram(),r.attachShader(c,n),r.attachShader(c,s),r.deleteShader(n),r.deleteShader(s),r.linkProgram(c),r.getProgramParameter(c,r.LINK_STATUS)?n=c:(n="Shader program failed to link.  The error log is:"+r.getProgramInfoLog(c),console.error(n),n=-1)):(n="Fragment shader failed to compile.  The error log is:"+r.getShaderInfoLog(s),console.error(n),n=-1)):(n="Vertex shader failed to compile.  The error log is:"+r.getShaderInfoLog(n),console.error(n),n=-1),n=this.program=n,s={},c=r.getProgramParameter(n,r.ACTIVE_ATTRIBUTES);for(var h=0;h<c;h++){var d=r.getActiveAttrib(n,h);s[d.name]=r.getAttribLocation(n,d.name)}h={},d={};for(var f=r.getProgramParameter(n,r.ACTIVE_UNIFORMS),x=0;x<f;x++){var E=r.getActiveUniform(n,x);h[E.name]=r.getUniformLocation(n,E.name),d[E.name]=E.type}this.parameter=r={attributes:s,numAttributes:c,uniformsType:d,uniforms:h},this.attributes=r.attributes,this.uniforms=r.uniforms,this.parameter=r}return po(t,[{key:"getVertexShader",value:function(r){var n="";return this.map&&this.map.type==="cesium"&&(n=`#define LOG_DEPTH
`),n+=`#ifdef LOG_DEPTH
uniform float currentFrustumX;varying float v_depthFromNearPlusOne;
#endif
uniform vec2 MAPV_resolution;
#if defined(PICK)
uniform bool uIsPickRender;attribute vec3 aPickColor;uniform vec3 uPickedColor;varying vec4 vPickColor;uniform bool uEnablePicked;bool mapvIsPicked(){return uEnablePicked&&aPickColor==uPickedColor;}
#endif
void afterMain(){
#if defined(LOG_DEPTH)
v_depthFromNearPlusOne=(gl_Position.w-currentFrustumX)+1.0;gl_Position.z=clamp(gl_Position.z/gl_Position.w,-1.0,1.0)*gl_Position.w;
#endif
#if defined(PICK)
vPickColor=vec4(aPickColor,0.0);if(mapvIsPicked()){vPickColor.a=1.0;}
#endif
}`,r=this.getDefines()+n+r,r=r.replace("void main","void originMain"),r+"void main() {originMain(); afterMain();}"}},{key:"getFragmentShader",value:function(r){var n="";return this.map&&this.map.type==="cesium"&&(n=`#define LOG_DEPTH
`),n+=`#if defined(LOG_DEPTH)
#extension GL_EXT_frag_depth : enable
#endif
precision highp float;uniform vec2 MAPV_resolution;uniform bool uIsPickRender;
#if defined(PICK)
varying vec4 vPickColor;bool mapvIsPicked(){return vPickColor.a==1.0;}
#endif
#if defined(LOG_DEPTH)
uniform float oneOverLog2FarDepthFromNearPlusOne;uniform float farDepthFromNearPlusOne;varying float v_depthFromNearPlusOne;void writeLogDepth(float depth){if(depth<=0.9999999||depth>farDepthFromNearPlusOne){discard;}gl_FragDepthEXT=log2(depth)*oneOverLog2FarDepthFromNearPlusOne;}
#endif
void afterMain(){
#if defined(PICK)
if(uIsPickRender){gl_FragColor=vec4(vPickColor.rgb,1.0);return;}
#endif
#if defined(LOG_DEPTH)
writeLogDepth(v_depthFromNearPlusOne);
#endif
}`,r=this.getDefines()+n+r,r=r.replace("void main","void originMain"),r+"void main() {originMain(); afterMain();}"}},{key:"getDefines",value:function(){var r="",n=this.options.defines;if(n)for(var s=0;s<n.length;s++)r+="#define "+n[s]+`
`;return r}},{key:"use",value:function(r,n){this.gl=r,r.useProgram(this.program),this.map&&this.map.type==="cesium"&&this.setUniforms({currentFrustumX:this.map.map.scene.camera.frustum.near,oneOverLog2FarDepthFromNearPlusOne:this.map.map.scene.context.uniformState.oneOverLog2FarDepthFromNearPlusOne,farDepthFromNearPlusOne:this.map.map.scene.context.uniformState.farDepthFromNearPlusOne}),this.uniforms.MAPV_resolution&&this.setUniforms({MAPV_resolution:[r.canvas.width,r.canvas.height]})}},{key:"setUniform",value:function(r,n){var s=this.gl,c=this.uniforms[r];if(c)switch(this.parameter.uniformsType[r]){case s.FLOAT:s.uniform1f(c,n);break;case s.FLOAT_VEC2:s.uniform2f(c,n[0],n[1]);break;case s.FLOAT_VEC3:s.uniform3f(c,n[0],n[1],n[2]);break;case s.FLOAT_VEC4:s.uniform4f(c,n[0],n[1],n[2],n[3]);break;case s.SAMPLER_2D:case s.SAMPLER_CUBE:s.activeTexture(s["TEXTURE"+this.textureIndex]),s.uniform1i(c,this.textureIndex),s.bindTexture(s.TEXTURE_2D,n),this.textureIndex++;break;case s.INT:case s.BOOL:s.uniform1i(c,n);break;case s.INT_VEC2:case s.BOOL_VEC2:s.uniform2i(c,n[0],n[1]);break;case s.INT_VEC3:case s.BOOL_VEC3:s.uniform3i(c,n[0],n[1],n[2]);break;case s.INT_VEC4:case s.BOOL_VEC4:s.uniform4i(c,n[0],n[1],n[2],n[3]);break;case s.FLOAT_MAT2:s.uniformMatrix2fv(c,!1,n);break;case s.FLOAT_MAT3:s.uniformMatrix3fv(c,!1,n);break;case s.FLOAT_MAT4:s.uniformMatrix4fv(c,!1,n);break;default:console.error("Unrecognized uniform type: "+r)}else console.warn("Unrecognized uniform type: "+r)}},{key:"setUniforms",value:function(r){this.textureIndex=0;for(var n in r)this.setUniform(n,r[n])}}]),t}(),Uf=function(t,r,n,s){var c=n?n.call(s,t,r):void 0;if(c!==void 0)return!!c;if(t===r)return!0;if((typeof t=="undefined"?"undefined":QA(t))!=="object"||!t||(typeof r=="undefined"?"undefined":QA(r))!=="object"||!r)return!1;var h=Xi(t),d=Xi(r);if(h.length!==d.length)return!1;d=Object.prototype.hasOwnProperty.bind(r);for(var f=0;f<h.length;f++){if(c=h[f],!d(c))return!1;var x=t[c],E=r[c];if(c=n?n.call(s,x,E,c):void 0,c===!1||c===void 0&&x!==E)return!1}return!0},H_=function(){function t(r){$n(this,t),this.options=r,this.gl=r.gl,this.savedState=[],this.currentState=this.getDefaultState()}return po(t,[{key:"setDefaultState",value:function(){this.setState()}},{key:"getDefaultState",value:function(){var r=this.gl;return{blend:!1,blendEquation:r.FUNC_ADD,blendFunc:[r.ONE,r.ZERO],depthMask:!0,depthTest:!0,depthFunc:r.LEQUAL,polygonOffset:[0,0],cullFace:!1,stencilTest:!1}}},{key:"getRealState",value:function(){var r=this.gl;return{blend:r.getParameter(r.BLEND),blendEquation:r.getParameter(r.BLEND_EQUATION),depthMask:r.getParameter(r.DEPTH_WRITEMASK),depthTest:r.getParameter(r.DEPTH_TEST),depthFunc:r.getParameter(r.DEPTH_FUNC),polygonOffset:[r.getParameter(r.POLYGON_OFFSET_FACTOR),r.getParameter(r.POLYGON_OFFSET_UNITS)],cullFace:r.getParameter(r.CULL_FACE),stencilTest:r.getParameter(r.STENCIL_TEST)}}},{key:"getCurrentState",value:function(){return this.currentState}},{key:"save",value:function(){this.savedState.push(this.getCurrentState())}},{key:"restore",value:function(){var r=this.savedState.pop();this.setState(r,{force:!0})}},{key:"setState",value:function(r){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};r=dt(this.getDefaultState(),r),this.setBlend(r,n),this.setDepth(r,n),this.setCullFace(r,n),this.setPolygonOffset(r,n),this.setStencil(r,n),this.currentState=r}},{key:"setBlend",value:function(r,n){var s=this.gl,c=this.getCurrentState();((n=n.force)||!Uf(r.blend,c.blend))&&(r.blend?s.enable(s.BLEND):s.disable(s.BLEND)),!n&&Uf(r.blendEquation,c.blendEquation)||s.blendEquation(r.blendEquation),(n||!Uf(r.blendFunc,c.blendFunc))&&(r.blendFunc.length===2?s.blendFunc(r.blendFunc[0],r.blendFunc[1]):r.blendFunc.length===4&&s.blendFuncSeparate(r.blendFunc[0],r.blendFunc[1],r.blendFunc[2],r.blendFunc[3]))}},{key:"setDepth",value:function(r,n){var s=this.gl,c=this.getCurrentState();((n=n.force)||!Uf(r.depthTest,c.depthTest))&&(r.depthTest?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST)),(n||!Uf(r.depthMask,c.depthMask))&&(r.depthMask?s.depthMask(!0):s.depthMask(!1)),!n&&Uf(r.depthFunc,c.depthFunc)||s.depthFunc(r.depthFunc)}},{key:"setPolygonOffset",value:function(r,n){var s=this.gl,c=this.getCurrentState();(n.force||!Uf(r.polygonOffset,c.polygonOffset))&&(r.polygonOffset[0]!==0&&r.polygonOffset[1]!==0?s.enable(s.POLYGON_OFFSET_FILL):s.disable(s.POLYGON_OFFSET_FILL),s.polygonOffset(r.polygonOffset[0],r.polygonOffset[1]))}},{key:"setCullFace",value:function(r,n){var s=this.gl,c=this.getCurrentState();(n.force||!Uf(r.cullFace,c.cullFace))&&(r.cullFace?(s.enable(s.CULL_FACE),s.cullFace(s.BACK)):s.disable(s.CULL_FACE))}},{key:"setStencil",value:function(r,n){var s=this.gl,c=this.getCurrentState();(n.force||!Uf(r.stencilTest,c.stencilTest))&&(r.stencilTest?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST))}}]),t}(),y0=function(){function t(r){$n(this,t),this.options=r,this.gl=r.gl,this.buffer=this.gl.createBuffer(),r.data&&this.updateData(r.data)}return po(t,[{key:"updateData",value:function(r){var n=this.options,s=this.gl;this.bind(),s.bufferData(s[n.target],r,s[n.usage])}},{key:"bind",value:function(r){r=r||this.gl,r.bindBuffer(r[this.options.target],this.buffer)}},{key:"unBind",value:function(r){r=r||this.gl,r.bindBuffer(r[this.options.target],null)}},{key:"destroy",value:function(){this.buffer=null}}]),t}(),N_={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FLOAT:4},K1=function(){function t(r){for($n(this,t),this.options=r,this.attributes=r.attributes,this.gl=r.gl,this.program=r.program,r=this.stride=0;r<this.attributes.length;r++)this.stride+=N_[this.attributes[r].type]*this.attributes[r].size}return po(t,[{key:"setVertexAttribPointers",value:function(){for(var r=this.gl,n=this.program,s=0;s<this.attributes.length;s++){var c=this.attributes[s],h=n.attributes[c.name];h!==void 0&&(c.buffer.bind(r),r.vertexAttribPointer(h,c.size,r[c.type],c.normalize||!1,c.stride!==void 0?c.stride:this.stride,c.offset),r.enableVertexAttribArray(h))}}},{key:"bind",value:function(){this.setVertexAttribPointers()}},{key:"destroy",value:function(){}}]),t}(),vA=function t(r,n,s){$n(this,t),n=n||r.canvas.width,s=s||r.canvas.height;var c=r.createFramebuffer(),h=r.createTexture();r.bindTexture(r.TEXTURE_2D,h),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,s,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),c.texture=h;var d=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,d),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,n,s),c.depthBuffer=d,r.bindFramebuffer(r.FRAMEBUFFER,c),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h,0),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,d),n=r.checkFramebufferStatus(r.FRAMEBUFFER),r.FRAMEBUFFER_COMPLETE===n&&(r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindTexture(r.TEXTURE_2D,null),r.bindRenderbuffer(r.RENDERBUFFER,null),this.framebuffer=c)},Ym=function(){function t(r){$n(this,t),this.options={},dt(this.options,r),this.vertex=[-1,1,0,-1,-1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0],this.sampleCoord=[0,1,0,0,1,1,1,1,0,0,1,0]}return po(t,[{key:"getOptions",value:function(){return this.options}},{key:"onResize",value:function(r){}},{key:"render",value:function(r){var n=r.gl;r=r.texture;var s=this.programSample;n.useProgram(s.program);var c=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,c);var h=[-1,-1,0,-1,1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0];n.bufferData(n.ARRAY_BUFFER,new Float32Array(h),n.STATIC_DRAW),n.enableVertexAttribArray(s.attributes.aPos),n.vertexAttribPointer(s.attributes.aPos,3,n.FLOAT,!1,0,0),c=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,c),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,1,1,1,0,0,1,0]),n.STATIC_DRAW),n.enableVertexAttribArray(s.attributes.aTextureCoord),n.vertexAttribPointer(s.attributes.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r),n.uniform1i(s.uniforms.uSampler,0),n.drawArrays(n.TRIANGLES,0,h.length/3)}}]),t}();(function(t){function r(n){return $n(this,r),Ji(this,(r.__proto__||fo(r)).call(this,n))}return So(r,t),po(r,[{key:"getProgram",value:function(n){return this.programSample||(this.programSample=new Ol(n,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(void){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision highp float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;vec4 fxaa_2_0(sampler2D tex,vec2 fragCoord,vec2 resolution,vec2 v_rgbNW,vec2 v_rgbNE,vec2 v_rgbSW,vec2 v_rgbSE,vec2 v_rgbM){vec4 color;mediump vec2 inverseVP=vec2(1.0/resolution.x,1.0/resolution.y);vec3 rgbNW=texture2D(tex,v_rgbNW).xyz;vec3 rgbNE=texture2D(tex,v_rgbNE).xyz;vec3 rgbSW=texture2D(tex,v_rgbSW).xyz;vec3 rgbSE=texture2D(tex,v_rgbSE).xyz;vec4 texColor=texture2D(tex,v_rgbM);vec3 rgbM=texColor.xyz;vec3 luma=vec3(0.299,0.587,0.114);float lumaNW=dot(rgbNW,luma);float lumaNE=dot(rgbNE,luma);float lumaSW=dot(rgbSW,luma);float lumaSE=dot(rgbSE,luma);float lumaM=dot(rgbM,luma);float lumaMin=min(lumaM,min(min(lumaNW,lumaNE),min(lumaSW,lumaSE)));float lumaMax=max(lumaM,max(max(lumaNW,lumaNE),max(lumaSW,lumaSE)));mediump vec2 dir;dir.x=-((lumaNW+lumaNE)-(lumaSW+lumaSE));dir.y=((lumaNW+lumaSW)-(lumaNE+lumaSE));float dirReduce=max((lumaNW+lumaNE+lumaSW+lumaSE)*(0.25*1.0/8.0),1.0/128.0);float rcpDirMin=1.0/(min(abs(dir.x),abs(dir.y))+dirReduce);dir=min(vec2(8.0,8.0),max(vec2(-8.0,-8.0),dir*rcpDirMin))*inverseVP;vec3 rgbA=0.5*(texture2D(tex,fragCoord*inverseVP+dir*(1.0/3.0-0.5)).xyz+texture2D(tex,fragCoord*inverseVP+dir*(2.0/3.0-0.5)).xyz);vec3 rgbB=rgbA*0.5+0.25*(texture2D(tex,fragCoord*inverseVP+dir*-0.5).xyz+texture2D(tex,fragCoord*inverseVP+dir*0.5).xyz);float lumaB=dot(rgbB,luma);if((lumaB<lumaMin)||(lumaB>lumaMax)){color=vec4(rgbA,texColor.a);}else{color=vec4(rgbB,texColor.a);}return color;}void texcoords_3_1(vec2 fragCoord,vec2 resolution,out vec2 v_rgbNW,out vec2 v_rgbNE,out vec2 v_rgbSW,out vec2 v_rgbSE,out vec2 v_rgbM){vec2 inverseVP=1.0/resolution.xy;v_rgbNW=(fragCoord+vec2(-1.0,-1.0))*inverseVP;v_rgbNE=(fragCoord+vec2(1.0,-1.0))*inverseVP;v_rgbSW=(fragCoord+vec2(-1.0,1.0))*inverseVP;v_rgbSE=(fragCoord+vec2(1.0,1.0))*inverseVP;v_rgbM=vec2(fragCoord*inverseVP);}vec4 apply_1_2(sampler2D tex,vec2 fragCoord,vec2 resolution){mediump vec2 v_rgbNW;mediump vec2 v_rgbNE;mediump vec2 v_rgbSW;mediump vec2 v_rgbSE;mediump vec2 v_rgbM;texcoords_3_1(fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);return fxaa_2_0(tex,fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);}void main(void){vec2 fragCoord=vTextureCoord*canvasSize;gl_FragColor=apply_1_2(uSampler,fragCoord,canvasSize);}"})),this.programSample}},{key:"render",value:function(n){var s=n.gl;n=n.texture,this.getOptions(),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);var c=this.getProgram(s);s.useProgram(c.program);var h=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,h),s.bufferData(s.ARRAY_BUFFER,new Float32Array(this.vertex),s.STATIC_DRAW),s.enableVertexAttribArray(c.attributes.aPos),s.vertexAttribPointer(c.attributes.aPos,3,s.FLOAT,!1,0,0),h=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,h),s.bufferData(s.ARRAY_BUFFER,new Float32Array(this.sampleCoord),s.STATIC_DRAW),s.enableVertexAttribArray(c.attributes.aTextureCoord),s.vertexAttribPointer(c.attributes.aTextureCoord,2,s.FLOAT,!1,0,0),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n),s.uniform1i(c.uniforms.uSampler,1),s.uniform2fv(c.uniforms.canvasSize,[s.canvas.width,s.canvas.height]),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.bindBuffer(s.ARRAY_BUFFER,null),s.useProgram(null)}}]),r})(Ym),function(t){function r(n){return $n(this,r),Ji(this,(r.__proto__||fo(r)).call(this,n))}return So(r,t),po(r,[{key:"getProgram",value:function(n){if(this.program1||(this.program1=new Ol(n,{vertexShader:"attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];void SMAAEdgeDetectionVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);vOffset[2]=texcoord.xyxy+resolution.xyxy*vec4(-2.0,0.0,0.0,2.0);}void main(){vUv=uv;SMAAEdgeDetectionVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:`precision highp float;
#define SMAA_THRESHOLD 0.1
uniform sampler2D tDiffuse;varying vec2 vUv;varying vec4 vOffset[3];vec4 SMAAColorEdgeDetectionPS(vec2 texcoord,vec4 offset[3],sampler2D colorTex){vec2 threshold=vec2(SMAA_THRESHOLD,SMAA_THRESHOLD);vec4 delta;vec3 C=texture2D(colorTex,texcoord).rgb;vec3 Cleft=texture2D(colorTex,offset[0].xy).rgb;vec3 t=abs(C-Cleft);delta.x=max(max(t.r,t.g),t.b);vec3 Ctop=texture2D(colorTex,offset[0].zw).rgb;t=abs(C-Ctop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0,1.0))==0.0)discard;vec3 Cright=texture2D(colorTex,offset[1].xy).rgb;t=abs(C-Cright);delta.z=max(max(t.r,t.g),t.b);vec3 Cbottom=texture2D(colorTex,offset[1].zw).rgb;t=abs(C-Cbottom);delta.w=max(max(t.r,t.g),t.b);float maxDelta=max(max(max(delta.x,delta.y),delta.z),delta.w);vec3 Cleftleft=texture2D(colorTex,offset[2].xy).rgb;t=abs(C-Cleftleft);delta.z=max(max(t.r,t.g),t.b);vec3 Ctoptop=texture2D(colorTex,offset[2].zw).rgb;t=abs(C-Ctoptop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(max(maxDelta,delta.z),delta.w);edges.xy*=step(0.5*maxDelta,delta.xy);return vec4(edges,0.0,0.0);}void main(){gl_FragColor=SMAAColorEdgeDetectionPS(vUv,vOffset,tDiffuse);}`})),this.program2||(this.program2=new Ol(n,{vertexShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;void SMAABlendingWeightCalculationVS(vec2 texcoord){vPixcoord=texcoord/resolution;vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-0.25,0.125,1.25,0.125);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(-0.125,0.25,-0.125,-1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*resolution.xxyy*float(SMAA_MAX_SEARCH_STEPS);}void main(){vUv=uv;SMAABlendingWeightCalculationVS(vUv);gl_Position=vec4(position,1.0);}`,fragmentShader:`precision highp float;
#define SMAA_MAX_SEARCH_STEPS 8
#define SMAA_AREATEX_MAX_DISTANCE 16
#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )
#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )
#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )
uniform sampler2D tDiffuse;uniform sampler2D tArea;uniform sampler2D tSearch;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;vec2 round(vec2 x){return sign(x)*floor(abs(x)+0.5);}float SMAASearchLength(sampler2D searchTex,vec2 e,float bias,float scale){e.r=bias+e.r*scale;return 255.0*texture2D(searchTex,e,0.0).r;}float SMAASearchXLeft(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){/***@PSEUDO_GATHER4*This texcoord has been offset by(-0.25,-0.125)in the vertex shader to*sample between edge,thus fetching four edges in a row.*Sampling with different offsets in each direction allows to disambiguate*which edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(2.0,0.0)*resolution;if(!(texcoord.x>end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x+=0.25*resolution.x;texcoord.x+=resolution.x;texcoord.x+=2.0*resolution.x;texcoord.x-=resolution.x*SMAASearchLength(searchTex,e,0.0,0.5);return texcoord.x;}float SMAASearchXRight(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(2.0,0.0)*resolution;if(!(texcoord.x<end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x-=0.25*resolution.x;texcoord.x-=resolution.x;texcoord.x-=2.0*resolution.x;texcoord.x+=resolution.x*SMAASearchLength(searchTex,e,0.5,0.5);return texcoord.x;}float SMAASearchYUp(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(0.0,2.0)*resolution;if(!(texcoord.y>end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y-=0.25*resolution.y;texcoord.y-=resolution.y;texcoord.y-=2.0*resolution.y;texcoord.y+=resolution.y*SMAASearchLength(searchTex,e.gr,0.0,0.5);return texcoord.y;}float SMAASearchYDown(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(0.0,2.0)*resolution;if(!(texcoord.y<end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y+=0.25*resolution.y;texcoord.y+=resolution.y;texcoord.y+=2.0*resolution.y;texcoord.y-=resolution.y*SMAASearchLength(searchTex,e.gr,0.5,0.5);return texcoord.y;}vec2 SMAAArea(sampler2D areaTex,vec2 dist,float e1,float e2,float offset){vec2 texcoord=float(SMAA_AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texcoord=SMAA_AREATEX_PIXEL_SIZE*texcoord+(0.5*SMAA_AREATEX_PIXEL_SIZE);texcoord.y+=SMAA_AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTex,texcoord,0.0).rg;}vec4 SMAABlendingWeightCalculationPS(vec2 texcoord,vec2 pixcoord,vec4 offset[3],sampler2D edgesTex,sampler2D areaTex,sampler2D searchTex,ivec4 subsampleIndices){vec4 weights=vec4(0.0,0.0,0.0,0.0);vec2 e=texture2D(edgesTex,texcoord).rg;if(e.g>0.0){vec2 d;vec2 coords;coords.x=SMAASearchXLeft(edgesTex,searchTex,offset[0].xy,offset[2].x);coords.y=offset[1].y;d.x=coords.x;float e1=texture2D(edgesTex,coords,0.0).r;coords.x=SMAASearchXRight(edgesTex,searchTex,offset[0].zw,offset[2].y);d.y=coords.x;d=d/resolution.x-pixcoord.x;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(1,0)).r;weights.rg=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.y));}if(e.r>0.0){vec2 d;vec2 coords;coords.y=SMAASearchYUp(edgesTex,searchTex,offset[1].xy,offset[2].z);coords.x=offset[0].x;d.x=coords.y;float e1=texture2D(edgesTex,coords,0.0).g;coords.y=SMAASearchYDown(edgesTex,searchTex,offset[1].zw,offset[2].w);d.y=coords.y;d=d/resolution.y-pixcoord.y;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(0,1)).g;weights.ba=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.x));}return weights;}void main(){gl_FragColor=SMAABlendingWeightCalculationPS(vUv,vPixcoord,vOffset,tDiffuse,tArea,tSearch,ivec4(0.0));}`})),this.program3||(this.program3=new Ol(n,{vertexShader:"precision highp float;uniform vec2 resolution;attribute vec3 position;attribute vec2 uv;varying vec2 vUv;varying vec4 vOffset[2];void SMAANeighborhoodBlendingVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);}void main(){vUv=uv;SMAANeighborhoodBlendingVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:"precision highp float;uniform sampler2D tDiffuse;uniform sampler2D tColor;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[2];vec4 SMAANeighborhoodBlendingPS(vec2 texcoord,vec4 offset[2],sampler2D colorTex,sampler2D blendTex){vec4 a;a.xz=texture2D(blendTex,texcoord).xz;a.y=texture2D(blendTex,offset[1].zw).g;a.w=texture2D(blendTex,offset[1].xy).a;if(dot(a,vec4(1.0,1.0,1.0,1.0))<1e-5){return texture2D(colorTex,texcoord,0.0);}else{vec2 offset;offset.x=a.a>a.b ? a.a :-a.b;offset.y=a.g>a.r ?-a.g : a.r;if(abs(offset.x)>abs(offset.y)){offset.y=0.0;}else{offset.x=0.0;}vec4 C=texture2D(colorTex,texcoord,0.0);texcoord+=sign(offset)*resolution;vec4 Cop=texture2D(colorTex,texcoord,0.0);float s=abs(offset.x)>abs(offset.y)? abs(offset.x): abs(offset.y);C.xyz=pow(C.xyz,vec3(2.2));Cop.xyz=pow(Cop.xyz,vec3(2.2));vec4 mixed=mix(C,Cop,s);mixed.xyz=pow(mixed.xyz,vec3(1.0/2.2));return mixed;}}void main(){gl_FragColor=SMAANeighborhoodBlendingPS(vUv,vOffset,tColor,tDiffuse);}"})),!this.vertexBuffer||!this.sampleBuffer){this.vertexBuffer=new y0({gl:n,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new y0({gl:n,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord));var s=[{stride:12,name:"position",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"uv",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}];this.vertexArray1=new K1({gl:n,program:this.program1,attributes:s}),this.vertexArray2=new K1({gl:n,program:this.program2,attributes:s}),this.vertexArray3=new K1({gl:n,program:this.program3,attributes:s})}return{program1:this.program1,program2:this.program2,program3:this.program3}}},{key:"onResize",value:function(n){this.collectBrightBuffer=new vA(n),this.bloomBuffer=new vA(n)}},{key:"getExtraFbo",value:function(n){return this.collectBrightBuffer||(this.collectBrightBuffer=new vA(n)),this.bloomBuffer||(this.bloomBuffer=new vA(n)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(n){var s=n.gl,c=n.texture;n=n.fbo,this.getOptions(),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);var h=this.getProgram(s),d=h.program1,f=h.program2;h=h.program3;var x=this.getExtraFbo(s),E=x.collectBrightBuffer;x=x.bloomBuffer;var N=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,N),s.bufferData(s.ARRAY_BUFFER,new Float32Array(this.vertex),s.STATIC_DRAW),s.enableVertexAttribArray(d.attributes.position),s.vertexAttribPointer(d.attributes.position,3,s.FLOAT,!1,0,0),s.enableVertexAttribArray(f.attributes.position),s.vertexAttribPointer(f.attributes.position,3,s.FLOAT,!1,0,0),s.enableVertexAttribArray(h.attributes.position),s.vertexAttribPointer(h.attributes.position,3,s.FLOAT,!1,0,0),N=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,N),s.bufferData(s.ARRAY_BUFFER,new Float32Array(this.sampleCoord),s.STATIC_DRAW),s.enableVertexAttribArray(d.attributes.uv),s.vertexAttribPointer(d.attributes.uv,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(f.attributes.uv),s.vertexAttribPointer(f.attributes.uv,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(h.attributes.uv),s.vertexAttribPointer(h.attributes.uv,2,s.FLOAT,!1,0,0),s.useProgram(d.program),s.bindFramebuffer(s.FRAMEBUFFER,E),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE2),s.bindTexture(s.TEXTURE_2D,c),s.uniform1i(d.uniforms.tDiffuse,2),s.uniform2fv(d.uniforms.resolution,[s.canvas.width,s.canvas.height]),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.useProgram(f.program),s.bindFramebuffer(s.FRAMEBUFFER,x),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE2),s.bindTexture(s.TEXTURE_2D,E.texture),s.uniform1i(f.uniforms.uSampler,2),s.uniform2fv(f.uniforms.resolution,[s.canvas.width,s.canvas.height]),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.useProgram(h.program),s.bindFramebuffer(s.FRAMEBUFFER,n),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE2),s.bindTexture(s.TEXTURE_2D,c),s.uniform1i(h.uniforms.tDiffuse,2),s.activeTexture(s.TEXTURE3),s.bindTexture(s.TEXTURE_2D,x.texture),s.uniform1i(h.uniforms.tColor,3),s.uniform2fv(h.uniforms.resolution,[s.canvas.width,s.canvas.height]),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.bindBuffer(s.ARRAY_BUFFER,null),s.useProgram(null)}},{key:"getAreaTexture",value:function(){return"data:image/png;base64,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"}},{key:"getSearchTexture",value:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAIAAADiVupLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrs00EKgAAIRNEZ739mTQoiwmhRi4L/FiKiu9ERISkzbXdTVV3H4WhfOG6ehl1rNR7qDSF8hwkVcJXt+3A//I0Nv0GoCBUAAAAAAMA/LAIMAB+Dcg2OE2zsAAAAAElFTkSuQmCC"}}]),r}(Ym),function(t){function r(n){return $n(this,r),Ji(this,(r.__proto__||fo(r)).call(this,n))}return So(r,t),po(r,[{key:"getProgram",value:function(n){return this.programSample||(this.programSample=new Ol(n,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){float fStep=1.0/512.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;gl_FragColor=blurSample;}"}),this.vertexBuffer=new y0({gl:n,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new y0({gl:n,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord)),this.vertexArray=new K1({gl:n,program:this.programSample,attributes:[{stride:12,name:"aPos",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"aTextureCoord",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}]})),this.programSample}},{key:"render",value:function(n){var s=n.gl;n=n.texture,s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);var c=this.getProgram(s);c.use(s),this.vertexArray.bind(),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n),s.uniform1i(c.uniforms.uSampler,1),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3)}}]),r}(Ym),function(t){function r(n){return $n(this,r),Ji(this,(r.__proto__||fo(r)).call(this,n))}return So(r,t),po(r,[{key:"getProgram",value:function(n){return this.programBright||(this.programBright=new Ol(n,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-(1.0-threshold)/5.0));float brightness=dot(color.rgb,vec3(0.2126,0.7152,0.0722));if(brightness>threshold){color=lightColor;}else{color=vec4(0.0);}gl_FragColor=color;}"})),this.programBloom||(this.programBloom=new Ol(n,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new Ol(n,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord);vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(n){this.collectBrightBuffer=new vA(n),this.bloomBuffer=new vA(n)}},{key:"getExtraFbo",value:function(n){return this.collectBrightBuffer||(this.collectBrightBuffer=new vA(n)),this.bloomBuffer||(this.bloomBuffer=new vA(n)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(n){var s=n.gl,c=n.texture;n=n.fbo;var h=this.getOptions();s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);var d=this.getProgram(s),f=d.programBright,x=d.programBloom;d=d.programResult;var E=this.getExtraFbo(s),N=E.collectBrightBuffer;E=E.bloomBuffer;var C=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,C),s.bufferData(s.ARRAY_BUFFER,new Float32Array(this.vertex),s.STATIC_DRAW),s.enableVertexAttribArray(f.attributes.aPos),s.vertexAttribPointer(f.attributes.aPos,3,s.FLOAT,!1,0,0),s.enableVertexAttribArray(x.attributes.aPos),s.vertexAttribPointer(x.attributes.aPos,3,s.FLOAT,!1,0,0),s.enableVertexAttribArray(d.attributes.aPos),s.vertexAttribPointer(d.attributes.aPos,3,s.FLOAT,!1,0,0),C=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,C),s.bufferData(s.ARRAY_BUFFER,new Float32Array(this.sampleCoord),s.STATIC_DRAW),s.enableVertexAttribArray(f.attributes.aTextureCoord),s.vertexAttribPointer(f.attributes.aTextureCoord,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(x.attributes.aTextureCoord),s.vertexAttribPointer(x.attributes.aTextureCoord,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(d.attributes.aTextureCoord),s.vertexAttribPointer(d.attributes.aTextureCoord,2,s.FLOAT,!1,0,0),s.useProgram(f.program),s.bindFramebuffer(s.FRAMEBUFFER,N),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,c),s.uniform1i(f.uniforms.uSampler,1),s.uniform1f(f.uniforms.threshold,h.threshold||0),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.useProgram(x.program),s.bindFramebuffer(s.FRAMEBUFFER,E),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,N.texture),s.uniform1i(x.uniforms.uSampler,1),s.uniform1i(x.uniforms.isVertical,!0),s.uniform1f(x.uniforms.blurSize,h.blurSize||2),s.uniform1f(x.uniforms.devicePixelRatio,window.devicePixelRatio),s.uniform2fv(x.uniforms.canvasSize,[s.canvas.width,s.canvas.height]),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.useProgram(x.program),s.bindFramebuffer(s.FRAMEBUFFER,N),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,E.texture),s.uniform1i(x.uniforms.uSampler,1),s.uniform1i(x.uniforms.isVertical,!1),s.uniform1f(x.uniforms.blurSize,h.blurSize||2),s.uniform1f(x.uniforms.devicePixelRatio,window.devicePixelRatio),s.uniform2fv(x.uniforms.canvasSize,[s.canvas.width,s.canvas.height]),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.useProgram(d.program),s.bindFramebuffer(s.FRAMEBUFFER,n),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,c),s.uniform1i(d.uniforms.originalTexture,1),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,N.texture),s.uniform1i(d.uniforms.bloomTexture,0),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.bindBuffer(s.ARRAY_BUFFER,null),s.useProgram(null)}}]),r}(Ym),function(t){function r(n){return $n(this,r),Ji(this,(r.__proto__||fo(r)).call(this,n))}return So(r,t),po(r,[{key:"getProgram",value:function(n){return this.programBright||(this.programBright=new Ol(n,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-threshold));gl_FragColor=lightColor;}"})),this.programBloom||(this.programBloom=new Ol(n,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"})),this.programResult||(this.programResult=new Ol(n,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;uniform float toneScale;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord)*toneScale;vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"})),{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(n){this.collectBrightBuffer=new vA(n),this.bloomBuffer=new vA(n)}},{key:"getExtraFbo",value:function(n){return this.collectBrightBuffer||(this.collectBrightBuffer=new vA(n)),this.bloomBuffer||(this.bloomBuffer=new vA(n)),{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(n){var s=n.gl,c=n.texture;n=n.fbo;var h=this.getOptions(),d="clarity"in h?h.clarity:1;d=Math.max(0,d),d=Math.min(1,d),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);var f=this.getProgram(s),x=f.programBright,E=f.programBloom;f=f.programResult;var N=this.getExtraFbo(s),C=N.collectBrightBuffer;N=N.bloomBuffer;var I=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,I),s.bufferData(s.ARRAY_BUFFER,new Float32Array(this.vertex),s.STATIC_DRAW),s.enableVertexAttribArray(x.attributes.aPos),s.vertexAttribPointer(x.attributes.aPos,3,s.FLOAT,!1,0,0),s.enableVertexAttribArray(E.attributes.aPos),s.vertexAttribPointer(E.attributes.aPos,3,s.FLOAT,!1,0,0),s.enableVertexAttribArray(f.attributes.aPos),s.vertexAttribPointer(f.attributes.aPos,3,s.FLOAT,!1,0,0),I=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,I),s.bufferData(s.ARRAY_BUFFER,new Float32Array(this.sampleCoord),s.STATIC_DRAW),s.enableVertexAttribArray(x.attributes.aTextureCoord),s.vertexAttribPointer(x.attributes.aTextureCoord,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(E.attributes.aTextureCoord),s.vertexAttribPointer(E.attributes.aTextureCoord,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(f.attributes.aTextureCoord),s.vertexAttribPointer(f.attributes.aTextureCoord,2,s.FLOAT,!1,0,0),s.useProgram(x.program),s.bindFramebuffer(s.FRAMEBUFFER,C),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,c),s.uniform1i(x.uniforms.uSampler,1),s.uniform1f(x.uniforms.threshold,h.threshold||0),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.useProgram(E.program),s.bindFramebuffer(s.FRAMEBUFFER,N),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,C.texture),s.uniform1i(E.uniforms.uSampler,1),s.uniform1i(E.uniforms.isVertical,!0),s.uniform1f(E.uniforms.blurSize,h.blurSize||2),s.uniform1f(E.uniforms.devicePixelRatio,window.devicePixelRatio),s.uniform2fv(E.uniforms.canvasSize,[s.canvas.width,s.canvas.height]),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.useProgram(E.program),s.bindFramebuffer(s.FRAMEBUFFER,C),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,N.texture),s.uniform1i(E.uniforms.uSampler,1),s.uniform1i(E.uniforms.isVertical,!1),s.uniform1f(E.uniforms.blurSize,h.blurSize||2),s.uniform1f(E.uniforms.devicePixelRatio,window.devicePixelRatio),s.uniform2fv(E.uniforms.canvasSize,[s.canvas.width,s.canvas.height]),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.useProgram(f.program),s.bindFramebuffer(s.FRAMEBUFFER,n),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,c),s.uniform1i(f.uniforms.originalTexture,1),s.uniform1f(f.uniforms.toneScale,d),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,C.texture),s.uniform1i(f.uniforms.bloomTexture,0),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3),s.bindBuffer(s.ARRAY_BUFFER,null),s.useProgram(null)}}]),r}(Ym),function(t){function r(n){return $n(this,r),Ji(this,(r.__proto__||fo(r)).call(this,n))}return So(r,t),po(r,[{key:"getProgram",value:function(n){return this.programSample||(this.programSample=new Ol(n,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;void main(){float fStep=1.0/312.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;float desX=abs((gl_FragCoord.x-canvasSize.x/2.0)/(canvasSize.x/2.0));float desY=abs((gl_FragCoord.y-canvasSize.y/2.0)/(canvasSize.y/2.0));float factor=max(desX,desY);gl_FragColor=(sample22*(1.0-factor)+blurSample*factor);}"})),this.programSample}},{key:"render",value:function(n){var s=n.gl;n=n.texture;var c=this.getProgram(s);s.useProgram(c.program);var h=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,h),s.bufferData(s.ARRAY_BUFFER,new Float32Array(this.vertex),s.STATIC_DRAW),s.enableVertexAttribArray(c.attributes.aPos),s.vertexAttribPointer(c.attributes.aPos,3,s.FLOAT,!1,0,0),h=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,h),s.bufferData(s.ARRAY_BUFFER,new Float32Array(this.sampleCoord),s.STATIC_DRAW),s.enableVertexAttribArray(c.attributes.aTextureCoord),s.vertexAttribPointer(c.attributes.aTextureCoord,2,s.FLOAT,!1,0,0),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n),s.uniform1i(c.uniforms.uSampler,1),s.uniform2fv(c.uniforms.canvasSize,[s.canvas.width,s.canvas.height]),s.drawArrays(s.TRIANGLES,0,this.vertex.length/3)}}]),r}(Ym);var z_=function(){function t(r){$n(this,t),this.gl=r,this.effects=[],this.initFbo()}return po(t,[{key:"addEffect",value:function(r){this.effects.push(r)}},{key:"removeEffect",value:function(r){}},{key:"setEffects",value:function(r){this.effects=r}},{key:"onResize",value:function(){this.initFbo();var r=this.gl,n=this.effects;if(n&&1<n.length)for(var s=1;s<n.length;s++){var c=n[s];c.onResize&&c.onResize(r)}}},{key:"initFbo",value:function(){var r=this.gl;r&&(this.fbo=[new vA(r),new vA(r)])}},{key:"destroy",value:function(){this.effects=[],this.fbo=[],this.gl=null}},{key:"render",value:function(){var r=this.gl,n=this.effects;if(n&&0<n.length)for(var s={},c=0;c<n.length;c++){var h=this.fbo[c%2].framebuffer;c===n.length-1&&(h=null),r.bindFramebuffer(r.FRAMEBUFFER,h);var d=[0,0,0,0];r.clearColor(d[0],d[1],d[2],d[3]),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),n[c].render({isPickRender:!1,gl:r,texture:s.texture,fbo:h}),s=h}}}]),t}(),x0=function(){function t(r,n){$n(this,t),this.map=r,this.options=n||{},this.eventMap={}}return po(t,[{key:"onResize",value:function(r){}},{key:"onUpdate",value:function(r){throw"\u672A\u5B9E\u73B0onUpdate\u65B9\u6CD5"}},{key:"getContainer",value:function(){throw"\u672A\u5B9E\u73B0getContainer\u65B9\u6CD5"}},{key:"getSize",value:function(){throw"\u672A\u5B9E\u73B0getSize\u65B9\u6CD5"}},{key:"getTilt",value:function(){throw"\u672A\u5B9E\u73B0getTilt\u65B9\u6CD5"}},{key:"getHeading",value:function(){throw"\u672A\u5B9E\u73B0getHeading\u65B9\u6CD5"}},{key:"getZoomUnits",value:function(){throw"\u672A\u5B9E\u73B0getZoomUnits\u65B9\u6CD5"}},{key:"getCenter",value:function(){throw"\u672A\u5B9E\u73B0getCenter\u65B9\u6CD5"}},{key:"getMapType",value:function(){throw"\u672A\u5B9E\u73B0getMapType\u65B9\u6CD5"}},{key:"lnglatToMercator",value:function(r,n){return this.options.coordinateSystem==="gcj02"?(n=n*Math.PI/180,n=31890685e-1*Math.log((1+Math.sin(n))/(1-Math.sin(n))),[parseFloat((r*Math.PI/180*6378137).toFixed(2)),parseFloat(n.toFixed(2))]):(r=DA.convertLL2MC({lng:r,lat:n}),[r.lng,r.lat])}}]),t}(),Q_=function(t){function r(n){$n(this,r);var s=Ji(this,(r.__proto__||fo(r)).call(this,n));return n._printLog&&n._printLog("mapvgl"),s.eventMap={},s}return So(r,t),po(r,[{key:"onResize",value:function(n){this.map.addEventListener("resize",n),this.eventMap.resize=n}},{key:"onMousemove",value:function(n){n=this.extendCallback(n),this.map.addEventListener("mousemove",n),this.eventMap.mousemove=n}},{key:"onClick",value:function(n){n=this.extendCallback(n),this.map.addEventListener("click",n),this.eventMap.click=n}},{key:"onDblClick",value:function(n){n=this.extendCallback(n),this.map.addEventListener("dblclick",n),this.eventMap.dblclick=n}},{key:"onRightClick",value:function(n){n=this.extendCallback(n),this.map.addEventListener("rightclick",n),this.eventMap.rightclick=n}},{key:"onUpdate",value:function(n){this.map.addEventListener("update",n),this.map.addEventListener("onearthstatuschange",n),this.eventMap.update=n,this.eventMap.onearthstatuschange=n}},{key:"extendCallback",value:function(n){return function(s){n(dt(s,{x:s.x,y:s.y}))}}},{key:"unbind",value:function(n){var s=this;this.eventMap[n]?(this.map.removeEventListener(n,this.eventMap[n]),delete this.eventMap[n]):(Xi(this.eventMap).forEach(function(c){s.map.removeEventListener(c,s.eventMap[c])}),this.eventMap={})}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return this.map.getTilt()}},{key:"getHeading",value:function(){return this.map.getHeading()}},{key:"getZoomUnits",value:function(){return this.map.getZoomUnits()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getCenter",value:function(){var n=this.map.getCenter();return-180<=n.lng&&180>=n.lng&&(n=this.map.lnglatToMercator(n.lng,n.lat),n={lng:n[0],lat:n[1]}),n}},{key:"getMapType",value:function(){return this.map.getMapType()}},{key:"lnglatToMercator",value:function(n,s){return this.map.lnglatToMercator(n,s)}},{key:"mercatorToLnglat",value:function(n,s){return this.map.mercatorToLnglat(n,s)}},{key:"pixelToPointIn",value:function(n){return n=this.map.pixelToPointIn(n),this.mercatorToLnglat(n.lng,n.lat)}}]),r}(x0),b_=function(t){function r(n){return $n(this,r),n=Ji(this,(r.__proto__||fo(r)).call(this,n)),n.div=document.createElement("div"),n.div.style.position="absolute",n.div.style.userSelect="none",n.map.getPanes().mapPane.appendChild(n.div),n.eventMap={},n}return So(r,t),po(r,[{key:"onResize",value:function(n){this.map.addEventListener("resize",n),this.eventMap.resize=n}},{key:"onMousemove",value:function(n){n=this.extendCallback(n),this.map.addEventListener("mousemove",n),this.eventMap.mousemove=n}},{key:"onClick",value:function(n){n=this.extendCallback(n),F_?(this.map.addEventListener("touchend",n),this.eventMap.touchend=n):(this.map.addEventListener("click",n),this.eventMap.click=n)}},{key:"onDblClick",value:function(n){n=this.extendCallback(n),this.map.addEventListener("dblclick",n),this.eventMap.dblclick=n}},{key:"onRightClick",value:function(n){n=this.extendCallback(n),this.map.addEventListener("rightclick",n),this.eventMap.rightclick=n}},{key:"changeCanvas",value:function(){var n=this.map,s=n.getSize(),c=n.getCenter();n=n.pointToOverlayPixel(c),this.div.style.left=n.x-s.width/2+"px",this.div.style.top=n.y-s.height/2+"px"}},{key:"onUpdate",value:function(n){var s=this,c=function(){s.changeCanvas(),n()};this.map.addEventListener("moveend",c),this.map.addEventListener("moving",c),this.map.addEventListener("zoomend",c),this.eventMap.moveend=c,this.eventMap.moving=c,this.eventMap.zoomend=c}},{key:"extendCallback",value:function(n){return function(s){n(dt(s,{x:s.pixel.x,y:s.pixel.y}))}}},{key:"unbind",value:function(){var n=this;Xi(this.eventMap).forEach(function(s){n.map.removeEventListener(s,n.eventMap[s])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.div}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return 0}},{key:"getHeading",value:function(){return 0}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getZoomUnits",value:function(){var n=this.getZoom();return this.map.getMapType().getZoomUnits?this.map.getMapType().getZoomUnits(n):Math.pow(2,18-n)}},{key:"getCenter",value:function(){var n=this.map.getMapType().getProjection().lngLatToPoint(this.map.getCenter());return{lng:n.x,lat:n.y}}},{key:"lnglatToMercator",value:function(n,s){return n=this.map.getMapType().getProjection().lngLatToPoint({lng:n,lat:s}),[n.x,n.y]}},{key:"mercatorToLnglat",value:function(n,s){return n=this.map.getMapType().getProjection().pointToLngLat({lng:n,lat:s}),[n.lng,n.lat]}}]),r}(x0),k_=function(t){function r(n){return $n(this,r),n=Ji(this,(r.__proto__||fo(r)).call(this,n)),n.eventMap={},n}return So(r,t),po(r,[{key:"onResize",value:function(n){window.addEventListener("resize",n),this.eventMap.resize=n}},{key:"onUpdate",value:function(n){}},{key:"unbind",value:function(){var n=this;Xi(this.eventMap).forEach(function(s){window.removeEventListener(s,n.eventMap[s])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container.getElementsByClassName("cesium-widget")[0]}},{key:"getSize",value:function(){var n=this.map;return{width:n.canvas.clientWidth,height:n.canvas.clientHeight}}},{key:"getTilt",value:function(){return 180*this.map.camera.pitch/Math.PI+90}},{key:"getHeading",value:function(){return 360-180*this.map.camera.heading/Math.PI}},{key:"getZoomUnits",value:function(){var n=this.map;return 6.8*n.scene.globe.ellipsoid.cartesianToCartographic(n.camera.position).height/6500}},{key:"getZoom",value:function(){return 10}},{key:"getCenter",value:function(){var n=this.map;return n=n.camera.pickEllipsoid(new Cesium.Cartesian2(n.canvas.clientWidth/2,n.canvas.clientHeight/2)),n=Cesium.Ellipsoid.WGS84.cartesianToCartographic(n),n=this.getMercator([180*n.longitude/Math.PI,180*n.latitude/Math.PI]),{lng:n[0],lat:n[1]}}},{key:"getMercator",value:function(n){var s=[];return s[0]=n[0]*Math.PI/180*6378137,n=n[1]*Math.PI/180,s[1]=31890685e-1*Math.log((1+Math.sin(n))/(1-Math.sin(n))),s}}]),r}(x0),G_=function(t){function r(n){return $n(this,r),n=Ji(this,(r.__proto__||fo(r)).call(this,n)),n.eventMap={},n}return So(r,t),po(r,[{key:"onResize",value:function(n){window.addEventListener("resize",n),this.eventMap.resize=n}},{key:"onUpdate",value:function(n){}},{key:"unbind",value:function(){var n=this;Xi(this.eventMap).forEach(function(s){window.removeEventListener(s,n.eventMap[s])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getZoom",value:function(){return this.map.zoom}},{key:"getCenter",value:function(){return this.map.center}}]),r}(x0),V_=function(t){function r(n,s){return $n(this,r),n=Ji(this,(r.__proto__||fo(r)).call(this,n,s)),n.eventMap={},n}return So(r,t),po(r,[{key:"onResize",value:function(n){window.addEventListener("resize",n),this.eventMap.resize=n}},{key:"onUpdate",value:function(n){}},{key:"unbind",value:function(){var n=this;Xi(this.eventMap).forEach(function(s){window.removeEventListener(s,n.eventMap[s])}),this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getCenter",value:function(){return this.map.center}}]),r}(x0),W_=function(){function t(r,n){var s=this;$n(this,t),n=n||{},n.mapType==="bmap"?this.map=new b_(r,n):n.mapType==="blank"?this.map=new G_(r,n):n.mapType==="cesium"?this.map=new k_(r,n):n.mapType==="three"?this.map=new V_(r,n):(n.mapType="bmapgl",this.map=new Q_(r,n)),this.map.type=n.mapType,this._dpr=window.devicePixelRatio,n.mapType==="bmapgl"&&(this._dpr=this.map.map.config.ratio),this.options=n||{},this.renderArr=[],(r=n.canvas)||(r=document.createElement("canvas")),this.canvas=r,this.gl=n.gl?n.gl:As(r,n),["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"].forEach(function(c){s.gl.getExtension(c)}),this.changeSize(),this.projectionMatrix=Pa.create(Float64Array),this.orthoMatrix=Pa.create(Float64Array),this.matrix=Pa.create(Float64Array),this.viewMatrix=Pa.create(Float64Array),this.pointToPixelMatrix=Pa.create(Float64Array),this.pixelToViewMatrix=Pa.create(Float64Array),this.fovy=35,this.fps=Math.min(n.fps,60)||60,this.renderTime=new Date().valueOf(),this._animation=this.animation.bind(this),this._update=this.update.bind(this),this.onInitialize(this.options.onInitialize),this.options.onRender&&this.renderArr.push(this.options.onRender),this.stateManager=new H_({gl:this.gl}),this.pickFBO=new vA(this.gl),this.transferOptions={},this.bind()}return po(t,[{key:"bind",value:function(){var r=this,n=this.map;n.onResize(function(){r.changeSize(),r.render()}),n.onUpdate(this._update),n.onClick&&n.onClick(function(s){r.onClick&&r.onClick(s)}),n.onDblClick&&n.onDblClick(function(s){r.onDblClick&&r.onDblClick(s)}),n.onRightClick&&n.onRightClick(function(s){r.onRightClick&&r.onRightClick(s)}),n.onMousemove&&n.onMousemove(function(s){r.onMousemove&&r.onMousemove(s)}),this.options.canvas||n.getContainer().appendChild(this.canvas)}},{key:"unbind",value:function(){var r=this.map;r.unbind&&r.unbind()}},{key:"setOptions",value:function(r){this.options=r}},{key:"onInitialize",value:function(r){r&&(this.transferOptions=r.bind(this)(this.gl)||{})}},{key:"bindFramebuffer",value:function(r){var n=this.gl;r?n.bindFramebuffer(n.FRAMEBUFFER,r.framebuffer):n.bindFramebuffer(n.FRAMEBUFFER,null)}},{key:"saveFramebuffer",value:function(){var r=this.gl;this.preFramebuffer=r.getParameter(r.FRAMEBUFFER_BINDING)}},{key:"restoreFramebuffer",value:function(){var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,this.preFramebuffer)}},{key:"onRender",value:function(r){this.renderArr.push(r)}},{key:"changeSize",value:function(){var r=this.canvas,n=this.options;if(r){var s=r.style,c=this.map.getSize(),h=this._dpr;r.width=c.width*h,r.height=c.height*h,s.cssText="position: absolute;left:0;top:0;width:"+c.width+"px;height:"+c.height+"px;z-index:2;",n.mapType!=="cesium"||n.canvas||(s.pointerEvents="none"),this.gl.viewport(0,0,r.width,r.height),this.pickFBO=new vA(this.gl)}}},{key:"update",value:function(){this.options.autoUpdate===!1||this.isAnimation&&60<=this.fps||this.render()}},{key:"pixelToPointIn",value:function(r){return this.map.pixelToPointIn(r)}},{key:"render",value:function(){if(this.map&&this.gl){var r=this.options,n=this.projectionMatrix,s=this.viewMatrix;if(r.mapType==="three")s=this.map.map.camera,n=s.projectionMatrix.elements,s=s.matrixWorldInverse.elements;else if(r.mapType==="cesium"){s=this.map.map;var c=s.camera.frustum.projectionMatrix;n=new Float32Array([c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]]),c=s.camera.viewMatrix,s=new Float32Array([c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]])}else this.map.map.mapType==="B_EARTH_MAP"?(n=this.map.map.getEarth().scene._camera.getProjectionMatrix(),s=this.map.map.getEarth().scene._camera.getModelViewMatrix()):(this.updateProjectionMatrix(),this.updateModelViewMatrix());for(c=Pa.multiply(this.matrix,n,s),dt(this.transferOptions,{gl:this.gl,matrix:c,pointToPixelMatrix:this.pointToPixelMatrix,pixelToViewMatrix:this.pixelToViewMatrix,projectionMatrix:n,orthoMatrix:this.orthoMatrix,viewMatrix:s,stateManager:this.stateManager}),r.mapType!=="three"&&r.mapType!=="cesium"&&r.autoUpdate!==!1&&this.clear(),r=0;r<this.renderArr.length;r++)this.renderArr[r]&&this.renderArr[r].bind(this)(this.transferOptions)}}},{key:"clear",value:function(r){var n=this.gl,s=this.options.clearColor||[0,0,0,0];n.clearColor(s[0],s[1],s[2],s[3]),r&&(r instanceof Array||(r=ys(r).unitArray()),n.clearColor(r[0],r[1],r[2],r[3])),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)}},{key:"updateProjectionMatrix",value:function(){var r=this.options.cameraNear||1,n=this.options.cameraFar||4e3;Pa.perspective(this.projectionMatrix,this.fovy*Math.PI/180,this.gl.canvas.width/this.gl.canvas.height,r,n);var s=this.map.getSize();Pa.ortho(this.orthoMatrix,-s.width/2,s.width/2,-s.height/2,s.height/2,r,n)}},{key:"updateModelViewMatrix",value:function(){var r=this.map,n=this.viewMatrix,s=this.pointToPixelMatrix,c=this.pixelToViewMatrix;Pa.identity(n),Pa.identity(s),Pa.identity(c);var h=r.getSize();Pa.translate(c,c,[0,0,Math.round(-h.height/(2*Math.tan(this.fovy*Math.PI/180/2)))]),Pa.rotate(c,c,r.getTilt()*Math.PI/180,[-1,0,0]),Pa.rotate(c,c,r.getHeading()*Math.PI/180,[0,0,-1]),h=r.getCenter();var d=this.options.pointOffset||[0,0];r=r.getZoomUnits(),Pa.translate(s,s,[(d[0]-h.lng)/r,(d[1]-h.lat)/r,0]),r=1/r,Pa.scale(s,s,[r,r,r]),Pa.multiply(n,c,s)}},{key:"destroy",value:function(){this.stopAnimation(),this.unbind();var r=this.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this.canvas.remove(),this.gl=this.canvas=null}},{key:"animation",value:function(){if(this.isAnimation){if(60<=this.fps)this.render();else{var r=new Date().valueOf(),n=Math.floor(1e3/this.fps),s=r-this.renderTime;s>n&&(this.render(),this.renderTime=r-s%n)}window.requestAnimationFrame(this._animation)}}},{key:"startAnimation",value:function(){this.isAnimation||(this.isAnimation=!0,window.requestAnimationFrame(this._animation))}},{key:"stopAnimation",value:function(){this.isAnimation=!1}}]),t}(),j_=function(){function t(r){$n(this,t),this.layers=[],this.options=r,this.webglLayer=r.webglLayer}return po(t,[{key:"addLayer",value:function(r){for(var n=!1,s=0;s<this.layers.length;s++)if(this.layers[s]===r){n=!0;break}n||(r.map=this.webglLayer.map,r.layerType==="threeLayer"?(r.setWebglLayer(this.webglLayer),n=r.getThreeLayer(),this.addLayer(n),r.initialize&&r.initialize(n)):(r.setWebglLayer(this.webglLayer),r.commonInitialize&&r.commonInitialize(this.webglLayer.gl),r.initialize&&r.initialize(this.webglLayer.gl),r.onOptionsChanged(r.getOptions(),{}),r.onDataChanged(r.getData()),r.onChanged(r.getOptions(),r.getData())),this.putInLayer(r)),this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"putInLayer",value:function(r){r.options.renderOrder===void 0&&(r.options.renderOrder=this.layers.length),this.layers.push(r),this.layers=this.layers.sort(function(n,s){return n.options.renderOrder-s.options.renderOrder})}},{key:"removeLayer",value:function(r){for(var n=0;n<this.layers.length;n++)this.layers[n]===r&&this.layers.splice(n,1);this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"showLayer",value:function(r){for(var n=0;n<this.layers.length;n++)this.layers[n]===r&&r.show();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"hideLayer",value:function(r){for(var n=0;n<this.layers.length;n++)this.layers[n]===r&&r.hide();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation()),this.webglLayer.render()}},{key:"removeAllLayers",value:function(){this.layers=[],this.webglLayer.stopAnimation(),this.webglLayer.render()}},{key:"destroyAllLayers",value:function(){for(var r=0;r<this.layers.length;r++){var n=this.layers[r];n.destroy&&n.destroy()}}},{key:"getAllLayers",value:function(){return this.layers}},{key:"getAllThreeLayers",value:function(){for(var r=[],n=0;n<this.layers.length;n++){var s=this.layers[n];s.layerType==="ThreeLayer"&&r.push(s)}return r}},{key:"isRequestAnimation",value:function(){for(var r=!1,n=0;n<this.layers.length;n++)if(this.layers[n].isRequestAnimation()){r=!0;break}return r}},{key:"beforeRender",value:function(r){r.gl&&this.webglLayer.stateManager.setDefaultState()}},{key:"afterRender",value:function(r){(r=r.gl)&&(r.bindBuffer(r.ARRAY_BUFFER,null),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),r.useProgram(null))}},{key:"renderGLLayers",value:function(r){this.webglLayer.stateManager.save();for(var n=0;n<this.layers.length;n++){var s=this.layers[n];if(s._visible===!0&&s.layerType!=="threeLayer"&&s.layerType!=="ThreeLayer"){var c=s.map.getZoom(),h=s.getOptions().zoomThreshold;h&&(c<h[0]||c>=h[1])||(this.beforeRender(r),s.render(r),this.afterRender(r))}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayer",value:function(r){this.webglLayer.stateManager.save(),this.webglLayer.stateManager.setState({blendFunc:[r.gl.SRC_ALPHA,r.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:r.gl.LESS,cullFace:!1});for(var n=0;n<this.layers.length;n++){var s=this.layers[n];if(s._visible===!0&&s.layerType==="ThreeLayer"){var c=s.map.getZoom(),h=s.getOptions().zoomThreshold;h&&(c<h[0]||c>=h[1])||s.render(r)}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayers",value:function(r){this.webglLayer.stateManager.save(),this.webglLayer.stateManager.setState({blendFunc:[r.gl.SRC_ALPHA,r.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:r.gl.LESS,cullFace:!1});for(var n=0;n<this.layers.length;n++){var s=this.layers[n];if(s._visible===!0&&s.layerType==="threeLayer"){var c=s.map.getZoom(),h=s.getOptions().zoomThreshold;h&&(c<h[0]||c>=h[1])||s.render(r)}}this.webglLayer.stateManager.restore()}},{key:"onClick",value:function(r){for(var n=this.layers.length-1;0<=n;n--){var s=this.layers[n];if(s._visible===!0&&s.layerType!=="threeLayer"&&s.layerType!=="ThreeLayer"){var c=s.map.getZoom(),h=s.getOptions().zoomThreshold;if((!h||!(c<=h[0]||c>=h[1]))&&s.options.enablePicked&&s.options.onClick&&s.pick&&(c=s.pick(r.x,r.y,"onClick"),s.options.onClick(c,r),s.options.autoSelect&&this.webglLayer.render(),r.cancelBubble===!0))break}}}},{key:"onDblClick",value:function(r){for(var n=this.layers.length-1;0<=n;n--){var s=this.layers[n];if(s._visible===!0&&s.layerType!=="threeLayer"&&s.layerType!=="ThreeLayer"){var c=s.map.getZoom(),h=s.getOptions().zoomThreshold;if((!h||!(c<=h[0]||c>=h[1]))&&s.options.enablePicked&&s.options.onDblClick&&s.pick&&(c=s.pick(r.x,r.y,"onDblClick"),s.options.onDblClick(c,r),s.options.autoSelect&&this.webglLayer.render(),r.cancelBubble===!0))break}}}},{key:"onRightClick",value:function(r){for(var n=this.layers.length-1;0<=n;n--){var s=this.layers[n];if(s._visible===!0&&s.layerType!=="threeLayer"&&s.layerType!=="ThreeLayer"){var c=s.map.getZoom(),h=s.getOptions().zoomThreshold;if((!h||!(c<=h[0]||c>=h[1]))&&s.options.enablePicked&&s.options.onRightClick&&s.pick&&(c=s.pick(r.x,r.y,"onRightClick"),s.options.onRightClick(c,r),s.options.autoSelect&&this.webglLayer.render(),r.cancelBubble===!0))break}}}},{key:"onMousemove",value:function(r){for(var n=!1,s=!1,c=this.layers.length-1;0<=c;c--){var h=this.layers[c];if(h._visible===!0&&h.layerType!=="threeLayer"&&h.layerType!=="ThreeLayer"){var d=h.map.getZoom(),f=h.getOptions().zoomThreshold;if((!f||!(d<=f[0]||d>=f[1]))&&h.options.enablePicked&&h.pick&&(h.options.onMousemove||h.options.autoSelect)&&(d=h.pick(r.x,r.y,"onMousemove"),!s&&(this.webglLayer.map.map.platform.style.cursor="default",s=d.dataIndex!==-1)&&(this.webglLayer.map.map.platform.style.cursor="pointer"),h.options.onMousemove&&h.options.onMousemove(d,r),h.options.autoSelect&&(n=!0),r.cancelBubble===!0))break}}n&&(this.webglLayer.isAnimation||this.webglLayer.render())}},{key:"destroy",value:function(){this.destroyAllLayers(),this.removeAllLayers()}}]),t}();(function(){function t(r){var n=this;$n(this,t),this.options={autoUpdate:!0},this._visible=!0,dt(this.options,r);var s=r.pointOffset;this.webglLayer=r.webglLayer||new W_(r.map,this.options),this.layerManager=new j_({autoUpdate:this.options.autoUpdate,webglLayer:this.webglLayer}),this.effectManager=new z_(this.webglLayer.gl),this.webglRender={render:function(){}},this.options.effects&&this.effectManager.setEffects([this.webglRender].concat(this.options.effects)),this.webglLayer.onRender(function(c){n._render(c)}),this.webglLayer.onClick=function(c){n._visible&&n.layerManager.onClick(c)},this.webglLayer.onDblClick=function(c){n._visible&&n.layerManager.onDblClick(c)},this.webglLayer.onRightClick=function(c){n._visible&&n.layerManager.onRightClick(c)},this.webglLayer.onMousemove=function(c){n._visible&&n.layerManager.onMousemove(c)},s||this.webglLayer.options.mapType==="cesium"||(s=this.webglLayer.map.getCenter(),this.webglLayer.options.pointOffset=[s.lng,s.lat]),this.webglLayer.map.onResize(function(){n.effectManager.onResize()}),(this.postProcessing=r.postProcessing)&&(this.postProcessing.setWebglLayer(this.webglLayer),r=this.postProcessing.getThreeLayer(),this.addLayer(r),this.postProcessing.initialize(r),r.postProcessing=this.postProcessing)}return po(t,[{key:"renderCanvas",value:function(r){var n=this;this.postProcessing?this.postProcessing.addRender(function(){n.layerManager.renderGLLayers(r)}):this.layerManager.renderGLLayers(r),this.layerManager.renderThreeLayers(r),this.layerManager.renderThreeLayer(r)}},{key:"render",value:function(){this.webglLayer&&this.webglLayer.render()}},{key:"_render",value:function(r){var n=this;if(this._visible){var s=this.options.effects;s&&0<s.length?(this.webglRender.render=function(){n.renderCanvas(r)},this.effectManager.render()):(this.webglLayer.saveFramebuffer(),this.renderCanvas(r),this.webglLayer.restoreFramebuffer())}}},{key:"onRender",value:function(r){this.webglLayer.onRender(r)}},{key:"destroy",value:function(){this.stopAnimation(),this.layerManager.destroy(),this.effectManager.destroy(),this.webglLayer.destroy()}},{key:"isRequestAnimation",value:function(){return this.layerManager.isRequestAnimation()}},{key:"startAnimation",value:function(){this.webglLayer.startAnimation()}},{key:"stopAnimation",value:function(){this.webglLayer.stopAnimation()}},{key:"show",value:function(){this._visible!==!0&&(this._visible=!0,this.webglLayer.render(),this.isRequestAnimation()&&this.startAnimation())}},{key:"hide",value:function(){this._visible!==!1&&(this._visible=!1,this.stopAnimation(),this.webglLayer.clear())}},{key:"showLayer",value:function(r){this.layerManager.showLayer(r)}},{key:"hideLayer",value:function(r){this.layerManager.hideLayer(r)}},{key:"add",value:function(r){this.addLayer(r)}},{key:"remove",value:function(r){this.removeLayer(r)}},{key:"addLayer",value:function(r){this.layerManager.addLayer(r)}},{key:"removeLayer",value:function(r){this.layerManager.removeLayer(r)}},{key:"removeAllLayers",value:function(){this.layerManager.removeAllLayers()}},{key:"getAllLayers",value:function(){return this.layerManager.getAllLayers()}},{key:"getAllThreeLayers",value:function(){return this.layerManager.getAllThreeLayers()}}]),t})();var d2=function(){function t(r){$n(this,t),this._visible=!0,this.options=this.getCommonDefaultOptions(),this.options=dt(this.options,this.getDefaultOptions()),this.autoUpdate=!1,this.options=dt(this.options,r),this.options.data&&(this.data=this.options.data,delete this.options.data)}return po(t,[{key:"getCommonDefaultOptions",value:function(){return{}}},{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(r){}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy()}},{key:"show",value:function(){this._visible=!0}},{key:"hide",value:function(){this._visible=!1}},{key:"render",value:function(){}},{key:"clear",value:function(){this.setData([])}},{key:"setData",value:function(r,n){n=n||{},this.data=r,this.onDataChanged&&this.onDataChanged(this.getData()),this.onChanged&&this.onChanged(this.getOptions(),this.getData(),n),n.autoRender!==!1&&this.webglLayer&&this.webglLayer.render()}},{key:"getData",value:function(){return this.data||[]}},{key:"setOptions",value:function(r,n){r=r||{},n=n||{};var s=dt({},this.getOptions());dt(this.options,r),this.onOptionsChanged&&this.onOptionsChanged(this.getOptions(),s),this.onChanged&&this.onChanged(this.getOptions(),this.getData(),n),r.data?(this.setData(r.data,n),delete r.data):n.autoRender!==!1&&this.webglLayer&&this.webglLayer.render()}},{key:"getOptions",value:function(){return this.options||{}}},{key:"onOptionsChanged",value:function(r,n){}},{key:"onDataChanged",value:function(r){}},{key:"onChanged",value:function(r,n){}},{key:"onDestroy",value:function(){}},{key:"lnglatToMercator",value:function(r,n){}},{key:"setWebglLayer",value:function(r){this.webglLayer=r}},{key:"getWebglLayer",value:function(){return this.webglLayer}},{key:"isRequestAnimation",value:function(){return this.autoUpdate}}]),t}(),X_=Ho("iterator"),K_=Jn.isIterable=function(t){return t=Object(t),t[X_]!==void 0||"@@iterator"in t||Oo.hasOwnProperty(lh(t))},w0=Ot(function(t){t.exports={default:K_,__esModule:!0}});Gt(w0);var Y_=Jn.getIterator=function(t){var r=df(t);if(typeof r!="function")throw TypeError(t+" is not iterable!");return Us(r.call(t))},C0=Ot(function(t){t.exports={default:Y_,__esModule:!0}});Gt(C0);var Z_=Ot(function(t,r){r.__esModule=!0;var n=w0&&w0.__esModule?w0:{default:w0},s=C0&&C0.__esModule?C0:{default:C0};r.default=function(){return function(c,h){if(Array.isArray(c))return c;if((0,n.default)(Object(c))){var d=[],f=!0,x=!1,E=void 0;try{for(var N=(0,s.default)(c),C;!(f=(C=N.next()).done)&&(d.push(C.value),!h||d.length!==h);f=!0);}catch(I){x=!0,E=I}finally{try{!f&&N.return&&N.return()}finally{if(x)throw E}}return d}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),nw=Gt(Z_),J_=function(t){function r(n){return $n(this,r),n=Ji(this,(r.__proto__||fo(r)).call(this,n)),n.pickedColor=[-1,-1,-1],n}return So(r,t),po(r,[{key:"getCommonDefaultOptions",value:function(){return{pickWidth:1,pickHeight:1,blend:"default",zIndex:0,zoomThreshold:[0,30],repeat:!1,enablePicked:!1,autoSelect:!1,selectedIndex:-1,selectedColor:"rgba(20, 20, 200, 1.0)"}}},{key:"commonInitialize",value:function(n){var s=this.getOptions();this.gl=n,s.enablePicked&&(this.pickBuffer=new y0({gl:n,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}))}},{key:"getCommonAttributes",value:function(){var n=[];return this.getOptions().enablePicked&&n.push({name:"aPickColor",buffer:this.pickBuffer,size:3,type:"FLOAT",stride:12,offset:0}),n}},{key:"getProperty",value:function(n,s,c){return Object.prototype.toString.call(s)==="[object Function]"?s(c):(s=c[n]||s,"properties"in c&&n in c.properties&&(s=c.properties[n]),s)}},{key:"normizedColor",value:function(n){var s=n;return n instanceof Array||(s=ys(n).unitArray()),s[3]===void 0&&(s[3]=1),s}},{key:"normizedPoint",value:function(n){var s=this.getPointOffset();if(!n||n[0]===void 0||n[1]===void 0)return[s[0],s[1],0];var c=Number(n[0]),h=Number(n[1]);-180<=c&&180>=c&&-90<=h&&90>=h&&(h=this.webglLayer.map.lnglatToMercator(c,h),c=h[0],h=h[1]);var d=Number(n[2])||0;return this.webglLayer&&this.webglLayer.options.mapType==="cesium"&&window.Cesium?(c=this.convertLngLat([c,h]),d=window.Cesium.Cartesian3.fromDegrees(c[0],c[1],d),c=d.x,h=d.y,d=d.z):this.webglLayer&&this.webglLayer.options.mapType==="bmapgl"&&this.webglLayer.map.map.mapType==="B_EARTH_MAP"&&(c=this.convertLngLat([c,h]),d=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:c[0],lat:c[1]}),c=d.x,h=d.y,d=d.z),3<n.length?[c-s[0],h-s[1],d].concat(A2(n.slice(3))):[c-s[0],h-s[1],d]}},{key:"convertLngLat",value:function(n){return[n[0]/2003750834e-2*180,180/Math.PI*(2*Math.atan(Math.exp(n[1]/2003750834e-2*180*Math.PI/180))-Math.PI/2)]}},{key:"getPointOffset",value:function(){var n=[0,0],s=this.getOptions();return this.webglLayer&&this.webglLayer.options.pointOffset?n=this.webglLayer.options.pointOffset:s.pointOffset&&(n=s.pointOffset),n}},{key:"indexToRgb",value:function(n){n++;var s=Math.floor(n/65536);n-=65536*s;var c=Math.floor(n/256);return[n-256*c,c,s]}},{key:"rgbToIndex",value:function(n){for(var s=n.length/4,c=Math.floor(s/2),h=function(N){return n[N]+256*n[N+1]+65536*n[N+2]-1},d=0;;d++){var f=c+d,x=c-d;if(f===x){if(f=h(4*f),-1<f)return f}else{if(f<s){var E=h(4*f);if(-1<E)return E}if(0<=x&&(E=h(4*x),-1<E))return E;if(f>=s&&0>x)break}}return-1}},{key:"getCommonUniforms",value:function(n){n=n.isPickRender;var s=this.getOptions(),c={};if(s.enablePicked){var h=0<=s.selectedIndex?s.selectedIndex:-1;h=s.autoSelect?this.pickedColor:this.indexToRgb(h),c=dt(c,{uSelectedColor:this.normizedColor(s.selectedColor),uEnablePicked:s.enablePicked,uPickedColor:h.map(function(d){return d/255}),uIsPickRender:!!n})}return c}},{key:"pick",value:function(n,s,c){var h=this.getOptions(),d=this.gl,f=this.webglLayer._dpr;this.webglLayer.saveFramebuffer(),this.webglLayer.bindFramebuffer(this.webglLayer.pickFBO),this.webglLayer.clear(),this.render({gl:d,isPickRender:!0,matrix:this.webglLayer.matrix,projectionMatrix:this.webglLayer.projectionMatrix,viewMatrix:this.webglLayer.viewMatrix,orthoMatrix:this.webglLayer.orthoMatrix});var x=new Uint8Array(4*h.pickWidth*h.pickHeight);return d.readPixels(n*f-Math.floor(h.pickWidth/2),d.canvas.height-s*f-Math.floor(h.pickHeight/2),h.pickWidth,h.pickHeight,d.RGBA,d.UNSIGNED_BYTE,x),n=this.rgbToIndex(x),this.pickAfter&&(n=this.pickAfter(x,n+1)),this.setPickedIndex&&this.setPickedIndex(n,c),c=this.getData(),this.pickedColor=[x[0],x[1],x[2]],this.webglLayer.restoreFramebuffer(),{dataIndex:n,dataItem:c[n]}}},{key:"setGLState",value:function(n){this.webglLayer.stateManager.setState(n,this.options)}},{key:"addMultipleCoords",value:function(n,s,c){if(!this.options.repeat||!this.webglLayer||this.webglLayer.options.mapType!=="bmapgl"||this.webglLayer.map.map.mapType==="B_EARTH_MAP")return[n];var h=this.webglLayer.map.map;s=s||h.getZoom();var d=c?h.worldSize(s):4007545274461451e-8;if(s=function(S){return[[S[0]-d,S[1],S[2]||0],[S[0]+d,S[1],S[2]||0]]},n instanceof Array&&!(n[0]instanceof Array))return s=s(n),s=nw(s,2),[n,s[0],s[1]];if(n instanceof Array&&n[0]instanceof Array&&!(n[0][0]instanceof Array)){c=[],h=[];for(var f=0;f<n.length;f++){var x=s(n[f]);x=nw(x,2);var E=x[1];c.push(x[0]),h.push(E)}return[n,c,h]}for(c=[],h=[],f=0;f<n.length;f++){x=[],E=[];for(var N=0;N<n[f].length;N++){var C=s(n[f][N]);C=nw(C,2);var I=C[1];x.push(C[0]),E.push(I)}c.push(x),h.push(E)}return[n,c,h]}}]),r}(d2),g2=Ot(function(t,r){(function(n,s){s(r)})(Tn,function(n){function s(){}function c(e,o){this.x=e||0,this.y=o||0}function h(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function d(e,o,l,g,w,B,L,z,V,j){Object.defineProperty(this,"id",{value:GB++}),this.uuid=ii.generateUUID(),this.name="",this.image=e!==void 0?e:d.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=o!==void 0?o:d.DEFAULT_MAPPING,this.wrapS=l!==void 0?l:1001,this.wrapT=g!==void 0?g:1001,this.magFilter=w!==void 0?w:1006,this.minFilter=B!==void 0?B:1008,this.anisotropy=V!==void 0?V:1,this.format=L!==void 0?L:1023,this.internalFormat=null,this.type=z!==void 0?z:1009,this.offset=new c(0,0),this.repeat=new c(1,1),this.center=new c(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new h,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=j!==void 0?j:3e3,this.version=0,this.onUpdate=null}function f(e,o,l,g){this.x=e||0,this.y=o||0,this.z=l||0,this.w=g!==void 0?g:1}function x(e,o,l){this.width=e,this.height=o,this.scissor=new f(0,0,e,o),this.scissorTest=!1,this.viewport=new f(0,0,e,o),l=l||{},this.texture=new d(void 0,l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=o,this.texture.generateMipmaps=l.generateMipmaps!==void 0?l.generateMipmaps:!1,this.texture.minFilter=l.minFilter!==void 0?l.minFilter:1006,this.depthBuffer=l.depthBuffer!==void 0?l.depthBuffer:!0,this.stencilBuffer=l.stencilBuffer!==void 0?l.stencilBuffer:!0,this.depthTexture=l.depthTexture!==void 0?l.depthTexture:null}function E(e,o,l){x.call(this,e,o,l),this.samples=4}function N(e,o,l,g){this._x=e||0,this._y=o||0,this._z=l||0,this._w=g!==void 0?g:1}function C(e,o,l){this.x=e||0,this.y=o||0,this.z=l||0}function I(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function S(e,o,l,g){this._x=e||0,this._y=o||0,this._z=l||0,this._order=g||S.DefaultOrder}function F(){this.mask=1}function D(){Object.defineProperty(this,"id",{value:jB++}),this.uuid=ii.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=D.DefaultUp.clone();var e=new C,o=new S,l=new N,g=new C(1,1,1);o._onChange(function(){l.setFromEuler(o,!1)}),l._onChange(function(){o.setFromQuaternion(l,void 0,!1)}),vn(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:g},modelViewMatrix:{value:new I},normalMatrix:{value:new h}}),this.matrix=new I,this.matrixWorld=new I,this.matrixAutoUpdate=D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new F,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function K(){D.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.environment=this.background=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Z(e,o){this.min=e!==void 0?e:new C(Infinity,Infinity,Infinity),this.max=o!==void 0?o:new C(-Infinity,-Infinity,-Infinity)}function $(e,o,l,g,w){var B,L=0;for(B=e.length-3;L<=B;L+=3){Og.fromArray(e,L);var z=w.x*Math.abs(Og.x)+w.y*Math.abs(Og.y)+w.z*Math.abs(Og.z),V=o.dot(Og),j=l.dot(Og),et=g.dot(Og);if(Math.max(-Math.max(V,j,et),Math.min(V,j,et))>z)return!1}return!0}function st(e,o){this.center=e!==void 0?e:new C,this.radius=o!==void 0?o:-1}function ht(e,o){this.origin=e!==void 0?e:new C,this.direction=o!==void 0?o:new C(0,0,-1)}function Et(e,o){this.normal=e!==void 0?e:new C(1,0,0),this.constant=o!==void 0?o:0}function It(e,o,l){this.a=e!==void 0?e:new C,this.b=o!==void 0?o:new C,this.c=l!==void 0?l:new C}function Bt(e,o,l){return o===void 0&&l===void 0?this.set(e):this.setRGB(e,o,l)}function Xt(e,o,l){return 0>l&&(l+=1),1<l&&--l,l<1/6?e+6*(o-e)*l:.5>l?o:l<2/3?e+6*(o-e)*(2/3-l):e}function Yt(e){return .04045>e?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function fe(e){return .0031308>e?12.92*e:1.055*Math.pow(e,.41666)-.055}function te(e,o,l,g,w,B){this.a=e,this.b=o,this.c=l,this.normal=g&&g.isVector3?g:new C,this.vertexNormals=Array.isArray(g)?g:[],this.color=w&&w.isColor?w:new Bt,this.vertexColors=Array.isArray(w)?w:[],this.materialIndex=B!==void 0?B:0}function le(){Object.defineProperty(this,"id",{value:tE++}),this.uuid=ii.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=this.flatShading=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.version=0}function tr(e){le.call(this),this.type="MeshBasicMaterial",this.color=new Bt(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphTargets=this.skinning=!1,this.setValues(e)}function Me(e,o,l){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=o,this.count=e!==void 0?e.length/o:0,this.normalized=l===!0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function xr(e,o,l){Me.call(this,new Int8Array(e),o,l)}function br(e,o,l){Me.call(this,new Uint8Array(e),o,l)}function _r(e,o,l){Me.call(this,new Uint8ClampedArray(e),o,l)}function Gn(e,o,l){Me.call(this,new Int16Array(e),o,l)}function Dr(e,o,l){Me.call(this,new Uint16Array(e),o,l)}function Ct(e,o,l){Me.call(this,new Int32Array(e),o,l)}function Mt(e,o,l){Me.call(this,new Uint32Array(e),o,l)}function _t(e,o,l){Me.call(this,new Float32Array(e),o,l)}function Pt(e,o,l){Me.call(this,new Float64Array(e),o,l)}function at(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function vt(e){if(e.length===0)return-Infinity;for(var o=e[0],l=1,g=e.length;l<g;++l)e[l]>o&&(o=e[l]);return o}function yt(){Object.defineProperty(this,"id",{value:eE+=2}),this.uuid=ii.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:Infinity},this.userData={}}function Dt(e,o){D.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new yt,this.material=o!==void 0?o:new tr,this.updateMorphTargets()}function Jt(e,o,l,g,w,B,L,z){return(o.side===1?g.intersectTriangle(L,B,w,!0,z):g.intersectTriangle(w,B,L,o.side!==2,z))===null?null:(Yy.copy(z),Yy.applyMatrix4(e.matrixWorld),o=l.ray.origin.distanceTo(Yy),o<l.near||o>l.far?null:{distance:o,point:Yy.clone(),object:e})}function ae(e,o,l,g,w,B,L,z,V,j,et,tt){if(Bd.fromBufferAttribute(w,j),Ed.fromBufferAttribute(w,et),Id.fromBufferAttribute(w,tt),w=e.morphTargetInfluences,o.morphTargets&&B&&w){jy.set(0,0,0),Xy.set(0,0,0),Ky.set(0,0,0);for(var it=0,rt=B.length;it<rt;it++){var At=w[it],mt=B[it];At!==0&&(eC.fromBufferAttribute(mt,j),rC.fromBufferAttribute(mt,et),nC.fromBufferAttribute(mt,tt),L?(jy.addScaledVector(eC,At),Xy.addScaledVector(rC,At),Ky.addScaledVector(nC,At)):(jy.addScaledVector(eC.sub(Bd),At),Xy.addScaledVector(rC.sub(Ed),At),Ky.addScaledVector(nC.sub(Id),At)))}Bd.add(jy),Ed.add(Xy),Id.add(Ky)}return e.isSkinnedMesh&&(e.boneTransform(j,Bd),e.boneTransform(et,Ed),e.boneTransform(tt,Id)),(e=Jt(e,o,l,g,Bd,Ed,Id,c1))&&(z&&(Pv.fromBufferAttribute(z,j),Uv.fromBufferAttribute(z,et),Dv.fromBufferAttribute(z,tt),e.uv=It.getUV(c1,Bd,Ed,Id,Pv,Uv,Dv,new c)),V&&(Pv.fromBufferAttribute(V,j),Uv.fromBufferAttribute(V,et),Dv.fromBufferAttribute(V,tt),e.uv2=It.getUV(c1,Bd,Ed,Id,Pv,Uv,Dv,new c)),z=new te(j,et,tt),It.getNormal(Bd,Ed,Id,z.normal),e.face=z),e}function xt(){Object.defineProperty(this,"id",{value:rE+=2}),this.uuid=ii.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function Se(e){var o={},l;for(l in e){o[l]={};for(var g in e[l]){var w=e[l][g];w&&(w.isColor||w.isMatrix3||w.isMatrix4||w.isVector2||w.isVector3||w.isVector4||w.isTexture)?o[l][g]=w.clone():Array.isArray(w)?o[l][g]=w.slice():o[l][g]=w}}return o}function Re(e){for(var o={},l=0;l<e.length;l++){var g=Se(e[l]),w;for(w in g)o[w]=g[w]}return o}function Te(e){le.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function ye(){D.call(this),this.type="Camera",this.matrixWorldInverse=new I,this.projectionMatrix=new I,this.projectionMatrixInverse=new I}function He(e,o,l,g){ye.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=l!==void 0?l:.1,this.far=g!==void 0?g:2e3,this.focus=10,this.aspect=o!==void 0?o:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function kr(e,o,l){if(D.call(this),this.type="CubeCamera",l.isWebGLCubeRenderTarget!==!0)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{this.renderTarget=l;var g=new He(90,1,e,o);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new C(1,0,0)),this.add(g);var w=new He(90,1,e,o);w.layers=this.layers,w.up.set(0,-1,0),w.lookAt(new C(-1,0,0)),this.add(w);var B=new He(90,1,e,o);B.layers=this.layers,B.up.set(0,0,1),B.lookAt(new C(0,1,0)),this.add(B);var L=new He(90,1,e,o);L.layers=this.layers,L.up.set(0,0,-1),L.lookAt(new C(0,-1,0)),this.add(L);var z=new He(90,1,e,o);z.layers=this.layers,z.up.set(0,-1,0),z.lookAt(new C(0,0,1)),this.add(z);var V=new He(90,1,e,o);V.layers=this.layers,V.up.set(0,-1,0),V.lookAt(new C(0,0,-1)),this.add(V),this.update=function(j,et){this.parent===null&&this.updateMatrixWorld();var tt=j.xr.enabled,it=j.getRenderTarget();j.xr.enabled=!1;var rt=l.texture.generateMipmaps;l.texture.generateMipmaps=!1,j.setRenderTarget(l,0),j.render(et,g),j.setRenderTarget(l,1),j.render(et,w),j.setRenderTarget(l,2),j.render(et,B),j.setRenderTarget(l,3),j.render(et,L),j.setRenderTarget(l,4),j.render(et,z),l.texture.generateMipmaps=rt,j.setRenderTarget(l,5),j.render(et,V),j.setRenderTarget(it),j.xr.enabled=tt},this.clear=function(j,et,tt,it){for(var rt=j.getRenderTarget(),At=0;6>At;At++)j.setRenderTarget(l,At),j.clear(et,tt,it);j.setRenderTarget(rt)}}}function cn(e,o,l){$p(o)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),o=l),x.call(this,e,e,o)}function Pe(e,o,l,g,w,B,L,z,V,j,et,tt){d.call(this,null,B,L,z,V,j,g,w,et,tt),this.image={data:e||null,width:o||1,height:l||1},this.magFilter=V!==void 0?V:1003,this.minFilter=j!==void 0?j:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1,this.needsUpdate=!0}function Br(e,o,l,g,w,B){this.planes=[e!==void 0?e:new Et,o!==void 0?o:new Et,l!==void 0?l:new Et,g!==void 0?g:new Et,w!==void 0?w:new Et,B!==void 0?B:new Et]}function Bn(){function e(w,B){l!==!1&&(g(w,B),o.requestAnimationFrame(e))}var o=null,l=!1,g=null;return{start:function(){l!==!0&&g!==null&&(o.requestAnimationFrame(e),l=!0)},stop:function(){l=!1},setAnimationLoop:function(w){g=w},setContext:function(w){o=w}}}function dr(e,o){function l(B,L){var z=B.array,V=B.usage,j=e.createBuffer();return e.bindBuffer(L,j),e.bufferData(L,z,V),B.onUploadCallback(),L=5126,z instanceof Float32Array?L=5126:z instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):z instanceof Uint16Array?L=5123:z instanceof Int16Array?L=5122:z instanceof Uint32Array?L=5125:z instanceof Int32Array?L=5124:z instanceof Int8Array?L=5120:z instanceof Uint8Array&&(L=5121),{buffer:j,type:L,bytesPerElement:z.BYTES_PER_ELEMENT,version:B.version}}var g=o.isWebGL2,w=new mi;return{get:function(B){return B.isInterleavedBufferAttribute&&(B=B.data),w.get(B)},remove:function(B){B.isInterleavedBufferAttribute&&(B=B.data);var L=w.get(B);L&&(e.deleteBuffer(L.buffer),w.delete(B))},update:function(B,L){B.isInterleavedBufferAttribute&&(B=B.data);var z=w.get(B);if(z===void 0)w.set(B,l(B,L));else if(z.version<B.version){var V=B.array,j=B.updateRange;e.bindBuffer(L,z.buffer),j.count===-1?e.bufferSubData(L,0,V):(g?e.bufferSubData(L,j.offset*V.BYTES_PER_ELEMENT,V,j.offset,j.count):e.bufferSubData(L,j.offset*V.BYTES_PER_ELEMENT,V.subarray(j.offset,j.offset+j.count)),j.count=-1),z.version=B.version}}}}function ts(e,o,l,g){xt.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:o,widthSegments:l,heightSegments:g},this.fromBufferGeometry(new li(e,o,l,g)),this.mergeVertices()}function li(e,o,l,g){yt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:o,widthSegments:l,heightSegments:g},e=e||1,o=o||1;var w=e/2,B=o/2;l=Math.floor(l)||1,g=Math.floor(g)||1;var L=l+1,z=g+1,V=e/l,j=o/g,et=[],tt=[],it=[],rt=[];for(e=0;e<z;e++){var At=e*j-B;for(o=0;o<L;o++)tt.push(o*V-w,-At,0),it.push(0,0,1),rt.push(o/l),rt.push(1-e/g)}for(e=0;e<g;e++)for(o=0;o<l;o++)w=o+L*(e+1),B=o+1+L*(e+1),z=o+1+L*e,et.push(o+L*e,w,z),et.push(w,B,z);this.setIndex(et),this.setAttribute("position",new _t(tt,3)),this.setAttribute("normal",new _t(it,3)),this.setAttribute("uv",new _t(rt,2))}function Ja(e,o,l,g){function w(it,rt){o.buffers.color.setClear(it.r,it.g,it.b,rt,g)}var B=new Bt(0),L=0,z,V,j=null,et=0,tt=null;return{getClearColor:function(){return B},setClearColor:function(it,rt){B.set(it),L=rt!==void 0?rt:1,w(B,L)},getClearAlpha:function(){return L},setClearAlpha:function(it){L=it,w(B,L)},render:function(it,rt,At,mt){rt=rt.background,At=e.xr,(At=At.getSession&&At.getSession())&&At.environmentBlendMode==="additive"&&(rt=null),rt===null?w(B,L):rt&&rt.isColor&&(w(rt,1),mt=!0),(e.autoClear||mt)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),rt&&(rt.isCubeTexture||rt.isWebGLCubeRenderTarget||rt.mapping===306)?(V===void 0&&(V=new Dt(new f1(1,1,1),new Te({type:"BackgroundCubeMaterial",uniforms:Se(Hc.cube.uniforms),vertexShader:Hc.cube.vertexShader,fragmentShader:Hc.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),V.geometry.deleteAttribute("normal"),V.geometry.deleteAttribute("uv"),V.onBeforeRender=function(Vt,re,qt){this.matrixWorld.copyPosition(qt.matrixWorld)},Object.defineProperty(V.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(V)),mt=rt.isWebGLCubeRenderTarget?rt.texture:rt,V.material.uniforms.envMap.value=mt,V.material.uniforms.flipEnvMap.value=mt.isCubeTexture?-1:1,(j!==rt||et!==mt.version||tt!==e.toneMapping)&&(V.material.needsUpdate=!0,j=rt,et=mt.version,tt=e.toneMapping),it.unshift(V,V.geometry,V.material,0,0,null)):rt&&rt.isTexture&&(z===void 0&&(z=new Dt(new li(2,2),new Te({type:"BackgroundMaterial",uniforms:Se(Hc.background.uniforms),vertexShader:Hc.background.vertexShader,fragmentShader:Hc.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),z.geometry.deleteAttribute("normal"),Object.defineProperty(z.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(z)),z.material.uniforms.t2D.value=rt,rt.matrixAutoUpdate===!0&&rt.updateMatrix(),z.material.uniforms.uvTransform.value.copy(rt.matrix),(j!==rt||et!==rt.version||tt!==e.toneMapping)&&(z.material.needsUpdate=!0,j=rt,et=rt.version,tt=e.toneMapping),it.unshift(z,z.geometry,z.material,0,0,null))}}}function Hl(e,o,l,g){var w=g.isWebGL2,B;this.setMode=function(L){B=L},this.render=function(L,z){e.drawArrays(B,L,z),l.update(z,B)},this.renderInstances=function(L,z,V,j){if(j!==0){if(w){L=e;var et="drawArraysInstanced"}else if(L=o.get("ANGLE_instanced_arrays"),et="drawArraysInstancedANGLE",L===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}L[et](B,z,V,j),l.update(V,B,j)}}}function Df(e,o,l){function g(de){if(de==="highp"){if(0<e.getShaderPrecisionFormat(35633,36338).precision&&0<e.getShaderPrecisionFormat(35632,36338).precision)return"highp";de="mediump"}return de==="mediump"&&0<e.getShaderPrecisionFormat(35633,36337).precision&&0<e.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var w,B=typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&e instanceof WebGL2ComputeRenderingContext,L=l.precision!==void 0?l.precision:"highp",z=g(L);z!==L&&(console.warn("THREE.WebGLRenderer:",L,"not supported, using",z,"instead."),L=z),l=l.logarithmicDepthBuffer===!0,z=e.getParameter(34930);var V=e.getParameter(35660),j=e.getParameter(3379),et=e.getParameter(34076),tt=e.getParameter(34921),it=e.getParameter(36347),rt=e.getParameter(36348),At=e.getParameter(36349),mt=0<V,Vt=B||!!o.get("OES_texture_float"),re=mt&&Vt,qt=B?e.getParameter(36183):0;return{isWebGL2:B,getMaxAnisotropy:function(){if(w!==void 0)return w;var de=o.get("EXT_texture_filter_anisotropic");return w=de!==null?e.getParameter(de.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:g,precision:L,logarithmicDepthBuffer:l,maxTextures:z,maxVertexTextures:V,maxTextureSize:j,maxCubemapSize:et,maxAttributes:tt,maxVertexUniforms:it,maxVaryings:rt,maxFragmentUniforms:At,vertexTextures:mt,floatFragmentTextures:Vt,floatVertexTextures:re,maxSamples:qt}}function cu(){function e(){j.value!==g&&(j.value=g,j.needsUpdate=0<w),l.numPlanes=w,l.numIntersection=0}function o(et,tt,it,rt){var At=et!==null?et.length:0,mt=null;if(At!==0){if(mt=j.value,rt!==!0||mt===null)for(rt=it+4*At,tt=tt.matrixWorldInverse,V.getNormalMatrix(tt),(mt===null||mt.length<rt)&&(mt=new Float32Array(rt)),rt=0;rt!==At;++rt,it+=4)z.copy(et[rt]).applyMatrix4(tt,V),z.normal.toArray(mt,it),mt[it+3]=z.constant;j.value=mt,j.needsUpdate=!0}return l.numPlanes=At,l.numIntersection=0,mt}var l=this,g=null,w=0,B=!1,L=!1,z=new Et,V=new h,j={value:null,needsUpdate:!1};this.uniform=j,this.numIntersection=this.numPlanes=0,this.init=function(et,tt,it){var rt=et.length!==0||tt||w!==0||B;return B=tt,g=o(et,it,0),w=et.length,rt},this.beginShadows=function(){L=!0,o(null)},this.endShadows=function(){L=!1,e()},this.setState=function(et,tt,it,rt,At,mt){if(!B||et===null||et.length===0||L&&!it)L?o(null):e();else{it=L?0:w;var Vt=4*it,re=At.clippingState||null;for(j.value=re,re=o(et,rt,Vt,mt),et=0;et!==Vt;++et)re[et]=g[et];At.clippingState=re,this.numIntersection=tt?this.numPlanes:0,this.numPlanes+=it}}}function Tc(e){var o={};return{get:function(l){if(o[l]!==void 0)return o[l];switch(l){case"WEBGL_depth_texture":var g=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":g=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":g=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":g=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:g=e.getExtension(l)}return g===null&&console.warn("THREE.WebGLRenderer: "+l+" extension not supported."),o[l]=g}}}function Sc(e,o,l){function g(z){var V=z.target;z=B.get(V),z.index!==null&&o.remove(z.index);for(var j in z.attributes)o.remove(z.attributes[j]);V.removeEventListener("dispose",g),B.delete(V),(j=L.get(z))&&(o.remove(j),L.delete(z)),l.memory.geometries--}function w(z){var V=[],j=z.index,et=z.attributes.position;if(j!==null){var tt=j.array;j=j.version,et=0;for(var it=tt.length;et<it;et+=3){var rt=tt[et+0],At=tt[et+1],mt=tt[et+2];V.push(rt,At,At,mt,mt,rt)}}else for(tt=et.array,j=et.version,et=0,it=tt.length/3-1;et<it;et+=3)rt=et+0,At=et+1,mt=et+2,V.push(rt,At,At,mt,mt,rt);V=new(65535<vt(V)?Mt:Dr)(V,1),V.version=j,o.update(V,34963),(tt=L.get(z))&&o.remove(tt),L.set(z,V)}var B=new mi,L=new mi;return{get:function(z,V){var j=B.get(V);return j||(V.addEventListener("dispose",g),V.isBufferGeometry?j=V:V.isGeometry&&(V._bufferGeometry===void 0&&(V._bufferGeometry=new yt().setFromObject(z)),j=V._bufferGeometry),B.set(V,j),l.memory.geometries++,j)},update:function(z){var V=z.index,j=z.attributes;V!==null&&o.update(V,34963);for(var et in j)o.update(j[et],34962);z=z.morphAttributes;for(et in z){V=z[et],j=0;for(var tt=V.length;j<tt;j++)o.update(V[j],34962)}},getWireframeAttribute:function(z){var V=L.get(z);if(V){var j=z.index;j!==null&&V.version<j.version&&w(z)}else w(z);return L.get(z)}}}function kA(e,o,l,g){var w=g.isWebGL2,B,L,z;this.setMode=function(V){B=V},this.setIndex=function(V){L=V.type,z=V.bytesPerElement},this.render=function(V,j){e.drawElements(B,j,L,V*z),l.update(j,B)},this.renderInstances=function(V,j,et,tt){if(tt!==0){if(w){V=e;var it="drawElementsInstanced"}else if(V=o.get("ANGLE_instanced_arrays"),it="drawElementsInstancedANGLE",V===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}V[it](B,et,L,j*z,tt),l.update(et,B,tt)}}}function Mh(e){var o={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:o,programs:null,autoReset:!0,reset:function(){o.frame++,o.calls=0,o.triangles=0,o.points=0,o.lines=0},update:function(l,g,w){switch(w=w||1,o.calls++,g){case 4:o.triangles+=l/3*w;break;case 1:o.lines+=l/2*w;break;case 3:o.lines+=w*(l-1);break;case 2:o.lines+=w*l;break;case 0:o.points+=w*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",g)}}}}function Ua(e,o){return Math.abs(o[1])-Math.abs(e[1])}function q1(e){var o={},l=new Float32Array(8);return{update:function(g,w,B,L){var z=g.morphTargetInfluences,V=z===void 0?0:z.length;if(g=o[w.id],g===void 0){g=[];for(var j=0;j<V;j++)g[j]=[j,0];o[w.id]=g}var et=B.morphTargets&&w.morphAttributes.position;for(B=B.morphNormals&&w.morphAttributes.normal,j=0;j<V;j++){var tt=g[j];tt[1]!==0&&(et&&w.deleteAttribute("morphTarget"+j),B&&w.deleteAttribute("morphNormal"+j))}for(j=0;j<V;j++)tt=g[j],tt[0]=j,tt[1]=z[j];for(g.sort(Ua),j=z=0;8>j;j++){if((tt=g[j])&&(V=tt[0],tt=tt[1])){et&&w.setAttribute("morphTarget"+j,et[V]),B&&w.setAttribute("morphNormal"+j,B[V]),l[j]=tt,z+=tt;continue}l[j]=0}w=w.morphTargetsRelative?1:1-z,L.getUniforms().setValue(e,"morphTargetBaseInfluence",w),L.getUniforms().setValue(e,"morphTargetInfluences",l)}}}function $1(e,o,l,g){var w=new mi;return{update:function(B){var L=g.render.frame,z=B.geometry,V=o.get(B,z);return w.get(V)!==L&&(z.isGeometry&&V.updateFromObject(B),o.update(V),w.set(V,L)),B.isInstancedMesh&&l.update(B.instanceMatrix,34962),V},dispose:function(){w=new mi}}}function Nl(e,o,l,g,w,B,L,z,V,j){e=e!==void 0?e:[],d.call(this,e,o!==void 0?o:301,l,g,w,B,L!==void 0?L:1022,z,V,j),this.flipY=!1}function yA(e,o,l,g){d.call(this,null),this.image={data:e||null,width:o||1,height:l||1,depth:g||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function GA(e,o,l,g){d.call(this,null),this.image={data:e||null,width:o||1,height:l||1,depth:g||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function Of(e,o,l){var g=e[0];if(0>=g||0<g)return e;var w=o*l,B=gM[w];if(B===void 0&&(B=new Float32Array(w),gM[w]=B),o!==0)for(g.toArray(B,0),g=1,w=0;g!==o;++g)w+=l,e[g].toArray(B,w);return B}function fu(e,o){if(e.length!==o.length)return!1;for(var l=0,g=e.length;l<g;l++)if(e[l]!==o[l])return!1;return!0}function qa(e,o){for(var l=0,g=o.length;l<g;l++)e[l]=o[l]}function yg(e,o){var l=mM[o];l===void 0&&(l=new Int32Array(o),mM[o]=l);for(var g=0;g!==o;++g)l[g]=e.allocateTextureUnit();return l}function Ft(e,o){var l=this.cache;l[0]!==o&&(e.uniform1f(this.addr,o),l[0]=o)}function Ue(e,o){var l=this.cache;o.x!==void 0?(l[0]!==o.x||l[1]!==o.y)&&(e.uniform2f(this.addr,o.x,o.y),l[0]=o.x,l[1]=o.y):fu(l,o)||(e.uniform2fv(this.addr,o),qa(l,o))}function ie(e,o){var l=this.cache;o.x!==void 0?(l[0]!==o.x||l[1]!==o.y||l[2]!==o.z)&&(e.uniform3f(this.addr,o.x,o.y,o.z),l[0]=o.x,l[1]=o.y,l[2]=o.z):o.r!==void 0?(l[0]!==o.r||l[1]!==o.g||l[2]!==o.b)&&(e.uniform3f(this.addr,o.r,o.g,o.b),l[0]=o.r,l[1]=o.g,l[2]=o.b):fu(l,o)||(e.uniform3fv(this.addr,o),qa(l,o))}function Ge(e,o){var l=this.cache;o.x!==void 0?(l[0]!==o.x||l[1]!==o.y||l[2]!==o.z||l[3]!==o.w)&&(e.uniform4f(this.addr,o.x,o.y,o.z,o.w),l[0]=o.x,l[1]=o.y,l[2]=o.z,l[3]=o.w):fu(l,o)||(e.uniform4fv(this.addr,o),qa(l,o))}function yr(e,o){var l=this.cache,g=o.elements;g===void 0?fu(l,o)||(e.uniformMatrix2fv(this.addr,!1,o),qa(l,o)):fu(l,g)||(xM.set(g),e.uniformMatrix2fv(this.addr,!1,xM),qa(l,g))}function Kn(e,o){var l=this.cache,g=o.elements;g===void 0?fu(l,o)||(e.uniformMatrix3fv(this.addr,!1,o),qa(l,o)):fu(l,g)||(yM.set(g),e.uniformMatrix3fv(this.addr,!1,yM),qa(l,g))}function Rr(e,o){var l=this.cache,g=o.elements;g===void 0?fu(l,o)||(e.uniformMatrix4fv(this.addr,!1,o),qa(l,o)):fu(l,g)||(vM.set(g),e.uniformMatrix4fv(this.addr,!1,vM),qa(l,g))}function dn(e,o,l){var g=this.cache,w=l.allocateTextureUnit();g[0]!==w&&(e.uniform1i(this.addr,w),g[0]=w),l.safeSetTexture2D(o||pM,w)}function jn(e,o,l){var g=this.cache,w=l.allocateTextureUnit();g[0]!==w&&(e.uniform1i(this.addr,w),g[0]=w),l.setTexture2DArray(o||nE,w)}function Vi(e,o,l){var g=this.cache,w=l.allocateTextureUnit();g[0]!==w&&(e.uniform1i(this.addr,w),g[0]=w),l.setTexture3D(o||iE,w)}function vi(e,o,l){var g=this.cache,w=l.allocateTextureUnit();g[0]!==w&&(e.uniform1i(this.addr,w),g[0]=w),l.safeSetTextureCube(o||dM,w)}function zl(e,o){var l=this.cache;l[0]!==o&&(e.uniform1i(this.addr,o),l[0]=o)}function Lo(e,o){var l=this.cache;fu(l,o)||(e.uniform2iv(this.addr,o),qa(l,o))}function Bs(e,o){var l=this.cache;fu(l,o)||(e.uniform3iv(this.addr,o),qa(l,o))}function _h(e,o){var l=this.cache;fu(l,o)||(e.uniform4iv(this.addr,o),qa(l,o))}function ty(e,o){var l=this.cache;l[0]!==o&&(e.uniform1ui(this.addr,o),l[0]=o)}function Wu(e){switch(e){case 5126:return Ft;case 35664:return Ue;case 35665:return ie;case 35666:return Ge;case 35674:return yr;case 35675:return Kn;case 35676:return Rr;case 5124:case 35670:return zl;case 35667:case 35671:return Lo;case 35668:case 35672:return Bs;case 35669:case 35673:return _h;case 5125:return ty;case 35678:case 36198:case 36298:case 36306:case 35682:return dn;case 35679:case 36299:case 36307:return Vi;case 35680:case 36300:case 36308:case 36293:return vi;case 36289:case 36303:case 36311:case 36292:return jn}}function Jm(e,o){e.uniform1fv(this.addr,o)}function Hf(e,o){e.uniform1iv(this.addr,o)}function cd(e,o){e.uniform2iv(this.addr,o)}function aw(e,o){e.uniform3iv(this.addr,o)}function Nf(e,o){e.uniform4iv(this.addr,o)}function sB(e,o){o=Of(o,this.size,2),e.uniform2fv(this.addr,o)}function aB(e,o){o=Of(o,this.size,3),e.uniform3fv(this.addr,o)}function AB(e,o){o=Of(o,this.size,4),e.uniform4fv(this.addr,o)}function uB(e,o){o=Of(o,this.size,4),e.uniformMatrix2fv(this.addr,!1,o)}function lB(e,o){o=Of(o,this.size,9),e.uniformMatrix3fv(this.addr,!1,o)}function hB(e,o){o=Of(o,this.size,16),e.uniformMatrix4fv(this.addr,!1,o)}function cB(e,o,l){var g=o.length,w=yg(l,g);for(e.uniform1iv(this.addr,w),e=0;e!==g;++e)l.safeSetTexture2D(o[e]||pM,w[e])}function fB(e,o,l){var g=o.length,w=yg(l,g);for(e.uniform1iv(this.addr,w),e=0;e!==g;++e)l.safeSetTextureCube(o[e]||dM,w[e])}function pB(e){switch(e){case 5126:return Jm;case 35664:return sB;case 35665:return aB;case 35666:return AB;case 35674:return uB;case 35675:return lB;case 35676:return hB;case 5124:case 35670:return Hf;case 35667:case 35671:return cd;case 35668:case 35672:return aw;case 35669:case 35673:return Nf;case 35678:case 36198:case 36298:case 36306:case 35682:return cB;case 35680:case 36300:case 36308:case 36293:return fB}}function dB(e,o,l){this.id=e,this.addr=l,this.cache=[],this.setValue=Wu(o.type)}function w2(e,o,l){this.id=e,this.addr=l,this.cache=[],this.size=o.size,this.setValue=pB(o.type)}function C2(e){this.id=e,this.seq=[],this.map={}}function fd(e,o){this.seq=[],this.map={};for(var l=e.getProgramParameter(o,35718),g=0;g<l;++g){var w=e.getActiveUniform(o,g),B=e.getUniformLocation(o,w.name),L=this,z=w.name,V=z.length;for(sC.lastIndex=0;;){var j=sC.exec(z),et=sC.lastIndex,tt=j[1],it=j[3];if(j[2]==="]"&&(tt|=0),it===void 0||it==="["&&et+2===V){z=L,w=it===void 0?new dB(tt,w,B):new w2(tt,w,B),z.seq.push(w),z.map[w.id]=w;break}else it=L.map[tt],it===void 0&&(it=new C2(tt),tt=L,L=it,tt.seq.push(L),tt.map[L.id]=L),L=it}}}function M2(e,o,l){return o=e.createShader(o),e.shaderSource(o,l),e.compileShader(o),o}function _2(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+e)}}function B2(e,o,l){var g=e.getShaderParameter(o,35713),w=e.getShaderInfoLog(o).trim();if(g&&w==="")return"";for(e=e.getShaderSource(o).split(`
`),o=0;o<e.length;o++)e[o]=o+1+": "+e[o];return e=e.join(`
`),"THREE.WebGLShader: gl.getShaderInfoLog() "+l+`
`+w+e}function B0(e,o){return o=_2(o),"vec4 "+e+"( vec4 value ) { return "+o[0]+"ToLinear"+o[1]+"; }"}function gB(e,o){return o=_2(o),"vec4 "+e+"( vec4 value ) { return LinearTo"+o[0]+o[1]+"; }"}function mB(e,o){switch(o){case 1:o="Linear";break;case 2:o="Reinhard";break;case 3:o="Uncharted2";break;case 4:o="OptimizedCineon";break;case 5:o="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+o)}return"vec3 "+e+"( vec3 color ) { return "+o+"ToneMapping( color ); }"}function vB(e){var o=[],l;for(l in e){var g=e[l];g!==!1&&o.push("#define "+l+" "+g)}return o.join(`
`)}function E0(e){return e!==""}function E2(e,o){return e.replace(/NUM_DIR_LIGHTS/g,o.numDirLights).replace(/NUM_SPOT_LIGHTS/g,o.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,o.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,o.numPointLights).replace(/NUM_HEMI_LIGHTS/g,o.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,o.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,o.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,o.numPointLightShadows)}function I2(e,o){return e.replace(/NUM_CLIPPING_PLANES/g,o.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,o.numClippingPlanes-o.numClipIntersection)}function Aw(e,o){if(e=_i[o],e===void 0)throw Error("Can not resolve #include <"+o+">");return e.replace(aC,Aw)}function T2(e,o,l,g){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),uw(e,o,l,g)}function uw(e,o,l,g){for(e="",o=parseInt(o);o<parseInt(l);o++)e+=g.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return e}function S2(e){var o="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?o+=`
#define HIGH_PRECISION`:e.precision==="mediump"?o+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(o+=`
#define LOW_PRECISION`),o}function yB(e){var o="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===1?o="SHADOWMAP_TYPE_PCF":e.shadowMapType===2?o="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===3&&(o="SHADOWMAP_TYPE_VSM"),o}function xB(e){var o="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:o="ENVMAP_TYPE_CUBE";break;case 306:case 307:o="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:o="ENVMAP_TYPE_EQUIREC";break;case 305:o="ENVMAP_TYPE_SPHERE"}return o}function wB(e){var o="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 304:o="ENVMAP_MODE_REFRACTION"}return o}function CB(e){var o="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:o="ENVMAP_BLENDING_MULTIPLY";break;case 1:o="ENVMAP_BLENDING_MIX";break;case 2:o="ENVMAP_BLENDING_ADD"}return o}function MB(e,o,l){var g=e.getContext(),w=l.defines,B=l.vertexShader,L=l.fragmentShader,z=yB(l),V=xB(l),j=wB(l),et=CB(l),tt=0<e.gammaFactor?e.gammaFactor:1,it=l.isWebGL2?"":[l.extensionDerivatives||l.envMapCubeUV||l.bumpMap||l.tangentSpaceNormalMap||l.clearcoatNormalMap||l.flatShading||l.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(l.extensionFragDepth||l.logarithmicDepthBuffer)&&l.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",l.extensionDrawBuffers&&l.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(l.extensionShaderTextureLOD||l.envMap)&&l.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(E0).join(`
`),rt=vB(w),At=g.createProgram();l.isRawShaderMaterial?(w=[rt].filter(E0).join(`
`),0<w.length&&(w+=`
`),z=[it,rt].filter(E0).join(`
`),0<z.length&&(z+=`
`)):(w=[S2(l),"#define SHADER_NAME "+l.shaderName,rt,l.instancing?"#define USE_INSTANCING":"",l.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+tt,"#define MAX_BONES "+l.maxBones,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+j:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMap&&l.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",l.normalMap&&l.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.displacementMap&&l.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexTangents?"#define USE_TANGENT":"",l.vertexColors?"#define USE_COLOR":"",l.vertexUvs?"#define USE_UV":"",l.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",l.flatShading?"#define FLAT_SHADED":"",l.skinning?"#define USE_SKINNING":"",l.useVertexTexture?"#define BONE_TEXTURE":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals&&l.flatShading===!1?"#define USE_MORPHNORMALS":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+z:"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(E0).join(`
`),z=[it,S2(l),"#define SHADER_NAME "+l.shaderName,rt,l.alphaTest?"#define ALPHATEST "+l.alphaTest+(l.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+tt,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.matcap?"#define USE_MATCAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+V:"",l.envMap?"#define "+j:"",l.envMap?"#define "+et:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMap&&l.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",l.normalMap&&l.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.sheen?"#define USE_SHEEN":"",l.vertexTangents?"#define USE_TANGENT":"",l.vertexColors?"#define USE_COLOR":"",l.vertexUvs?"#define USE_UV":"",l.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",l.gradientMap?"#define USE_GRADIENTMAP":"",l.flatShading?"#define FLAT_SHADED":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+z:"",l.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",l.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(l.extensionShaderTextureLOD||l.envMap)&&l.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",l.toneMapping!==0?"#define TONE_MAPPING":"",l.toneMapping!==0?_i.tonemapping_pars_fragment:"",l.toneMapping!==0?mB("toneMapping",l.toneMapping):"",l.dithering?"#define DITHERING":"",l.outputEncoding||l.mapEncoding||l.matcapEncoding||l.envMapEncoding||l.emissiveMapEncoding||l.lightMapEncoding?_i.encodings_pars_fragment:"",l.mapEncoding?B0("mapTexelToLinear",l.mapEncoding):"",l.matcapEncoding?B0("matcapTexelToLinear",l.matcapEncoding):"",l.envMapEncoding?B0("envMapTexelToLinear",l.envMapEncoding):"",l.emissiveMapEncoding?B0("emissiveMapTexelToLinear",l.emissiveMapEncoding):"",l.lightMapEncoding?B0("lightMapTexelToLinear",l.lightMapEncoding):"",l.outputEncoding?gB("linearToOutputTexel",l.outputEncoding):"",l.depthPacking?"#define DEPTH_PACKING "+l.depthPacking:"",`
`].filter(E0).join(`
`)),B=B.replace(aC,Aw),B=E2(B,l),B=I2(B,l),L=L.replace(aC,Aw),L=E2(L,l),L=I2(L,l),B=B.replace(CM,uw).replace(wM,T2),L=L.replace(CM,uw).replace(wM,T2),l.isWebGL2&&!l.isRawShaderMaterial&&(V=!1,j=/^\s*#version\s+300\s+es\s*\n/,l.isShaderMaterial&&B.match(j)!==null&&L.match(j)!==null&&(V=!0,B=B.replace(j,""),L=L.replace(j,"")),w=`#version 300 es

#define attribute in
#define varying out
#define texture2D texture
`+w,z=[`#version 300 es

#define varying in`,V?"":"out highp vec4 pc_fragColor;",V?"":"#define gl_FragColor pc_fragColor",`#define gl_FragDepthEXT gl_FragDepth
#define texture2D texture
#define textureCube texture
#define texture2DProj textureProj
#define texture2DLodEXT textureLod
#define texture2DProjLodEXT textureProjLod
#define textureCubeLodEXT textureLod
#define texture2DGradEXT textureGrad
#define texture2DProjGradEXT textureProjGrad
#define textureCubeGradEXT textureGrad`].join(`
`)+`
`+z),L=z+L,B=M2(g,35633,w+B),L=M2(g,35632,L),g.attachShader(At,B),g.attachShader(At,L),l.index0AttributeName!==void 0?g.bindAttribLocation(At,0,l.index0AttributeName):l.morphTargets===!0&&g.bindAttribLocation(At,0,"position"),g.linkProgram(At),e.debug.checkShaderErrors&&(e=g.getProgramInfoLog(At).trim(),V=g.getShaderInfoLog(B).trim(),j=g.getShaderInfoLog(L).trim(),tt=et=!0,g.getProgramParameter(At,35714)===!1?(et=!1,it=B2(g,B,"vertex"),rt=B2(g,L,"fragment"),console.error("THREE.WebGLProgram: shader error: ",g.getError(),"35715",g.getProgramParameter(At,35715),"gl.getProgramInfoLog",e,it,rt)):e!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):(V===""||j==="")&&(tt=!1),tt&&(this.diagnostics={runnable:et,programLog:e,vertexShader:{log:V,prefix:w},fragmentShader:{log:j,prefix:z}})),g.deleteShader(B),g.deleteShader(L);var mt;this.getUniforms=function(){return mt===void 0&&(mt=new fd(g,At)),mt};var Vt;return this.getAttributes=function(){if(Vt===void 0){for(var re={},qt=g.getProgramParameter(At,35721),de=0;de<qt;de++){var oe=g.getActiveAttrib(At,de).name;re[oe]=g.getAttribLocation(At,oe)}Vt=re}return Vt},this.destroy=function(){g.deleteProgram(At),this.program=void 0},this.name=l.shaderName,this.id=oE++,this.cacheKey=o,this.usedTimes=1,this.program=At,this.vertexShader=B,this.fragmentShader=L,this}function _B(e,o,l){function g(rt){if(rt)rt.isTexture?At=rt.encoding:rt.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),At=rt.texture.encoding);else var At=3e3;return At}var w=[],B=l.isWebGL2,L=l.logarithmicDepthBuffer,z=l.floatVertexTextures,V=l.precision,j=l.maxVertexUniforms,et=l.vertexTextures,tt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},it="precision isWebGL2 supportsVertexTextures outputEncoding instancing map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(rt,At,mt,Vt,re,qt,de){var oe=Vt.fog;Vt=rt.isMeshStandardMaterial?Vt.environment:null,Vt=rt.envMap||Vt;var _e=tt[rt.type];if(de.isSkinnedMesh){var ee=de.skeleton.bones;if(z)ee=1024;else{var De=Math.min(Math.floor((j-20)/4),ee.length);De<ee.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+ee.length+" bones. This GPU supports "+De+"."),ee=0):ee=De}}else ee=0;rt.precision!==null&&(V=l.getMaxPrecision(rt.precision),V!==rt.precision&&console.warn("THREE.WebGLProgram.getParameters:",rt.precision,"not supported, using",V,"instead.")),_e?(De=Hc[_e],De={name:rt.type,uniforms:fM.clone(De.uniforms),vertexShader:De.vertexShader,fragmentShader:De.fragmentShader}):De={name:rt.type,uniforms:rt.uniforms,vertexShader:rt.vertexShader,fragmentShader:rt.fragmentShader},rt.onBeforeCompile(De,e);var Ke=e.getRenderTarget();return{isWebGL2:B,shaderID:_e,shaderName:De.name,uniforms:De.uniforms,vertexShader:De.vertexShader,fragmentShader:De.fragmentShader,defines:rt.defines,isRawShaderMaterial:rt.isRawShaderMaterial,isShaderMaterial:rt.isShaderMaterial,precision:V,instancing:de.isInstancedMesh===!0,supportsVertexTextures:et,outputEncoding:Ke!==null?g(Ke.texture):e.outputEncoding,map:!!rt.map,mapEncoding:g(rt.map),matcap:!!rt.matcap,matcapEncoding:g(rt.matcap),envMap:!!Vt,envMapMode:Vt&&Vt.mapping,envMapEncoding:g(Vt),envMapCubeUV:!!Vt&&(Vt.mapping===306||Vt.mapping===307),lightMap:!!rt.lightMap,lightMapEncoding:g(rt.lightMap),aoMap:!!rt.aoMap,emissiveMap:!!rt.emissiveMap,emissiveMapEncoding:g(rt.emissiveMap),bumpMap:!!rt.bumpMap,normalMap:!!rt.normalMap,objectSpaceNormalMap:rt.normalMapType===1,tangentSpaceNormalMap:rt.normalMapType===0,clearcoatMap:!!rt.clearcoatMap,clearcoatRoughnessMap:!!rt.clearcoatRoughnessMap,clearcoatNormalMap:!!rt.clearcoatNormalMap,displacementMap:!!rt.displacementMap,roughnessMap:!!rt.roughnessMap,metalnessMap:!!rt.metalnessMap,specularMap:!!rt.specularMap,alphaMap:!!rt.alphaMap,gradientMap:!!rt.gradientMap,sheen:!!rt.sheen,combine:rt.combine,vertexTangents:rt.normalMap&&rt.vertexTangents,vertexColors:rt.vertexColors,vertexUvs:!!rt.map||!!rt.bumpMap||!!rt.normalMap||!!rt.specularMap||!!rt.alphaMap||!!rt.emissiveMap||!!rt.roughnessMap||!!rt.metalnessMap||!!rt.clearcoatMap||!!rt.clearcoatRoughnessMap||!!rt.clearcoatNormalMap||!!rt.displacementMap,uvsVertexOnly:!(rt.map||rt.bumpMap||rt.normalMap||rt.specularMap||rt.alphaMap||rt.emissiveMap||rt.roughnessMap||rt.metalnessMap||rt.clearcoatNormalMap)&&!!rt.displacementMap,fog:!!oe,useFog:rt.fog,fogExp2:oe&&oe.isFogExp2,flatShading:rt.flatShading,sizeAttenuation:rt.sizeAttenuation,logarithmicDepthBuffer:L,skinning:rt.skinning&&0<ee,maxBones:ee,useVertexTexture:z,morphTargets:rt.morphTargets,morphNormals:rt.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:At.directional.length,numPointLights:At.point.length,numSpotLights:At.spot.length,numRectAreaLights:At.rectArea.length,numHemiLights:At.hemi.length,numDirLightShadows:At.directionalShadowMap.length,numPointLightShadows:At.pointShadowMap.length,numSpotLightShadows:At.spotShadowMap.length,numClippingPlanes:re,numClipIntersection:qt,dithering:rt.dithering,shadowMapEnabled:e.shadowMap.enabled&&0<mt.length,shadowMapType:e.shadowMap.type,toneMapping:rt.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:rt.premultipliedAlpha,alphaTest:rt.alphaTest,doubleSided:rt.side===2,flipSided:rt.side===1,depthPacking:rt.depthPacking!==void 0?rt.depthPacking:!1,index0AttributeName:rt.index0AttributeName,extensionDerivatives:rt.extensions&&rt.extensions.derivatives,extensionFragDepth:rt.extensions&&rt.extensions.fragDepth,extensionDrawBuffers:rt.extensions&&rt.extensions.drawBuffers,extensionShaderTextureLOD:rt.extensions&&rt.extensions.shaderTextureLOD,rendererExtensionFragDepth:B||o.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:B||o.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:B||o.get("EXT_shader_texture_lod")!==null,onBeforeCompile:rt.onBeforeCompile}},this.getProgramCacheKey=function(rt){var At=[];if(rt.shaderID?At.push(rt.shaderID):(At.push(rt.fragmentShader),At.push(rt.vertexShader)),rt.defines!==void 0)for(var mt in rt.defines)At.push(mt),At.push(rt.defines[mt]);if(rt.isRawShaderMaterial===void 0){for(mt=0;mt<it.length;mt++)At.push(rt[it[mt]]);At.push(e.outputEncoding),At.push(e.gammaFactor)}return At.push(rt.onBeforeCompile.toString()),At.join()},this.acquireProgram=function(rt,At){for(var mt,Vt=0,re=w.length;Vt<re;Vt++){var qt=w[Vt];if(qt.cacheKey===At){mt=qt,++mt.usedTimes;break}}return mt===void 0&&(mt=new MB(e,At,rt),w.push(mt)),mt},this.releaseProgram=function(rt){if(--rt.usedTimes==0){var At=w.indexOf(rt);w[At]=w[w.length-1],w.pop(),rt.destroy()}},this.programs=w}function BB(){var e=new mi;return{get:function(o){var l=e.get(o);return l===void 0&&(l={},e.set(o,l)),l},remove:function(o){e.delete(o)},update:function(o,l,g){e.get(o)[l]=g},dispose:function(){e=new mi}}}function EB(e,o){return e.groupOrder!==o.groupOrder?e.groupOrder-o.groupOrder:e.renderOrder!==o.renderOrder?e.renderOrder-o.renderOrder:e.program!==o.program?e.program.id-o.program.id:e.material.id!==o.material.id?e.material.id-o.material.id:e.z!==o.z?e.z-o.z:e.id-o.id}function IB(e,o){return e.groupOrder!==o.groupOrder?e.groupOrder-o.groupOrder:e.renderOrder!==o.renderOrder?e.renderOrder-o.renderOrder:e.z!==o.z?o.z-e.z:e.id-o.id}function L2(){function e(L,z,V,j,et,tt){var it=o[l];return it===void 0?(it={id:L.id,object:L,geometry:z,material:V,program:V.program||B,groupOrder:j,renderOrder:L.renderOrder,z:et,group:tt},o[l]=it):(it.id=L.id,it.object=L,it.geometry=z,it.material=V,it.program=V.program||B,it.groupOrder=j,it.renderOrder=L.renderOrder,it.z=et,it.group=tt),l++,it}var o=[],l=0,g=[],w=[],B={id:-1};return{opaque:g,transparent:w,init:function(){l=0,g.length=0,w.length=0},push:function(L,z,V,j,et,tt){L=e(L,z,V,j,et,tt),(V.transparent===!0?w:g).push(L)},unshift:function(L,z,V,j,et,tt){L=e(L,z,V,j,et,tt),(V.transparent===!0?w:g).unshift(L)},finish:function(){for(var L=l,z=o.length;L<z;L++){var V=o[L];if(V.id===null)break;V.id=null,V.object=null,V.geometry=null,V.material=null,V.program=null,V.group=null}},sort:function(L,z){1<g.length&&g.sort(L||EB),1<w.length&&w.sort(z||IB)}}}function TB(){function e(l){l=l.target,l.removeEventListener("dispose",e),o.delete(l)}var o=new mi;return{get:function(l,g){var w=o.get(l);if(w===void 0){var B=new L2;o.set(l,new mi),o.get(l).set(g,B),l.addEventListener("dispose",e)}else B=w.get(g),B===void 0&&(B=new L2,w.set(g,B));return B},dispose:function(){o=new mi}}}function SB(){var e={};return{get:function(o){if(e[o.id]!==void 0)return e[o.id];switch(o.type){case"DirectionalLight":var l={direction:new C,color:new Bt};break;case"SpotLight":l={position:new C,direction:new C,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":l={position:new C,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":l={direction:new C,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":l={color:new Bt,position:new C,halfWidth:new C,halfHeight:new C}}return e[o.id]=l}}}function LB(){var e={};return{get:function(o){if(e[o.id]!==void 0)return e[o.id];switch(o.type){case"DirectionalLight":var l={shadowBias:0,shadowRadius:1,shadowMapSize:new c};break;case"SpotLight":l={shadowBias:0,shadowRadius:1,shadowMapSize:new c};break;case"PointLight":l={shadowBias:0,shadowRadius:1,shadowMapSize:new c,shadowCameraNear:1,shadowCameraFar:1e3}}return e[o.id]=l}}}function FB(e,o){return(o.castShadow?1:0)-(e.castShadow?1:0)}function RB(){for(var e=new SB,o=LB(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},g=0;9>g;g++)l.probe.push(new C);var w=new C,B=new I,L=new I;return{setup:function(z,V,j){for(var et=0,tt=0,it=0,rt=0;9>rt;rt++)l.probe[rt].set(0,0,0);var At=V=0,mt=0,Vt=0,re=0,qt=0,de=0,oe=0;j=j.matrixWorldInverse,z.sort(FB),rt=0;for(var _e=z.length;rt<_e;rt++){var ee=z[rt],De=ee.color,Ke=ee.intensity,Be=ee.distance,$e=ee.shadow&&ee.shadow.map?ee.shadow.map.texture:null;if(ee.isAmbientLight)et+=De.r*Ke,tt+=De.g*Ke,it+=De.b*Ke;else if(ee.isLightProbe)for($e=0;9>$e;$e++)l.probe[$e].addScaledVector(ee.sh.coefficients[$e],Ke);else if(ee.isDirectionalLight){var Xe=e.get(ee);Xe.color.copy(ee.color).multiplyScalar(ee.intensity),Xe.direction.setFromMatrixPosition(ee.matrixWorld),w.setFromMatrixPosition(ee.target.matrixWorld),Xe.direction.sub(w),Xe.direction.transformDirection(j),ee.castShadow&&(Ke=ee.shadow,De=o.get(ee),De.shadowBias=Ke.bias,De.shadowRadius=Ke.radius,De.shadowMapSize=Ke.mapSize,l.directionalShadow[V]=De,l.directionalShadowMap[V]=$e,l.directionalShadowMatrix[V]=ee.shadow.matrix,qt++),l.directional[V]=Xe,V++}else ee.isSpotLight?(Xe=e.get(ee),Xe.position.setFromMatrixPosition(ee.matrixWorld),Xe.position.applyMatrix4(j),Xe.color.copy(De).multiplyScalar(Ke),Xe.distance=Be,Xe.direction.setFromMatrixPosition(ee.matrixWorld),w.setFromMatrixPosition(ee.target.matrixWorld),Xe.direction.sub(w),Xe.direction.transformDirection(j),Xe.coneCos=Math.cos(ee.angle),Xe.penumbraCos=Math.cos(ee.angle*(1-ee.penumbra)),Xe.decay=ee.decay,ee.castShadow&&(Ke=ee.shadow,De=o.get(ee),De.shadowBias=Ke.bias,De.shadowRadius=Ke.radius,De.shadowMapSize=Ke.mapSize,l.spotShadow[mt]=De,l.spotShadowMap[mt]=$e,l.spotShadowMatrix[mt]=ee.shadow.matrix,oe++),l.spot[mt]=Xe,mt++):ee.isRectAreaLight?(Xe=e.get(ee),Xe.color.copy(De).multiplyScalar(Ke),Xe.position.setFromMatrixPosition(ee.matrixWorld),Xe.position.applyMatrix4(j),L.identity(),B.copy(ee.matrixWorld),B.premultiply(j),L.extractRotation(B),Xe.halfWidth.set(.5*ee.width,0,0),Xe.halfHeight.set(0,.5*ee.height,0),Xe.halfWidth.applyMatrix4(L),Xe.halfHeight.applyMatrix4(L),l.rectArea[Vt]=Xe,Vt++):ee.isPointLight?(Xe=e.get(ee),Xe.position.setFromMatrixPosition(ee.matrixWorld),Xe.position.applyMatrix4(j),Xe.color.copy(ee.color).multiplyScalar(ee.intensity),Xe.distance=ee.distance,Xe.decay=ee.decay,ee.castShadow&&(Ke=ee.shadow,De=o.get(ee),De.shadowBias=Ke.bias,De.shadowRadius=Ke.radius,De.shadowMapSize=Ke.mapSize,De.shadowCameraNear=Ke.camera.near,De.shadowCameraFar=Ke.camera.far,l.pointShadow[At]=De,l.pointShadowMap[At]=$e,l.pointShadowMatrix[At]=ee.shadow.matrix,de++),l.point[At]=Xe,At++):ee.isHemisphereLight&&(Xe=e.get(ee),Xe.direction.setFromMatrixPosition(ee.matrixWorld),Xe.direction.transformDirection(j),Xe.direction.normalize(),Xe.skyColor.copy(ee.color).multiplyScalar(Ke),Xe.groundColor.copy(ee.groundColor).multiplyScalar(Ke),l.hemi[re]=Xe,re++)}l.ambient[0]=et,l.ambient[1]=tt,l.ambient[2]=it,z=l.hash,(z.directionalLength!==V||z.pointLength!==At||z.spotLength!==mt||z.rectAreaLength!==Vt||z.hemiLength!==re||z.numDirectionalShadows!==qt||z.numPointShadows!==de||z.numSpotShadows!==oe)&&(l.directional.length=V,l.spot.length=mt,l.rectArea.length=Vt,l.point.length=At,l.hemi.length=re,l.directionalShadow.length=qt,l.directionalShadowMap.length=qt,l.pointShadow.length=de,l.pointShadowMap.length=de,l.spotShadow.length=oe,l.spotShadowMap.length=oe,l.directionalShadowMatrix.length=qt,l.pointShadowMatrix.length=de,l.spotShadowMatrix.length=oe,z.directionalLength=V,z.pointLength=At,z.spotLength=mt,z.rectAreaLength=Vt,z.hemiLength=re,z.numDirectionalShadows=qt,z.numPointShadows=de,z.numSpotShadows=oe,l.version=sE++)},state:l}}function F2(){var e=new RB,o=[],l=[];return{init:function(){o.length=0,l.length=0},state:{lightsArray:o,shadowsArray:l,lights:e},setupLights:function(g){e.setup(o,l,g)},pushLight:function(g){o.push(g)},pushShadow:function(g){l.push(g)}}}function PB(){function e(l){l=l.target,l.removeEventListener("dispose",e),o.delete(l)}var o=new mi;return{get:function(l,g){if(o.has(l)===!1){var w=new F2;o.set(l,new mi),o.get(l).set(g,w),l.addEventListener("dispose",e)}else o.get(l).has(g)===!1?(w=new F2,o.get(l).set(g,w)):w=o.get(l).get(g);return w},dispose:function(){o=new mi}}}function pd(e){le.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function dd(e){le.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new C,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}function R2(e,o,l){function g(oe,_e,ee){ee=oe<<0|_e<<1|ee<<2;var De=tt[ee];return De===void 0&&(De=new pd({depthPacking:3201,morphTargets:oe,skinning:_e}),tt[ee]=De),De}function w(oe,_e,ee){ee=oe<<0|_e<<1|ee<<2;var De=it[ee];return De===void 0&&(De=new dd({morphTargets:oe,skinning:_e}),it[ee]=De),De}function B(oe,_e,ee,De,Ke,Be,$e){var Xe=g,Gr=oe.customDepthMaterial;return De.isPointLight===!0&&(Xe=w,Gr=oe.customDistanceMaterial),Gr===void 0?(Gr=!1,ee.morphTargets===!0&&(Gr=_e.morphAttributes&&_e.morphAttributes.position&&0<_e.morphAttributes.position.length),_e=!1,oe.isSkinnedMesh===!0&&(ee.skinning===!0?_e=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",oe)),oe=Xe(Gr,_e,oe.isInstancedMesh===!0)):oe=Gr,e.localClippingEnabled&&ee.clipShadows===!0&&ee.clippingPlanes.length!==0&&(Gr=oe.uuid,Xe=ee.uuid,_e=rt[Gr],_e===void 0&&(_e={},rt[Gr]=_e),Gr=_e[Xe],Gr===void 0&&(Gr=oe.clone(),_e[Xe]=Gr),oe=Gr),oe.visible=ee.visible,oe.wireframe=ee.wireframe,oe.side=$e===3?ee.shadowSide!==null?ee.shadowSide:ee.side:ee.shadowSide!==null?ee.shadowSide:At[ee.side],oe.clipShadows=ee.clipShadows,oe.clippingPlanes=ee.clippingPlanes,oe.clipIntersection=ee.clipIntersection,oe.wireframeLinewidth=ee.wireframeLinewidth,oe.linewidth=ee.linewidth,De.isPointLight===!0&&oe.isMeshDistanceMaterial===!0&&(oe.referencePosition.setFromMatrixPosition(De.matrixWorld),oe.nearDistance=Ke,oe.farDistance=Be),oe}function L(oe,_e,ee,De,Ke){if(oe.visible!==!1){if(oe.layers.test(_e.layers)&&(oe.isMesh||oe.isLine||oe.isPoints)&&(oe.castShadow||oe.receiveShadow&&Ke===3)&&(!oe.frustumCulled||z.intersectsObject(oe))){oe.modelViewMatrix.multiplyMatrices(ee.matrixWorldInverse,oe.matrixWorld);var Be=o.update(oe),$e=oe.material;if(Array.isArray($e))for(var Xe=Be.groups,Gr=0,gn=Xe.length;Gr<gn;Gr++){var Mr=Xe[Gr],pn=$e[Mr.materialIndex];pn&&pn.visible&&(pn=B(oe,Be,pn,De,ee.near,ee.far,Ke),e.renderBufferDirect(ee,null,Be,pn,oe,Mr))}else $e.visible&&(pn=B(oe,Be,$e,De,ee.near,ee.far,Ke),e.renderBufferDirect(ee,null,Be,pn,oe,null))}for(oe=oe.children,Be=0,$e=oe.length;Be<$e;Be++)L(oe[Be],_e,ee,De,Ke)}}var z=new Br,V=new c,j=new c,et=new f,tt=[],it=[],rt={},At={0:1,1:0,2:2},mt=new Te({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new c},radius:{value:4}},vertexShader:`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`}),Vt=mt.clone();Vt.defines.HORIZONAL_PASS=1;var re=new yt;re.setAttribute("position",new Me(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var qt=new Dt(re,mt),de=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(oe,_e,ee){if(de.enabled!==!1&&(de.autoUpdate!==!1||de.needsUpdate!==!1)&&oe.length!==0){var De=e.getRenderTarget(),Ke=e.getActiveCubeFace(),Be=e.getActiveMipmapLevel(),$e=e.state;$e.setBlending(0),$e.buffers.color.setClear(1,1,1,1),$e.buffers.depth.setTest(!0),$e.setScissorTest(!1);for(var Xe=0,Gr=oe.length;Xe<Gr;Xe++){var gn=oe[Xe],Mr=gn.shadow;if(Mr===void 0)console.warn("THREE.WebGLShadowMap:",gn,"has no shadow.");else{V.copy(Mr.mapSize);var pn=Mr.getFrameExtents();V.multiply(pn),j.copy(Mr.mapSize),(V.x>l||V.y>l)&&(V.x>l&&(j.x=Math.floor(l/pn.x),V.x=j.x*pn.x,Mr.mapSize.x=j.x),V.y>l&&(j.y=Math.floor(l/pn.y),V.y=j.y*pn.y,Mr.mapSize.y=j.y)),Mr.map!==null||Mr.isPointLightShadow||this.type!==3||(pn={minFilter:1006,magFilter:1006,format:1023},Mr.map=new x(V.x,V.y,pn),Mr.map.texture.name=gn.name+".shadowMap",Mr.mapPass=new x(V.x,V.y,pn),Mr.camera.updateProjectionMatrix()),Mr.map===null&&(pn={minFilter:1003,magFilter:1003,format:1023},Mr.map=new x(V.x,V.y,pn),Mr.map.texture.name=gn.name+".shadowMap",Mr.camera.updateProjectionMatrix()),e.setRenderTarget(Mr.map),e.clear(),pn=Mr.getViewportCount();for(var Yn=0;Yn<pn;Yn++){var Un=Mr.getViewport(Yn);et.set(j.x*Un.x,j.y*Un.y,j.x*Un.z,j.y*Un.w),$e.viewport(et),Mr.updateMatrices(gn,Yn),z=Mr.getFrustum(),L(_e,ee,Mr.camera,gn,this.type)}Mr.isPointLightShadow||this.type!==3||(gn=Mr,Mr=ee,pn=o.update(qt),mt.uniforms.shadow_pass.value=gn.map.texture,mt.uniforms.resolution.value=gn.mapSize,mt.uniforms.radius.value=gn.radius,e.setRenderTarget(gn.mapPass),e.clear(),e.renderBufferDirect(Mr,null,pn,mt,qt,null),Vt.uniforms.shadow_pass.value=gn.mapPass.texture,Vt.uniforms.resolution.value=gn.mapSize,Vt.uniforms.radius.value=gn.radius,e.setRenderTarget(gn.map),e.clear(),e.renderBufferDirect(Mr,null,pn,Vt,qt,null))}}de.needsUpdate=!1,e.setRenderTarget(De,Ke,Be)}}}function UB(e,o,l){function g(Kt,cr,zr){var yn=new Uint8Array(4),Vr=e.createTexture();for(e.bindTexture(Kt,Vr),e.texParameteri(Kt,10241,9728),e.texParameteri(Kt,10240,9728),Kt=0;Kt<zr;Kt++)e.texImage2D(cr+Kt,0,6408,1,1,0,6408,5121,yn);return Vr}function w(Kt,cr){Vt[Kt]=1,re[Kt]===0&&(e.enableVertexAttribArray(Kt),re[Kt]=1),qt[Kt]!==cr&&((it?e:o.get("ANGLE_instanced_arrays"))[it?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Kt,cr),qt[Kt]=cr)}function B(Kt){de[Kt]!==!0&&(e.enable(Kt),de[Kt]=!0)}function L(Kt){de[Kt]!==!1&&(e.disable(Kt),de[Kt]=!1)}function z(Kt,cr,zr,yn,Vr,Ir,Tr,On){if(Kt===0)_e&&(L(3042),_e=!1);else if(_e||(B(3042),_e=!0),Kt!==5){if(Kt!==ee||On!==gn){if((De!==100||$e!==100)&&(e.blendEquation(32774),$e=De=100),On)switch(Kt){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Kt)}else switch(Kt){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Kt)}Gr=Xe=Be=Ke=null,ee=Kt,gn=On}}else Vr=Vr||cr,Ir=Ir||zr,Tr=Tr||yn,(cr!==De||Vr!==$e)&&(e.blendEquationSeparate(Pr[cr],Pr[Vr]),De=cr,$e=Vr),(zr!==Ke||yn!==Be||Ir!==Xe||Tr!==Gr)&&(e.blendFuncSeparate(ke[zr],ke[yn],ke[Ir],ke[Tr]),Ke=zr,Be=yn,Xe=Ir,Gr=Tr),ee=Kt,gn=null}function V(Kt){Mr!==Kt&&(Kt?e.frontFace(2304):e.frontFace(2305),Mr=Kt)}function j(Kt){Kt!==0?(B(2884),Kt!==pn&&(Kt===1?e.cullFace(1029):Kt===2?e.cullFace(1028):e.cullFace(1032))):L(2884),pn=Kt}function et(Kt,cr,zr){Kt?(B(32823),(Un!==cr||yi!==zr)&&(e.polygonOffset(cr,zr),Un=cr,yi=zr)):L(32823)}function tt(Kt){Kt===void 0&&(Kt=33984+ti-1),go!==Kt&&(e.activeTexture(Kt),go=Kt)}var it=l.isWebGL2,rt=new function(){var Kt=!1,cr=new f,zr=null,yn=new f(0,0,0,0);return{setMask:function(Vr){zr===Vr||Kt||(e.colorMask(Vr,Vr,Vr,Vr),zr=Vr)},setLocked:function(Vr){Kt=Vr},setClear:function(Vr,Ir,Tr,On,jo){jo===!0&&(Vr*=On,Ir*=On,Tr*=On),cr.set(Vr,Ir,Tr,On),yn.equals(cr)===!1&&(e.clearColor(Vr,Ir,Tr,On),yn.copy(cr))},reset:function(){Kt=!1,zr=null,yn.set(-1,0,0,0)}}},At=new function(){var Kt=!1,cr=null,zr=null,yn=null;return{setTest:function(Vr){Vr?B(2929):L(2929)},setMask:function(Vr){cr===Vr||Kt||(e.depthMask(Vr),cr=Vr)},setFunc:function(Vr){if(zr!==Vr){if(Vr)switch(Vr){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);zr=Vr}},setLocked:function(Vr){Kt=Vr},setClear:function(Vr){yn!==Vr&&(e.clearDepth(Vr),yn=Vr)},reset:function(){Kt=!1,yn=zr=cr=null}}},mt=new function(){var Kt=!1,cr=null,zr=null,yn=null,Vr=null,Ir=null,Tr=null,On=null,jo=null;return{setTest:function(Qn){Kt||(Qn?B(2960):L(2960))},setMask:function(Qn){cr===Qn||Kt||(e.stencilMask(Qn),cr=Qn)},setFunc:function(Qn,We,Hn){(zr!==Qn||yn!==We||Vr!==Hn)&&(e.stencilFunc(Qn,We,Hn),zr=Qn,yn=We,Vr=Hn)},setOp:function(Qn,We,Hn){(Ir!==Qn||Tr!==We||On!==Hn)&&(e.stencilOp(Qn,We,Hn),Ir=Qn,Tr=We,On=Hn)},setLocked:function(Qn){Kt=Qn},setClear:function(Qn){jo!==Qn&&(e.clearStencil(Qn),jo=Qn)},reset:function(){Kt=!1,jo=On=Tr=Ir=Vr=yn=zr=cr=null}}};l=e.getParameter(34921);var Vt=new Uint8Array(l),re=new Uint8Array(l),qt=new Uint8Array(l),de={},oe=null,_e=null,ee=null,De=null,Ke=null,Be=null,$e=null,Xe=null,Gr=null,gn=!1,Mr=null,pn=null,Yn=null,Un=null,yi=null,ti=e.getParameter(35661),io=!1;l=0,l=e.getParameter(7938),l.indexOf("WebGL")!==-1?(l=parseFloat(/^WebGL ([0-9])/.exec(l)[1]),io=1<=l):l.indexOf("OpenGL ES")!==-1&&(l=parseFloat(/^OpenGL ES ([0-9])/.exec(l)[1]),io=2<=l);var go=null,Lt={},jt=new f,Le=new f,rr={};rr[3553]=g(3553,3553,1),rr[34067]=g(34067,34069,6),rt.setClear(0,0,0,1),At.setClear(1),mt.setClear(0),B(2929),At.setFunc(3),V(!1),j(1),B(2884),z(0);var Pr={100:32774,101:32778,102:32779};it?(Pr[103]=32775,Pr[104]=32776):(l=o.get("EXT_blend_minmax"),l!==null&&(Pr[103]=l.MIN_EXT,Pr[104]=l.MAX_EXT));var ke={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};return{buffers:{color:rt,depth:At,stencil:mt},initAttributes:function(){for(var Kt=0,cr=Vt.length;Kt<cr;Kt++)Vt[Kt]=0},enableAttribute:function(Kt){w(Kt,0)},enableAttributeAndDivisor:w,disableUnusedAttributes:function(){for(var Kt=0,cr=re.length;Kt!==cr;++Kt)re[Kt]!==Vt[Kt]&&(e.disableVertexAttribArray(Kt),re[Kt]=0)},vertexAttribPointer:function(Kt,cr,zr,yn,Vr,Ir){it!==!0||zr!==5124&&zr!==5125?e.vertexAttribPointer(Kt,cr,zr,yn,Vr,Ir):e.vertexAttribIPointer(Kt,cr,zr,yn,Vr,Ir)},enable:B,disable:L,useProgram:function(Kt){return oe!==Kt?(e.useProgram(Kt),oe=Kt,!0):!1},setBlending:z,setMaterial:function(Kt,cr){Kt.side===2?L(2884):B(2884);var zr=Kt.side===1;cr&&(zr=!zr),V(zr),Kt.blending===1&&Kt.transparent===!1?z(0):z(Kt.blending,Kt.blendEquation,Kt.blendSrc,Kt.blendDst,Kt.blendEquationAlpha,Kt.blendSrcAlpha,Kt.blendDstAlpha,Kt.premultipliedAlpha),At.setFunc(Kt.depthFunc),At.setTest(Kt.depthTest),At.setMask(Kt.depthWrite),rt.setMask(Kt.colorWrite),cr=Kt.stencilWrite,mt.setTest(cr),cr&&(mt.setMask(Kt.stencilWriteMask),mt.setFunc(Kt.stencilFunc,Kt.stencilRef,Kt.stencilFuncMask),mt.setOp(Kt.stencilFail,Kt.stencilZFail,Kt.stencilZPass)),et(Kt.polygonOffset,Kt.polygonOffsetFactor,Kt.polygonOffsetUnits)},setFlipSided:V,setCullFace:j,setLineWidth:function(Kt){Kt!==Yn&&(io&&e.lineWidth(Kt),Yn=Kt)},setPolygonOffset:et,setScissorTest:function(Kt){Kt?B(3089):L(3089)},activeTexture:tt,bindTexture:function(Kt,cr){go===null&&tt();var zr=Lt[go];zr===void 0&&(zr={type:void 0,texture:void 0},Lt[go]=zr),(zr.type!==Kt||zr.texture!==cr)&&(e.bindTexture(Kt,cr||rr[Kt]),zr.type=Kt,zr.texture=cr)},unbindTexture:function(){var Kt=Lt[go];Kt!==void 0&&Kt.type!==void 0&&(e.bindTexture(Kt.type,null),Kt.type=void 0,Kt.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Kt){console.error("THREE.WebGLState:",Kt)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(Kt){console.error("THREE.WebGLState:",Kt)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(Kt){console.error("THREE.WebGLState:",Kt)}},scissor:function(Kt){jt.equals(Kt)===!1&&(e.scissor(Kt.x,Kt.y,Kt.z,Kt.w),jt.copy(Kt))},viewport:function(Kt){Le.equals(Kt)===!1&&(e.viewport(Kt.x,Kt.y,Kt.z,Kt.w),Le.copy(Kt))},reset:function(){for(var Kt=0;Kt<re.length;Kt++)re[Kt]===1&&(e.disableVertexAttribArray(Kt),re[Kt]=0);de={},go=null,Lt={},pn=Mr=ee=oe=null,rt.reset(),At.reset(),mt.reset()}}}function DB(e,o,l,g,w,B,L){function z(Lt,jt){return Yn?new OffscreenCanvas(Lt,jt):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function V(Lt,jt,Le,rr){var Pr=1;if((Lt.width>rr||Lt.height>rr)&&(Pr=rr/Math.max(Lt.width,Lt.height)),1>Pr||jt===!0){if(typeof HTMLImageElement!="undefined"&&Lt instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&Lt instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&Lt instanceof ImageBitmap)return rr=jt?ii.floorPowerOfTwo:Math.floor,jt=rr(Pr*Lt.width),Pr=rr(Pr*Lt.height),pn===void 0&&(pn=z(jt,Pr)),Le=Le?z(jt,Pr):pn,Le.width=jt,Le.height=Pr,Le.getContext("2d").drawImage(Lt,0,0,jt,Pr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Lt.width+"x"+Lt.height+") to ("+jt+"x"+Pr+")."),Le;"data"in Lt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Lt.width+"x"+Lt.height+").")}return Lt}function j(Lt){return ii.isPowerOfTwo(Lt.width)&&ii.isPowerOfTwo(Lt.height)}function et(Lt,jt){return Lt.generateMipmaps&&jt&&Lt.minFilter!==1003&&Lt.minFilter!==1006}function tt(Lt,jt,Le,rr){e.generateMipmap(Lt),g.get(jt).__maxMipLevel=Math.log(Math.max(Le,rr))*Math.LOG2E}function it(Lt,jt,Le){if(Be===!1)return jt;if(Lt!==null){if(e[Lt]!==void 0)return e[Lt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Lt+"'")}return Lt=jt,jt===6403&&(Le===5126&&(Lt=33326),Le===5131&&(Lt=33325),Le===5121&&(Lt=33321)),jt===6407&&(Le===5126&&(Lt=34837),Le===5131&&(Lt=34843),Le===5121&&(Lt=32849)),jt===6408&&(Le===5126&&(Lt=34836),Le===5131&&(Lt=34842),Le===5121&&(Lt=32856)),Lt!==33325&&Lt!==33326&&Lt!==34842&&Lt!==34836||o.get("EXT_color_buffer_float"),Lt}function rt(Lt){return Lt===1003||Lt===1004||Lt===1005?9728:9729}function At(Lt){Lt=Lt.target,Lt.removeEventListener("dispose",At);var jt=g.get(Lt);jt.__webglInit!==void 0&&(e.deleteTexture(jt.__webglTexture),g.remove(Lt)),Lt.isVideoTexture&&Mr.delete(Lt),L.memory.textures--}function mt(Lt){Lt=Lt.target,Lt.removeEventListener("dispose",mt);var jt=g.get(Lt),Le=g.get(Lt.texture);if(Lt){if(Le.__webglTexture!==void 0&&e.deleteTexture(Le.__webglTexture),Lt.depthTexture&&Lt.depthTexture.dispose(),Lt.isWebGLCubeRenderTarget)for(Le=0;6>Le;Le++)e.deleteFramebuffer(jt.__webglFramebuffer[Le]),jt.__webglDepthbuffer&&e.deleteRenderbuffer(jt.__webglDepthbuffer[Le]);else e.deleteFramebuffer(jt.__webglFramebuffer),jt.__webglDepthbuffer&&e.deleteRenderbuffer(jt.__webglDepthbuffer),jt.__webglMultisampledFramebuffer&&e.deleteFramebuffer(jt.__webglMultisampledFramebuffer),jt.__webglColorRenderbuffer&&e.deleteRenderbuffer(jt.__webglColorRenderbuffer),jt.__webglDepthRenderbuffer&&e.deleteRenderbuffer(jt.__webglDepthRenderbuffer);g.remove(Lt.texture),g.remove(Lt)}L.memory.textures--}function Vt(Lt,jt){var Le=g.get(Lt);if(Lt.isVideoTexture){var rr=L.render.frame;Mr.get(Lt)!==rr&&(Mr.set(Lt,rr),Lt.update())}if(0<Lt.version&&Le.__version!==Lt.version)if(rr=Lt.image,rr===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(rr.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{_e(Le,Lt,jt);return}l.activeTexture(33984+jt),l.bindTexture(3553,Le.__webglTexture)}function re(Lt,jt){if(Lt.image.length===6){var Le=g.get(Lt);if(0<Lt.version&&Le.__version!==Lt.version){oe(Le,Lt),l.activeTexture(33984+jt),l.bindTexture(34067,Le.__webglTexture),e.pixelStorei(37440,Lt.flipY);var rr=Lt&&(Lt.isCompressedTexture||Lt.image[0].isCompressedTexture);jt=Lt.image[0]&&Lt.image[0].isDataTexture;for(var Pr=[],ke=0;6>ke;ke++)Pr[ke]=rr||jt?jt?Lt.image[ke].image:Lt.image[ke]:V(Lt.image[ke],!1,!0,Xe);var Kt=Pr[0],cr=j(Kt)||Be,zr=B.convert(Lt.format),yn=B.convert(Lt.type),Vr=it(Lt.internalFormat,zr,yn);if(de(34067,Lt,cr),rr){for(ke=0;6>ke;ke++){var Ir=Pr[ke].mipmaps;for(rr=0;rr<Ir.length;rr++){var Tr=Ir[rr];Lt.format!==1023&&Lt.format!==1022?zr!==null?l.compressedTexImage2D(34069+ke,rr,Vr,Tr.width,Tr.height,0,Tr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):l.texImage2D(34069+ke,rr,Vr,Tr.width,Tr.height,0,zr,yn,Tr.data)}}Le.__maxMipLevel=Ir.length-1}else{for(Ir=Lt.mipmaps,ke=0;6>ke;ke++)if(jt)for(l.texImage2D(34069+ke,0,Vr,Pr[ke].width,Pr[ke].height,0,zr,yn,Pr[ke].data),rr=0;rr<Ir.length;rr++)Tr=Ir[rr],Tr=Tr.image[ke].image,l.texImage2D(34069+ke,rr+1,Vr,Tr.width,Tr.height,0,zr,yn,Tr.data);else for(l.texImage2D(34069+ke,0,Vr,zr,yn,Pr[ke]),rr=0;rr<Ir.length;rr++)Tr=Ir[rr],l.texImage2D(34069+ke,rr+1,Vr,zr,yn,Tr.image[ke]);Le.__maxMipLevel=Ir.length}et(Lt,cr)&&tt(34067,Lt,Kt.width,Kt.height),Le.__version=Lt.version,Lt.onUpdate&&Lt.onUpdate(Lt)}else l.activeTexture(33984+jt),l.bindTexture(34067,Le.__webglTexture)}}function qt(Lt,jt){l.activeTexture(33984+jt),l.bindTexture(34067,g.get(Lt).__webglTexture)}function de(Lt,jt,Le){Le?(e.texParameteri(Lt,10242,yi[jt.wrapS]),e.texParameteri(Lt,10243,yi[jt.wrapT]),Lt!==32879&&Lt!==35866||e.texParameteri(Lt,32882,yi[jt.wrapR]),e.texParameteri(Lt,10240,ti[jt.magFilter]),e.texParameteri(Lt,10241,ti[jt.minFilter])):(e.texParameteri(Lt,10242,33071),e.texParameteri(Lt,10243,33071),Lt!==32879&&Lt!==35866||e.texParameteri(Lt,32882,33071),jt.wrapS===1001&&jt.wrapT===1001||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(Lt,10240,rt(jt.magFilter)),e.texParameteri(Lt,10241,rt(jt.minFilter)),jt.minFilter!==1003&&jt.minFilter!==1006&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(Le=o.get("EXT_texture_filter_anisotropic"))||jt.type===1015&&o.get("OES_texture_float_linear")===null||jt.type===1016&&(Be||o.get("OES_texture_half_float_linear"))===null||!(1<jt.anisotropy||g.get(jt).__currentAnisotropy)||(e.texParameterf(Lt,Le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(jt.anisotropy,w.getMaxAnisotropy())),g.get(jt).__currentAnisotropy=jt.anisotropy)}function oe(Lt,jt){Lt.__webglInit===void 0&&(Lt.__webglInit=!0,jt.addEventListener("dispose",At),Lt.__webglTexture=e.createTexture(),L.memory.textures++)}function _e(Lt,jt,Le){var rr=3553;jt.isDataTexture2DArray&&(rr=35866),jt.isDataTexture3D&&(rr=32879),oe(Lt,jt),l.activeTexture(33984+Le),l.bindTexture(rr,Lt.__webglTexture),e.pixelStorei(37440,jt.flipY),e.pixelStorei(37441,jt.premultiplyAlpha),e.pixelStorei(3317,jt.unpackAlignment),Le=Be?!1:jt.wrapS!==1001||jt.wrapT!==1001||jt.minFilter!==1003&&jt.minFilter!==1006,Le=Le&&j(jt.image)===!1,Le=V(jt.image,Le,!1,Gr);var Pr=j(Le)||Be,ke=B.convert(jt.format),Kt=B.convert(jt.type),cr=it(jt.internalFormat,ke,Kt);de(rr,jt,Pr);var zr=jt.mipmaps;if(jt.isDepthTexture)cr=6402,Be?cr=jt.type===1015?36012:jt.type===1014?33190:jt.type===1020?35056:33189:jt.type===1015&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),jt.format===1026&&cr===6402&&jt.type!==1012&&jt.type!==1014&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),jt.type=1012,Kt=B.convert(jt.type)),jt.format===1027&&cr===6402&&(cr=34041,jt.type!==1020&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),jt.type=1020,Kt=B.convert(jt.type))),l.texImage2D(3553,0,cr,Le.width,Le.height,0,ke,Kt,null);else if(jt.isDataTexture)if(0<zr.length&&Pr){for(var yn=0,Vr=zr.length;yn<Vr;yn++){var Ir=zr[yn];l.texImage2D(3553,yn,cr,Ir.width,Ir.height,0,ke,Kt,Ir.data)}jt.generateMipmaps=!1,Lt.__maxMipLevel=zr.length-1}else l.texImage2D(3553,0,cr,Le.width,Le.height,0,ke,Kt,Le.data),Lt.__maxMipLevel=0;else if(jt.isCompressedTexture){for(yn=0,Vr=zr.length;yn<Vr;yn++)Ir=zr[yn],jt.format!==1023&&jt.format!==1022?ke!==null?l.compressedTexImage2D(3553,yn,cr,Ir.width,Ir.height,0,Ir.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):l.texImage2D(3553,yn,cr,Ir.width,Ir.height,0,ke,Kt,Ir.data);Lt.__maxMipLevel=zr.length-1}else if(jt.isDataTexture2DArray)l.texImage3D(35866,0,cr,Le.width,Le.height,Le.depth,0,ke,Kt,Le.data),Lt.__maxMipLevel=0;else if(jt.isDataTexture3D)l.texImage3D(32879,0,cr,Le.width,Le.height,Le.depth,0,ke,Kt,Le.data),Lt.__maxMipLevel=0;else if(0<zr.length&&Pr){for(yn=0,Vr=zr.length;yn<Vr;yn++)Ir=zr[yn],l.texImage2D(3553,yn,cr,ke,Kt,Ir);jt.generateMipmaps=!1,Lt.__maxMipLevel=zr.length-1}else l.texImage2D(3553,0,cr,ke,Kt,Le),Lt.__maxMipLevel=0;et(jt,Pr)&&tt(rr,jt,Le.width,Le.height),Lt.__version=jt.version,jt.onUpdate&&jt.onUpdate(jt)}function ee(Lt,jt,Le,rr){var Pr=B.convert(jt.texture.format),ke=B.convert(jt.texture.type),Kt=it(jt.texture.internalFormat,Pr,ke);l.texImage2D(rr,0,Kt,jt.width,jt.height,0,Pr,ke,null),e.bindFramebuffer(36160,Lt),e.framebufferTexture2D(36160,Le,rr,g.get(jt.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function De(Lt,jt,Le){if(e.bindRenderbuffer(36161,Lt),jt.depthBuffer&&!jt.stencilBuffer){var rr=33189;Le?((Le=jt.depthTexture)&&Le.isDepthTexture&&(Le.type===1015?rr=36012:Le.type===1014&&(rr=33190)),Le=Ke(jt),e.renderbufferStorageMultisample(36161,Le,rr,jt.width,jt.height)):e.renderbufferStorage(36161,rr,jt.width,jt.height),e.framebufferRenderbuffer(36160,36096,36161,Lt)}else jt.depthBuffer&&jt.stencilBuffer?(Le?(Le=Ke(jt),e.renderbufferStorageMultisample(36161,Le,35056,jt.width,jt.height)):e.renderbufferStorage(36161,34041,jt.width,jt.height),e.framebufferRenderbuffer(36160,33306,36161,Lt)):(Lt=B.convert(jt.texture.format),rr=B.convert(jt.texture.type),rr=it(jt.texture.internalFormat,Lt,rr),Le?(Le=Ke(jt),e.renderbufferStorageMultisample(36161,Le,rr,jt.width,jt.height)):e.renderbufferStorage(36161,rr,jt.width,jt.height));e.bindRenderbuffer(36161,null)}function Ke(Lt){return Be&&Lt.isWebGLMultisampleRenderTarget?Math.min(gn,Lt.samples):0}var Be=w.isWebGL2,$e=w.maxTextures,Xe=w.maxCubemapSize,Gr=w.maxTextureSize,gn=w.maxSamples,Mr=new mi,pn,Yn=!1;try{Yn=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(Lt){}var Un=0,yi={1e3:10497,1001:33071,1002:33648},ti={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987},io=!1,go=!1;this.allocateTextureUnit=function(){var Lt=Un;return Lt>=$e&&console.warn("THREE.WebGLTextures: Trying to use "+Lt+" texture units while this GPU supports only "+$e),Un+=1,Lt},this.resetTextureUnits=function(){Un=0},this.setTexture2D=Vt,this.setTexture2DArray=function(Lt,jt){var Le=g.get(Lt);0<Lt.version&&Le.__version!==Lt.version?_e(Le,Lt,jt):(l.activeTexture(33984+jt),l.bindTexture(35866,Le.__webglTexture))},this.setTexture3D=function(Lt,jt){var Le=g.get(Lt);0<Lt.version&&Le.__version!==Lt.version?_e(Le,Lt,jt):(l.activeTexture(33984+jt),l.bindTexture(32879,Le.__webglTexture))},this.setTextureCube=re,this.setTextureCubeDynamic=qt,this.setupRenderTarget=function(Lt){var jt=g.get(Lt),Le=g.get(Lt.texture);Lt.addEventListener("dispose",mt),Le.__webglTexture=e.createTexture(),L.memory.textures++;var rr=Lt.isWebGLCubeRenderTarget===!0,Pr=Lt.isWebGLMultisampleRenderTarget===!0,ke=j(Lt)||Be;if(!Be||Lt.texture.format!==1022||Lt.texture.type!==1015&&Lt.texture.type!==1016||(Lt.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),rr)for(jt.__webglFramebuffer=[],Pr=0;6>Pr;Pr++)jt.__webglFramebuffer[Pr]=e.createFramebuffer();else if(jt.__webglFramebuffer=e.createFramebuffer(),Pr)if(Be){jt.__webglMultisampledFramebuffer=e.createFramebuffer(),jt.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,jt.__webglColorRenderbuffer),Pr=B.convert(Lt.texture.format);var Kt=B.convert(Lt.texture.type);Pr=it(Lt.texture.internalFormat,Pr,Kt),Kt=Ke(Lt),e.renderbufferStorageMultisample(36161,Kt,Pr,Lt.width,Lt.height),e.bindFramebuffer(36160,jt.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,jt.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),Lt.depthBuffer&&(jt.__webglDepthRenderbuffer=e.createRenderbuffer(),De(jt.__webglDepthRenderbuffer,Lt,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(rr){for(l.bindTexture(34067,Le.__webglTexture),de(34067,Lt.texture,ke),Pr=0;6>Pr;Pr++)ee(jt.__webglFramebuffer[Pr],Lt,36064,34069+Pr);et(Lt.texture,ke)&&tt(34067,Lt.texture,Lt.width,Lt.height),l.bindTexture(34067,null)}else l.bindTexture(3553,Le.__webglTexture),de(3553,Lt.texture,ke),ee(jt.__webglFramebuffer,Lt,36064,3553),et(Lt.texture,ke)&&tt(3553,Lt.texture,Lt.width,Lt.height),l.bindTexture(3553,null);if(Lt.depthBuffer){if(jt=g.get(Lt),Le=Lt.isWebGLCubeRenderTarget===!0,Lt.depthTexture){if(Le)throw Error("target.depthTexture not supported in Cube render targets");if(Lt&&Lt.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,jt.__webglFramebuffer),!Lt.depthTexture||!Lt.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(g.get(Lt.depthTexture).__webglTexture&&Lt.depthTexture.image.width===Lt.width&&Lt.depthTexture.image.height===Lt.height||(Lt.depthTexture.image.width=Lt.width,Lt.depthTexture.image.height=Lt.height,Lt.depthTexture.needsUpdate=!0),Vt(Lt.depthTexture,0),jt=g.get(Lt.depthTexture).__webglTexture,Lt.depthTexture.format===1026)e.framebufferTexture2D(36160,36096,3553,jt,0);else if(Lt.depthTexture.format===1027)e.framebufferTexture2D(36160,33306,3553,jt,0);else throw Error("Unknown depthTexture format")}else if(Le)for(jt.__webglDepthbuffer=[],Le=0;6>Le;Le++)e.bindFramebuffer(36160,jt.__webglFramebuffer[Le]),jt.__webglDepthbuffer[Le]=e.createRenderbuffer(),De(jt.__webglDepthbuffer[Le],Lt,!1);else e.bindFramebuffer(36160,jt.__webglFramebuffer),jt.__webglDepthbuffer=e.createRenderbuffer(),De(jt.__webglDepthbuffer,Lt,!1);e.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(Lt){var jt=Lt.texture,Le=j(Lt)||Be;if(et(jt,Le)){Le=Lt.isWebGLCubeRenderTarget?34067:3553;var rr=g.get(jt).__webglTexture;l.bindTexture(Le,rr),tt(Le,jt,Lt.width,Lt.height),l.bindTexture(Le,null)}},this.updateMultisampleRenderTarget=function(Lt){if(Lt.isWebGLMultisampleRenderTarget)if(Be){var jt=g.get(Lt);e.bindFramebuffer(36008,jt.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,jt.__webglFramebuffer);var Le=Lt.width,rr=Lt.height,Pr=16384;Lt.depthBuffer&&(Pr|=256),Lt.stencilBuffer&&(Pr|=1024),e.blitFramebuffer(0,0,Le,rr,0,0,Le,rr,Pr,9728),e.bindFramebuffer(36160,jt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(Lt,jt){Lt&&Lt.isWebGLRenderTarget&&(io===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),io=!0),Lt=Lt.texture),Vt(Lt,jt)},this.safeSetTextureCube=function(Lt,jt){Lt&&Lt.isWebGLCubeRenderTarget&&(go===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),go=!0),Lt=Lt.texture),Lt&&Lt.isCubeTexture||Array.isArray(Lt.image)&&Lt.image.length===6?re(Lt,jt):qt(Lt,jt)}}function P2(e,o,l){var g=l.isWebGL2;return{convert:function(w){if(w===1009)return 5121;if(w===1017)return 32819;if(w===1018)return 32820;if(w===1019)return 33635;if(w===1010)return 5120;if(w===1011)return 5122;if(w===1012)return 5123;if(w===1013)return 5124;if(w===1014)return 5125;if(w===1015)return 5126;if(w===1016){if(g)return 5131;var B=o.get("OES_texture_half_float");return B!==null?B.HALF_FLOAT_OES:null}if(w===1021)return 6406;if(w===1022)return 6407;if(w===1023)return 6408;if(w===1024)return 6409;if(w===1025)return 6410;if(w===1026)return 6402;if(w===1027)return 34041;if(w===1028)return 6403;if(w===1029)return 36244;if(w===1030)return 33319;if(w===1031)return 33320;if(w===1032)return 36248;if(w===1033)return 36249;if(w===33776||w===33777||w===33778||w===33779)if(B=o.get("WEBGL_compressed_texture_s3tc"),B!==null){if(w===33776)return B.COMPRESSED_RGB_S3TC_DXT1_EXT;if(w===33777)return B.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(w===33778)return B.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(w===33779)return B.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(w===35840||w===35841||w===35842||w===35843)if(B=o.get("WEBGL_compressed_texture_pvrtc"),B!==null){if(w===35840)return B.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(w===35841)return B.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(w===35842)return B.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(w===35843)return B.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(w===36196)return B=o.get("WEBGL_compressed_texture_etc1"),B!==null?B.COMPRESSED_RGB_ETC1_WEBGL:null;if((w===37492||w===37496)&&(B=o.get("WEBGL_compressed_texture_etc"),B!==null)){if(w===37492)return B.COMPRESSED_RGB8_ETC2;if(w===37496)return B.COMPRESSED_RGBA8_ETC2_EAC}if(w===37808||w===37809||w===37810||w===37811||w===37812||w===37813||w===37814||w===37815||w===37816||w===37817||w===37818||w===37819||w===37820||w===37821||w===37840||w===37841||w===37842||w===37843||w===37844||w===37845||w===37846||w===37847||w===37848||w===37849||w===37850||w===37851||w===37852||w===37853)return B=o.get("WEBGL_compressed_texture_astc"),B!==null?w:null;if(w===36492)return B=o.get("EXT_texture_compression_bptc"),B!==null?w:null;if(w===1020)return g?34042:(B=o.get("WEBGL_depth_texture"),B!==null?B.UNSIGNED_INT_24_8_WEBGL:null)}}}function ey(e){He.call(this),this.cameras=e||[]}function qm(){D.call(this),this.type="Group"}function ry(){this._grip=this._targetRay=null}function U2(e,o){function l(Be){var $e=At.get(Be.inputSource);$e&&$e.dispatchEvent({type:Be.type})}function g(){At.forEach(function(Be,$e){Be.disconnect($e)}),At.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),Ke.stop(),z.isPresenting=!1,z.dispatchEvent({type:"sessionend"})}function w(Be){et=Be,Ke.setContext(V),Ke.start(),z.isPresenting=!0,z.dispatchEvent({type:"sessionstart"})}function B(Be){for(var $e=V.inputSources,Xe=0;Xe<rt.length;Xe++)At.set($e[Xe],rt[Xe]);for(Xe=0;Xe<Be.removed.length;Xe++){$e=Be.removed[Xe];var Gr=At.get($e);Gr&&(Gr.dispatchEvent({type:"disconnected",data:$e}),At.delete($e))}for(Xe=0;Xe<Be.added.length;Xe++)$e=Be.added[Xe],(Gr=At.get($e))&&Gr.dispatchEvent({type:"connected",data:$e})}function L(Be,$e){$e===null?Be.matrixWorld.copy(Be.matrix):Be.matrixWorld.multiplyMatrices($e.matrixWorld,Be.matrix),Be.matrixWorldInverse.getInverse(Be.matrixWorld)}var z=this,V=null,j=1,et=null,tt="local-floor",it=null,rt=[],At=new Ye,mt=new He;mt.layers.enable(1),mt.viewport=new f;var Vt=new He;Vt.layers.enable(2),Vt.viewport=new f;var re=[mt,Vt],qt=new ey;qt.layers.enable(1),qt.layers.enable(2);var de=null,oe=null;this.isPresenting=this.enabled=!1,this.getController=function(Be){var $e=rt[Be];return $e===void 0&&($e=new ry,rt[Be]=$e),$e.getTargetRaySpace()},this.getControllerGrip=function(Be){var $e=rt[Be];return $e===void 0&&($e=new ry,rt[Be]=$e),$e.getGripSpace()},this.setFramebufferScaleFactor=function(Be){j=Be,z.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Be){tt=Be,z.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return et},this.getSession=function(){return V},this.setSession=function(Be){V=Be,V!==null&&(V.addEventListener("select",l),V.addEventListener("selectstart",l),V.addEventListener("selectend",l),V.addEventListener("squeeze",l),V.addEventListener("squeezestart",l),V.addEventListener("squeezeend",l),V.addEventListener("end",g),Be=o.getContextAttributes(),Be.xrCompatible!==!0&&o.makeXRCompatible(),Be=new XRWebGLLayer(V,o,{antialias:Be.antialias,alpha:Be.alpha,depth:Be.depth,stencil:Be.stencil,framebufferScaleFactor:j}),V.updateRenderState({baseLayer:Be}),V.requestReferenceSpace(tt).then(w),V.addEventListener("inputsourceschange",B))};var _e=new C,ee=new C;this.getCamera=function(Be){qt.near=Vt.near=mt.near=Be.near,qt.far=Vt.far=mt.far=Be.far,(de!==qt.near||oe!==qt.far)&&(V.updateRenderState({depthNear:qt.near,depthFar:qt.far}),de=qt.near,oe=qt.far);var $e=Be.parent,Xe=qt.cameras;L(qt,$e);for(var Gr=0;Gr<Xe.length;Gr++)L(Xe[Gr],$e);for(Be.matrixWorld.copy(qt.matrixWorld),Be=Be.children,Gr=0,$e=Be.length;Gr<$e;Gr++)Be[Gr].updateMatrixWorld(!0);if(Xe.length===2){_e.setFromMatrixPosition(mt.matrixWorld),ee.setFromMatrixPosition(Vt.matrixWorld),Xe=_e.distanceTo(ee);var gn=mt.projectionMatrix.elements,Mr=Vt.projectionMatrix.elements,pn=gn[14]/(gn[10]-1);Gr=gn[14]/(gn[10]+1),Be=(gn[9]+1)/gn[5],$e=(gn[9]-1)/gn[5];var Yn=(gn[8]-1)/gn[0],Un=(Mr[8]+1)/Mr[0];Mr=pn*Yn,gn=pn*Un,Un=Xe/(-Yn+Un),Yn=Un*-Yn,mt.matrixWorld.decompose(qt.position,qt.quaternion,qt.scale),qt.translateX(Yn),qt.translateZ(Un),qt.matrixWorld.compose(qt.position,qt.quaternion,qt.scale),qt.matrixWorldInverse.getInverse(qt.matrixWorld),pn+=Un,Un=Gr+Un,qt.projectionMatrix.makePerspective(Mr-Yn,gn+(Xe-Yn),Be*Gr/Un*pn,$e*Gr/Un*pn,pn,Un)}else qt.projectionMatrix.copy(mt.projectionMatrix);return qt};var De=null,Ke=new Bn;Ke.setAnimationLoop(function(Be,$e){if(it=$e.getViewerPose(et),it!==null){var Xe=it.views,Gr=V.renderState.baseLayer;e.setFramebuffer(Gr.framebuffer);var gn=!1;Xe.length!==qt.cameras.length&&(qt.cameras.length=0,gn=!0);for(var Mr=0;Mr<Xe.length;Mr++){var pn=Xe[Mr],Yn=Gr.getViewport(pn),Un=re[Mr];Un.matrix.fromArray(pn.transform.matrix),Un.projectionMatrix.fromArray(pn.projectionMatrix),Un.viewport.set(Yn.x,Yn.y,Yn.width,Yn.height),Mr===0&&qt.matrix.copy(Un.matrix),gn===!0&&qt.cameras.push(Un)}}for(Xe=V.inputSources,Mr=0;Mr<rt.length;Mr++)rt[Mr].update(Xe[Mr],$e,et);De&&De(Be,$e)}),this.setAnimationLoop=function(Be){De=Be},this.dispose=function(){}}function OB(e){function o(g,w,B){if(g.opacity.value=w.opacity,w.color&&g.diffuse.value.copy(w.color),w.emissive&&g.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(g.map.value=w.map),w.alphaMap&&(g.alphaMap.value=w.alphaMap),w.specularMap&&(g.specularMap.value=w.specularMap),(B=w.envMap||B)&&(g.envMap.value=B,g.flipEnvMap.value=B.isCubeTexture?-1:1,g.reflectivity.value=w.reflectivity,g.refractionRatio.value=w.refractionRatio,g.maxMipLevel.value=e.get(B).__maxMipLevel),w.lightMap&&(g.lightMap.value=w.lightMap,g.lightMapIntensity.value=w.lightMapIntensity),w.aoMap&&(g.aoMap.value=w.aoMap,g.aoMapIntensity.value=w.aoMapIntensity),w.map)var L=w.map;else w.specularMap?L=w.specularMap:w.displacementMap?L=w.displacementMap:w.normalMap?L=w.normalMap:w.bumpMap?L=w.bumpMap:w.roughnessMap?L=w.roughnessMap:w.metalnessMap?L=w.metalnessMap:w.alphaMap?L=w.alphaMap:w.emissiveMap&&(L=w.emissiveMap);if(L!==void 0&&(L.isWebGLRenderTarget&&(L=L.texture),L.matrixAutoUpdate===!0&&L.updateMatrix(),g.uvTransform.value.copy(L.matrix)),w.aoMap)var z=w.aoMap;else w.lightMap&&(z=w.lightMap);z!==void 0&&(z.isWebGLRenderTarget&&(z=z.texture),z.matrixAutoUpdate===!0&&z.updateMatrix(),g.uv2Transform.value.copy(z.matrix))}function l(g,w,B){g.roughness.value=w.roughness,g.metalness.value=w.metalness,w.roughnessMap&&(g.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(g.metalnessMap.value=w.metalnessMap),w.emissiveMap&&(g.emissiveMap.value=w.emissiveMap),w.bumpMap&&(g.bumpMap.value=w.bumpMap,g.bumpScale.value=w.bumpScale,w.side===1&&(g.bumpScale.value*=-1)),w.normalMap&&(g.normalMap.value=w.normalMap,g.normalScale.value.copy(w.normalScale),w.side===1&&g.normalScale.value.negate()),w.displacementMap&&(g.displacementMap.value=w.displacementMap,g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias),(w.envMap||B)&&(g.envMapIntensity.value=w.envMapIntensity)}return{refreshFogUniforms:function(g,w){g.fogColor.value.copy(w.color),w.isFog?(g.fogNear.value=w.near,g.fogFar.value=w.far):w.isFogExp2&&(g.fogDensity.value=w.density)},refreshMaterialUniforms:function(g,w,B,L,z){if(w.isMeshBasicMaterial)o(g,w);else if(w.isMeshLambertMaterial)o(g,w),w.emissiveMap&&(g.emissiveMap.value=w.emissiveMap);else if(w.isMeshToonMaterial)o(g,w),g.specular.value.copy(w.specular),g.shininess.value=Math.max(w.shininess,1e-4),w.gradientMap&&(g.gradientMap.value=w.gradientMap),w.emissiveMap&&(g.emissiveMap.value=w.emissiveMap),w.bumpMap&&(g.bumpMap.value=w.bumpMap,g.bumpScale.value=w.bumpScale,w.side===1&&(g.bumpScale.value*=-1)),w.normalMap&&(g.normalMap.value=w.normalMap,g.normalScale.value.copy(w.normalScale),w.side===1&&g.normalScale.value.negate()),w.displacementMap&&(g.displacementMap.value=w.displacementMap,g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias);else if(w.isMeshPhongMaterial)o(g,w),g.specular.value.copy(w.specular),g.shininess.value=Math.max(w.shininess,1e-4),w.emissiveMap&&(g.emissiveMap.value=w.emissiveMap),w.bumpMap&&(g.bumpMap.value=w.bumpMap,g.bumpScale.value=w.bumpScale,w.side===1&&(g.bumpScale.value*=-1)),w.normalMap&&(g.normalMap.value=w.normalMap,g.normalScale.value.copy(w.normalScale),w.side===1&&g.normalScale.value.negate()),w.displacementMap&&(g.displacementMap.value=w.displacementMap,g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias);else if(w.isMeshStandardMaterial)o(g,w,B),w.isMeshPhysicalMaterial?(l(g,w,B),g.reflectivity.value=w.reflectivity,g.clearcoat.value=w.clearcoat,g.clearcoatRoughness.value=w.clearcoatRoughness,w.sheen&&g.sheen.value.copy(w.sheen),w.clearcoatMap&&(g.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),g.clearcoatNormalMap.value=w.clearcoatNormalMap,w.side===1&&g.clearcoatNormalScale.value.negate()),g.transparency.value=w.transparency):l(g,w,B);else if(w.isMeshMatcapMaterial)o(g,w),w.matcap&&(g.matcap.value=w.matcap),w.bumpMap&&(g.bumpMap.value=w.bumpMap,g.bumpScale.value=w.bumpScale,w.side===1&&(g.bumpScale.value*=-1)),w.normalMap&&(g.normalMap.value=w.normalMap,g.normalScale.value.copy(w.normalScale),w.side===1&&g.normalScale.value.negate()),w.displacementMap&&(g.displacementMap.value=w.displacementMap,g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias);else if(w.isMeshDepthMaterial)o(g,w),w.displacementMap&&(g.displacementMap.value=w.displacementMap,g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias);else if(w.isMeshDistanceMaterial)o(g,w),w.displacementMap&&(g.displacementMap.value=w.displacementMap,g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias),g.referencePosition.value.copy(w.referencePosition),g.nearDistance.value=w.nearDistance,g.farDistance.value=w.farDistance;else if(w.isMeshNormalMaterial)o(g,w),w.bumpMap&&(g.bumpMap.value=w.bumpMap,g.bumpScale.value=w.bumpScale,w.side===1&&(g.bumpScale.value*=-1)),w.normalMap&&(g.normalMap.value=w.normalMap,g.normalScale.value.copy(w.normalScale),w.side===1&&g.normalScale.value.negate()),w.displacementMap&&(g.displacementMap.value=w.displacementMap,g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias);else if(w.isLineBasicMaterial)g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,w.isLineDashedMaterial&&(g.dashSize.value=w.dashSize,g.totalSize.value=w.dashSize+w.gapSize,g.scale.value=w.scale);else if(w.isPointsMaterial){if(g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,g.size.value=w.size*L,g.scale.value=.5*z,w.map&&(g.map.value=w.map),w.alphaMap&&(g.alphaMap.value=w.alphaMap),w.map)var V=w.map;else w.alphaMap&&(V=w.alphaMap);V!==void 0&&(V.matrixAutoUpdate===!0&&V.updateMatrix(),g.uvTransform.value.copy(V.matrix))}else if(w.isSpriteMaterial){if(g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,g.rotation.value=w.rotation,w.map&&(g.map.value=w.map),w.alphaMap&&(g.alphaMap.value=w.alphaMap),w.map)var j=w.map;else w.alphaMap&&(j=w.alphaMap);j!==void 0&&(j.matrixAutoUpdate===!0&&j.updateMatrix(),g.uvTransform.value.copy(j.matrix))}else w.isShadowMaterial?(g.color.value.copy(w.color),g.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}}}function lw(e){var o;function l(){Hn=new Tc(We),oi=new Df(We,Hn,e),oi.isWebGL2===!1&&(Hn.get("WEBGL_depth_texture"),Hn.get("OES_texture_float"),Hn.get("OES_texture_half_float"),Hn.get("OES_texture_half_float_linear"),Hn.get("OES_standard_derivatives"),Hn.get("OES_element_index_uint"),Hn.get("ANGLE_instanced_arrays")),Hn.get("OES_texture_float_linear"),Jf=new P2(We,Hn,oi),xn=new UB(We,Hn,oi),xn.scissor(Lt.copy(zr).multiplyScalar(Pr).floor()),xn.viewport(go.copy(cr).multiplyScalar(Pr).floor()),CA=new Mh(We),ta=new BB,Dh=new DB(We,Hn,xn,ta,oi,Jf,CA),kv=new dr(We,oi),CC=new Sc(We,kv,CA),Gv=new $1(We,CC,kv,CA),$M=new q1(We),Vv=new _B(Be,Hn,oi),MC=new OB(ta),mx=new TB,Wv=new PB,Sd=new Ja(Be,xn,Gv,de),t_=new Hl(We,Hn,CA,oi),e_=new kA(We,Hn,CA,oi),CA.programs=Vv.programs,Be.capabilities=oi,Be.extensions=Hn,Be.properties=ta,Be.renderLists=mx,Be.state=xn,Be.info=CA}function g(Rt){Rt.preventDefault(),$e=!0}function w(){$e=!1,l()}function B(Rt){Rt=Rt.target,Rt.removeEventListener("dispose",B),L(Rt),ta.remove(Rt)}function L(Rt){var Ne=ta.get(Rt).program;Rt.program=void 0,Ne!==void 0&&Vv.releaseProgram(Ne)}function z(Rt,Ne){Rt.render(function(Ae){Be.renderBufferImmediate(Ae,Ne)})}function V(Rt,Ne,Ae,je){if(Rt.visible!==!1){if(Rt.layers.test(Ne.layers)){if(Rt.isGroup)Ae=Rt.renderOrder;else if(Rt.isLOD)Rt.autoUpdate===!0&&Rt.update(Ne);else if(Rt.isLight)Ke.pushLight(Rt),Rt.castShadow&&Ke.pushShadow(Rt);else if(Rt.isSprite){if(!Rt.frustumCulled||Vr.intersectsSprite(Rt)){je&&Qn.setFromMatrixPosition(Rt.matrixWorld).applyMatrix4(jo);var Cr=Gv.update(Rt),si=Rt.material;si.visible&&De.push(Rt,Cr,si,Ae,Qn.z,null)}}else if(Rt.isImmediateRenderObject)je&&Qn.setFromMatrixPosition(Rt.matrixWorld).applyMatrix4(jo),De.push(Rt,null,Rt.material,Ae,Qn.z,null);else if((Rt.isMesh||Rt.isLine||Rt.isPoints)&&(Rt.isSkinnedMesh&&Rt.skeleton.frame!==CA.render.frame&&(Rt.skeleton.update(),Rt.skeleton.frame=CA.render.frame),!Rt.frustumCulled||Vr.intersectsObject(Rt)))if(je&&Qn.setFromMatrixPosition(Rt.matrixWorld).applyMatrix4(jo),Cr=Gv.update(Rt),si=Rt.material,Array.isArray(si))for(var Nr=Cr.groups,In=0,ei=Nr.length;In<ei;In++){var qi=Nr[In],Pi=si[qi.materialIndex];Pi&&Pi.visible&&De.push(Rt,Cr,Pi,Ae,Qn.z,qi)}else si.visible&&De.push(Rt,Cr,si,Ae,Qn.z,null)}for(Rt=Rt.children,In=0,ei=Rt.length;In<ei;In++)V(Rt[In],Ne,Ae,je)}}function j(Rt,Ne,Ae,je){for(var Cr=0,si=Rt.length;Cr<si;Cr++){var Nr=Rt[Cr],In=Nr.object,ei=Nr.geometry,qi=je===void 0?Nr.material:je;if(Nr=Nr.group,Ae.isArrayCamera){io=Ae;for(var Pi=Ae.cameras,Qc=0,Xo=Pi.length;Qc<Xo;Qc++){var ea=Pi[Qc];In.layers.test(ea.layers)&&(xn.viewport(go.copy(ea.viewport)),Ke.setupLights(ea),et(In,Ne,ea,ei,qi,Nr))}}else io=null,et(In,Ne,Ae,ei,qi,Nr)}}function et(Rt,Ne,Ae,je,Cr,si){if(Rt.onBeforeRender(Be,Ne,Ae,je,Cr,si),Ke=Wv.get(Ne,io||Ae),Rt.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,Rt.matrixWorld),Rt.normalMatrix.getNormalMatrix(Rt.modelViewMatrix),Rt.isImmediateRenderObject){var Nr=it(Ae,Ne,Cr,Rt);xn.setMaterial(Cr),Un=o=null,yi=!1,z(Rt,Nr)}else Be.renderBufferDirect(Ae,Ne,je,Cr,Rt,si);Rt.onAfterRender(Be,Ne,Ae,je,Cr,si),Ke=Wv.get(Ne,io||Ae)}function tt(Rt,Ne,Ae){var je=ta.get(Rt),Cr=Ke.state.lights,si=Cr.state.version;Ae=Vv.getParameters(Rt,Cr.state,Ke.state.shadowsArray,Ne,Ir.numPlanes,Ir.numIntersection,Ae);var Nr=Vv.getProgramCacheKey(Ae),In=je.program,ei=!0;if(In===void 0)Rt.addEventListener("dispose",B);else if(In.cacheKey!==Nr)L(Rt);else{if(je.lightsStateVersion!==si)je.lightsStateVersion=si;else if(Ae.shaderID!==void 0)return;ei=!1}if(ei&&(In=Vv.acquireProgram(Ae,Nr),je.program=In,je.uniforms=Ae.uniforms,je.outputEncoding=Ae.outputEncoding,Rt.program=In),Ae=In.getAttributes(),Rt.morphTargets)for(Nr=Rt.numSupportedMorphTargets=0;Nr<Be.maxMorphTargets;Nr++)0<=Ae["morphTarget"+Nr]&&Rt.numSupportedMorphTargets++;if(Rt.morphNormals)for(Nr=Rt.numSupportedMorphNormals=0;Nr<Be.maxMorphNormals;Nr++)0<=Ae["morphNormal"+Nr]&&Rt.numSupportedMorphNormals++;Ae=je.uniforms,(!Rt.isShaderMaterial&&!Rt.isRawShaderMaterial||Rt.clipping===!0)&&(je.numClippingPlanes=Ir.numPlanes,je.numIntersection=Ir.numIntersection,Ae.clippingPlanes=Ir.uniform),je.environment=Rt.isMeshStandardMaterial?Ne.environment:null,je.fog=Ne.fog,je.needsLights=Rt.isMeshLambertMaterial||Rt.isMeshToonMaterial||Rt.isMeshPhongMaterial||Rt.isMeshStandardMaterial||Rt.isShadowMaterial||Rt.isShaderMaterial&&Rt.lights===!0,je.lightsStateVersion=si,je.needsLights&&(Ae.ambientLightColor.value=Cr.state.ambient,Ae.lightProbe.value=Cr.state.probe,Ae.directionalLights.value=Cr.state.directional,Ae.directionalLightShadows.value=Cr.state.directionalShadow,Ae.spotLights.value=Cr.state.spot,Ae.spotLightShadows.value=Cr.state.spotShadow,Ae.rectAreaLights.value=Cr.state.rectArea,Ae.pointLights.value=Cr.state.point,Ae.pointLightShadows.value=Cr.state.pointShadow,Ae.hemisphereLights.value=Cr.state.hemi,Ae.directionalShadowMap.value=Cr.state.directionalShadowMap,Ae.directionalShadowMatrix.value=Cr.state.directionalShadowMatrix,Ae.spotShadowMap.value=Cr.state.spotShadowMap,Ae.spotShadowMatrix.value=Cr.state.spotShadowMatrix,Ae.pointShadowMap.value=Cr.state.pointShadowMap,Ae.pointShadowMatrix.value=Cr.state.pointShadowMatrix),Rt=je.program.getUniforms(),Rt=fd.seqWithValue(Rt.seq,Ae),je.uniformsList=Rt}function it(Rt,Ne,Ae,je){Dh.resetTextureUnits();var Cr=Ne.fog,si=Ae.isMeshStandardMaterial?Ne.environment:null,Nr=Mr===null?Be.outputEncoding:Mr.texture.encoding,In=ta.get(Ae),ei=Ke.state.lights;Tr&&(On||Rt!==ti)&&Ir.setState(Ae.clippingPlanes,Ae.clipIntersection,Ae.clipShadows,Rt,In,Rt===ti&&Ae.id===Yn),Ae.version===In.__version?In.program===void 0||Ae.fog&&In.fog!==Cr||In.environment!==si||In.needsLights&&In.lightsStateVersion!==ei.state.version?tt(Ae,Ne,je):In.numClippingPlanes===void 0||In.numClippingPlanes===Ir.numPlanes&&In.numIntersection===Ir.numIntersection?In.outputEncoding!==Nr&&tt(Ae,Ne,je):tt(Ae,Ne,je):(tt(Ae,Ne,je),In.__version=Ae.version);var qi=!1,Pi=!1,Qc=!1;if(Ne=In.program,Nr=Ne.getUniforms(),ei=In.uniforms,xn.useProgram(Ne.program)&&(Qc=Pi=qi=!0),Ae.id!==Yn&&(Yn=Ae.id,Pi=!0),(qi||ti!==Rt)&&(Nr.setValue(We,"projectionMatrix",Rt.projectionMatrix),oi.logarithmicDepthBuffer&&Nr.setValue(We,"logDepthBufFC",2/(Math.log(Rt.far+1)/Math.LN2)),ti!==Rt&&(ti=Rt,Qc=Pi=!0),(Ae.isShaderMaterial||Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshStandardMaterial||Ae.envMap)&&(qi=Nr.map.cameraPosition,qi!==void 0&&qi.setValue(We,Qn.setFromMatrixPosition(Rt.matrixWorld))),(Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshLambertMaterial||Ae.isMeshBasicMaterial||Ae.isMeshStandardMaterial||Ae.isShaderMaterial)&&Nr.setValue(We,"isOrthographic",Rt.isOrthographicCamera===!0),(Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshLambertMaterial||Ae.isMeshBasicMaterial||Ae.isMeshStandardMaterial||Ae.isShaderMaterial||Ae.skinning)&&Nr.setValue(We,"viewMatrix",Rt.matrixWorldInverse)),Ae.skinning&&(Nr.setOptional(We,je,"bindMatrix"),Nr.setOptional(We,je,"bindMatrixInverse"),Rt=je.skeleton))if(qi=Rt.bones,oi.floatVertexTextures){if(Rt.boneTexture===void 0){qi=Math.sqrt(4*qi.length),qi=ii.ceilPowerOfTwo(qi),qi=Math.max(qi,4);var Xo=new Float32Array(qi*qi*4);Xo.set(Rt.boneMatrices);var ea=new Pe(Xo,qi,qi,1023,1015);Rt.boneMatrices=Xo,Rt.boneTexture=ea,Rt.boneTextureSize=qi}Nr.setValue(We,"boneTexture",Rt.boneTexture,Dh),Nr.setValue(We,"boneTextureSize",Rt.boneTextureSize)}else Nr.setOptional(We,Rt,"boneMatrices");return(Pi||In.receiveShadow!==je.receiveShadow)&&(In.receiveShadow=je.receiveShadow,Nr.setValue(We,"receiveShadow",je.receiveShadow)),Pi&&(Nr.setValue(We,"toneMappingExposure",Be.toneMappingExposure),Nr.setValue(We,"toneMappingWhitePoint",Be.toneMappingWhitePoint),In.needsLights&&(Pi=Qc,ei.ambientLightColor.needsUpdate=Pi,ei.lightProbe.needsUpdate=Pi,ei.directionalLights.needsUpdate=Pi,ei.directionalLightShadows.needsUpdate=Pi,ei.pointLights.needsUpdate=Pi,ei.pointLightShadows.needsUpdate=Pi,ei.spotLights.needsUpdate=Pi,ei.spotLightShadows.needsUpdate=Pi,ei.rectAreaLights.needsUpdate=Pi,ei.hemisphereLights.needsUpdate=Pi),Cr&&Ae.fog&&MC.refreshFogUniforms(ei,Cr),MC.refreshMaterialUniforms(ei,Ae,si,Pr,rr),ei.ltc_1!==void 0&&(ei.ltc_1.value=Or.LTC_1),ei.ltc_2!==void 0&&(ei.ltc_2.value=Or.LTC_2),fd.upload(We,In.uniformsList,ei,Dh)),Ae.isShaderMaterial&&Ae.uniformsNeedUpdate===!0&&(fd.upload(We,In.uniformsList,ei,Dh),Ae.uniformsNeedUpdate=!1),Ae.isSpriteMaterial&&Nr.setValue(We,"center",je.center),Nr.setValue(We,"modelViewMatrix",je.modelViewMatrix),Nr.setValue(We,"normalMatrix",je.normalMatrix),Nr.setValue(We,"modelMatrix",je.matrixWorld),Ne}e=e||{};var rt=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),At=e.context!==void 0?e.context:null,mt=e.alpha!==void 0?e.alpha:!1,Vt=e.depth!==void 0?e.depth:!0,re=e.stencil!==void 0?e.stencil:!0,qt=e.antialias!==void 0?e.antialias:!1,de=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,oe=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,_e=e.powerPreference!==void 0?e.powerPreference:"default",ee=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,De=null,Ke=null;this.domElement=rt,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingWhitePoint=this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Be=this,$e=!1,Xe=null,Gr=0,gn=0,Mr=null,pn=null,Yn=-1,Un=o=null,yi=!1,ti=null,io=null,go=new f,Lt=new f,jt=null,Le=rt.width,rr=rt.height,Pr=1,ke=null,Kt=null,cr=new f(0,0,Le,rr),zr=new f(0,0,Le,rr),yn=!1,Vr=new Br,Ir=new cu,Tr=!1,On=!1,jo=new I,Qn=new C;try{mt={alpha:mt,depth:Vt,stencil:re,antialias:qt,premultipliedAlpha:de,preserveDrawingBuffer:oe,powerPreference:_e,failIfMajorPerformanceCaveat:ee},rt.addEventListener("webglcontextlost",g,!1),rt.addEventListener("webglcontextrestored",w,!1);var We=At||rt.getContext("webgl",mt)||rt.getContext("experimental-webgl",mt);if(We===null)throw rt.getContext("webgl")!==null?Error("Error creating WebGL context with your selected attributes."):Error("Error creating WebGL context.");We.getShaderPrecisionFormat===void 0&&(We.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Rt){throw console.error("THREE.WebGLRenderer: "+Rt.message),Rt}var Hn,oi,xn,CA,ta,Dh,kv,CC,Gv,Vv,MC,mx,Wv,Sd,$M,t_,e_,Jf;l();var Ld=new U2(Be,We);this.xr=Ld;var r_=new R2(Be,Gv,oi.maxTextureSize);this.shadowMap=r_,this.getContext=function(){return We},this.getContextAttributes=function(){return We.getContextAttributes()},this.forceContextLoss=function(){var Rt=Hn.get("WEBGL_lose_context");Rt&&Rt.loseContext()},this.forceContextRestore=function(){var Rt=Hn.get("WEBGL_lose_context");Rt&&Rt.restoreContext()},this.getPixelRatio=function(){return Pr},this.setPixelRatio=function(Rt){Rt!==void 0&&(Pr=Rt,this.setSize(Le,rr,!1))},this.getSize=function(Rt){return Rt===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),Rt=new c),Rt.set(Le,rr)},this.setSize=function(Rt,Ne,Ae){Ld.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Le=Rt,rr=Ne,rt.width=Math.floor(Rt*Pr),rt.height=Math.floor(Ne*Pr),Ae!==!1&&(rt.style.width=Rt+"px",rt.style.height=Ne+"px"),this.setViewport(0,0,Rt,Ne))},this.getDrawingBufferSize=function(Rt){return Rt===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),Rt=new c),Rt.set(Le*Pr,rr*Pr).floor()},this.setDrawingBufferSize=function(Rt,Ne,Ae){Le=Rt,rr=Ne,Pr=Ae,rt.width=Math.floor(Rt*Ae),rt.height=Math.floor(Ne*Ae),this.setViewport(0,0,Rt,Ne)},this.getCurrentViewport=function(Rt){return Rt===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),Rt=new f),Rt.copy(go)},this.getViewport=function(Rt){return Rt.copy(cr)},this.setViewport=function(Rt,Ne,Ae,je){Rt.isVector4?cr.set(Rt.x,Rt.y,Rt.z,Rt.w):cr.set(Rt,Ne,Ae,je),xn.viewport(go.copy(cr).multiplyScalar(Pr).floor())},this.getScissor=function(Rt){return Rt.copy(zr)},this.setScissor=function(Rt,Ne,Ae,je){Rt.isVector4?zr.set(Rt.x,Rt.y,Rt.z,Rt.w):zr.set(Rt,Ne,Ae,je),xn.scissor(Lt.copy(zr).multiplyScalar(Pr).floor())},this.getScissorTest=function(){return yn},this.setScissorTest=function(Rt){xn.setScissorTest(yn=Rt)},this.setOpaqueSort=function(Rt){ke=Rt},this.setTransparentSort=function(Rt){Kt=Rt},this.getClearColor=function(){return Sd.getClearColor()},this.setClearColor=function(){Sd.setClearColor.apply(Sd,arguments)},this.getClearAlpha=function(){return Sd.getClearAlpha()},this.setClearAlpha=function(){Sd.setClearAlpha.apply(Sd,arguments)},this.clear=function(Rt,Ne,Ae){var je=0;(Rt===void 0||Rt)&&(je|=16384),(Ne===void 0||Ne)&&(je|=256),(Ae===void 0||Ae)&&(je|=1024),We.clear(je)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){rt.removeEventListener("webglcontextlost",g,!1),rt.removeEventListener("webglcontextrestored",w,!1),mx.dispose(),Wv.dispose(),ta.dispose(),Gv.dispose(),Ld.dispose(),vx.stop()},this.renderBufferImmediate=function(Rt,Ne){xn.initAttributes();var Ae=ta.get(Rt);Rt.hasPositions&&!Ae.position&&(Ae.position=We.createBuffer()),Rt.hasNormals&&!Ae.normal&&(Ae.normal=We.createBuffer()),Rt.hasUvs&&!Ae.uv&&(Ae.uv=We.createBuffer()),Rt.hasColors&&!Ae.color&&(Ae.color=We.createBuffer()),Ne=Ne.getAttributes(),Rt.hasPositions&&(We.bindBuffer(34962,Ae.position),We.bufferData(34962,Rt.positionArray,35048),xn.enableAttribute(Ne.position),We.vertexAttribPointer(Ne.position,3,5126,!1,0,0)),Rt.hasNormals&&(We.bindBuffer(34962,Ae.normal),We.bufferData(34962,Rt.normalArray,35048),xn.enableAttribute(Ne.normal),We.vertexAttribPointer(Ne.normal,3,5126,!1,0,0)),Rt.hasUvs&&(We.bindBuffer(34962,Ae.uv),We.bufferData(34962,Rt.uvArray,35048),xn.enableAttribute(Ne.uv),We.vertexAttribPointer(Ne.uv,2,5126,!1,0,0)),Rt.hasColors&&(We.bindBuffer(34962,Ae.color),We.bufferData(34962,Rt.colorArray,35048),xn.enableAttribute(Ne.color),We.vertexAttribPointer(Ne.color,3,5126,!1,0,0)),xn.disableUnusedAttributes(),We.drawArrays(4,0,Rt.count),Rt.count=0};var ME=new K;this.renderBufferDirect=function(Rt,Ne,Ae,je,Cr,si){Ne===null&&(Ne=ME);var Nr=Cr.isMesh&&0>Cr.matrixWorld.determinant(),In=it(Rt,Ne,je,Cr);xn.setMaterial(je,Nr);var ei=!1;if((o!==Ae.id||Un!==In.id||yi!==(je.wireframe===!0))&&(o=Ae.id,Un=In.id,yi=je.wireframe===!0,ei=!0),(je.morphTargets||je.morphNormals)&&($M.update(Cr,Ae,je,In),ei=!0),Cr.isInstancedMesh===!0&&(ei=!0),Rt=Ae.index,Ne=Ae.attributes.position,Rt===null){if(Ne===void 0||Ne.count===0)return}else if(Rt.count===0)return;var qi=1;if(je.wireframe===!0&&(Rt=CC.getWireframeAttribute(Ae),qi=2),Nr=t_,Rt!==null){var Pi=kv.get(Rt);Nr=e_,Nr.setIndex(Pi)}if(ei){if(oi.isWebGL2!==!1||!Cr.isInstancedMesh&&!Ae.isInstancedBufferGeometry||Hn.get("ANGLE_instanced_arrays")!==null){xn.initAttributes(),ei=Ae.attributes,In=In.getAttributes();var Qc=je.defaultAttributeValues;for(jg in In){var Xo=In[jg];if(0<=Xo){var ea=ei[jg];if(ea!==void 0){var qf=ea.normalized,n_=ea.itemSize,Oh=kv.get(ea);if(Oh!==void 0){var yx=Oh.buffer,Wg=Oh.type;if(Oh=Oh.bytesPerElement,ea.isInterleavedBufferAttribute){var jv=ea.data,_E=jv.stride;ea=ea.offset,jv&&jv.isInstancedInterleavedBuffer?(xn.enableAttributeAndDivisor(Xo,jv.meshPerAttribute),Ae._maxInstanceCount===void 0&&(Ae._maxInstanceCount=jv.meshPerAttribute*jv.count)):xn.enableAttribute(Xo),We.bindBuffer(34962,yx),xn.vertexAttribPointer(Xo,n_,Wg,qf,_E*Oh,ea*Oh)}else ea.isInstancedBufferAttribute?(xn.enableAttributeAndDivisor(Xo,ea.meshPerAttribute),Ae._maxInstanceCount===void 0&&(Ae._maxInstanceCount=ea.meshPerAttribute*ea.count)):xn.enableAttribute(Xo),We.bindBuffer(34962,yx),xn.vertexAttribPointer(Xo,n_,Wg,qf,0,0)}}else if(jg==="instanceMatrix")Oh=kv.get(Cr.instanceMatrix),Oh!==void 0&&(yx=Oh.buffer,Wg=Oh.type,xn.enableAttributeAndDivisor(Xo+0,1),xn.enableAttributeAndDivisor(Xo+1,1),xn.enableAttributeAndDivisor(Xo+2,1),xn.enableAttributeAndDivisor(Xo+3,1),We.bindBuffer(34962,yx),We.vertexAttribPointer(Xo+0,4,Wg,!1,64,0),We.vertexAttribPointer(Xo+1,4,Wg,!1,64,16),We.vertexAttribPointer(Xo+2,4,Wg,!1,64,32),We.vertexAttribPointer(Xo+3,4,Wg,!1,64,48));else if(Qc!==void 0&&(qf=Qc[jg],qf!==void 0))switch(qf.length){case 2:We.vertexAttrib2fv(Xo,qf);break;case 3:We.vertexAttrib3fv(Xo,qf);break;case 4:We.vertexAttrib4fv(Xo,qf);break;default:We.vertexAttrib1fv(Xo,qf)}}}xn.disableUnusedAttributes()}Rt!==null&&We.bindBuffer(34963,Pi.buffer)}var jg=Ae.drawRange.start*qi;ei=si!==null?si.start*qi:0,Pi=Math.max(jg,ei),si=Math.max(0,Math.min(Rt!==null?Rt.count:Ne.count,jg+Ae.drawRange.count*qi,ei+(si!==null?si.count*qi:Infinity))-1-Pi+1),si!==0&&(Cr.isMesh?je.wireframe===!0?(xn.setLineWidth(je.wireframeLinewidth*(Mr===null?Pr:1)),Nr.setMode(1)):Nr.setMode(4):Cr.isLine?(je=je.linewidth,je===void 0&&(je=1),xn.setLineWidth(je*(Mr===null?Pr:1)),Cr.isLineSegments?Nr.setMode(1):Cr.isLineLoop?Nr.setMode(2):Nr.setMode(3)):Cr.isPoints?Nr.setMode(0):Cr.isSprite&&Nr.setMode(4),Cr.isInstancedMesh?Nr.renderInstances(Ae,Pi,si,Cr.count):Ae.isInstancedBufferGeometry?Nr.renderInstances(Ae,Pi,si,Math.min(Ae.instanceCount,Ae._maxInstanceCount)):Nr.render(Pi,si))},this.compile=function(Rt,Ne){Ke=Wv.get(Rt,Ne),Ke.init(),Rt.traverse(function(je){je.isLight&&(Ke.pushLight(je),je.castShadow&&Ke.pushShadow(je))}),Ke.setupLights(Ne);var Ae={};Rt.traverse(function(je){var Cr=je.material;if(Cr)if(Array.isArray(Cr))for(var si=0;si<Cr.length;si++){var Nr=Cr[si];!(Nr.uuid in Ae)&&(tt(Nr,Rt,je),Ae[Nr.uuid]=!0)}else!(Cr.uuid in Ae)&&(tt(Cr,Rt,je),Ae[Cr.uuid]=!0)})};var _C=null,vx=new Bn;vx.setAnimationLoop(function(Rt){Ld.isPresenting||_C&&_C(Rt)}),typeof window!="undefined"&&vx.setContext(window),this.setAnimationLoop=function(Rt){_C=Rt,Ld.setAnimationLoop(Rt),vx.start()},this.render=function(Rt,Ne,Ae,je){if(Ae!==void 0){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var Cr=Ae}if(je!==void 0){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var si=je}Ne&&Ne.isCamera?$e||(Un=o=null,yi=!1,Yn=-1,ti=null,Rt.autoUpdate===!0&&Rt.updateMatrixWorld(),Ne.parent===null&&Ne.updateMatrixWorld(),Ld.enabled&&Ld.isPresenting&&(Ne=Ld.getCamera(Ne)),Rt.onBeforeRender(Be,Rt,Ne,Cr||Mr),Ke=Wv.get(Rt,Ne),Ke.init(),jo.multiplyMatrices(Ne.projectionMatrix,Ne.matrixWorldInverse),Vr.setFromProjectionMatrix(jo),On=this.localClippingEnabled,Tr=Ir.init(this.clippingPlanes,On,Ne),De=mx.get(Rt,Ne),De.init(),V(Rt,Ne,0,Be.sortObjects),De.finish(),Be.sortObjects===!0&&De.sort(ke,Kt),Tr&&Ir.beginShadows(),r_.render(Ke.state.shadowsArray,Rt,Ne),Ke.setupLights(Ne),Tr&&Ir.endShadows(),this.info.autoReset&&this.info.reset(),Cr!==void 0&&this.setRenderTarget(Cr),Sd.render(De,Rt,Ne,si),Ae=De.opaque,je=De.transparent,Rt.overrideMaterial?(Cr=Rt.overrideMaterial,Ae.length&&j(Ae,Rt,Ne,Cr),je.length&&j(je,Rt,Ne,Cr)):(Ae.length&&j(Ae,Rt,Ne),je.length&&j(je,Rt,Ne)),Rt.onAfterRender(Be,Rt,Ne),Mr!==null&&(Dh.updateRenderTargetMipmap(Mr),Dh.updateMultisampleRenderTarget(Mr)),xn.buffers.depth.setTest(!0),xn.buffers.depth.setMask(!0),xn.buffers.color.setMask(!0),xn.setPolygonOffset(!1),Ke=De=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(Rt){Xe!==Rt&&Mr===null&&We.bindFramebuffer(36160,Rt),Xe=Rt},this.getActiveCubeFace=function(){return Gr},this.getActiveMipmapLevel=function(){return gn},this.getRenderTarget=function(){return Mr},this.setRenderTarget=function(Rt,Ne,Ae){Mr=Rt,Gr=Ne,gn=Ae,Rt&&ta.get(Rt).__webglFramebuffer===void 0&&Dh.setupRenderTarget(Rt);var je=Xe,Cr=!1;Rt?(je=ta.get(Rt).__webglFramebuffer,Rt.isWebGLCubeRenderTarget?(je=je[Ne||0],Cr=!0):je=Rt.isWebGLMultisampleRenderTarget?ta.get(Rt).__webglMultisampledFramebuffer:je,go.copy(Rt.viewport),Lt.copy(Rt.scissor),jt=Rt.scissorTest):(go.copy(cr).multiplyScalar(Pr).floor(),Lt.copy(zr).multiplyScalar(Pr).floor(),jt=yn),pn!==je&&(We.bindFramebuffer(36160,je),pn=je),xn.viewport(go),xn.scissor(Lt),xn.setScissorTest(jt),Cr&&(Rt=ta.get(Rt.texture),We.framebufferTexture2D(36160,36064,34069+(Ne||0),Rt.__webglTexture,Ae||0))},this.readRenderTargetPixels=function(Rt,Ne,Ae,je,Cr,si,Nr){if(Rt&&Rt.isWebGLRenderTarget){var In=ta.get(Rt).__webglFramebuffer;if(Rt.isWebGLCubeRenderTarget&&Nr!==void 0&&(In=In[Nr]),In){Nr=!1,In!==pn&&(We.bindFramebuffer(36160,In),Nr=!0);try{var ei=Rt.texture,qi=ei.format,Pi=ei.type;qi!==1023&&Jf.convert(qi)!==We.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):Pi===1009||Jf.convert(Pi)===We.getParameter(35738)||Pi===1015&&(oi.isWebGL2||Hn.get("OES_texture_float")||Hn.get("WEBGL_color_buffer_float"))||Pi===1016&&(oi.isWebGL2?Hn.get("EXT_color_buffer_float"):Hn.get("EXT_color_buffer_half_float"))?We.checkFramebufferStatus(36160)===36053?0<=Ne&&Ne<=Rt.width-je&&0<=Ae&&Ae<=Rt.height-Cr&&We.readPixels(Ne,Ae,je,Cr,Jf.convert(qi),Jf.convert(Pi),si):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{Nr&&We.bindFramebuffer(36160,pn)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(Rt,Ne,Ae){Ae===void 0&&(Ae=0);var je=Math.pow(2,-Ae),Cr=Math.floor(Ne.image.width*je);je=Math.floor(Ne.image.height*je);var si=Jf.convert(Ne.format);Dh.setTexture2D(Ne,0),We.copyTexImage2D(3553,Ae,si,Rt.x,Rt.y,Cr,je,0),xn.unbindTexture()},this.copyTextureToTexture=function(Rt,Ne,Ae,je){je===void 0&&(je=0);var Cr=Ne.image.width,si=Ne.image.height,Nr=Jf.convert(Ae.format),In=Jf.convert(Ae.type);Dh.setTexture2D(Ae,0),Ne.isDataTexture?We.texSubImage2D(3553,je,Rt.x,Rt.y,Cr,si,Nr,In,Ne.image.data):Ne.isCompressedTexture?We.compressedTexSubImage2D(3553,je,Rt.x,Rt.y,Ne.mipmaps[0].width,Ne.mipmaps[0].height,Nr,Ne.mipmaps[0].data):We.texSubImage2D(3553,je,Rt.x,Rt.y,Nr,In,Ne.image),je===0&&Ae.generateMipmaps&&We.generateMipmap(3553),xn.unbindTexture()},this.initTexture=function(Rt){Dh.setTexture2D(Rt,0),xn.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ny(e,o){this.name="",this.color=new Bt(e),this.density=o!==void 0?o:25e-5}function iy(e,o,l){this.name="",this.color=new Bt(e),this.near=o!==void 0?o:1,this.far=l!==void 0?l:1e3}function zf(e,o){this.array=e,this.stride=o,this.count=e!==void 0?e.length/o:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function I0(e,o,l,g){this.name="",this.data=e,this.itemSize=o,this.offset=l,this.normalized=g===!0}function gd(e){le.call(this),this.type="SpriteMaterial",this.color=new Bt(16777215),this.alphaMap=this.map=null,this.rotation=0,this.transparent=this.sizeAttenuation=!0,this.setValues(e)}function T0(e){if(D.call(this),this.type="Sprite",Hv===void 0){Hv=new yt;var o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);o=new zf(o,5),Hv.setIndex([0,1,2,0,2,3]),Hv.setAttribute("position",new I0(o,3,0,!1)),Hv.setAttribute("uv",new I0(o,2,3,!1))}this.geometry=Hv,this.material=e!==void 0?e:new gd,this.center=new c(.5,.5)}function oy(e,o,l,g,w,B){Qv.subVectors(e,l).addScalar(.5).multiply(g),w!==void 0?(d1.x=B*Qv.x-w*Qv.y,d1.y=w*Qv.x+B*Qv.y):d1.copy(Qv),e.copy(o),e.x+=d1.x,e.y+=d1.y,e.applyMatrix4(MM)}function S0(){D.call(this),this._currentLevel=0,this.type="LOD",vn(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function sy(e,o){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Dt.call(this,e,o),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new I,this.bindMatrixInverse=new I}function ay(e,o){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,o===void 0)this.calculateInverses();else if(this.bones.length===o.length)this.boneInverses=o.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],e=0,o=this.bones.length;e<o;e++)this.boneInverses.push(new I)}function hw(){D.call(this),this.type="Bone"}function Ay(e,o,l){Dt.call(this,e,o),this.instanceMatrix=new Me(new Float32Array(16*l),16),this.count=l,this.frustumCulled=!1}function es(e){le.call(this),this.type="LineBasicMaterial",this.color=new Bt(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.morphTargets=!1,this.setValues(e)}function ju(e,o,l){l===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),D.call(this),this.type="Line",this.geometry=e!==void 0?e:new yt,this.material=o!==void 0?o:new es,this.updateMorphTargets()}function ps(e,o){ju.call(this,e,o),this.type="LineSegments"}function uy(e,o){ju.call(this,e,o),this.type="LineLoop"}function Bh(e){le.call(this),this.type="PointsMaterial",this.color=new Bt(16777215),this.alphaMap=this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}function $m(e,o){D.call(this),this.type="Points",this.geometry=e!==void 0?e:new yt,this.material=o!==void 0?o:new Bh,this.updateMorphTargets()}function cw(e,o,l,g,w,B,L){var z=uC.distanceSqToPoint(e);z<l&&(l=new C,uC.closestPointToPoint(e,l),l.applyMatrix4(g),e=w.ray.origin.distanceTo(l),e<w.near||e>w.far||B.push({distance:e,distanceToRay:Math.sqrt(z),point:l,index:o,face:null,object:L}))}function fw(e,o,l,g,w,B,L,z,V){d.call(this,e,o,l,g,w,B,L,z,V),this.format=L!==void 0?L:1022,this.minFilter=B!==void 0?B:1006,this.magFilter=w!==void 0?w:1006,this.generateMipmaps=!1}function tv(e,o,l,g,w,B,L,z,V,j,et,tt){d.call(this,null,B,L,z,V,j,g,w,et,tt),this.image={width:o,height:l},this.mipmaps=e,this.generateMipmaps=this.flipY=!1}function L0(e,o,l,g,w,B,L,z,V){d.call(this,e,o,l,g,w,B,L,z,V),this.needsUpdate=!0}function F0(e,o,l,g,w,B,L,z,V,j){if(j=j!==void 0?j:1026,j!==1026&&j!==1027)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");l===void 0&&j===1026&&(l=1012),l===void 0&&j===1027&&(l=1020),d.call(this,null,g,w,B,L,z,j,l,V),this.image={width:e,height:o},this.magFilter=L!==void 0?L:1003,this.minFilter=z!==void 0?z:1003,this.generateMipmaps=this.flipY=!1}function ev(e){yt.call(this),this.type="WireframeGeometry";var o=[],l,g,w,B=[0,0],L={},z=["a","b","c"];if(e&&e.isGeometry){var V=e.faces,j=0;for(g=V.length;j<g;j++){var et=V[j];for(l=0;3>l;l++){var tt=et[z[l]],it=et[z[(l+1)%3]];B[0]=Math.min(tt,it),B[1]=Math.max(tt,it),tt=B[0]+","+B[1],L[tt]===void 0&&(L[tt]={index1:B[0],index2:B[1]})}}for(tt in L)j=L[tt],z=e.vertices[j.index1],o.push(z.x,z.y,z.z),z=e.vertices[j.index2],o.push(z.x,z.y,z.z)}else if(e&&e.isBufferGeometry)if(z=new C,e.index!==null){V=e.attributes.position,et=e.index;var rt=e.groups;for(rt.length===0&&(rt=[{start:0,count:et.count,materialIndex:0}]),e=0,w=rt.length;e<w;++e)for(j=rt[e],l=j.start,g=j.count,j=l,g=l+g;j<g;j+=3)for(l=0;3>l;l++)tt=et.getX(j+l),it=et.getX(j+(l+1)%3),B[0]=Math.min(tt,it),B[1]=Math.max(tt,it),tt=B[0]+","+B[1],L[tt]===void 0&&(L[tt]={index1:B[0],index2:B[1]});for(tt in L)j=L[tt],z.fromBufferAttribute(V,j.index1),o.push(z.x,z.y,z.z),z.fromBufferAttribute(V,j.index2),o.push(z.x,z.y,z.z)}else for(V=e.attributes.position,j=0,g=V.count/3;j<g;j++)for(l=0;3>l;l++)L=3*j+l,z.fromBufferAttribute(V,L),o.push(z.x,z.y,z.z),L=3*j+(l+1)%3,z.fromBufferAttribute(V,L),o.push(z.x,z.y,z.z);this.setAttribute("position",new _t(o,3))}function R0(e,o,l){xt.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:o,stacks:l},this.fromBufferGeometry(new rv(e,o,l)),this.mergeVertices()}function rv(e,o,l){yt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:o,stacks:l};var g=[],w=[],B=[],L=[],z=new C,V=new C,j=new C,et=new C,tt=new C,it,rt;3>e.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var At=o+1;for(it=0;it<=l;it++){var mt=it/l;for(rt=0;rt<=o;rt++){var Vt=rt/o;e(Vt,mt,V),w.push(V.x,V.y,V.z),0<=Vt-1e-5?(e(Vt-1e-5,mt,j),et.subVectors(V,j)):(e(Vt+1e-5,mt,j),et.subVectors(j,V)),0<=mt-1e-5?(e(Vt,mt-1e-5,j),tt.subVectors(V,j)):(e(Vt,mt+1e-5,j),tt.subVectors(j,V)),z.crossVectors(et,tt).normalize(),B.push(z.x,z.y,z.z),L.push(Vt,mt)}}for(it=0;it<l;it++)for(rt=0;rt<o;rt++)e=it*At+rt+1,z=(it+1)*At+rt+1,V=(it+1)*At+rt,g.push(it*At+rt,e,V),g.push(e,z,V);this.setIndex(g),this.setAttribute("position",new _t(w,3)),this.setAttribute("normal",new _t(B,3)),this.setAttribute("uv",new _t(L,2))}function P0(e,o,l,g){xt.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:o,radius:l,detail:g},this.fromBufferGeometry(new pu(e,o,l,g)),this.mergeVertices()}function pu(e,o,l,g){function w(j){z.push(j.x,j.y,j.z)}function B(j,et){j*=3,et.x=e[j+0],et.y=e[j+1],et.z=e[j+2]}function L(j,et,tt,it){0>it&&j.x===1&&(V[et]=j.x-1),tt.x===0&&tt.z===0&&(V[et]=it/2/Math.PI+.5)}yt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:o,radius:l,detail:g},l=l||1,g=g||0;var z=[],V=[];(function(j){for(var et=new C,tt=new C,it=new C,rt=0;rt<o.length;rt+=3){B(o[rt+0],et),B(o[rt+1],tt),B(o[rt+2],it);var At,mt,Vt=et,re=tt,qt=it,de=Math.pow(2,j),oe=[];for(mt=0;mt<=de;mt++){oe[mt]=[];var _e=Vt.clone().lerp(qt,mt/de),ee=re.clone().lerp(qt,mt/de),De=de-mt;for(At=0;At<=De;At++)oe[mt][At]=At===0&&mt===de?_e:_e.clone().lerp(ee,At/De)}for(mt=0;mt<de;mt++)for(At=0;At<2*(de-mt)-1;At++)Vt=Math.floor(At/2),At%2==0?(w(oe[mt][Vt+1]),w(oe[mt+1][Vt]),w(oe[mt][Vt])):(w(oe[mt][Vt+1]),w(oe[mt+1][Vt+1]),w(oe[mt+1][Vt]))}})(g),function(j){for(var et=new C,tt=0;tt<z.length;tt+=3)et.x=z[tt+0],et.y=z[tt+1],et.z=z[tt+2],et.normalize().multiplyScalar(j),z[tt+0]=et.x,z[tt+1]=et.y,z[tt+2]=et.z}(l),function(){for(var j=new C,et=0;et<z.length;et+=3)j.x=z[et+0],j.y=z[et+1],j.z=z[et+2],V.push(Math.atan2(j.z,-j.x)/2/Math.PI+.5,1-(Math.atan2(-j.y,Math.sqrt(j.x*j.x+j.z*j.z))/Math.PI+.5));j=new C,et=new C;for(var tt=new C,it=new C,rt=new c,At=new c,mt=new c,Vt=0,re=0;Vt<z.length;Vt+=9,re+=6){j.set(z[Vt+0],z[Vt+1],z[Vt+2]),et.set(z[Vt+3],z[Vt+4],z[Vt+5]),tt.set(z[Vt+6],z[Vt+7],z[Vt+8]),rt.set(V[re+0],V[re+1]),At.set(V[re+2],V[re+3]),mt.set(V[re+4],V[re+5]),it.copy(j).add(et).add(tt).divideScalar(3);var qt=Math.atan2(it.z,-it.x);L(rt,re+0,j,qt),L(At,re+2,et,qt),L(mt,re+4,tt,qt)}for(j=0;j<V.length;j+=6)et=V[j+0],tt=V[j+2],it=V[j+4],rt=Math.min(et,tt,it),.9<Math.max(et,tt,it)&&.1>rt&&(.2>et&&(V[j+0]+=1),.2>tt&&(V[j+2]+=1),.2>it&&(V[j+4]+=1))}(),this.setAttribute("position",new _t(z,3)),this.setAttribute("normal",new _t(z.slice(),3)),this.setAttribute("uv",new _t(V,2)),g===0?this.computeVertexNormals():this.normalizeNormals()}function U0(e,o){xt.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:o},this.fromBufferGeometry(new nv(e,o)),this.mergeVertices()}function nv(e,o){pu.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,o),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:o}}function D0(e,o){xt.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:o},this.fromBufferGeometry(new xg(e,o)),this.mergeVertices()}function xg(e,o){pu.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,o),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:o}}function O0(e,o){xt.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:o},this.fromBufferGeometry(new iv(e,o)),this.mergeVertices()}function iv(e,o){var l=(1+Math.sqrt(5))/2;pu.call(this,[-1,l,0,1,l,0,-1,-l,0,1,-l,0,0,-1,l,0,1,l,0,-1,-l,0,1,-l,l,0,-1,l,0,1,-l,0,-1,-l,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,o),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:o}}function H0(e,o){xt.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:o},this.fromBufferGeometry(new ov(e,o)),this.mergeVertices()}function ov(e,o){var l=(1+Math.sqrt(5))/2,g=1/l;pu.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-g,-l,0,-g,l,0,g,-l,0,g,l,-g,-l,0,-g,l,0,g,-l,0,g,l,0,-l,0,-g,l,0,-g,-l,0,g,l,0,g],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,o),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:o}}function N0(e,o,l,g,w,B){xt.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:o,radius:l,radialSegments:g,closed:w},B!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed."),e=new wg(e,o,l,g,w),this.tangents=e.tangents,this.normals=e.normals,this.binormals=e.binormals,this.fromBufferGeometry(e),this.mergeVertices()}function wg(e,o,l,g,w){function B(re){et=e.getPointAt(re/o,et);var qt=L.normals[re];for(re=L.binormals[re],it=0;it<=g;it++){var de=it/g*Math.PI*2,oe=Math.sin(de);de=-Math.cos(de),V.x=de*qt.x+oe*re.x,V.y=de*qt.y+oe*re.y,V.z=de*qt.z+oe*re.z,V.normalize(),At.push(V.x,V.y,V.z),z.x=et.x+l*V.x,z.y=et.y+l*V.y,z.z=et.z+l*V.z,rt.push(z.x,z.y,z.z)}}yt.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:o,radius:l,radialSegments:g,closed:w},o=o||64,l=l||1,g=g||8,w=w||!1;var L=e.computeFrenetFrames(o,w);this.tangents=L.tangents,this.normals=L.normals,this.binormals=L.binormals;var z=new C,V=new C,j=new c,et=new C,tt,it,rt=[],At=[],mt=[],Vt=[];for(tt=0;tt<o;tt++)B(tt);for(B(w===!1?o:0),tt=0;tt<=o;tt++)for(it=0;it<=g;it++)j.x=tt/o,j.y=it/g,mt.push(j.x,j.y);(function(){for(it=1;it<=o;it++)for(tt=1;tt<=g;tt++){var re=(g+1)*it+(tt-1),qt=(g+1)*it+tt,de=(g+1)*(it-1)+tt;Vt.push((g+1)*(it-1)+(tt-1),re,de),Vt.push(re,qt,de)}})(),this.setIndex(Vt),this.setAttribute("position",new _t(rt,3)),this.setAttribute("normal",new _t(At,3)),this.setAttribute("uv",new _t(mt,2))}function z0(e,o,l,g,w,B,L){xt.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:o,tubularSegments:l,radialSegments:g,p:w,q:B},L!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new sv(e,o,l,g,w,B)),this.mergeVertices()}function sv(e,o,l,g,w,B){function L(ee,De,Ke,Be,$e){var Xe=Math.sin(ee);De=Ke/De*ee,Ke=Math.cos(De),$e.x=Be*(2+Ke)*.5*Math.cos(ee),$e.y=Be*(2+Ke)*Xe*.5,$e.z=Be*Math.sin(De)*.5}yt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:o,tubularSegments:l,radialSegments:g,p:w,q:B},e=e||1,o=o||.4,l=Math.floor(l)||64,g=Math.floor(g)||8,w=w||2,B=B||3;var z=[],V=[],j=[],et=[],tt,it=new C,rt=new C,At=new C,mt=new C,Vt=new C,re=new C,qt=new C;for(tt=0;tt<=l;++tt){var de=tt/l*w*Math.PI*2;for(L(de,w,B,e,At),L(de+.01,w,B,e,mt),re.subVectors(mt,At),qt.addVectors(mt,At),Vt.crossVectors(re,qt),qt.crossVectors(Vt,re),Vt.normalize(),qt.normalize(),de=0;de<=g;++de){var oe=de/g*Math.PI*2,_e=-o*Math.cos(oe);oe=o*Math.sin(oe),it.x=At.x+(_e*qt.x+oe*Vt.x),it.y=At.y+(_e*qt.y+oe*Vt.y),it.z=At.z+(_e*qt.z+oe*Vt.z),V.push(it.x,it.y,it.z),rt.subVectors(it,At).normalize(),j.push(rt.x,rt.y,rt.z),et.push(tt/l),et.push(de/g)}}for(de=1;de<=l;de++)for(tt=1;tt<=g;tt++)e=(g+1)*de+(tt-1),o=(g+1)*de+tt,w=(g+1)*(de-1)+tt,z.push((g+1)*(de-1)+(tt-1),e,w),z.push(e,o,w);this.setIndex(z),this.setAttribute("position",new _t(V,3)),this.setAttribute("normal",new _t(j,3)),this.setAttribute("uv",new _t(et,2))}function Q0(e,o,l,g,w){xt.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:o,radialSegments:l,tubularSegments:g,arc:w},this.fromBufferGeometry(new av(e,o,l,g,w)),this.mergeVertices()}function av(e,o,l,g,w){yt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:o,radialSegments:l,tubularSegments:g,arc:w},e=e||1,o=o||.4,l=Math.floor(l)||8,g=Math.floor(g)||6,w=w||2*Math.PI;var B=[],L=[],z=[],V=[],j=new C,et=new C,tt=new C,it,rt;for(it=0;it<=l;it++)for(rt=0;rt<=g;rt++){var At=rt/g*w,mt=it/l*Math.PI*2;et.x=(e+o*Math.cos(mt))*Math.cos(At),et.y=(e+o*Math.cos(mt))*Math.sin(At),et.z=o*Math.sin(mt),L.push(et.x,et.y,et.z),j.x=e*Math.cos(At),j.y=e*Math.sin(At),tt.subVectors(et,j).normalize(),z.push(tt.x,tt.y,tt.z),V.push(rt/g),V.push(it/l)}for(it=1;it<=l;it++)for(rt=1;rt<=g;rt++)e=(g+1)*(it-1)+rt-1,o=(g+1)*(it-1)+rt,w=(g+1)*it+rt,B.push((g+1)*it+rt-1,e,w),B.push(e,o,w);this.setIndex(B),this.setAttribute("position",new _t(L,3)),this.setAttribute("normal",new _t(z,3)),this.setAttribute("uv",new _t(V,2))}function D2(e,o,l,g,w){for(var B,L=0,z=o,V=l-g;z<l;z+=g)L+=(e[V]-e[z])*(e[z+1]+e[V+1]),V=z;if(w===0<L)for(w=o;w<l;w+=g)B=N2(w,e[w],e[w+1],B);else for(w=l-g;w>=o;w-=g)B=N2(w,e[w],e[w+1],B);return B&&ly(B,B.next)&&(G0(B),B=B.next),B}function md(e,o){if(!e)return e;o||(o=e);do{var l=!1;if(e.steiner||!ly(e,e.next)&&ds(e.prev,e,e.next)!==0)e=e.next;else{if(G0(e),e=o=e.prev,e===e.next)break;l=!0}}while(l||e!==o);return o}function b0(e,o,l,g,w,B,L){if(e){if(!L&&B){var z=e,V=z;do V.z===null&&(V.z=pw(V.x,V.y,g,w,B)),V.prevZ=V.prev,V=V.nextZ=V.next;while(V!==z);V.prevZ.nextZ=null,V.prevZ=null,z=V;var j,et,tt,it,rt=1;do{V=z;var At=z=null;for(et=0;V;){et++;var mt=V;for(j=tt=0;j<rt&&(tt++,mt=mt.nextZ,mt);j++);for(it=rt;0<tt||0<it&&mt;)tt!==0&&(it===0||!mt||V.z<=mt.z)?(j=V,V=V.nextZ,tt--):(j=mt,mt=mt.nextZ,it--),At?At.nextZ=j:z=j,j.prevZ=At,At=j;V=mt}At.nextZ=null,rt*=2}while(1<et)}for(z=e;e.prev!==e.next;){if(V=e.prev,mt=e.next,B)At=HB(e,g,w,B);else t:if(At=e,et=At.prev,tt=At,rt=At.next,0<=ds(et,tt,rt))At=!1;else{for(j=At.next.next;j!==At.prev;){if(Av(et.x,et.y,tt.x,tt.y,rt.x,rt.y,j.x,j.y)&&0<=ds(j.prev,j,j.next)){At=!1;break t}j=j.next}At=!0}if(At)o.push(V.i/l),o.push(e.i/l),o.push(mt.i/l),G0(e),z=e=mt.next;else if(e=mt,e===z){if(!L)b0(md(e),o,l,g,w,B,1);else if(L===1){e=md(e),L=o,z=l,V=e;do mt=V.prev,At=V.next.next,!ly(mt,At)&&O2(mt,V,V.next,At)&&k0(mt,At)&&k0(At,mt)&&(L.push(mt.i/z),L.push(V.i/z),L.push(At.i/z),G0(V),G0(V.next),V=e=At),V=V.next;while(V!==e);e=md(V),b0(e,o,l,g,w,B,2)}else if(L===2)t:{L=e;do{for(z=L.next.next;z!==L.prev;){if(V=L.i!==z.i){if(V=L,mt=z,At=V.next.i!==mt.i&&V.prev.i!==mt.i){e:{At=V;do{if(At.i!==V.i&&At.next.i!==V.i&&At.i!==mt.i&&At.next.i!==mt.i&&O2(At,At.next,V,mt)){At=!0;break e}At=At.next}while(At!==V);At=!1}At=!At}if(At){if(At=k0(V,mt)&&k0(mt,V)){At=V,et=!1,tt=(V.x+mt.x)/2,rt=(V.y+mt.y)/2;do At.y>rt!=At.next.y>rt&&At.next.y!==At.y&&tt<(At.next.x-At.x)*(rt-At.y)/(At.next.y-At.y)+At.x&&(et=!et),At=At.next;while(At!==V);At=et}At=At&&(ds(V.prev,V,mt.prev)||ds(V,mt.prev,mt))||ly(V,mt)&&0<ds(V.prev,V,V.next)&&0<ds(mt.prev,mt,mt.next)}V=At}if(V){e=H2(L,z),L=md(L,L.next),e=md(e,e.next),b0(L,o,l,g,w,B),b0(e,o,l,g,w,B);break t}z=z.next}L=L.next}while(L!==e)}break}}}}function HB(e,o,l,g){var w=e.prev,B=e.next;if(0<=ds(w,e,B))return!1;var L=w.x>e.x?w.x>B.x?w.x:B.x:e.x>B.x?e.x:B.x,z=w.y>e.y?w.y>B.y?w.y:B.y:e.y>B.y?e.y:B.y,V=pw(w.x<e.x?w.x<B.x?w.x:B.x:e.x<B.x?e.x:B.x,w.y<e.y?w.y<B.y?w.y:B.y:e.y<B.y?e.y:B.y,o,l,g);for(o=pw(L,z,o,l,g),l=e.prevZ,g=e.nextZ;l&&l.z>=V&&g&&g.z<=o;){if(l!==e.prev&&l!==e.next&&Av(w.x,w.y,e.x,e.y,B.x,B.y,l.x,l.y)&&0<=ds(l.prev,l,l.next)||(l=l.prevZ,g!==e.prev&&g!==e.next&&Av(w.x,w.y,e.x,e.y,B.x,B.y,g.x,g.y)&&0<=ds(g.prev,g,g.next)))return!1;g=g.nextZ}for(;l&&l.z>=V;){if(l!==e.prev&&l!==e.next&&Av(w.x,w.y,e.x,e.y,B.x,B.y,l.x,l.y)&&0<=ds(l.prev,l,l.next))return!1;l=l.prevZ}for(;g&&g.z<=o;){if(g!==e.prev&&g!==e.next&&Av(w.x,w.y,e.x,e.y,B.x,B.y,g.x,g.y)&&0<=ds(g.prev,g,g.next))return!1;g=g.nextZ}return!0}function NB(e,o){return e.x-o.x}function zB(e,o){var l=o,g=e.x,w=e.y,B=-Infinity;do{if(w<=l.y&&w>=l.next.y&&l.next.y!==l.y){var L=l.x+(w-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(L<=g&&L>B){if(B=L,L===g){if(w===l.y)return l;if(w===l.next.y)return l.next}var z=l.x<l.next.x?l:l.next}}l=l.next}while(l!==o);if(!z)return null;if(g===B)return z;o=z,L=z.x;var V=z.y,j=Infinity;l=z;do{if(g>=l.x&&l.x>=L&&g!==l.x&&Av(w<V?g:B,w,L,V,w<V?B:g,w,l.x,l.y)){var et=Math.abs(w-l.y)/(g-l.x),tt;if((tt=k0(l,e))&&!(tt=et<j)&&(tt=et===j)&&!(tt=l.x>z.x)&&(tt=l.x===z.x)){tt=z;var it=l;tt=0>ds(tt.prev,tt,it.prev)&&0>ds(it.next,tt,tt.next)}tt&&(z=l,j=et)}l=l.next}while(l!==o);return z}function pw(e,o,l,g,w){return e=32767*(e-l)*w,o=32767*(o-g)*w,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,(e|e<<1)&1431655765|((o|o<<1)&1431655765)<<1}function QB(e){var o=e,l=e;do(o.x<l.x||o.x===l.x&&o.y<l.y)&&(l=o),o=o.next;while(o!==e);return l}function Av(e,o,l,g,w,B,L,z){return 0<=(w-L)*(o-z)-(e-L)*(B-z)&&0<=(e-L)*(g-z)-(l-L)*(o-z)&&0<=(l-L)*(B-z)-(w-L)*(g-z)}function ds(e,o,l){return(o.y-e.y)*(l.x-o.x)-(o.x-e.x)*(l.y-o.y)}function ly(e,o){return e.x===o.x&&e.y===o.y}function O2(e,o,l,g){var w=cy(ds(e,o,l)),B=cy(ds(e,o,g)),L=cy(ds(l,g,e)),z=cy(ds(l,g,o));return!!(w!==B&&L!==z||w===0&&hy(e,l,o)||B===0&&hy(e,g,o)||L===0&&hy(l,e,g)||z===0&&hy(l,o,g))}function hy(e,o,l){return o.x<=Math.max(e.x,l.x)&&o.x>=Math.min(e.x,l.x)&&o.y<=Math.max(e.y,l.y)&&o.y>=Math.min(e.y,l.y)}function cy(e){return 0<e?1:0>e?-1:0}function k0(e,o){return 0>ds(e.prev,e,e.next)?0<=ds(e,o,e.next)&&0<=ds(e,e.prev,o):0>ds(e,o,e.prev)||0>ds(e,e.next,o)}function H2(e,o){var l=new dw(e.i,e.x,e.y),g=new dw(o.i,o.x,o.y),w=e.next,B=o.prev;return e.next=o,o.prev=e,l.next=w,w.prev=l,g.next=l,l.prev=g,B.next=g,g.prev=B,g}function N2(e,o,l,g){return e=new dw(e,o,l),g?(e.next=g.next,e.prev=g,g.next.prev=e,g.next=e):(e.prev=e,e.next=e),e}function G0(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function dw(e,o,l){this.i=e,this.x=o,this.y=l,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function z2(e){var o=e.length;2<o&&e[o-1].equals(e[0])&&e.pop()}function Q2(e,o){for(var l=0;l<o.length;l++)e.push(o[l].x),e.push(o[l].y)}function Cg(e,o){xt.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:o},this.fromBufferGeometry(new Lc(e,o)),this.mergeVertices()}function Lc(e,o){function l(V){function j(Tr,On,jo){return On||console.error("THREE.ExtrudeGeometry: vec does not exist"),On.clone().multiplyScalar(jo).add(Tr)}function et(Tr,On,jo){var Qn=Tr.x-On.x,We=Tr.y-On.y,Hn=jo.x-Tr.x,oi=jo.y-Tr.y,xn=Qn*Qn+We*We;if(Math.abs(Qn*oi-We*Hn)>No){var CA=Math.sqrt(xn),ta=Math.sqrt(Hn*Hn+oi*oi);if(xn=On.x-We/CA,On=On.y+Qn/CA,oi=((jo.x-oi/ta-xn)*oi-(jo.y+Hn/ta-On)*Hn)/(Qn*oi-We*Hn),Hn=xn+Qn*oi-Tr.x,Qn=On+We*oi-Tr.y,We=Hn*Hn+Qn*Qn,2>=We)return new c(Hn,Qn);We=Math.sqrt(We/2)}else Tr=!1,Qn>No?Hn>No&&(Tr=!0):Qn<-No?Hn<-No&&(Tr=!0):wc(We)===wc(oi)&&(Tr=!0),Tr?(Hn=-We,We=Math.sqrt(xn)):(Hn=Qn,Qn=We,We=Math.sqrt(xn/2));return new c(Hn/We,Qn/We)}function tt(Tr,On){for(ke=Tr.length;0<=--ke;){var jo=ke,Qn=ke-1;0>Qn&&(Qn=Tr.length-1);var We,Hn=qt+2*Ke;for(We=0;We<Hn;We++){var oi=Le*We,xn=Le*(We+1),CA=On+Qn+oi,ta=On+Qn+xn;xn=On+jo+xn,At(On+jo+oi),At(CA),At(xn),At(CA),At(ta),At(xn),oi=w.length/3,oi=$e.generateSideWallUV(g,w,oi-6,oi-3,oi-2,oi-1),mt(oi[0]),mt(oi[1]),mt(oi[3]),mt(oi[1]),mt(oi[2]),mt(oi[3])}}}function it(Tr,On,jo){Vt.push(Tr),Vt.push(On),Vt.push(jo)}function rt(Tr,On,jo){At(Tr),At(On),At(jo),Tr=w.length/3,Tr=$e.generateTopUV(g,w,Tr-3,Tr-2,Tr-1),mt(Tr[0]),mt(Tr[1]),mt(Tr[2])}function At(Tr){w.push(Vt[3*Tr]),w.push(Vt[3*Tr+1]),w.push(Vt[3*Tr+2])}function mt(Tr){B.push(Tr.x),B.push(Tr.y)}var Vt=[],re=o.curveSegments!==void 0?o.curveSegments:12,qt=o.steps!==void 0?o.steps:1,de=o.depth!==void 0?o.depth:100,oe=o.bevelEnabled!==void 0?o.bevelEnabled:!0,_e=o.bevelThickness!==void 0?o.bevelThickness:6,ee=o.bevelSize!==void 0?o.bevelSize:_e-2,De=o.bevelOffset!==void 0?o.bevelOffset:0,Ke=o.bevelSegments!==void 0?o.bevelSegments:3,Be=o.extrudePath,$e=o.UVGenerator!==void 0?o.UVGenerator:uE;o.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),de=o.amount);var Xe=!1;if(Be){var Gr=Be.getSpacedPoints(qt);Xe=!0,oe=!1;var gn=Be.computeFrenetFrames(qt,!1),Mr=new C,pn=new C,Yn=new C}oe||(De=ee=_e=Ke=0);var Un;re=V.extractPoints(re),V=re.shape;var yi=re.holes;if(!Zf.isClockWise(V)){V=V.reverse();var ti=0;for(Un=yi.length;ti<Un;ti++){var io=yi[ti];Zf.isClockWise(io)&&(yi[ti]=io.reverse())}}var go=Zf.triangulateShape(V,yi),Lt=V;for(ti=0,Un=yi.length;ti<Un;ti++)io=yi[ti],V=V.concat(io);var jt,Le=V.length,rr,Pr=go.length;re=[];var ke=0,Kt=Lt.length,cr=Kt-1;for(jt=ke+1;ke<Kt;ke++,cr++,jt++)cr===Kt&&(cr=0),jt===Kt&&(jt=0),re[ke]=et(Lt[ke],Lt[cr],Lt[jt]);Be=[];var zr=re.concat();for(ti=0,Un=yi.length;ti<Un;ti++){io=yi[ti];var yn=[];for(ke=0,Kt=io.length,cr=Kt-1,jt=ke+1;ke<Kt;ke++,cr++,jt++)cr===Kt&&(cr=0),jt===Kt&&(jt=0),yn[ke]=et(io[ke],io[cr],io[jt]);Be.push(yn),zr=zr.concat(yn)}for(cr=0;cr<Ke;cr++){Kt=cr/Ke;var Vr=_e*Math.cos(Kt*Math.PI/2);for(jt=ee*Math.sin(Kt*Math.PI/2)+De,ke=0,Kt=Lt.length;ke<Kt;ke++){var Ir=j(Lt[ke],re[ke],jt);it(Ir.x,Ir.y,-Vr)}for(ti=0,Un=yi.length;ti<Un;ti++)for(io=yi[ti],yn=Be[ti],ke=0,Kt=io.length;ke<Kt;ke++)Ir=j(io[ke],yn[ke],jt),it(Ir.x,Ir.y,-Vr)}for(jt=ee+De,ke=0;ke<Le;ke++)Ir=oe?j(V[ke],zr[ke],jt):V[ke],Xe?(pn.copy(gn.normals[0]).multiplyScalar(Ir.x),Mr.copy(gn.binormals[0]).multiplyScalar(Ir.y),Yn.copy(Gr[0]).add(pn).add(Mr),it(Yn.x,Yn.y,Yn.z)):it(Ir.x,Ir.y,0);for(Kt=1;Kt<=qt;Kt++)for(ke=0;ke<Le;ke++)Ir=oe?j(V[ke],zr[ke],jt):V[ke],Xe?(pn.copy(gn.normals[Kt]).multiplyScalar(Ir.x),Mr.copy(gn.binormals[Kt]).multiplyScalar(Ir.y),Yn.copy(Gr[Kt]).add(pn).add(Mr),it(Yn.x,Yn.y,Yn.z)):it(Ir.x,Ir.y,de/qt*Kt);for(cr=Ke-1;0<=cr;cr--){for(Kt=cr/Ke,Vr=_e*Math.cos(Kt*Math.PI/2),jt=ee*Math.sin(Kt*Math.PI/2)+De,ke=0,Kt=Lt.length;ke<Kt;ke++)Ir=j(Lt[ke],re[ke],jt),it(Ir.x,Ir.y,de+Vr);for(ti=0,Un=yi.length;ti<Un;ti++)for(io=yi[ti],yn=Be[ti],ke=0,Kt=io.length;ke<Kt;ke++)Ir=j(io[ke],yn[ke],jt),Xe?it(Ir.x,Ir.y+Gr[qt-1].y,Gr[qt-1].x+Vr):it(Ir.x,Ir.y,de+Vr)}(function(){var Tr=w.length/3;if(oe){var On=0*Le;for(ke=0;ke<Pr;ke++)rr=go[ke],rt(rr[2]+On,rr[1]+On,rr[0]+On);for(On=Le*(qt+2*Ke),ke=0;ke<Pr;ke++)rr=go[ke],rt(rr[0]+On,rr[1]+On,rr[2]+On)}else{for(ke=0;ke<Pr;ke++)rr=go[ke],rt(rr[2],rr[1],rr[0]);for(ke=0;ke<Pr;ke++)rr=go[ke],rt(rr[0]+Le*qt,rr[1]+Le*qt,rr[2]+Le*qt)}g.addGroup(Tr,w.length/3-Tr,0)})(),function(){var Tr=w.length/3,On=0;for(tt(Lt,On),On+=Lt.length,ti=0,Un=yi.length;ti<Un;ti++)io=yi[ti],tt(io,On),On+=io.length;g.addGroup(Tr,w.length/3-Tr,1)}()}yt.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:o},e=Array.isArray(e)?e:[e];for(var g=this,w=[],B=[],L=0,z=e.length;L<z;L++)l(e[L]);this.setAttribute("position",new _t(w,3)),this.setAttribute("uv",new _t(B,2)),this.computeVertexNormals()}function b2(e,o,l){if(l.shapes=[],Array.isArray(e))for(var g=0,w=e.length;g<w;g++)l.shapes.push(e[g].uuid);else l.shapes.push(e.uuid);return o.extrudePath!==void 0&&(l.options.extrudePath=o.extrudePath.toJSON()),l}function V0(e,o){xt.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:o},this.fromBufferGeometry(new uv(e,o)),this.mergeVertices()}function uv(e,o){o=o||{};var l=o.font;if(!l||!l.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new xt;e=l.generateShapes(e,o.size),o.depth=o.height!==void 0?o.height:50,o.bevelThickness===void 0&&(o.bevelThickness=10),o.bevelSize===void 0&&(o.bevelSize=8),o.bevelEnabled===void 0&&(o.bevelEnabled=!1),Lc.call(this,e,o),this.type="TextBufferGeometry"}function W0(e,o,l,g,w,B,L){xt.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:o,heightSegments:l,phiStart:g,phiLength:w,thetaStart:B,thetaLength:L},this.fromBufferGeometry(new Mg(e,o,l,g,w,B,L)),this.mergeVertices()}function Mg(e,o,l,g,w,B,L){yt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:o,heightSegments:l,phiStart:g,phiLength:w,thetaStart:B,thetaLength:L},e=e||1,o=Math.max(3,Math.floor(o)||8),l=Math.max(2,Math.floor(l)||6),g=g!==void 0?g:0,w=w!==void 0?w:2*Math.PI,B=B!==void 0?B:0,L=L!==void 0?L:Math.PI;var z=Math.min(B+L,Math.PI),V,j,et=0,tt=[],it=new C,rt=new C,At=[],mt=[],Vt=[],re=[];for(j=0;j<=l;j++){var qt=[],de=j/l,oe=0;for(j==0&&B==0?oe=.5/o:j==l&&z==Math.PI&&(oe=-.5/o),V=0;V<=o;V++){var _e=V/o;it.x=-e*Math.cos(g+_e*w)*Math.sin(B+de*L),it.y=e*Math.cos(B+de*L),it.z=e*Math.sin(g+_e*w)*Math.sin(B+de*L),mt.push(it.x,it.y,it.z),rt.copy(it).normalize(),Vt.push(rt.x,rt.y,rt.z),re.push(_e+oe,1-de),qt.push(et++)}tt.push(qt)}for(j=0;j<l;j++)for(V=0;V<o;V++)e=tt[j][V+1],g=tt[j][V],w=tt[j+1][V],L=tt[j+1][V+1],(j!==0||0<B)&&At.push(e,g,L),(j!==l-1||z<Math.PI)&&At.push(g,w,L);this.setIndex(At),this.setAttribute("position",new _t(mt,3)),this.setAttribute("normal",new _t(Vt,3)),this.setAttribute("uv",new _t(re,2))}function j0(e,o,l,g,w,B){xt.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:o,thetaSegments:l,phiSegments:g,thetaStart:w,thetaLength:B},this.fromBufferGeometry(new lv(e,o,l,g,w,B)),this.mergeVertices()}function lv(e,o,l,g,w,B){yt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:o,thetaSegments:l,phiSegments:g,thetaStart:w,thetaLength:B},e=e||.5,o=o||1,w=w!==void 0?w:0,B=B!==void 0?B:2*Math.PI,l=l!==void 0?Math.max(3,l):8,g=g!==void 0?Math.max(1,g):1;var L=[],z=[],V=[],j=[],et=e,tt=(o-e)/g,it=new C,rt=new c,At,mt;for(At=0;At<=g;At++){for(mt=0;mt<=l;mt++)e=w+mt/l*B,it.x=et*Math.cos(e),it.y=et*Math.sin(e),z.push(it.x,it.y,it.z),V.push(0,0,1),rt.x=(it.x/o+1)/2,rt.y=(it.y/o+1)/2,j.push(rt.x,rt.y);et+=tt}for(At=0;At<g;At++)for(o=At*(l+1),mt=0;mt<l;mt++)e=mt+o,w=e+l+1,B=e+l+2,et=e+1,L.push(e,w,et),L.push(w,B,et);this.setIndex(L),this.setAttribute("position",new _t(z,3)),this.setAttribute("normal",new _t(V,3)),this.setAttribute("uv",new _t(j,2))}function X0(e,o,l,g){xt.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:o,phiStart:l,phiLength:g},this.fromBufferGeometry(new hv(e,o,l,g)),this.mergeVertices()}function hv(e,o,l,g){yt.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:o,phiStart:l,phiLength:g},o=Math.floor(o)||12,l=l||0,g=g||2*Math.PI,g=ii.clamp(g,0,2*Math.PI);var w=[],B=[],L=[],z=1/o,V=new C,j=new c,et;for(et=0;et<=o;et++){var tt=l+et*z*g,it=Math.sin(tt),rt=Math.cos(tt);for(tt=0;tt<=e.length-1;tt++)V.x=e[tt].x*it,V.y=e[tt].y,V.z=e[tt].x*rt,B.push(V.x,V.y,V.z),j.x=et/o,j.y=tt/(e.length-1),L.push(j.x,j.y)}for(et=0;et<o;et++)for(tt=0;tt<e.length-1;tt++)l=tt+et*e.length,z=l+e.length,V=l+e.length+1,j=l+1,w.push(l,z,j),w.push(z,V,j);if(this.setIndex(w),this.setAttribute("position",new _t(B,3)),this.setAttribute("uv",new _t(L,2)),this.computeVertexNormals(),g===2*Math.PI)for(g=this.attributes.normal.array,w=new C,B=new C,L=new C,l=o*e.length*3,tt=et=0;et<e.length;et++,tt+=3)w.x=g[tt+0],w.y=g[tt+1],w.z=g[tt+2],B.x=g[l+tt+0],B.y=g[l+tt+1],B.z=g[l+tt+2],L.addVectors(w,B).normalize(),g[tt+0]=g[l+tt+0]=L.x,g[tt+1]=g[l+tt+1]=L.y,g[tt+2]=g[l+tt+2]=L.z}function _g(e,o){xt.call(this),this.type="ShapeGeometry",(typeof o=="undefined"?"undefined":QA(o))==="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),o=o.curveSegments),this.parameters={shapes:e,curveSegments:o},this.fromBufferGeometry(new Bg(e,o)),this.mergeVertices()}function Bg(e,o){function l(et){var tt,it=w.length/3;et=et.extractPoints(o);var rt=et.shape,At=et.holes;for(Zf.isClockWise(rt)===!1&&(rt=rt.reverse()),et=0,tt=At.length;et<tt;et++){var mt=At[et];Zf.isClockWise(mt)===!0&&(At[et]=mt.reverse())}var Vt=Zf.triangulateShape(rt,At);for(et=0,tt=At.length;et<tt;et++)mt=At[et],rt=rt.concat(mt);for(et=0,tt=rt.length;et<tt;et++)mt=rt[et],w.push(mt.x,mt.y,0),B.push(0,0,1),L.push(mt.x,mt.y);for(et=0,tt=Vt.length;et<tt;et++)rt=Vt[et],g.push(rt[0]+it,rt[1]+it,rt[2]+it),V+=3}yt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:o},o=o||12;var g=[],w=[],B=[],L=[],z=0,V=0;if(Array.isArray(e)===!1)l(e);else for(var j=0;j<e.length;j++)l(e[j]),this.addGroup(z,V,j),z+=V,V=0;this.setIndex(g),this.setAttribute("position",new _t(w,3)),this.setAttribute("normal",new _t(B,3)),this.setAttribute("uv",new _t(L,2))}function k2(e,o){if(o.shapes=[],Array.isArray(e))for(var l=0,g=e.length;l<g;l++)o.shapes.push(e[l].uuid);else o.shapes.push(e.uuid);return o}function cv(e,o){yt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:o};var l=[];o=Math.cos(ii.DEG2RAD*(o!==void 0?o:1));var g=[0,0],w={},B=["a","b","c"];if(e.isBufferGeometry){var L=new xt;L.fromBufferGeometry(e)}else L=e.clone();L.mergeVertices(),L.computeFaceNormals(),e=L.vertices,L=L.faces;for(var z=0,V=L.length;z<V;z++)for(var j=L[z],et=0;3>et;et++){var tt=j[B[et]],it=j[B[(et+1)%3]];g[0]=Math.min(tt,it),g[1]=Math.max(tt,it),tt=g[0]+","+g[1],w[tt]===void 0?w[tt]={index1:g[0],index2:g[1],face1:z,face2:void 0}:w[tt].face2=z}for(tt in w)g=w[tt],(g.face2===void 0||L[g.face1].normal.dot(L[g.face2].normal)<=o)&&(B=e[g.index1],l.push(B.x,B.y,B.z),B=e[g.index2],l.push(B.x,B.y,B.z));this.setAttribute("position",new _t(l,3))}function Eg(e,o,l,g,w,B,L,z){xt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:o,height:l,radialSegments:g,heightSegments:w,openEnded:B,thetaStart:L,thetaLength:z},this.fromBufferGeometry(new Qf(e,o,l,g,w,B,L,z)),this.mergeVertices()}function Qf(e,o,l,g,w,B,L,z){function V(qt){var de,oe=new c,_e=new C,ee=0,De=qt===!0?e:o,Ke=qt===!0?1:-1,Be=At;for(de=1;de<=g;de++)tt.push(0,Vt*Ke,0),it.push(0,Ke,0),rt.push(.5,.5),At++;var $e=At;for(de=0;de<=g;de++){var Xe=de/g*z+L,Gr=Math.cos(Xe);Xe=Math.sin(Xe),_e.x=De*Xe,_e.y=Vt*Ke,_e.z=De*Gr,tt.push(_e.x,_e.y,_e.z),it.push(0,Ke,0),oe.x=.5*Gr+.5,oe.y=.5*Xe*Ke+.5,rt.push(oe.x,oe.y),At++}for(de=0;de<g;de++)oe=Be+de,_e=$e+de,qt===!0?et.push(_e,_e+1,oe):et.push(_e+1,_e,oe),ee+=3;j.addGroup(re,ee,qt===!0?1:2),re+=ee}yt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:o,height:l,radialSegments:g,heightSegments:w,openEnded:B,thetaStart:L,thetaLength:z};var j=this;e=e!==void 0?e:1,o=o!==void 0?o:1,l=l||1,g=Math.floor(g)||8,w=Math.floor(w)||1,B=B!==void 0?B:!1,L=L!==void 0?L:0,z=z!==void 0?z:2*Math.PI;var et=[],tt=[],it=[],rt=[],At=0,mt=[],Vt=l/2,re=0;(function(){var qt,de,oe=new C,_e=new C,ee=0,De=(o-e)/l;for(de=0;de<=w;de++){var Ke=[],Be=de/w,$e=Be*(o-e)+e;for(qt=0;qt<=g;qt++){var Xe=qt/g,Gr=Xe*z+L,gn=Math.sin(Gr);Gr=Math.cos(Gr),_e.x=$e*gn,_e.y=-Be*l+Vt,_e.z=$e*Gr,tt.push(_e.x,_e.y,_e.z),oe.set(gn,De,Gr).normalize(),it.push(oe.x,oe.y,oe.z),rt.push(Xe,1-Be),Ke.push(At++)}mt.push(Ke)}for(qt=0;qt<g;qt++)for(de=0;de<w;de++)oe=mt[de+1][qt],_e=mt[de+1][qt+1],De=mt[de][qt+1],et.push(mt[de][qt],oe,De),et.push(oe,_e,De),ee+=6;j.addGroup(re,ee,0),re+=ee})(),B===!1&&(0<e&&V(!0),0<o&&V(!1)),this.setIndex(et),this.setAttribute("position",new _t(tt,3)),this.setAttribute("normal",new _t(it,3)),this.setAttribute("uv",new _t(rt,2))}function K0(e,o,l,g,w,B,L){Eg.call(this,0,e,o,l,g,w,B,L),this.type="ConeGeometry",this.parameters={radius:e,height:o,radialSegments:l,heightSegments:g,openEnded:w,thetaStart:B,thetaLength:L}}function Y0(e,o,l,g,w,B,L){Qf.call(this,0,e,o,l,g,w,B,L),this.type="ConeBufferGeometry",this.parameters={radius:e,height:o,radialSegments:l,heightSegments:g,openEnded:w,thetaStart:B,thetaLength:L}}function Z0(e,o,l,g){xt.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:o,thetaStart:l,thetaLength:g},this.fromBufferGeometry(new fv(e,o,l,g)),this.mergeVertices()}function fv(e,o,l,g){yt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:o,thetaStart:l,thetaLength:g},e=e||1,o=o!==void 0?Math.max(3,o):8,l=l!==void 0?l:0,g=g!==void 0?g:2*Math.PI;var w=[],B=[],L=[],z=[],V,j=new C,et=new c;B.push(0,0,0),L.push(0,0,1),z.push(.5,.5);var tt=0;for(V=3;tt<=o;tt++,V+=3){var it=l+tt/o*g;j.x=e*Math.cos(it),j.y=e*Math.sin(it),B.push(j.x,j.y,j.z),L.push(0,0,1),et.x=(B[V]/e+1)/2,et.y=(B[V+1]/e+1)/2,z.push(et.x,et.y)}for(V=1;V<=o;V++)w.push(V,V+1,0);this.setIndex(w),this.setAttribute("position",new _t(B,3)),this.setAttribute("normal",new _t(L,3)),this.setAttribute("uv",new _t(z,2))}function Ig(e){le.call(this),this.type="ShadowMaterial",this.color=new Bt(0),this.transparent=!0,this.setValues(e)}function bf(e){Te.call(this,e),this.type="RawShaderMaterial"}function Fc(e){le.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new c(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Tg(e){Fc.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new c(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(e)}function vd(e){le.call(this),this.type="MeshPhongMaterial",this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new c(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Sg(e){le.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.lightMap=this.gradientMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new c(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=this.specularMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Lg(e){le.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new c(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.fog=!1,this.setValues(e)}function Fg(e){le.call(this),this.type="MeshLambertMaterial",this.color=new Bt(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Rg(e){le.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bt(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new c(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Pg(e){es.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function Xu(e,o,l,g){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=g!==void 0?g:new o.constructor(l),this.sampleValues=o,this.valueSize=l}function fy(e,o,l,g){Xu.call(this,e,o,l,g),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function J0(e,o,l,g){Xu.call(this,e,o,l,g)}function py(e,o,l,g){Xu.call(this,e,o,l,g)}function $a(e,o,l,g){if(e===void 0)throw Error("THREE.KeyframeTrack: track name is undefined");if(o===void 0||o.length===0)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rs.convertArray(o,this.TimeBufferType),this.values=rs.convertArray(l,this.ValueBufferType),this.setInterpolation(g||this.DefaultInterpolation)}function dy(e,o,l){$a.call(this,e,o,l)}function gy(e,o,l,g){$a.call(this,e,o,l,g)}function pv(e,o,l,g){$a.call(this,e,o,l,g)}function my(e,o,l,g){Xu.call(this,e,o,l,g)}function q0(e,o,l,g){$a.call(this,e,o,l,g)}function vy(e,o,l,g){$a.call(this,e,o,l,g)}function dv(e,o,l,g){$a.call(this,e,o,l,g)}function Ql(e,o,l,g){this.name=e,this.tracks=l,this.duration=o!==void 0?o:-1,this.blendMode=g!==void 0?g:2500,this.uuid=ii.generateUUID(),0>this.duration&&this.resetDuration()}function bB(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pv;case"vector":case"vector2":case"vector3":case"vector4":return dv;case"color":return gy;case"quaternion":return q0;case"bool":case"boolean":return dy;case"string":return vy}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function kB(e){if(e.type===void 0)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var o=bB(e.type);if(e.times===void 0){var l=[],g=[];rs.flattenJSON(e.keys,l,g,"value"),e.times=l,e.values=g}return o.parse!==void 0?o.parse(e):new o(e.name,e.times,e.values,e.interpolation)}function gw(e,o,l){var g=this,w=!1,B=0,L=0,z=void 0,V=[];this.onStart=void 0,this.onLoad=e,this.onProgress=o,this.onError=l,this.itemStart=function(j){L++,w===!1&&g.onStart!==void 0&&g.onStart(j,B,L),w=!0},this.itemEnd=function(j){B++,g.onProgress!==void 0&&g.onProgress(j,B,L),B===L&&(w=!1,g.onLoad!==void 0)&&g.onLoad()},this.itemError=function(j){g.onError!==void 0&&g.onError(j)},this.resolveURL=function(j){return z?z(j):j},this.setURLModifier=function(j){return z=j,this},this.addHandler=function(j,et){return V.push(j,et),this},this.removeHandler=function(j){return j=V.indexOf(j),j!==-1&&V.splice(j,2),this},this.getHandler=function(j){for(var et=0,tt=V.length;et<tt;et+=2){var it=V[et],rt=V[et+1];if(it.global&&(it.lastIndex=0),it.test(j))return rt}return null}}function Ao(e){this.manager=e!==void 0?e:UM,this.crossOrigin="anonymous",this.resourcePath=this.path="",this.requestHeader={}}function bl(e){Ao.call(this,e)}function mw(e){Ao.call(this,e)}function vw(e){Ao.call(this,e)}function yy(e){Ao.call(this,e)}function gv(e){Ao.call(this,e)}function xy(e){Ao.call(this,e)}function wy(e){Ao.call(this,e)}function En(){this.type="Curve",this.arcLengthDivisions=200}function Ku(e,o,l,g,w,B,L,z){En.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=o||0,this.xRadius=l||1,this.yRadius=g||1,this.aStartAngle=w||0,this.aEndAngle=B||2*Math.PI,this.aClockwise=L||!1,this.aRotation=z||0}function mv(e,o,l,g,w,B){Ku.call(this,e,o,l,l,g,w,B),this.type="ArcCurve"}function yw(){var e=0,o=0,l=0,g=0;return{initCatmullRom:function(w,B,L,z,V){w=V*(L-w),z=V*(z-B),e=B,o=w,l=-3*B+3*L-2*w-z,g=2*B-2*L+w+z},initNonuniformCatmullRom:function(w,B,L,z,V,j,et){w=((B-w)/V-(L-w)/(V+j)+(L-B)/j)*j,z=((L-B)/j-(z-B)/(j+et)+(z-L)/et)*j,e=B,o=w,l=-3*B+3*L-2*w-z,g=2*B-2*L+w+z},calc:function(w){var B=w*w;return e+o*w+l*B+g*B*w}}}function xA(e,o,l,g){En.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=o||!1,this.curveType=l||"centripetal",this.tension=g||.5}function G2(e,o,l,g,w){o=.5*(g-o),w=.5*(w-l);var B=e*e;return(2*l-2*g+o+w)*e*B+(-3*l+3*g-2*o-w)*B+o*e+l}function $0(e,o,l,g){var w=1-e;return w*w*o+2*(1-e)*e*l+e*e*g}function t1(e,o,l,g,w){var B=1-e,L=1-e;return B*B*B*o+3*L*L*e*l+3*(1-e)*e*e*g+e*e*e*w}function Eh(e,o,l,g){En.call(this),this.type="CubicBezierCurve",this.v0=e||new c,this.v1=o||new c,this.v2=l||new c,this.v3=g||new c}function Rc(e,o,l,g){En.call(this),this.type="CubicBezierCurve3",this.v0=e||new C,this.v1=o||new C,this.v2=l||new C,this.v3=g||new C}function du(e,o){En.call(this),this.type="LineCurve",this.v1=e||new c,this.v2=o||new c}function Ih(e,o){En.call(this),this.type="LineCurve3",this.v1=e||new C,this.v2=o||new C}function Th(e,o,l){En.call(this),this.type="QuadraticBezierCurve",this.v0=e||new c,this.v1=o||new c,this.v2=l||new c}function Pc(e,o,l){En.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new C,this.v1=o||new C,this.v2=l||new C}function Sh(e){En.call(this),this.type="SplineCurve",this.points=e||[]}function kf(){En.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Lh(e){kf.call(this),this.type="Path",this.currentPoint=new c,e&&this.setFromPoints(e)}function yd(e){Lh.call(this,e),this.uuid=ii.generateUUID(),this.type="Shape",this.holes=[]}function zo(e,o){D.call(this),this.type="Light",this.color=new Bt(e),this.intensity=o!==void 0?o:1,this.receiveShadow=void 0}function Cy(e,o,l){zo.call(this,e,l),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(D.DefaultUp),this.updateMatrix(),this.groundColor=new Bt(o)}function Uc(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new c(512,512),this.mapPass=this.map=null,this.matrix=new I,this._frustum=new Br,this._frameExtents=new c(1,1),this._viewportCount=1,this._viewports=[new f(0,0,1,1)]}function My(){Uc.call(this,new He(50,1,.5,500))}function _y(e,o,l,g,w,B){zo.call(this,e,o),this.type="SpotLight",this.position.copy(D.DefaultUp),this.updateMatrix(),this.target=new D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(L){this.intensity=L/Math.PI}}),this.distance=l!==void 0?l:0,this.angle=g!==void 0?g:Math.PI/3,this.penumbra=w!==void 0?w:0,this.decay=B!==void 0?B:1,this.shadow=new My}function xw(){Uc.call(this,new He(90,1,.5,500)),this._frameExtents=new c(4,2),this._viewportCount=6,this._viewports=[new f(2,1,1,1),new f(0,1,1,1),new f(3,1,1,1),new f(1,1,1,1),new f(3,0,1,1),new f(1,0,1,1)],this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)],this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}function By(e,o,l,g){zo.call(this,e,o),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(w){this.intensity=w/(4*Math.PI)}}),this.distance=l!==void 0?l:0,this.decay=g!==void 0?g:1,this.shadow=new xw}function vv(e,o,l,g,w,B){ye.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e!==void 0?e:-1,this.right=o!==void 0?o:1,this.top=l!==void 0?l:1,this.bottom=g!==void 0?g:-1,this.near=w!==void 0?w:.1,this.far=B!==void 0?B:2e3,this.updateProjectionMatrix()}function Ey(){Uc.call(this,new vv(-5,5,5,-5,.5,500))}function Iy(e,o){zo.call(this,e,o),this.type="DirectionalLight",this.position.copy(D.DefaultUp),this.updateMatrix(),this.target=new D,this.shadow=new Ey}function Ty(e,o){zo.call(this,e,o),this.type="AmbientLight",this.castShadow=void 0}function Sy(e,o,l,g){zo.call(this,e,o),this.type="RectAreaLight",this.width=l!==void 0?l:10,this.height=g!==void 0?g:10}function Ly(){this.coefficients=[];for(var e=0;9>e;e++)this.coefficients.push(new C)}function kl(e,o){zo.call(this,void 0,o),this.type="LightProbe",this.sh=e!==void 0?e:new Ly}function Fy(e){Ao.call(this,e),this.textures={}}function e1(){yt.call(this),this.type="InstancedBufferGeometry",this.instanceCount=Infinity}function Ry(e,o,l,g){typeof l=="number"&&(g=l,l=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Me.call(this,e,o,l),this.meshPerAttribute=g||1}function Py(e){Ao.call(this,e)}function Uy(e){Ao.call(this,e)}function ww(e){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Ao.call(this,e),this.options=void 0}function Cw(){this.type="ShapePath",this.color=new Bt,this.subPaths=[],this.currentPath=null}function Mw(e){this.type="Font",this.data=e}function _w(e){Ao.call(this,e)}function Dy(e){Ao.call(this,e)}function Bw(e,o,l){kl.call(this,void 0,l),e=new Bt().set(e),l=new Bt().set(o),o=new C(e.r,e.g,e.b),e=new C(l.r,l.g,l.b),l=Math.sqrt(Math.PI);var g=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(e).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(e).multiplyScalar(g)}function Ew(e,o){kl.call(this,void 0,o),e=new Bt().set(e),this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))}function V2(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new He,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new He,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Iw(e){this.autoStart=e!==void 0?e:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Tw(){D.call(this),this.type="AudioListener",this.context=gC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Iw}function yv(e){D.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.loopEnd=this.loopStart=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._progress=this._startedAt=0,this.filters=[]}function Sw(e){yv.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Lw(e,o){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=o!==void 0?o:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Fw(e,o,l){switch(this.binding=e,this.valueSize=l,o){case"quaternion":e=this._slerp,o=this._slerpAdditive;var g=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*l),this._workIndex=5;break;case"string":case"bool":o=e=this._select,g=this._setAdditiveIdentityOther,this.buffer=Array(5*l);break;default:e=this._lerp,o=this._lerpAdditive,g=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*l)}this._mixBufferRegion=e,this._mixBufferRegionAdditive=o,this._setIdentity=g,this._origIndex=3,this._addIndex=4,this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}function W2(e,o,l){l=l||wA.parseTrackName(o),this._targetGroup=e,this._bindings=e.subscribe_(o,l)}function wA(e,o,l){this.path=o,this.parsedPath=l||wA.parseTrackName(o),this.node=wA.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function j2(){this.uuid=ii.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var o=0,l=arguments.length;o!==l;++o)e[arguments[o].uuid]=o;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var g=this;this.stats={objects:{get total(){return g._objects.length},get inUse(){return this.total-g.nCachedObjects_}},get bindingsPerObject(){return g._bindings.length}}}function X2(e,o,l,g){this._mixer=e,this._clip=o,this._localRoot=l||null,this.blendMode=g||o.blendMode,e=o.tracks,o=e.length,l=Array(o),g={endingStart:2400,endingEnd:2400};for(var w=0;w!==o;++w){var B=e[w].createInterpolant(null);l[w]=B,B.settings=g}this._interpolantSettings=g,this._interpolants=l,this._propertyBindings=Array(o),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function Rw(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function Oy(e,o){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=o),this.value=e}function Pw(e,o,l){zf.call(this,e,o),this.meshPerAttribute=l||1}function Uw(e,o,l,g){this.ray=new ht(e,o),this.near=l||0,this.far=g||Infinity,this.camera=null,this.layers=new F,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},vn(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function K2(e,o){return e.distance-o.distance}function Dw(e,o,l,g){if(e.layers.test(o.layers)&&e.raycast(o,l),g===!0){e=e.children,g=0;for(var w=e.length;g<w;g++)Dw(e[g],o,l,!0)}}function Y2(e,o,l){return this.radius=e!==void 0?e:1,this.phi=o!==void 0?o:0,this.theta=l!==void 0?l:0,this}function Z2(e,o,l){return this.radius=e!==void 0?e:1,this.theta=o!==void 0?o:0,this.y=l!==void 0?l:0,this}function Ow(e,o){this.min=e!==void 0?e:new c(Infinity,Infinity),this.max=o!==void 0?o:new c(-Infinity,-Infinity)}function Hw(e,o){this.start=e!==void 0?e:new C,this.end=o!==void 0?o:new C}function r1(e){D.call(this),this.material=e,this.render=function(){},this.hasUvs=this.hasColors=this.hasNormals=this.hasPositions=!1,this.uvArray=this.colorArray=this.normalArray=this.positionArray=null,this.count=0}function xv(e,o){D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,e=new yt,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var l=0,g=1;32>l;l++,g++){var w=l/32*Math.PI*2,B=g/32*Math.PI*2;o.push(Math.cos(w),Math.sin(w),1,Math.cos(B),Math.sin(B),1)}e.setAttribute("position",new _t(o,3)),o=new es({fog:!1,toneMapped:!1}),this.cone=new ps(e,o),this.add(this.cone),this.update()}function J2(e){var o=[];e&&e.isBone&&o.push(e);for(var l=0;l<e.children.length;l++)o.push.apply(o,J2(e.children[l]));return o}function Ug(e){for(var o=J2(e),l=new yt,g=[],w=[],B=new Bt(0,0,1),L=new Bt(0,1,0),z=0;z<o.length;z++){var V=o[z];V.parent&&V.parent.isBone&&(g.push(0,0,0),g.push(0,0,0),w.push(B.r,B.g,B.b),w.push(L.r,L.g,L.b))}l.setAttribute("position",new _t(g,3)),l.setAttribute("color",new _t(w,3)),g=new es({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),ps.call(this,l,g),this.type="SkeletonHelper",this.root=e,this.bones=o,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function wv(e,o,l){this.light=e,this.light.updateMatrixWorld(),this.color=l,e=new Mg(o,4,2),o=new tr({wireframe:!0,fog:!1,toneMapped:!1}),Dt.call(this,e,o),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Cv(e,o,l){D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=l,e=new xg(o),e.rotateY(.5*Math.PI),this.material=new tr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0),o=e.getAttribute("position"),o=new Float32Array(3*o.count),e.setAttribute("color",new Me(o,3)),this.add(new Dt(e,this.material)),this.update()}function Hy(e,o,l,g){e=e||10,o=o||10,l=new Bt(l!==void 0?l:4473924),g=new Bt(g!==void 0?g:8947848);var w=o/2,B=e/o,L=e/2;e=[];for(var z=[],V=0,j=0,et=-L;V<=o;V++,et+=B){e.push(-L,0,et,L,0,et),e.push(et,0,-L,et,0,L);var tt=V===w?l:g;tt.toArray(z,j),j+=3,tt.toArray(z,j),j+=3,tt.toArray(z,j),j+=3,tt.toArray(z,j),j+=3}o=new yt,o.setAttribute("position",new _t(e,3)),o.setAttribute("color",new _t(z,3)),l=new es({vertexColors:!0,toneMapped:!1}),ps.call(this,o,l),this.type="GridHelper"}function Ny(e,o,l,g,w,B){e=e||10,o=o||16,l=l||8,g=g||64,w=new Bt(w!==void 0?w:4473924),B=new Bt(B!==void 0?B:8947848);var L=[],z=[],V;for(V=0;V<=o;V++){var j=V/o*2*Math.PI,et=Math.sin(j)*e;j=Math.cos(j)*e,L.push(0,0,0),L.push(et,0,j);var tt=V&1?w:B;z.push(tt.r,tt.g,tt.b),z.push(tt.r,tt.g,tt.b)}for(V=0;V<=l;V++){tt=V&1?w:B;var it=e-e/l*V;for(o=0;o<g;o++)j=o/g*2*Math.PI,et=Math.sin(j)*it,j=Math.cos(j)*it,L.push(et,0,j),z.push(tt.r,tt.g,tt.b),j=(o+1)/g*2*Math.PI,et=Math.sin(j)*it,j=Math.cos(j)*it,L.push(et,0,j),z.push(tt.r,tt.g,tt.b)}e=new yt,e.setAttribute("position",new _t(L,3)),e.setAttribute("color",new _t(z,3)),L=new es({vertexColors:!0,toneMapped:!1}),ps.call(this,e,L),this.type="PolarGridHelper"}function Mv(e,o,l){D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=l,o===void 0&&(o=1),e=new yt,e.setAttribute("position",new _t([-o,o,0,o,o,0,o,-o,0,-o,-o,0,-o,o,0],3)),o=new es({fog:!1,toneMapped:!1}),this.lightPlane=new ju(e,o),this.add(this.lightPlane),e=new yt,e.setAttribute("position",new _t([0,0,0,0,0,1],3)),this.targetLine=new ju(e,o),this.add(this.targetLine),this.update()}function n1(e){function o(rt,At,mt){l(rt,mt),l(At,mt)}function l(rt,At){B.push(0,0,0),L.push(At.r,At.g,At.b),z[rt]===void 0&&(z[rt]=[]),z[rt].push(B.length/3-1)}var g=new yt,w=new es({color:16777215,vertexColors:!0,toneMapped:!1}),B=[],L=[],z={},V=new Bt(16755200),j=new Bt(16711680),et=new Bt(43775),tt=new Bt(16777215),it=new Bt(3355443);o("n1","n2",V),o("n2","n4",V),o("n4","n3",V),o("n3","n1",V),o("f1","f2",V),o("f2","f4",V),o("f4","f3",V),o("f3","f1",V),o("n1","f1",V),o("n2","f2",V),o("n3","f3",V),o("n4","f4",V),o("p","n1",j),o("p","n2",j),o("p","n3",j),o("p","n4",j),o("u1","u2",et),o("u2","u3",et),o("u3","u1",et),o("c","t",tt),o("p","c",it),o("cn1","cn2",it),o("cn3","cn4",it),o("cf1","cf2",it),o("cf3","cf4",it),g.setAttribute("position",new _t(B,3)),g.setAttribute("color",new _t(L,3)),ps.call(this,g,w),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=z,this.update()}function bs(e,o,l,g,w,B,L){if(fx.set(w,B,L).unproject(g),e=o[e],e!==void 0)for(l=l.getAttribute("position"),o=0,g=e.length;o<g;o++)l.setXYZ(e[o],fx.x,fx.y,fx.z)}function Gf(e,o){this.object=e,o===void 0&&(o=16776960),e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var l=new Float32Array(24),g=new yt;g.setIndex(new Me(e,1)),g.setAttribute("position",new Me(l,3)),ps.call(this,g,new es({color:o,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function i1(e,o){this.type="Box3Helper",this.box=e,o=o||16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var l=new yt;l.setIndex(new Me(e,1)),l.setAttribute("position",new _t([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ps.call(this,l,new es({color:o,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function o1(e,o,l){this.plane=e,this.size=o===void 0?1:o,e=l!==void 0?l:16776960,o=new yt,o.setAttribute("position",new _t([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),o.computeBoundingSphere(),ju.call(this,o,new es({color:e,toneMapped:!1})),this.type="PlaneHelper",o=new yt,o.setAttribute("position",new _t([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Dt(o,new tr({color:e,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function Vf(e,o,l,g,w,B){D.call(this),this.type="ArrowHelper",e===void 0&&(e=new C(0,0,1)),o===void 0&&(o=new C(0,0,0)),l===void 0&&(l=1),g===void 0&&(g=16776960),w===void 0&&(w=.2*l),B===void 0&&(B=.2*w),dx===void 0&&(dx=new yt,dx.setAttribute("position",new _t([0,0,0,0,1,0],3)),vC=new Qf(0,.5,1,5,1),vC.translate(0,-.5,0)),this.position.copy(o),this.line=new ju(dx,new es({color:g,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Dt(vC,new tr({color:g,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(l,w,B)}function s1(e){e=e||1;var o=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];e=new yt,e.setAttribute("position",new _t(o,3)),e.setAttribute("color",new _t([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),o=new es({vertexColors:!0,toneMapped:!1}),ps.call(this,e,o),this.type="AxesHelper"}function Nw(e){this._renderer=e,this._pingPongRenderTarget=null,e=new Float32Array(20);var o=new C(0,1,0);e=new bf({defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o},inputEncoding:{value:zc[3e3]},outputEncoding:{value:zc[3e3]}},vertexShader:Qw(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

`+bw()+`

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:0,depthTest:!1,depthWrite:!1}),e.type="SphericalGaussianBlur",this._blurMaterial=e,this._cubemapShader=this._equirectShader=null,this._compileMaterial(this._blurMaterial)}function q2(e){return e=new x(3*Nc,3*Nc,e),e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function zw(e,o,l,g,w){e.viewport.set(o,l,g,w),e.scissor.set(o,l,g,w)}function $2(){var e=new c(1,1);return e=new bf({uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:zc[3e3]},outputEncoding:{value:zc[3e3]}},vertexShader:Qw(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

`+bw()+`

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:0,depthTest:!1,depthWrite:!1}),e.type="EquirectangularToCubeUV",e}function tM(){var e=new bf({uniforms:{envMap:{value:null},inputEncoding:{value:zc[3e3]},outputEncoding:{value:zc[3e3]}},vertexShader:Qw(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

`+bw()+`

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:0,depthTest:!1,depthWrite:!1});return e.type="CubemapToCubeUV",e}function Qw(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function bw(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function eM(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),xA.call(this,e),this.type="catmullrom",this.closed=!0}function rM(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),xA.call(this,e),this.type="catmullrom"}function kw(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),xA.call(this,e),this.type="catmullrom"}No===void 0&&(Number.EPSILON=Math.pow(2,-52)),$p===void 0&&(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}),wc===void 0&&(Math.sign=function(e){return 0>e?-1:0<e?1:+e}),!("name"in Function.prototype)&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),dt===void 0&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),l=1;l<arguments.length;l++){var g=arguments[l];if(g!=null)for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(o[w]=g[w])}return o}),dt(s.prototype,{addEventListener:function(e,o){this._listeners===void 0&&(this._listeners={});var l=this._listeners;l[e]===void 0&&(l[e]=[]),l[e].indexOf(o)===-1&&l[e].push(o)},hasEventListener:function(e,o){if(this._listeners===void 0)return!1;var l=this._listeners;return l[e]!==void 0&&l[e].indexOf(o)!==-1},removeEventListener:function(e,o){this._listeners!==void 0&&(e=this._listeners[e],e!==void 0&&(o=e.indexOf(o),o!==-1&&e.splice(o,1)))},dispatchEvent:function(e){if(this._listeners!==void 0){var o=this._listeners[e.type];if(o!==void 0){e.target=this,o=o.slice(0);for(var l=0,g=o.length;l<g;l++)o[l].call(this,e)}}}});for(var tA=[],a1=0;256>a1;a1++)tA[a1]=(16>a1?"0":"")+a1.toString(16);var ii={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,o=4294967295*Math.random()|0,l=4294967295*Math.random()|0,g=4294967295*Math.random()|0;return(tA[e&255]+tA[e>>8&255]+tA[e>>16&255]+tA[e>>24&255]+"-"+tA[o&255]+tA[o>>8&255]+"-"+tA[o>>16&15|64]+tA[o>>24&255]+"-"+tA[l&63|128]+tA[l>>8&255]+"-"+tA[l>>16&255]+tA[l>>24&255]+tA[g&255]+tA[g>>8&255]+tA[g>>16&255]+tA[g>>24&255]).toUpperCase()},clamp:function(e,o,l){return Math.max(o,Math.min(l,e))},euclideanModulo:function(e,o){return(e%o+o)%o},mapLinear:function(e,o,l,g,w){return g+(e-o)*(w-g)/(l-o)},lerp:function(e,o,l){return(1-l)*e+l*o},smoothstep:function(e,o,l){return e<=o?0:e>=l?1:(e=(e-o)/(l-o),e*e*(3-2*e))},smootherstep:function(e,o,l){return e<=o?0:e>=l?1:(e=(e-o)/(l-o),e*e*e*(e*(6*e-15)+10))},randInt:function(e,o){return e+Math.floor(Math.random()*(o-e+1))},randFloat:function(e,o){return e+Math.random()*(o-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*ii.DEG2RAD},radToDeg:function(e){return e*ii.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)==0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,o,l,g,w){var B=Math.cos,L=Math.sin,z=B(l/2);l=L(l/2);var V=B((o+g)/2),j=L((o+g)/2),et=B((o-g)/2),tt=L((o-g)/2);switch(B=B((g-o)/2),o=L((g-o)/2),w){case"XYX":e.set(z*j,l*et,l*tt,z*V);break;case"YZY":e.set(l*tt,z*j,l*et,z*V);break;case"ZXZ":e.set(l*et,l*tt,z*j,z*V);break;case"XZX":e.set(z*j,l*o,l*B,z*V);break;case"YXY":e.set(l*B,z*j,l*o,z*V);break;case"ZYZ":e.set(l*o,l*B,z*j,z*V);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+w)}}};vn(c.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),dt(c.prototype,{isVector2:!0,set:function(e,o){return this.x=e,this.y=o,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,o){return o!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,o)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this},addScaledVector:function(e,o){return this.x+=e.x*o,this.y+=e.y*o,this},sub:function(e,o){return o!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,o)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var o=this.x,l=this.y;return e=e.elements,this.x=e[0]*o+e[3]*l+e[6],this.y=e[1]*o+e[4]*l+e[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this},clampScalar:function(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this},clampLength:function(e,o){var l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(e,Math.min(o,l)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var o=this.x-e.x;return e=this.y-e.y,o*o+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this},lerpVectors:function(e,o,l){return this.x=e.x+(o.x-e.x)*l,this.y=e.y+(o.y-e.y)*l,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,o){return o===void 0&&(o=0),this.x=e[o],this.y=e[o+1],this},toArray:function(e,o){return e===void 0&&(e=[]),o===void 0&&(o=0),e[o]=this.x,e[o+1]=this.y,e},fromBufferAttribute:function(e,o,l){return l!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(o),this.y=e.getY(o),this},rotateAround:function(e,o){var l=Math.cos(o);o=Math.sin(o);var g=this.x-e.x,w=this.y-e.y;return this.x=g*l-w*o+e.x,this.y=g*o+w*l+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),dt(h.prototype,{isMatrix3:!0,set:function(e,o,l,g,w,B,L,z,V){var j=this.elements;return j[0]=e,j[1]=g,j[2]=L,j[3]=o,j[4]=w,j[5]=z,j[6]=l,j[7]=B,j[8]=V,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var o=this.elements;return e=e.elements,o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[8]=e[8],this},extractBasis:function(e,o,l){return e.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),l.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,o){var l=e.elements,g=o.elements;o=this.elements,e=l[0];var w=l[3],B=l[6],L=l[1],z=l[4],V=l[7],j=l[2],et=l[5];l=l[8];var tt=g[0],it=g[3],rt=g[6],At=g[1],mt=g[4],Vt=g[7],re=g[2],qt=g[5];return g=g[8],o[0]=e*tt+w*At+B*re,o[3]=e*it+w*mt+B*qt,o[6]=e*rt+w*Vt+B*g,o[1]=L*tt+z*At+V*re,o[4]=L*it+z*mt+V*qt,o[7]=L*rt+z*Vt+V*g,o[2]=j*tt+et*At+l*re,o[5]=j*it+et*mt+l*qt,o[8]=j*rt+et*Vt+l*g,this},multiplyScalar:function(e){var o=this.elements;return o[0]*=e,o[3]*=e,o[6]*=e,o[1]*=e,o[4]*=e,o[7]*=e,o[2]*=e,o[5]*=e,o[8]*=e,this},determinant:function(){var e=this.elements,o=e[0],l=e[1],g=e[2],w=e[3],B=e[4],L=e[5],z=e[6],V=e[7];return e=e[8],o*B*e-o*L*V-l*w*e+l*L*z+g*w*V-g*B*z},getInverse:function(e,o){o!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var l=e.elements;e=this.elements,o=l[0];var g=l[1],w=l[2],B=l[3],L=l[4],z=l[5],V=l[6],j=l[7];l=l[8];var et=l*L-z*j,tt=z*V-l*B,it=j*B-L*V,rt=o*et+g*tt+w*it;return rt===0?this.set(0,0,0,0,0,0,0,0,0):(rt=1/rt,e[0]=et*rt,e[1]=(w*j-l*g)*rt,e[2]=(z*g-w*L)*rt,e[3]=tt*rt,e[4]=(l*o-w*V)*rt,e[5]=(w*B-z*o)*rt,e[6]=it*rt,e[7]=(g*V-j*o)*rt,e[8]=(L*o-g*B)*rt,this)},transpose:function(){var e=this.elements,o=e[1];return e[1]=e[3],e[3]=o,o=e[2],e[2]=e[6],e[6]=o,o=e[5],e[5]=e[7],e[7]=o,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var o=this.elements;return e[0]=o[0],e[1]=o[3],e[2]=o[6],e[3]=o[1],e[4]=o[4],e[5]=o[7],e[6]=o[2],e[7]=o[5],e[8]=o[8],this},setUvTransform:function(e,o,l,g,w,B,L){var z=Math.cos(w);w=Math.sin(w),this.set(l*z,l*w,-l*(z*B+w*L)+B+e,-g*w,g*z,-g*(-w*B+z*L)+L+o,0,0,1)},scale:function(e,o){var l=this.elements;return l[0]*=e,l[3]*=e,l[6]*=e,l[1]*=o,l[4]*=o,l[7]*=o,this},rotate:function(e){var o=Math.cos(e);e=Math.sin(e);var l=this.elements,g=l[0],w=l[3],B=l[6],L=l[1],z=l[4],V=l[7];return l[0]=o*g+e*L,l[3]=o*w+e*z,l[6]=o*B+e*V,l[1]=-e*g+o*L,l[4]=-e*w+o*z,l[7]=-e*B+o*V,this},translate:function(e,o){var l=this.elements;return l[0]+=e*l[2],l[3]+=e*l[5],l[6]+=e*l[8],l[1]+=o*l[2],l[4]+=o*l[5],l[7]+=o*l[8],this},equals:function(e){var o=this.elements;e=e.elements;for(var l=0;9>l;l++)if(o[l]!==e[l])return!1;return!0},fromArray:function(e,o){o===void 0&&(o=0);for(var l=0;9>l;l++)this.elements[l]=e[l+o];return this},toArray:function(e,o){e===void 0&&(e=[]),o===void 0&&(o=0);var l=this.elements;return e[o]=l[0],e[o+1]=l[1],e[o+2]=l[2],e[o+3]=l[3],e[o+4]=l[4],e[o+5]=l[5],e[o+6]=l[6],e[o+7]=l[7],e[o+8]=l[8],e}});var _v,xd={getDataURL:function(e){if(typeof HTMLCanvasElement=="undefined")return e.src;if(!(e instanceof HTMLCanvasElement)){_v===void 0&&(_v=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_v.width=e.width,_v.height=e.height;var o=_v.getContext("2d");e instanceof ImageData?o.putImageData(e,0,0):o.drawImage(e,0,0,e.width,e.height),e=_v}return 2048<e.width||2048<e.height?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},GB=0;d.DEFAULT_IMAGE=void 0,d.DEFAULT_MAPPING=300,d.prototype=dt(pt(s.prototype),{constructor:d,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var o=e===void 0||typeof e=="string";if(!o&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];var l={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var g=this.image;if(g.uuid===void 0&&(g.uuid=ii.generateUUID()),!o&&e.images[g.uuid]===void 0){if(Array.isArray(g))for(var w=[],B=0,L=g.length;B<L;B++)w.push(xd.getDataURL(g[B]));else w=xd.getDataURL(g);e.images[g.uuid]={uuid:g.uuid,url:w}}l.image=g.uuid}return o||(e.textures[this.uuid]=l),l},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==300)return e;if(e.applyMatrix3(this.matrix),0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=Math.abs(Math.floor(e.x)%2)===1?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=Math.abs(Math.floor(e.y)%2)===1?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(d.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),vn(f.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),dt(f.prototype,{isVector4:!0,set:function(e,o,l,g){return this.x=e,this.y=o,this.z=l,this.w=g,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,o){return o!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,o)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this.z=e.z+o.z,this.w=e.w+o.w,this},addScaledVector:function(e,o){return this.x+=e.x*o,this.y+=e.y*o,this.z+=e.z*o,this.w+=e.w*o,this},sub:function(e,o){return o!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,o)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this.z=e.z-o.z,this.w=e.w-o.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var o=this.x,l=this.y,g=this.z,w=this.w;return e=e.elements,this.x=e[0]*o+e[4]*l+e[8]*g+e[12]*w,this.y=e[1]*o+e[5]*l+e[9]*g+e[13]*w,this.z=e[2]*o+e[6]*l+e[10]*g+e[14]*w,this.w=e[3]*o+e[7]*l+e[11]*g+e[15]*w,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var o=Math.sqrt(1-e.w*e.w);return 1e-4>o?(this.x=1,this.z=this.y=0):(this.x=e.x/o,this.y=e.y/o,this.z=e.z/o),this},setAxisAngleFromRotationMatrix:function(e){e=e.elements;var o=e[0],l=e[4],g=e[8],w=e[1],B=e[5],L=e[9],z=e[2],V=e[6],j=e[10];return .01>Math.abs(l-w)&&.01>Math.abs(g-z)&&.01>Math.abs(L-V)?.1>Math.abs(l+w)&&.1>Math.abs(g+z)&&.1>Math.abs(L+V)&&.1>Math.abs(o+B+j-3)?(this.set(1,0,0,0),this):(e=Math.PI,o=(o+1)/2,B=(B+1)/2,j=(j+1)/2,l=(l+w)/4,g=(g+z)/4,L=(L+V)/4,o>B&&o>j?.01>o?(V=0,l=z=.707106781):(V=Math.sqrt(o),z=l/V,l=g/V):B>j?.01>B?(V=.707106781,z=0,l=.707106781):(z=Math.sqrt(B),V=l/z,l=L/z):.01>j?(z=V=.707106781,l=0):(l=Math.sqrt(j),V=g/l,z=L/l),this.set(V,z,l,e),this):(e=Math.sqrt((V-L)*(V-L)+(g-z)*(g-z)+(w-l)*(w-l)),.001>Math.abs(e)&&(e=1),this.x=(V-L)/e,this.y=(g-z)/e,this.z=(w-l)/e,this.w=Math.acos((o+B+j-1)/2),this)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this.z=Math.max(e.z,Math.min(o.z,this.z)),this.w=Math.max(e.w,Math.min(o.w,this.w)),this},clampScalar:function(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this.z=Math.max(e,Math.min(o,this.z)),this.w=Math.max(e,Math.min(o,this.w)),this},clampLength:function(e,o){var l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(e,Math.min(o,l)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this.z+=(e.z-this.z)*o,this.w+=(e.w-this.w)*o,this},lerpVectors:function(e,o,l){return this.x=e.x+(o.x-e.x)*l,this.y=e.y+(o.y-e.y)*l,this.z=e.z+(o.z-e.z)*l,this.w=e.w+(o.w-e.w)*l,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,o){return o===void 0&&(o=0),this.x=e[o],this.y=e[o+1],this.z=e[o+2],this.w=e[o+3],this},toArray:function(e,o){return e===void 0&&(e=[]),o===void 0&&(o=0),e[o]=this.x,e[o+1]=this.y,e[o+2]=this.z,e[o+3]=this.w,e},fromBufferAttribute:function(e,o,l){return l!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(o),this.y=e.getY(o),this.z=e.getZ(o),this.w=e.getW(o),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),x.prototype=dt(pt(s.prototype),{constructor:x,isWebGLRenderTarget:!0,setSize:function(e,o){(this.width!==e||this.height!==o)&&(this.width=e,this.height=o,this.texture.image.width=e,this.texture.image.height=o,this.dispose()),this.viewport.set(0,0,e,o),this.scissor.set(0,0,e,o)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),E.prototype=dt(pt(x.prototype),{constructor:E,isWebGLMultisampleRenderTarget:!0,copy:function(e){return x.prototype.copy.call(this,e),this.samples=e.samples,this}}),dt(N,{slerp:function(e,o,l,g){return l.copy(e).slerp(o,g)},slerpFlat:function(e,o,l,g,w,B,L){var z=l[g+0],V=l[g+1],j=l[g+2];l=l[g+3],g=w[B+0];var et=w[B+1],tt=w[B+2];if(w=w[B+3],l!==w||z!==g||V!==et||j!==tt){B=1-L;var it=z*g+V*et+j*tt+l*w,rt=0<=it?1:-1,At=1-it*it;At>No&&(At=Math.sqrt(At),it=Math.atan2(At,it*rt),B=Math.sin(B*it)/At,L=Math.sin(L*it)/At),rt*=L,z=z*B+g*rt,V=V*B+et*rt,j=j*B+tt*rt,l=l*B+w*rt,B===1-L&&(L=1/Math.sqrt(z*z+V*V+j*j+l*l),z*=L,V*=L,j*=L,l*=L)}e[o]=z,e[o+1]=V,e[o+2]=j,e[o+3]=l},multiplyQuaternionsFlat:function(e,o,l,g,w,B){var L=l[g],z=l[g+1],V=l[g+2];l=l[g+3],g=w[B];var j=w[B+1],et=w[B+2];return w=w[B+3],e[o]=L*w+l*g+z*et-V*j,e[o+1]=z*w+l*j+V*g-L*et,e[o+2]=V*w+l*et+L*j-z*g,e[o+3]=l*w-L*g-z*j-V*et,e}}),vn(N.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),dt(N.prototype,{isQuaternion:!0,set:function(e,o,l,g){return this._x=e,this._y=o,this._z=l,this._w=g,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,o){if(!e||!e.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var l=e._x,g=e._y,w=e._z;e=e.order;var B=Math.cos,L=Math.sin,z=B(l/2),V=B(g/2);switch(B=B(w/2),l=L(l/2),g=L(g/2),w=L(w/2),e){case"XYZ":this._x=l*V*B+z*g*w,this._y=z*g*B-l*V*w,this._z=z*V*w+l*g*B,this._w=z*V*B-l*g*w;break;case"YXZ":this._x=l*V*B+z*g*w,this._y=z*g*B-l*V*w,this._z=z*V*w-l*g*B,this._w=z*V*B+l*g*w;break;case"ZXY":this._x=l*V*B-z*g*w,this._y=z*g*B+l*V*w,this._z=z*V*w+l*g*B,this._w=z*V*B-l*g*w;break;case"ZYX":this._x=l*V*B-z*g*w,this._y=z*g*B+l*V*w,this._z=z*V*w-l*g*B,this._w=z*V*B+l*g*w;break;case"YZX":this._x=l*V*B+z*g*w,this._y=z*g*B+l*V*w,this._z=z*V*w-l*g*B,this._w=z*V*B-l*g*w;break;case"XZY":this._x=l*V*B-z*g*w,this._y=z*g*B-l*V*w,this._z=z*V*w+l*g*B,this._w=z*V*B+l*g*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+e)}return o!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(e,o){o/=2;var l=Math.sin(o);return this._x=e.x*l,this._y=e.y*l,this._z=e.z*l,this._w=Math.cos(o),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var o=e.elements,l=o[0];e=o[4];var g=o[8],w=o[1],B=o[5],L=o[9],z=o[2],V=o[6];o=o[10];var j=l+B+o;return 0<j?(l=.5/Math.sqrt(j+1),this._w=.25/l,this._x=(V-L)*l,this._y=(g-z)*l,this._z=(w-e)*l):l>B&&l>o?(l=2*Math.sqrt(1+l-B-o),this._w=(V-L)/l,this._x=.25*l,this._y=(e+w)/l,this._z=(g+z)/l):B>o?(l=2*Math.sqrt(1+B-l-o),this._w=(g-z)/l,this._x=(e+w)/l,this._y=.25*l,this._z=(L+V)/l):(l=2*Math.sqrt(1+o-l-B),this._w=(w-e)/l,this._x=(g+z)/l,this._y=(L+V)/l,this._z=.25*l),this._onChangeCallback(),this},setFromUnitVectors:function(e,o){var l=e.dot(o)+1;return 1e-6>l?(l=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*o.z-e.z*o.y,this._y=e.z*o.x-e.x*o.z,this._z=e.x*o.y-e.y*o.x),this._w=l,this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(ii.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,o){var l=this.angleTo(e);return l===0?this:(this.slerp(e,Math.min(1,o/l)),this)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this._onChangeCallback(),this},multiply:function(e,o){return o!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,o)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,o){var l=e._x,g=e._y,w=e._z;e=e._w;var B=o._x,L=o._y,z=o._z;return o=o._w,this._x=l*o+e*B+g*z-w*L,this._y=g*o+e*L+w*B-l*z,this._z=w*o+e*z+l*L-g*B,this._w=e*o-l*B-g*L-w*z,this._onChangeCallback(),this},slerp:function(e,o){if(o===0)return this;if(o===1)return this.copy(e);var l=this._x,g=this._y,w=this._z,B=this._w,L=B*e._w+l*e._x+g*e._y+w*e._z;if(0>L?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,L=-L):this.copy(e),1<=L)return this._w=B,this._x=l,this._y=g,this._z=w,this;if(e=1-L*L,e<=No)return L=1-o,this._w=L*B+o*this._w,this._x=L*l+o*this._x,this._y=L*g+o*this._y,this._z=L*w+o*this._z,this.normalize(),this._onChangeCallback(),this;e=Math.sqrt(e);var z=Math.atan2(e,L);return L=Math.sin((1-o)*z)/e,o=Math.sin(o*z)/e,this._w=B*L+this._w*o,this._x=l*L+this._x*o,this._y=g*L+this._y*o,this._z=w*L+this._z*o,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,o){return o===void 0&&(o=0),this._x=e[o],this._y=e[o+1],this._z=e[o+2],this._w=e[o+3],this._onChangeCallback(),this},toArray:function(e,o){return e===void 0&&(e=[]),o===void 0&&(o=0),e[o]=this._x,e[o+1]=this._y,e[o+2]=this._z,e[o+3]=this._w,e},fromBufferAttribute:function(e,o){return this._x=e.getX(o),this._y=e.getY(o),this._z=e.getZ(o),this._w=e.getW(o),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Gw=new C,nM=new N;dt(C.prototype,{isVector3:!0,set:function(e,o,l){return this.x=e,this.y=o,this.z=l,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,o){return o!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,o)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this.z=e.z+o.z,this},addScaledVector:function(e,o){return this.x+=e.x*o,this.y+=e.y*o,this.z+=e.z*o,this},sub:function(e,o){return o!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,o)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this.z=e.z-o.z,this},multiply:function(e,o){return o!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,o)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,o){return this.x=e.x*o.x,this.y=e.y*o.y,this.z=e.z*o.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(nM.setFromEuler(e))},applyAxisAngle:function(e,o){return this.applyQuaternion(nM.setFromAxisAngle(e,o))},applyMatrix3:function(e){var o=this.x,l=this.y,g=this.z;return e=e.elements,this.x=e[0]*o+e[3]*l+e[6]*g,this.y=e[1]*o+e[4]*l+e[7]*g,this.z=e[2]*o+e[5]*l+e[8]*g,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var o=this.x,l=this.y,g=this.z;e=e.elements;var w=1/(e[3]*o+e[7]*l+e[11]*g+e[15]);return this.x=(e[0]*o+e[4]*l+e[8]*g+e[12])*w,this.y=(e[1]*o+e[5]*l+e[9]*g+e[13])*w,this.z=(e[2]*o+e[6]*l+e[10]*g+e[14])*w,this},applyQuaternion:function(e){var o=this.x,l=this.y,g=this.z,w=e.x,B=e.y,L=e.z;e=e.w;var z=e*o+B*g-L*l,V=e*l+L*o-w*g,j=e*g+w*l-B*o;return o=-w*o-B*l-L*g,this.x=z*e+o*-w+V*-L-j*-B,this.y=V*e+o*-B+j*-w-z*-L,this.z=j*e+o*-L+z*-B-V*-w,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var o=this.x,l=this.y,g=this.z;return e=e.elements,this.x=e[0]*o+e[4]*l+e[8]*g,this.y=e[1]*o+e[5]*l+e[9]*g,this.z=e[2]*o+e[6]*l+e[10]*g,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this.z=Math.max(e.z,Math.min(o.z,this.z)),this},clampScalar:function(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this.z=Math.max(e,Math.min(o,this.z)),this},clampLength:function(e,o){var l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(e,Math.min(o,l)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this.z+=(e.z-this.z)*o,this},lerpVectors:function(e,o,l){return this.x=e.x+(o.x-e.x)*l,this.y=e.y+(o.y-e.y)*l,this.z=e.z+(o.z-e.z)*l,this},cross:function(e,o){return o!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,o)):this.crossVectors(this,e)},crossVectors:function(e,o){var l=e.x,g=e.y;e=e.z;var w=o.x,B=o.y;return o=o.z,this.x=g*o-e*B,this.y=e*w-l*o,this.z=l*B-g*w,this},projectOnVector:function(e){var o=e.lengthSq();return o===0?this.set(0,0,0):(o=e.dot(this)/o,this.copy(e).multiplyScalar(o))},projectOnPlane:function(e){return Gw.copy(this).projectOnVector(e),this.sub(Gw)},reflect:function(e){return this.sub(Gw.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var o=Math.sqrt(this.lengthSq()*e.lengthSq());return o===0?Math.PI/2:(e=this.dot(e)/o,Math.acos(ii.clamp(e,-1,1)))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var o=this.x-e.x,l=this.y-e.y;return e=this.z-e.z,o*o+l*l+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,o,l){var g=Math.sin(o)*e;return this.x=g*Math.sin(l),this.y=Math.cos(o)*e,this.z=g*Math.cos(l),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,o,l){return this.x=e*Math.sin(o),this.y=l,this.z=e*Math.cos(o),this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var o=this.setFromMatrixColumn(e,0).length(),l=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=o,this.y=l,this.z=e,this},setFromMatrixColumn:function(e,o){return this.fromArray(e.elements,4*o)},setFromMatrix3Column:function(e,o){return this.fromArray(e.elements,3*o)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,o){return o===void 0&&(o=0),this.x=e[o],this.y=e[o+1],this.z=e[o+2],this},toArray:function(e,o){return e===void 0&&(e=[]),o===void 0&&(o=0),e[o]=this.x,e[o+1]=this.y,e[o+2]=this.z,e},fromBufferAttribute:function(e,o,l){return l!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(o),this.y=e.getY(o),this.z=e.getZ(o),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Bv=new C,Fh=new I,VB=new C(0,0,0),WB=new C(1,1,1),wd=new C,zy=new C,Yu=new C;dt(I.prototype,{isMatrix4:!0,set:function(e,o,l,g,w,B,L,z,V,j,et,tt,it,rt,At,mt){var Vt=this.elements;return Vt[0]=e,Vt[4]=o,Vt[8]=l,Vt[12]=g,Vt[1]=w,Vt[5]=B,Vt[9]=L,Vt[13]=z,Vt[2]=V,Vt[6]=j,Vt[10]=et,Vt[14]=tt,Vt[3]=it,Vt[7]=rt,Vt[11]=At,Vt[15]=mt,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new I().fromArray(this.elements)},copy:function(e){var o=this.elements;return e=e.elements,o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],this},copyPosition:function(e){var o=this.elements;return e=e.elements,o[12]=e[12],o[13]=e[13],o[14]=e[14],this},extractBasis:function(e,o,l){return e.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),l.setFromMatrixColumn(this,2),this},makeBasis:function(e,o,l){return this.set(e.x,o.x,l.x,0,e.y,o.y,l.y,0,e.z,o.z,l.z,0,0,0,0,1),this},extractRotation:function(e){var o=this.elements,l=e.elements,g=1/Bv.setFromMatrixColumn(e,0).length(),w=1/Bv.setFromMatrixColumn(e,1).length();return e=1/Bv.setFromMatrixColumn(e,2).length(),o[0]=l[0]*g,o[1]=l[1]*g,o[2]=l[2]*g,o[3]=0,o[4]=l[4]*w,o[5]=l[5]*w,o[6]=l[6]*w,o[7]=0,o[8]=l[8]*e,o[9]=l[9]*e,o[10]=l[10]*e,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var o=this.elements,l=e.x,g=e.y,w=e.z,B=Math.cos(l);l=Math.sin(l);var L=Math.cos(g);g=Math.sin(g);var z=Math.cos(w);if(w=Math.sin(w),e.order==="XYZ"){e=B*z;var V=B*w,j=l*z,et=l*w;o[0]=L*z,o[4]=-L*w,o[8]=g,o[1]=V+j*g,o[5]=e-et*g,o[9]=-l*L,o[2]=et-e*g,o[6]=j+V*g,o[10]=B*L}else e.order==="YXZ"?(e=L*z,V=L*w,j=g*z,et=g*w,o[0]=e+et*l,o[4]=j*l-V,o[8]=B*g,o[1]=B*w,o[5]=B*z,o[9]=-l,o[2]=V*l-j,o[6]=et+e*l,o[10]=B*L):e.order==="ZXY"?(e=L*z,V=L*w,j=g*z,et=g*w,o[0]=e-et*l,o[4]=-B*w,o[8]=j+V*l,o[1]=V+j*l,o[5]=B*z,o[9]=et-e*l,o[2]=-B*g,o[6]=l,o[10]=B*L):e.order==="ZYX"?(e=B*z,V=B*w,j=l*z,et=l*w,o[0]=L*z,o[4]=j*g-V,o[8]=e*g+et,o[1]=L*w,o[5]=et*g+e,o[9]=V*g-j,o[2]=-g,o[6]=l*L,o[10]=B*L):e.order==="YZX"?(e=B*L,V=B*g,j=l*L,et=l*g,o[0]=L*z,o[4]=et-e*w,o[8]=j*w+V,o[1]=w,o[5]=B*z,o[9]=-l*z,o[2]=-g*z,o[6]=V*w+j,o[10]=e-et*w):e.order==="XZY"&&(e=B*L,V=B*g,j=l*L,et=l*g,o[0]=L*z,o[4]=-w,o[8]=g*z,o[1]=e*w+et,o[5]=B*z,o[9]=V*w-j,o[2]=j*w-V,o[6]=l*z,o[10]=et*w+e);return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(VB,e,WB)},lookAt:function(e,o,l){var g=this.elements;return Yu.subVectors(e,o),Yu.lengthSq()===0&&(Yu.z=1),Yu.normalize(),wd.crossVectors(l,Yu),wd.lengthSq()===0&&(Math.abs(l.z)===1?Yu.x+=1e-4:Yu.z+=1e-4,Yu.normalize(),wd.crossVectors(l,Yu)),wd.normalize(),zy.crossVectors(Yu,wd),g[0]=wd.x,g[4]=zy.x,g[8]=Yu.x,g[1]=wd.y,g[5]=zy.y,g[9]=Yu.y,g[2]=wd.z,g[6]=zy.z,g[10]=Yu.z,this},multiply:function(e,o){return o!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,o)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,o){var l=e.elements,g=o.elements;o=this.elements,e=l[0];var w=l[4],B=l[8],L=l[12],z=l[1],V=l[5],j=l[9],et=l[13],tt=l[2],it=l[6],rt=l[10],At=l[14],mt=l[3],Vt=l[7],re=l[11];l=l[15];var qt=g[0],de=g[4],oe=g[8],_e=g[12],ee=g[1],De=g[5],Ke=g[9],Be=g[13],$e=g[2],Xe=g[6],Gr=g[10],gn=g[14],Mr=g[3],pn=g[7],Yn=g[11];return g=g[15],o[0]=e*qt+w*ee+B*$e+L*Mr,o[4]=e*de+w*De+B*Xe+L*pn,o[8]=e*oe+w*Ke+B*Gr+L*Yn,o[12]=e*_e+w*Be+B*gn+L*g,o[1]=z*qt+V*ee+j*$e+et*Mr,o[5]=z*de+V*De+j*Xe+et*pn,o[9]=z*oe+V*Ke+j*Gr+et*Yn,o[13]=z*_e+V*Be+j*gn+et*g,o[2]=tt*qt+it*ee+rt*$e+At*Mr,o[6]=tt*de+it*De+rt*Xe+At*pn,o[10]=tt*oe+it*Ke+rt*Gr+At*Yn,o[14]=tt*_e+it*Be+rt*gn+At*g,o[3]=mt*qt+Vt*ee+re*$e+l*Mr,o[7]=mt*de+Vt*De+re*Xe+l*pn,o[11]=mt*oe+Vt*Ke+re*Gr+l*Yn,o[15]=mt*_e+Vt*Be+re*gn+l*g,this},multiplyScalar:function(e){var o=this.elements;return o[0]*=e,o[4]*=e,o[8]*=e,o[12]*=e,o[1]*=e,o[5]*=e,o[9]*=e,o[13]*=e,o[2]*=e,o[6]*=e,o[10]*=e,o[14]*=e,o[3]*=e,o[7]*=e,o[11]*=e,o[15]*=e,this},determinant:function(){var e=this.elements,o=e[0],l=e[4],g=e[8],w=e[12],B=e[1],L=e[5],z=e[9],V=e[13],j=e[2],et=e[6],tt=e[10],it=e[14];return e[3]*(+w*z*et-g*V*et-w*L*tt+l*V*tt+g*L*it-l*z*it)+e[7]*(+o*z*it-o*V*tt+w*B*tt-g*B*it+g*V*j-w*z*j)+e[11]*(+o*V*et-o*L*it-w*B*et+l*B*it+w*L*j-l*V*j)+e[15]*(-g*L*j-o*z*et+o*L*tt+g*B*et-l*B*tt+l*z*j)},transpose:function(){var e=this.elements,o=e[1];return e[1]=e[4],e[4]=o,o=e[2],e[2]=e[8],e[8]=o,o=e[6],e[6]=e[9],e[9]=o,o=e[3],e[3]=e[12],e[12]=o,o=e[7],e[7]=e[13],e[13]=o,o=e[11],e[11]=e[14],e[14]=o,this},setPosition:function(e,o,l){var g=this.elements;return e.isVector3?(g[12]=e.x,g[13]=e.y,g[14]=e.z):(g[12]=e,g[13]=o,g[14]=l),this},getInverse:function(e,o){o!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate."),o=this.elements;var l=e.elements;e=l[0];var g=l[1],w=l[2],B=l[3],L=l[4],z=l[5],V=l[6],j=l[7],et=l[8],tt=l[9],it=l[10],rt=l[11],At=l[12],mt=l[13],Vt=l[14];l=l[15];var re=tt*Vt*j-mt*it*j+mt*V*rt-z*Vt*rt-tt*V*l+z*it*l,qt=At*it*j-et*Vt*j-At*V*rt+L*Vt*rt+et*V*l-L*it*l,de=et*mt*j-At*tt*j+At*z*rt-L*mt*rt-et*z*l+L*tt*l,oe=At*tt*V-et*mt*V-At*z*it+L*mt*it+et*z*Vt-L*tt*Vt,_e=e*re+g*qt+w*de+B*oe;return _e===0?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(_e=1/_e,o[0]=re*_e,o[1]=(mt*it*B-tt*Vt*B-mt*w*rt+g*Vt*rt+tt*w*l-g*it*l)*_e,o[2]=(z*Vt*B-mt*V*B+mt*w*j-g*Vt*j-z*w*l+g*V*l)*_e,o[3]=(tt*V*B-z*it*B-tt*w*j+g*it*j+z*w*rt-g*V*rt)*_e,o[4]=qt*_e,o[5]=(et*Vt*B-At*it*B+At*w*rt-e*Vt*rt-et*w*l+e*it*l)*_e,o[6]=(At*V*B-L*Vt*B-At*w*j+e*Vt*j+L*w*l-e*V*l)*_e,o[7]=(L*it*B-et*V*B+et*w*j-e*it*j-L*w*rt+e*V*rt)*_e,o[8]=de*_e,o[9]=(At*tt*B-et*mt*B-At*g*rt+e*mt*rt+et*g*l-e*tt*l)*_e,o[10]=(L*mt*B-At*z*B+At*g*j-e*mt*j-L*g*l+e*z*l)*_e,o[11]=(et*z*B-L*tt*B-et*g*j+e*tt*j+L*g*rt-e*z*rt)*_e,o[12]=oe*_e,o[13]=(et*mt*w-At*tt*w+At*g*it-e*mt*it-et*g*Vt+e*tt*Vt)*_e,o[14]=(At*z*w-L*mt*w-At*g*V+e*mt*V+L*g*Vt-e*z*Vt)*_e,o[15]=(L*tt*w-et*z*w+et*g*V-e*tt*V-L*g*it+e*z*it)*_e,this)},scale:function(e){var o=this.elements,l=e.x,g=e.y;return e=e.z,o[0]*=l,o[4]*=g,o[8]*=e,o[1]*=l,o[5]*=g,o[9]*=e,o[2]*=l,o[6]*=g,o[10]*=e,o[3]*=l,o[7]*=g,o[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,o,l){return this.set(1,0,0,e,0,1,0,o,0,0,1,l,0,0,0,1),this},makeRotationX:function(e){var o=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,o,-e,0,0,e,o,0,0,0,0,1),this},makeRotationY:function(e){var o=Math.cos(e);return e=Math.sin(e),this.set(o,0,e,0,0,1,0,0,-e,0,o,0,0,0,0,1),this},makeRotationZ:function(e){var o=Math.cos(e);return e=Math.sin(e),this.set(o,-e,0,0,e,o,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,o){var l=Math.cos(o);o=Math.sin(o);var g=1-l,w=e.x,B=e.y;e=e.z;var L=g*w,z=g*B;return this.set(L*w+l,L*B-o*e,L*e+o*B,0,L*B+o*e,z*B+l,z*e-o*w,0,L*e-o*B,z*e+o*w,g*e*e+l,0,0,0,0,1),this},makeScale:function(e,o,l){return this.set(e,0,0,0,0,o,0,0,0,0,l,0,0,0,0,1),this},makeShear:function(e,o,l){return this.set(1,o,l,0,e,1,l,0,e,o,1,0,0,0,0,1),this},compose:function(e,o,l){var g=this.elements,w=o._x,B=o._y,L=o._z,z=o._w,V=w+w,j=B+B,et=L+L;o=w*V;var tt=w*j;w*=et;var it=B*j;B*=et,L*=et,V*=z,j*=z,z*=et,et=l.x;var rt=l.y;return l=l.z,g[0]=(1-(it+L))*et,g[1]=(tt+z)*et,g[2]=(w-j)*et,g[3]=0,g[4]=(tt-z)*rt,g[5]=(1-(o+L))*rt,g[6]=(B+V)*rt,g[7]=0,g[8]=(w+j)*l,g[9]=(B-V)*l,g[10]=(1-(o+it))*l,g[11]=0,g[12]=e.x,g[13]=e.y,g[14]=e.z,g[15]=1,this},decompose:function(e,o,l){var g=this.elements,w=Bv.set(g[0],g[1],g[2]).length(),B=Bv.set(g[4],g[5],g[6]).length(),L=Bv.set(g[8],g[9],g[10]).length();0>this.determinant()&&(w=-w),e.x=g[12],e.y=g[13],e.z=g[14],Fh.copy(this),e=1/w,g=1/B;var z=1/L;return Fh.elements[0]*=e,Fh.elements[1]*=e,Fh.elements[2]*=e,Fh.elements[4]*=g,Fh.elements[5]*=g,Fh.elements[6]*=g,Fh.elements[8]*=z,Fh.elements[9]*=z,Fh.elements[10]*=z,o.setFromRotationMatrix(Fh),l.x=w,l.y=B,l.z=L,this},makePerspective:function(e,o,l,g,w,B){B===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var L=this.elements;return L[0]=2*w/(o-e),L[4]=0,L[8]=(o+e)/(o-e),L[12]=0,L[1]=0,L[5]=2*w/(l-g),L[9]=(l+g)/(l-g),L[13]=0,L[2]=0,L[6]=0,L[10]=-(B+w)/(B-w),L[14]=-2*B*w/(B-w),L[3]=0,L[7]=0,L[11]=-1,L[15]=0,this},makeOrthographic:function(e,o,l,g,w,B){var L=this.elements,z=1/(o-e),V=1/(l-g),j=1/(B-w);return L[0]=2*z,L[4]=0,L[8]=0,L[12]=-((o+e)*z),L[1]=0,L[5]=2*V,L[9]=0,L[13]=-((l+g)*V),L[2]=0,L[6]=0,L[10]=-2*j,L[14]=-((B+w)*j),L[3]=0,L[7]=0,L[11]=0,L[15]=1,this},equals:function(e){var o=this.elements;e=e.elements;for(var l=0;16>l;l++)if(o[l]!==e[l])return!1;return!0},fromArray:function(e,o){o===void 0&&(o=0);for(var l=0;16>l;l++)this.elements[l]=e[l+o];return this},toArray:function(e,o){e===void 0&&(e=[]),o===void 0&&(o=0);var l=this.elements;return e[o]=l[0],e[o+1]=l[1],e[o+2]=l[2],e[o+3]=l[3],e[o+4]=l[4],e[o+5]=l[5],e[o+6]=l[6],e[o+7]=l[7],e[o+8]=l[8],e[o+9]=l[9],e[o+10]=l[10],e[o+11]=l[11],e[o+12]=l[12],e[o+13]=l[13],e[o+14]=l[14],e[o+15]=l[15],e}});var iM=new I,oM=new N;S.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),S.DefaultOrder="XYZ",vn(S.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),dt(S.prototype,{isEuler:!0,set:function(e,o,l,g){return this._x=e,this._y=o,this._z=l,this._order=g||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,o,l){var g=ii.clamp,w=e.elements;e=w[0];var B=w[4],L=w[8],z=w[1],V=w[5],j=w[9],et=w[2],tt=w[6];switch(w=w[10],o=o||this._order,o){case"XYZ":this._y=Math.asin(g(L,-1,1)),.9999999>Math.abs(L)?(this._x=Math.atan2(-j,w),this._z=Math.atan2(-B,e)):(this._x=Math.atan2(tt,V),this._z=0);break;case"YXZ":this._x=Math.asin(-g(j,-1,1)),.9999999>Math.abs(j)?(this._y=Math.atan2(L,w),this._z=Math.atan2(z,V)):(this._y=Math.atan2(-et,e),this._z=0);break;case"ZXY":this._x=Math.asin(g(tt,-1,1)),.9999999>Math.abs(tt)?(this._y=Math.atan2(-et,w),this._z=Math.atan2(-B,V)):(this._y=0,this._z=Math.atan2(z,e));break;case"ZYX":this._y=Math.asin(-g(et,-1,1)),.9999999>Math.abs(et)?(this._x=Math.atan2(tt,w),this._z=Math.atan2(z,e)):(this._x=0,this._z=Math.atan2(-B,V));break;case"YZX":this._z=Math.asin(g(z,-1,1)),.9999999>Math.abs(z)?(this._x=Math.atan2(-j,V),this._y=Math.atan2(-et,e)):(this._x=0,this._y=Math.atan2(L,w));break;case"XZY":this._z=Math.asin(-g(B,-1,1)),.9999999>Math.abs(B)?(this._x=Math.atan2(tt,V),this._y=Math.atan2(L,e)):(this._x=Math.atan2(-j,w),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+o)}return this._order=o,l!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(e,o,l){return iM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iM,o,l)},setFromVector3:function(e,o){return this.set(e.x,e.y,e.z,o||this._order)},reorder:function(e){return oM.setFromEuler(this),this.setFromQuaternion(oM,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,o){return e===void 0&&(e=[]),o===void 0&&(o=0),e[o]=this._x,e[o+1]=this._y,e[o+2]=this._z,e[o+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new C(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),dt(F.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask=this.mask|1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return(this.mask&e.mask)!=0}});var jB=0,sM=new C,Ev=new N,Wf=new I,Qy=new C,A1=new C,XB=new C,KB=new N,aM=new C(1,0,0),AM=new C(0,1,0),uM=new C(0,0,1),YB={type:"added"},ZB={type:"removed"};D.DefaultUp=new C(0,1,0),D.DefaultMatrixAutoUpdate=!0,D.prototype=dt(pt(s.prototype),{constructor:D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,o){this.quaternion.setFromAxisAngle(e,o)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,o){return Ev.setFromAxisAngle(e,o),this.quaternion.multiply(Ev),this},rotateOnWorldAxis:function(e,o){return Ev.setFromAxisAngle(e,o),this.quaternion.premultiply(Ev),this},rotateX:function(e){return this.rotateOnAxis(aM,e)},rotateY:function(e){return this.rotateOnAxis(AM,e)},rotateZ:function(e){return this.rotateOnAxis(uM,e)},translateOnAxis:function(e,o){return sM.copy(e).applyQuaternion(this.quaternion),this.position.add(sM.multiplyScalar(o)),this},translateX:function(e){return this.translateOnAxis(aM,e)},translateY:function(e){return this.translateOnAxis(AM,e)},translateZ:function(e){return this.translateOnAxis(uM,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Wf.getInverse(this.matrixWorld))},lookAt:function(e,o,l){e.isVector3?Qy.copy(e):Qy.set(e,o,l),e=this.parent,this.updateWorldMatrix(!0,!1),A1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wf.lookAt(A1,Qy,this.up):Wf.lookAt(Qy,A1,this.up),this.quaternion.setFromRotationMatrix(Wf),e&&(Wf.extractRotation(e.matrixWorld),Ev.setFromRotationMatrix(Wf),this.quaternion.premultiply(Ev.inverse()))},add:function(e){if(1<arguments.length){for(var o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(YB)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(1<arguments.length){for(var o=0;o<arguments.length;o++)this.remove(arguments[o]);return this}return o=this.children.indexOf(e),o!==-1&&(e.parent=null,this.children.splice(o,1),e.dispatchEvent(ZB)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Wf.getInverse(this.matrixWorld),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Wf.multiply(e.parent.matrixWorld)),e.applyMatrix4(Wf),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,o){if(this[e]===o)return this;for(var l=0,g=this.children.length;l<g;l++){var w=this.children[l].getObjectByProperty(e,o);if(w!==void 0)return w}},getWorldPosition:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new C),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new N),this.updateMatrixWorld(!0),this.matrixWorld.decompose(A1,e,XB),e},getWorldScale:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new C),this.updateMatrixWorld(!0),this.matrixWorld.decompose(A1,KB,e),e},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new C),this.updateMatrixWorld(!0);var o=this.matrixWorld.elements;return e.set(o[8],o[9],o[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var o=this.children,l=0,g=o.length;l<g;l++)o[l].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var o=this.children,l=0,g=o.length;l<g;l++)o[l].traverseVisible(e)}},traverseAncestors:function(e){var o=this.parent;o!==null&&(e(o),o.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var o=this.children,l=0,g=o.length;l<g;l++)o[l].updateMatrixWorld(e)},updateWorldMatrix:function(e,o){var l=this.parent;if(e===!0&&l!==null&&l.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),o===!0)for(e=this.children,o=0,l=e.length;o<l;o++)e[o].updateWorldMatrix(!1,!0)},toJSON:function(e){function o(et,tt){return et[tt.uuid]===void 0&&(et[tt.uuid]=tt.toJSON(e)),tt.uuid}function l(et){var tt=[],it;for(it in et){var rt=et[it];delete rt.metadata,tt.push(rt)}return tt}var g=e===void 0||typeof e=="string",w={};g&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},w.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var B={};if(B.uuid=this.uuid,B.type=this.type,this.name!==""&&(B.name=this.name),this.castShadow===!0&&(B.castShadow=!0),this.receiveShadow===!0&&(B.receiveShadow=!0),this.visible===!1&&(B.visible=!1),this.frustumCulled===!1&&(B.frustumCulled=!1),this.renderOrder!==0&&(B.renderOrder=this.renderOrder),Za(this.userData)!=="{}"&&(B.userData=this.userData),B.layers=this.layers.mask,B.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(B.matrixAutoUpdate=!1),this.isInstancedMesh&&(B.type="InstancedMesh",B.count=this.count,B.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){B.geometry=o(e.geometries,this.geometry);var L=this.geometry.parameters;if(L!==void 0&&L.shapes!==void 0)if(L=L.shapes,Array.isArray(L))for(var z=0,V=L.length;z<V;z++)o(e.shapes,L[z]);else o(e.shapes,L)}if(this.material!==void 0)if(Array.isArray(this.material)){for(L=[],z=0,V=this.material.length;z<V;z++)L.push(o(e.materials,this.material[z]));B.material=L}else B.material=o(e.materials,this.material);if(0<this.children.length)for(B.children=[],z=0;z<this.children.length;z++)B.children.push(this.children[z].toJSON(e).object);if(g){g=l(e.geometries),z=l(e.materials),V=l(e.textures);var j=l(e.images);L=l(e.shapes),0<g.length&&(w.geometries=g),0<z.length&&(w.materials=z),0<V.length&&(w.textures=V),0<j.length&&(w.images=j),0<L.length&&(w.shapes=L)}return w.object=B,w},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,o){if(o===void 0&&(o=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(Za(e.userData)),o===!0)for(o=0;o<e.children.length;o++)this.add(e.children[o].clone());return this}}),K.prototype=dt(pt(D.prototype),{constructor:K,isScene:!0,copy:function(e,o){return D.prototype.copy.call(this,e,o),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var o=D.prototype.toJSON.call(this,e);return this.background!==null&&(o.object.background=this.background.toJSON(e)),this.environment!==null&&(o.object.environment=this.environment.toJSON(e)),this.fog!==null&&(o.object.fog=this.fog.toJSON()),o},dispose:function(){this.dispatchEvent({type:"dispose"})}});var jf=[new C,new C,new C,new C,new C,new C,new C,new C],u1=new C,Vw=new Z,Iv=new C,Tv=new C,Sv=new C,Cd=new C,Md=new C,Dg=new C,l1=new C,by=new C,ky=new C,Og=new C;dt(Z.prototype,{isBox3:!0,set:function(e,o){return this.min.copy(e),this.max.copy(o),this},setFromArray:function(e){for(var o=Infinity,l=Infinity,g=Infinity,w=-Infinity,B=-Infinity,L=-Infinity,z=0,V=e.length;z<V;z+=3){var j=e[z],et=e[z+1],tt=e[z+2];j<o&&(o=j),et<l&&(l=et),tt<g&&(g=tt),j>w&&(w=j),et>B&&(B=et),tt>L&&(L=tt)}return this.min.set(o,l,g),this.max.set(w,B,L),this},setFromBufferAttribute:function(e){for(var o=Infinity,l=Infinity,g=Infinity,w=-Infinity,B=-Infinity,L=-Infinity,z=0,V=e.count;z<V;z++){var j=e.getX(z),et=e.getY(z),tt=e.getZ(z);j<o&&(o=j),et<l&&(l=et),tt<g&&(g=tt),j>w&&(w=j),et>B&&(B=et),tt>L&&(L=tt)}return this.min.set(o,l,g),this.max.set(w,B,L),this},setFromPoints:function(e){this.makeEmpty();for(var o=0,l=e.length;o<l;o++)this.expandByPoint(e[o]);return this},setFromCenterAndSize:function(e,o){return o=u1.copy(o).multiplyScalar(.5),this.min.copy(e).sub(o),this.max.copy(e).add(o),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new C),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new C),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var o=e.geometry;o!==void 0&&(o.boundingBox===null&&o.computeBoundingBox(),Vw.copy(o.boundingBox),Vw.applyMatrix4(e.matrixWorld),this.union(Vw)),e=e.children,o=0;for(var l=e.length;o<l;o++)this.expandByObject(e[o]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,o){return o===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),o=new C),o.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,u1),u1.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){if(0<e.normal.x)var o=e.normal.x*this.min.x,l=e.normal.x*this.max.x;else o=e.normal.x*this.max.x,l=e.normal.x*this.min.x;return 0<e.normal.y?(o+=e.normal.y*this.min.y,l+=e.normal.y*this.max.y):(o+=e.normal.y*this.max.y,l+=e.normal.y*this.min.y),0<e.normal.z?(o+=e.normal.z*this.min.z,l+=e.normal.z*this.max.z):(o+=e.normal.z*this.max.z,l+=e.normal.z*this.min.z),o<=-e.constant&&l>=-e.constant},intersectsTriangle:function(e){return this.isEmpty()||(this.getCenter(l1),by.subVectors(this.max,l1),Iv.subVectors(e.a,l1),Tv.subVectors(e.b,l1),Sv.subVectors(e.c,l1),Cd.subVectors(Tv,Iv),Md.subVectors(Sv,Tv),Dg.subVectors(Iv,Sv),e=[0,-Cd.z,Cd.y,0,-Md.z,Md.y,0,-Dg.z,Dg.y,Cd.z,0,-Cd.x,Md.z,0,-Md.x,Dg.z,0,-Dg.x,-Cd.y,Cd.x,0,-Md.y,Md.x,0,-Dg.y,Dg.x,0],!$(e,Iv,Tv,Sv,by))||(e=[1,0,0,0,1,0,0,0,1],!$(e,Iv,Tv,Sv,by))?!1:(ky.crossVectors(Cd,Md),e=[ky.x,ky.y,ky.z],$(e,Iv,Tv,Sv,by))},clampPoint:function(e,o){return o===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),o=new C),o.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return u1.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(u1).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()?this:(jf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),jf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),jf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),jf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),jf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),jf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),jf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),jf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(jf),this)},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var JB=new Z;dt(st.prototype,{set:function(e,o){return this.center.copy(e),this.radius=o,this},setFromPoints:function(e,o){var l=this.center;o!==void 0?l.copy(o):JB.setFromPoints(e).getCenter(l);for(var g=o=0,w=e.length;g<w;g++)o=Math.max(o,l.distanceToSquared(e[g]));return this.radius=Math.sqrt(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return 0>this.radius},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var o=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=o*o},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,o){var l=this.center.distanceToSquared(e);return o===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),o=new C),o.copy(e),l>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o},getBoundingBox:function(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Z),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var Xf=new C,Ww=new C,Gy=new C,_d=new C,jw=new C,Vy=new C,Xw=new C;dt(ht.prototype,{set:function(e,o){return this.origin.copy(e),this.direction.copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,o){return o===void 0&&(console.warn("THREE.Ray: .at() target is now required"),o=new C),o.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Xf)),this},closestPointToPoint:function(e,o){return o===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),o=new C),o.subVectors(e,this.origin),e=o.dot(this.direction),0>e?o.copy(this.origin):o.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var o=Xf.subVectors(e,this.origin).dot(this.direction);return 0>o?this.origin.distanceToSquared(e):(Xf.copy(this.direction).multiplyScalar(o).add(this.origin),Xf.distanceToSquared(e))},distanceSqToSegment:function(e,o,l,g){Ww.copy(e).add(o).multiplyScalar(.5),Gy.copy(o).sub(e).normalize(),_d.copy(this.origin).sub(Ww);var w=.5*e.distanceTo(o),B=-this.direction.dot(Gy),L=_d.dot(this.direction),z=-_d.dot(Gy),V=_d.lengthSq(),j=Math.abs(1-B*B);if(0<j){e=B*z-L,o=B*L-z;var et=w*j;0<=e?o>=-et?o<=et?(w=1/j,e*=w,o*=w,B=e*(e+B*o+2*L)+o*(B*e+o+2*z)+V):(o=w,e=Math.max(0,-(B*o+L)),B=-e*e+o*(o+2*z)+V):(o=-w,e=Math.max(0,-(B*o+L)),B=-e*e+o*(o+2*z)+V):o<=-et?(e=Math.max(0,-(-B*w+L)),o=0<e?-w:Math.min(Math.max(-w,-z),w),B=-e*e+o*(o+2*z)+V):o<=et?(e=0,o=Math.min(Math.max(-w,-z),w),B=o*(o+2*z)+V):(e=Math.max(0,-(B*w+L)),o=0<e?w:Math.min(Math.max(-w,-z),w),B=-e*e+o*(o+2*z)+V)}else o=0<B?-w:w,e=Math.max(0,-(B*o+L)),B=-e*e+o*(o+2*z)+V;return l&&l.copy(this.direction).multiplyScalar(e).add(this.origin),g&&g.copy(Gy).multiplyScalar(o).add(Ww),B},intersectSphere:function(e,o){Xf.subVectors(e.center,this.origin);var l=Xf.dot(this.direction),g=Xf.dot(Xf)-l*l;return e=e.radius*e.radius,g>e?null:(e=Math.sqrt(e-g),g=l-e,l+=e,0>g&&0>l?null:0>g?this.at(l,o):this.at(g,o))},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var o=e.normal.dot(this.direction);return o===0?e.distanceToPoint(this.origin)===0?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/o,0<=e?e:null)},intersectPlane:function(e,o){return e=this.distanceToPlane(e),e===null?null:this.at(e,o)},intersectsPlane:function(e){var o=e.distanceToPoint(this.origin);return o===0||0>e.normal.dot(this.direction)*o},intersectBox:function(e,o){var l=1/this.direction.x,g=1/this.direction.y,w=1/this.direction.z,B=this.origin;if(0<=l){var L=(e.min.x-B.x)*l;l*=e.max.x-B.x}else L=(e.max.x-B.x)*l,l*=e.min.x-B.x;if(0<=g){var z=(e.min.y-B.y)*g;g*=e.max.y-B.y}else z=(e.max.y-B.y)*g,g*=e.min.y-B.y;return L>g||z>l||((z>L||L!==L)&&(L=z),(g<l||l!==l)&&(l=g),0<=w?(z=(e.min.z-B.z)*w,e=(e.max.z-B.z)*w):(z=(e.max.z-B.z)*w,e=(e.min.z-B.z)*w),L>e||z>l)?null:((z>L||L!==L)&&(L=z),(e<l||l!==l)&&(l=e),0>l?null:this.at(0<=L?L:l,o))},intersectsBox:function(e){return this.intersectBox(e,Xf)!==null},intersectTriangle:function(e,o,l,g,w){if(jw.subVectors(o,e),Vy.subVectors(l,e),Xw.crossVectors(jw,Vy),o=this.direction.dot(Xw),0<o){if(g)return null;g=1}else if(0>o)g=-1,o=-o;else return null;return _d.subVectors(this.origin,e),e=g*this.direction.dot(Vy.crossVectors(_d,Vy)),0>e||(l=g*this.direction.dot(jw.cross(_d)),0>l||e+l>o)?null:(e=-g*_d.dot(Xw),0>e?null:this.at(e/o,w))},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Kw=new C,qB=new C,$B=new h;dt(Et.prototype,{isPlane:!0,set:function(e,o){return this.normal.copy(e),this.constant=o,this},setComponents:function(e,o,l,g){return this.normal.set(e,o,l),this.constant=g,this},setFromNormalAndCoplanarPoint:function(e,o){return this.normal.copy(e),this.constant=-o.dot(this.normal),this},setFromCoplanarPoints:function(e,o,l){return o=Kw.subVectors(l,o).cross(qB.subVectors(e,o)).normalize(),this.setFromNormalAndCoplanarPoint(o,e),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,o){return o===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),o=new C),o.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,o){o===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),o=new C);var l=e.delta(Kw),g=this.normal.dot(l);if(g===0){if(this.distanceToPoint(e.start)===0)return o.copy(e.start)}else if(g=-(e.start.dot(this.normal)+this.constant)/g,!(0>g||1<g))return o.copy(l).multiplyScalar(g).add(e.start)},intersectsLine:function(e){var o=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>o&&0<e||0>e&&0<o},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new C),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,o){return o=o||$B.getNormalMatrix(e),e=this.coplanarPoint(Kw).applyMatrix4(e),o=this.normal.applyMatrix3(o).normalize(),this.constant=-e.dot(o),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Rh=new C,Kf=new C,Yw=new C,Yf=new C,Lv=new C,Fv=new C,lM=new C,Zw=new C,Jw=new C,qw=new C;dt(It,{getNormal:function(e,o,l,g){return g===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),g=new C),g.subVectors(l,o),Rh.subVectors(e,o),g.cross(Rh),e=g.lengthSq(),0<e?g.multiplyScalar(1/Math.sqrt(e)):g.set(0,0,0)},getBarycoord:function(e,o,l,g,w){Rh.subVectors(g,o),Kf.subVectors(l,o),Yw.subVectors(e,o),e=Rh.dot(Rh),o=Rh.dot(Kf),l=Rh.dot(Yw);var B=Kf.dot(Kf);g=Kf.dot(Yw);var L=e*B-o*o;return w===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),w=new C),L===0?w.set(-2,-1,-1):(L=1/L,B=(B*l-o*g)*L,e=(e*g-o*l)*L,w.set(1-B-e,e,B))},containsPoint:function(e,o,l,g){return It.getBarycoord(e,o,l,g,Yf),0<=Yf.x&&0<=Yf.y&&1>=Yf.x+Yf.y},getUV:function(e,o,l,g,w,B,L,z){return this.getBarycoord(e,o,l,g,Yf),z.set(0,0),z.addScaledVector(w,Yf.x),z.addScaledVector(B,Yf.y),z.addScaledVector(L,Yf.z),z},isFrontFacing:function(e,o,l,g){return Rh.subVectors(l,o),Kf.subVectors(e,o),0>Rh.cross(Kf).dot(g)}}),dt(It.prototype,{set:function(e,o,l){return this.a.copy(e),this.b.copy(o),this.c.copy(l),this},setFromPointsAndIndices:function(e,o,l,g){return this.a.copy(e[o]),this.b.copy(e[l]),this.c.copy(e[g]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Rh.subVectors(this.c,this.b),Kf.subVectors(this.a,this.b),.5*Rh.cross(Kf).length()},getMidpoint:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new C),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return It.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Et),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,o){return It.getBarycoord(e,this.a,this.b,this.c,o)},getUV:function(e,o,l,g,w){return It.getUV(e,this.a,this.b,this.c,o,l,g,w)},containsPoint:function(e){return It.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return It.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,o){o===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),o=new C);var l=this.a,g=this.b,w=this.c;Lv.subVectors(g,l),Fv.subVectors(w,l),Zw.subVectors(e,l);var B=Lv.dot(Zw),L=Fv.dot(Zw);if(0>=B&&0>=L)return o.copy(l);Jw.subVectors(e,g);var z=Lv.dot(Jw),V=Fv.dot(Jw);if(0<=z&&V<=z)return o.copy(g);var j=B*V-z*L;if(0>=j&&0<=B&&0>=z)return g=B/(B-z),o.copy(l).addScaledVector(Lv,g);qw.subVectors(e,w),e=Lv.dot(qw);var et=Fv.dot(qw);return 0<=et&&e<=et?o.copy(w):(B=e*L-B*et,0>=B&&0<=L&&0>=et?(j=L/(L-et),o.copy(l).addScaledVector(Fv,j)):(L=z*et-e*V,0>=L&&0<=V-z&&0<=e-et?(lM.subVectors(w,g),j=(V-z)/(V-z+(e-et)),o.copy(g).addScaledVector(lM,j)):(w=1/(L+B+j),g=B*w,j*=w,o.copy(l).addScaledVector(Lv,g).addScaledVector(Fv,j))))},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var hM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ph={h:0,s:0,l:0},Wy={h:0,s:0,l:0};dt(Bt.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,o,l){return this.r=e,this.g=o,this.b=l,this},setHSL:function(e,o,l){return e=ii.euclideanModulo(e,1),o=ii.clamp(o,0,1),l=ii.clamp(l,0,1),o===0?this.r=this.g=this.b=l:(o=.5>=l?l*(1+o):l+o-l*o,l=2*l-o,this.r=Xt(l,o,e+1/3),this.g=Xt(l,o,e),this.b=Xt(l,o,e-1/3)),this},setStyle:function(e){function o(L){L!==void 0&&1>parseFloat(L)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var l;if(l=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var g=l[2];switch(l[1]){case"rgb":case"rgba":if(l=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(g))return this.r=Math.min(255,parseInt(l[1],10))/255,this.g=Math.min(255,parseInt(l[2],10))/255,this.b=Math.min(255,parseInt(l[3],10))/255,o(l[5]),this;if(l=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(g))return this.r=Math.min(100,parseInt(l[1],10))/100,this.g=Math.min(100,parseInt(l[2],10))/100,this.b=Math.min(100,parseInt(l[3],10))/100,o(l[5]),this;break;case"hsl":case"hsla":if(l=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(g)){g=parseFloat(l[1])/360;var w=parseInt(l[2],10)/100,B=parseInt(l[3],10)/100;return o(l[5]),this.setHSL(g,w,B)}}}else if(l=/^#([A-Fa-f0-9]+)$/.exec(e)){if(l=l[1],g=l.length,g===3)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(g===6)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&0<e.length?this.setColorName(e):this},setColorName:function(e){var o=hM[e];return o!==void 0?this.setHex(o):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,o){return o===void 0&&(o=2),this.r=Math.pow(e.r,o),this.g=Math.pow(e.g,o),this.b=Math.pow(e.b,o),this},copyLinearToGamma:function(e,o){return o===void 0&&(o=2),o=0<o?1/o:1,this.r=Math.pow(e.r,o),this.g=Math.pow(e.g,o),this.b=Math.pow(e.b,o),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=Yt(e.r),this.g=Yt(e.g),this.b=Yt(e.b),this},copyLinearToSRGB:function(e){return this.r=fe(e.r),this.g=fe(e.g),this.b=fe(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var o=this.r,l=this.g,g=this.b,w=Math.max(o,l,g),B=Math.min(o,l,g),L,z=(B+w)/2;if(B===w)B=L=0;else{var V=w-B;switch(B=.5>=z?V/(w+B):V/(2-w-B),w){case o:L=(l-g)/V+(l<g?6:0);break;case l:L=(g-o)/V+2;break;case g:L=(o-l)/V+4}L/=6}return e.h=L,e.s=B,e.l=z,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,o,l){return this.getHSL(Ph),Ph.h+=e,Ph.s+=o,Ph.l+=l,this.setHSL(Ph.h,Ph.s,Ph.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,o){return this.r=e.r+o.r,this.g=e.g+o.g,this.b=e.b+o.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,o){return this.r+=(e.r-this.r)*o,this.g+=(e.g-this.g)*o,this.b+=(e.b-this.b)*o,this},lerpHSL:function(e,o){this.getHSL(Ph),e.getHSL(Wy),e=ii.lerp(Ph.h,Wy.h,o);var l=ii.lerp(Ph.s,Wy.s,o);return o=ii.lerp(Ph.l,Wy.l,o),this.setHSL(e,l,o),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,o){return o===void 0&&(o=0),this.r=e[o],this.g=e[o+1],this.b=e[o+2],this},toArray:function(e,o){return e===void 0&&(e=[]),o===void 0&&(o=0),e[o]=this.r,e[o+1]=this.g,e[o+2]=this.b,e},toJSON:function(){return this.getHex()}}),Bt.NAMES=hM,dt(te.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var o=0,l=e.vertexNormals.length;o<l;o++)this.vertexNormals[o]=e.vertexNormals[o].clone();for(o=0,l=e.vertexColors.length;o<l;o++)this.vertexColors[o]=e.vertexColors[o].clone();return this}});var tE=0;le.prototype=dt(pt(s.prototype),{constructor:le,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(e!==void 0)for(var o in e){var l=e[o];if(l===void 0)console.warn("THREE.Material: '"+o+"' parameter is undefined.");else if(o==="shading")console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=l===1;else{var g=this[o];g===void 0?console.warn("THREE."+this.type+": '"+o+"' is not a property of this material."):g&&g.isColor?g.set(l):g&&g.isVector3&&l&&l.isVector3?g.copy(l):this[o]=l}}},toJSON:function(e){function o(w){var B=[],L;for(L in w){var z=w[L];delete z.metadata,B.push(z)}return B}var l=e===void 0||typeof e=="string";l&&(e={textures:{},images:{}});var g={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return g.uuid=this.uuid,g.type=this.type,this.name!==""&&(g.name=this.name),this.color&&this.color.isColor&&(g.color=this.color.getHex()),this.roughness!==void 0&&(g.roughness=this.roughness),this.metalness!==void 0&&(g.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(g.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(g.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(g.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(g.specular=this.specular.getHex()),this.shininess!==void 0&&(g.shininess=this.shininess),this.clearcoat!==void 0&&(g.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(g.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(g.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(g.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(g.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,g.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(g.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(g.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(g.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(g.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(g.aoMap=this.aoMap.toJSON(e).uuid,g.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(g.bumpMap=this.bumpMap.toJSON(e).uuid,g.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(g.normalMap=this.normalMap.toJSON(e).uuid,g.normalMapType=this.normalMapType,g.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(g.displacementMap=this.displacementMap.toJSON(e).uuid,g.displacementScale=this.displacementScale,g.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(g.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(g.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(g.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(g.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(g.envMap=this.envMap.toJSON(e).uuid,g.reflectivity=this.reflectivity,g.refractionRatio=this.refractionRatio,this.combine!==void 0&&(g.combine=this.combine),this.envMapIntensity!==void 0&&(g.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(g.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(g.size=this.size),this.sizeAttenuation!==void 0&&(g.sizeAttenuation=this.sizeAttenuation),this.blending!==1&&(g.blending=this.blending),this.flatShading===!0&&(g.flatShading=this.flatShading),this.side!==0&&(g.side=this.side),this.vertexColors&&(g.vertexColors=!0),1>this.opacity&&(g.opacity=this.opacity),this.transparent===!0&&(g.transparent=this.transparent),g.depthFunc=this.depthFunc,g.depthTest=this.depthTest,g.depthWrite=this.depthWrite,g.stencilWrite=this.stencilWrite,g.stencilWriteMask=this.stencilWriteMask,g.stencilFunc=this.stencilFunc,g.stencilRef=this.stencilRef,g.stencilFuncMask=this.stencilFuncMask,g.stencilFail=this.stencilFail,g.stencilZFail=this.stencilZFail,g.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(g.rotation=this.rotation),this.polygonOffset===!0&&(g.polygonOffset=!0),this.polygonOffsetFactor!==0&&(g.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(g.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(g.linewidth=this.linewidth),this.dashSize!==void 0&&(g.dashSize=this.dashSize),this.gapSize!==void 0&&(g.gapSize=this.gapSize),this.scale!==void 0&&(g.scale=this.scale),this.dithering===!0&&(g.dithering=!0),0<this.alphaTest&&(g.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(g.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(g.wireframe=this.wireframe),1<this.wireframeLinewidth&&(g.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(g.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(g.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(g.morphTargets=!0),this.morphNormals===!0&&(g.morphNormals=!0),this.skinning===!0&&(g.skinning=!0),this.visible===!1&&(g.visible=!1),this.toneMapped===!1&&(g.toneMapped=!1),Za(this.userData)!=="{}"&&(g.userData=this.userData),l&&(l=o(e.textures),e=o(e.images),0<l.length&&(g.textures=l),0<e.length&&(g.images=e)),g},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var o=e.clippingPlanes,l=null;if(o!==null){var g=o.length;l=Array(g);for(var w=0;w!==g;++w)l[w]=o[w].clone()}return this.clippingPlanes=l,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(Za(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(le.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),tr.prototype=pt(le.prototype),tr.prototype.constructor=tr,tr.prototype.isMeshBasicMaterial=!0,tr.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var xo=new C;Object.defineProperty(Me.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),dt(Me.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,o,l){e*=this.itemSize,l*=o.itemSize;for(var g=0,w=this.itemSize;g<w;g++)this.array[e+g]=o.array[l+g];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var o=this.array,l=0,g=0,w=e.length;g<w;g++){var B=e[g];B===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",g),B=new Bt),o[l++]=B.r,o[l++]=B.g,o[l++]=B.b}return this},copyVector2sArray:function(e){for(var o=this.array,l=0,g=0,w=e.length;g<w;g++){var B=e[g];B===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",g),B=new c),o[l++]=B.x,o[l++]=B.y}return this},copyVector3sArray:function(e){for(var o=this.array,l=0,g=0,w=e.length;g<w;g++){var B=e[g];B===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",g),B=new C),o[l++]=B.x,o[l++]=B.y,o[l++]=B.z}return this},copyVector4sArray:function(e){for(var o=this.array,l=0,g=0,w=e.length;g<w;g++){var B=e[g];B===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",g),B=new f),o[l++]=B.x,o[l++]=B.y,o[l++]=B.z,o[l++]=B.w}return this},applyMatrix3:function(e){for(var o=0,l=this.count;o<l;o++)xo.x=this.getX(o),xo.y=this.getY(o),xo.z=this.getZ(o),xo.applyMatrix3(e),this.setXYZ(o,xo.x,xo.y,xo.z);return this},applyMatrix4:function(e){for(var o=0,l=this.count;o<l;o++)xo.x=this.getX(o),xo.y=this.getY(o),xo.z=this.getZ(o),xo.applyMatrix4(e),this.setXYZ(o,xo.x,xo.y,xo.z);return this},applyNormalMatrix:function(e){for(var o=0,l=this.count;o<l;o++)xo.x=this.getX(o),xo.y=this.getY(o),xo.z=this.getZ(o),xo.applyNormalMatrix(e),this.setXYZ(o,xo.x,xo.y,xo.z);return this},transformDirection:function(e){for(var o=0,l=this.count;o<l;o++)xo.x=this.getX(o),xo.y=this.getY(o),xo.z=this.getZ(o),xo.transformDirection(e),this.setXYZ(o,xo.x,xo.y,xo.z);return this},set:function(e,o){return o===void 0&&(o=0),this.array.set(e,o),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,o){return this.array[e*this.itemSize]=o,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,o){return this.array[e*this.itemSize+1]=o,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,o){return this.array[e*this.itemSize+2]=o,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,o){return this.array[e*this.itemSize+3]=o,this},setXY:function(e,o,l){return e*=this.itemSize,this.array[e+0]=o,this.array[e+1]=l,this},setXYZ:function(e,o,l,g){return e*=this.itemSize,this.array[e+0]=o,this.array[e+1]=l,this.array[e+2]=g,this},setXYZW:function(e,o,l,g,w){return e*=this.itemSize,this.array[e+0]=o,this.array[e+1]=l,this.array[e+2]=g,this.array[e+3]=w,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),xr.prototype=pt(Me.prototype),xr.prototype.constructor=xr,br.prototype=pt(Me.prototype),br.prototype.constructor=br,_r.prototype=pt(Me.prototype),_r.prototype.constructor=_r,Gn.prototype=pt(Me.prototype),Gn.prototype.constructor=Gn,Dr.prototype=pt(Me.prototype),Dr.prototype.constructor=Dr,Ct.prototype=pt(Me.prototype),Ct.prototype.constructor=Ct,Mt.prototype=pt(Me.prototype),Mt.prototype.constructor=Mt,_t.prototype=pt(Me.prototype),_t.prototype.constructor=_t,Pt.prototype=pt(Me.prototype),Pt.prototype.constructor=Pt,dt(at.prototype,{computeGroups:function(e){var o=[],l=void 0;e=e.faces;for(var g=0;g<e.length;g++){var w=e[g];if(w.materialIndex!==l){l=w.materialIndex,B!==void 0&&(B.count=3*g-B.start,o.push(B));var B={start:3*g,materialIndex:l}}}B!==void 0&&(B.count=3*g-B.start,o.push(B)),this.groups=o},fromGeometry:function(e){var o=e.faces,l=e.vertices,g=e.faceVertexUvs,w=g[0]&&0<g[0].length,B=g[1]&&0<g[1].length,L=e.morphTargets,z=L.length;if(0<z){for(var V=[],j=0;j<z;j++)V[j]={name:L[j].name,data:[]};this.morphTargets.position=V}var et=e.morphNormals,tt=et.length;if(0<tt){var it=[];for(j=0;j<tt;j++)it[j]={name:et[j].name,data:[]};this.morphTargets.normal=it}var rt=e.skinIndices,At=e.skinWeights,mt=rt.length===l.length,Vt=At.length===l.length;for(0<l.length&&o.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),j=0;j<o.length;j++){var re=o[j];this.vertices.push(l[re.a],l[re.b],l[re.c]);var qt=re.vertexNormals;for(qt.length===3?this.normals.push(qt[0],qt[1],qt[2]):(qt=re.normal,this.normals.push(qt,qt,qt)),qt=re.vertexColors,qt.length===3?this.colors.push(qt[0],qt[1],qt[2]):(qt=re.color,this.colors.push(qt,qt,qt)),w===!0&&(qt=g[0][j],qt!==void 0?this.uvs.push(qt[0],qt[1],qt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",j),this.uvs.push(new c,new c,new c))),B===!0&&(qt=g[1][j],qt!==void 0?this.uvs2.push(qt[0],qt[1],qt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",j),this.uvs2.push(new c,new c,new c))),qt=0;qt<z;qt++){var de=L[qt].vertices;V[qt].data.push(de[re.a],de[re.b],de[re.c])}for(qt=0;qt<tt;qt++)de=et[qt].vertexNormals[j],it[qt].data.push(de.a,de.b,de.c);mt&&this.skinIndices.push(rt[re.a],rt[re.b],rt[re.c]),Vt&&this.skinWeights.push(At[re.a],At[re.b],At[re.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}});var eE=1,Dc=new I,$w=new D,Rv=new C,Zu=new Z,h1=new Z,$s=new C;yt.prototype=dt(pt(s.prototype),{constructor:yt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<vt(e)?Mt:Dr)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,o){return this.attributes[e]=o,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,o,l){this.groups.push({start:e,count:o,materialIndex:l!==void 0?l:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,o){this.drawRange.start=e,this.drawRange.count=o},applyMatrix4:function(e){var o=this.attributes.position;if(o!==void 0&&(o.applyMatrix4(e),o.needsUpdate=!0),o=this.attributes.normal,o!==void 0){var l=new h().getNormalMatrix(e);o.applyNormalMatrix(l),o.needsUpdate=!0}return o=this.attributes.tangent,o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return Dc.makeRotationX(e),this.applyMatrix4(Dc),this},rotateY:function(e){return Dc.makeRotationY(e),this.applyMatrix4(Dc),this},rotateZ:function(e){return Dc.makeRotationZ(e),this.applyMatrix4(Dc),this},translate:function(e,o,l){return Dc.makeTranslation(e,o,l),this.applyMatrix4(Dc),this},scale:function(e,o,l){return Dc.makeScale(e,o,l),this.applyMatrix4(Dc),this},lookAt:function(e){return $w.lookAt(e),$w.updateMatrix(),this.applyMatrix4($w.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rv).negate(),this.translate(Rv.x,Rv.y,Rv.z),this},setFromObject:function(e){var o=e.geometry;if(e.isPoints||e.isLine){e=new _t(3*o.vertices.length,3);var l=new _t(3*o.colors.length,3);this.setAttribute("position",e.copyVector3sArray(o.vertices)),this.setAttribute("color",l.copyColorsArray(o.colors)),o.lineDistances&&o.lineDistances.length===o.vertices.length&&(e=new _t(o.lineDistances.length,1),this.setAttribute("lineDistance",e.copyArray(o.lineDistances))),o.boundingSphere!==null&&(this.boundingSphere=o.boundingSphere.clone()),o.boundingBox!==null&&(this.boundingBox=o.boundingBox.clone())}else e.isMesh&&o&&o.isGeometry&&this.fromGeometry(o);return this},setFromPoints:function(e){for(var o=[],l=0,g=e.length;l<g;l++){var w=e[l];o.push(w.x,w.y,w.z||0)}return this.setAttribute("position",new _t(o,3)),this},updateFromObject:function(e){var o=e.geometry;if(e.isMesh){var l=o.__directGeometry;if(o.elementsNeedUpdate===!0&&(l=void 0,o.elementsNeedUpdate=!1),l===void 0)return this.fromGeometry(o);l.verticesNeedUpdate=o.verticesNeedUpdate,l.normalsNeedUpdate=o.normalsNeedUpdate,l.colorsNeedUpdate=o.colorsNeedUpdate,l.uvsNeedUpdate=o.uvsNeedUpdate,l.groupsNeedUpdate=o.groupsNeedUpdate,o.verticesNeedUpdate=!1,o.normalsNeedUpdate=!1,o.colorsNeedUpdate=!1,o.uvsNeedUpdate=!1,o.groupsNeedUpdate=!1,o=l}return o.verticesNeedUpdate===!0&&(l=this.attributes.position,l!==void 0&&(l.copyVector3sArray(o.vertices),l.needsUpdate=!0),o.verticesNeedUpdate=!1),o.normalsNeedUpdate===!0&&(l=this.attributes.normal,l!==void 0&&(l.copyVector3sArray(o.normals),l.needsUpdate=!0),o.normalsNeedUpdate=!1),o.colorsNeedUpdate===!0&&(l=this.attributes.color,l!==void 0&&(l.copyColorsArray(o.colors),l.needsUpdate=!0),o.colorsNeedUpdate=!1),o.uvsNeedUpdate&&(l=this.attributes.uv,l!==void 0&&(l.copyVector2sArray(o.uvs),l.needsUpdate=!0),o.uvsNeedUpdate=!1),o.lineDistancesNeedUpdate&&(l=this.attributes.lineDistance,l!==void 0&&(l.copyArray(o.lineDistances),l.needsUpdate=!0),o.lineDistancesNeedUpdate=!1),o.groupsNeedUpdate&&(o.computeGroups(e.geometry),this.groups=o.groups,o.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new at().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var o=new Float32Array(3*e.vertices.length);this.setAttribute("position",new Me(o,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(o=new Float32Array(3*e.normals.length),this.setAttribute("normal",new Me(o,3).copyVector3sArray(e.normals))),0<e.colors.length&&(o=new Float32Array(3*e.colors.length),this.setAttribute("color",new Me(o,3).copyColorsArray(e.colors))),0<e.uvs.length&&(o=new Float32Array(2*e.uvs.length),this.setAttribute("uv",new Me(o,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(o=new Float32Array(2*e.uvs2.length),this.setAttribute("uv2",new Me(o,2).copyVector2sArray(e.uvs2))),this.groups=e.groups;for(var l in e.morphTargets){o=[];for(var g=e.morphTargets[l],w=0,B=g.length;w<B;w++){var L=g[w],z=new _t(3*L.data.length,3);z.name=L.name,o.push(z.copyVector3sArray(L.data))}this.morphAttributes[l]=o}return 0<e.skinIndices.length&&(l=new _t(4*e.skinIndices.length,4),this.setAttribute("skinIndex",l.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(l=new _t(4*e.skinWeights.length,4),this.setAttribute("skinWeight",l.copyVector4sArray(e.skinWeights))),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Z);var e=this.attributes.position,o=this.morphAttributes.position;if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),o){e=0;for(var l=o.length;e<l;e++)Zu.setFromBufferAttribute(o[e]),this.morphTargetsRelative?($s.addVectors(this.boundingBox.min,Zu.min),this.boundingBox.expandByPoint($s),$s.addVectors(this.boundingBox.max,Zu.max),this.boundingBox.expandByPoint($s)):(this.boundingBox.expandByPoint(Zu.min),this.boundingBox.expandByPoint(Zu.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new st);var e=this.attributes.position,o=this.morphAttributes.position;if(e){var l=this.boundingSphere.center;if(Zu.setFromBufferAttribute(e),o)for(var g=0,w=o.length;g<w;g++){var B=o[g];h1.setFromBufferAttribute(B),this.morphTargetsRelative?($s.addVectors(Zu.min,h1.min),Zu.expandByPoint($s),$s.addVectors(Zu.max,h1.max),Zu.expandByPoint($s)):(Zu.expandByPoint(h1.min),Zu.expandByPoint(h1.max))}Zu.getCenter(l);var L=0;for(g=0,w=e.count;g<w;g++)$s.fromBufferAttribute(e,g),L=Math.max(L,l.distanceToSquared($s));if(o)for(g=0,w=o.length;g<w;g++){B=o[g];for(var z=this.morphTargetsRelative,V=0,j=B.count;V<j;V++)$s.fromBufferAttribute(B,V),z&&(Rv.fromBufferAttribute(e,V),$s.add(Rv)),L=Math.max(L,l.distanceToSquared($s))}this.boundingSphere.radius=Math.sqrt(L),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,o=this.attributes;if(o.position){var l=o.position.array;if(o.normal===void 0)this.setAttribute("normal",new Me(new Float32Array(l.length),3));else for(var g=o.normal.array,w=0,B=g.length;w<B;w++)g[w]=0;g=o.normal.array;var L=new C,z=new C,V=new C,j=new C,et=new C;if(e){var tt=e.array;for(w=0,B=e.count;w<B;w+=3){e=3*tt[w+0];var it=3*tt[w+1],rt=3*tt[w+2];L.fromArray(l,e),z.fromArray(l,it),V.fromArray(l,rt),j.subVectors(V,z),et.subVectors(L,z),j.cross(et),g[e]+=j.x,g[e+1]+=j.y,g[e+2]+=j.z,g[it]+=j.x,g[it+1]+=j.y,g[it+2]+=j.z,g[rt]+=j.x,g[rt+1]+=j.y,g[rt+2]+=j.z}}else for(w=0,B=l.length;w<B;w+=9)L.fromArray(l,w),z.fromArray(l,w+3),V.fromArray(l,w+6),j.subVectors(V,z),et.subVectors(L,z),j.cross(et),g[w]=j.x,g[w+1]=j.y,g[w+2]=j.z,g[w+3]=j.x,g[w+4]=j.y,g[w+5]=j.z,g[w+6]=j.x,g[w+7]=j.y,g[w+8]=j.z;this.normalizeNormals(),o.normal.needsUpdate=!0}},merge:function(e,o){if(e&&e.isBufferGeometry){o===void 0&&(o=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var l=this.attributes,g;for(g in l)if(e.attributes[g]!==void 0){var w=l[g].array,B=e.attributes[g],L=B.array,z=B.itemSize*o;B=Math.min(L.length,w.length-z);for(var V=0;V<B;V++,z++)w[z]=L[V]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,o=0,l=e.count;o<l;o++)$s.x=e.getX(o),$s.y=e.getY(o),$s.z=e.getZ(o),$s.normalize(),e.setXYZ(o,$s.x,$s.y,$s.z)},toNonIndexed:function(){function e(et,tt){var it=et.array,rt=et.itemSize;et=et.normalized;for(var At=new it.constructor(tt.length*rt),mt,Vt=0,re=0,qt=tt.length;re<qt;re++){mt=tt[re]*rt;for(var de=0;de<rt;de++)At[Vt++]=it[mt++]}return new Me(At,rt,et)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var o=new yt,l=this.index.array,g=this.attributes,w;for(w in g){var B=g[w];B=e(B,l),o.setAttribute(w,B)}var L=this.morphAttributes;for(w in L){var z=[],V=L[w];g=0;for(var j=V.length;g<j;g++)B=V[g],B=e(B,l),z.push(B);o.morphAttributes[w]=z}for(o.morphTargetsRelative=this.morphTargetsRelative,l=this.groups,g=0,w=l.length;g<w;g++)B=l[g],o.addGroup(B.start,B.count,B.materialIndex);return o},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),0<Xi(this.userData).length&&(e.userData=this.userData),this.parameters!==void 0){var o=this.parameters;for(j in o)o[j]!==void 0&&(e[j]=o[j]);return e}e.data={attributes:{}},o=this.index,o!==null&&(e.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});var l=this.attributes;for(j in l){o=l[j];var g=o.toJSON();o.name!==""&&(g.name=o.name),e.data.attributes[j]=g}l={};var w=!1;for(j in this.morphAttributes){for(var B=this.morphAttributes[j],L=[],z=0,V=B.length;z<V;z++)o=B[z],g=o.toJSON(),o.name!==""&&(g.name=o.name),L.push(g);0<L.length&&(l[j]=L,w=!0)}w&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);var j=this.groups;return 0<j.length&&(e.data.groups=JSON.parse(Za(j))),j=this.boundingSphere,j!==null&&(e.data.boundingSphere={center:j.center.toArray(),radius:j.radius}),e},clone:function(){return new yt().copy(this)},copy:function(e){var o;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var l=e.index;l!==null&&this.setIndex(l.clone()),l=e.attributes;for(L in l)this.setAttribute(L,l[L].clone());var g=e.morphAttributes;for(L in g){var w=[],B=g[L];for(l=0,o=B.length;l<o;l++)w.push(B[l].clone());this.morphAttributes[L]=w}this.morphTargetsRelative=e.morphTargetsRelative;var L=e.groups;for(l=0,o=L.length;l<o;l++)g=L[l],this.addGroup(g.start,g.count,g.materialIndex);return L=e.boundingBox,L!==null&&(this.boundingBox=L.clone()),L=e.boundingSphere,L!==null&&(this.boundingSphere=L.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var cM=new I,Hg=new ht,tC=new st,Bd=new C,Ed=new C,Id=new C,eC=new C,rC=new C,nC=new C,jy=new C,Xy=new C,Ky=new C,Pv=new c,Uv=new c,Dv=new c,c1=new C,Yy=new C;Dt.prototype=dt(pt(D.prototype),{constructor:Dt,isMesh:!0,copy:function(e){return D.prototype.copy.call(this,e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=dt({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var o=Xi(e);if(0<o.length){var l=e[o[0]];if(l!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,o=l.length;e<o;e++){var g=l[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=e}}}else e=e.morphTargets,e!==void 0&&0<e.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(e,o){var l=this.geometry,g=this.material,w=this.matrixWorld;if(g!==void 0&&(l.boundingSphere===null&&l.computeBoundingSphere(),tC.copy(l.boundingSphere),tC.applyMatrix4(w),e.ray.intersectsSphere(tC)!==!1&&(cM.getInverse(w),Hg.copy(e.ray).applyMatrix4(cM),l.boundingBox===null||Hg.intersectsBox(l.boundingBox)!==!1))){if(l.isBufferGeometry){var B=l.index;w=l.attributes.position;var L=l.morphAttributes.position,z=l.morphTargetsRelative,V=l.attributes.uv,j=l.attributes.uv2,et=l.groups,tt=l.drawRange,it,rt;if(B!==null)if(Array.isArray(g)){var At=0;for(it=et.length;At<it;At++){var mt=et[At],Vt=g[mt.materialIndex],re=Math.max(mt.start,tt.start);for(rt=l=Math.min(mt.start+mt.count,tt.start+tt.count);re<rt;re+=3){l=B.getX(re);var qt=B.getX(re+1),de=B.getX(re+2);(l=ae(this,Vt,e,Hg,w,L,z,V,j,l,qt,de))&&(l.faceIndex=Math.floor(re/3),l.face.materialIndex=mt.materialIndex,o.push(l))}}}else for(re=Math.max(0,tt.start),l=Math.min(B.count,tt.start+tt.count),At=re,it=l;At<it;At+=3)l=B.getX(At),qt=B.getX(At+1),de=B.getX(At+2),(l=ae(this,g,e,Hg,w,L,z,V,j,l,qt,de))&&(l.faceIndex=Math.floor(At/3),o.push(l));else if(w!==void 0)if(Array.isArray(g))for(At=0,it=et.length;At<it;At++)for(mt=et[At],Vt=g[mt.materialIndex],re=Math.max(mt.start,tt.start),rt=l=Math.min(mt.start+mt.count,tt.start+tt.count);re<rt;re+=3)l=re,qt=re+1,de=re+2,(l=ae(this,Vt,e,Hg,w,L,z,V,j,l,qt,de))&&(l.faceIndex=Math.floor(re/3),l.face.materialIndex=mt.materialIndex,o.push(l));else for(re=Math.max(0,tt.start),l=Math.min(w.count,tt.start+tt.count),At=re,it=l;At<it;At+=3)l=At,qt=At+1,de=At+2,(l=ae(this,g,e,Hg,w,L,z,V,j,l,qt,de))&&(l.faceIndex=Math.floor(At/3),o.push(l))}else if(l.isGeometry)for(w=Array.isArray(g),L=l.vertices,z=l.faces,l=l.faceVertexUvs[0],0<l.length&&(B=l),tt=0,At=z.length;tt<At;tt++)it=z[tt],l=w?g[it.materialIndex]:g,l!==void 0&&(V=L[it.a],j=L[it.b],et=L[it.c],l=Jt(this,l,e,Hg,V,j,et,c1))&&(B&&B[tt]&&(mt=B[tt],Pv.copy(mt[0]),Uv.copy(mt[1]),Dv.copy(mt[2]),l.uv=It.getUV(c1,V,j,et,Pv,Uv,Dv,new c)),l.face=it,l.faceIndex=tt,o.push(l))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var rE=0,Oc=new I,iC=new D,Zy=new C;xt.prototype=dt(pt(s.prototype),{constructor:xt,isGeometry:!0,applyMatrix4:function(e){for(var o=new h().getNormalMatrix(e),l=0,g=this.vertices.length;l<g;l++)this.vertices[l].applyMatrix4(e);for(l=0,g=this.faces.length;l<g;l++){e=this.faces[l],e.normal.applyMatrix3(o).normalize();for(var w=0,B=e.vertexNormals.length;w<B;w++)e.vertexNormals[w].applyMatrix3(o).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(e){return Oc.makeRotationX(e),this.applyMatrix4(Oc),this},rotateY:function(e){return Oc.makeRotationY(e),this.applyMatrix4(Oc),this},rotateZ:function(e){return Oc.makeRotationZ(e),this.applyMatrix4(Oc),this},translate:function(e,o,l){return Oc.makeTranslation(e,o,l),this.applyMatrix4(Oc),this},scale:function(e,o,l){return Oc.makeScale(e,o,l),this.applyMatrix4(Oc),this},lookAt:function(e){return iC.lookAt(e),iC.updateMatrix(),this.applyMatrix4(iC.matrix),this},fromBufferGeometry:function(e){function o(rt,At,mt,Vt){var re=z===void 0?[]:[l.colors[rt].clone(),l.colors[At].clone(),l.colors[mt].clone()],qt=L===void 0?[]:[new C().fromArray(L,3*rt),new C().fromArray(L,3*At),new C().fromArray(L,3*mt)];Vt=new te(rt,At,mt,qt,re,Vt),l.faces.push(Vt),V!==void 0&&l.faceVertexUvs[0].push([new c().fromArray(V,2*rt),new c().fromArray(V,2*At),new c().fromArray(V,2*mt)]),j!==void 0&&l.faceVertexUvs[1].push([new c().fromArray(j,2*rt),new c().fromArray(j,2*At),new c().fromArray(j,2*mt)])}var l=this,g=e.index!==null?e.index.array:void 0,w=e.attributes;if(w.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var B=w.position.array,L=w.normal!==void 0?w.normal.array:void 0,z=w.color!==void 0?w.color.array:void 0,V=w.uv!==void 0?w.uv.array:void 0,j=w.uv2!==void 0?w.uv2.array:void 0;for(j!==void 0&&(this.faceVertexUvs[1]=[]),w=0;w<B.length;w+=3)l.vertices.push(new C().fromArray(B,w)),z!==void 0&&l.colors.push(new Bt().fromArray(z,w));var et=e.groups;if(0<et.length)for(w=0;w<et.length;w++){B=et[w];var tt=B.start,it=tt;for(tt+=B.count;it<tt;it+=3)g!==void 0?o(g[it],g[it+1],g[it+2],B.materialIndex):o(it,it+1,it+2,B.materialIndex)}else if(g!==void 0)for(w=0;w<g.length;w+=3)o(g[w],g[w+1],g[w+2]);else for(w=0;w<B.length/3;w+=3)o(w,w+1,w+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zy).negate(),this.translate(Zy.x,Zy.y,Zy.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,o=this.boundingSphere.radius;o=o===0?1:1/o;var l=new I;return l.set(o,0,0,-o*e.x,0,o,0,-o*e.y,0,0,o,-o*e.z,0,0,0,1),this.applyMatrix4(l),this},computeFaceNormals:function(){for(var e=new C,o=new C,l=0,g=this.faces.length;l<g;l++){var w=this.faces[l],B=this.vertices[w.a],L=this.vertices[w.b];e.subVectors(this.vertices[w.c],L),o.subVectors(B,L),e.cross(o),e.normalize(),w.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);var o,l=Array(this.vertices.length),g=0;for(o=this.vertices.length;g<o;g++)l[g]=new C;if(e){var w=new C,B=new C;for(e=0,g=this.faces.length;e<g;e++){o=this.faces[e];var L=this.vertices[o.a],z=this.vertices[o.b],V=this.vertices[o.c];w.subVectors(V,z),B.subVectors(L,z),w.cross(B),l[o.a].add(w),l[o.b].add(w),l[o.c].add(w)}}else for(this.computeFaceNormals(),e=0,g=this.faces.length;e<g;e++)o=this.faces[e],l[o.a].add(o.normal),l[o.b].add(o.normal),l[o.c].add(o.normal);for(g=0,o=this.vertices.length;g<o;g++)l[g].normalize();for(e=0,g=this.faces.length;e<g;e++)o=this.faces[e],L=o.vertexNormals,L.length===3?(L[0].copy(l[o.a]),L[1].copy(l[o.b]),L[2].copy(l[o.c])):(L[0]=l[o.a].clone(),L[1]=l[o.b].clone(),L[2]=l[o.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var o=0;for(e=this.faces.length;o<e;o++){var l=this.faces[o],g=l.vertexNormals;g.length===3?(g[0].copy(l.normal),g[1].copy(l.normal),g[2].copy(l.normal)):(g[0]=l.normal.clone(),g[1]=l.normal.clone(),g[2]=l.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,o,l=0;for(o=this.faces.length;l<o;l++){var g=this.faces[l];g.__originalFaceNormal?g.__originalFaceNormal.copy(g.normal):g.__originalFaceNormal=g.normal.clone(),g.__originalVertexNormals||(g.__originalVertexNormals=[]);var w=0;for(e=g.vertexNormals.length;w<e;w++)g.__originalVertexNormals[w]?g.__originalVertexNormals[w].copy(g.vertexNormals[w]):g.__originalVertexNormals[w]=g.vertexNormals[w].clone()}var B=new xt;for(B.faces=this.faces,w=0,e=this.morphTargets.length;w<e;w++){if(!this.morphNormals[w]){this.morphNormals[w]={},this.morphNormals[w].faceNormals=[],this.morphNormals[w].vertexNormals=[],g=this.morphNormals[w].faceNormals;var L=this.morphNormals[w].vertexNormals;for(l=0,o=this.faces.length;l<o;l++){var z=new C,V={a:new C,b:new C,c:new C};g.push(z),L.push(V)}}for(L=this.morphNormals[w],B.vertices=this.morphTargets[w].vertices,B.computeFaceNormals(),B.computeVertexNormals(),l=0,o=this.faces.length;l<o;l++)g=this.faces[l],z=L.faceNormals[l],V=L.vertexNormals[l],z.copy(g.normal),V.a.copy(g.vertexNormals[0]),V.b.copy(g.vertexNormals[1]),V.c.copy(g.vertexNormals[2])}for(l=0,o=this.faces.length;l<o;l++)g=this.faces[l],g.normal=g.__originalFaceNormal,g.vertexNormals=g.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Z),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new st),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,o,l){if(e&&e.isGeometry){var g,w=this.vertices.length,B=this.vertices,L=e.vertices,z=this.faces,V=e.faces,j=this.colors,et=e.colors;l===void 0&&(l=0),o!==void 0&&(g=new h().getNormalMatrix(o));for(var tt=0,it=L.length;tt<it;tt++){var rt=L[tt].clone();o!==void 0&&rt.applyMatrix4(o),B.push(rt)}for(tt=0,it=et.length;tt<it;tt++)j.push(et[tt].clone());for(tt=0,it=V.length;tt<it;tt++){L=V[tt];var At=L.vertexNormals;for(et=L.vertexColors,j=new te(L.a+w,L.b+w,L.c+w),j.normal.copy(L.normal),g!==void 0&&j.normal.applyMatrix3(g).normalize(),o=0,B=At.length;o<B;o++)rt=At[o].clone(),g!==void 0&&rt.applyMatrix3(g).normalize(),j.vertexNormals.push(rt);for(j.color.copy(L.color),o=0,B=et.length;o<B;o++)rt=et[o],j.vertexColors.push(rt.clone());j.materialIndex=L.materialIndex+l,z.push(j)}for(tt=0,it=e.faceVertexUvs.length;tt<it;tt++)for(l=e.faceVertexUvs[tt],this.faceVertexUvs[tt]===void 0&&(this.faceVertexUvs[tt]=[]),o=0,B=l.length;o<B;o++){for(g=l[o],w=[],z=0,V=g.length;z<V;z++)w.push(g[z].clone());this.faceVertexUvs[tt].push(w)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e={},o=[],l=[],g=Math.pow(10,4),w,B=0;for(w=this.vertices.length;B<w;B++){var L=this.vertices[B];L=Math.round(L.x*g)+"_"+Math.round(L.y*g)+"_"+Math.round(L.z*g),e[L]===void 0?(e[L]=B,o.push(this.vertices[B]),l[B]=o.length-1):l[B]=l[e[L]]}for(e=[],B=0,w=this.faces.length;B<w;B++)for(g=this.faces[B],g.a=l[g.a],g.b=l[g.b],g.c=l[g.c],g=[g.a,g.b,g.c],L=0;3>L;L++)if(g[L]===g[(L+1)%3]){e.push(B);break}for(B=e.length-1;0<=B;B--)for(g=e[B],this.faces.splice(g,1),l=0,w=this.faceVertexUvs.length;l<w;l++)this.faceVertexUvs[l].splice(g,1);return B=this.vertices.length-o.length,this.vertices=o,B},setFromPoints:function(e){this.vertices=[];for(var o=0,l=e.length;o<l;o++){var g=e[o];this.vertices.push(new C(g.x,g.y,g.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,o=e.length,l=0;l<o;l++)e[l]._id=l;e.sort(function(V,j){return V.materialIndex-j.materialIndex});var g=this.faceVertexUvs[0],w=this.faceVertexUvs[1],B,L;for(g&&g.length===o&&(B=[]),w&&w.length===o&&(L=[]),l=0;l<o;l++){var z=e[l]._id;B&&B.push(g[z]),L&&L.push(w[z])}B&&(this.faceVertexUvs[0]=B),L&&(this.faceVertexUvs[1]=L)},toJSON:function(){function e(_e,ee,De){return De?_e|1<<ee:_e&~(1<<ee)}function o(_e){var ee=_e.x.toString()+_e.y.toString()+_e.z.toString();return j[ee]!==void 0||(j[ee]=V.length/3,V.push(_e.x,_e.y,_e.z)),j[ee]}function l(_e){var ee=_e.r.toString()+_e.g.toString()+_e.b.toString();return tt[ee]!==void 0||(tt[ee]=et.length,et.push(_e.getHex())),tt[ee]}function g(_e){var ee=_e.x.toString()+_e.y.toString();return rt[ee]!==void 0||(rt[ee]=it.length/2,it.push(_e.x,_e.y)),rt[ee]}var w={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(w.uuid=this.uuid,w.type=this.type,this.name!==""&&(w.name=this.name),this.parameters!==void 0){var B=this.parameters,L;for(L in B)B[L]!==void 0&&(w[L]=B[L]);return w}for(B=[],L=0;L<this.vertices.length;L++){var z=this.vertices[L];B.push(z.x,z.y,z.z)}z=[];var V=[],j={},et=[],tt={},it=[],rt={};for(L=0;L<this.faces.length;L++){var At=this.faces[L],mt=this.faceVertexUvs[0][L]!==void 0,Vt=0<At.normal.length(),re=0<At.vertexNormals.length,qt=At.color.r!==1||At.color.g!==1||At.color.b!==1,de=0<At.vertexColors.length,oe=0;oe=e(oe,0,0),oe=e(oe,1,!0),oe=e(oe,2,!1),oe=e(oe,3,mt),oe=e(oe,4,Vt),oe=e(oe,5,re),oe=e(oe,6,qt),oe=e(oe,7,de),z.push(oe),z.push(At.a,At.b,At.c),z.push(At.materialIndex),mt&&(mt=this.faceVertexUvs[0][L],z.push(g(mt[0]),g(mt[1]),g(mt[2]))),Vt&&z.push(o(At.normal)),re&&(Vt=At.vertexNormals,z.push(o(Vt[0]),o(Vt[1]),o(Vt[2]))),qt&&z.push(l(At.color)),de&&(At=At.vertexColors,z.push(l(At[0]),l(At[1]),l(At[2])))}return w.data={},w.data.vertices=B,w.data.normals=V,0<et.length&&(w.data.colors=et),0<it.length&&(w.data.uvs=[it]),w.data.faces=z,w},clone:function(){return new xt().copy(this)},copy:function(e){var o,l,g;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var w=e.vertices,B=0;for(o=w.length;B<o;B++)this.vertices.push(w[B].clone());for(w=e.colors,B=0,o=w.length;B<o;B++)this.colors.push(w[B].clone());for(w=e.faces,B=0,o=w.length;B<o;B++)this.faces.push(w[B].clone());for(B=0,o=e.faceVertexUvs.length;B<o;B++){var L=e.faceVertexUvs[B];for(this.faceVertexUvs[B]===void 0&&(this.faceVertexUvs[B]=[]),w=0,l=L.length;w<l;w++){var z=L[w],V=[],j=0;for(g=z.length;j<g;j++)V.push(z[j].clone());this.faceVertexUvs[B].push(V)}}for(j=e.morphTargets,B=0,o=j.length;B<o;B++){if(g={},g.name=j[B].name,j[B].vertices!==void 0)for(g.vertices=[],w=0,l=j[B].vertices.length;w<l;w++)g.vertices.push(j[B].vertices[w].clone());if(j[B].normals!==void 0)for(g.normals=[],w=0,l=j[B].normals.length;w<l;w++)g.normals.push(j[B].normals[w].clone());this.morphTargets.push(g)}for(j=e.morphNormals,B=0,o=j.length;B<o;B++){if(g={},j[B].vertexNormals!==void 0)for(g.vertexNormals=[],w=0,l=j[B].vertexNormals.length;w<l;w++)L=j[B].vertexNormals[w],z={},z.a=L.a.clone(),z.b=L.b.clone(),z.c=L.c.clone(),g.vertexNormals.push(z);if(j[B].faceNormals!==void 0)for(g.faceNormals=[],w=0,l=j[B].faceNormals.length;w<l;w++)g.faceNormals.push(j[B].faceNormals[w].clone());this.morphNormals.push(g)}for(w=e.skinWeights,B=0,o=w.length;B<o;B++)this.skinWeights.push(w[B].clone());for(w=e.skinIndices,B=0,o=w.length;B<o;B++)this.skinIndices.push(w[B].clone());for(w=e.lineDistances,B=0,o=w.length;B<o;B++)this.lineDistances.push(w[B]);return B=e.boundingBox,B!==null&&(this.boundingBox=B.clone()),B=e.boundingSphere,B!==null&&(this.boundingSphere=B.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var oC=function(e){function o(l,g,w,B,L,z){e.call(this),this.type="BoxGeometry",this.parameters={width:l,height:g,depth:w,widthSegments:B,heightSegments:L,depthSegments:z},this.fromBufferGeometry(new f1(l,g,w,B,L,z)),this.mergeVertices()}return e&&(o.__proto__=e),o.prototype=pt(e&&e.prototype),o.prototype.constructor=o}(xt),f1=function(e){function o(l,g,w,B,L,z){function V(Vt,re,qt,de,oe,_e,ee,De,Ke,Be,$e){var Xe=_e/Ke,Gr=ee/Be,gn=_e/2,Mr=ee/2,pn=De/2;ee=Ke+1;for(var Yn=Be+1,Un=_e=0,yi=new C,ti=0;ti<Yn;ti++)for(var io=ti*Gr-Mr,go=0;go<ee;go++)yi[Vt]=(go*Xe-gn)*de,yi[re]=io*oe,yi[qt]=pn,tt.push(yi.x,yi.y,yi.z),yi[Vt]=0,yi[re]=0,yi[qt]=0<De?1:-1,it.push(yi.x,yi.y,yi.z),rt.push(go/Ke),rt.push(1-ti/Be),_e+=1;for(Vt=0;Vt<Be;Vt++)for(re=0;re<Ke;re++)qt=At+re+ee*(Vt+1),de=At+(re+1)+ee*(Vt+1),oe=At+(re+1)+ee*Vt,et.push(At+re+ee*Vt,qt,oe),et.push(qt,de,oe),Un+=6;j.addGroup(mt,Un,$e),mt+=Un,At+=_e}e.call(this),this.type="BoxBufferGeometry",this.parameters={width:l,height:g,depth:w,widthSegments:B,heightSegments:L,depthSegments:z};var j=this;l=l||1,g=g||1,w=w||1,B=Math.floor(B)||1,L=Math.floor(L)||1,z=Math.floor(z)||1;var et=[],tt=[],it=[],rt=[],At=0,mt=0;V("z","y","x",-1,-1,w,g,l,z,L,0),V("z","y","x",1,-1,w,g,-l,z,L,1),V("x","z","y",1,1,l,w,g,B,z,2),V("x","z","y",1,-1,l,w,-g,B,z,3),V("x","y","z",1,-1,l,g,w,B,L,4),V("x","y","z",-1,-1,l,g,-w,B,L,5),this.setIndex(et),this.setAttribute("position",new _t(tt,3)),this.setAttribute("normal",new _t(it,3)),this.setAttribute("uv",new _t(rt,2))}return e&&(o.__proto__=e),o.prototype=pt(e&&e.prototype),o.prototype.constructor=o}(yt),fM={clone:Se,merge:Re};Te.prototype=pt(le.prototype),Te.prototype.constructor=Te,Te.prototype.isShaderMaterial=!0,Te.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Se(e.uniforms),this.defines=dt({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=dt({},e.extensions),this},Te.prototype.toJSON=function(e){var o=le.prototype.toJSON.call(this,e);o.uniforms={};for(var l in this.uniforms){var g=this.uniforms[l].value;o.uniforms[l]=g&&g.isTexture?{type:"t",value:g.toJSON(e).uuid}:g&&g.isColor?{type:"c",value:g.getHex()}:g&&g.isVector2?{type:"v2",value:g.toArray()}:g&&g.isVector3?{type:"v3",value:g.toArray()}:g&&g.isVector4?{type:"v4",value:g.toArray()}:g&&g.isMatrix3?{type:"m3",value:g.toArray()}:g&&g.isMatrix4?{type:"m4",value:g.toArray()}:{value:g}}0<Xi(this.defines).length&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader,e={};for(var w in this.extensions)this.extensions[w]===!0&&(e[w]=!0);return 0<Xi(e).length&&(o.extensions=e),o},ye.prototype=dt(pt(D.prototype),{constructor:ye,isCamera:!0,copy:function(e,o){return D.prototype.copy.call(this,e,o),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new C),this.updateMatrixWorld(!0);var o=this.matrixWorld.elements;return e.set(-o[8],-o[9],-o[10]).normalize()},updateMatrixWorld:function(e){D.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,o){D.prototype.updateWorldMatrix.call(this,e,o),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),He.prototype=dt(pt(ye.prototype),{constructor:He,isPerspectiveCamera:!0,copy:function(e,o){return ye.prototype.copy.call(this,e,o),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:dt({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*ii.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*ii.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*ii.RAD2DEG*Math.atan(Math.tan(.5*ii.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,o,l,g,w,B){this.aspect=e/o,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=o,this.view.offsetX=l,this.view.offsetY=g,this.view.width=w,this.view.height=B,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,o=e*Math.tan(.5*ii.DEG2RAD*this.fov)/this.zoom,l=2*o,g=this.aspect*l,w=-.5*g,B=this.view;if(this.view!==null&&this.view.enabled){var L=B.fullWidth,z=B.fullHeight;w+=B.offsetX*g/L,o-=B.offsetY*l/z,g*=B.width/L,l*=B.height/z}B=this.filmOffset,B!==0&&(w+=e*B/this.getFilmWidth()),this.projectionMatrix.makePerspective(w,w+g,o,o-l,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return e=D.prototype.toJSON.call(this,e),e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=dt({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),kr.prototype=pt(D.prototype),kr.prototype.constructor=kr,cn.prototype=pt(x.prototype),cn.prototype.constructor=cn,cn.prototype.isWebGLCubeRenderTarget=!0,cn.prototype.fromEquirectangularTexture=function(e,o){this.texture.type=o.type,this.texture.format=o.format,this.texture.encoding=o.encoding;var l=new K,g=new Te({type:"CubemapFromEquirect",uniforms:Se({tEquirect:{value:null}}),vertexShader:`varying vec3 vWorldDirection;
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragmentShader:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
}`,side:1,blending:0});return g.uniforms.tEquirect.value=o,o=new Dt(new f1(5,5,5),g),l.add(o),new kr(1,10,this).update(e,l),o.geometry.dispose(),o.material.dispose(),this},Pe.prototype=pt(d.prototype),Pe.prototype.constructor=Pe,Pe.prototype.isDataTexture=!0;var Ov=new st,Jy=new C;dt(Br.prototype,{set:function(e,o,l,g,w,B){var L=this.planes;return L[0].copy(e),L[1].copy(o),L[2].copy(l),L[3].copy(g),L[4].copy(w),L[5].copy(B),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var o=this.planes,l=0;6>l;l++)o[l].copy(e.planes[l]);return this},setFromProjectionMatrix:function(e){var o=this.planes,l=e.elements;e=l[0];var g=l[1],w=l[2],B=l[3],L=l[4],z=l[5],V=l[6],j=l[7],et=l[8],tt=l[9],it=l[10],rt=l[11],At=l[12],mt=l[13],Vt=l[14];return l=l[15],o[0].setComponents(B-e,j-L,rt-et,l-At).normalize(),o[1].setComponents(B+e,j+L,rt+et,l+At).normalize(),o[2].setComponents(B+g,j+z,rt+tt,l+mt).normalize(),o[3].setComponents(B-g,j-z,rt-tt,l-mt).normalize(),o[4].setComponents(B-w,j-V,rt-it,l-Vt).normalize(),o[5].setComponents(B+w,j+V,rt+it,l+Vt).normalize(),this},intersectsObject:function(e){var o=e.geometry;return o.boundingSphere===null&&o.computeBoundingSphere(),Ov.copy(o.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ov)},intersectsSprite:function(e){return Ov.center.set(0,0,0),Ov.radius=.7071067811865476,Ov.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ov)},intersectsSphere:function(e){var o=this.planes,l=e.center;e=-e.radius;for(var g=0;6>g;g++)if(o[g].distanceToPoint(l)<e)return!1;return!0},intersectsBox:function(e){for(var o=this.planes,l=0;6>l;l++){var g=o[l];if(Jy.x=0<g.normal.x?e.max.x:e.min.x,Jy.y=0<g.normal.y?e.max.y:e.min.y,Jy.z=0<g.normal.z?e.max.z:e.min.z,0>g.distanceToPoint(Jy))return!1}return!0},containsPoint:function(e){for(var o=this.planes,l=0;6>l;l++)if(0>o[l].distanceToPoint(e))return!1;return!0}});var Or={common:{diffuse:{value:new Bt(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new h},uv2Transform:{value:new h},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new c(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Bt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new h}},sprite:{diffuse:{value:new Bt(15658734)},opacity:{value:1},center:{value:new c(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new h}}};ts.prototype=pt(xt.prototype),ts.prototype.constructor=ts,li.prototype=pt(yt.prototype),li.prototype.constructor=li;var _i={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex:`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common:`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin:`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps:`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment:`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex:`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag:`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag:`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert:`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`},Hc={basic:{uniforms:Re([Or.common,Or.specularmap,Or.envmap,Or.aomap,Or.lightmap,Or.fog]),vertexShader:_i.meshbasic_vert,fragmentShader:_i.meshbasic_frag},lambert:{uniforms:Re([Or.common,Or.specularmap,Or.envmap,Or.aomap,Or.lightmap,Or.emissivemap,Or.fog,Or.lights,{emissive:{value:new Bt(0)}}]),vertexShader:_i.meshlambert_vert,fragmentShader:_i.meshlambert_frag},phong:{uniforms:Re([Or.common,Or.specularmap,Or.envmap,Or.aomap,Or.lightmap,Or.emissivemap,Or.bumpmap,Or.normalmap,Or.displacementmap,Or.fog,Or.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:_i.meshphong_vert,fragmentShader:_i.meshphong_frag},standard:{uniforms:Re([Or.common,Or.envmap,Or.aomap,Or.lightmap,Or.emissivemap,Or.bumpmap,Or.normalmap,Or.displacementmap,Or.roughnessmap,Or.metalnessmap,Or.fog,Or.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_i.meshphysical_vert,fragmentShader:_i.meshphysical_frag},toon:{uniforms:Re([Or.common,Or.specularmap,Or.aomap,Or.lightmap,Or.emissivemap,Or.bumpmap,Or.normalmap,Or.displacementmap,Or.gradientmap,Or.fog,Or.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:_i.meshtoon_vert,fragmentShader:_i.meshtoon_frag},matcap:{uniforms:Re([Or.common,Or.bumpmap,Or.normalmap,Or.displacementmap,Or.fog,{matcap:{value:null}}]),vertexShader:_i.meshmatcap_vert,fragmentShader:_i.meshmatcap_frag},points:{uniforms:Re([Or.points,Or.fog]),vertexShader:_i.points_vert,fragmentShader:_i.points_frag},dashed:{uniforms:Re([Or.common,Or.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_i.linedashed_vert,fragmentShader:_i.linedashed_frag},depth:{uniforms:Re([Or.common,Or.displacementmap]),vertexShader:_i.depth_vert,fragmentShader:_i.depth_frag},normal:{uniforms:Re([Or.common,Or.bumpmap,Or.normalmap,Or.displacementmap,{opacity:{value:1}}]),vertexShader:_i.normal_vert,fragmentShader:_i.normal_frag},sprite:{uniforms:Re([Or.sprite,Or.fog]),vertexShader:_i.sprite_vert,fragmentShader:_i.sprite_frag},background:{uniforms:{uvTransform:{value:new h},t2D:{value:null}},vertexShader:_i.background_vert,fragmentShader:_i.background_frag},cube:{uniforms:Re([Or.envmap,{opacity:{value:1}}]),vertexShader:_i.cube_vert,fragmentShader:_i.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_i.equirect_vert,fragmentShader:_i.equirect_frag},distanceRGBA:{uniforms:Re([Or.common,Or.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_i.distanceRGBA_vert,fragmentShader:_i.distanceRGBA_frag},shadow:{uniforms:Re([Or.lights,Or.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:_i.shadow_vert,fragmentShader:_i.shadow_frag}};Hc.physical={uniforms:Re([Hc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new c(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Bt(0)},transparency:{value:0}}]),vertexShader:_i.meshphysical_vert,fragmentShader:_i.meshphysical_frag},Nl.prototype=pt(d.prototype),Nl.prototype.constructor=Nl,Nl.prototype.isCubeTexture=!0,Object.defineProperty(Nl.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),yA.prototype=pt(d.prototype),yA.prototype.constructor=yA,yA.prototype.isDataTexture2DArray=!0,GA.prototype=pt(d.prototype),GA.prototype.constructor=GA,GA.prototype.isDataTexture3D=!0;var pM=new d,nE=new yA,iE=new GA,dM=new Nl,gM=[],mM=[],vM=new Float32Array(16),yM=new Float32Array(9),xM=new Float32Array(4);w2.prototype.updateCache=function(e){var o=this.cache;e instanceof Float32Array&&o.length!==e.length&&(this.cache=new Float32Array(e.length)),qa(o,e)},C2.prototype.setValue=function(e,o,l){for(var g=this.seq,w=0,B=g.length;w!==B;++w){var L=g[w];L.setValue(e,o[L.id],l)}};var sC=/([\w\d_]+)(\])?(\[|\.)?/g;fd.prototype.setValue=function(e,o,l,g){o=this.map[o],o!==void 0&&o.setValue(e,l,g)},fd.prototype.setOptional=function(e,o,l){o=o[l],o!==void 0&&this.setValue(e,l,o)},fd.upload=function(e,o,l,g){for(var w=0,B=o.length;w!==B;++w){var L=o[w],z=l[L.id];z.needsUpdate!==!1&&L.setValue(e,z.value,g)}},fd.seqWithValue=function(e,o){for(var l=[],g=0,w=e.length;g!==w;++g){var B=e[g];B.id in o&&l.push(B)}return l};var oE=0,aC=/^[ \t]*#include +<([\w\d./]+)>/gm,wM=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,CM=/#pragma unroll_loop_start[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,sE=0;pd.prototype=pt(le.prototype),pd.prototype.constructor=pd,pd.prototype.isMeshDepthMaterial=!0,pd.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},dd.prototype=pt(le.prototype),dd.prototype.constructor=dd,dd.prototype.isMeshDistanceMaterial=!0,dd.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},ey.prototype=dt(pt(He.prototype),{constructor:ey,isArrayCamera:!0}),qm.prototype=dt(pt(D.prototype),{constructor:qm,isGroup:!0}),dt(ry.prototype,{constructor:ry,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new qm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new qm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(e,o,l){var g=null,w=null,B=this._targetRay,L=this._grip;return e&&(B!==null&&(g=o.getPose(e.targetRaySpace,l),g!==null&&(B.matrix.fromArray(g.transform.matrix),B.matrix.decompose(B.position,B.rotation,B.scale))),L!==null&&e.gripSpace&&(w=o.getPose(e.gripSpace,l),w!==null&&(L.matrix.fromArray(w.transform.matrix),L.matrix.decompose(L.position,L.rotation,L.scale)))),B!==null&&(B.visible=g!==null),L!==null&&(L.visible=w!==null),this}}),dt(U2.prototype,s.prototype),dt(ny.prototype,{isFogExp2:!0,clone:function(){return new ny(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),dt(iy.prototype,{isFog:!0,clone:function(){return new iy(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(zf.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),dt(zf.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,o,l){e*=this.stride,l*=o.stride;for(var g=0,w=this.stride;g<w;g++)this.array[e+g]=o.array[l+g];return this},set:function(e,o){return o===void 0&&(o=0),this.array.set(e,o),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var Ng=new C;vn(I0.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),dt(I0.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var o=0,l=this.data.count;o<l;o++)Ng.x=this.getX(o),Ng.y=this.getY(o),Ng.z=this.getZ(o),Ng.applyMatrix4(e),this.setXYZ(o,Ng.x,Ng.y,Ng.z);return this},setX:function(e,o){return this.data.array[e*this.data.stride+this.offset]=o,this},setY:function(e,o){return this.data.array[e*this.data.stride+this.offset+1]=o,this},setZ:function(e,o){return this.data.array[e*this.data.stride+this.offset+2]=o,this},setW:function(e,o){return this.data.array[e*this.data.stride+this.offset+3]=o,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,o,l){return e=e*this.data.stride+this.offset,this.data.array[e+0]=o,this.data.array[e+1]=l,this},setXYZ:function(e,o,l,g){return e=e*this.data.stride+this.offset,this.data.array[e+0]=o,this.data.array[e+1]=l,this.data.array[e+2]=g,this},setXYZW:function(e,o,l,g,w){return e=e*this.data.stride+this.offset,this.data.array[e+0]=o,this.data.array[e+1]=l,this.data.array[e+2]=g,this.data.array[e+3]=w,this},clone:function(){for(var e=[],o=0;o<this.count;o++)for(var l=o*this.data.stride+this.offset,g=0;g<this.itemSize;g++)e.push(this.data.array[l+g]);return new Me(new this.array.constructor(e),this.itemSize,this.normalized)},toJSON:function(){for(var e=[],o=0;o<this.count;o++)for(var l=o*this.data.stride+this.offset,g=0;g<this.itemSize;g++)e.push(this.data.array[l+g]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}),gd.prototype=pt(le.prototype),gd.prototype.constructor=gd,gd.prototype.isSpriteMaterial=!0,gd.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var Hv,p1=new C,Nv=new C,zv=new C,Qv=new c,d1=new c,MM=new I,qy=new C,g1=new C,$y=new C,_M=new c,AC=new c,BM=new c;T0.prototype=dt(pt(D.prototype),{constructor:T0,isSprite:!0,raycast:function(e,o){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Nv.setFromMatrixScale(this.matrixWorld),MM.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),zv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Nv.multiplyScalar(-zv.z);var l=this.material.rotation;if(l!==0)var g=Math.cos(l),w=Math.sin(l);l=this.center,oy(qy.set(-.5,-.5,0),zv,l,Nv,w,g),oy(g1.set(.5,-.5,0),zv,l,Nv,w,g),oy($y.set(.5,.5,0),zv,l,Nv,w,g),_M.set(0,0),AC.set(1,0),BM.set(1,1);var B=e.ray.intersectTriangle(qy,g1,$y,!1,p1);B===null&&(oy(g1.set(-.5,.5,0),zv,l,Nv,w,g),AC.set(0,1),B=e.ray.intersectTriangle(qy,$y,g1,!1,p1),B===null)||(w=e.ray.origin.distanceTo(p1),w<e.near||w>e.far||o.push({distance:w,point:p1.clone(),uv:It.getUV(p1,qy,g1,$y,_M,AC,BM,new c),face:null,object:this}))},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return D.prototype.copy.call(this,e),e.center!==void 0&&this.center.copy(e.center),this}});var tx=new C,EM=new C;S0.prototype=dt(pt(D.prototype),{constructor:S0,isLOD:!0,copy:function(e){D.prototype.copy.call(this,e,!1);for(var o=e.levels,l=0,g=o.length;l<g;l++){var w=o[l];this.addLevel(w.object.clone(),w.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,o){o===void 0&&(o=0),o=Math.abs(o);for(var l=this.levels,g=0;g<l.length&&!(o<l[g].distance);g++);return l.splice(g,0,{distance:o,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var o=this.levels;if(0<o.length){for(var l=1,g=o.length;l<g&&!(e<o[l].distance);l++);return o[l-1].object}return null},raycast:function(e,o){if(0<this.levels.length){tx.setFromMatrixPosition(this.matrixWorld);var l=e.ray.origin.distanceTo(tx);this.getObjectForDistance(l).raycast(e,o)}},update:function(e){var o=this.levels;if(1<o.length){tx.setFromMatrixPosition(e.matrixWorld),EM.setFromMatrixPosition(this.matrixWorld),e=tx.distanceTo(EM)/e.zoom,o[0].object.visible=!0;for(var l=1,g=o.length;l<g&&e>=o[l].distance;l++)o[l-1].object.visible=!1,o[l].object.visible=!0;for(this._currentLevel=l-1;l<g;l++)o[l].object.visible=!1}},toJSON:function(e){e=D.prototype.toJSON.call(this,e),this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];for(var o=this.levels,l=0,g=o.length;l<g;l++){var w=o[l];e.object.levels.push({object:w.object.uuid,distance:w.distance})}return e}}),sy.prototype=dt(pt(Dt.prototype),{constructor:sy,isSkinnedMesh:!0,bind:function(e,o){this.skeleton=e,o===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.getInverse(o)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new f,o=this.geometry.attributes.skinWeight,l=0,g=o.count;l<g;l++){e.x=o.getX(l),e.y=o.getY(l),e.z=o.getZ(l),e.w=o.getW(l);var w=1/e.manhattanLength();w!==Infinity?e.multiplyScalar(w):e.set(1,0,0,0),o.setXYZW(l,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Dt.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var e=new C,o=new f,l=new f,g=new C,w=new I;return function(B,L){var z=this.skeleton,V=this.geometry;for(o.fromBufferAttribute(V.attributes.skinIndex,B),l.fromBufferAttribute(V.attributes.skinWeight,B),e.fromBufferAttribute(V.attributes.position,B).applyMatrix4(this.bindMatrix),L.set(0,0,0),B=0;4>B;B++)if(V=l.getComponent(B),V!==0){var j=o.getComponent(B);w.multiplyMatrices(z.bones[j].matrixWorld,z.boneInverses[j]),L.addScaledVector(g.copy(e).applyMatrix4(w),V)}return L.applyMatrix4(this.bindMatrixInverse)}}()});var IM=new I,aE=new I;dt(ay.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,o=this.bones.length;e<o;e++){var l=new I;this.bones[e]&&l.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(l)}},pose:function(){var e,o,l=0;for(o=this.bones.length;l<o;l++)(e=this.bones[l])&&e.matrixWorld.getInverse(this.boneInverses[l]);for(l=0,o=this.bones.length;l<o;l++)(e=this.bones[l])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,o=this.boneInverses,l=this.boneMatrices,g=this.boneTexture,w=0,B=e.length;w<B;w++)IM.multiplyMatrices(e[w]?e[w].matrixWorld:aE,o[w]),IM.toArray(l,16*w);g!==void 0&&(g.needsUpdate=!0)},clone:function(){return new ay(this.bones,this.boneInverses)},getBoneByName:function(e){for(var o=0,l=this.bones.length;o<l;o++){var g=this.bones[o];if(g.name===e)return g}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),hw.prototype=dt(pt(D.prototype),{constructor:hw,isBone:!0});var TM=new I,SM=new I,ex=[],m1=new Dt;Ay.prototype=dt(pt(Dt.prototype),{constructor:Ay,isInstancedMesh:!0,getMatrixAt:function(e,o){o.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,o){var l=this.matrixWorld,g=this.count;if(m1.geometry=this.geometry,m1.material=this.material,m1.material!==void 0)for(var w=0;w<g;w++){this.getMatrixAt(w,TM),SM.multiplyMatrices(l,TM),m1.matrixWorld=SM,m1.raycast(e,ex);for(var B=0,L=ex.length;B<L;B++){var z=ex[B];z.instanceId=w,z.object=this,o.push(z)}ex.length=0}},setMatrixAt:function(e,o){o.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),es.prototype=pt(le.prototype),es.prototype.constructor=es,es.prototype.isLineBasicMaterial=!0,es.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};var LM=new C,FM=new C,RM=new I,rx=new ht,nx=new st;ju.prototype=dt(pt(D.prototype),{constructor:ju,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(e.index===null){for(var o=e.attributes.position,l=[0],g=1,w=o.count;g<w;g++)LM.fromBufferAttribute(o,g-1),FM.fromBufferAttribute(o,g),l[g]=l[g-1],l[g]+=LM.distanceTo(FM);e.setAttribute("lineDistance",new _t(l,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(o=e.vertices,l=e.lineDistances,l[0]=0,g=1,w=o.length;g<w;g++)l[g]=l[g-1],l[g]+=o[g-1].distanceTo(o[g]);return this},raycast:function(e,o){var l=this.geometry,g=this.matrixWorld,w=e.params.Line.threshold;if(l.boundingSphere===null&&l.computeBoundingSphere(),nx.copy(l.boundingSphere),nx.applyMatrix4(g),nx.radius+=w,e.ray.intersectsSphere(nx)!==!1){RM.getInverse(g),rx.copy(e.ray).applyMatrix4(RM),g=w/((this.scale.x+this.scale.y+this.scale.z)/3),g*=g;var B=new C,L=new C;w=new C;var z=new C,V=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var j=l.index,et=l.attributes.position.array;if(j!==null){j=j.array,l=0;for(var tt=j.length-1;l<tt;l+=V){var it=j[l+1];B.fromArray(et,3*j[l]),L.fromArray(et,3*it),it=rx.distanceSqToSegment(B,L,z,w),it>g||(z.applyMatrix4(this.matrixWorld),it=e.ray.origin.distanceTo(z),it<e.near||it>e.far||o.push({distance:it,point:w.clone().applyMatrix4(this.matrixWorld),index:l,face:null,faceIndex:null,object:this}))}}else for(l=0,tt=et.length/3-1;l<tt;l+=V)B.fromArray(et,3*l),L.fromArray(et,3*l+3),it=rx.distanceSqToSegment(B,L,z,w),it>g||(z.applyMatrix4(this.matrixWorld),it=e.ray.origin.distanceTo(z),it<e.near||it>e.far||o.push({distance:it,point:w.clone().applyMatrix4(this.matrixWorld),index:l,face:null,faceIndex:null,object:this}))}else if(l.isGeometry)for(B=l.vertices,L=B.length,l=0;l<L-1;l+=V)it=rx.distanceSqToSegment(B[l],B[l+1],z,w),it>g||(z.applyMatrix4(this.matrixWorld),it=e.ray.origin.distanceTo(z),it<e.near||it>e.far||o.push({distance:it,point:w.clone().applyMatrix4(this.matrixWorld),index:l,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var o=Xi(e);if(0<o.length){var l=e[o[0]];if(l!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,o=l.length;e<o;e++){var g=l[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=e}}}else e=e.morphTargets,e!==void 0&&0<e.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ix=new C,ox=new C;ps.prototype=dt(pt(ju.prototype),{constructor:ps,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(e.index===null){for(var o=e.attributes.position,l=[],g=0,w=o.count;g<w;g+=2)ix.fromBufferAttribute(o,g),ox.fromBufferAttribute(o,g+1),l[g]=g===0?0:l[g-1],l[g+1]=l[g]+ix.distanceTo(ox);e.setAttribute("lineDistance",new _t(l,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(o=e.vertices,l=e.lineDistances,g=0,w=o.length;g<w;g+=2)ix.copy(o[g]),ox.copy(o[g+1]),l[g]=g===0?0:l[g-1],l[g+1]=l[g]+ix.distanceTo(ox);return this}}),uy.prototype=dt(pt(ju.prototype),{constructor:uy,isLineLoop:!0}),Bh.prototype=pt(le.prototype),Bh.prototype.constructor=Bh,Bh.prototype.isPointsMaterial=!0,Bh.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var PM=new I,uC=new ht,sx=new st,ax=new C;$m.prototype=dt(pt(D.prototype),{constructor:$m,isPoints:!0,raycast:function(e,o){var l=this.geometry,g=this.matrixWorld,w=e.params.Points.threshold;if(l.boundingSphere===null&&l.computeBoundingSphere(),sx.copy(l.boundingSphere),sx.applyMatrix4(g),sx.radius+=w,e.ray.intersectsSphere(sx)!==!1)if(PM.getInverse(g),uC.copy(e.ray).applyMatrix4(PM),w/=(this.scale.x+this.scale.y+this.scale.z)/3,w*=w,l.isBufferGeometry){var B=l.index;if(l=l.attributes.position.array,B!==null){var L=B.array;B=0;for(var z=L.length;B<z;B++){var V=L[B];ax.fromArray(l,3*V),cw(ax,V,w,g,e,o,this)}}else for(B=0,L=l.length/3;B<L;B++)ax.fromArray(l,3*B),cw(ax,B,w,g,e,o,this)}else for(l=l.vertices,B=0,L=l.length;B<L;B++)cw(l[B],B,w,g,e,o,this)},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var o=Xi(e);if(0<o.length){var l=e[o[0]];if(l!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,o=l.length;e<o;e++){var g=l[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=e}}}else e=e.morphTargets,e!==void 0&&0<e.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),fw.prototype=dt(pt(d.prototype),{constructor:fw,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),tv.prototype=pt(d.prototype),tv.prototype.constructor=tv,tv.prototype.isCompressedTexture=!0,L0.prototype=pt(d.prototype),L0.prototype.constructor=L0,L0.prototype.isCanvasTexture=!0,F0.prototype=pt(d.prototype),F0.prototype.constructor=F0,F0.prototype.isDepthTexture=!0,ev.prototype=pt(yt.prototype),ev.prototype.constructor=ev,R0.prototype=pt(xt.prototype),R0.prototype.constructor=R0,rv.prototype=pt(yt.prototype),rv.prototype.constructor=rv,P0.prototype=pt(xt.prototype),P0.prototype.constructor=P0,pu.prototype=pt(yt.prototype),pu.prototype.constructor=pu,U0.prototype=pt(xt.prototype),U0.prototype.constructor=U0,nv.prototype=pt(pu.prototype),nv.prototype.constructor=nv,D0.prototype=pt(xt.prototype),D0.prototype.constructor=D0,xg.prototype=pt(pu.prototype),xg.prototype.constructor=xg,O0.prototype=pt(xt.prototype),O0.prototype.constructor=O0,iv.prototype=pt(pu.prototype),iv.prototype.constructor=iv,H0.prototype=pt(xt.prototype),H0.prototype.constructor=H0,ov.prototype=pt(pu.prototype),ov.prototype.constructor=ov,N0.prototype=pt(xt.prototype),N0.prototype.constructor=N0,wg.prototype=pt(yt.prototype),wg.prototype.constructor=wg,wg.prototype.toJSON=function(){var e=yt.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},z0.prototype=pt(xt.prototype),z0.prototype.constructor=z0,sv.prototype=pt(yt.prototype),sv.prototype.constructor=sv,Q0.prototype=pt(xt.prototype),Q0.prototype.constructor=Q0,av.prototype=pt(yt.prototype),av.prototype.constructor=av;var AE={triangulate:function(e,o,l){l=l||2;var g=o&&o.length,w=g?o[0]*l:e.length,B=D2(e,0,w,l,!0),L=[];if(!B||B.next===B.prev)return L;var z;if(g){var V=l;g=[];var j,et=0;for(j=o.length;et<j;et++){var tt=o[et]*V,it=et<j-1?o[et+1]*V:e.length;tt=D2(e,tt,it,V,!1),tt===tt.next&&(tt.steiner=!0),g.push(QB(tt))}for(g.sort(NB),et=0;et<g.length;et++)V=g[et],o=B,(o=zB(V,o))&&(V=H2(o,V),md(o,o.next),md(V,V.next)),B=md(B,B.next)}if(e.length>80*l){var rt=z=e[0],At=g=e[1];for(V=l;V<w;V+=l)et=e[V],o=e[V+1],et<rt&&(rt=et),o<At&&(At=o),et>z&&(z=et),o>g&&(g=o);z=Math.max(z-rt,g-At),z=z!==0?1/z:0}return b0(B,L,l,rt,At,z),L}},Zf={area:function(e){for(var o=e.length,l=0,g=o-1,w=0;w<o;g=w++)l+=e[g].x*e[w].y-e[w].x*e[g].y;return .5*l},isClockWise:function(e){return 0>Zf.area(e)},triangulateShape:function(e,o){var l=[],g=[],w=[];z2(e),Q2(l,e);var B=e.length;for(o.forEach(z2),e=0;e<o.length;e++)g.push(B),B+=o[e].length,Q2(l,o[e]);for(o=AE.triangulate(l,g),e=0;e<o.length;e+=3)w.push(o.slice(e,e+3));return w}};Cg.prototype=pt(xt.prototype),Cg.prototype.constructor=Cg,Cg.prototype.toJSON=function(){var e=xt.prototype.toJSON.call(this);return b2(this.parameters.shapes,this.parameters.options,e)},Lc.prototype=pt(yt.prototype),Lc.prototype.constructor=Lc,Lc.prototype.toJSON=function(){var e=yt.prototype.toJSON.call(this);return b2(this.parameters.shapes,this.parameters.options,e)};var uE={generateTopUV:function(e,o,l,g,w){e=o[3*g],g=o[3*g+1];var B=o[3*w];return w=o[3*w+1],[new c(o[3*l],o[3*l+1]),new c(e,g),new c(B,w)]},generateSideWallUV:function(e,o,l,g,w,B){e=o[3*l];var L=o[3*l+1];l=o[3*l+2];var z=o[3*g],V=o[3*g+1];g=o[3*g+2];var j=o[3*w],et=o[3*w+1];w=o[3*w+2];var tt=o[3*B],it=o[3*B+1];return o=o[3*B+2],.01>Math.abs(L-V)?[new c(e,1-l),new c(z,1-g),new c(j,1-w),new c(tt,1-o)]:[new c(L,1-l),new c(V,1-g),new c(et,1-w),new c(it,1-o)]}};V0.prototype=pt(xt.prototype),V0.prototype.constructor=V0,uv.prototype=pt(Lc.prototype),uv.prototype.constructor=uv,W0.prototype=pt(xt.prototype),W0.prototype.constructor=W0,Mg.prototype=pt(yt.prototype),Mg.prototype.constructor=Mg,j0.prototype=pt(xt.prototype),j0.prototype.constructor=j0,lv.prototype=pt(yt.prototype),lv.prototype.constructor=lv,X0.prototype=pt(xt.prototype),X0.prototype.constructor=X0,hv.prototype=pt(yt.prototype),hv.prototype.constructor=hv,_g.prototype=pt(xt.prototype),_g.prototype.constructor=_g,_g.prototype.toJSON=function(){var e=xt.prototype.toJSON.call(this);return k2(this.parameters.shapes,e)},Bg.prototype=pt(yt.prototype),Bg.prototype.constructor=Bg,Bg.prototype.toJSON=function(){var e=yt.prototype.toJSON.call(this);return k2(this.parameters.shapes,e)},cv.prototype=pt(yt.prototype),cv.prototype.constructor=cv,Eg.prototype=pt(xt.prototype),Eg.prototype.constructor=Eg,Qf.prototype=pt(yt.prototype),Qf.prototype.constructor=Qf,K0.prototype=pt(Eg.prototype),K0.prototype.constructor=K0,Y0.prototype=pt(Qf.prototype),Y0.prototype.constructor=Y0,Z0.prototype=pt(xt.prototype),Z0.prototype.constructor=Z0,fv.prototype=pt(yt.prototype),fv.prototype.constructor=fv;var VA=bi({__proto__:null,WireframeGeometry:ev,ParametricGeometry:R0,ParametricBufferGeometry:rv,TetrahedronGeometry:U0,TetrahedronBufferGeometry:nv,OctahedronGeometry:D0,OctahedronBufferGeometry:xg,IcosahedronGeometry:O0,IcosahedronBufferGeometry:iv,DodecahedronGeometry:H0,DodecahedronBufferGeometry:ov,PolyhedronGeometry:P0,PolyhedronBufferGeometry:pu,TubeGeometry:N0,TubeBufferGeometry:wg,TorusKnotGeometry:z0,TorusKnotBufferGeometry:sv,TorusGeometry:Q0,TorusBufferGeometry:av,TextGeometry:V0,TextBufferGeometry:uv,SphereGeometry:W0,SphereBufferGeometry:Mg,RingGeometry:j0,RingBufferGeometry:lv,PlaneGeometry:ts,PlaneBufferGeometry:li,LatheGeometry:X0,LatheBufferGeometry:hv,ShapeGeometry:_g,ShapeBufferGeometry:Bg,ExtrudeGeometry:Cg,ExtrudeBufferGeometry:Lc,EdgesGeometry:cv,ConeGeometry:K0,ConeBufferGeometry:Y0,CylinderGeometry:Eg,CylinderBufferGeometry:Qf,CircleGeometry:Z0,CircleBufferGeometry:fv,BoxGeometry:oC,BoxBufferGeometry:f1});Ig.prototype=pt(le.prototype),Ig.prototype.constructor=Ig,Ig.prototype.isShadowMaterial=!0,Ig.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.color.copy(e.color),this},bf.prototype=pt(Te.prototype),bf.prototype.constructor=bf,bf.prototype.isRawShaderMaterial=!0,Fc.prototype=pt(le.prototype),Fc.prototype.constructor=Fc,Fc.prototype.isMeshStandardMaterial=!0,Fc.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},Tg.prototype=pt(Fc.prototype),Tg.prototype.constructor=Tg,Tg.prototype.isMeshPhysicalMaterial=!0,Tg.prototype.copy=function(e){return Fc.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,this.sheen=e.sheen?(this.sheen||new Bt).copy(e.sheen):null,this.transparency=e.transparency,this},vd.prototype=pt(le.prototype),vd.prototype.constructor=vd,vd.prototype.isMeshPhongMaterial=!0,vd.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Sg.prototype=pt(le.prototype),Sg.prototype.constructor=Sg,Sg.prototype.isMeshToonMaterial=!0,Sg.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Lg.prototype=pt(le.prototype),Lg.prototype.constructor=Lg,Lg.prototype.isMeshNormalMaterial=!0,Lg.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Fg.prototype=pt(le.prototype),Fg.prototype.constructor=Fg,Fg.prototype.isMeshLambertMaterial=!0,Fg.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Rg.prototype=pt(le.prototype),Rg.prototype.constructor=Rg,Rg.prototype.isMeshMatcapMaterial=!0,Rg.prototype.copy=function(e){return le.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Pg.prototype=pt(es.prototype),Pg.prototype.constructor=Pg,Pg.prototype.isLineDashedMaterial=!0,Pg.prototype.copy=function(e){return es.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var lE=bi({__proto__:null,ShadowMaterial:Ig,SpriteMaterial:gd,RawShaderMaterial:bf,ShaderMaterial:Te,PointsMaterial:Bh,MeshPhysicalMaterial:Tg,MeshStandardMaterial:Fc,MeshPhongMaterial:vd,MeshToonMaterial:Sg,MeshNormalMaterial:Lg,MeshLambertMaterial:Fg,MeshDepthMaterial:pd,MeshDistanceMaterial:dd,MeshBasicMaterial:tr,MeshMatcapMaterial:Rg,LineDashedMaterial:Pg,LineBasicMaterial:es,Material:le}),rs={arraySlice:function(e,o,l){return rs.isTypedArray(e)?new e.constructor(e.subarray(o,l!==void 0?l:e.length)):e.slice(o,l)},convertArray:function(e,o,l){return!e||!l&&e.constructor===o?e:typeof o.BYTES_PER_ELEMENT=="number"?new o(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var o=e.length,l=Array(o),g=0;g!==o;++g)l[g]=g;return l.sort(function(w,B){return e[w]-e[B]}),l},sortedArray:function(e,o,l){for(var g=e.length,w=new e.constructor(g),B=0,L=0;L!==g;++B)for(var z=l[B]*o,V=0;V!==o;++V)w[L++]=e[z+V];return w},flattenJSON:function(e,o,l,g){for(var w=1,B=e[0];B!==void 0&&B[g]===void 0;)B=e[w++];if(B!==void 0){var L=B[g];if(L!==void 0)if(Array.isArray(L))do L=B[g],L!==void 0&&(o.push(B.time),l.push.apply(l,L)),B=e[w++];while(B!==void 0);else if(L.toArray!==void 0)do L=B[g],L!==void 0&&(o.push(B.time),L.toArray(l,l.length)),B=e[w++];while(B!==void 0);else do L=B[g],L!==void 0&&(o.push(B.time),l.push(L)),B=e[w++];while(B!==void 0)}},subclip:function(e,o,l,g,w){w=w||30,e=e.clone(),e.name=o;var B=[];for(o=0;o<e.tracks.length;++o){for(var L=e.tracks[o],z=L.getValueSize(),V=[],j=[],et=0;et<L.times.length;++et){var tt=L.times[et]*w;if(!(tt<l||tt>=g))for(V.push(L.times[et]),tt=0;tt<z;++tt)j.push(L.values[et*z+tt])}V.length!==0&&(L.times=rs.convertArray(V,L.times.constructor),L.values=rs.convertArray(j,L.values.constructor),B.push(L))}for(e.tracks=B,l=Infinity,o=0;o<e.tracks.length;++o)l>e.tracks[o].times[0]&&(l=e.tracks[o].times[0]);for(o=0;o<e.tracks.length;++o)e.tracks[o].shift(-1*l);return e.resetDuration(),e},makeClipAdditive:function(e,o,l,g){o===void 0&&(o=0),l===void 0&&(l=e),(g===void 0||0>=g)&&(g=30);var w=e.tracks.length;for(o/=g,g=0;g<w;++g){var B=l.tracks[g],L=B.ValueTypeName;if(L!=="bool"&&L!=="string"){var z=e.tracks.find(function(At){return At.name===B.name&&At.ValueTypeName===L});if(z!==void 0){var V=B.getValueSize(),j=B.times.length-1;o<=B.times[0]?j=rs.arraySlice(B.values,0,B.valueSize):o>=B.times[j]?j=rs.arraySlice(B.values,j*V):(j=B.createInterpolant(),j.evaluate(o),j=j.resultBuffer),L==="quaternion"&&new N(j[0],j[1],j[2],j[3]).normalize().conjugate().toArray(j);for(var et=z.times.length,tt=0;tt<et;++tt){var it=tt*V;if(L==="quaternion")N.multiplyQuaternionsFlat(z.values,it,j,0,z.values,it);else for(var rt=0;rt<V;++rt)z.values[it+rt]-=j[rt]}}}}return e.blendMode=2501,e}};dt(Xu.prototype,{evaluate:function(e){var o=this.parameterPositions,l=this._cachedIndex,g=o[l],w=o[l-1];t:{e:{r:{n:if(!(e<g)){for(var B=l+2;;){if(g===void 0){if(e<w)break n;return this._cachedIndex=l=o.length,this.afterEnd_(l-1,e,w)}if(l===B)break;if(w=g,g=o[++l],e<g)break e}g=o.length;break r}if(e>=w)break t;for(B=o[1],e<B&&(l=2,w=B),B=l-2;;){if(w===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,g);if(l===B)break;if(g=w,w=o[--l-1],e>=w)break e}g=l,l=0}for(;l<g;)w=l+g>>>1,e<o[w]?g=w:l=w+1;if(g=o[l],w=o[l-1],w===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,g);if(g===void 0)return this._cachedIndex=l=o.length,this.afterEnd_(l-1,w,e)}this._cachedIndex=l,this.intervalChanged_(l,w,g)}return this.interpolate_(l,w,e,g)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var o=this.resultBuffer,l=this.sampleValues,g=this.valueSize;e*=g;for(var w=0;w!==g;++w)o[w]=l[e+w];return o},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),dt(Xu.prototype,{beforeStart_:Xu.prototype.copySampleValue_,afterEnd_:Xu.prototype.copySampleValue_}),fy.prototype=dt(pt(Xu.prototype),{constructor:fy,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,o,l){var g=this.parameterPositions,w=e-2,B=e+1,L=g[w],z=g[B];if(L===void 0)switch(this.getSettings_().endingStart){case 2401:w=e,L=2*o-l;break;case 2402:w=g.length-2,L=o+g[w]-g[w+1];break;default:w=e,L=l}if(z===void 0)switch(this.getSettings_().endingEnd){case 2401:B=e,z=2*l-o;break;case 2402:B=1,z=l+g[1]-g[0];break;default:B=e-1,z=o}e=.5*(l-o),g=this.valueSize,this._weightPrev=e/(o-L),this._weightNext=e/(z-l),this._offsetPrev=w*g,this._offsetNext=B*g},interpolate_:function(e,o,l,g){var w=this.resultBuffer,B=this.sampleValues,L=this.valueSize;e*=L;var z=e-L,V=this._offsetPrev,j=this._offsetNext,et=this._weightPrev,tt=this._weightNext,it=(l-o)/(g-o);for(l=it*it,g=l*it,o=-et*g+2*et*l-et*it,et=(1+et)*g+(-1.5-2*et)*l+(-.5+et)*it+1,it=(-1-tt)*g+(1.5+tt)*l+.5*it,tt=tt*g-tt*l,l=0;l!==L;++l)w[l]=o*B[V+l]+et*B[z+l]+it*B[e+l]+tt*B[j+l];return w}}),J0.prototype=dt(pt(Xu.prototype),{constructor:J0,interpolate_:function(e,o,l,g){var w=this.resultBuffer,B=this.sampleValues,L=this.valueSize;e*=L;var z=e-L;for(o=(l-o)/(g-o),l=1-o,g=0;g!==L;++g)w[g]=B[z+g]*l+B[e+g]*o;return w}}),py.prototype=dt(pt(Xu.prototype),{constructor:py,interpolate_:function(e){return this.copySampleValue_(e-1)}}),dt($a,{toJSON:function(e){var o=e.constructor;if(o.toJSON!==void 0)o=o.toJSON(e);else{o={name:e.name,times:rs.convertArray(e.times,Array),values:rs.convertArray(e.values,Array)};var l=e.getInterpolation();l!==e.DefaultInterpolation&&(o.interpolation=l)}return o.type=e.ValueTypeName,o}}),dt($a.prototype,{constructor:$a,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new py(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new J0(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new fy(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var o=this.InterpolantFactoryMethodDiscrete;break;case 2301:o=this.InterpolantFactoryMethodLinear;break;case 2302:o=this.InterpolantFactoryMethodSmooth}if(o===void 0){if(o="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(o);return console.warn("THREE.KeyframeTrack:",o),this}return this.createInterpolant=o,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0)for(var o=this.times,l=0,g=o.length;l!==g;++l)o[l]+=e;return this},scale:function(e){if(e!==1)for(var o=this.times,l=0,g=o.length;l!==g;++l)o[l]*=e;return this},trim:function(e,o){for(var l=this.times,g=l.length,w=0,B=g-1;w!==g&&l[w]<e;)++w;for(;B!==-1&&l[B]>o;)--B;return++B,(w!==0||B!==g)&&(w>=B&&(B=Math.max(B,1),w=B-1),e=this.getValueSize(),this.times=rs.arraySlice(l,w,B),this.values=rs.arraySlice(this.values,w*e,B*e)),this},validate:function(){var e=!0,o=this.getValueSize();o-Math.floor(o)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var l=this.times;o=this.values;var g=l.length;g===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var w=null,B=0;B!==g;B++){var L=l[B];if(typeof L=="number"&&isNaN(L)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,B,L),e=!1;break}if(w!==null&&w>L){console.error("THREE.KeyframeTrack: Out of order keys.",this,B,L,w),e=!1;break}w=L}if(o!==void 0&&rs.isTypedArray(o)){for(B=0,l=o.length;B!==l;++B)if(g=o[B],isNaN(g)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,B,g),e=!1;break}}return e},optimize:function(){for(var e=rs.arraySlice(this.times),o=rs.arraySlice(this.values),l=this.getValueSize(),g=this.getInterpolation()===2302,w=1,B=e.length-1,L=1;L<B;++L){var z=!1,V=e[L];if(V!==e[L+1]&&(L!==1||V!==V[0]))if(g)z=!0;else{var j=L*l,et=j-l,tt=j+l;for(V=0;V!==l;++V){var it=o[j+V];if(it!==o[et+V]||it!==o[tt+V]){z=!0;break}}}if(z){if(L!==w)for(e[w]=e[L],z=L*l,j=w*l,V=0;V!==l;++V)o[j+V]=o[z+V];++w}}if(0<B){for(e[w]=e[B],z=B*l,j=w*l,V=0;V!==l;++V)o[j+V]=o[z+V];++w}return w!==e.length?(this.times=rs.arraySlice(e,0,w),this.values=rs.arraySlice(o,0,w*l)):(this.times=e,this.values=o),this},clone:function(){var e=rs.arraySlice(this.times,0),o=rs.arraySlice(this.values,0);return e=new this.constructor(this.name,e,o),e.createInterpolant=this.createInterpolant,e}}),dy.prototype=dt(pt($a.prototype),{constructor:dy,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),gy.prototype=dt(pt($a.prototype),{constructor:gy,ValueTypeName:"color"}),pv.prototype=dt(pt($a.prototype),{constructor:pv,ValueTypeName:"number"}),my.prototype=dt(pt(Xu.prototype),{constructor:my,interpolate_:function(e,o,l,g){var w=this.resultBuffer,B=this.sampleValues,L=this.valueSize;for(e*=L,o=(l-o)/(g-o),l=e+L;e!==l;e+=4)N.slerpFlat(w,0,B,e-L,B,e,o);return w}}),q0.prototype=dt(pt($a.prototype),{constructor:q0,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new my(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),vy.prototype=dt(pt($a.prototype),{constructor:vy,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),dv.prototype=dt(pt($a.prototype),{constructor:dv,ValueTypeName:"vector"}),dt(Ql,{parse:function(e){for(var o=[],l=e.tracks,g=1/(e.fps||1),w=0,B=l.length;w!==B;++w)o.push(kB(l[w]).scale(g));return new Ql(e.name,e.duration,o,e.blendMode)},toJSON:function(e){var o=[],l=e.tracks;e={name:e.name,duration:e.duration,tracks:o,uuid:e.uuid,blendMode:e.blendMode};for(var g=0,w=l.length;g!==w;++g)o.push($a.toJSON(l[g]));return e},CreateFromMorphTargetSequence:function(e,o,l,g){for(var w=o.length,B=[],L=0;L<w;L++){var z=[],V=[];z.push((L+w-1)%w,L,(L+1)%w),V.push(0,1,0);var j=rs.getKeyframeOrder(z);z=rs.sortedArray(z,1,j),V=rs.sortedArray(V,1,j),g||z[0]!==0||(z.push(w),V.push(V[0])),B.push(new pv(".morphTargetInfluences["+o[L].name+"]",z,V).scale(1/l))}return new Ql(e,-1,B)},findByName:function(e,o){var l=e;for(Array.isArray(e)||(l=e.geometry&&e.geometry.animations||e.animations),e=0;e<l.length;e++)if(l[e].name===o)return l[e];return null},CreateClipsFromMorphTargetSequences:function(e,o,l){for(var g={},w=/^([\w-]*?)([\d]+)$/,B=0,L=e.length;B<L;B++){var z=e[B],V=z.name.match(w);if(V&&1<V.length){var j=V[1];(V=g[j])||(g[j]=V=[]),V.push(z)}}e=[];for(j in g)e.push(Ql.CreateFromMorphTargetSequence(j,g[j],o,l));return e},parseAnimation:function(e,o){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var l=function(Vt,re,qt,de,oe){if(qt.length!==0){var _e=[],ee=[];rs.flattenJSON(qt,_e,ee,de),_e.length!==0&&oe.push(new Vt(re,_e,ee))}},g=[],w=e.name||"default",B=e.length||-1,L=e.fps||30,z=e.blendMode;e=e.hierarchy||[];for(var V=0;V<e.length;V++){var j=e[V].keys;if(j&&j.length!==0)if(j[0].morphTargets){B={};for(var et=0;et<j.length;et++)if(j[et].morphTargets)for(var tt=0;tt<j[et].morphTargets.length;tt++)B[j[et].morphTargets[tt]]=-1;for(var it in B){var rt=[],At=[];for(tt=0;tt!==j[et].morphTargets.length;++tt){var mt=j[et];rt.push(mt.time),At.push(mt.morphTarget===it?1:0)}g.push(new pv(".morphTargetInfluence["+it+"]",rt,At))}B=B.length*(L||1)}else et=".bones["+o[V].name+"]",l(dv,et+".position",j,"pos",g),l(q0,et+".quaternion",j,"rot",g),l(dv,et+".scale",j,"scl",g)}return g.length===0?null:new Ql(w,B,g,z)}}),dt(Ql.prototype,{resetDuration:function(){for(var e=0,o=0,l=this.tracks.length;o!==l;++o){var g=this.tracks[o];e=Math.max(e,g.times[g.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,o=0;o<this.tracks.length;o++)e=e&&this.tracks[o].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],o=0;o<this.tracks.length;o++)e.push(this.tracks[o].clone());return new Ql(this.name,this.duration,e,this.blendMode)}});var zg={enabled:!1,files:{},add:function(e,o){this.enabled!==!1&&(this.files[e]=o)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},UM=new gw;dt(Ao.prototype,{load:function(){},loadAsync:function(e,o){var l=this;return new Ve(function(g,w){l.load(e,g,o,w)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});var Uh={};bl.prototype=dt(pt(Ao.prototype),{constructor:bl,load:function(e,o,l,g){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var w=this,B=zg.get(e);if(B!==void 0)return w.manager.itemStart(e),setTimeout(function(){o&&o(B),w.manager.itemEnd(e)},0),B;if(Uh[e]!==void 0)Uh[e].push({onLoad:o,onProgress:l,onError:g});else{var L=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(L){l=L[1];var z=!!L[2];L=L[3],L=decodeURIComponent(L),z&&(L=atob(L));try{var V=(this.responseType||"").toLowerCase();switch(V){case"arraybuffer":case"blob":var j=new Uint8Array(L.length);for(z=0;z<L.length;z++)j[z]=L.charCodeAt(z);var et=V==="blob"?new Blob([j.buffer],{type:l}):j.buffer;break;case"document":et=new DOMParser().parseFromString(L,l);break;case"json":et=JSON.parse(L);break;default:et=L}setTimeout(function(){o&&o(et),w.manager.itemEnd(e)},0)}catch(it){setTimeout(function(){g&&g(it),w.manager.itemError(e),w.manager.itemEnd(e)},0)}}else{Uh[e]=[],Uh[e].push({onLoad:o,onProgress:l,onError:g});var tt=new XMLHttpRequest;tt.open("GET",e,!0),tt.addEventListener("load",function(it){var rt=this.response,At=Uh[e];if(delete Uh[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),zg.add(e,rt);for(var mt=0,Vt=At.length;mt<Vt;mt++){var re=At[mt];re.onLoad&&re.onLoad(rt)}}else{for(mt=0,Vt=At.length;mt<Vt;mt++)re=At[mt],re.onError&&re.onError(it);w.manager.itemError(e)}w.manager.itemEnd(e)},!1),tt.addEventListener("progress",function(it){for(var rt=Uh[e],At=0,mt=rt.length;At<mt;At++){var Vt=rt[At];Vt.onProgress&&Vt.onProgress(it)}},!1),tt.addEventListener("error",function(it){var rt=Uh[e];delete Uh[e];for(var At=0,mt=rt.length;At<mt;At++){var Vt=rt[At];Vt.onError&&Vt.onError(it)}w.manager.itemError(e),w.manager.itemEnd(e)},!1),tt.addEventListener("abort",function(it){var rt=Uh[e];delete Uh[e];for(var At=0,mt=rt.length;At<mt;At++){var Vt=rt[At];Vt.onError&&Vt.onError(it)}w.manager.itemError(e),w.manager.itemEnd(e)},!1),this.responseType!==void 0&&(tt.responseType=this.responseType),this.withCredentials!==void 0&&(tt.withCredentials=this.withCredentials),tt.overrideMimeType&&tt.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(z in this.requestHeader)tt.setRequestHeader(z,this.requestHeader[z]);tt.send(null)}return w.manager.itemStart(e),tt}},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),mw.prototype=dt(pt(Ao.prototype),{constructor:mw,load:function(e,o,l,g){var w=this,B=new bl(w.manager);B.setPath(w.path),B.load(e,function(L){try{o(w.parse(JSON.parse(L)))}catch(z){g?g(z):console.error(z),w.manager.itemError(e)}},l,g)},parse:function(e){for(var o=[],l=0;l<e.length;l++){var g=Ql.parse(e[l]);o.push(g)}return o}}),vw.prototype=dt(pt(Ao.prototype),{constructor:vw,load:function(e,o,l,g){function w(it){V.load(e[it],function(rt){rt=B.parse(rt,!0),L[it]={width:rt.width,height:rt.height,format:rt.format,mipmaps:rt.mipmaps},j+=1,j===6&&(rt.mipmapCount===1&&(z.minFilter=1006),z.format=rt.format,z.needsUpdate=!0,o&&o(z))},l,g)}var B=this,L=[],z=new tv;z.image=L;var V=new bl(this.manager);if(V.setPath(this.path),V.setResponseType("arraybuffer"),Array.isArray(e))for(var j=0,et=0,tt=e.length;et<tt;++et)w(et);else V.load(e,function(it){if(it=B.parse(it,!0),it.isCubemap)for(var rt=it.mipmaps.length/it.mipmapCount,At=0;At<rt;At++){L[At]={mipmaps:[]};for(var mt=0;mt<it.mipmapCount;mt++)L[At].mipmaps.push(it.mipmaps[At*it.mipmapCount+mt]),L[At].format=it.format,L[At].width=it.width,L[At].height=it.height}else z.image.width=it.width,z.image.height=it.height,z.mipmaps=it.mipmaps;it.mipmapCount===1&&(z.minFilter=1006),z.format=it.format,z.needsUpdate=!0,o&&o(z)},l,g);return z}}),yy.prototype=dt(pt(Ao.prototype),{constructor:yy,load:function(e,o,l,g){var w=this,B=new Pe,L=new bl(this.manager);return L.setResponseType("arraybuffer"),L.setPath(this.path),L.load(e,function(z){(z=w.parse(z))&&(z.image!==void 0?B.image=z.image:z.data!==void 0&&(B.image.width=z.width,B.image.height=z.height,B.image.data=z.data),B.wrapS=z.wrapS!==void 0?z.wrapS:1001,B.wrapT=z.wrapT!==void 0?z.wrapT:1001,B.magFilter=z.magFilter!==void 0?z.magFilter:1006,B.minFilter=z.minFilter!==void 0?z.minFilter:1006,B.anisotropy=z.anisotropy!==void 0?z.anisotropy:1,z.format!==void 0&&(B.format=z.format),z.type!==void 0&&(B.type=z.type),z.mipmaps!==void 0&&(B.mipmaps=z.mipmaps,B.minFilter=1008),z.mipmapCount===1&&(B.minFilter=1006),B.needsUpdate=!0,o&&o(B,z))},l,g),B}}),gv.prototype=dt(pt(Ao.prototype),{constructor:gv,load:function(e,o,l,g){function w(){V.removeEventListener("load",w,!1),V.removeEventListener("error",B,!1),zg.add(e,this),o&&o(this),L.manager.itemEnd(e)}function B(j){V.removeEventListener("load",w,!1),V.removeEventListener("error",B,!1),g&&g(j),L.manager.itemError(e),L.manager.itemEnd(e)}this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var L=this,z=zg.get(e);if(z!==void 0)return L.manager.itemStart(e),setTimeout(function(){o&&o(z),L.manager.itemEnd(e)},0),z;var V=document.createElementNS("http://www.w3.org/1999/xhtml","img");return V.addEventListener("load",w,!1),V.addEventListener("error",B,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(V.crossOrigin=this.crossOrigin),L.manager.itemStart(e),V.src=e,V}}),xy.prototype=dt(pt(Ao.prototype),{constructor:xy,load:function(e,o,l,g){function w(V){L.load(e[V],function(j){B.images[V]=j,z++,z===6&&(B.needsUpdate=!0,o&&o(B))},void 0,g)}var B=new Nl,L=new gv(this.manager);L.setCrossOrigin(this.crossOrigin),L.setPath(this.path);var z=0;for(l=0;l<e.length;++l)w(l);return B}}),wy.prototype=dt(pt(Ao.prototype),{constructor:wy,load:function(e,o,l,g){var w=new d,B=new gv(this.manager);return B.setCrossOrigin(this.crossOrigin),B.setPath(this.path),B.load(e,function(L){w.image=L,L=0<e.search(/\.jpe?g($|\?)/i)||e.search(/^data:image\/jpeg/)===0,w.format=L?1022:1023,w.needsUpdate=!0,o!==void 0&&o(w)},l,g),w}}),dt(En.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,o){return e=this.getUtoTmapping(e),this.getPoint(e,o)},getPoints:function(e){e===void 0&&(e=5);for(var o=[],l=0;l<=e;l++)o.push(this.getPoint(l/e));return o},getSpacedPoints:function(e){e===void 0&&(e=5);for(var o=[],l=0;l<=e;l++)o.push(this.getPointAt(l/e));return o},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var o=[],l=this.getPoint(0),g,w=0;for(o.push(0),g=1;g<=e;g++){var B=this.getPoint(g/e);w+=B.distanceTo(l),o.push(w),l=B}return this.cacheArcLengths=o},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,o){var l=this.getLengths(),g=l.length;o=o||e*l[g-1];for(var w=0,B=g-1,L;w<=B;)if(e=Math.floor(w+(B-w)/2),L=l[e]-o,0>L)w=e+1;else if(0<L)B=e-1;else{B=e;break}return e=B,l[e]===o?e/(g-1):(w=l[e],(e+(o-w)/(l[e+1]-w))/(g-1))},getTangent:function(e,o){var l=e-1e-4;return e+=1e-4,0>l&&(l=0),1<e&&(e=1),l=this.getPoint(l),e=this.getPoint(e),o=o||(l.isVector2?new c:new C),o.copy(e).sub(l).normalize(),o},getTangentAt:function(e,o){return e=this.getUtoTmapping(e),this.getTangent(e,o)},computeFrenetFrames:function(e,o){var l=new C,g=[],w=[],B=[],L=new C,z=new I,V;for(V=0;V<=e;V++){var j=V/e;g[V]=this.getTangentAt(j,new C),g[V].normalize()}w[0]=new C,B[0]=new C,V=Number.MAX_VALUE,j=Math.abs(g[0].x);var et=Math.abs(g[0].y),tt=Math.abs(g[0].z);for(j<=V&&(V=j,l.set(1,0,0)),et<=V&&(V=et,l.set(0,1,0)),tt<=V&&l.set(0,0,1),L.crossVectors(g[0],l).normalize(),w[0].crossVectors(g[0],L),B[0].crossVectors(g[0],w[0]),V=1;V<=e;V++)w[V]=w[V-1].clone(),B[V]=B[V-1].clone(),L.crossVectors(g[V-1],g[V]),L.length()>No&&(L.normalize(),l=Math.acos(ii.clamp(g[V-1].dot(g[V]),-1,1)),w[V].applyMatrix4(z.makeRotationAxis(L,l))),B[V].crossVectors(g[V],w[V]);if(o===!0)for(l=Math.acos(ii.clamp(w[0].dot(w[e]),-1,1)),l/=e,0<g[0].dot(L.crossVectors(w[0],w[e]))&&(l=-l),V=1;V<=e;V++)w[V].applyMatrix4(z.makeRotationAxis(g[V],l*V)),B[V].crossVectors(g[V],w[V]);return{tangents:g,normals:w,binormals:B}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Ku.prototype=pt(En.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isEllipseCurve=!0,Ku.prototype.getPoint=function(e,o){o=o||new c;for(var l=2*Math.PI,g=this.aEndAngle-this.aStartAngle,w=Math.abs(g)<No;0>g;)g+=l;for(;g>l;)g-=l;g<No&&(g=w?0:l),this.aClockwise!==!0||w||(g=g===l?-l:g-l),l=this.aStartAngle+e*g,e=this.aX+this.xRadius*Math.cos(l);var B=this.aY+this.yRadius*Math.sin(l);return this.aRotation!==0&&(l=Math.cos(this.aRotation),g=Math.sin(this.aRotation),w=e-this.aX,B-=this.aY,e=w*l-B*g+this.aX,B=w*g+B*l+this.aY),o.set(e,B)},Ku.prototype.copy=function(e){return En.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ku.prototype.toJSON=function(){var e=En.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Ku.prototype.fromJSON=function(e){return En.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},mv.prototype=pt(Ku.prototype),mv.prototype.constructor=mv,mv.prototype.isArcCurve=!0;var Ax=new C,lC=new yw,hC=new yw,cC=new yw;xA.prototype=pt(En.prototype),xA.prototype.constructor=xA,xA.prototype.isCatmullRomCurve3=!0,xA.prototype.getPoint=function(e,o){o=o||new C;var l=this.points,g=l.length;e*=g-(this.closed?0:1);var w=Math.floor(e);if(e-=w,this.closed?w+=0<w?0:(Math.floor(Math.abs(w)/g)+1)*g:e===0&&w===g-1&&(w=g-2,e=1),this.closed||0<w)var B=l[(w-1)%g];else Ax.subVectors(l[0],l[1]).add(l[0]),B=Ax;var L=l[w%g],z=l[(w+1)%g];if(this.closed||w+2<g?l=l[(w+2)%g]:(Ax.subVectors(l[g-1],l[g-2]).add(l[g-1]),l=Ax),this.curveType==="centripetal"||this.curveType==="chordal"){var V=this.curveType==="chordal"?.5:.25;g=Math.pow(B.distanceToSquared(L),V),w=Math.pow(L.distanceToSquared(z),V),V=Math.pow(z.distanceToSquared(l),V),1e-4>w&&(w=1),1e-4>g&&(g=w),1e-4>V&&(V=w),lC.initNonuniformCatmullRom(B.x,L.x,z.x,l.x,g,w,V),hC.initNonuniformCatmullRom(B.y,L.y,z.y,l.y,g,w,V),cC.initNonuniformCatmullRom(B.z,L.z,z.z,l.z,g,w,V)}else this.curveType==="catmullrom"&&(lC.initCatmullRom(B.x,L.x,z.x,l.x,this.tension),hC.initCatmullRom(B.y,L.y,z.y,l.y,this.tension),cC.initCatmullRom(B.z,L.z,z.z,l.z,this.tension));return o.set(lC.calc(e),hC.calc(e),cC.calc(e)),o},xA.prototype.copy=function(e){En.prototype.copy.call(this,e),this.points=[];for(var o=0,l=e.points.length;o<l;o++)this.points.push(e.points[o].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},xA.prototype.toJSON=function(){var e=En.prototype.toJSON.call(this);e.points=[];for(var o=0,l=this.points.length;o<l;o++)e.points.push(this.points[o].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},xA.prototype.fromJSON=function(e){En.prototype.fromJSON.call(this,e),this.points=[];for(var o=0,l=e.points.length;o<l;o++){var g=e.points[o];this.points.push(new C().fromArray(g))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Eh.prototype=pt(En.prototype),Eh.prototype.constructor=Eh,Eh.prototype.isCubicBezierCurve=!0,Eh.prototype.getPoint=function(e,o){o=o||new c;var l=this.v0,g=this.v1,w=this.v2,B=this.v3;return o.set(t1(e,l.x,g.x,w.x,B.x),t1(e,l.y,g.y,w.y,B.y)),o},Eh.prototype.copy=function(e){return En.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Eh.prototype.toJSON=function(){var e=En.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Eh.prototype.fromJSON=function(e){return En.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Rc.prototype=pt(En.prototype),Rc.prototype.constructor=Rc,Rc.prototype.isCubicBezierCurve3=!0,Rc.prototype.getPoint=function(e,o){o=o||new C;var l=this.v0,g=this.v1,w=this.v2,B=this.v3;return o.set(t1(e,l.x,g.x,w.x,B.x),t1(e,l.y,g.y,w.y,B.y),t1(e,l.z,g.z,w.z,B.z)),o},Rc.prototype.copy=function(e){return En.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Rc.prototype.toJSON=function(){var e=En.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Rc.prototype.fromJSON=function(e){return En.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},du.prototype=pt(En.prototype),du.prototype.constructor=du,du.prototype.isLineCurve=!0,du.prototype.getPoint=function(e,o){return o=o||new c,e===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(e).add(this.v1)),o},du.prototype.getPointAt=function(e,o){return this.getPoint(e,o)},du.prototype.getTangent=function(e,o){return e=o||new c,e=e.copy(this.v2).sub(this.v1).normalize()},du.prototype.copy=function(e){return En.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},du.prototype.toJSON=function(){var e=En.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},du.prototype.fromJSON=function(e){return En.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ih.prototype=pt(En.prototype),Ih.prototype.constructor=Ih,Ih.prototype.isLineCurve3=!0,Ih.prototype.getPoint=function(e,o){return o=o||new C,e===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(e).add(this.v1)),o},Ih.prototype.getPointAt=function(e,o){return this.getPoint(e,o)},Ih.prototype.copy=function(e){return En.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ih.prototype.toJSON=function(){var e=En.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ih.prototype.fromJSON=function(e){return En.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Th.prototype=pt(En.prototype),Th.prototype.constructor=Th,Th.prototype.isQuadraticBezierCurve=!0,Th.prototype.getPoint=function(e,o){o=o||new c;var l=this.v0,g=this.v1,w=this.v2;return o.set($0(e,l.x,g.x,w.x),$0(e,l.y,g.y,w.y)),o},Th.prototype.copy=function(e){return En.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Th.prototype.toJSON=function(){var e=En.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Th.prototype.fromJSON=function(e){return En.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Pc.prototype=pt(En.prototype),Pc.prototype.constructor=Pc,Pc.prototype.isQuadraticBezierCurve3=!0,Pc.prototype.getPoint=function(e,o){o=o||new C;var l=this.v0,g=this.v1,w=this.v2;return o.set($0(e,l.x,g.x,w.x),$0(e,l.y,g.y,w.y),$0(e,l.z,g.z,w.z)),o},Pc.prototype.copy=function(e){return En.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Pc.prototype.toJSON=function(){var e=En.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Pc.prototype.fromJSON=function(e){return En.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Sh.prototype=pt(En.prototype),Sh.prototype.constructor=Sh,Sh.prototype.isSplineCurve=!0,Sh.prototype.getPoint=function(e,o){o=o||new c;var l=this.points,g=(l.length-1)*e;e=Math.floor(g),g-=e;var w=l[e===0?e:e-1],B=l[e],L=l[e>l.length-2?l.length-1:e+1];return l=l[e>l.length-3?l.length-1:e+2],o.set(G2(g,w.x,B.x,L.x,l.x),G2(g,w.y,B.y,L.y,l.y)),o},Sh.prototype.copy=function(e){En.prototype.copy.call(this,e),this.points=[];for(var o=0,l=e.points.length;o<l;o++)this.points.push(e.points[o].clone());return this},Sh.prototype.toJSON=function(){var e=En.prototype.toJSON.call(this);e.points=[];for(var o=0,l=this.points.length;o<l;o++)e.points.push(this.points[o].toArray());return e},Sh.prototype.fromJSON=function(e){En.prototype.fromJSON.call(this,e),this.points=[];for(var o=0,l=e.points.length;o<l;o++){var g=e.points[o];this.points.push(new c().fromArray(g))}return this};var fC=bi({__proto__:null,ArcCurve:mv,CatmullRomCurve3:xA,CubicBezierCurve:Eh,CubicBezierCurve3:Rc,EllipseCurve:Ku,LineCurve:du,LineCurve3:Ih,QuadraticBezierCurve:Th,QuadraticBezierCurve3:Pc,SplineCurve:Sh});kf.prototype=dt(pt(En.prototype),{constructor:kf,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);e.equals(o)||this.curves.push(new du(o,e))},getPoint:function(e){var o=e*this.getLength(),l=this.getCurveLengths();for(e=0;e<l.length;){if(l[e]>=o)return o=l[e]-o,e=this.curves[e],l=e.getLength(),e.getPointAt(l===0?0:1-o/l);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],o=0,l=0,g=this.curves.length;l<g;l++)o+=this.curves[l].getLength(),e.push(o);return this.cacheLengths=e},getSpacedPoints:function(e){e===void 0&&(e=40);for(var o=[],l=0;l<=e;l++)o.push(this.getPoint(l/e));return this.autoClose&&o.push(o[0]),o},getPoints:function(e){e=e||12;for(var o=[],l,g=0,w=this.curves;g<w.length;g++){var B=w[g];B=B.getPoints(B&&B.isEllipseCurve?2*e:B&&(B.isLineCurve||B.isLineCurve3)?1:B&&B.isSplineCurve?e*B.points.length:e);for(var L=0;L<B.length;L++){var z=B[L];l&&l.equals(z)||(o.push(z),l=z)}}return this.autoClose&&1<o.length&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o},copy:function(e){En.prototype.copy.call(this,e),this.curves=[];for(var o=0,l=e.curves.length;o<l;o++)this.curves.push(e.curves[o].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=En.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var o=0,l=this.curves.length;o<l;o++)e.curves.push(this.curves[o].toJSON());return e},fromJSON:function(e){En.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var o=0,l=e.curves.length;o<l;o++){var g=e.curves[o];this.curves.push(new fC[g.type]().fromJSON(g))}return this}}),Lh.prototype=dt(pt(kf.prototype),{constructor:Lh,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var o=1,l=e.length;o<l;o++)this.lineTo(e[o].x,e[o].y);return this},moveTo:function(e,o){return this.currentPoint.set(e,o),this},lineTo:function(e,o){var l=new du(this.currentPoint.clone(),new c(e,o));return this.curves.push(l),this.currentPoint.set(e,o),this},quadraticCurveTo:function(e,o,l,g){return e=new Th(this.currentPoint.clone(),new c(e,o),new c(l,g)),this.curves.push(e),this.currentPoint.set(l,g),this},bezierCurveTo:function(e,o,l,g,w,B){return e=new Eh(this.currentPoint.clone(),new c(e,o),new c(l,g),new c(w,B)),this.curves.push(e),this.currentPoint.set(w,B),this},splineThru:function(e){var o=[this.currentPoint.clone()].concat(e);return o=new Sh(o),this.curves.push(o),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,o,l,g,w,B){return this.absarc(e+this.currentPoint.x,o+this.currentPoint.y,l,g,w,B),this},absarc:function(e,o,l,g,w,B){return this.absellipse(e,o,l,l,g,w,B),this},ellipse:function(e,o,l,g,w,B,L,z){return this.absellipse(e+this.currentPoint.x,o+this.currentPoint.y,l,g,w,B,L,z),this},absellipse:function(e,o,l,g,w,B,L,z){return e=new Ku(e,o,l,g,w,B,L,z),0<this.curves.length&&(o=e.getPoint(0),o.equals(this.currentPoint)||this.lineTo(o.x,o.y)),this.curves.push(e),e=e.getPoint(1),this.currentPoint.copy(e),this},copy:function(e){return kf.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=kf.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return kf.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),yd.prototype=dt(pt(Lh.prototype),{constructor:yd,getPointsHoles:function(e){for(var o=[],l=0,g=this.holes.length;l<g;l++)o[l]=this.holes[l].getPoints(e);return o},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Lh.prototype.copy.call(this,e),this.holes=[];for(var o=0,l=e.holes.length;o<l;o++)this.holes.push(e.holes[o].clone());return this},toJSON:function(){var e=Lh.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var o=0,l=this.holes.length;o<l;o++)e.holes.push(this.holes[o].toJSON());return e},fromJSON:function(e){Lh.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var o=0,l=e.holes.length;o<l;o++){var g=e.holes[o];this.holes.push(new Lh().fromJSON(g))}return this}}),zo.prototype=dt(pt(D.prototype),{constructor:zo,isLight:!0,copy:function(e){return D.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return e=D.prototype.toJSON.call(this,e),e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}),Cy.prototype=dt(pt(zo.prototype),{constructor:Cy,isHemisphereLight:!0,copy:function(e){return zo.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),dt(Uc.prototype,{_projScreenMatrix:new I,_lightPositionWorld:new C,_lookTarget:new C,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var o=this.camera,l=this.matrix,g=this._projScreenMatrix,w=this._lookTarget,B=this._lightPositionWorld;B.setFromMatrixPosition(e.matrixWorld),o.position.copy(B),w.setFromMatrixPosition(e.target.matrixWorld),o.lookAt(w),o.updateMatrixWorld(),g.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(g),l.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),l.multiply(o.projectionMatrix),l.multiply(o.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return this.bias!==0&&(e.bias=this.bias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),My.prototype=dt(pt(Uc.prototype),{constructor:My,isSpotLightShadow:!0,updateMatrices:function(e){var o=this.camera,l=2*ii.RAD2DEG*e.angle,g=this.mapSize.width/this.mapSize.height,w=e.distance||o.far;(l!==o.fov||g!==o.aspect||w!==o.far)&&(o.fov=l,o.aspect=g,o.far=w,o.updateProjectionMatrix()),Uc.prototype.updateMatrices.call(this,e)}}),_y.prototype=dt(pt(zo.prototype),{constructor:_y,isSpotLight:!0,copy:function(e){return zo.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),xw.prototype=dt(pt(Uc.prototype),{constructor:xw,isPointLightShadow:!0,updateMatrices:function(e,o){o===void 0&&(o=0);var l=this.camera,g=this.matrix,w=this._lightPositionWorld,B=this._lookTarget,L=this._projScreenMatrix;w.setFromMatrixPosition(e.matrixWorld),l.position.copy(w),B.copy(l.position),B.add(this._cubeDirections[o]),l.up.copy(this._cubeUps[o]),l.lookAt(B),l.updateMatrixWorld(),g.makeTranslation(-w.x,-w.y,-w.z),L.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),this._frustum.setFromProjectionMatrix(L)}}),By.prototype=dt(pt(zo.prototype),{constructor:By,isPointLight:!0,copy:function(e){return zo.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),vv.prototype=dt(pt(ye.prototype),{constructor:vv,isOrthographicCamera:!0,copy:function(e,o){return ye.prototype.copy.call(this,e,o),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:dt({},e.view),this},setViewOffset:function(e,o,l,g,w,B){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=o,this.view.offsetX=l,this.view.offsetY=g,this.view.width=w,this.view.height=B,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),l=(this.right+this.left)/2,g=(this.top+this.bottom)/2,w=l-e;l+=e,e=g+o,o=g-o,this.view!==null&&this.view.enabled&&(g=(this.right-this.left)/this.view.fullWidth/this.zoom,o=(this.top-this.bottom)/this.view.fullHeight/this.zoom,w+=g*this.view.offsetX,l=w+g*this.view.width,e-=o*this.view.offsetY,o=e-o*this.view.height),this.projectionMatrix.makeOrthographic(w,l,e,o,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return e=D.prototype.toJSON.call(this,e),e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=dt({},this.view)),e}}),Ey.prototype=dt(pt(Uc.prototype),{constructor:Ey,isDirectionalLightShadow:!0,updateMatrices:function(e){Uc.prototype.updateMatrices.call(this,e)}}),Iy.prototype=dt(pt(zo.prototype),{constructor:Iy,isDirectionalLight:!0,copy:function(e){return zo.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ty.prototype=dt(pt(zo.prototype),{constructor:Ty,isAmbientLight:!0}),Sy.prototype=dt(pt(zo.prototype),{constructor:Sy,isRectAreaLight:!0,copy:function(e){return zo.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){return e=zo.prototype.toJSON.call(this,e),e.object.width=this.width,e.object.height=this.height,e}}),dt(Ly.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var o=0;9>o;o++)this.coefficients[o].copy(e[o]);return this},zero:function(){for(var e=0;9>e;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,o){var l=e.x,g=e.y;e=e.z;var w=this.coefficients;return o.copy(w[0]).multiplyScalar(.282095),o.addScaledVector(w[1],.488603*g),o.addScaledVector(w[2],.488603*e),o.addScaledVector(w[3],.488603*l),o.addScaledVector(w[4],1.092548*l*g),o.addScaledVector(w[5],1.092548*g*e),o.addScaledVector(w[6],.315392*(3*e*e-1)),o.addScaledVector(w[7],1.092548*l*e),o.addScaledVector(w[8],.546274*(l*l-g*g)),o},getIrradianceAt:function(e,o){var l=e.x,g=e.y;e=e.z;var w=this.coefficients;return o.copy(w[0]).multiplyScalar(.886227),o.addScaledVector(w[1],1.023328*g),o.addScaledVector(w[2],1.023328*e),o.addScaledVector(w[3],1.023328*l),o.addScaledVector(w[4],.858086*l*g),o.addScaledVector(w[5],.858086*g*e),o.addScaledVector(w[6],.743125*e*e-.247708),o.addScaledVector(w[7],.858086*l*e),o.addScaledVector(w[8],.429043*(l*l-g*g)),o},add:function(e){for(var o=0;9>o;o++)this.coefficients[o].add(e.coefficients[o]);return this},addScaledSH:function(e,o){for(var l=0;9>l;l++)this.coefficients[l].addScaledVector(e.coefficients[l],o);return this},scale:function(e){for(var o=0;9>o;o++)this.coefficients[o].multiplyScalar(e);return this},lerp:function(e,o){for(var l=0;9>l;l++)this.coefficients[l].lerp(e.coefficients[l],o);return this},equals:function(e){for(var o=0;9>o;o++)if(!this.coefficients[o].equals(e.coefficients[o]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(e,o){o===void 0&&(o=0);for(var l=this.coefficients,g=0;9>g;g++)l[g].fromArray(e,o+3*g);return this},toArray:function(e,o){e===void 0&&(e=[]),o===void 0&&(o=0);for(var l=this.coefficients,g=0;9>g;g++)l[g].toArray(e,o+3*g);return e}}),dt(Ly,{getBasisAt:function(e,o){var l=e.x,g=e.y;e=e.z,o[0]=.282095,o[1]=.488603*g,o[2]=.488603*e,o[3]=.488603*l,o[4]=1.092548*l*g,o[5]=1.092548*g*e,o[6]=.315392*(3*e*e-1),o[7]=1.092548*l*e,o[8]=.546274*(l*l-g*g)}}),kl.prototype=dt(pt(zo.prototype),{constructor:kl,isLightProbe:!0,copy:function(e){return zo.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){return e=zo.prototype.toJSON.call(this,e),e.object.sh=this.sh.toArray(),e}}),Fy.prototype=dt(pt(Ao.prototype),{constructor:Fy,load:function(e,o,l,g){var w=this,B=new bl(w.manager);B.setPath(w.path),B.load(e,function(L){try{o(w.parse(JSON.parse(L)))}catch(z){g?g(z):console.error(z),w.manager.itemError(e)}},l,g)},parse:function(e){function o(z){return l[z]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",z),l[z]}var l=this.textures,g=new lE[e.type];if(e.uuid!==void 0&&(g.uuid=e.uuid),e.name!==void 0&&(g.name=e.name),e.color!==void 0&&g.color.setHex(e.color),e.roughness!==void 0&&(g.roughness=e.roughness),e.metalness!==void 0&&(g.metalness=e.metalness),e.sheen!==void 0&&(g.sheen=new Bt().setHex(e.sheen)),e.emissive!==void 0&&g.emissive.setHex(e.emissive),e.specular!==void 0&&g.specular.setHex(e.specular),e.shininess!==void 0&&(g.shininess=e.shininess),e.clearcoat!==void 0&&(g.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(g.clearcoatRoughness=e.clearcoatRoughness),e.fog!==void 0&&(g.fog=e.fog),e.flatShading!==void 0&&(g.flatShading=e.flatShading),e.blending!==void 0&&(g.blending=e.blending),e.combine!==void 0&&(g.combine=e.combine),e.side!==void 0&&(g.side=e.side),e.opacity!==void 0&&(g.opacity=e.opacity),e.transparent!==void 0&&(g.transparent=e.transparent),e.alphaTest!==void 0&&(g.alphaTest=e.alphaTest),e.depthTest!==void 0&&(g.depthTest=e.depthTest),e.depthWrite!==void 0&&(g.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(g.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(g.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(g.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(g.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(g.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(g.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(g.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(g.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(g.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(g.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(g.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(g.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(g.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(g.rotation=e.rotation),e.linewidth!==1&&(g.linewidth=e.linewidth),e.dashSize!==void 0&&(g.dashSize=e.dashSize),e.gapSize!==void 0&&(g.gapSize=e.gapSize),e.scale!==void 0&&(g.scale=e.scale),e.polygonOffset!==void 0&&(g.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(g.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(g.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(g.skinning=e.skinning),e.morphTargets!==void 0&&(g.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(g.morphNormals=e.morphNormals),e.dithering!==void 0&&(g.dithering=e.dithering),e.vertexTangents!==void 0&&(g.vertexTangents=e.vertexTangents),e.visible!==void 0&&(g.visible=e.visible),e.toneMapped!==void 0&&(g.toneMapped=e.toneMapped),e.userData!==void 0&&(g.userData=e.userData),e.vertexColors!==void 0&&(g.vertexColors=typeof e.vertexColors=="number"?0<e.vertexColors:e.vertexColors),e.uniforms!==void 0)for(var w in e.uniforms){var B=e.uniforms[w];switch(g.uniforms[w]={},B.type){case"t":g.uniforms[w].value=o(B.value);break;case"c":g.uniforms[w].value=new Bt().setHex(B.value);break;case"v2":g.uniforms[w].value=new c().fromArray(B.value);break;case"v3":g.uniforms[w].value=new C().fromArray(B.value);break;case"v4":g.uniforms[w].value=new f().fromArray(B.value);break;case"m3":g.uniforms[w].value=new h().fromArray(B.value);case"m4":g.uniforms[w].value=new I().fromArray(B.value);break;default:g.uniforms[w].value=B.value}}if(e.defines!==void 0&&(g.defines=e.defines),e.vertexShader!==void 0&&(g.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(g.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(var L in e.extensions)g.extensions[L]=e.extensions[L];return e.shading!==void 0&&(g.flatShading=e.shading===1),e.size!==void 0&&(g.size=e.size),e.sizeAttenuation!==void 0&&(g.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(g.map=o(e.map)),e.matcap!==void 0&&(g.matcap=o(e.matcap)),e.alphaMap!==void 0&&(g.alphaMap=o(e.alphaMap)),e.bumpMap!==void 0&&(g.bumpMap=o(e.bumpMap)),e.bumpScale!==void 0&&(g.bumpScale=e.bumpScale),e.normalMap!==void 0&&(g.normalMap=o(e.normalMap)),e.normalMapType!==void 0&&(g.normalMapType=e.normalMapType),e.normalScale!==void 0&&(w=e.normalScale,Array.isArray(w)===!1&&(w=[w,w]),g.normalScale=new c().fromArray(w)),e.displacementMap!==void 0&&(g.displacementMap=o(e.displacementMap)),e.displacementScale!==void 0&&(g.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(g.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(g.roughnessMap=o(e.roughnessMap)),e.metalnessMap!==void 0&&(g.metalnessMap=o(e.metalnessMap)),e.emissiveMap!==void 0&&(g.emissiveMap=o(e.emissiveMap)),e.emissiveIntensity!==void 0&&(g.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(g.specularMap=o(e.specularMap)),e.envMap!==void 0&&(g.envMap=o(e.envMap)),e.envMapIntensity!==void 0&&(g.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(g.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(g.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(g.lightMap=o(e.lightMap)),e.lightMapIntensity!==void 0&&(g.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(g.aoMap=o(e.aoMap)),e.aoMapIntensity!==void 0&&(g.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(g.gradientMap=o(e.gradientMap)),e.clearcoatMap!==void 0&&(g.clearcoatMap=o(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(g.clearcoatRoughnessMap=o(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(g.clearcoatNormalMap=o(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(g.clearcoatNormalScale=new c().fromArray(e.clearcoatNormalScale)),g},setTextures:function(e){return this.textures=e,this}});var pC={decodeText:function(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);for(var o="",l=0,g=e.length;l<g;l++)o+=String.fromCharCode(e[l]);try{return decodeURIComponent(escape(o))}catch(w){return o}},extractUrlBase:function(e){var o=e.lastIndexOf("/");return o===-1?"./":e.substr(0,o+1)}};e1.prototype=dt(pt(yt.prototype),{constructor:e1,isInstancedBufferGeometry:!0,copy:function(e){return yt.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e=yt.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),Ry.prototype=dt(pt(Me.prototype),{constructor:Ry,isInstancedBufferAttribute:!0,copy:function(e){return Me.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=Me.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Py.prototype=dt(pt(Ao.prototype),{constructor:Py,load:function(e,o,l,g){var w=this,B=new bl(w.manager);B.setPath(w.path),B.load(e,function(L){try{o(w.parse(JSON.parse(L)))}catch(z){g?g(z):console.error(z),w.manager.itemError(e)}},l,g)},parse:function(e){var o=e.isInstancedBufferGeometry?new e1:new yt,l=e.data.index;if(l!==void 0){var g=new dC[l.type](l.array);o.setIndex(new Me(g,1))}l=e.data.attributes;for(var w in l){var B=l[w];g=new dC[B.type](B.array),g=new(B.isInstancedBufferAttribute?Ry:Me)(g,B.itemSize,B.normalized),B.name!==void 0&&(g.name=B.name),o.setAttribute(w,g)}var L=e.data.morphAttributes;if(L)for(w in L){var z=L[w],V=[];l=0;for(var j=z.length;l<j;l++)B=z[l],g=new dC[B.type](B.array),g=new Me(g,B.itemSize,B.normalized),B.name!==void 0&&(g.name=B.name),V.push(g);o.morphAttributes[w]=V}if(e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0),w=e.data.groups||e.data.drawcalls||e.data.offsets,w!==void 0)for(l=0,B=w.length;l!==B;++l)g=w[l],o.addGroup(g.start,g.count,g.materialIndex);return l=e.data.boundingSphere,l!==void 0&&(w=new C,l.center!==void 0&&w.fromArray(l.center),o.boundingSphere=new st(w,l.radius)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}});var dC={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};Uy.prototype=dt(pt(Ao.prototype),{constructor:Uy,load:function(e,o,l,g){var w=this,B=this.path===""?pC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||B,B=new bl(w.manager),B.setPath(this.path),B.load(e,function(L){var z=null;try{z=JSON.parse(L)}catch(V){g!==void 0&&g(V),console.error("THREE:ObjectLoader: Can't parse "+e+".",V.message);return}L=z.metadata,L===void 0||L.type===void 0||L.type.toLowerCase()==="geometry"?console.error("THREE.ObjectLoader: Can't load "+e):w.parse(z,o)},l,g)},parse:function(e,o){var l=this.parseShape(e.shapes);l=this.parseGeometries(e.geometries,l);var g=this.parseImages(e.images,function(){o!==void 0&&o(w)});g=this.parseTextures(e.textures,g),g=this.parseMaterials(e.materials,g);var w=this.parseObject(e.object,l,g);return e.animations&&(w.animations=this.parseAnimations(e.animations)),e.images!==void 0&&e.images.length!==0||o===void 0||o(w),w},parseShape:function(e){var o={};if(e!==void 0)for(var l=0,g=e.length;l<g;l++){var w=new yd().fromJSON(e[l]);o[w.uuid]=w}return o},parseGeometries:function(e,o){var l={};if(e!==void 0)for(var g=new Py,w=0,B=e.length;w<B;w++){var L=e[w];switch(L.type){case"PlaneGeometry":case"PlaneBufferGeometry":var z=new VA[L.type](L.width,L.height,L.widthSegments,L.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":z=new VA[L.type](L.width,L.height,L.depth,L.widthSegments,L.heightSegments,L.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":z=new VA[L.type](L.radius,L.segments,L.thetaStart,L.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":z=new VA[L.type](L.radiusTop,L.radiusBottom,L.height,L.radialSegments,L.heightSegments,L.openEnded,L.thetaStart,L.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":z=new VA[L.type](L.radius,L.height,L.radialSegments,L.heightSegments,L.openEnded,L.thetaStart,L.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":z=new VA[L.type](L.radius,L.widthSegments,L.heightSegments,L.phiStart,L.phiLength,L.thetaStart,L.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":z=new VA[L.type](L.radius,L.detail);break;case"RingGeometry":case"RingBufferGeometry":z=new VA[L.type](L.innerRadius,L.outerRadius,L.thetaSegments,L.phiSegments,L.thetaStart,L.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":z=new VA[L.type](L.radius,L.tube,L.radialSegments,L.tubularSegments,L.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":z=new VA[L.type](L.radius,L.tube,L.tubularSegments,L.radialSegments,L.p,L.q);break;case"TubeGeometry":case"TubeBufferGeometry":z=new VA[L.type](new fC[L.path.type]().fromJSON(L.path),L.tubularSegments,L.radius,L.radialSegments,L.closed);break;case"LatheGeometry":case"LatheBufferGeometry":z=new VA[L.type](L.points,L.segments,L.phiStart,L.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":z=new VA[L.type](L.vertices,L.indices,L.radius,L.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":z=[];for(var V=0,j=L.shapes.length;V<j;V++){var et=o[L.shapes[V]];z.push(et)}z=new VA[L.type](z,L.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(z=[],V=0,j=L.shapes.length;V<j;V++)et=o[L.shapes[V]],z.push(et);V=L.options.extrudePath,V!==void 0&&(L.options.extrudePath=new fC[V.type]().fromJSON(V)),z=new VA[L.type](z,L.options);break;case"BufferGeometry":case"InstancedBufferGeometry":z=g.parse(L);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+L.type+'"');continue}z.uuid=L.uuid,L.name!==void 0&&(z.name=L.name),z.isBufferGeometry===!0&&L.userData!==void 0&&(z.userData=L.userData),l[L.uuid]=z}return l},parseMaterials:function(e,o){var l={},g={};if(e!==void 0){var w=new Fy;w.setTextures(o),o=0;for(var B=e.length;o<B;o++){var L=e[o];if(L.type==="MultiMaterial"){for(var z=[],V=0;V<L.materials.length;V++){var j=L.materials[V];l[j.uuid]===void 0&&(l[j.uuid]=w.parse(j)),z.push(l[j.uuid])}g[L.uuid]=z}else l[L.uuid]===void 0&&(l[L.uuid]=w.parse(L)),g[L.uuid]=l[L.uuid]}}return g},parseAnimations:function(e){for(var o=[],l=0;l<e.length;l++){var g=e[l],w=Ql.parse(g);g.uuid!==void 0&&(w.uuid=g.uuid),o.push(w)}return o},parseImages:function(e,o){function l(it){return g.manager.itemStart(it),B.load(it,function(){g.manager.itemEnd(it)},void 0,function(){g.manager.itemError(it),g.manager.itemEnd(it)})}var g=this,w={};if(e!==void 0&&0<e.length){o=new gw(o);var B=new gv(o);B.setCrossOrigin(this.crossOrigin),o=0;for(var L=e.length;o<L;o++){var z=e[o],V=z.url;if(Array.isArray(V)){w[z.uuid]=[];for(var j=0,et=V.length;j<et;j++){var tt=V[j];tt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(tt)?tt:g.resourcePath+tt,w[z.uuid].push(l(tt))}}else tt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(z.url)?z.url:g.resourcePath+z.url,w[z.uuid]=l(tt)}}return w},parseTextures:function(e,o){function l(V,j){return typeof V=="number"?V:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",V),j[V])}var g={};if(e!==void 0)for(var w=0,B=e.length;w<B;w++){var L=e[w];L.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',L.uuid),o[L.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",L.image);var z=Array.isArray(o[L.image])?new Nl(o[L.image]):new d(o[L.image]);z.needsUpdate=!0,z.uuid=L.uuid,L.name!==void 0&&(z.name=L.name),L.mapping!==void 0&&(z.mapping=l(L.mapping,hE)),L.offset!==void 0&&z.offset.fromArray(L.offset),L.repeat!==void 0&&z.repeat.fromArray(L.repeat),L.center!==void 0&&z.center.fromArray(L.center),L.rotation!==void 0&&(z.rotation=L.rotation),L.wrap!==void 0&&(z.wrapS=l(L.wrap[0],DM),z.wrapT=l(L.wrap[1],DM)),L.format!==void 0&&(z.format=L.format),L.type!==void 0&&(z.type=L.type),L.encoding!==void 0&&(z.encoding=L.encoding),L.minFilter!==void 0&&(z.minFilter=l(L.minFilter,OM)),L.magFilter!==void 0&&(z.magFilter=l(L.magFilter,OM)),L.anisotropy!==void 0&&(z.anisotropy=L.anisotropy),L.flipY!==void 0&&(z.flipY=L.flipY),L.premultiplyAlpha!==void 0&&(z.premultiplyAlpha=L.premultiplyAlpha),L.unpackAlignment!==void 0&&(z.unpackAlignment=L.unpackAlignment),g[L.uuid]=z}return g},parseObject:function(e,o,l){function g(j){return o[j]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",j),o[j]}function w(j){if(j!==void 0){if(Array.isArray(j)){for(var et=[],tt=0,it=j.length;tt<it;tt++){var rt=j[tt];l[rt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",rt),et.push(l[rt])}return et}return l[j]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",j),l[j]}}switch(e.type){case"Scene":var B=new K;e.background!==void 0&&$p(e.background)&&(B.background=new Bt(e.background)),e.fog!==void 0&&(e.fog.type==="Fog"?B.fog=new iy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(B.fog=new ny(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":B=new He(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(B.focus=e.focus),e.zoom!==void 0&&(B.zoom=e.zoom),e.filmGauge!==void 0&&(B.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(B.filmOffset=e.filmOffset),e.view!==void 0&&(B.view=dt({},e.view));break;case"OrthographicCamera":B=new vv(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(B.zoom=e.zoom),e.view!==void 0&&(B.view=dt({},e.view));break;case"AmbientLight":B=new Ty(e.color,e.intensity);break;case"DirectionalLight":B=new Iy(e.color,e.intensity);break;case"PointLight":B=new By(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":B=new Sy(e.color,e.intensity,e.width,e.height);break;case"SpotLight":B=new _y(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":B=new Cy(e.color,e.groundColor,e.intensity);break;case"LightProbe":B=new kl().fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":B=g(e.geometry);var L=w(e.material);B=new Dt(B,L);break;case"InstancedMesh":B=g(e.geometry),L=w(e.material);var z=e.instanceMatrix;B=new Ay(B,L,e.count),B.instanceMatrix=new Me(new Float32Array(z.array),16);break;case"LOD":B=new S0;break;case"Line":B=new ju(g(e.geometry),w(e.material),e.mode);break;case"LineLoop":B=new uy(g(e.geometry),w(e.material));break;case"LineSegments":B=new ps(g(e.geometry),w(e.material));break;case"PointCloud":case"Points":B=new $m(g(e.geometry),w(e.material));break;case"Sprite":B=new T0(w(e.material));break;case"Group":B=new qm;break;default:B=new D}if(B.uuid=e.uuid,e.name!==void 0&&(B.name=e.name),e.matrix!==void 0?(B.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(B.matrixAutoUpdate=e.matrixAutoUpdate),B.matrixAutoUpdate&&B.matrix.decompose(B.position,B.quaternion,B.scale)):(e.position!==void 0&&B.position.fromArray(e.position),e.rotation!==void 0&&B.rotation.fromArray(e.rotation),e.quaternion!==void 0&&B.quaternion.fromArray(e.quaternion),e.scale!==void 0&&B.scale.fromArray(e.scale)),e.castShadow!==void 0&&(B.castShadow=e.castShadow),e.receiveShadow!==void 0&&(B.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(B.shadow.bias=e.shadow.bias),e.shadow.radius!==void 0&&(B.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&B.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(B.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(B.visible=e.visible),e.frustumCulled!==void 0&&(B.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(B.renderOrder=e.renderOrder),e.userData!==void 0&&(B.userData=e.userData),e.layers!==void 0&&(B.layers.mask=e.layers),e.children!==void 0)for(z=e.children,L=0;L<z.length;L++)B.add(this.parseObject(z[L],o,l));if(e.type==="LOD")for(e.autoUpdate!==void 0&&(B.autoUpdate=e.autoUpdate),e=e.levels,z=0;z<e.length;z++){L=e[z];var V=B.getObjectByProperty("uuid",L.object);V!==void 0&&B.addLevel(V,L.distance)}return B}});var hE={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},DM={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},OM={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};ww.prototype=dt(pt(Ao.prototype),{constructor:ww,setOptions:function(e){return this.options=e,this},load:function(e,o,l,g){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var w=this,B=zg.get(e);if(B!==void 0)return w.manager.itemStart(e),setTimeout(function(){o&&o(B),w.manager.itemEnd(e)},0),B;fetch(e).then(function(L){return L.blob()}).then(function(L){return w.options===void 0?createImageBitmap(L):createImageBitmap(L,w.options)}).then(function(L){zg.add(e,L),o&&o(L),w.manager.itemEnd(e)}).catch(function(L){g&&g(L),w.manager.itemError(e),w.manager.itemEnd(e)}),w.manager.itemStart(e)}}),dt(Cw.prototype,{moveTo:function(e,o){return this.currentPath=new Lh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,o),this},lineTo:function(e,o){return this.currentPath.lineTo(e,o),this},quadraticCurveTo:function(e,o,l,g){return this.currentPath.quadraticCurveTo(e,o,l,g),this},bezierCurveTo:function(e,o,l,g,w,B){return this.currentPath.bezierCurveTo(e,o,l,g,w,B),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,o){function l(Vt){for(var re=[],qt=0,de=Vt.length;qt<de;qt++){var oe=Vt[qt],_e=new yd;_e.curves=oe.curves,re.push(_e)}return re}function g(Vt,re){for(var qt=re.length,de=!1,oe=qt-1,_e=0;_e<qt;oe=_e++){var ee=re[oe],De=re[_e],Ke=De.x-ee.x,Be=De.y-ee.y;if(Math.abs(Be)>No){if(0>Be&&(ee=re[_e],Ke=-Ke,De=re[oe],Be=-Be),!(Vt.y<ee.y||Vt.y>De.y))if(Vt.y===ee.y){if(Vt.x===ee.x)return!0}else{if(oe=Be*(Vt.x-ee.x)-Ke*(Vt.y-ee.y),oe===0)return!0;0>oe||(de=!de)}}else if(Vt.y===ee.y&&(De.x<=Vt.x&&Vt.x<=ee.x||ee.x<=Vt.x&&Vt.x<=De.x))return!0}return de}var w=Zf.isClockWise,B=this.subPaths;if(B.length===0)return[];if(o===!0)return l(B);if(o=[],B.length===1){var L=B[0],z=new yd;return z.curves=L.curves,o.push(z),o}var V=!w(B[0].getPoints());V=e?!V:V,z=[];var j=[],et=[],tt=0;j[tt]=void 0,et[tt]=[];for(var it=0,rt=B.length;it<rt;it++){L=B[it];var At=L.getPoints(),mt=w(At);(mt=e?!mt:mt)?(!V&&j[tt]&&tt++,j[tt]={s:new yd,p:At},j[tt].s.curves=L.curves,V&&tt++,et[tt]=[]):et[tt].push({h:L,p:At[0]})}if(!j[0])return l(B);if(1<j.length){for(it=!1,e=[],w=0,B=j.length;w<B;w++)z[w]=[];for(w=0,B=j.length;w<B;w++)for(L=et[w],mt=0;mt<L.length;mt++){for(V=L[mt],tt=!0,At=0;At<j.length;At++)g(V.p,j[At].p)&&(w!==At&&e.push({froms:w,tos:At,hole:mt}),tt?(tt=!1,z[At].push(V)):it=!0);tt&&z[w].push(V)}0<e.length&&(it||(et=z))}for(it=0,w=j.length;it<w;it++)for(z=j[it].s,o.push(z),e=et[it],B=0,L=e.length;B<L;B++)z.holes.push(e[B].h);return o}}),dt(Mw.prototype,{isFont:!0,generateShapes:function(e,o){o===void 0&&(o=100);var l=[],g=o;o=this.data;var w=fc?fc(e):String(e).split("");g/=o.resolution;var B=(o.boundingBox.yMax-o.boundingBox.yMin+o.underlineThickness)*g;e=[];for(var L=0,z=0,V=0;V<w.length;V++){var j=w[V];if(j===`
`)L=0,z-=B;else{var et=j;j=g;var tt=L,it=z,rt=o,At=rt.glyphs[et]||rt.glyphs["?"];if(At){if(et=new Cw,At.o){rt=At._cachedOutline||(At._cachedOutline=At.o.split(" "));for(var mt=0,Vt=rt.length;mt<Vt;)switch(rt[mt++]){case"m":var re=rt[mt++]*j+tt,qt=rt[mt++]*j+it;et.moveTo(re,qt);break;case"l":re=rt[mt++]*j+tt,qt=rt[mt++]*j+it,et.lineTo(re,qt);break;case"q":var de=rt[mt++]*j+tt,oe=rt[mt++]*j+it,_e=rt[mt++]*j+tt,ee=rt[mt++]*j+it;et.quadraticCurveTo(_e,ee,de,oe);break;case"b":de=rt[mt++]*j+tt,oe=rt[mt++]*j+it,_e=rt[mt++]*j+tt,ee=rt[mt++]*j+it,re=rt[mt++]*j+tt,qt=rt[mt++]*j+it,et.bezierCurveTo(_e,ee,re,qt,de,oe)}}j={offsetX:At.ha*j,path:et}}else console.error('THREE.Font: character "'+et+'" does not exists in font family '+rt.familyName+"."),j=void 0;L+=j.offsetX,e.push(j.path)}}for(o=0,w=e.length;o<w;o++)Array.prototype.push.apply(l,e[o].toShapes());return l}}),_w.prototype=dt(pt(Ao.prototype),{constructor:_w,load:function(e,o,l,g){var w=this,B=new bl(this.manager);B.setPath(this.path),B.load(e,function(L){try{var z=JSON.parse(L)}catch(V){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),z=JSON.parse(L.substring(65,L.length-2))}L=w.parse(z),o&&o(L)},l,g)},parse:function(e){return new Mw(e)}});var ux,gC={getContext:function(){return ux===void 0&&(ux=new(window.AudioContext||window.webkitAudioContext)),ux},setContext:function(e){ux=e}};Dy.prototype=dt(pt(Ao.prototype),{constructor:Dy,load:function(e,o,l,g){var w=this,B=new bl(w.manager);B.setResponseType("arraybuffer"),B.setPath(w.path),B.load(e,function(L){try{var z=L.slice(0);gC.getContext().decodeAudioData(z,function(V){o(V)})}catch(V){g?g(V):console.error(V),w.manager.itemError(e)}},l,g)}}),Bw.prototype=dt(pt(kl.prototype),{constructor:Bw,isHemisphereLightProbe:!0,copy:function(e){return kl.prototype.copy.call(this,e),this},toJSON:function(e){return kl.prototype.toJSON.call(this,e)}}),Ew.prototype=dt(pt(kl.prototype),{constructor:Ew,isAmbientLightProbe:!0,copy:function(e){return kl.prototype.copy.call(this,e),this},toJSON:function(e){return kl.prototype.toJSON.call(this,e)}});var HM=new I,NM=new I;dt(V2.prototype,{update:function(e){var o=this._cache;if(o.focus!==e.focus||o.fov!==e.fov||o.aspect!==e.aspect*this.aspect||o.near!==e.near||o.far!==e.far||o.zoom!==e.zoom||o.eyeSep!==this.eyeSep){o.focus=e.focus,o.fov=e.fov,o.aspect=e.aspect*this.aspect,o.near=e.near,o.far=e.far,o.zoom=e.zoom,o.eyeSep=this.eyeSep;var l=e.projectionMatrix.clone(),g=o.eyeSep/2,w=g*o.near/o.focus,B=o.near*Math.tan(ii.DEG2RAD*o.fov*.5)/o.zoom;NM.elements[12]=-g,HM.elements[12]=g,g=-B*o.aspect+w;var L=B*o.aspect+w;l.elements[0]=2*o.near/(L-g),l.elements[8]=(L+g)/(L-g),this.cameraL.projectionMatrix.copy(l),g=-B*o.aspect-w,L=B*o.aspect-w,l.elements[0]=2*o.near/(L-g),l.elements[8]=(L+g)/(L-g),this.cameraR.projectionMatrix.copy(l)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(NM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(HM)}}),dt(Iw.prototype,{start:function(){this.oldTime=this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var o=(typeof performance=="undefined"?Date:performance).now();e=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=e}return e}});var Qg=new C,zM=new N,cE=new C,bg=new C;Tw.prototype=dt(pt(D.prototype),{constructor:Tw,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){D.prototype.updateMatrixWorld.call(this,e),e=this.context.listener;var o=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qg,zM,cE),bg.set(0,0,-1).applyQuaternion(zM),e.positionX){var l=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Qg.x,l),e.positionY.linearRampToValueAtTime(Qg.y,l),e.positionZ.linearRampToValueAtTime(Qg.z,l),e.forwardX.linearRampToValueAtTime(bg.x,l),e.forwardY.linearRampToValueAtTime(bg.y,l),e.forwardZ.linearRampToValueAtTime(bg.z,l),e.upX.linearRampToValueAtTime(o.x,l),e.upY.linearRampToValueAtTime(o.y,l),e.upZ.linearRampToValueAtTime(o.z,l)}else e.setPosition(Qg.x,Qg.y,Qg.z),e.setOrientation(bg.x,bg.y,bg.z,o.x,o.y,o.z)}}),yv.prototype=dt(pt(D.prototype),{constructor:yv,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(e===void 0&&(e=0),this.isPlaying===!0)console.warn("THREE.Audio: Audio is already playing.");else if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+e,e=this.context.createBufferSource(),e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,o=this.filters.length;e<o;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,o=this.filters.length;e<o;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(this.hasPlaybackControl===!1)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var kg=new C,QM=new N,fE=new C,Gg=new C;Sw.prototype=dt(pt(yv.prototype),{constructor:Sw,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,o,l){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=o,this.panner.coneOuterGain=l,this},updateMatrixWorld:function(e){if(D.prototype.updateMatrixWorld.call(this,e),this.hasPlaybackControl!==!0||this.isPlaying!==!1)if(this.matrixWorld.decompose(kg,QM,fE),Gg.set(0,0,1).applyQuaternion(QM),e=this.panner,e.positionX){var o=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(kg.x,o),e.positionY.linearRampToValueAtTime(kg.y,o),e.positionZ.linearRampToValueAtTime(kg.z,o),e.orientationX.linearRampToValueAtTime(Gg.x,o),e.orientationY.linearRampToValueAtTime(Gg.y,o),e.orientationZ.linearRampToValueAtTime(Gg.z,o)}else e.setPosition(kg.x,kg.y,kg.z),e.setOrientation(Gg.x,Gg.y,Gg.z)}}),dt(Lw.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,o=this.getFrequencyData(),l=0;l<o.length;l++)e+=o[l];return e/o.length}}),dt(Fw.prototype,{accumulate:function(e,o){var l=this.buffer,g=this.valueSize;e=e*g+g;var w=this.cumulativeWeight;if(w===0){for(w=0;w!==g;++w)l[e+w]=l[w];w=o}else w+=o,this._mixBufferRegion(l,e,0,o/w,g);this.cumulativeWeight=w},accumulateAdditive:function(e){var o=this.buffer,l=this.valueSize,g=l*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(o,g,0,e,l),this.cumulativeWeightAdditive+=e},apply:function(e){var o=this.valueSize,l=this.buffer;e=e*o+o;var g=this.cumulativeWeight,w=this.cumulativeWeightAdditive,B=this.binding;for(this.cumulativeWeightAdditive=this.cumulativeWeight=0,1>g&&this._mixBufferRegion(l,e,o*this._origIndex,1-g,o),0<w&&this._mixBufferRegionAdditive(l,e,this._addIndex*o,1,o),g=o,w=o+o;g!==w;++g)if(l[g]!==l[g+o]){B.setValue(l,e);break}},saveOriginalState:function(){var e=this.buffer,o=this.valueSize,l=o*this._origIndex;this.binding.getValue(e,l);for(var g=o;g!==l;++g)e[g]=e[l+g%o];this._setIdentity(),this.cumulativeWeightAdditive=this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,o=e+this.valueSize;e<o;e++)this.buffer[e]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,o=this._addIndex*this.valueSize,l=0;l<this.valueSize;l++)this.buffer[o+l]=this.buffer[e+l]},_select:function(e,o,l,g,w){if(.5<=g)for(g=0;g!==w;++g)e[o+g]=e[l+g]},_slerp:function(e,o,l,g){N.slerpFlat(e,o,e,o,e,l,g)},_slerpAdditive:function(e,o,l,g,w){w*=this._workIndex,N.multiplyQuaternionsFlat(e,w,e,o,e,l),N.slerpFlat(e,o,e,o,e,w,g)},_lerp:function(e,o,l,g,w){for(var B=1-g,L=0;L!==w;++L){var z=o+L;e[z]=e[z]*B+e[l+L]*g}},_lerpAdditive:function(e,o,l,g,w){for(var B=0;B!==w;++B){var L=o+B;e[L]+=e[l+B]*g}}});var pE=/[\[\]\.:\/]/g,dE="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",gE=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),mE=/(WCOD+)?/.source.replace("WCOD",dE),vE=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),yE=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),xE=new RegExp("^"+gE+mE+vE+yE+"$"),wE=["material","materials","bones"];dt(W2.prototype,{getValue:function(e,o){this.bind();var l=this._bindings[this._targetGroup.nCachedObjects_];l!==void 0&&l.getValue(e,o)},setValue:function(e,o){for(var l=this._bindings,g=this._targetGroup.nCachedObjects_,w=l.length;g!==w;++g)l[g].setValue(e,o)},bind:function(){for(var e=this._bindings,o=this._targetGroup.nCachedObjects_,l=e.length;o!==l;++o)e[o].bind()},unbind:function(){for(var e=this._bindings,o=this._targetGroup.nCachedObjects_,l=e.length;o!==l;++o)e[o].unbind()}}),dt(wA,{Composite:W2,create:function(e,o,l){return e&&e.isAnimationObjectGroup?new wA.Composite(e,o,l):new wA(e,o,l)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(pE,"")},parseTrackName:function(e){var o=xE.exec(e);if(!o)throw Error("PropertyBinding: Cannot parse trackName: "+e);o={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]};var l=o.nodeName&&o.nodeName.lastIndexOf(".");if(l!==void 0&&l!==-1){var g=o.nodeName.substring(l+1);wE.indexOf(g)!==-1&&(o.nodeName=o.nodeName.substring(0,l),o.objectName=g)}if(o.propertyName===null||o.propertyName.length===0)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return o},findNode:function(e,o){if(!o||o===""||o==="."||o===-1||o===e.name||o===e.uuid)return e;if(e.skeleton){var l=e.skeleton.getBoneByName(o);if(l!==void 0)return l}return e.children&&(e=function g(w){for(var B=0;B<w.length;B++){var L=w[B];if(L.name===o||L.uuid===o||(L=g(L.children)))return L}return null}(e.children))?e:null}}),dt(wA.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,o){e[o]=this.node[this.propertyName]},function(e,o){for(var l=this.resolvedProperty,g=0,w=l.length;g!==w;++g)e[o++]=l[g]},function(e,o){e[o]=this.resolvedProperty[this.propertyIndex]},function(e,o){this.resolvedProperty.toArray(e,o)}],SetterByBindingTypeAndVersioning:[[function(e,o){this.targetObject[this.propertyName]=e[o]},function(e,o){this.targetObject[this.propertyName]=e[o],this.targetObject.needsUpdate=!0},function(e,o){this.targetObject[this.propertyName]=e[o],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,o){for(var l=this.resolvedProperty,g=0,w=l.length;g!==w;++g)l[g]=e[o++]},function(e,o){for(var l=this.resolvedProperty,g=0,w=l.length;g!==w;++g)l[g]=e[o++];this.targetObject.needsUpdate=!0},function(e,o){for(var l=this.resolvedProperty,g=0,w=l.length;g!==w;++g)l[g]=e[o++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,o){this.resolvedProperty[this.propertyIndex]=e[o]},function(e,o){this.resolvedProperty[this.propertyIndex]=e[o],this.targetObject.needsUpdate=!0},function(e,o){this.resolvedProperty[this.propertyIndex]=e[o],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,o){this.resolvedProperty.fromArray(e,o)},function(e,o){this.resolvedProperty.fromArray(e,o),this.targetObject.needsUpdate=!0},function(e,o){this.resolvedProperty.fromArray(e,o),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,o){this.bind(),this.getValue(e,o)},setValue:function(e,o){this.bind(),this.setValue(e,o)},bind:function(){var e=this.node,o=this.parsedPath,l=o.objectName,g=o.propertyName,w=o.propertyIndex;if(e||(this.node=e=wA.findNode(this.rootNode,o.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(l){var B=o.objectIndex;switch(l){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}for(e=e.skeleton.bones,l=0;l<e.length;l++)if(e[l].name===B){B=l;break}break;default:if(e[l]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[l]}if(B!==void 0){if(e[B]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[B]}}if(B=e[g],B===void 0)console.error("THREE.PropertyBinding: Trying to update property for track: "+o.nodeName+"."+g+" but it wasn't found.",e);else{if(o=this.Versioning.None,this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate),l=this.BindingType.Direct,w!==void 0){if(g==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[w]!==void 0&&(w=e.morphTargetDictionary[w])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=B,this.propertyIndex=w}else B.fromArray!==void 0&&B.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=B):Array.isArray(B)?(l=this.BindingType.EntireArray,this.resolvedProperty=B):this.propertyName=g;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),dt(wA.prototype,{_getValue_unbound:wA.prototype.getValue,_setValue_unbound:wA.prototype.setValue}),dt(j2.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,o=e.length,l=this.nCachedObjects_,g=this._indicesByUUID,w=this._paths,B=this._parsedPaths,L=this._bindings,z=L.length,V=void 0,j=0,et=arguments.length;j!==et;++j){var tt=arguments[j],it=tt.uuid,rt=g[it];if(rt===void 0){rt=o++,g[it]=rt,e.push(tt),it=0;for(var At=z;it!==At;++it)L[it].push(new wA(tt,w[it],B[it]))}else if(rt<l){V=e[rt];var mt=--l;for(At=e[mt],g[At.uuid]=rt,e[rt]=At,g[it]=mt,e[mt]=tt,it=0,At=z;it!==At;++it){var Vt=L[it],re=Vt[rt];Vt[rt]=Vt[mt],re===void 0&&(re=new wA(tt,w[it],B[it])),Vt[mt]=re}}else e[rt]!==V&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){for(var e=this._objects,o=this.nCachedObjects_,l=this._indicesByUUID,g=this._bindings,w=g.length,B=0,L=arguments.length;B!==L;++B){var z=arguments[B],V=z.uuid,j=l[V];if(j!==void 0&&j>=o){var et=o++,tt=e[et];for(l[tt.uuid]=j,e[j]=tt,l[V]=et,e[et]=z,z=0,V=w;z!==V;++z){tt=g[z];var it=tt[j];tt[j]=tt[et],tt[et]=it}}}this.nCachedObjects_=o},uncache:function(){for(var e=this._objects,o=e.length,l=this.nCachedObjects_,g=this._indicesByUUID,w=this._bindings,B=w.length,L=0,z=arguments.length;L!==z;++L){var V=arguments[L].uuid,j=g[V];if(j!==void 0)if(delete g[V],j<l){V=--l;var et=e[V],tt=--o,it=e[tt];for(g[et.uuid]=j,e[j]=et,g[it.uuid]=V,e[V]=it,e.pop(),et=0,it=B;et!==it;++et){var rt=w[et],At=rt[tt];rt[j]=rt[V],rt[V]=At,rt.pop()}}else for(tt=--o,it=e[tt],g[it.uuid]=j,e[j]=it,e.pop(),et=0,it=B;et!==it;++et)rt=w[et],rt[j]=rt[tt],rt.pop()}this.nCachedObjects_=l},subscribe_:function(e,o){var l=this._bindingsIndicesByPath,g=l[e],w=this._bindings;if(g!==void 0)return w[g];var B=this._paths,L=this._parsedPaths,z=this._objects,V=this.nCachedObjects_,j=Array(z.length);for(g=w.length,l[e]=g,B.push(e),L.push(o),w.push(j),l=V,g=z.length;l!==g;++l)j[l]=new wA(z[l],e,o);return j},unsubscribe_:function(e){var o=this._bindingsIndicesByPath,l=o[e];if(l!==void 0){var g=this._paths,w=this._parsedPaths,B=this._bindings,L=B.length-1,z=B[L];o[e[L]]=l,B[l]=z,B.pop(),w[l]=w[L],w.pop(),g[l]=g[L],g.pop()}}}),dt(X2.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,o){return this.loop=e,this.repetitions=o,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,o,l){if(e.fadeOut(o),this.fadeIn(o),l){l=this._clip.duration;var g=e._clip.duration,w=l/g;e.warp(1,g/l,o),this.warp(w,1,o)}return this},crossFadeTo:function(e,o,l){return e.crossFadeFrom(this,o,l)},stopFading:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,o,l){var g=this._mixer,w=g.time,B=this._timeScaleInterpolant,L=this.timeScale;return B===null&&(this._timeScaleInterpolant=B=g._lendControlInterpolant()),g=B.parameterPositions,B=B.sampleValues,g[0]=w,g[1]=w+l,B[0]=e/L,B[1]=o/L,this},stopWarping:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,o,l,g){if(this.enabled){var w=this._startTime;if(w!==null){if(o=(e-w)*l,0>o||l===0)return;this._startTime=null,o*=l}if(o*=this._updateTimeScale(e),l=this._updateTime(o),e=this._updateWeight(e),0<e)switch(o=this._interpolants,w=this._propertyBindings,this.blendMode){case 2501:for(var B=0,L=o.length;B!==L;++B)o[B].evaluate(l),w[B].accumulateAdditive(e);break;default:for(B=0,L=o.length;B!==L;++B)o[B].evaluate(l),w[B].accumulate(g,e)}}else this._updateWeight(e)},_updateWeight:function(e){var o=0;if(this.enabled){o=this.weight;var l=this._weightInterpolant;if(l!==null){var g=l.evaluate(e)[0];o*=g,e>l.parameterPositions[1]&&(this.stopFading(),g===0&&(this.enabled=!1))}}return this._effectiveWeight=o},_updateTimeScale:function(e){var o=0;if(!this.paused){o=this.timeScale;var l=this._timeScaleInterpolant;if(l!==null){var g=l.evaluate(e)[0];o*=g,e>l.parameterPositions[1]&&(this.stopWarping(),o===0?this.paused=!0:this.timeScale=o)}}return this._effectiveTimeScale=o},_updateTime:function(e){var o=this.time+e,l=this._clip.duration,g=this.loop,w=this._loopCount,B=g===2202;if(e===0)return w===-1?o:B&&(w&1)==1?l-o:o;if(g===2200)t:{if(w===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1)),o>=l)o=l;else if(0>o)o=0;else{this.time=o;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}else{if(w===-1&&(0<=e?(w=0,this._setEndings(!0,this.repetitions===0,B)):this._setEndings(this.repetitions===0,!0,B)),o>=l||0>o){g=Math.floor(o/l),o-=l*g,w+=Math.abs(g);var L=this.repetitions-w;0>=L?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o=0<e?l:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(L===1?(e=0>e,this._setEndings(e,!e,B)):this._setEndings(!1,!1,B),this._loopCount=w,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:g}))}else this.time=o;if(B&&(w&1)==1)return l-o}return o},_setEndings:function(e,o,l){var g=this._interpolantSettings;l?(g.endingStart=2401,g.endingEnd=2401):(g.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,g.endingEnd=o?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,o,l){var g=this._mixer,w=g.time,B=this._weightInterpolant;return B===null&&(this._weightInterpolant=B=g._lendControlInterpolant()),g=B.parameterPositions,B=B.sampleValues,g[0]=w,B[0]=o,g[1]=w+e,B[1]=l,this}}),Rw.prototype=dt(pt(s.prototype),{constructor:Rw,_bindAction:function(e,o){var l=e._localRoot||this._root,g=e._clip.tracks,w=g.length,B=e._propertyBindings;e=e._interpolants;var L=l.uuid,z=this._bindingsByRootAndName,V=z[L];for(V===void 0&&(V={},z[L]=V),z=0;z!==w;++z){var j=g[z],et=j.name,tt=V[et];if(tt===void 0){if(tt=B[z],tt!==void 0){tt._cacheIndex===null&&(++tt.referenceCount,this._addInactiveBinding(tt,L,et));continue}tt=new Fw(wA.create(l,et,o&&o._propertyBindings[z].binding.parsedPath),j.ValueTypeName,j.getValueSize()),++tt.referenceCount,this._addInactiveBinding(tt,L,et)}B[z]=tt,e[z].resultBuffer=tt.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var o=(e._localRoot||this._root).uuid,l=e._clip.uuid,g=this._actionsByClip[l];this._bindAction(e,g&&g.knownActions[0]),this._addInactiveAction(e,l,o)}for(o=e._propertyBindings,l=0,g=o.length;l!==g;++l){var w=o[l];w.useCount++==0&&(this._lendBinding(w),w.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var o=e._propertyBindings,l=0,g=o.length;l!==g;++l){var w=o[l];--w.useCount==0&&(w.restoreOriginalState(),this._takeBackBinding(w))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return e=e._cacheIndex,e!==null&&e<this._nActiveActions},_addInactiveAction:function(e,o,l){var g=this._actions,w=this._actionsByClip,B=w[o];B===void 0?(B={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,w[o]=B):(o=B.knownActions,e._byClipCacheIndex=o.length,o.push(e)),e._cacheIndex=g.length,g.push(e),B.actionByRoot[l]=e},_removeInactiveAction:function(e){var o=this._actions,l=o[o.length-1],g=e._cacheIndex;l._cacheIndex=g,o[g]=l,o.pop(),e._cacheIndex=null,o=e._clip.uuid,l=this._actionsByClip,g=l[o];var w=g.knownActions,B=w[w.length-1],L=e._byClipCacheIndex;B._byClipCacheIndex=L,w[L]=B,w.pop(),e._byClipCacheIndex=null,delete g.actionByRoot[(e._localRoot||this._root).uuid],w.length===0&&delete l[o],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){e=e._propertyBindings;for(var o=0,l=e.length;o!==l;++o){var g=e[o];--g.referenceCount==0&&this._removeInactiveBinding(g)}},_lendAction:function(e){var o=this._actions,l=e._cacheIndex,g=this._nActiveActions++,w=o[g];e._cacheIndex=g,o[g]=e,w._cacheIndex=l,o[l]=w},_takeBackAction:function(e){var o=this._actions,l=e._cacheIndex,g=--this._nActiveActions,w=o[g];e._cacheIndex=g,o[g]=e,w._cacheIndex=l,o[l]=w},_addInactiveBinding:function(e,o,l){var g=this._bindingsByRootAndName,w=g[o],B=this._bindings;w===void 0&&(w={},g[o]=w),w[l]=e,e._cacheIndex=B.length,B.push(e)},_removeInactiveBinding:function(e){var o=this._bindings,l=e.binding,g=l.rootNode.uuid;l=l.path;var w=this._bindingsByRootAndName,B=w[g],L=o[o.length-1];e=e._cacheIndex,L._cacheIndex=e,o[e]=L,o.pop(),delete B[l],Xi(B).length===0&&delete w[g]},_lendBinding:function(e){var o=this._bindings,l=e._cacheIndex,g=this._nActiveBindings++,w=o[g];e._cacheIndex=g,o[g]=e,w._cacheIndex=l,o[l]=w},_takeBackBinding:function(e){var o=this._bindings,l=e._cacheIndex,g=--this._nActiveBindings,w=o[g];e._cacheIndex=g,o[g]=e,w._cacheIndex=l,o[l]=w},_lendControlInterpolant:function(){var e=this._controlInterpolants,o=this._nActiveControlInterpolants++,l=e[o];return l===void 0&&(l=new J0(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),l.__cacheIndex=o,e[o]=l),l},_takeBackControlInterpolant:function(e){var o=this._controlInterpolants,l=e.__cacheIndex,g=--this._nActiveControlInterpolants,w=o[g];e.__cacheIndex=g,o[g]=e,w.__cacheIndex=l,o[l]=w},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,o,l){var g=o||this._root,w=g.uuid;g=typeof e=="string"?Ql.findByName(g,e):e,e=g!==null?g.uuid:e;var B=this._actionsByClip[e],L=null;if(l===void 0&&(l=g!==null?g.blendMode:2500),B!==void 0){if(L=B.actionByRoot[w],L!==void 0&&L.blendMode===l)return L;L=B.knownActions[0],g===null&&(g=L._clip)}return g===null?null:(o=new X2(this,g,o,l),this._bindAction(o,L),this._addInactiveAction(o,e,w),o)},existingAction:function(e,o){var l=o||this._root;return o=l.uuid,l=typeof e=="string"?Ql.findByName(l,e):e,e=this._actionsByClip[l?l.uuid:e],e!==void 0&&e.actionByRoot[o]||null},stopAllAction:function(){for(var e=this._actions,o=this._nActiveActions-1;0<=o;--o)e[o].stop();return this},update:function(e){e*=this.timeScale;for(var o=this._actions,l=this._nActiveActions,g=this.time+=e,w=wc(e),B=this._accuIndex^=1,L=0;L!==l;++L)o[L]._update(g,e,w,B);for(e=this._bindings,o=this._nActiveBindings,L=0;L!==o;++L)e[L].apply(B);return this},setTime:function(e){for(var o=this.time=0;o<this._actions.length;o++)this._actions[o].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var o=this._actions;e=e.uuid;var l=this._actionsByClip,g=l[e];if(g!==void 0){g=g.knownActions;for(var w=0,B=g.length;w!==B;++w){var L=g[w];this._deactivateAction(L);var z=L._cacheIndex,V=o[o.length-1];L._cacheIndex=null,L._byClipCacheIndex=null,V._cacheIndex=z,o[z]=V,o.pop(),this._removeInactiveBindingsForAction(L)}delete l[e]}},uncacheRoot:function(e){e=e.uuid;var o=this._actionsByClip;for(g in o){var l=o[g].actionByRoot[e];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}var g=this._bindingsByRootAndName[e];if(g!==void 0)for(var w in g)e=g[w],e.restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,o){e=this.existingAction(e,o),e!==null&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),Oy.prototype.clone=function(){return new Oy(this.value.clone===void 0?this.value:this.value.clone())},Pw.prototype=dt(pt(zf.prototype),{constructor:Pw,isInstancedInterleavedBuffer:!0,copy:function(e){return zf.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),dt(Uw.prototype,{set:function(e,o){this.ray.set(e,o)},setFromCamera:function(e,o){o&&o.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(o.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(o).sub(this.ray.origin).normalize(),this.camera=o):o&&o.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(o.near+o.far)/(o.near-o.far)).unproject(o),this.ray.direction.set(0,0,-1).transformDirection(o.matrixWorld),this.camera=o):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,o,l){return l=l||[],Dw(e,this,l,o),l.sort(K2),l},intersectObjects:function(e,o,l){if(l=l||[],Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),l;for(var g=0,w=e.length;g<w;g++)Dw(e[g],this,l,o);return l.sort(K2),l}}),dt(Y2.prototype,{set:function(e,o,l){return this.radius=e,this.phi=o,this.theta=l,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,o,l){return this.radius=Math.sqrt(e*e+o*o+l*l),this.radius===0?this.phi=this.theta=0:(this.theta=Math.atan2(e,l),this.phi=Math.acos(ii.clamp(o/this.radius,-1,1))),this}}),dt(Z2.prototype,{set:function(e,o,l){return this.radius=e,this.theta=o,this.y=l,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,o,l){return this.radius=Math.sqrt(e*e+l*l),this.theta=Math.atan2(e,l),this.y=o,this}});var bM=new c;dt(Ow.prototype,{set:function(e,o){return this.min.copy(e),this.max.copy(o),this},setFromPoints:function(e){this.makeEmpty();for(var o=0,l=e.length;o<l;o++)this.expandByPoint(e[o]);return this},setFromCenterAndSize:function(e,o){return o=bM.copy(o).multiplyScalar(.5),this.min.copy(e).sub(o),this.max.copy(e).add(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new c),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new c),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,o){return o===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),o=new c),o.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,o){return o===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),o=new c),o.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return bM.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var kM=new C,lx=new C;dt(Hw.prototype,{set:function(e,o){return this.start.copy(e),this.end.copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return e===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new C),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return e===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),e=new C),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,o){return o===void 0&&(console.warn("THREE.Line3: .at() target is now required"),o=new C),this.delta(o).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,o){return kM.subVectors(e,this.start),lx.subVectors(this.end,this.start),e=lx.dot(lx),e=lx.dot(kM)/e,o&&(e=ii.clamp(e,0,1)),e},closestPointToPoint:function(e,o,l){return e=this.closestPointToPointParameter(e,o),l===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),l=new C),this.delta(l).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),r1.prototype=pt(D.prototype),r1.prototype.constructor=r1,r1.prototype.isImmediateRenderObject=!0;var GM=new C;xv.prototype=pt(D.prototype),xv.prototype.constructor=xv,xv.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},xv.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,o=e*Math.tan(this.light.angle);this.cone.scale.set(o,o,e),GM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(GM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Td=new C,hx=new I,mC=new I;Ug.prototype=pt(ps.prototype),Ug.prototype.constructor=Ug,Ug.prototype.isSkeletonHelper=!0,Ug.prototype.updateMatrixWorld=function(e){var o=this.bones,l=this.geometry,g=l.getAttribute("position");mC.getInverse(this.root.matrixWorld);for(var w=0,B=0;w<o.length;w++){var L=o[w];L.parent&&L.parent.isBone&&(hx.multiplyMatrices(mC,L.matrixWorld),Td.setFromMatrixPosition(hx),g.setXYZ(B,Td.x,Td.y,Td.z),hx.multiplyMatrices(mC,L.parent.matrixWorld),Td.setFromMatrixPosition(hx),g.setXYZ(B+1,Td.x,Td.y,Td.z),B+=2)}l.getAttribute("position").needsUpdate=!0,D.prototype.updateMatrixWorld.call(this,e)},wv.prototype=pt(Dt.prototype),wv.prototype.constructor=wv,wv.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},wv.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var CE=new C,VM=new Bt,WM=new Bt;Cv.prototype=pt(D.prototype),Cv.prototype.constructor=Cv,Cv.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Cv.prototype.update=function(){var e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var o=e.geometry.getAttribute("color");VM.copy(this.light.color),WM.copy(this.light.groundColor);for(var l=0,g=o.count;l<g;l++){var w=l<g/2?VM:WM;o.setXYZ(l,w.r,w.g,w.b)}o.needsUpdate=!0}e.lookAt(CE.setFromMatrixPosition(this.light.matrixWorld).negate())},Hy.prototype=dt(pt(ps.prototype),{constructor:Hy,copy:function(e){return ps.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return new this.constructor().copy(this)}}),Ny.prototype=pt(ps.prototype),Ny.prototype.constructor=Ny;var jM=new C,cx=new C,XM=new C;Mv.prototype=pt(D.prototype),Mv.prototype.constructor=Mv,Mv.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Mv.prototype.update=function(){jM.setFromMatrixPosition(this.light.matrixWorld),cx.setFromMatrixPosition(this.light.target.matrixWorld),XM.subVectors(cx,jM),this.lightPlane.lookAt(cx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(cx),this.targetLine.scale.z=XM.length()};var fx=new C,Es=new ye;n1.prototype=pt(ps.prototype),n1.prototype.constructor=n1,n1.prototype.update=function(){var e=this.geometry,o=this.pointMap;Es.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),bs("c",o,e,Es,0,0,-1),bs("t",o,e,Es,0,0,1),bs("n1",o,e,Es,-1,-1,-1),bs("n2",o,e,Es,1,-1,-1),bs("n3",o,e,Es,-1,1,-1),bs("n4",o,e,Es,1,1,-1),bs("f1",o,e,Es,-1,-1,1),bs("f2",o,e,Es,1,-1,1),bs("f3",o,e,Es,-1,1,1),bs("f4",o,e,Es,1,1,1),bs("u1",o,e,Es,.7,1.1,-1),bs("u2",o,e,Es,-.7,1.1,-1),bs("u3",o,e,Es,0,2,-1),bs("cf1",o,e,Es,-1,0,1),bs("cf2",o,e,Es,1,0,1),bs("cf3",o,e,Es,0,-1,1),bs("cf4",o,e,Es,0,1,1),bs("cn1",o,e,Es,-1,0,-1),bs("cn2",o,e,Es,1,0,-1),bs("cn3",o,e,Es,0,-1,-1),bs("cn4",o,e,Es,0,1,-1),e.getAttribute("position").needsUpdate=!0};var px=new Z;Gf.prototype=pt(ps.prototype),Gf.prototype.constructor=Gf,Gf.prototype.update=function(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&px.setFromObject(this.object),!px.isEmpty()){e=px.min;var o=px.max,l=this.geometry.attributes.position,g=l.array;g[0]=o.x,g[1]=o.y,g[2]=o.z,g[3]=e.x,g[4]=o.y,g[5]=o.z,g[6]=e.x,g[7]=e.y,g[8]=o.z,g[9]=o.x,g[10]=e.y,g[11]=o.z,g[12]=o.x,g[13]=o.y,g[14]=e.z,g[15]=e.x,g[16]=o.y,g[17]=e.z,g[18]=e.x,g[19]=e.y,g[20]=e.z,g[21]=o.x,g[22]=e.y,g[23]=e.z,l.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Gf.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Gf.prototype.copy=function(e){return ps.prototype.copy.call(this,e),this.object=e.object,this},Gf.prototype.clone=function(){return new this.constructor().copy(this)},i1.prototype=pt(ps.prototype),i1.prototype.constructor=i1,i1.prototype.updateMatrixWorld=function(e){var o=this.box;o.isEmpty()||(o.getCenter(this.position),o.getSize(this.scale),this.scale.multiplyScalar(.5),D.prototype.updateMatrixWorld.call(this,e))},o1.prototype=pt(ju.prototype),o1.prototype.constructor=o1,o1.prototype.updateMatrixWorld=function(e){var o=-this.plane.constant;1e-8>Math.abs(o)&&(o=1e-8),this.scale.set(.5*this.size,.5*this.size,o),this.children[0].material.side=0>o?1:0,this.lookAt(this.plane.normal),D.prototype.updateMatrixWorld.call(this,e)};var KM=new C,dx,vC;Vf.prototype=pt(D.prototype),Vf.prototype.constructor=Vf,Vf.prototype.setDirection=function(e){.99999<e.y?this.quaternion.set(0,0,0,1):-.99999>e.y?this.quaternion.set(1,0,0,0):(KM.set(e.z,0,-e.x).normalize(),this.quaternion.setFromAxisAngle(KM,Math.acos(e.y)))},Vf.prototype.setLength=function(e,o,l){o===void 0&&(o=.2*e),l===void 0&&(l=.2*o),this.line.scale.set(1,Math.max(1e-4,e-o),1),this.line.updateMatrix(),this.cone.scale.set(l,o,l),this.cone.position.y=e,this.cone.updateMatrix()},Vf.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Vf.prototype.copy=function(e){return D.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Vf.prototype.clone=function(){return new this.constructor().copy(this)},s1.prototype=pt(ps.prototype),s1.prototype.constructor=s1;var Nc=Math.pow(2,8),YM=[.125,.215,.35,.446,.526,.582],ZM=5+YM.length,zc={3e3:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},yC=new vv,xC=function(){for(var e=[],o=[],l=[],g=8,w=0;w<ZM;w++){var B=Math.pow(2,g);o.push(B);var L=1/B;4<w?L=YM[w-8+4-1]:w==0&&(L=0),l.push(L),L=1/(B-1),B=-L/2,L=1+L/2;var z=[B,B,L,B,L,L,B,B,L,L,B,L];B=new Float32Array(108),L=new Float32Array(72);for(var V=new Float32Array(36),j=0;6>j;j++){var et=j%3*2/3-1,tt=2<j?0:-1;B.set([et,tt,0,et+2/3,tt,0,et+2/3,tt+1,0,et,tt,0,et+2/3,tt+1,0,et,tt+1,0],18*j),L.set(z,12*j),V.set([j,j,j,j,j,j],6*j)}z=new yt,z.setAttribute("position",new Me(B,3)),z.setAttribute("uv",new Me(L,2)),z.setAttribute("faceIndex",new Me(V,1)),e.push(z),4<g&&g--}return{_lodPlanes:e,_sizeLods:o,_sigmas:l}}(),v1=xC._lodPlanes,JM=xC._sizeLods,gx=xC._sigmas,wC=null,Vg=(1+Math.sqrt(5))/2,bv=1/Vg,qM=[new C(1,1,1),new C(-1,1,1),new C(1,1,-1),new C(-1,1,-1),new C(0,Vg,bv),new C(0,Vg,-bv),new C(bv,0,Vg),new C(-bv,0,Vg),new C(Vg,bv,0),new C(-Vg,bv,0)];Nw.prototype={constructor:Nw,fromScene:function(e,o,l,g){o===void 0&&(o=0),l===void 0&&(l=.1),g===void 0&&(g=100),wC=this._renderer.getRenderTarget();var w=this._allocateTargets();return this._sceneToCubeUV(e,l,g,w),0<o&&this._blur(w,0,0,o),this._applyPMREM(w),this._cleanup(w),w},fromEquirectangular:function(e){return e.magFilter=1003,e.minFilter=1003,e.generateMipmaps=!1,this.fromCubemap(e)},fromCubemap:function(e){wC=this._renderer.getRenderTarget();var o=this._allocateTargets(e);return this._textureToCubeUV(e,o),this._applyPMREM(o),this._cleanup(o),o},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=tM(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=$2(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var e=0;e<v1.length;e++)v1[e].dispose()},_cleanup:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(wC),e.scissorTest=!1,e.setSize(e.width,e.height)},_allocateTargets:function(e){var o=e===void 0||e.type!==1009?!1:e.encoding===3e3||e.encoding===3001||e.encoding===3007;o={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:o?e.encoding:3002,depthBuffer:!1,stencilBuffer:!1};var l=q2(o);return l.depthBuffer=!e,this._pingPongRenderTarget=q2(o),l},_compileMaterial:function(e){e=new Dt(v1[0],e),this._renderer.compile(e,yC)},_sceneToCubeUV:function(e,o,l,g){o=new He(90,1,o,l),l=[1,-1,1,1,1,1];var w=[1,1,1,-1,-1,-1],B=this._renderer,L=B.outputEncoding,z=B.toneMapping,V=B.toneMappingExposure,j=B.getClearColor(),et=B.getClearAlpha();B.toneMapping=1,B.toneMappingExposure=1,B.outputEncoding=3e3;var tt=e.background;if(tt&&tt.isColor){tt.convertSRGBToLinear();var it=Math.min(Math.max(Math.ceil(dm(Math.max(tt.r,tt.g,tt.b))),-128),127);tt=tt.multiplyScalar(Math.pow(2,-it)),B.setClearColor(tt,(it+128)/255),e.background=null}for(tt=0;6>tt;tt++)it=tt%3,it==0?(o.up.set(0,l[tt],0),o.lookAt(w[tt],0,0)):it==1?(o.up.set(0,0,l[tt]),o.lookAt(0,w[tt],0)):(o.up.set(0,l[tt],0),o.lookAt(0,0,w[tt])),zw(g,it*Nc,2<tt?Nc:0,Nc,Nc),B.setRenderTarget(g),B.render(e,o);B.toneMapping=z,B.toneMappingExposure=V,B.outputEncoding=L,B.setClearColor(j,et)},_textureToCubeUV:function(e,o){var l=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=tM()):this._equirectShader==null&&(this._equirectShader=$2());var g=e.isCubeTexture?this._cubemapShader:this._equirectShader,w=new Dt(v1[0],g);g=g.uniforms,g.envMap.value=e,e.isCubeTexture||g.texelSize.value.set(1/e.image.width,1/e.image.height),g.inputEncoding.value=zc[e.encoding],g.outputEncoding.value=zc[o.texture.encoding],zw(o,0,0,3*Nc,2*Nc),l.setRenderTarget(o),l.render(w,yC)},_applyPMREM:function(e){var o=this._renderer,l=o.autoClear;o.autoClear=!1;for(var g=1;g<ZM;g++)this._blur(e,g-1,g,Math.sqrt(gx[g]*gx[g]-gx[g-1]*gx[g-1]),qM[(g-1)%qM.length]);o.autoClear=l},_blur:function(e,o,l,g,w){var B=this._pingPongRenderTarget;this._halfBlur(e,B,o,l,g,"latitudinal",w),this._halfBlur(B,e,l,l,g,"longitudinal",w)},_halfBlur:function(e,o,l,g,w,B,L){var z=this._renderer,V=this._blurMaterial;B!=="latitudinal"&&B!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var j=new Dt(v1[g],V);V=V.uniforms;var et=JM[l]-1;et=isFinite(w)?Math.PI/(2*et):2*Math.PI/39;var tt=w/et,it=isFinite(w)?1+Math.floor(3*tt):20;20<it&&console.warn("sigmaRadians, "+w+", is too large and will clip, as it requested "+it+" samples when the maximum is set to 20"),w=[];for(var rt=0,At=0;20>At;++At){var mt=At/tt;mt=Math.exp(-mt*mt/2),w.push(mt),At==0?rt+=mt:At<it&&(rt+=2*mt)}for(At=0;At<w.length;At++)w[At]/=rt;V.envMap.value=e.texture,V.samples.value=it,V.weights.value=w,V.latitudinal.value=B==="latitudinal",L&&(V.poleAxis.value=L),V.dTheta.value=et,V.mipInt.value=8-l,V.inputEncoding.value=zc[e.texture.encoding],V.outputEncoding.value=zc[e.texture.encoding],e=JM[g],mt=3*Math.max(0,Nc-2*e),zw(o,mt,(g===0?0:2*Nc)+2*e*(4<g?g-8+4:0),3*e,2*e),z.setRenderTarget(o),z.render(j,yC)}},En.create=function(e,o){return e.prototype=pt(En.prototype),e.prototype.constructor=e,e.prototype.getPoint=o,e},dt(kf.prototype,{createPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var o=new xt,l=0,g=e.length;l<g;l++){var w=e[l];o.vertices.push(new C(w.x,w.y,w.z||0))}return o}}),dt(Lh.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),eM.prototype=pt(xA.prototype),rM.prototype=pt(xA.prototype),kw.prototype=pt(xA.prototype),dt(kw.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Hy.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Ug.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},dt(Ao.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),pC.extractUrlBase(e)}}),Ao.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},dt(Uy.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),dt(Ow.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),dt(Z.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),dt(st.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Br.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Hw.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},dt(ii,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ii.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ii.ceilPowerOfTwo(e)}}),dt(h.prototype,{flattenToArrayOffset:function(e,o){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,o)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),dt(I.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,o){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,o)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new C().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,o,l,g,w,B){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,o,g,l,w,B)}}),Et.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},N.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},dt(ht.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),dt(It.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,o)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),dt(It,{barycoordFromPoint:function(e,o,l,g,w){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),It.getBarycoord(e,o,l,g,w)},normal:function(e,o,l,g){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),It.getNormal(e,o,l,g)}}),dt(yd.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Cg(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new _g(this,e)}}),dt(c.prototype,{fromAttribute:function(e,o,l){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,o,l)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),dt(C.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,o){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(o,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,o,l){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,o,l)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),dt(f.prototype,{fromAttribute:function(e,o,l){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,o,l)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),dt(xt.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),dt(D.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,o){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(o,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),vn(D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),dt(Dt.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),vn(Dt.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),vn(S0.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ay.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),sy.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(En.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),He.prototype.setLens=function(e,o){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),o!==void 0&&(this.filmGauge=o),this.setFocalLength(e)},vn(zo.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),vn(Me.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===35048},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),dt(Me.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),dt(yt.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,o,l){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),o&&o.isBufferAttribute||o&&o.isInterleavedBufferAttribute?e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(o),this):this.setAttribute(e,o):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Me(o,l)))},addDrawCall:function(e,o,l){l!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,o)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),vn(yt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),vn(e1.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),vn(Uw.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),vn(zf.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===35048},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),dt(zf.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),dt(Lc.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),vn(Oy.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),vn(le.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Bt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===1}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),vn(vd.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),vn(Te.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),dt(lw.prototype,{clearTarget:function(e,o,l,g){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(o,l,g)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),vn(lw.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=e===!0?3001:3e3}}}),vn(R2.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),vn(x.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),vn(yv.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var o=this;return new Dy().load(e,function(l){o.setBuffer(l)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Lw.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},kr.prototype.updateCubeMap=function(e,o){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,o)},xd.crossOrigin=void 0,xd.loadTexture=function(e,o,l,g){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var w=new wy;return w.setCrossOrigin(this.crossOrigin),e=w.load(e,l,void 0,g),o&&(e.mapping=o),e},xd.loadTextureCube=function(e,o,l,g){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var w=new xy;return w.setCrossOrigin(this.crossOrigin),e=w.load(e,l,void 0,g),o&&(e.mapping=o),e},xd.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},xd.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"117"}})),n.ACESFilmicToneMapping=5,n.AddEquation=100,n.AddOperation=2,n.AdditiveAnimationBlendMode=2501,n.AdditiveBlending=2,n.AlphaFormat=1021,n.AlwaysDepth=1,n.AlwaysStencilFunc=519,n.AmbientLight=Ty,n.AmbientLightProbe=Ew,n.AnimationClip=Ql,n.AnimationLoader=mw,n.AnimationMixer=Rw,n.AnimationObjectGroup=j2,n.AnimationUtils=rs,n.ArcCurve=mv,n.ArrayCamera=ey,n.ArrowHelper=Vf,n.Audio=yv,n.AudioAnalyser=Lw,n.AudioContext=gC,n.AudioListener=Tw,n.AudioLoader=Dy,n.AxesHelper=s1,n.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new s1(e)},n.BackSide=1,n.BasicDepthPacking=3200,n.BasicShadowMap=0,n.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new yy(e)},n.Bone=hw,n.BooleanKeyframeTrack=dy,n.BoundingBoxHelper=function(e,o){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Gf(e,o)},n.Box2=Ow,n.Box3=Z,n.Box3Helper=i1,n.BoxBufferGeometry=f1,n.BoxGeometry=oC,n.BoxHelper=Gf,n.BufferAttribute=Me,n.BufferGeometry=yt,n.BufferGeometryLoader=Py,n.ByteType=1010,n.Cache=zg,n.Camera=ye,n.CameraHelper=n1,n.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},n.CanvasTexture=L0,n.CatmullRomCurve3=xA,n.CineonToneMapping=4,n.CircleBufferGeometry=fv,n.CircleGeometry=Z0,n.ClampToEdgeWrapping=1001,n.Clock=Iw,n.ClosedSplineCurve3=eM,n.Color=Bt,n.ColorKeyframeTrack=gy,n.CompressedTexture=tv,n.CompressedTextureLoader=vw,n.ConeBufferGeometry=Y0,n.ConeGeometry=K0,n.CubeCamera=kr,n.CubeGeometry=oC,n.CubeReflectionMapping=301,n.CubeRefractionMapping=302,n.CubeTexture=Nl,n.CubeTextureLoader=xy,n.CubeUVReflectionMapping=306,n.CubeUVRefractionMapping=307,n.CubicBezierCurve=Eh,n.CubicBezierCurve3=Rc,n.CubicInterpolant=fy,n.CullFaceBack=1,n.CullFaceFront=2,n.CullFaceFrontBack=3,n.CullFaceNone=0,n.Curve=En,n.CurvePath=kf,n.CustomBlending=5,n.CylinderBufferGeometry=Qf,n.CylinderGeometry=Eg,n.Cylindrical=Z2,n.DataTexture=Pe,n.DataTexture2DArray=yA,n.DataTexture3D=GA,n.DataTextureLoader=yy,n.DecrementStencilOp=7683,n.DecrementWrapStencilOp=34056,n.DefaultLoadingManager=UM,n.DepthFormat=1026,n.DepthStencilFormat=1027,n.DepthTexture=F0,n.DirectionalLight=Iy,n.DirectionalLightHelper=Mv,n.DirectionalLightShadow=Ey,n.DiscreteInterpolant=py,n.DodecahedronBufferGeometry=ov,n.DodecahedronGeometry=H0,n.DoubleSide=2,n.DstAlphaFactor=206,n.DstColorFactor=208,n.DynamicBufferAttribute=function(e,o){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Me(e,o).setUsage(35048)},n.DynamicCopyUsage=35050,n.DynamicDrawUsage=35048,n.DynamicReadUsage=35049,n.EdgesGeometry=cv,n.EdgesHelper=function(e,o){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ps(new cv(e.geometry),new es({color:o!==void 0?o:16777215}))},n.EllipseCurve=Ku,n.EqualDepth=4,n.EqualStencilFunc=514,n.EquirectangularReflectionMapping=303,n.EquirectangularRefractionMapping=304,n.Euler=S,n.EventDispatcher=s,n.ExtrudeBufferGeometry=Lc,n.ExtrudeGeometry=Cg,n.Face3=te,n.Face4=function(e,o,l,g,w,B,L){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new te(e,o,l,w,B,L)},n.FaceColors=1,n.FileLoader=bl,n.FlatShading=1,n.Float32Attribute=function(e,o){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new _t(e,o)},n.Float32BufferAttribute=_t,n.Float64Attribute=function(e,o){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Pt(e,o)},n.Float64BufferAttribute=Pt,n.FloatType=1015,n.Fog=iy,n.FogExp2=ny,n.Font=Mw,n.FontLoader=_w,n.FrontFaceDirectionCCW=1,n.FrontFaceDirectionCW=0,n.FrontSide=0,n.Frustum=Br,n.GammaEncoding=3007,n.Geometry=xt,n.GeometryUtils={merge:function(e,o,l){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),o.isMesh){o.matrixAutoUpdate&&o.updateMatrix();var g=o.matrix;o=o.geometry}e.merge(o,g,l)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},n.GreaterDepth=6,n.GreaterEqualDepth=5,n.GreaterEqualStencilFunc=518,n.GreaterStencilFunc=516,n.GridHelper=Hy,n.Group=qm,n.HalfFloatType=1016,n.HemisphereLight=Cy,n.HemisphereLightHelper=Cv,n.HemisphereLightProbe=Bw,n.IcosahedronBufferGeometry=iv,n.IcosahedronGeometry=O0,n.ImageBitmapLoader=ww,n.ImageLoader=gv,n.ImageUtils=xd,n.ImmediateRenderObject=r1,n.IncrementStencilOp=7682,n.IncrementWrapStencilOp=34055,n.InstancedBufferAttribute=Ry,n.InstancedBufferGeometry=e1,n.InstancedInterleavedBuffer=Pw,n.InstancedMesh=Ay,n.Int16Attribute=function(e,o){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Gn(e,o)},n.Int16BufferAttribute=Gn,n.Int32Attribute=function(e,o){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Ct(e,o)},n.Int32BufferAttribute=Ct,n.Int8Attribute=function(e,o){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new xr(e,o)},n.Int8BufferAttribute=xr,n.IntType=1013,n.InterleavedBuffer=zf,n.InterleavedBufferAttribute=I0,n.Interpolant=Xu,n.InterpolateDiscrete=2300,n.InterpolateLinear=2301,n.InterpolateSmooth=2302,n.InvertStencilOp=5386,n.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},n.KeepStencilOp=7680,n.KeyframeTrack=$a,n.LOD=S0,n.LatheBufferGeometry=hv,n.LatheGeometry=X0,n.Layers=F,n.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},n.LessDepth=2,n.LessEqualDepth=3,n.LessEqualStencilFunc=515,n.LessStencilFunc=513,n.Light=zo,n.LightProbe=kl,n.LightShadow=Uc,n.Line=ju,n.Line3=Hw,n.LineBasicMaterial=es,n.LineCurve=du,n.LineCurve3=Ih,n.LineDashedMaterial=Pg,n.LineLoop=uy,n.LinePieces=1,n.LineSegments=ps,n.LineStrip=0,n.LinearEncoding=3e3,n.LinearFilter=1006,n.LinearInterpolant=J0,n.LinearMipMapLinearFilter=1008,n.LinearMipMapNearestFilter=1007,n.LinearMipmapLinearFilter=1008,n.LinearMipmapNearestFilter=1007,n.LinearToneMapping=1,n.Loader=Ao,n.LoaderUtils=pC,n.LoadingManager=gw,n.LogLuvEncoding=3003,n.LoopOnce=2200,n.LoopPingPong=2202,n.LoopRepeat=2201,n.LuminanceAlphaFormat=1025,n.LuminanceFormat=1024,n.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},n.Material=le,n.MaterialLoader=Fy,n.Math=ii,n.MathUtils=ii,n.Matrix3=h,n.Matrix4=I,n.MaxEquation=104,n.Mesh=Dt,n.MeshBasicMaterial=tr,n.MeshDepthMaterial=pd,n.MeshDistanceMaterial=dd,n.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},n.MeshLambertMaterial=Fg,n.MeshMatcapMaterial=Rg,n.MeshNormalMaterial=Lg,n.MeshPhongMaterial=vd,n.MeshPhysicalMaterial=Tg,n.MeshStandardMaterial=Fc,n.MeshToonMaterial=Sg,n.MinEquation=103,n.MirroredRepeatWrapping=1002,n.MixOperation=1,n.MultiMaterial=function(e){return e===void 0&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},n.MultiplyBlending=4,n.MultiplyOperation=0,n.NearestFilter=1003,n.NearestMipMapLinearFilter=1005,n.NearestMipMapNearestFilter=1004,n.NearestMipmapLinearFilter=1005,n.NearestMipmapNearestFilter=1004,n.NeverDepth=0,n.NeverStencilFunc=512,n.NoBlending=0,n.NoColors=0,n.NoToneMapping=0,n.NormalAnimationBlendMode=2500,n.NormalBlending=1,n.NotEqualDepth=7,n.NotEqualStencilFunc=517,n.NumberKeyframeTrack=pv,n.Object3D=D,n.ObjectLoader=Uy,n.ObjectSpaceNormalMap=1,n.OctahedronBufferGeometry=xg,n.OctahedronGeometry=D0,n.OneFactor=201,n.OneMinusDstAlphaFactor=207,n.OneMinusDstColorFactor=209,n.OneMinusSrcAlphaFactor=205,n.OneMinusSrcColorFactor=203,n.OrthographicCamera=vv,n.PCFShadowMap=1,n.PCFSoftShadowMap=2,n.PMREMGenerator=Nw,n.ParametricBufferGeometry=rv,n.ParametricGeometry=R0,n.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new T0(e)},n.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Bh(e)},n.ParticleSystem=function(e,o){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new $m(e,o)},n.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Bh(e)},n.Path=Lh,n.PerspectiveCamera=He,n.Plane=Et,n.PlaneBufferGeometry=li,n.PlaneGeometry=ts,n.PlaneHelper=o1,n.PointCloud=function(e,o){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new $m(e,o)},n.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Bh(e)},n.PointLight=By,n.PointLightHelper=wv,n.Points=$m,n.PointsMaterial=Bh,n.PolarGridHelper=Ny,n.PolyhedronBufferGeometry=pu,n.PolyhedronGeometry=P0,n.PositionalAudio=Sw,n.PropertyBinding=wA,n.PropertyMixer=Fw,n.QuadraticBezierCurve=Th,n.QuadraticBezierCurve3=Pc,n.Quaternion=N,n.QuaternionKeyframeTrack=q0,n.QuaternionLinearInterpolant=my,n.REVISION="117",n.RGBADepthPacking=3201,n.RGBAFormat=1023,n.RGBAIntegerFormat=1033,n.RGBA_ASTC_10x10_Format=37819,n.RGBA_ASTC_10x5_Format=37816,n.RGBA_ASTC_10x6_Format=37817,n.RGBA_ASTC_10x8_Format=37818,n.RGBA_ASTC_12x10_Format=37820,n.RGBA_ASTC_12x12_Format=37821,n.RGBA_ASTC_4x4_Format=37808,n.RGBA_ASTC_5x4_Format=37809,n.RGBA_ASTC_5x5_Format=37810,n.RGBA_ASTC_6x5_Format=37811,n.RGBA_ASTC_6x6_Format=37812,n.RGBA_ASTC_8x5_Format=37813,n.RGBA_ASTC_8x6_Format=37814,n.RGBA_ASTC_8x8_Format=37815,n.RGBA_BPTC_Format=36492,n.RGBA_ETC2_EAC_Format=37496,n.RGBA_PVRTC_2BPPV1_Format=35843,n.RGBA_PVRTC_4BPPV1_Format=35842,n.RGBA_S3TC_DXT1_Format=33777,n.RGBA_S3TC_DXT3_Format=33778,n.RGBA_S3TC_DXT5_Format=33779,n.RGBDEncoding=3006,n.RGBEEncoding=3002,n.RGBEFormat=1023,n.RGBFormat=1022,n.RGBIntegerFormat=1032,n.RGBM16Encoding=3005,n.RGBM7Encoding=3004,n.RGB_ETC1_Format=36196,n.RGB_ETC2_Format=37492,n.RGB_PVRTC_2BPPV1_Format=35841,n.RGB_PVRTC_4BPPV1_Format=35840,n.RGB_S3TC_DXT1_Format=33776,n.RGFormat=1030,n.RGIntegerFormat=1031,n.RawShaderMaterial=bf,n.Ray=ht,n.Raycaster=Uw,n.RectAreaLight=Sy,n.RedFormat=1028,n.RedIntegerFormat=1029,n.ReinhardToneMapping=2,n.RepeatWrapping=1e3,n.ReplaceStencilOp=7681,n.ReverseSubtractEquation=102,n.RingBufferGeometry=lv,n.RingGeometry=j0,n.SRGB8_ALPHA8_ASTC_10x10_Format=37851,n.SRGB8_ALPHA8_ASTC_10x5_Format=37848,n.SRGB8_ALPHA8_ASTC_10x6_Format=37849,n.SRGB8_ALPHA8_ASTC_10x8_Format=37850,n.SRGB8_ALPHA8_ASTC_12x10_Format=37852,n.SRGB8_ALPHA8_ASTC_12x12_Format=37853,n.SRGB8_ALPHA8_ASTC_4x4_Format=37840,n.SRGB8_ALPHA8_ASTC_5x4_Format=37841,n.SRGB8_ALPHA8_ASTC_5x5_Format=37842,n.SRGB8_ALPHA8_ASTC_6x5_Format=37843,n.SRGB8_ALPHA8_ASTC_6x6_Format=37844,n.SRGB8_ALPHA8_ASTC_8x5_Format=37845,n.SRGB8_ALPHA8_ASTC_8x6_Format=37846,n.SRGB8_ALPHA8_ASTC_8x8_Format=37847,n.Scene=K,n.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}},n.ShaderChunk=_i,n.ShaderLib=Hc,n.ShaderMaterial=Te,n.ShadowMaterial=Ig,n.Shape=yd,n.ShapeBufferGeometry=Bg,n.ShapeGeometry=_g,n.ShapePath=Cw,n.ShapeUtils=Zf,n.ShortType=1011,n.Skeleton=ay,n.SkeletonHelper=Ug,n.SkinnedMesh=sy,n.SmoothShading=2,n.Sphere=st,n.SphereBufferGeometry=Mg,n.SphereGeometry=W0,n.Spherical=Y2,n.SphericalHarmonics3=Ly,n.SphericalReflectionMapping=305,n.Spline=kw,n.SplineCurve=Sh,n.SplineCurve3=rM,n.SpotLight=_y,n.SpotLightHelper=xv,n.SpotLightShadow=My,n.Sprite=T0,n.SpriteMaterial=gd,n.SrcAlphaFactor=204,n.SrcAlphaSaturateFactor=210,n.SrcColorFactor=202,n.StaticCopyUsage=35046,n.StaticDrawUsage=35044,n.StaticReadUsage=35045,n.StereoCamera=V2,n.StreamCopyUsage=35042,n.StreamDrawUsage=35040,n.StreamReadUsage=35041,n.StringKeyframeTrack=vy,n.SubtractEquation=101,n.SubtractiveBlending=3,n.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},n.TangentSpaceNormalMap=0,n.TetrahedronBufferGeometry=nv,n.TetrahedronGeometry=U0,n.TextBufferGeometry=uv,n.TextGeometry=V0,n.Texture=d,n.TextureLoader=wy,n.TorusBufferGeometry=av,n.TorusGeometry=Q0,n.TorusKnotBufferGeometry=sv,n.TorusKnotGeometry=z0,n.Triangle=It,n.TriangleFanDrawMode=2,n.TriangleStripDrawMode=1,n.TrianglesDrawMode=0,n.TubeBufferGeometry=wg,n.TubeGeometry=N0,n.UVMapping=300,n.Uint16Attribute=function(e,o){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Dr(e,o)},n.Uint16BufferAttribute=Dr,n.Uint32Attribute=function(e,o){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Mt(e,o)},n.Uint32BufferAttribute=Mt,n.Uint8Attribute=function(e,o){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new br(e,o)},n.Uint8BufferAttribute=br,n.Uint8ClampedAttribute=function(e,o){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new _r(e,o)},n.Uint8ClampedBufferAttribute=_r,n.Uncharted2ToneMapping=3,n.Uniform=Oy,n.UniformsLib=Or,n.UniformsUtils=fM,n.UnsignedByteType=1009,n.UnsignedInt248Type=1020,n.UnsignedIntType=1014,n.UnsignedShort4444Type=1017,n.UnsignedShort5551Type=1018,n.UnsignedShort565Type=1019,n.UnsignedShortType=1012,n.VSMShadowMap=3,n.Vector2=c,n.Vector3=C,n.Vector4=f,n.VectorKeyframeTrack=dv,n.Vertex=function(e,o,l){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new C(e,o,l)},n.VertexColors=2,n.VideoTexture=fw,n.WebGLCubeRenderTarget=cn,n.WebGLMultisampleRenderTarget=E,n.WebGLRenderTarget=x,n.WebGLRenderTargetCube=function(e,o,l){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new cn(e,l)},n.WebGLRenderer=lw,n.WebGLUtils=P2,n.WireframeGeometry=ev,n.WireframeHelper=function(e,o){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ps(new ev(e.geometry),new es({color:o!==void 0?o:16777215}))},n.WrapAroundEnding=2402,n.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new bl(e)},n.ZeroCurvatureEnding=2400,n.ZeroFactor=200,n.ZeroSlopeEnding=2401,n.ZeroStencilOp=0,n.sRGBEncoding=3001,Object.defineProperty(n,"__esModule",{value:!0})})}),no=Gt(g2),m2=function(t){function r(n){return $n(this,r),n=Ji(this,(r.__proto__||fo(r)).call(this,n)),n.layerType="ThreeLayer",n}return So(r,t),po(r,[{key:"initialize",value:function(n){this.getOptions();var s=this.webglLayer.map.map;this.webglLayer.map.type==="three"?(this.camera=s.camera,this.scene=s.scene):(this.camera=new no.PerspectiveCamera,this.scene=new no.Scene),this.world=new no.Group,this.scene.add(this.world),this.webglLayer.map.type!=="three"&&(this.camera.matrixAutoUpdate=!1,this.world.matrixAutoUpdate=!1,this.renderer=new no.WebGLRenderer({alpha:!0,antialias:!0,canvas:n.canvas,context:n}),this.renderer.autoClear=!1,this.renderer.outputEncoding=no.sRGBEncoding)}},{key:"_add",value:function(n,s){var c=[0,0];if(this.getOptions().enabledPointOffset===!0&&(c=this.getPointOffset()),s){var h=new no.Group;return h.isGeoGroup=!0,h.object=n,h.point=s,h.add(n),h.position.x=s.lng-c[0],h.position.y=s.lat-c[1],h.position.z=n.position.z,this.world.add(h),h}return this.world.add(n),n}},{key:"add",value:function(n,s){return n=this._add(n,s),this.update(),n}},{key:"update",value:function(){this.webglLayer.render()}},{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getRenderer",value:function(){return this.renderer}},{key:"getWorld",value:function(){return this.world}},{key:"updatePoint",value:function(n,s){for(var c=this.world.children,h=0;h<c.length;h++)if(c[h].isGeoGroup&&c[h].object===n){var d=c[h];d.position.x=s.lng,d.position.y=s.lat,d.position.z=n.position.z}}},{key:"remove",value:function(n){this.world.remove(n);for(var s=this.world.children,c=0;c<s.length;c++)s[c].children&&0<s[c].children.length&&s[c].children[0]===n&&this.world.remove(s[c]);this.update()}},{key:"updateCamera",value:function(){if(!this.getOptions().notUpdateSize){var n=this.world,s=this.map.getZoomUnits();n=n.children;for(var c=0;c<n.length;c++)n[c].point&&n[c].scale.set(s,s,s)}}},{key:"render",value:function(n){var s=this.getOptions();if(n){if(!this.webglLayer.map.map.camera){this.updateCamera();var c=this.getPointOffset(),h=new no.Matrix4().fromArray(n.viewMatrix);this.camera.projectionMatrix=new no.Matrix4().fromArray(n.projectionMatrix),this.camera.projectionMatrixInverse.getInverse(this.camera.projectionMatrix),s.enabledPointOffset===!0?this.world.matrix=h:(n=new no.Matrix4().makeTranslation(-c[0],-c[1],0),this.world.matrix=h.multiply(n)),this.renderer.state.reset(),this.postProcessing?this.postProcessing.render():this.renderer.render(this.scene,this.camera)}}else this.update()}}]),r}(J_),iw=function(t){function r(n){$n(this,r);var s=Ji(this,(r.__proto__||fo(r)).call(this,n));return s.layerType="threeLayer",s.setOptions(n),s}return So(r,t),po(r,[{key:"getCommonDefaultOptions",value:function(){return{zIndex:0,zoomThreshold:[0,30]}}},{key:"setWebglLayer",value:function(n){n.threeLayer||(n.threeLayer=new m2({enabledPointOffset:!0,webglLayer:n})),this.threeLayer=n.threeLayer}},{key:"getPointOffset",value:function(){return this.threeLayer.getPointOffset()}},{key:"getThreeLayer",value:function(){return this.threeLayer}}]),r}(d2),Zm={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`varying vec2 vUv;
void main() {
	vUv = uv;
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform float opacity;
uniform sampler2D tDiffuse;
varying vec2 vUv;
void main() {
	vec4 texel = texture2D( tDiffuse, vUv );
	gl_FragColor = opacity * texel;
}`};dt(To.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),To.FullScreenQuad=function(){var t=new Ea(-1,1,1,-1,0,1),r=new qr(2,2),n=function(s){this._mesh=new $i(r,s)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(s){this._mesh.material=s}}),dt(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(s){s.render(this._mesh,t)}}),n}();var Y1=function(t,r){To.call(this),this.textureID=r!==void 0?r:"tDiffuse",t instanceof gr?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=lg.clone(t.uniforms),this.material=new gr({defines:dt({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new To.FullScreenQuad(this.material)};Y1.prototype=dt(pt(To.prototype),{constructor:Y1,render:function(t,r,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?t.setRenderTarget(null):(t.setRenderTarget(r),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil)),this.fsQuad.render(t)}});var Z1=function(t,r){To.call(this),this.scene=t,this.camera=r,this.clear=!0,this.inverse=this.needsSwap=!1};Z1.prototype=dt(pt(To.prototype),{constructor:Z1,render:function(t,r,n){var s=t.getContext(),c=t.state;if(c.buffers.color.setMask(!1),c.buffers.depth.setMask(!1),c.buffers.color.setLocked(!0),c.buffers.depth.setLocked(!0),this.inverse)var h=0,d=1;else h=1,d=0;c.buffers.stencil.setTest(!0),c.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),c.buffers.stencil.setFunc(s.ALWAYS,h,4294967295),c.buffers.stencil.setClear(d),c.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(r),this.clear&&t.clear(),t.render(this.scene,this.camera),c.buffers.color.setLocked(!1),c.buffers.depth.setLocked(!1),c.buffers.stencil.setLocked(!1),c.buffers.stencil.setFunc(s.EQUAL,1,4294967295),c.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),c.buffers.stencil.setLocked(!0)}});var ow=function(){To.call(this),this.needsSwap=!1};ow.prototype=pt(To.prototype),dt(ow.prototype,{render:function(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}});var v2=function(t,r){this.renderer=t,r===void 0?(r=t.getSize(new ct),this._pixelRatio=t.getPixelRatio(),this._width=r.width,this._height=r.height,r=new Zt(this._width*this._pixelRatio,this._height*this._pixelRatio,{minFilter:1006,magFilter:1006,format:1023,stencilBuffer:!1}),r.texture.name="EffectComposer.rt1"):(this._pixelRatio=1,this._width=r.width,this._height=r.height),this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],Zm===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),Y1===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Y1(Zm),this.clock=new Ru};dt(v2.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(t,r){this.passes.splice(r,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},isLastEnabledPass:function(t){for(t+=1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(t){t===void 0&&(t=this.clock.getDelta());var r=this.renderer.getRenderTarget(),n=!1,s,c=this.passes.length;for(s=0;s<c;s++){var h=this.passes[s];if(h.enabled!==!1){if(h.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),h.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),h.needsSwap){if(n){var d=this.renderer.getContext(),f=this.renderer.state.buffers.stencil;f.setFunc(d.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),f.setFunc(d.EQUAL,1,4294967295)}this.swapBuffers()}Z1!==void 0&&(h instanceof Z1?n=!0:h instanceof ow&&(n=!1))}}this.renderer.setRenderTarget(r)},reset:function(t){t===void 0&&(t=this.renderer.getSize(new ct),this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)),this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,r){this._width=t,this._height=r,t=this._width*this._pixelRatio,r=this._height*this._pixelRatio,this.renderTarget1.setSize(t,r),this.renderTarget2.setSize(t,r);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(t,r)},setPixelRatio:function(t){this._pixelRatio=t,this.setSize(this._width,this._height)}});var y2=function(){this.needsSwap=this.enabled=!0,this.renderToScreen=this.clear=!1};dt(y2.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),y2.FullScreenQuad=function(){var t=new Ea(-1,1,1,-1,0,1),r=new qr(2,2),n=function(s){this._mesh=new $i(r,s)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(s){this._mesh.material=s}}),dt(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(s){s.render(this._mesh,t)}}),n}();var M0=function(t,r,n,s,c){To.call(this),this.scene=t,this.camera=r,this.overrideMaterial=n,this.clearColor=s,this.clearAlpha=c!==void 0?c:0,this.clear=!0,this.needsSwap=this.clearDepth=!1};M0.prototype=dt(pt(To.prototype),{constructor:M0,render:function(t,r,n){if(r=t.autoClear,t.autoClear=!1,this.overrideMaterial!==void 0){var s=this.scene.overrideMaterial;this.scene.overrideMaterial=this.overrideMaterial}if(this.clearColor){var c=t.getClearColor().getHex(),h=t.getClearAlpha();t.setClearColor(this.clearColor,this.clearAlpha)}this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(c,h),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=s),t.autoClear=r}});var _0={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new ct(1/1024,1/512)}},vertexShader:`uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 3 ];
void SMAAEdgeDetectionVS( vec2 texcoord ) {
	vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );
	vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );
	vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );
}
void main() {
	vUv = uv;
	SMAAEdgeDetectionVS( vUv );
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D tDiffuse;
varying vec2 vUv;
varying vec4 vOffset[ 3 ];
vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
	vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );
	vec4 delta;
	vec3 C = texture2D( colorTex, texcoord ).rgb;
	vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
	vec3 t = abs( C - Cleft );
	delta.x = max( max( t.r, t.g ), t.b );
	vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
	t = abs( C - Ctop );
	delta.y = max( max( t.r, t.g ), t.b );
	vec2 edges = step( threshold, delta.xy );
	if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
		discard;
	vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
	t = abs( C - Cright );
	delta.z = max( max( t.r, t.g ), t.b );
	vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
	t = abs( C - Cbottom );
	delta.w = max( max( t.r, t.g ), t.b );
	float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );
	vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
	t = abs( C - Cleftleft );
	delta.z = max( max( t.r, t.g ), t.b );
	vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
	t = abs( C - Ctoptop );
	delta.w = max( max( t.r, t.g ), t.b );
	maxDelta = max( max( maxDelta, delta.z ), delta.w );
	edges.xy *= step( 0.5 * maxDelta, delta.xy );
	return vec4( edges, 0.0, 0.0 );
}
void main() {
	gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );
}`},q_={SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},$_={tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new ct(1/1024,1/512)}},tB={tDiffuse:{value:null},tColor:{value:null},resolution:{value:new ct(1/1024,1/512)}},sw=function(t,r){To.call(this),this.edgesRT=new Zt(t,r,{depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,minFilter:1006,format:1022}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new Zt(t,r,{depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,minFilter:1006,format:1023}),this.weightsRT.texture.name="SMAAPass.weights";var n=this,s=new Image;s.src=this.getAreaTexture(),s.onload=function(){n.areaTexture.needsUpdate=!0},this.areaTexture=new bt,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=s,this.areaTexture.format=1022,this.areaTexture.minFilter=1006,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1,s=new Image,s.src=this.getSearchTexture(),s.onload=function(){n.searchTexture.needsUpdate=!0},this.searchTexture=new bt,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=s,this.searchTexture.magFilter=1003,this.searchTexture.minFilter=1003,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,_0===void 0&&console.error("SMAAPass relies on SMAAShader"),this.uniformsEdges=lg.clone(_0.uniforms),this.uniformsEdges.resolution.value.set(1/t,1/r),this.materialEdges=new gr({defines:dt({},_0.defines),uniforms:this.uniformsEdges,vertexShader:_0.vertexShader,fragmentShader:_0.fragmentShader}),this.uniformsWeights=lg.clone($_),this.uniformsWeights.resolution.value.set(1/t,1/r),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new gr({defines:dt({},q_),uniforms:this.uniformsWeights,vertexShader:`uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 3 ];
varying vec2 vPixcoord;
void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
	vPixcoord = texcoord / resolution;
	vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 );
	vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 );
	vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );
}
void main() {
	vUv = uv;
	SMAABlendingWeightCalculationVS( vUv );
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )
uniform sampler2D tDiffuse;
uniform sampler2D tArea;
uniform sampler2D tSearch;
uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[3];
varying vec2 vPixcoord;
#if __VERSION__ == 100
vec2 round( vec2 x ) {
	return sign( x ) * floor( abs( x ) + 0.5 );
}
#endif
float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
	e.r = bias + e.r * scale;
	return 255.0 * texture2D( searchTex, e, 0.0 ).r;
}
float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 0.0, 1.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord -= vec2( 2.0, 0.0 ) * resolution;
		if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
	}
	texcoord.x += 0.25 * resolution.x;
	texcoord.x += resolution.x;
	texcoord.x += 2.0 * resolution.x;
	texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);
	return texcoord.x;
}
float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 0.0, 1.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord += vec2( 2.0, 0.0 ) * resolution;
		if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
	}
	texcoord.x -= 0.25 * resolution.x;
	texcoord.x -= resolution.x;
	texcoord.x -= 2.0 * resolution.x;
	texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );
	return texcoord.x;
}
float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 1.0, 0.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord += vec2( 0.0, 2.0 ) * resolution;
		if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
	}
	texcoord.y -= 0.25 * resolution.y;
	texcoord.y -= resolution.y;
	texcoord.y -= 2.0 * resolution.y;
	texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 );
	return texcoord.y;
}
float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
	vec2 e = vec2( 1.0, 0.0 );
	for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {
		e = texture2D( edgesTex, texcoord, 0.0 ).rg;
		texcoord -= vec2( 0.0, 2.0 ) * resolution;
		if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
	}
	texcoord.y += 0.25 * resolution.y;
	texcoord.y += resolution.y;
	texcoord.y += 2.0 * resolution.y;
	texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 );
	return texcoord.y;
}
vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
	vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;
	texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );
	texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;
	return texture2D( areaTex, texcoord, 0.0 ).rg;
}
vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
	vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );
	vec2 e = texture2D( edgesTex, texcoord ).rg;
	if ( e.g > 0.0 ) {
		vec2 d;
		vec2 coords;
		coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
		coords.y = offset[ 1 ].y;
		d.x = coords.x;
		float e1 = texture2D( edgesTex, coords, 0.0 ).r;
		coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
		d.y = coords.x;
		d = d / resolution.x - pixcoord.x;
		vec2 sqrt_d = sqrt( abs( d ) );
		coords.y -= 1.0 * resolution.y;
		float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;
		weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
	}
	if ( e.r > 0.0 ) {
		vec2 d;
		vec2 coords;
		coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
		coords.x = offset[ 0 ].x;
		d.x = coords.y;
		float e1 = texture2D( edgesTex, coords, 0.0 ).g;
		coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
		d.y = coords.y;
		d = d / resolution.y - pixcoord.y;
		vec2 sqrt_d = sqrt( abs( d ) );
		coords.y -= 1.0 * resolution.y;
		float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;
		weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
	}
	return weights;
}
void main() {
	gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );
}`}),this.uniformsBlend=lg.clone(tB),this.uniformsBlend.resolution.value.set(1/t,1/r),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new gr({uniforms:this.uniformsBlend,vertexShader:`uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 2 ];
void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
	vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 );
	vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 );
}
void main() {
	vUv = uv;
	SMAANeighborhoodBlendingVS( vUv );
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D tDiffuse;
uniform sampler2D tColor;
uniform vec2 resolution;
varying vec2 vUv;
varying vec4 vOffset[ 2 ];
vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
	vec4 a;
	a.xz = texture2D( blendTex, texcoord ).xz;
	a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
	a.w = texture2D( blendTex, offset[ 1 ].xy ).a;
	if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
		return texture2D( colorTex, texcoord, 0.0 );
	} else {
		vec2 offset;
		offset.x = a.a > a.b ? a.a : -a.b;
		offset.y = a.g > a.r ? -a.g : a.r;
		if ( abs( offset.x ) > abs( offset.y )) {
			offset.y = 0.0;
		} else {
			offset.x = 0.0;
		}
		vec4 C = texture2D( colorTex, texcoord, 0.0 );
		texcoord += sign( offset ) * resolution;
		vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
		float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );
		C.xyz = pow(C.xyz, vec3(2.2));
		Cop.xyz = pow(Cop.xyz, vec3(2.2));
		vec4 mixed = mix(C, Cop, s);
		mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));
		return mixed;
	}
}
void main() {
	gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );
}`}),this.needsSwap=!1,this.fsQuad=new To.FullScreenQuad(null)};sw.prototype=dt(pt(To.prototype),{constructor:sw,render:function(t,r,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,t.setRenderTarget(this.edgesRT),this.clear&&t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialWeights,t.setRenderTarget(this.weightsRT),this.clear&&t.clear(),this.fsQuad.render(t),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?t.setRenderTarget(null):(t.setRenderTarget(r),this.clear&&t.clear()),this.fsQuad.render(t)},setSize:function(t,r){this.edgesRT.setSize(t,r),this.weightsRT.setSize(t,r),this.materialEdges.uniforms.resolution.value.set(1/t,1/r),this.materialWeights.uniforms.resolution.value.set(1/t,1/r),this.materialBlend.uniforms.resolution.value.set(1/t,1/r)},getAreaTexture:function(){return"data:image/png;base64,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"},getSearchTexture:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}});var J1={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Je(0)},defaultOpacity:{value:0}},vertexShader:`varying vec2 vUv;
void main() {
	vUv = uv;
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D tDiffuse;
uniform vec3 defaultColor;
uniform float defaultOpacity;
uniform float luminosityThreshold;
uniform float smoothWidth;
varying vec2 vUv;
void main() {
	vec4 texel = texture2D( tDiffuse, vUv );
	vec3 luma = vec3( 0.299, 0.587, 0.114 );
	float v = dot( texel.xyz, luma );
	vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );
	float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );
	gl_FragColor = mix( outputColor, texel, alpha );
}`},hd=function(t,r,n,s){To.call(this),this.strength=r!==void 0?r:1,this.radius=n,this.threshold=s,this.resolution=t!==void 0?new ct(t.x,t.y):new ct(256,256),this.clearColor=new Je(0,0,0);var c={minFilter:1006,magFilter:1006,format:1023};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5,t=Math.round(this.resolution.x/2),n=Math.round(this.resolution.y/2),this.renderTargetBright=new Zt(t,n,c),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var h=0;h<this.nMips;h++){var d=new Zt(t,n,c);d.texture.name="UnrealBloomPass.h"+h,d.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(d),d=new Zt(t,n,c),d.texture.name="UnrealBloomPass.v"+h,d.texture.generateMipmaps=!1,this.renderTargetsVertical.push(d),t=Math.round(t/2),n=Math.round(n/2)}for(J1===void 0&&console.error("UnrealBloomPass relies on LuminosityHighPassShader"),this.highPassUniforms=lg.clone(J1.uniforms),this.highPassUniforms.luminosityThreshold.value=s,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new gr({uniforms:this.highPassUniforms,vertexShader:J1.vertexShader,fragmentShader:J1.fragmentShader,defines:{}}),this.separableBlurMaterials=[],s=[3,5,7,9,11],t=Math.round(this.resolution.x/2),n=Math.round(this.resolution.y/2),h=0;h<this.nMips;h++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(s[h])),this.separableBlurMaterials[h].uniforms.texSize.value=new ct(t,n),t=Math.round(t/2),n=Math.round(n/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0,this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new gt(1,1,1),new gt(1,1,1),new gt(1,1,1),new gt(1,1,1),new gt(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,Zm===void 0&&console.error("UnrealBloomPass relies on CopyShader"),this.copyUniforms=lg.clone(Zm.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new gr({uniforms:this.copyUniforms,vertexShader:Zm.vertexShader,fragmentShader:Zm.fragmentShader,blending:2,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new Je,this.oldClearAlpha=1,this.basic=new Qo,this.fsQuad=new To.FullScreenQuad(null)};hd.prototype=dt(pt(To.prototype),{constructor:hd,dispose:function(){for(var t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()},setSize:function(t,r){t=Math.round(t/2),r=Math.round(r/2),this.renderTargetBright.setSize(t,r);for(var n=0;n<this.nMips;n++)this.renderTargetsHorizontal[n].setSize(t,r),this.renderTargetsVertical[n].setSize(t,r),this.separableBlurMaterials[n].uniforms.texSize.value=new ct(t,r),t=Math.round(t/2),r=Math.round(r/2)},render:function(t,r,n,s,c){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha(),r=t.autoClear,t.autoClear=!1,t.setClearColor(this.clearColor,0),c&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t),s=this.renderTargetBright;for(var h=0;h<this.nMips;h++)this.fsQuad.material=this.separableBlurMaterials[h],this.separableBlurMaterials[h].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[h].uniforms.direction.value=hd.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[h]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[h].uniforms.colorTexture.value=this.renderTargetsHorizontal[h].texture,this.separableBlurMaterials[h].uniforms.direction.value=hd.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[h]),t.clear(),this.fsQuad.render(t),s=this.renderTargetsVertical[h];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,c&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?t.setRenderTarget(null):t.setRenderTarget(n),this.fsQuad.render(t),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=r},getSeperableBlurMaterial:function(t){return new gr({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new ct(.5,.5)},direction:{value:new ct(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;				uniform vec2 direction;								float gaussianPdf(in float x, in float sigma) {					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;				}				void main() {
					vec2 invSize = 1.0 / texSize;					float fSigma = float(SIGMA);					float weightSum = gaussianPdf(0.0, fSigma);					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {						float x = float(i);						float w = gaussianPdf(x, fSigma);						vec2 uvOffset = direction * invSize * x;						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;						diffuseSum += (sample1 + sample2) * w;						weightSum += 2.0 * w;					}					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})},getCompositeMaterial:function(t){return new gr({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:"varying vec2 vUv;				uniform sampler2D blurTexture1;				uniform sampler2D blurTexture2;				uniform sampler2D blurTexture3;				uniform sampler2D blurTexture4;				uniform sampler2D blurTexture5;				uniform sampler2D dirtTexture;				uniform float bloomStrength;				uniform float bloomRadius;				uniform float bloomFactors[NUM_MIPS];				uniform vec3 bloomTintColors[NUM_MIPS];								float lerpBloomFactor(const in float factor) { 					float mirrorFactor = 1.2 - factor;					return mix(factor, mirrorFactor, bloomRadius);				}								void main() {					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + 													 lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + 													 lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + 													 lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + 													 lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );				}"})}}),hd.BlurDirectionX=new ct(1,0),hd.BlurDirectionY=new ct(0,1);var eB=function(t){function r(n){return $n(this,r),Ji(this,(r.__proto__||fo(r)).call(this,n))}return So(r,t),po(r,[{key:"initialize",value:function(n){var s=n.camera,c=n.renderer;if(!this._initialize){if(this.scene=n.scene,this.camera=s,this.renderer=c,n=this.options.passes,this._initialize=!0,this.renderScene=new M0(this.scene,this.camera),s=new v2(this.renderer),s.addPass(this.renderScene),this.passes=[],n)for(var h=0;h<n.length;h++){var d=n[h],f=void 0;switch(d.name){case"unrealBloom":f=d.strength||1;var x=d.radius||0,E=d.threshold||.5;f=new hd(new ud.Vector2(window.innerWidth*c.getPixelRatio(),window.innerHeight*c.getPixelRatio()),f,x,E);break;case"SMAA":f=new sw(window.innerWidth*c.getPixelRatio(),window.innerHeight*c.getPixelRatio())}if(f){for(var N in d)f[N]=d[N];s.addPass(f)}}this.composer=s}}},{key:"addRender",value:function(n){this.renderScene&&this.renderScene.addRender(n)}},{key:"render",value:function(){this.composer.render(this.scene,this.camera)}}]),r}(iw);hd.prototype.getSeperableBlurMaterial=function(t){return new ud.ShaderMaterial({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new ud.Vector2(.5,.5)},direction:{value:new ud.Vector2(.5,.5)}},vertexShader:`varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
            }`,fragmentShader:`#include <common>            varying vec2 vUv;
            uniform sampler2D colorTexture;
            uniform vec2 texSize;            uniform vec2 direction;                        float gaussianPdf(in float x, in float sigma) {                return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;            }            void main() {
                vec2 invSize = 1.0 / texSize;                float fSigma = float(SIGMA);                float weightSum = gaussianPdf(0.0, fSigma);                vec4 diffuseSum = texture2D( colorTexture, vUv).rgba * weightSum;                for( int i = 1; i < KERNEL_RADIUS; i ++ ) {                    float x = float(i);                    float w = gaussianPdf(x, fSigma);                    vec2 uvOffset = direction * invSize * x;                    vec4 sample1 = texture2D( colorTexture, vUv + uvOffset).rgba;                    vec4 sample2 = texture2D( colorTexture, vUv - uvOffset).rgba;                    diffuseSum += (sample1 + sample2) * w;                    weightSum += 2.0 * w;                }                gl_FragColor = vec4(diffuseSum/weightSum);
            }`})},M0.prototype.addRender=function(t){this.renderCbk=t},M0.prototype.render=function(t,r,n){if(r=t.autoClear,t.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor){var s=t.getClearColor().getHex(),c=t.getClearAlpha();t.setClearColor(this.clearColor,this.clearAlpha)}this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.renderCbk&&this.renderCbk(),this.clearColor&&t.setClearColor(s,c),this.scene.overrideMaterial=null,t.autoClear=r};var rB=function(t){function r(n){return $n(this,r),n=Ji(this,(r.__proto__||fo(r)).call(this,n)),n.time=0,n.autoUpdate=!0,n}return So(r,t),po(r,[{key:"getDefaultOptions",value:function(){return{totalRadian:Math.PI,color:16711680,radius:50,step:.1}}},{key:"initialize",value:function(n){this.threeLayer=n,this.addOverlay()}},{key:"onChanged",value:function(n,s){this.threeLayer&&(this.removeOverlay(),this.addOverlay())}},{key:"onDestroy",value:function(){this.removeOverlay()}},{key:"render",value:function(){this.time+=this.options.step/10,1<this.time&&(this.time=0);for(var n=this.shapeMarker.children,s=0;s<n.length;s++)n[s].material.uniforms.periodRatio.value=this.time}},{key:"removeOverlay",value:function(){this.threeLayer.remove(this.shapeMarker)}},{key:"addOverlay",value:function(){this.shapeMarker=new no.Group;for(var n=this.threeLayer,s=this.getData(),c=0;c<s.length;c++){var h=n.normizedPoint(s[c].geometry.coordinates);h=this.create3dCanvasRipple({originalData:s[c],normizedData:h}),this.shapeMarker.add(h)}n.add(this.shapeMarker)}},{key:"create3dCanvasRipple",value:function(n){var s=this.options,c=s.totalRadian,h=s.color;s=s.size;var d=n.originalData;n=n.normizedData,Object.prototype.toString.call(h)==="[object Function]"&&(h=h(d)),s=Object.prototype.toString.call(s)==="[object Function]"?s(d):Number(s),d={totalRadian:{type:"f",value:c},glowColor:{type:"c",value:new no.Color(h)},radius:{type:"f",value:s},periodRatio:{type:"f",value:0}},h=new no.Geometry;for(var f=c/(s/2),x=f;x<=c;x+=f){var E=s*Math.sin(x),N=s*Math.cos(x);h.vertices.push(new no.Vector3(0,0,x/c)),h.vertices.push(new no.Vector3(N,E,x/c))}for(c=0,s=h.vertices.length;c<s-2;++c)h.faces.push(new no.Face3(c,c+1,c+3));return c=new no.ShaderMaterial({uniforms:d,vertexShader:"varying vec4 vFragColor;varying vec4 vPosition;uniform float radius;uniform float totalRadian;uniform float periodRatio;uniform vec3 glowColor;void main(){float radian=radians(360.0*periodRatio);float s=sin(radian);float c=cos(radian);vec2 rotatedPostion=vec2(position.x*s+position.y*c,position.y*s-position.x*c);gl_Position=projectionMatrix*modelViewMatrix*vec4(rotatedPostion,0,1.0);vFragColor=vec4(glowColor,pow(position.z,1.3));}",fragmentShader:"varying vec4 vFragColor;void main(){gl_FragColor=vFragColor;}",blending:no.NormalBlending,transparent:!0,depthWrite:!1}),c=new no.Mesh(h,c),c.position.set(n[0],n[1],n[2]||0),c}}]),r}(iw),x2=Ot(function(t,r){(function(){function n(){this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this.geometry=new h.BufferGeometry,this.widthCallback=null,this.matrixWorld=new h.Matrix4}function s(d,f,x,E,N){if(d=d.subarray||d.slice?d:d.buffer,x=x.subarray||x.slice?x:x.buffer,d=f?d.subarray?d.subarray(f,N&&f+N):d.slice(f,N&&f+N):d,x.set)x.set(d,E);else for(f=0;f<d.length;f++)x[f+E]=d[f];return x}function c(d){h.ShaderMaterial.call(this,{uniforms:dt({},h.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new h.Color(16777215)},opacity:{value:1},resolution:{value:new h.Vector2(1,1)},sizeAttenuation:{value:1},near:{value:1},far:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new h.Vector2(1,1)}}),vertexShader:h.ShaderChunk.meshline_vert,fragmentShader:h.ShaderChunk.meshline_frag}),this.type="MeshLineMaterial",vn(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(f){this.uniforms.lineWidth.value=f}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(f){this.uniforms.map.value=f}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(f){this.uniforms.useMap.value=f}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(f){this.uniforms.alphaMap.value=f}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(f){this.uniforms.useAlphaMap.value=f}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(f){this.uniforms.color.value=f}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(f){this.uniforms.opacity.value=f}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(f){this.uniforms.resolution.value.copy(f)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(f){this.uniforms.sizeAttenuation.value=f}},near:{enumerable:!0,get:function(){return this.uniforms.near.value},set:function(f){this.uniforms.near.value=f}},far:{enumerable:!0,get:function(){return this.uniforms.far.value},set:function(f){this.uniforms.far.value=f}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(f){this.uniforms.dashArray.value=f,this.useDash=f!==0?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(f){this.uniforms.dashOffset.value=f}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(f){this.uniforms.dashRatio.value=f}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(f){this.uniforms.useDash.value=f}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(f){this.uniforms.visibility.value=f}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(f){this.uniforms.alphaTest.value=f}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(f){this.uniforms.repeat.value.copy(f)}}}),this.setValues(d)}var h=typeof ce!="undefined"&&g2||this.THREE;if(!h)throw Error("MeshLine requires three.js");n.prototype.setMatrixWorld=function(d){this.matrixWorld=d},n.prototype.setGeometry=function(d,f){if(this.widthCallback=f,this.positions=[],this.counters=[],d instanceof h.Geometry)for(var x=0;x<d.vertices.length;x++){var E=d.vertices[x];f=x/d.vertices.length,this.positions.push(E.x,E.y,E.z),this.positions.push(E.x,E.y,E.z),this.counters.push(f),this.counters.push(f)}if(d instanceof Float32Array||d instanceof Array)for(x=0;x<d.length;x+=3)f=x/d.length,this.positions.push(d[x],d[x+1],d[x+2]),this.positions.push(d[x],d[x+1],d[x+2]),this.counters.push(f),this.counters.push(f);this.process()},n.prototype.raycast=function(){var d=new h.Matrix4,f=new h.Ray,x=new h.Sphere;return function(E,N){var C=E.linePrecision;C*=C;var I=this.geometry;if(I.boundingSphere===null&&I.computeBoundingSphere(),x.copy(I.boundingSphere),x.applyMatrix4(this.matrixWorld),E.ray.intersectSphere(x)!==!1){d.getInverse(this.matrixWorld),f.copy(E.ray).applyMatrix4(d);var S=new h.Vector3,F=new h.Vector3,D=new h.Vector3,K=new h.Vector3,Z=this instanceof h.LineSegments?2:1;if(I instanceof h.BufferGeometry){var $=I.index,st=I.attributes;if($!==null){I=$.array,st=st.position.array,$=0;for(var ht=I.length-1;$<ht;$+=Z){var Et=I[$+1];S.fromArray(st,3*I[$]),F.fromArray(st,3*Et),Et=f.distanceSqToSegment(S,F,K,D),Et>C||(K.applyMatrix4(this.matrixWorld),Et=E.ray.origin.distanceTo(K),Et<E.near||Et>E.far||N.push({distance:Et,point:D.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this}))}}else for(st=st.position.array,$=0,ht=st.length/3-1;$<ht;$+=Z)S.fromArray(st,3*$),F.fromArray(st,3*$+3),Et=f.distanceSqToSegment(S,F,K,D),Et>C||(K.applyMatrix4(this.matrixWorld),Et=E.ray.origin.distanceTo(K),Et<E.near||Et>E.far||N.push({distance:Et,point:D.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this}))}else if(I instanceof h.Geometry)for(S=I.vertices,F=S.length,$=0;$<F-1;$+=Z)Et=f.distanceSqToSegment(S[$],S[$+1],K,D),Et>C||(K.applyMatrix4(this.matrixWorld),Et=E.ray.origin.distanceTo(K),Et<E.near||Et>E.far||N.push({distance:Et,point:D.clone().applyMatrix4(this.matrixWorld),index:$,face:null,faceIndex:null,object:this}))}}}(),n.prototype.compareV3=function(d,f){return d*=6,f*=6,this.positions[d]===this.positions[f]&&this.positions[d+1]===this.positions[f+1]&&this.positions[d+2]===this.positions[f+2]},n.prototype.copyV3=function(d){return d*=6,[this.positions[d],this.positions[d+1],this.positions[d+2]]},n.prototype.process=function(){var d=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];for(var f=0;f<d;f++)this.side.push(1),this.side.push(-1);for(f=0;f<d;f++){var x=this.widthCallback?this.widthCallback(f/(d-1)):1;this.width.push(x),this.width.push(x)}for(f=0;f<d;f++)this.uvs.push(f/(d-1),0),this.uvs.push(f/(d-1),1);for(x=this.compareV3(0,d-1)?this.copyV3(d-2):this.copyV3(0),this.previous.push(x[0],x[1],x[2]),this.previous.push(x[0],x[1],x[2]),f=0;f<d-1;f++)x=this.copyV3(f),this.previous.push(x[0],x[1],x[2]),this.previous.push(x[0],x[1],x[2]);for(f=1;f<d;f++)x=this.copyV3(f),this.next.push(x[0],x[1],x[2]),this.next.push(x[0],x[1],x[2]);for(x=this.compareV3(d-1,0)?this.copyV3(1):this.copyV3(d-1),this.next.push(x[0],x[1],x[2]),this.next.push(x[0],x[1],x[2]),f=0;f<d-1;f++)x=2*f,this.indices_array.push(x,x+1,x+2),this.indices_array.push(x+2,x+1,x+3);this.attributes?(this.attributes.position.copyArray(new Float32Array(this.positions)),this.attributes.position.needsUpdate=!0,this.attributes.previous.copyArray(new Float32Array(this.previous)),this.attributes.previous.needsUpdate=!0,this.attributes.next.copyArray(new Float32Array(this.next)),this.attributes.next.needsUpdate=!0,this.attributes.side.copyArray(new Float32Array(this.side)),this.attributes.side.needsUpdate=!0,this.attributes.width.copyArray(new Float32Array(this.width)),this.attributes.width.needsUpdate=!0,this.attributes.uv.copyArray(new Float32Array(this.uvs)),this.attributes.uv.needsUpdate=!0,this.attributes.index.copyArray(new Uint16Array(this.indices_array)),this.attributes.index.needsUpdate=!0):this.attributes={position:new h.BufferAttribute(new Float32Array(this.positions),3),previous:new h.BufferAttribute(new Float32Array(this.previous),3),next:new h.BufferAttribute(new Float32Array(this.next),3),side:new h.BufferAttribute(new Float32Array(this.side),1),width:new h.BufferAttribute(new Float32Array(this.width),1),uv:new h.BufferAttribute(new Float32Array(this.uvs),2),index:new h.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new h.BufferAttribute(new Float32Array(this.counters),1)},this.geometry.setAttribute("position",this.attributes.position),this.geometry.setAttribute("previous",this.attributes.previous),this.geometry.setAttribute("next",this.attributes.next),this.geometry.setAttribute("side",this.attributes.side),this.geometry.setAttribute("width",this.attributes.width),this.geometry.setAttribute("uv",this.attributes.uv),this.geometry.setAttribute("counters",this.attributes.counters),this.geometry.setIndex(this.attributes.index)},n.prototype.advance=function(d){var f=this.attributes.position.array,x=this.attributes.next.array,E=f.length;s(f,0,this.attributes.previous.array,0,E),s(f,6,f,0,E-6),f[E-6]=d.x,f[E-5]=d.y,f[E-4]=d.z,f[E-3]=d.x,f[E-2]=d.y,f[E-1]=d.z,s(f,6,x,0,E-6),x[E-6]=d.x,x[E-5]=d.y,x[E-4]=d.z,x[E-3]=d.x,x[E-2]=d.y,x[E-1]=d.z,this.attributes.position.needsUpdate=!0,this.attributes.previous.needsUpdate=!0,this.attributes.next.needsUpdate=!0},h.ShaderChunk.meshline_vert=["",h.ShaderChunk.logdepthbuf_pars_vertex,h.ShaderChunk.fog_pars_vertex,`\r
attribute vec3 previous;\r
attribute vec3 next;\r
attribute float side;\r
attribute float width;\r
attribute float counters;\r
\r
uniform vec2 resolution;\r
uniform float lineWidth;\r
uniform vec3 color;\r
uniform float opacity;\r
uniform float near;\r
uniform float far;\r
uniform float sizeAttenuation;\r
\r
varying vec2 vUV;\r
varying vec4 vColor;\r
varying float vCounters;\r
\r
vec2 fix( vec4 i, float aspect ) {\r
\r
    vec2 res = i.xy / i.w;\r
    res.x *= aspect;\r
	 vCounters = counters;\r
    return res;\r
\r
}\r
\r
void main() {\r
\r
    float aspect = resolution.x / resolution.y;\r
    float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);\r
\r
    vColor = vec4( color, opacity );\r
    vUV = uv;\r
\r
    mat4 m = projectionMatrix * modelViewMatrix;\r
    vec4 finalPosition = m * vec4( position, 1.0 );\r
    vec4 prevPos = m * vec4( previous, 1.0 );\r
    vec4 nextPos = m * vec4( next, 1.0 );\r
\r
    vec2 currentP = fix( finalPosition, aspect );\r
    vec2 prevP = fix( prevPos, aspect );\r
    vec2 nextP = fix( nextPos, aspect );\r
\r
    float pixelWidth = finalPosition.w * pixelWidthRatio;\r
    float w = 1.8 * pixelWidth * lineWidth * width;\r
\r
    if( sizeAttenuation == 1. ) {\r
        w = 1.8 * lineWidth * width;\r
    }\r
\r
    vec2 dir;\r
    if( nextP == currentP ) dir = normalize( currentP - prevP );\r
    else if( prevP == currentP ) dir = normalize( nextP - currentP );\r
    else {\r
        vec2 dir1 = normalize( currentP - prevP );\r
        vec2 dir2 = normalize( nextP - currentP );\r
        dir = normalize( dir1 + dir2 );\r
\r
        vec2 perp = vec2( -dir1.y, dir1.x );\r
        vec2 miter = vec2( -dir.y, dir.x );\r
        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );\r
\r
    }\r
\r
    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;\r
    vec2 normal = vec2( -dir.y, dir.x );\r
    normal.x /= aspect;\r
    normal *= .5 * w;\r
\r
    vec4 offset = vec4( normal * side, 0.0, 1.0 );\r
    finalPosition.xy += offset.xy;\r
\r
    gl_Position = finalPosition;\r
`,h.ShaderChunk.logdepthbuf_vertex,h.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",h.ShaderChunk.fog_vertex,"}"].join(`\r
`),h.ShaderChunk.meshline_frag=["",h.ShaderChunk.fog_pars_fragment,h.ShaderChunk.logdepthbuf_pars_fragment,`\r
uniform sampler2D map;\r
uniform sampler2D alphaMap;\r
uniform float useMap;\r
uniform float useAlphaMap;\r
uniform float useDash;\r
uniform float dashArray;\r
uniform float dashOffset;\r
uniform float dashRatio;\r
uniform float visibility;\r
uniform float alphaTest;\r
uniform vec2 repeat;\r
\r
varying vec2 vUV;\r
varying vec4 vColor;\r
varying float vCounters;\r
\r
void main() {\r
`,h.ShaderChunk.logdepthbuf_fragment,`\r
    vec4 c = vColor;\r
    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );\r
    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;\r
    if( c.a < alphaTest ) discard;\r
    if( useDash == 1. ){\r
        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));\r
    }\r
    gl_FragColor = c;\r
    gl_FragColor.a *= step(vCounters, visibility);\r
`,h.ShaderChunk.fog_fragment,"}"].join(`\r
`),c.prototype=pt(h.ShaderMaterial.prototype),c.prototype.constructor=c,c.prototype.isMeshLineMaterial=!0,c.prototype.copy=function(d){return h.ShaderMaterial.prototype.copy.call(this,d),this.lineWidth=d.lineWidth,this.map=d.map,this.useMap=d.useMap,this.alphaMap=d.alphaMap,this.useAlphaMap=d.useAlphaMap,this.color.copy(d.color),this.opacity=d.opacity,this.resolution.copy(d.resolution),this.sizeAttenuation=d.sizeAttenuation,this.near=d.near,this.far=d.far,this.dashArray.copy(d.dashArray),this.dashOffset.copy(d.dashOffset),this.dashRatio.copy(d.dashRatio),this.useDash=d.useDash,this.visibility=d.visibility,this.alphaTest=d.alphaTest,this.repeat.copy(d.repeat),this},t.exports&&(r=t.exports={MeshLine:n,MeshLineMaterial:c}),r.MeshLine=n,r.MeshLineMaterial=c}).call(Tn)}),nB=x2.MeshLine,iB=x2.MeshLineMaterial,oB=function(t){function r(n){return $n(this,r),n=Ji(this,(r.__proto__||fo(r)).call(this,n)),n.staticDashArray=2,n.time=0,n.autoUpdate=!0,n}return So(r,t),po(r,[{key:"getDefaultOptions",value:function(){return{color:16777215,textureColor:16777215,textureWidth:10,textureLength:30,step:.1}}},{key:"initialize",value:function(n){this.threeLayer=n,this.addOverlay()}},{key:"onChanged",value:function(n,s){this.threeLayer&&(this.removeOverlay(),this.addOverlay())}},{key:"onDestroy",value:function(){this.removeOverlay()}},{key:"render",value:function(){var n=this.getOptions(),s=n.textureWidth,c=n.style;n=n.step/10,this.time+=n,2<this.time&&(this.time=0);for(var h=this.flyLine.children,d=0;d<h.length;d++){var f=h[d],x=f.hash;f.children[0].material.uniforms.lineWidth.value=s*(1+.2*Math.sin(5*this.time)),f.children[0].material.uniforms.dashOffset.value=c==="chaos"?f.children[0].material.uniforms.dashOffset.value-n:(this.staticDashArray+x)*(1-this.time/2)}}},{key:"removeOverlay",value:function(){this.threeLayer.remove(this.flyLine)}},{key:"addOverlay",value:function(){var n=this;this.flyLine=new no.Group;var s=this.threeLayer,c=new no.TextureLoader,h=this.getData();c.load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAABZCAQAAAD/AkAkAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAOGtpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTktMDYtMjdUMTk6MzE6MTUrMDg6MDA8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxOS0wOC0xOVQxNjo1Nzo1MCswODowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMTktMDgtMTlUMTY6NTc6NTArMDg6MDA8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjE8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5Eb3QgR2FpbiAxNSU8L3Bob3Rvc2hvcDpJQ0NQcm9maWxlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjQ5MmI1NTQ1LWIwNmQtNGI0Yi1iMWExLTZiN2NiNzExNzA5MjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDo0OTJiNTU0NS1iMDZkLTRiNGItYjFhMS02YjdjYjcxMTcwOTI8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDo0OTJiNTU0NS1iMDZkLTRiNGItYjFhMS02YjdjYjcxMTcwOTI8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NDkyYjU1NDUtYjA2ZC00YjRiLWIxYTEtNmI3Y2I3MTE3MDkyPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE5LTA2LTI3VDE5OjMxOjE1KzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+ODk8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+ODk8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0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",function(d){for(var f=0;f<h.length;f++){var x=h[f].geometry.coordinates.map(function(E){return new(Function.prototype.bind.apply(no.Vector3,[null].concat(A2(s.normizedPoint(E)))))});x=n.createFlyLine({originalData:h[f],curveData:x,texture:d}),n.flyLine.add(x)}s.add(n.flyLine)})}},{key:"createFlyLine",value:function(n){var s=this.options,c=s.color,h=s.textureColor,d=s.textureWidth,f=n.originalData,x=n.curveData;n=n.texture;var E=Math.random();s=Math.min(1,1-s.textureLength/100),s=Math.max(0,s),Object.prototype.toString.call(c)==="[object Function]"&&(c=c(f)),Object.prototype.toString.call(h)==="[object Function]"&&(h=h(f)),f=new no.Geometry,f.vertices=x,f.verticesNeedUpdate=!0,c=new no.LineBasicMaterial({linewidth:1,color:new no.Color(c),blending:no.AdditiveBlending,depthTest:!0,depthWrite:!1,transparent:!0,opacity:.3,linecap:"round",linejoin:"round"}),c=new no.Line(f,c),c.renderDepth=!1,c.hash=E,f=new nB;for(var N=new no.Geometry,C=0;C<x.length;C++){var I=x[C];N.vertices.push(new no.Vector3(I.x,I.y,I.z))}return f.setGeometry(N,function(S){return 1-S}),h=new iB({map:n,useMap:!0,color:new no.Color(h),opacity:1,dashArray:this.staticDashArray+E,dashOffset:0,dashRatio:s,sizeAttenuation:!0,lineWidth:d,depthWrite:!1,depthTest:!0,alphaTest:!1,transparent:!0,blending:no.AdditiveBlending,side:no.DoubleSide}),h=new no.Mesh(f.geometry,h),c.add(h),c}}]),r}(iw);Ut.THREELoader=ud,Ut.PostProcessing=eB,Ut.FanLayer=rB,Ut.FlyLineLayer=oB,Ut.ThreeLayer=m2,Object.defineProperty(Ut,"__esModule",{value:!0})})},18771:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importDefault(Nt(16382)),ce=function(Gt){xe.__extends(Ot,Gt);function Ot(ue){return Gt.call(this,ue)||this}return Ot.prototype.getControl=function(){return new BMapGL.CityListControl(this.getOptions())},Ot.prototype.render=function(){return null},Ot}(Ut.default);se.default=ce},16382:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(39001),ce=xe.__importDefault(Nt(96774)),Gt=Nt(40671),Ot=function(ue){xe.__extends(ve,ue);function ve(ct){var kt=ue.call(this,ct)||this;return kt.options=["anchor","offset"],kt}return ve.prototype.componentDidUpdate=function(ct){if(!this.map){this.initialize();return}var kt=this.props,bt=kt.anchor,Ht=kt.offset,Zt=ct.anchor,he=ct.offset,Ee=!ce.default(bt,Zt),gt=!ce.default(Ht,he);bt&&Ee&&this.control.setAnchor(bt),Ht&&gt&&this.control.setOffset(Ht)},ve.prototype.componentDidMount=function(){this.initialize()},ve.prototype.componentWillUnmount=function(){this.destroy()},ve.prototype.destroy=function(){this.control&&this.map&&!this.map._destroyed&&(this.map.removeControl(this.control),this.control=null)},ve.prototype.initialize=function(){var ct=this.map=this.getMap();!ct||(this.destroy(),this.control=this.getControl(),ct.addControl(this.control))},ve.prototype.getControl=function(){throw new Error("Method getControl not implemented.")},ve.contextType=Gt.MapContext,ve}(Ut.Component);se.default=Ot},15639:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importDefault(Nt(16382)),ce=function(Gt){xe.__extends(Ot,Gt);function Ot(ue){return Gt.call(this,ue)||this}return Ot.prototype.getControl=function(){return new BMapGL.MapTypeControl(this.getOptions())},Ot.prototype.render=function(){return null},Ot}(Ut.default);se.default=ce},32066:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importDefault(Nt(16382)),ce=function(Gt){xe.__extends(Ot,Gt);function Ot(ue){return Gt.call(this,ue)||this}return Ot.prototype.getControl=function(){return new BMapGL.NavigationControl3D(this.getOptions())},Ot.prototype.render=function(){return null},Ot}(Ut.default);se.default=ce},21303:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importDefault(Nt(16382)),ce=function(Gt){xe.__extends(Ot,Gt);function Ot(ue){return Gt.call(this,ue)||this}return Ot.prototype.getControl=function(){return new BMapGL.ScaleControl(this.getOptions())},Ot.prototype.render=function(){return null},Ot}(Ut.default);se.default=ce},36565:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importDefault(Nt(16382)),ce=function(Gt){xe.__extends(Ot,Gt);function Ot(ue){return Gt.call(this,ue)||this}return Ot.prototype.getControl=function(){return new BMapGL.ZoomControl(this.getOptions())},Ot.prototype.render=function(){return null},Ot}(Ut.default);se.default=ce},95e3:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(70507),ce=xe.__importDefault(Nt(96774)),Gt=Nt(39001),Ot="rgba(60, 50, 200, 0.9)",ue=function(ve){xe.__extends(ct,ve);function ct(kt){var bt=ve.call(this,kt)||this;return bt._createLayer=!1,bt}return ct.prototype.componentDidMount=function(){this.initialize()},ct.prototype.componentDidUpdate=function(kt){ce.default(this.props,kt)||this.initialize()},ct.prototype.componentWillUnmount=function(){this.destroy()},ct.prototype.destroy=function(){this._createLayer=!1,this.view.destroy(),this.view=void 0,this.linelayer=void 0,this.arrowlayer=void 0,this.flowlayer=void 0,this.pointlayer=void 0,this.textlayer=void 0,this.colorarrowlayers=[]},ct.prototype.initialize=function(){var kt=this,bt=this.map=this.getMap();if(!!bt){this._createLayer||this.createLayers();var Ht=[],Zt=[],he=new Map;if(this.colorarrowlayers&&this.colorarrowlayers.length)for(var Ee=0;Ee<this.colorarrowlayers.length;Ee++){var gt=this.colorarrowlayers[Ee];this.view.removeLayer(gt)}if(this.colorarrowlayers=[],this.props.data){var Qe=[],Rn=new Ut.OdCurve;this.props.data.forEach(function(An){var Oe=An.from.point||Ut.utilCity.getCenterByCityName(An.from.city),Nn=An.to.point||Ut.utilCity.getCenterByCityName(An.to.city);Oe=new BMapGL.Point(Oe.lng,Oe.lat),Nn=new BMapGL.Point(Nn.lng,Nn.lat),Rn.setOptions({points:[Oe,Nn]});var hi=Rn.getPoints();kt.props.coordType==="bd09mc"?(Qe.push(BMapGL.Projection.convertMC2LL(Oe)),Qe.push(BMapGL.Projection.convertMC2LL(Nn))):(Qe.push(Oe),Qe.push(Nn)),Ht.push({geometry:{type:"LineString",coordinates:hi},color:An.color});var Bi=he.get(An.color)||[];Bi.push({geometry:{type:"LineString",coordinates:hi}}),he.set(An.color,Bi),kt.props.showEndPoint!==!1&&Zt.push({geometry:{type:"Point",coordinates:[Nn.lng,Nn.lat]},color:An.color,properties:{text:An.to.name||An.to.city}}),kt.props.showStartPoint!==!1&&Zt.push({geometry:{type:"Point",coordinates:[Oe.lng,Oe.lat]},color:An.color,properties:{text:An.from.name||An.from.city}}),Qe.length>0&&kt.props.autoViewport===!0&&bt.setViewport(Qe,kt.props.viewportOptions||{})})}this.linelayer.setData(Ht),this.props.lineOptions&&this.linelayer.setOptions(this.props.lineOptions),this.pointlayer.setData(Zt),this.props.pointOptions&&this.pointlayer.setOptions(this.props.pointOptions),this.textlayer.setData(Zt),this.props.textOptions&&this.textlayer.setOptions(this.props.textOptions),Array.from(he.keys()).forEach(function(An){if(An===void 0)kt.arrowlayer.setData(he.get(void 0)),kt.props.arrowOptions&&kt.arrowlayer.setOptions(kt.props.arrowOptions);else{var Oe=new Ut.LineLayer(xe.__assign(xe.__assign({blend:"lighter",width:10},kt.props.arrowOptions),{style:"arrow",color:"rgba(255, 255, 255, 0)",styleOptions:{color:An}}));kt.view.addLayer(Oe),Oe.setData(he.get(An)),kt.colorarrowlayers.push(Oe)}}),this.props.enableAnimation&&(this.flowlayer.setData(Ht),this.props.animationOptions&&this.flowlayer.setOptions(this.props.animationOptions))}},ct.prototype.createLayers=function(){this._createLayer=!0;var kt=this.map,bt=this.view=new Ut.View({map:kt}),Ht=this.linelayer=new Ut.LineLayer({blend:"lighter",color:Ot,width:4});bt.addLayer(Ht);var Zt=this.arrowlayer=new Ut.LineLayer({blend:"lighter",width:10,style:"arrow",color:"rgba(255, 255, 255, 0)",styleOptions:{color:Ot}});bt.addLayer(Zt);var he=this.pointlayer=new Ut.PointLayer({blend:"lighter",depthTest:!1,color:Ot,size:10});bt.addLayer(he);var Ee=this.textlayer=new Ut.TextLayer({offset:[0,15],depthTest:!1,color:"#333"});bt.addLayer(Ee);var gt=this.flowlayer=new Ut.LineLayer({blend:"lighter",color:function(){return"rgb(240, 200, 200)"},width:2,animation:!0,interval:.4,duration:1,trailLength:.8});bt.addLayer(gt)},ct.prototype.render=function(){return null},ct.defaultProps={enableAnimation:!0,showStartPoint:!0,showEndPoint:!0},ct}(Gt.Component);se.default=ue},14901:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importStar(Nt(70507)),ce=xe.__importStar(Nt(98762)),Gt=Nt(39001),Ot=Nt(12840),ue=function(ve){xe.__extends(ct,ve);function ct(kt){var bt=ve.call(this,kt)||this;bt._createLayer=!1;var Ht=bt;return bt.props.getMethods&&bt.props.getMethods({setViewport:bt.setViewport.bind(Ht)}),bt}return ct.prototype.componentDidMount=function(){this.initialize()},ct.prototype.componentWillUnmount=function(){this.destroy()},ct.prototype.componentDidUpdate=function(kt){var bt=this.props,Ht=bt.type,Zt=bt.data,he=bt.options,Ee=bt.autoViewport,gt=kt.type,Qe=kt.data,Rn=kt.options,An=kt.autoViewport;if(!this.map||!this.layer){this.initialize();return}if(Ht!==gt){this.destroy(),this.initialize();return}JSON.stringify(Rn)!==JSON.stringify(he)&&this.layer.setOptions(he),JSON.stringify(Qe)!==JSON.stringify(Zt)&&this.layer.setData(Zt),Ee&&(JSON.stringify(Qe)!==JSON.stringify(Zt)||Ee!==An)&&this.setViewport()},ct.prototype.destroy=function(){this.layer&&this.view&&(this._createLayer=!1,this.view.removeLayer(this.layer),this.layer.destroy(),this.layer=null)},ct.prototype.initialize=function(){var kt=this.map=this.getMap(),bt=this.view=this.props.view||this.context.view;!kt||!bt||(this._createLayer||this.createLayers(),this.layer.setData(this.props.data),this.props.autoViewport&&this.setViewport())},ct.prototype.setViewport=function(){var kt=this.props.coordType==="bd09mc",bt=function(Zt){var he=new BMapGL.Point(Zt[0],Zt[1]);return kt?BMapGL.Projection.convertMC2LL(he):he},Ht=[];this.props.data.forEach(function(Zt){Zt.geometry.type==="Point"?Ht.push(bt(Zt.geometry.coordinates)):Zt.geometry.type==="LineString"?Zt.geometry.coordinates.forEach(function(he){Ht.push(bt(he))}):Zt.geometry.type==="Polygon"?Zt.geometry.coordinates[0].forEach(function(he){Ht.push(bt(he))}):Zt.geometry.type==="MultiPolygon"&&Zt.geometry.coordinates.forEach(function(he){he[0].forEach(function(Ee){Ht.push(bt(Ee))})})}),Ht.length>0&&this.map.setViewport(Ht,this.props.viewportOptions||{})},ct.prototype.createLayers=function(){if(Ut[this.props.type]||ce[this.props.type]){this._createLayer=!0;var kt=Ut[this.props.type]?Ut:ce;this.layer=new kt[this.props.type](this.props.options),this.view.addLayer(this.layer)}else console.error("mapvgl doesn't have layer "+this.props.type+"!")},ct.prototype.render=function(){return null},ct.contextType=Ot.ViewContext,ct}(Gt.Component);se.default=ue},12840:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.ViewContext=void 0;var xe=Nt(65353),Ut=Nt(70507),ce=xe.__importStar(Nt(67294)),Gt=Nt(39001),Ot=Nt(40671);se.ViewContext=ce.default.createContext({view:void 0});var ue=function(ve){xe.__extends(ct,ve);function ct(kt){return ve.call(this,kt)||this}return ct.prototype.componentDidMount=function(){this.initialize(),this.forceUpdate()},ct.prototype.componentWillUnmount=function(){this.view&&(this.view.destroy(),this.view=null)},ct.prototype.componentDidUpdate=function(kt){(!this.map||!this.view)&&this.initialize()},ct.prototype.initialize=function(){var kt=this.map=this.getMap();if(!(!kt||this.view)&&!this.view){var bt=[],Ht=this.props.effects,Zt=this.props.preserveDrawingBuffer;Ht&&Ht.length&&Ht.forEach(function(he){he==="bloom"?bt.push(new Ut.BloomEffect):he==="bright"?bt.push(new Ut.BrightEffect):he==="blur"&&bt.push(new Ut.BlurEffect)}),this.view=new Ut.View({effects:bt,preserveDrawingBuffer:Zt,map:kt})}},ct.prototype.renderChildren=function(kt){var bt=this;if(!(!kt||!this.map||!this.view))return ce.default.Children.map(kt,function(Ht){if(!!Ht)return typeof Ht.type=="string"?Ht:ce.default.cloneElement(Ht,{map:bt.map,view:bt.view})})},ct.prototype.render=function(){return ce.default.createElement(ce.Fragment,null,ce.default.createElement(se.ViewContext.Provider,{value:{map:this.map,view:this.view}},this.renderChildren(this.props.children)))},ct.contextType=Ot.MapContext,ct}(Gt.Component);se.default=ue},39647:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(40671),ce=Nt(39001),Gt=function(Ot){xe.__extends(ue,Ot);function ue(ve){return Ot.call(this,ve)||this}return ue.prototype.componentDidMount=function(){this.initialize()},ue.prototype.componentDidUpdate=function(ve){this.initialize()},ue.prototype.componentWillUnmount=function(){this.destroy()},ue.prototype.destroy=function(){this.tilelayer&&this.map&&!this.map._destroyed&&(this.map.removeTileLayer(this.tilelayer),this.tilelayer=void 0)},ue.prototype.initialize=function(){var ve=this.map=this.getMap();if(!!ve){this.destroy();var ct="pl",kt="20190102",bt=this.tilelayer=new BMapGL.TileLayer({transparentPng:!0});bt.zIndex=110,bt.getTilesUrl=function(Ht,Zt){if(!Ht||Zt<0)return"";var he=Ht.x,Ee=Ht.y,gt="//mapsv0.bdimg.com/tile/?udt="+kt+"&qt=tile&styles="+ct+"&x="+he+"&y="+Ee+"&z="+Zt;return gt},ve.addTileLayer(this.tilelayer)}},ue.prototype.render=function(){return null},ue.contextType=Ut.MapContext,ue}(ce.Component);se.default=Gt},50249:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(40671),ce=Nt(39001),Gt=function(Ot){xe.__extends(ue,Ot);function ue(ve){var ct=Ot.call(this,ve)||this;return ct._showLayer=!1,ct}return ue.prototype.componentDidMount=function(){this.initialize()},ue.prototype.componentDidUpdate=function(ve){this.initialize()},ue.prototype.componentWillUnmount=function(){this._showLayer&&this.map&&!this.map._destroyed&&(this.map.setTrafficOff(),this._showLayer=!1)},ue.prototype.initialize=function(){var ve=this.map=this.getMap();!ve||this._showLayer||(ve.setTrafficOn(),this._showLayer=!0)},ue.prototype.render=function(){return null},ue.contextType=Ut.MapContext,ue}(ce.Component);se.default=Gt},34418:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(39001),ce=Nt(77233),Gt=xe.__importStar(Nt(77818)),Ot=Nt(40671),ue=["drawend","addpoint","removepolyline"],ve={},ct=function(kt){xe.__extends(bt,kt);function bt(Ht){var Zt=kt.call(this,Ht)||this;return Zt.options=["tips","followText","unit","lineColor","lineStroke","opacity","lineStyle","cursor","secIcon","closeIcon"],Zt}return bt.prototype.componentDidMount=function(){this.initialize()},bt.prototype.componentWillUnmount=function(){this.destroy()},bt.prototype.destroy=function(){this.distancetool&&(this.distancetool.close(),this.instance=this.distancetool=void 0)},bt.prototype.initialize=function(){var Ht=this,Zt=this.map=this.getMap();if(!!Zt){this.destroy();var he=this.getOptions();if(window.BMapGLLib&&BMapGLLib.DistanceTool&&(this.instance=this.distancetool=new BMapGLLib.DistanceTool(Zt,he),this.props.defaultOpen&&this.distancetool.open()),!window.BMapGLLib||!BMapGLLib.DistanceTool){var Ee=this.props.scriptUrl||"//mapopen.bj.bcebos.com/github/BMapGLLib/DistanceTool/src/DistanceTool.js";ce.requireScript(Ee).then(function(){Ht.instance=Ht.distancetool=new BMapGLLib.DistanceTool(Zt,he),Gt.registerEvents(Ht,Ht.getInstance(Ht),ue),Gt.toggleMethods(Ht,Ht.getInstance(Ht),ve),Ht.props.defaultOpen&&Ht.distancetool.open()})}}},bt.prototype.render=function(){return null},bt.contextType=Ot.MapContext,bt}(Ut.Component);ct.defaultProps={defaultOpen:!0},se.default=Gt.default(ct,ue,ve)},77079:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importDefault(Nt(67294)),ce=Nt(39001),Gt=Nt(77233),Ot=xe.__importStar(Nt(77818)),ue=Nt(40671),ve=["overlaycomplete","overlaycancel"],ct={enableCalculate:["enableCalculate","disableCalculate"],enableSorption:["enableSorption","disableSorption"],enableGpc:["enableGpc","disableGpc"]},kt={strokeColor:"#5E87DB",fillColor:"#5E87DB",strokeWeight:2,strokeOpacity:1,fillOpacity:.2},bt={borderRadius:"2px",background:"#FFFBCC",border:"1px solid #E1E1E1",color:"#703A04",fontSize:"12px",letterSpacing:"0",padding:"5px"},Ht=function(Zt){xe.__extends(he,Zt);function he(Ee){var gt=Zt.call(this,Ee)||this;return gt.el=Ut.default.createRef(),gt.options=["isOpen","drawingMode","enableDrawingTool","enableCalculate","enableSorption","enableGpc","enableLimit","sorptionDistance","limitOptions","drawingToolOptions","markerOptions","circleOptions","polylineOptions","polygonOptions","rectangleOptions","labelOptions"],gt}return he.prototype.componentDidMount=function(){this.initialize()},he.prototype.componentWillUnmount=function(){this.destroy()},he.prototype.destroy=function(){this.drawingmanager&&(this.drawingmanager.close(),this.instance=this.drawingmanager=void 0)},he.prototype.initialize=function(){var Ee=this,gt=this.map=this.getMap();if(!!gt){this.destroy();for(var Qe=this.getOptions(),Rn=["circleOptions","polylineOptions","polygonOptions","rectangleOptions"],An=0;An<Rn.length;An++){var Oe=Rn[An];Qe[Oe]||(Qe[Oe]=kt)}if(Qe.labelOptions||(Qe.labelOptions=bt),Qe.drawingToolOptions.customContainer=this.el.current,window.BMapGLLib&&BMapGLLib.DrawingManager&&(this.instance=this.drawingmanager=new BMapGLLib.DrawingManager(gt,Qe)),!window.BMapGLLib||!BMapGLLib.DrawingManager){var Nn=this.props.cssUrl||"//mapopen.bj.bcebos.com/github/BMapGLLib/DrawingManager/src/DrawingManager.min.css",hi=this.props.scriptUrl||"//mapopen.bj.bcebos.com/github/BMapGLLib/DrawingManager/src/DrawingManager.min.js";Gt.requireCss(Nn).then(function(){}),Gt.requireScript(hi).then(function(){Ee.instance=Ee.drawingmanager=new BMapGLLib.DrawingManager(gt,Qe),Ot.registerEvents(Ee,Ee.getInstance(Ee),ve),Ot.toggleMethods(Ee,Ee.getInstance(Ee),ct)})}}},he.prototype.render=function(){return Ut.default.createElement("div",{className:"react-bmapgl-drawingmanager",ref:this.el,style:this.props.style})},he.contextType=ue.MapContext,he}(ce.Component);Ht.defaultProps={isOpen:!1,enableDrawingTool:!0,enableCalculate:!1,enableSorption:!1,enableGpc:!1,enableLimit:!1,sorptionDistance:20,limitOptions:{area:5e7,distance:3e4},drawingToolOptions:{},style:{position:"absolute",left:0,top:0,width:360}},se.default=Ot.default(Ht,ve,ct)},40671:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.MapContext=void 0;var xe=Nt(65353),Ut=xe.__importDefault(Nt(67294)),ce=Nt(39001),Gt=xe.__importDefault(Nt(77818)),Ot=xe.__importDefault(Nt(96774)),ue=xe.__importDefault(Nt(62155)),ve=["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],ct={enableScrollWheelZoom:["enableScrollWheelZoom","disableScrollWheelZoom"],enableDragging:["enableDragging","disableDragging"],enableDoubleClickZoom:["enableDoubleClickZoom","disableDoubleClickZoom"],enableKeyboard:["enableKeyboard","disableKeyboard"],enableInertialDragging:["enableInertialDragging","disableInertialDragging"],enableContinuousZoom:["enableContinuousZoom","disableContinuousZoom"],enablePinchToZoom:["enablePinchToZoom","disablePinchToZoom"],enableRotate:["enableRotate","disableRotate"],enableTilt:["enableTilt","disableTilt"],enableAutoResize:["enableAutoResize","disableAutoResize"]};se.MapContext=Ut.default.createContext({map:void 0});var kt=function(Ht){xe.__extends(Zt,Ht);function Zt(he){var Ee=Ht.call(this,he)||this;return Ee.el=Ut.default.createRef(),Ee.options=["minZoom","maxZoom","mapType","backgroundColor","displayOptions"],Ee}return Zt.prototype.componentDidMount=function(){this.initialize(),this.forceUpdate()},Zt.prototype.componentDidUpdate=function(he){var Ee=he.center,gt=he.zoom,Qe=this.props,Rn=Qe.center,An=Qe.zoom,Oe=!!Rn&&!Ot.default(Ee,Rn),Nn=!!(An&&!Ot.default(gt,An)),hi;if(ue.default(Rn))hi=Rn;else{var Bi=Rn,mo=Bi.lng,ns=Bi.lat;hi=new BMapGL.Point(mo,ns)}Oe&&Nn?this.map.centerAndZoom(hi,An):Oe?this.map.setCenter(hi):Nn&&this.map.setZoom(An)},Zt.prototype.componentWillUnmount=function(){this.map&&(this.map.destroy(),this.instance=this.map=void 0)},Zt.prototype.initialize=function(){if(!this.map){var he=Object.assign({},this.props.defaultOptions,this.getOptions());he.mapType&&(he.mapType=he.mapType==="normal"?BMAP_NORMAL_MAP:he.mapType,he.mapType=he.mapType==="earth"?BMAP_EARTH_MAP:he.mapType),this.props.mapStyleV2&&(he.style=this.props.mapStyleV2);var Ee=new BMapGL.Map(this.el.current,he);if(this.map=Ee,this.instance=Ee,ue.default(this.props.center))Ee.centerAndZoom(this.props.center,this.props.zoom);else{var gt=this.props.center,Qe=gt.lng,Rn=gt.lat,An=new BMapGL.Point(Qe,Rn);Ee.centerAndZoom(An,this.props.zoom)}this.props.heading&&Ee.setHeading(this.props.heading),this.props.tilt&&Ee.setTilt(this.props.tilt)}},Zt.prototype.renderChildren=function(he,Ee){var gt=this;if(!(!he||!Ee))return Ut.default.Children.map(he,function(Qe){return Qe?typeof Qe.type=="string"||!Qe.props?Qe:Ut.default.cloneElement(Qe,{map:Ee},gt.renderChildren(Qe.props.children,Ee)):null})},Zt.prototype.render=function(){return Ut.default.createElement("div",{style:this.props.style},Ut.default.createElement("div",{ref:this.el,className:this.props.className,style:{height:"100%"}},"\u52A0\u8F7D\u5730\u56FE\u4E2D..."),Ut.default.createElement(se.MapContext.Provider,{value:{map:this.map}},this.renderChildren(this.props.children,this.map)))},Zt}(ce.Component);kt.defaultProps={center:{lng:116.404449,lat:39.914889},zoom:12,defaultOptions:{},style:{position:"relative",height:"360px"}},se.default=Gt.default(kt,ve,ct);var bt=Nt(44605);Object.defineProperty(se,"MapApiLoaderHOC",{enumerable:!0,get:function(){return bt.default}})},44605:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importStar(Nt(67294)),ce=xe.__importDefault(Nt(36608));se.default=function(Gt){return function(Ot){var ue;return ue=function(ve){xe.__extends(ct,ve);function ct(kt){var bt=ve.call(this,kt)||this;return bt.state={loaded:bt.isLoadReady()},bt.loadJSAPI=bt.loadJSAPI.bind(bt),bt.handleLoaded=bt.handleLoaded.bind(bt),bt}return ct.prototype.isLoadReady=function(){return!!(window.BMapGL&&window.BMapGL.Map)},ct.prototype.componentDidMount=function(){if(!this.isLoadReady()){if(!Gt.ak)throw new TypeError("MapApiLoaderHOC: ak is required");this.loadJSAPI()}},ct.prototype.componentWillUnmount=function(){this.apiTimer&&clearTimeout(this.apiTimer),this.loadedTimer&&clearTimeout(this.loadedTimer)},ct.prototype.loadJSAPI=function(){var kt=this;if(this.isLoadReady()){this.handleLoaded();return}if(window.loadingMap)this.apiTimer=window.setTimeout(function(){kt.loadJSAPI()},300);else if(!window.MapApiLoaderCallback){window.loadingMap=!0,window.MapApiLoaderCallback=function(){delete window.loadingMap,delete window.MapApiLoaderCallback};var bt=Gt.ak,Ht=Gt.booter,Zt=document.createElement("script");Zt.type="text/javascript",Zt.src="//api.map.baidu.com/api?type=webgl&v=1.0&ak="+bt+"&callback=MapApiLoaderCallback",Ht&&(window.BMAP_AUTHENTIC_KEY=bt,Zt.src=Ht),document.body.appendChild(Zt),this.loadedTimer=window.setTimeout(function(){kt.handleLoaded()},300)}},ct.prototype.handleLoaded=function(){var kt=this;if(!this.isLoadReady()){this.loadedTimer=window.setTimeout(function(){kt.handleLoaded()},300);return}this.setState({loaded:!0})},ct.prototype.render=function(){var kt=this.state.loaded;return kt?Ut.default.createElement(Ot,xe.__assign({},this.props)):Ut.default.createElement("div",null,"loading...")},ct}(Ut.Component),ue.displayName="MapApiLoaderHOC("+ce.default(Ot)+")",ue}}},74989:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importDefault(Nt(14746)),ce=xe.__importDefault(Nt(96774)),Gt=function(Ot){xe.__extends(ue,Ot);function ue(ve){var ct=Ot.call(this,ve)||this;return ct.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","enableMassClear","enableEditing"],ct}return ue.prototype.onDataUpdate=function(ve){var ct=this.props,kt=ct.center,bt=ct.radius,Ht=ct.autoViewport,Zt=ve.center,he=ve.radius,Ee=ve.autoViewport,gt=kt&&!ce.default(kt,Zt),Qe=!!(bt&&!ce.default(bt,he)),Rn=!ce.default(Ht,Ee);if(gt&&this.overlay.setCenter(this.parseCenter(kt)),Qe&&this.overlay.setRadius(bt),Ht&&(gt||Qe||Rn)){var An=this.overlay.getBounds(),Oe=this.props.map.getViewport(An,this.props.viewportOptions||{});this.props.map.setViewport(Oe)}},ue.prototype.getOverlay=function(){var ve=this.props,ct=ve.center,kt=ve.radius;return new BMapGL.Circle(this.parseCenter(ct),kt,this.getOptions())},ue.prototype.parseCenter=function(ve){var ct=this.props.coordType==="bd09mc",kt;return ve instanceof Array?kt=new BMapGL.Point(ve[0],ve[1]):ve instanceof BMapGL.Point?kt=ve:kt=new BMapGL.Point(ve.lng,ve.lat),ct&&(kt=BMapGL.Projection.convertMC2LL(kt)),kt},ue.prototype.render=function(){return null},ue}(Ut.default);se.default=Gt},23358:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(39001),ce=xe.__importDefault(Nt(96774)),Gt=xe.__importDefault(Nt(92425)),Ot=Nt(40671),ue=function(ve){xe.__extends(ct,ve);function ct(kt){var bt=ve.call(this,kt)||this;return bt.options=["zIndex","offset","unit"],bt}return ct.prototype.componentDidUpdate=function(kt){ce.default(this.props,kt)||this.initialize()},ct.prototype.componentDidMount=function(){this.initialize()},ct.prototype.componentWillUnmount=function(){this.destroy()},ct.prototype.destroy=function(){this.overlay&&this.map&&!this.map._destroyed&&(this.overlay.destroy(),this.map.removeOverlay(this.overlay),this.instance=this.overlay=void 0)},ct.prototype.initialize=function(){var kt=this.map=this.getMap();if(!!kt){this.destroy();var bt=this.getOptions();bt.html=this.props.children;var Ht=this.parsePosition(this.props.position);this.instance=this.overlay=new Gt.default(Ht,bt),kt.addOverlay(this.overlay),this.props.autoViewport&&kt.setCenter(Ht)}},ct.prototype.parsePosition=function(kt){var bt=this.props.coordType==="bd09mc",Ht;return kt instanceof Array?Ht=new BMapGL.Point(kt[0],kt[1]):kt instanceof BMapGL.Point?Ht=kt:Ht=new BMapGL.Point(kt.lng,kt.lat),bt&&(Ht=BMapGL.Projection.convertMC2LL(Ht)),Ht},ct.prototype.render=function(){return null},ct.contextType=Ot.MapContext,ct}(Ut.Component);se.default=ue},92425:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(73935);function Ut(ce,Gt){this._point=new BMapGL.Point(ce.lng,ce.lat),this._options=Gt||{},this._html=Gt.html||"";var Ot=new BMapGL.Overlay;for(var ue in Ot)ue!=="initialize"&&ue!=="draw"&&ue!=="destroy"&&(this.__proto__[ue]=Ot[ue])}Ut.prototype.initialize=function(ce){return this._map=ce,this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.zIndex=this._options.zIndex||BMapGL.Overlay.getZIndex(this._point.lat),xe.render(this._html,this._div),this._div.onmousedown=function(Gt){return Gt=Gt||window.event,Gt.preventDefault?Gt.preventDefault():Gt.returnValue=!1,!1},ce.getPanes().floatShadow.appendChild(this._div),this._div},Ut.prototype.destroy=function(){xe.unmountComponentAtNode(this._div)},Ut.prototype.draw=function(){var ce=this._map,Gt=ce.pointToOverlayPixel(this._point),Ot={width:0,height:0};this._options&&this._options.offset&&(Ot=this._options.offset);var ue=Ot.width,ve=Ot.height;this._options&&this._options.unit&&this._options.unit==="m"&&(ue/=ce.getZoomUnits(),ve/=ce.getZoomUnits()),this._div.style.left=Gt.x+ue+"px",this._div.style.top=Gt.y+ve+"px",this._div.style.transform="translate(-50%, -100%)"},se.default=Ut},14746:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(39001),ce=xe.__importDefault(Nt(77818)),Gt=xe.__importDefault(Nt(96774)),Ot=Nt(40671),ue=["click","dblclick","rightclick","mousedown","mouseup","mouseout","mouseover","mousemove","remove","lineupdate"],ve={enableMassClear:["enableMassClear","disableMassClear"],enableEditing:["enableEditing","disableEditing"]},ct=function(kt){xe.__extends(bt,kt);function bt(Ht){var Zt=kt.call(this,Ht)||this;return Zt.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","enableMassClear","enableEditing","enableClicking"],Zt}return bt.prototype.componentDidUpdate=function(Ht){var Zt=this.props,he=Zt.strokeColor,Ee=Zt.strokeWeight,gt=Zt.strokeOpacity,Qe=Zt.strokeStyle,Rn=Zt.fillColor,An=Zt.fillOpacity,Oe=Ht.strokeColor,Nn=Ht.strokeWeight,hi=Ht.strokeOpacity,Bi=Ht.strokeStyle,mo=Ht.fillColor,ns=Ht.fillOpacity,ci=!Gt.default(he,Oe),Ui=!Gt.default(Ee,Nn),Je=!Gt.default(gt,hi),ks=!Gt.default(Qe,Bi),MA=!Gt.default(Rn,mo),eA=!Gt.default(An,ns);(ci||Ui||Je||ks||MA||eA)&&this.overlay.setOptions(this.getOptions()),this.onDataUpdate(Ht)},bt.prototype.componentDidMount=function(){this.initialize()},bt.prototype.componentWillUnmount=function(){this.destroy()},bt.prototype.destroy=function(){this.overlay&&this.map&&!this.map._destroyed&&(this.map.removeOverlay(this.overlay),this.instance=this.overlay=void 0)},bt.prototype.initialize=function(){var Ht=this.map=this.getMap();if(!!Ht){this.destroy(),this.instance=this.overlay=this.getOverlay(),Ht.addOverlay(this.overlay);var Zt;if(this.overlay instanceof BMapGL.Polyline||this.overlay instanceof BMapGL.Polygon){var he=this.overlay.getPath();Zt=Ht.getViewport(he,this.props.viewportOptions||{})}else if(this.overlay instanceof BMapGL.Circle){var Ee=this.overlay.getBounds();Zt=Ht.getViewport(Ee,this.props.viewportOptions||{})}Zt&&this.props.autoViewport&&Ht.setViewport(Zt)}},bt.prototype.getOverlay=function(){throw new Error("Method getOverlay not implemented.")},bt.prototype.onDataUpdate=function(Ht){throw new Error("Method onDataUpdate not implemented.")},bt.contextType=Ot.MapContext,bt}(Ut.Component);se.default=ce.default(ct,ue,ve)},92725:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(39001),ce=xe.__importDefault(Nt(77818)),Gt=Nt(73935),Ot=Nt(40671),ue=["close","open","maximize","restore","clickclose"],ve={enableMaximize:["enableMaximize","disableMaximize"],enableAutoPan:["enableAutoPan","disableAutoPan"],enableCloseOnClick:["enableCloseOnClick","disableCloseOnClick"]},ct=function(kt){xe.__extends(bt,kt);function bt(Ht){var Zt=kt.call(this,Ht)||this;return Zt.options=["width","height","maxWidth","offset","title","enableMassClear"],Zt}return bt.prototype.componentDidUpdate=function(Ht){this.initialize()},bt.prototype.componentDidMount=function(){this.initialize()},bt.prototype.componentWillUnmount=function(){this.destroy()},bt.prototype.destroy=function(){this.content&&Gt.unmountComponentAtNode(this.content),this.infoWindow&&this.map&&!this.map._destroyed&&(this.map.closeInfoWindow(),this.instance=this.infoWindow=void 0)},bt.prototype.initialize=function(){var Ht=this.map=this.getMap();if(!!Ht){this.destroy();var Zt=this.getOptions(),he=this.parsePosition(this.props.position);if(this.instance=this.infoWindow=new BMapGL.InfoWindow(this.props.text||"",Zt),Ht.openInfoWindow(this.infoWindow,he),this.props.children!==void 0){var Ee=this.content=document.createElement("div");Gt.render(this.props.children,Ee),this.infoWindow.setContent(Ee)}}},bt.prototype.parsePosition=function(Ht){var Zt=this.props.coordType==="bd09mc",he;return Ht instanceof Array?he=new BMapGL.Point(Ht[0],Ht[1]):Ht instanceof BMapGL.Point?he=Ht:he=new BMapGL.Point(Ht.lng,Ht.lat),Zt&&(he=BMapGL.Projection.convertMC2LL(he)),he},bt.prototype.render=function(){return null},bt.contextType=Ot.MapContext,bt}(Ut.Component);ct.defaultProps={},se.default=ce.default(ct,ue,ve)},38845:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(39001),ce=xe.__importDefault(Nt(77818)),Gt=xe.__importDefault(Nt(96774)),Ot=Nt(40671),ue=["click","dblclick","rightclick","mousedown","mouseup","mouseout","mouseover","mousemove","remove"],ve={enableMassClear:["enableMassClear","disableMassClear"]},ct=function(kt){xe.__extends(bt,kt);function bt(Ht){var Zt=kt.call(this,Ht)||this;return Zt.options=["position","offset","enableMassClear"],Zt}return bt.prototype.componentDidUpdate=function(Ht){var Zt=this.props,he=Zt.position,Ee=Zt.offset,gt=Zt.text,Qe=Zt.style,Rn=Ht.position,An=Ht.offset,Oe=Ht.text,Nn=Ht.style,hi=he&&!Gt.default(he,Rn),Bi=!!(Ee&&!Gt.default(Ee,An)),mo=!Gt.default(gt,Oe),ns=!!(Qe&&!Gt.default(Qe,Nn)),ci=this.parsePosition(he);hi&&this.label.setPosition(ci),Bi&&this.label.setOffset(Ee),mo&&this.label.setContent(gt),ns&&this.label.setStyle(Qe)},bt.prototype.componentDidMount=function(){this.initialize()},bt.prototype.componentWillUnmount=function(){this.destroy()},bt.prototype.destroy=function(){this.label&&this.map&&!this.map._destroyed&&(this.map.removeOverlay(this.label),this.instance=this.label=void 0)},bt.prototype.initialize=function(){var Ht=this.map=this.getMap();if(!!Ht){this.destroy();var Zt=this.getOptions(),he=this.parsePosition(this.props.position);Zt.position=he,this.instance=this.label=new BMapGL.Label(this.props.text||"",Zt),Ht.addOverlay(this.label),this.props.style&&this.label.setStyle(this.props.style)}},bt.prototype.parsePosition=function(Ht){var Zt=this.props.coordType==="bd09mc",he;return Ht instanceof Array?he=new BMapGL.Point(Ht[0],Ht[1]):Ht instanceof BMapGL.Point?he=Ht:he=new BMapGL.Point(Ht.lng,Ht.lat),Zt&&(he=BMapGL.Projection.convertMC2LL(he)),he},bt.prototype.render=function(){return null},bt.contextType=Ot.MapContext,bt}(Ut.Component);ct.defaultProps={style:{color:"red"}},se.default=ce.default(ct,ue,ve)},5848:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(39001),ce=xe.__importDefault(Nt(77818)),Gt=xe.__importDefault(Nt(96774)),Ot=Nt(40671);function ue(){for(var bt="//mapopen.bj.bcebos.com/cms/react-bmap/markers_new2x_fbb9e99.png",Ht={simple_red:new BMapGL.Icon(bt,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(454/2,378/2),imageSize:new BMapGL.Size(600/2,600/2)}),simple_blue:new BMapGL.Icon(bt,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(454/2,450/2),imageSize:new BMapGL.Size(600/2,600/2)}),loc_red:new BMapGL.Icon(bt,new BMapGL.Size(46/2,70/2),{imageOffset:new BMapGL.Size(400/2,378/2),imageSize:new BMapGL.Size(600/2,600/2)}),loc_blue:new BMapGL.Icon(bt,new BMapGL.Size(46/2,70/2),{imageOffset:new BMapGL.Size(400/2,450/2),imageSize:new BMapGL.Size(600/2,600/2)}),start:new BMapGL.Icon(bt,new BMapGL.Size(50/2,80/2),{imageOffset:new BMapGL.Size(400/2,278/2),imageSize:new BMapGL.Size(600/2,600/2)}),end:new BMapGL.Icon(bt,new BMapGL.Size(50/2,80/2),{imageOffset:new BMapGL.Size(450/2,278/2),imageSize:new BMapGL.Size(600/2,600/2)}),location:new BMapGL.Icon(bt,new BMapGL.Size(28/2,40/2),{imageOffset:new BMapGL.Size(248/2,466/2),imageSize:new BMapGL.Size(600/2,600/2)})},Zt=1;Zt<=10;Zt++)Ht["red"+Zt]=new BMapGL.Icon(bt,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(42/2*(Zt-1),0),imageSize:new BMapGL.Size(600/2,600/2)});for(var Zt=1;Zt<=10;Zt++)Ht["blue"+Zt]=new BMapGL.Icon(bt,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(42/2*(Zt-1),132/2),imageSize:new BMapGL.Size(600/2,600/2)});return Ht}var ve=["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],ct={enableMassClear:["enableMassClear","disableMassClear"],enableDragging:["enableDragging","disableDragging"]},kt=function(bt){xe.__extends(Ht,bt);function Ht(Zt){var he=bt.call(this,Zt)||this;return he.options=["offset","icon","enableMassClear","enableDragging","enableClicking","raiseOnDrag","draggingCursor","rotation","title"],he.defaultIcons=ue(),he}return Ht.prototype.componentDidUpdate=function(Zt){if(!this.map){this.initialize();return}var he=this.props,Ee=he.position,gt=he.icon,Qe=he.autoViewport,Rn=he.offset,An=he.isTop,Oe=Zt.position,Nn=Zt.icon,hi=Zt.autoViewport,Bi=Zt.offset,mo=Zt.isTop,ns=Ee&&!Gt.default(Ee,Oe),ci=!!(gt&&!Gt.default(gt,Nn)),Ui=!Gt.default(Qe,hi),Je=!!(Rn&&!Gt.default(Rn,Bi)),ks=!Gt.default(An,mo),MA=this.parsePosition(Ee);if(ns&&this.marker.setPosition(MA),ci){var eA=this.parseIcon(gt);this.marker.setIcon(eA)}Je&&this.marker.setOffset(Rn),ks&&this.marker.setTop(!!An),Qe&&(ns||Ui)&&this.map.setCenter(MA)},Ht.prototype.componentDidMount=function(){this.initialize()},Ht.prototype.componentWillUnmount=function(){this.destroy()},Ht.prototype.destroy=function(){this.marker&&this.map&&!this.map._destroyed&&(this.map.removeOverlay(this.marker),this.instance=this.marker=void 0)},Ht.prototype.initialize=function(){var Zt=this.map=this.getMap();if(!!Zt){this.destroy();var he=this.parseIcon(this.props.icon),Ee=this.parsePosition(this.props.position),gt=this.getOptions();gt.icon=he,this.instance=this.marker=new BMapGL.Marker(Ee,gt),this.props.isTop&&this.marker.setTop(!0),Zt.addOverlay(this.marker),this.props.autoViewport&&Zt.setCenter(Ee)}},Ht.prototype.parsePosition=function(Zt){var he=this.props.coordType==="bd09mc",Ee;return Zt instanceof Array?Ee=new BMapGL.Point(Zt[0],Zt[1]):Zt instanceof BMapGL.Point?Ee=Zt:Ee=new BMapGL.Point(Zt.lng,Zt.lat),he&&(Ee=BMapGL.Projection.convertMC2LL(Ee)),Ee},Ht.prototype.parseIcon=function(Zt){var he;return Zt&&Zt instanceof BMapGL.Icon?he=Zt:Zt&&this.defaultIcons[Zt]?he=this.defaultIcons[Zt]:he=this.defaultIcons.simple_red,he},Ht.prototype.render=function(){return null},Ht.contextType=Ot.MapContext,Ht}(Ut.Component);kt.defaultProps={icon:"simple_red"},se.default=ce.default(kt,ve,ct)},53950:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importDefault(Nt(14746)),ce=xe.__importDefault(Nt(96774)),Gt=function(Ot){xe.__extends(ue,Ot);function ue(ve){var ct=Ot.call(this,ve)||this;return ct.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","enableMassClear","enableEditing"],ct}return ue.prototype.onDataUpdate=function(ve){var ct=this.props,kt=ct.path,bt=ct.autoViewport,Ht=ve.path,Zt=ve.autoViewport,he=kt&&!ce.default(kt,Ht),Ee=!ce.default(bt,Zt);if(he&&this.overlay.setPath(this.parsePath(kt)),bt&&(he||Ee)){var gt=this.overlay.getPath(),Qe=this.props.map.getViewport(gt,this.props.viewportOptions||{});this.props.map.setViewport(Qe)}},ue.prototype.getOverlay=function(){var ve=this.parsePath(this.props.path);return new BMapGL.Polygon(ve,this.getOptions())},ue.prototype.parsePath=function(ve){var ct=this.props.coordType==="bd09mc",kt=ve.map(function(bt){var Ht;return bt instanceof Array?Ht=new BMapGL.Point(bt[0],bt[1]):bt instanceof BMapGL.Point?Ht=bt:Ht=new BMapGL.Point(bt.lng,bt.lat),ct&&(Ht=BMapGL.Projection.convertMC2LL(Ht)),Ht});return kt},ue.prototype.render=function(){return null},ue}(Ut.default);se.default=Gt},37636:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importDefault(Nt(14746)),ce=xe.__importDefault(Nt(96774)),Gt=function(Ot){xe.__extends(ue,Ot);function ue(ve){var ct=Ot.call(this,ve)||this;return ct.options=["strokeColor","strokeWeight","strokeOpacity","strokeStyle","dashArray","enableMassClear","enableEditing"],ct}return ue.prototype.onDataUpdate=function(ve){var ct=this.props,kt=ct.path,bt=ct.autoViewport,Ht=ve.path,Zt=ve.autoViewport,he=kt&&!ce.default(kt,Ht),Ee=!ce.default(bt,Zt);if(he&&this.overlay.setPath(this.parsePath(kt)),bt&&(he||Ee)){var gt=this.overlay.getPath(),Qe=this.props.map.getViewport(gt,this.props.viewportOptions||{});this.props.map.setViewport(Qe)}},ue.prototype.getOverlay=function(){var ve=this.parsePath(this.props.path);return new BMapGL.Polyline(ve,this.getOptions())},ue.prototype.parsePath=function(ve){var ct=this.props.coordType==="bd09mc",kt=ve.map(function(bt){var Ht;return bt instanceof Array?Ht=new BMapGL.Point(bt[0],bt[1]):bt instanceof BMapGL.Point?Ht=bt:Ht=new BMapGL.Point(bt.lng,bt.lat),ct&&(Ht=BMapGL.Projection.convertMC2LL(Ht)),Ht});return kt},ue.prototype.render=function(){return null},ue}(Ut.default);se.default=Gt},66242:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=xe.__importStar(Nt(67294)),ce=Nt(39001),Gt=xe.__importDefault(Nt(77818)),Ot=["confirm","highlight"],ue={},ve=function(ct){xe.__extends(kt,ct);function kt(bt){var Ht=ct.call(this,bt)||this;return Ht.el=Ut.default.createRef(),Ht.options=["location","onSearchComplete","input","types"],Ht}return kt.prototype.componentDidMount=function(){this.initialize()},kt.prototype.componentWillUnmount=function(){this.destroy()},kt.prototype.destroy=function(){this.ac&&(this.ac.dispose(),this.instance=this.ac=void 0)},kt.prototype.initialize=function(){this.destroy();var bt=this.getOptions();bt.input||(bt.input=this.el.current),this.ac=this.instance=new BMapGL.Autocomplete(bt)},kt.prototype.render=function(){return Ut.default.createElement(Ut.Fragment,null,!this.props.input&&Ut.default.createElement("input",{className:"react-bmapgl-autocomplete",ref:this.el,style:this.props.style}))},kt}(ce.Component);ve.defaultProps={},se.default=Gt.default(ve,Ot,ue)},19549:function(){"use strict";window._hmt_private||(window._hmt=window._hmt||[],function(){var wn=document.createElement("script");wn.src="https://hm.baidu.com/hm.js?b97569d26a525941d8d163729d284198";var se=document.getElementsByTagName("script")[0];se.parentNode.insertBefore(wn,se)}())},13425:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353),Ut=Nt(67294),ce=function(Gt){xe.__extends(Ot,Gt);function Ot(){var ue=Gt!==null&&Gt.apply(this,arguments)||this;return ue.options=[],ue}return Ot.prototype.getMap=function(){return this.props.map||this.context.map},Ot.prototype.getInstance=function(ue){return ue.instance},Ot.prototype.getOptions=function(ue){ue===void 0&&(ue=this.props);var ve={};return this.options.map(function(ct){ue[ct]!==void 0&&(ve[ct]=ue[ct])}),ve},Ot}(Ut.PureComponent);se.default=ce},77818:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.toggleMethods=se.unregisterEvents=se.registerEvents=void 0;var xe=Nt(65353),Ut=xe.__importDefault(Nt(96774));function ce(kt,bt,Ht){Ht&&bt&&bt.addEventListener&&(kt.registeredEvents={},Ht.forEach(function(Zt){var he="on"+Zt.substr(0,1).toUpperCase()+Zt.substr(1);kt.props[he]&&typeof kt.props[he]=="function"&&(bt.addEventListener(Zt,kt.props[he]),kt.registeredEvents[Zt]=kt.props[he])}))}se.registerEvents=ce;function Gt(kt,bt){kt.registeredEvents&&bt&&bt.removeEventListener&&(Object.keys(kt.registeredEvents).forEach(function(Ht){bt.removeEventListener(Ht,kt.registeredEvents[Ht])}),kt.registeredEvents=null)}se.unregisterEvents=Gt;function Ot(kt,bt,Ht,Zt){Ht&&bt&&Object.keys(Ht).forEach(function(he){(Zt===void 0&&kt.props[he]!==void 0||Zt!==void 0&&!Ut.default(kt.props[he],Zt[he]))&&(kt.props[he]?bt&&bt[Ht[he][0]]():bt&&bt[Ht[he][1]]())})}se.toggleMethods=Ot;function ue(kt,bt){var Ht=kt.prototype.getInstance,Zt=kt.prototype.componentDidMount,he=kt.prototype.componentDidUpdate;return Ht&&bt&&Object.keys(bt).length>0&&(kt.prototype.componentDidMount=function(){Zt&&Zt.call(this),Ot(this,Ht(this),bt)},kt.prototype.componentDidUpdate=function(Ee,gt){Ot(this,Ht(this),bt,Ee),he&&he.call(this,Ee,gt)}),kt}function ve(kt,bt){var Ht=kt.prototype.getInstance,Zt=kt.prototype.componentDidUpdate,he=kt.prototype.componentDidMount,Ee=kt.prototype.componentWillUnmount;return bt&&bt.length>0&&(kt.prototype.componentDidMount=function(){he&&he.call(this),ce(this,Ht(this),bt)},kt.prototype.componentDidUpdate=function(gt,Qe){Ut.default(this.props,gt)||Gt(this,Ht(this)),Zt&&Zt.call(this,gt,Qe),Ut.default(this.props,gt)||ce(this,Ht(this),bt)},kt.prototype.componentWillUnmount=function(){Gt(this,Ht(this)),Ee&&Ee.call(this)}),kt}function ct(kt,bt,Ht){var Zt=ue(kt,Ht);return Zt=ve(Zt,bt),Zt}se.default=ct},39001:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(77818);Object.defineProperty(se,"Wrapper",{enumerable:!0,get:function(){return xe.default}});var Ut=Nt(13425);Object.defineProperty(se,"Component",{enumerable:!0,get:function(){return Ut.default}})},5195:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353);Nt(19549);var Ut=Nt(40671);Object.defineProperty(se,"Map",{enumerable:!0,get:function(){return Ut.default}});var ce=Nt(44605);Object.defineProperty(se,"MapApiLoaderHOC",{enumerable:!0,get:function(){return ce.default}});var Gt=Nt(15639);Object.defineProperty(se,"MapTypeControl",{enumerable:!0,get:function(){return Gt.default}});var Ot=Nt(21303);Object.defineProperty(se,"ScaleControl",{enumerable:!0,get:function(){return Ot.default}});var ue=Nt(36565);Object.defineProperty(se,"ZoomControl",{enumerable:!0,get:function(){return ue.default}});var ve=Nt(32066);Object.defineProperty(se,"NavigationControl",{enumerable:!0,get:function(){return ve.default}});var ct=Nt(18771);Object.defineProperty(se,"CityListControl",{enumerable:!0,get:function(){return ct.default}});var kt=Nt(5848);Object.defineProperty(se,"Marker",{enumerable:!0,get:function(){return kt.default}});var bt=Nt(37636);Object.defineProperty(se,"Polyline",{enumerable:!0,get:function(){return bt.default}});var Ht=Nt(53950);Object.defineProperty(se,"Polygon",{enumerable:!0,get:function(){return Ht.default}});var Zt=Nt(74989);Object.defineProperty(se,"Circle",{enumerable:!0,get:function(){return Zt.default}});var he=Nt(92725);Object.defineProperty(se,"InfoWindow",{enumerable:!0,get:function(){return he.default}});var Ee=Nt(38845);Object.defineProperty(se,"Label",{enumerable:!0,get:function(){return Ee.default}});var gt=Nt(23358);Object.defineProperty(se,"CustomOverlay",{enumerable:!0,get:function(){return gt.default}});var Qe=Nt(12840);Object.defineProperty(se,"MapvglView",{enumerable:!0,get:function(){return Qe.default}});var Rn=Nt(14901);Object.defineProperty(se,"MapvglLayer",{enumerable:!0,get:function(){return Rn.default}});var An=Nt(50249);Object.defineProperty(se,"TrafficLayer",{enumerable:!0,get:function(){return An.default}});var Oe=Nt(39647);Object.defineProperty(se,"PanoramaLayer",{enumerable:!0,get:function(){return Oe.default}});var Nn=Nt(77079);Object.defineProperty(se,"DrawingManager",{enumerable:!0,get:function(){return Nn.default}});var hi=Nt(34418);Object.defineProperty(se,"DistanceTool",{enumerable:!0,get:function(){return hi.default}});var Bi=Nt(66242);Object.defineProperty(se,"AutoComplete",{enumerable:!0,get:function(){return Bi.default}});var mo=Nt(95e3);Object.defineProperty(se,"Arc",{enumerable:!0,get:function(){return mo.default}}),se.mapvgl=xe.__importStar(Nt(70507)),xe.__exportStar(Nt(31889),se)},36608:function(wn,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});function Nt(xe){if(typeof xe=="string")return xe;if(!!xe)return xe.displayName||xe.name||"Component"}se.default=Nt},31889:function(wn,se,Nt){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var xe=Nt(65353);xe.__exportStar(Nt(77233),se);var Ut=Nt(62155);Object.defineProperty(se,"isString",{enumerable:!0,get:function(){return Ut.default}});var ce=Nt(36608);Object.defineProperty(se,"getDisplayName",{enumerable:!0,get:function(){return ce.default}})},62155:function(wn,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});function Nt(xe){return Object.prototype.toString.call(xe)==="[object String]"}se.default=Nt},77233:function(wn,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.requireScript=se.requireCss=void 0;var Nt=document.head||document.getElementsByTagName("head")[0],xe={};function Ut(Ot){return new Promise(function(ue,ve){if(Ot in xe){ue();return}var ct=document.createElement("link");ct.type="text/css",ct.rel="stylesheet",ct.href=Ot,ct.onerror=function(kt){Nt.removeChild(ct),ve(new URIError("The css "+Ot+" is no accessible."))},ct.onload=function(){xe[Ot]=!0,ue()},Nt.appendChild(ct)})}se.requireCss=Ut;function ce(Ot){return new Promise(function(ue,ve){if(Ot in xe){ue();return}var ct=document.createElement("script");ct.type="text/javascript",ct.src=Ot,ct.onerror=function(kt){Nt.removeChild(ct),ve(new URIError("The Script "+Ot+" is no accessible."))},Gt(ct)?ct.onload=function(){xe[Ot]=!0,ue()}:ct.onreadystatechange=function(){(ct.readyState=="loaded"||ct.readyState=="complete")&&(ct.onreadystatechange=null,xe[Ot]=!0,ue())},Nt.appendChild(ct)})}se.requireScript=ce;function Gt(Ot){return Ot=Ot||document.createElement("script"),"onload"in Ot?!0:(Ot.setAttribute("onload",""),typeof Ot.onload=="function")}},96774:function(wn){wn.exports=function(Nt,xe,Ut,ce){var Gt=Ut?Ut.call(ce,Nt,xe):void 0;if(Gt!==void 0)return!!Gt;if(Nt===xe)return!0;if(typeof Nt!="object"||!Nt||typeof xe!="object"||!xe)return!1;var Ot=Object.keys(Nt),ue=Object.keys(xe);if(Ot.length!==ue.length)return!1;for(var ve=Object.prototype.hasOwnProperty.bind(xe),ct=0;ct<Ot.length;ct++){var kt=Ot[ct];if(!ve(kt))return!1;var bt=Nt[kt],Ht=xe[kt];if(Gt=Ut?Ut.call(ce,bt,Ht,kt):void 0,Gt===!1||Gt===void 0&&bt!==Ht)return!1}return!0}}}]);
