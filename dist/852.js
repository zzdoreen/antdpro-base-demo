var q_=Object.defineProperty;var K_=Object.prototype.hasOwnProperty;var iv=Object.getOwnPropertySymbols,Z_=Object.prototype.propertyIsEnumerable,Sh=Math.pow,Xe=Object.assign;var sv=(Pt,W)=>{var at={};for(var _t in Pt)K_.call(Pt,_t)&&W.indexOf(_t)<0&&(at[_t]=Pt[_t]);if(Pt!=null&&iv)for(var _t of iv(Pt))W.indexOf(_t)<0&&Z_.call(Pt,_t)&&(at[_t]=Pt[_t]);return at};var yt=(Pt,W,at)=>(typeof W!="symbol"&&(W+=""),W in Pt?q_(Pt,W,{enumerable:!0,configurable:!0,writable:!0,value:at}):Pt[W]=at),kp=(Pt,W,at)=>{if(!W.has(Pt))throw TypeError("Cannot "+at)},u=(Pt,W,at)=>(kp(Pt,W,"read from private field"),at?at.call(Pt):W.get(Pt)),E=(Pt,W,at,_t)=>(kp(Pt,W,"write to private field"),_t?_t.call(Pt,at):W.set(Pt,at),at),_=(Pt,W,at)=>(kp(Pt,W,"access private method"),at),kt=(Pt,W,at)=>new Promise((_t,P)=>{var D=R=>{try{x(at.next(R))}catch(K){P(K)}},w=R=>{try{x(at.throw(R))}catch(K){P(K)}},x=R=>R.done?_t(R.value):Promise.resolve(R.value).then(D,w);x((at=at.apply(Pt,W)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[852],{58852:function(Pt,W,at){var ha,Ip,nl,rv,Bs,Hn,gi,We,Eu,js,ge,Be,Qi,xh,Ji,Ch,ua,Dp,_u,Q_,il,av,ts,Th,Us,Jd,Hs,tf,sl,ov,zs,ef,Gs,Vs,zn,$s,wu,J_,Su,tw,xu,ew,da,Mp,Cu,nw,rl,lv,al,Ws,ol,Tu,iw,Pu,sw,Ru,rw,Lu,ll,ku,hn,cl,cv,me,es,hl,ve,Iu,aw,Je,ce,be,fa,mi,pa,bn,ga,Ys,Gn,vi,Xs,ul,dl,Vn,ma,ns,$n,Du,is,fl,qs,pl,va,ye,Ft,bi,Ks,gl,ml,vl,bl,yl,Al,El,_l,wl,Sl,xl,Cl,Tl,Pl,ss,Wn,yi,Rl,ba,Op,Mu,ow,Ou,lw,ya,Fp,Fu,cw,Nu,hw,Bu,uw,Ll,hv,kl,uv,Il,dv,Dl,fv,Ml,pv,Ae,qe,Yn,Wr,ju,dw,Uu,fw,Ol,gv,Hu,pw,Zs,nf,Fl,mv,Ai,Ei,yn,_i,An,Aa,wi,Nl,vv,En,Oe,Ea,Qs,Ee,Js,_a,wa,Le,Bl,tr,as,jl,er,Si,Xn,Sa,xa,un,Ul,Gu,Hl,bv,zl,yv,Gl,Av,Vu,gw,$u,mw,Vl,Ev,$l,_v,Wl,wv,Wu,vw,Yu,bw,Xu,yw,qu,Aw,Yl,Sv,nr,sf,ir,_e,Ku,Ew,Xl,Ca,ql,xv,Kl,Cv,Zl,Ql,Zu,_w,Qu,ww,Ta,Np,sr,Jl,tc,ec,nc,Pa,os,Ht,Ra,La,ic,Tv,nv,ls,Ye,sc,rc,rr,xi,ac,oc,ar,ka,Ia,cs,Da,lc,Ma,or,cc,hc,lr,cr,Oa,Ju,Sw,td,xw,uc,Pv,Fa,Bp,ed,Cw,nd,hs,Ci,us,Ph,Na,jp,hr,id,ur,Ba,Up,Ti,qn,ja,Ua,Kn,dr,rf,wn,fc,Rv,ds,fr,pr,za,Ga,pc,Lv,Pi,ko,sd,Tw,rd,Pw,Va,ad,od,$a,gr,Jt,Ri,mr,gc,mc,Wa,Li,Sn,ki,vc,Ii,bc,vr,br,Ya,Hp,yc,kv,ld,Rw,cd,Lw,hd,kw,ud,Iw,Xa,zp,qa,Gp,Ac,Iv,Ec,_c,wc,Sc,xc,Cc,Tc,Dv,Pc,yr,Ka,dd,Dw,Rc,Mv,Lc,kc,Ic,Dc,Mc,xn,en,Oc,nn,Za,fd,Mw,pd,Ow,gd,Fw,Qa,Vp,Ja,$p,to,Wp,md,Nw,Fc,Ov,vd,Bw,Nc,fs,Cn,bd,jw,eo,Yp,yd,Uw,Ad,Hw,Bc,Fv,jc,no,Zn,Di,io,so,Qn,Ct,Ar,Er,Uc,Hc,ro,ao,ps,zc,Ed,_d,Gc,Nv,lo,_r,Mi,Vc,sn,$c,ne,wr,af,Sr,of,wd,zw,Wc,Yc,Tn,xr,co,he,Xc,ho,qc,Kc,gs,uo,Zc,Bv,Qc,jv,Sd,Gw,Oi,Io,xd,Vw,Jn,Yr,fo,Jc,ms,Cr,po,dn,th,eh,Tr,Pn,Fe,rn,Cd,go,Pr,ue,mo,ti,nh,ih,Uv,sh,Hv,Td,$w,Pd,Ww,Rd,Yw,rh,zv,Rr,lf,vs,Rh,Ld,Xw,vo,Xp,Lr,cf,kd,qw,Id,Kw,Dd,Zw,Md,Qw,kr,Ir,ah,oh,lh,Dr,ei,Ni,fn,Mr,Or,Fr,Nr,Br,bs,Od,Jw,Fd,tS,Nd,eS,Bd,nS,ch,Gv,jd,iS,hh,Vv,Ud,sS,Hd,rS,zd,aS,Gd,oS,Vd,lS,Bi,Do,uh,$v,bo,qp,yo,Kp,ys,Lh,dh,Wv,Ao,Zp,$d,cS,fh,Yv,Wd,hS,Yd,uS,ph,Xv,Eo,Qp,jr,hf,we,Se,As,ji,Es,_o,ni,Ur,ii,Rn,gh,Hr,uf,zr,df,wo,Jp,mh,qv,Xd,dS,qd,fS,vh,Kv,So,tg,Kd,pS,Gr,xo,si,Vr,Ui,Hi,zi,an,_s,Co,To,Ne,ft,ws,Zd,gS,bh,Zv,yh,Qv,Ah,Jv,Po,eg,ri,Eh,de,Ss,_h,tb,wh,eb,Qd,mS;"use strict";at.d(W,{lX:function(){return G_},ZP:function(){return W_}});var _t={};at.r(_t),at.d(_t,{AbortException:function(){return mE},AnnotationEditorLayer:function(){return vE},AnnotationEditorParamsType:function(){return bE},AnnotationEditorType:function(){return yE},AnnotationEditorUIManager:function(){return AE},AnnotationLayer:function(){return e0},AnnotationMode:function(){return n0},CMapCompressionType:function(){return EE},ColorPicker:function(){return _E},DOMSVGFactory:function(){return wE},DrawLayer:function(){return SE},FeatureTest:function(){return xE},GlobalWorkerOptions:function(){return i0},ImageKind:function(){return CE},InvalidPDFException:function(){return TE},MissingPDFException:function(){return PE},OPS:function(){return RE},Outliner:function(){return LE},PDFDataRangeTransport:function(){return kE},PDFDateString:function(){return IE},PDFWorker:function(){return DE},PasswordResponses:function(){return ME},PermissionFlag:function(){return OE},PixelsPerInch:function(){return FE},RenderingCancelledException:function(){return NE},TextLayer:function(){return s0},UnexpectedResponseException:function(){return BE},Util:function(){return jE},VerbosityLevel:function(){return UE},XfaLayer:function(){return HE},build:function(){return zE},createValidAbsoluteUrl:function(){return GE},fetchData:function(){return VE},getDocument:function(){return r0},getFilenameFromUrl:function(){return $E},getPdfFilenameFromUrl:function(){return WE},getXfaPageViewport:function(){return YE},isDataScheme:function(){return XE},isPdfFile:function(){return qE},noContextMenu:function(){return KE},normalizeUnicode:function(){return ZE},renderTextLayer:function(){return QE},setLayerDimensions:function(){return JE},shadow:function(){return t1},updateTextLayer:function(){return e1},version:function(){return n1}});var P=at(67294),D=at(59864),w=at(96774),x=at.n(w);function R(o){function t($,z,X,rt,M){for(var tt=0,G=0,mt=0,nt=0,xt,pt,Tt=0,Bt=0,vt,ut=vt=xt=0,dt=0,Lt=0,fe=0,Wt=0,pn=X.length,Vi=pn-1,xe,lt="",jt="",xs="",$r="",ai;dt<pn;){if(pt=X.charCodeAt(dt),dt===Vi&&G+nt+mt+tt!==0&&(G!==0&&(pt=G===47?10:47),nt=mt=tt=0,pn++,Vi++),G+nt+mt+tt===0){if(dt===Vi&&(0<Lt&&(lt=lt.replace(b,"")),0<lt.trim().length)){switch(pt){case 32:case 9:case 59:case 13:case 10:break;default:lt+=X.charAt(dt)}pt=59}switch(pt){case 123:for(lt=lt.trim(),xt=lt.charCodeAt(0),vt=1,Wt=++dt;dt<pn;){switch(pt=X.charCodeAt(dt)){case 123:vt++;break;case 125:vt--;break;case 47:switch(pt=X.charCodeAt(dt+1)){case 42:case 47:t:{for(ut=dt+1;ut<Vi;++ut)switch(X.charCodeAt(ut)){case 47:if(pt===42&&X.charCodeAt(ut-1)===42&&dt+2!==ut){dt=ut+1;break t}break;case 10:if(pt===47){dt=ut+1;break t}}dt=ut}}break;case 91:pt++;case 40:pt++;case 34:case 39:for(;dt++<Vi&&X.charCodeAt(dt)!==pt;);}if(vt===0)break;dt++}switch(vt=X.substring(Wt,dt),xt===0&&(xt=(lt=lt.replace(v,"").trim()).charCodeAt(0)),xt){case 64:switch(0<Lt&&(lt=lt.replace(b,"")),pt=lt.charCodeAt(1),pt){case 100:case 109:case 115:case 45:Lt=z;break;default:Lt=At}if(vt=t(z,Lt,vt,pt,M+1),Wt=vt.length,0<J&&(Lt=e(At,lt,fe),ai=d(3,vt,Lt,z,it,st,Wt,pt,M,rt),lt=Lt.join(""),ai!==void 0&&(Wt=(vt=ai.trim()).length)===0&&(pt=0,vt="")),0<Wt)switch(pt){case 115:lt=lt.replace(N,h);case 100:case 109:case 45:vt=lt+"{"+vt+"}";break;case 107:lt=lt.replace(L,"$1 $2"),vt=lt+"{"+vt+"}",vt=ot===1||ot===2&&a("@"+vt,3)?"@-webkit-"+vt+"@"+vt:"@"+vt;break;default:vt=lt+vt,rt===112&&(vt=(jt+=vt,""))}else vt="";break;default:vt=t(z,e(z,lt,fe),vt,rt,M+1)}xs+=vt,vt=fe=Lt=ut=xt=0,lt="",pt=X.charCodeAt(++dt);break;case 125:case 59:if(lt=(0<Lt?lt.replace(b,""):lt).trim(),1<(Wt=lt.length))switch(ut===0&&(xt=lt.charCodeAt(0),xt===45||96<xt&&123>xt)&&(Wt=(lt=lt.replace(" ",":")).length),0<J&&(ai=d(1,lt,z,$,it,st,jt.length,rt,M,rt))!==void 0&&(Wt=(lt=ai.trim()).length)===0&&(lt="\0\0"),xt=lt.charCodeAt(0),pt=lt.charCodeAt(1),xt){case 0:break;case 64:if(pt===105||pt===99){$r+=lt+X.charAt(dt);break}default:lt.charCodeAt(Wt-1)!==58&&(jt+=i(lt,xt,pt,lt.charCodeAt(2)))}fe=Lt=ut=xt=0,lt="",pt=X.charCodeAt(++dt)}}switch(pt){case 13:case 10:G===47?G=0:1+xt===0&&rt!==107&&0<lt.length&&(Lt=1,lt+="\0"),0<J*Xt&&d(0,lt,z,$,it,st,jt.length,rt,M,rt),st=1,it++;break;case 59:case 125:if(G+nt+mt+tt===0){st++;break}default:switch(st++,xe=X.charAt(dt),pt){case 9:case 32:if(nt+tt+G===0)switch(Tt){case 44:case 58:case 9:case 32:xe="";break;default:pt!==32&&(xe=" ")}break;case 0:xe="\\0";break;case 12:xe="\\f";break;case 11:xe="\\v";break;case 38:nt+G+tt===0&&(Lt=fe=1,xe="\f"+xe);break;case 108:if(nt+G+tt+ht===0&&0<ut)switch(dt-ut){case 2:Tt===112&&X.charCodeAt(dt-3)===58&&(ht=Tt);case 8:Bt===111&&(ht=Bt)}break;case 58:nt+G+tt===0&&(ut=dt);break;case 44:G+mt+nt+tt===0&&(Lt=1,xe+="\r");break;case 34:case 39:G===0&&(nt=nt===pt?0:nt===0?pt:nt);break;case 91:nt+G+mt===0&&tt++;break;case 93:nt+G+mt===0&&tt--;break;case 41:nt+G+tt===0&&mt--;break;case 40:if(nt+G+tt===0){if(xt===0)switch(2*Tt+3*Bt){case 533:break;default:xt=1}mt++}break;case 64:G+mt+nt+tt+ut+vt===0&&(vt=1);break;case 42:case 47:if(!(0<nt+tt+mt))switch(G){case 0:switch(2*pt+3*X.charCodeAt(dt+1)){case 235:G=47;break;case 220:Wt=dt,G=42}break;case 42:pt===47&&Tt===42&&Wt+2!==dt&&(X.charCodeAt(Wt+2)===33&&(jt+=X.substring(Wt,dt+1)),xe="",G=0)}}G===0&&(lt+=xe)}Bt=Tt,Tt=pt,dt++}if(Wt=jt.length,0<Wt){if(Lt=z,0<J&&(ai=d(2,jt,Lt,$,it,st,Wt,rt,M,rt),ai!==void 0&&(jt=ai).length===0))return $r+jt+xs;if(jt=Lt.join(",")+"{"+jt+"}",ot*ht!=0){switch(ot!==2||a(jt,2)||(ht=0),ht){case 111:jt=jt.replace(I,":-moz-$1")+jt;break;case 112:jt=jt.replace(k,"::-webkit-input-$1")+jt.replace(k,"::-moz-$1")+jt.replace(k,":-ms-input-$1")+jt}ht=0}}return $r+jt+xs}function e($,z,X){var rt=z.trim().split(C);z=rt;var M=rt.length,tt=$.length;switch(tt){case 0:case 1:var G=0;for($=tt===0?"":$[0]+" ";G<M;++G)z[G]=n($,z[G],X).trim();break;default:var mt=G=0;for(z=[];G<M;++G)for(var nt=0;nt<tt;++nt)z[mt++]=n($[nt]+" ",rt[G],X).trim()}return z}function n($,z,X){var rt=z.charCodeAt(0);switch(33>rt&&(rt=(z=z.trim()).charCodeAt(0)),rt){case 38:return z.replace(T,"$1"+$.trim());case 58:return $.trim()+z.replace(T,"$1"+$.trim());default:if(0<1*X&&0<z.indexOf("\f"))return z.replace(T,($.charCodeAt(0)===58?"":"$1")+$.trim())}return $+z}function i($,z,X,rt){var M=$+";",tt=2*z+3*X+4*rt;if(tt===944){$=M.indexOf(":",9)+1;var G=M.substring($,M.length-1).trim();return G=M.substring(0,$).trim()+G+";",ot===1||ot===2&&a(G,1)?"-webkit-"+G+G:G}if(ot===0||ot===2&&!a(M,1))return M;switch(tt){case 1015:return M.charCodeAt(10)===97?"-webkit-"+M+M:M;case 951:return M.charCodeAt(3)===116?"-webkit-"+M+M:M;case 963:return M.charCodeAt(5)===110?"-webkit-"+M+M:M;case 1009:if(M.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+M+M;case 978:return"-webkit-"+M+"-moz-"+M+M;case 1019:case 983:return"-webkit-"+M+"-moz-"+M+"-ms-"+M+M;case 883:if(M.charCodeAt(8)===45)return"-webkit-"+M+M;if(0<M.indexOf("image-set(",11))return M.replace(H,"$1-webkit-$2")+M;break;case 932:if(M.charCodeAt(4)===45)switch(M.charCodeAt(5)){case 103:return"-webkit-box-"+M.replace("-grow","")+"-webkit-"+M+"-ms-"+M.replace("grow","positive")+M;case 115:return"-webkit-"+M+"-ms-"+M.replace("shrink","negative")+M;case 98:return"-webkit-"+M+"-ms-"+M.replace("basis","preferred-size")+M}return"-webkit-"+M+"-ms-"+M+M;case 964:return"-webkit-"+M+"-ms-flex-"+M+M;case 1023:if(M.charCodeAt(8)!==99)break;return G=M.substring(M.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+G+"-webkit-"+M+"-ms-flex-pack"+G+M;case 1005:return A.test(M)?M.replace(y,":-webkit-")+M.replace(y,":-moz-")+M:M;case 1e3:switch(G=M.substring(13).trim(),z=G.indexOf("-")+1,G.charCodeAt(0)+G.charCodeAt(z)){case 226:G=M.replace(O,"tb");break;case 232:G=M.replace(O,"tb-rl");break;case 220:G=M.replace(O,"lr");break;default:return M}return"-webkit-"+M+"-ms-"+G+M;case 1017:if(M.indexOf("sticky",9)===-1)break;case 975:switch(z=(M=$).length-10,G=(M.charCodeAt(z)===33?M.substring(0,z):M).substring($.indexOf(":",7)+1).trim(),tt=G.charCodeAt(0)+(G.charCodeAt(7)|0)){case 203:if(111>G.charCodeAt(8))break;case 115:M=M.replace(G,"-webkit-"+G)+";"+M;break;case 207:case 102:M=M.replace(G,"-webkit-"+(102<tt?"inline-":"")+"box")+";"+M.replace(G,"-webkit-"+G)+";"+M.replace(G,"-ms-"+G+"box")+";"+M}return M+";";case 938:if(M.charCodeAt(5)===45)switch(M.charCodeAt(6)){case 105:return G=M.replace("-items",""),"-webkit-"+M+"-webkit-box-"+G+"-ms-flex-"+G+M;case 115:return"-webkit-"+M+"-ms-flex-item-"+M.replace(q,"")+M;default:return"-webkit-"+M+"-ms-flex-line-pack"+M.replace("align-content","").replace(q,"")+M}break;case 973:case 989:if(M.charCodeAt(3)!==45||M.charCodeAt(4)===122)break;case 931:case 953:if(Z.test($)===!0)return(G=$.substring($.indexOf(":")+1)).charCodeAt(0)===115?i($.replace("stretch","fill-available"),z,X,rt).replace(":fill-available",":stretch"):M.replace(G,"-webkit-"+G)+M.replace(G,"-moz-"+G.replace("fill-",""))+M;break;case 962:if(M="-webkit-"+M+(M.charCodeAt(5)===102?"-ms-"+M:"")+M,X+rt===211&&M.charCodeAt(13)===105&&0<M.indexOf("transform",10))return M.substring(0,M.indexOf(";",27)+1).replace(S,"$1-webkit-$2")+M}return M}function a($,z){var X=$.indexOf(z===1?":":"{"),rt=$.substring(0,z!==3?X:10);return X=$.substring(X+1,$.length-1),$t(z!==2?rt:rt.replace(Y,"$1"),X,z)}function h($,z){var X=i(z,z.charCodeAt(0),z.charCodeAt(1),z.charCodeAt(2));return X!==z+";"?X.replace(U," or ($1)").substring(4):"("+z+")"}function d($,z,X,rt,M,tt,G,mt,nt,xt){for(var pt=0,Tt=z,Bt;pt<J;++pt)switch(Bt=V[pt].call(g,$,Tt,X,rt,M,tt,G,mt,nt,xt)){case void 0:case!1:case!0:case null:break;default:Tt=Bt}if(Tt!==z)return Tt}function f($){switch($){case void 0:case null:J=V.length=0;break;default:if(typeof $=="function")V[J++]=$;else if(typeof $=="object")for(var z=0,X=$.length;z<X;++z)f($[z]);else Xt=!!$|0}return f}function p($){return $=$.prefix,$!==void 0&&($t=null,$?typeof $!="function"?ot=1:(ot=2,$t=$):ot=0),p}function g($,z){var X=$;if(33>X.charCodeAt(0)&&(X=X.trim()),te=X,X=[te],0<J){var rt=d(-1,z,X,X,it,st,0,0,0,0);rt!==void 0&&typeof rt=="string"&&(z=rt)}var M=t(At,X,z,0,0);return 0<J&&(rt=d(-2,M,X,X,it,st,M.length,0,0,0),rt!==void 0&&(M=rt)),te="",ht=0,st=it=1,M}var v=/^\0+/g,b=/[\0\r\f]/g,y=/: */g,A=/zoo|gra/,S=/([,: ])(transform)/g,C=/,\r+?/g,T=/([\t\r\n ])*\f?&/g,L=/@(k\w+)\s*(\S*)\s*/,k=/::(place)/g,I=/:(read-only)/g,O=/[svh]\w+-[tblr]{2}/,N=/\(\s*(.*)\s*\)/g,U=/([\s\S]*?);/g,q=/-self|flex-/g,Y=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Z=/stretch|:\s*\w+\-(?:conte|avail)/,H=/([^-])(image-set\()/,st=1,it=1,ht=0,ot=1,At=[],V=[],J=0,$t=null,Xt=0,te="";return g.use=f,g.set=p,o!==void 0&&p(o),g}var K=R,wt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gt=wt;function It(o){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=o(e)),t[e]}}var Ce=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ae=It(function(o){return Ce.test(o)||o.charCodeAt(0)===111&&o.charCodeAt(1)===110&&o.charCodeAt(2)<91}),ee=at(8679),Mo=at.n(ee),Ke=at(34155);function Zt(){return(Zt=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n])}return o}).apply(this,arguments)}var on=function(o,t){for(var e=[o[0]],n=0,i=t.length;n<i;n+=1)e.push(t[n],o[n+1]);return e},$i=function(o){return o!==null&&typeof o=="object"&&(o.toString?o.toString():Object.prototype.toString.call(o))==="[object Object]"&&!(0,D.typeOf)(o)},oi=Object.freeze([]),Ln=Object.freeze({});function li(o){return typeof o=="function"}function Oo(o){return o.displayName||o.name||"Component"}function Fo(o){return o&&typeof o.styledComponentId=="string"}var gn=typeof Ke!="undefined"&&{NODE_ENV:"production"}!==void 0&&({NODE_ENV:"production"}.REACT_APP_SC_ATTR||{NODE_ENV:"production"}.SC_ATTR)||"data-styled",ng="5.3.11",Wi=typeof window!="undefined"&&"HTMLElement"in window,ff=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof Ke!="undefined"&&{NODE_ENV:"production"}!==void 0&&({NODE_ENV:"production"}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{NODE_ENV:"production"}.REACT_APP_SC_DISABLE_SPEEDY!==""?{NODE_ENV:"production"}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{NODE_ENV:"production"}.REACT_APP_SC_DISABLE_SPEEDY:{NODE_ENV:"production"}.SC_DISABLE_SPEEDY!==void 0&&{NODE_ENV:"production"}.SC_DISABLE_SPEEDY!==""?{NODE_ENV:"production"}.SC_DISABLE_SPEEDY!=="false"&&{NODE_ENV:"production"}.SC_DISABLE_SPEEDY:!1)),pf={},gf={};function kh(){for(var o=arguments.length<=0?void 0:arguments[0],t=[],e=1,n=arguments.length;e<n;e+=1)t.push(e<0||arguments.length<=e?void 0:arguments[e]);return t.forEach(function(i){o=o.replace(/%[a-z]/,i)}),o}function je(o){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];throw new Error("An error occurred. See https://git.io/JUIaE#"+o+" for more information."+(e.length>0?" Args: "+e.join(", "):""))}var mf=function(){function o(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=o.prototype;return t.indexOfGroup=function(e){for(var n=0,i=0;i<e;i++)n+=this.groupSizes[i];return n},t.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var i=this.groupSizes,a=i.length,h=a;e>=h;)(h<<=1)<0&&je(16,""+e);this.groupSizes=new Uint32Array(h),this.groupSizes.set(i),this.length=h;for(var d=a;d<h;d++)this.groupSizes[d]=0}for(var f=this.indexOfGroup(e+1),p=0,g=n.length;p<g;p++)this.tag.insertRule(f,n[p])&&(this.groupSizes[e]++,f++)},t.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],i=this.indexOfGroup(e),a=i+n;this.groupSizes[e]=0;for(var h=i;h<a;h++)this.tag.deleteRule(i)}},t.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var i=this.groupSizes[e],a=this.indexOfGroup(e),h=a+i,d=a;d<h;d++)n+=this.tag.getRule(d)+`/*!sc*/
`;return n},o}(),Xr=new Map,Cs=new Map,Yi=1,B=function(o){if(Xr.has(o))return Xr.get(o);for(;Cs.has(Yi);)Yi++;var t=Yi++;return Xr.set(o,t),Cs.set(t,o),t},F=function(o){return Cs.get(o)},j=function(o,t){t>=Yi&&(Yi=t+1),Xr.set(o,t),Cs.set(t,o)},Q="style["+gn+'][data-styled-version="5.3.11"]',ct=new RegExp("^"+gn+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),bt=function(o,t,e){for(var n,i=e.split(","),a=0,h=i.length;a<h;a++)(n=i[a])&&o.registerName(t,n)},Yt=function(o,t){for(var e=(t.textContent||"").split(`/*!sc*/
`),n=[],i=0,a=e.length;i<a;i++){var h=e[i].trim();if(h){var d=h.match(ct);if(d){var f=0|parseInt(d[1],10),p=d[2];f!==0&&(j(p,f),bt(o,p,d[3]),o.getTag().insertRules(f,n)),n.length=0}else n.push(h)}}},ke=function(){return at.nc},kn=function(o){var t=document.head,e=o||t,n=document.createElement("style"),i=function(d){for(var f=d.childNodes,p=f.length;p>=0;p--){var g=f[p];if(g&&g.nodeType===1&&g.hasAttribute(gn))return g}}(e),a=i!==void 0?i.nextSibling:null;n.setAttribute(gn,"active"),n.setAttribute("data-styled-version","5.3.11");var h=ke();return h&&n.setAttribute("nonce",h),e.insertBefore(n,a),n},Ze=function(){function o(e){var n=this.element=kn(e);n.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var a=document.styleSheets,h=0,d=a.length;h<d;h++){var f=a[h];if(f.ownerNode===i)return f}je(17)}(n),this.length=0}var t=o.prototype;return t.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch(i){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var n=this.sheet.cssRules[e];return n!==void 0&&typeof n.cssText=="string"?n.cssText:""},o}(),In=function(){function o(e){var n=this.element=kn(e);this.nodes=n.childNodes,this.length=0}var t=o.prototype;return t.insertRule=function(e,n){if(e<=this.length&&e>=0){var i=document.createTextNode(n),a=this.nodes[e];return this.element.insertBefore(i,a||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},o}(),vf=function(){function o(e){this.rules=[],this.length=0}var t=o.prototype;return t.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},o}(),ig=Wi,nb={isServer:!Wi,useCSSOMInjection:!ff},qr=function(){function o(e,n,i){e===void 0&&(e=Ln),n===void 0&&(n={}),this.options=Zt({},nb,{},e),this.gs=n,this.names=new Map(i),this.server=!!e.isServer,!this.server&&Wi&&ig&&(ig=!1,function(a){for(var h=document.querySelectorAll(Q),d=0,f=h.length;d<f;d++){var p=h[d];p&&p.getAttribute(gn)!=="active"&&(Yt(a,p),p.parentNode&&p.parentNode.removeChild(p))}}(this))}o.registerId=function(e){return B(e)};var t=o.prototype;return t.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new o(Zt({},this.options,{},e),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(i=(n=this.options).isServer,a=n.useCSSOMInjection,h=n.target,e=i?new vf(h):a?new Ze(h):new In(h),new mf(e)));var e,n,i,a,h},t.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.registerName=function(e,n){if(B(e),this.names.has(e))this.names.get(e).add(n);else{var i=new Set;i.add(n),this.names.set(e,i)}},t.insertRules=function(e,n,i){this.registerName(e,n),this.getTag().insertRules(B(e),i)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(B(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var n=e.getTag(),i=n.length,a="",h=0;h<i;h++){var d=F(h);if(d!==void 0){var f=e.names.get(d),p=n.getGroup(h);if(f&&p&&f.size){var g=gn+".g"+h+'[id="'+d+'"]',v="";f!==void 0&&f.forEach(function(b){b.length>0&&(v+=b+",")}),a+=""+p+g+'{content:"'+v+`"}/*!sc*/
`}}}return a}(this)},o}(),ib=/(a)(d)/gi,sg=function(o){return String.fromCharCode(o+(o>25?39:97))};function bf(o){var t,e="";for(t=Math.abs(o);t>52;t=t/52|0)e=sg(t%52)+e;return(sg(t%52)+e).replace(ib,"$1-$2")}var Kr=function(o,t){for(var e=t.length;e;)o=33*o^t.charCodeAt(--e);return o},rg=function(o){return Kr(5381,o)};function ag(o){for(var t=0;t<o.length;t+=1){var e=o[t];if(li(e)&&!Fo(e))return!1}return!0}var sb=rg("5.3.11"),rb=function(){function o(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&ag(t),this.componentId=e,this.baseHash=Kr(sb,e),this.baseStyle=n,qr.registerId(e)}return o.prototype.generateAndInjectStyles=function(t,e,n){var i=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(t,e,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(i,this.staticRulesId))a.push(this.staticRulesId);else{var h=Ts(this.rules,t,e,n).join(""),d=bf(Kr(this.baseHash,h)>>>0);if(!e.hasNameForId(i,d)){var f=n(h,"."+d,void 0,i);e.insertRules(i,d,f)}a.push(d),this.staticRulesId=d}else{for(var p=this.rules.length,g=Kr(this.baseHash,n.hash),v="",b=0;b<p;b++){var y=this.rules[b];if(typeof y=="string")v+=y;else if(y){var A=Ts(y,t,e,n),S=Array.isArray(A)?A.join(""):A;g=Kr(g,S+b),v+=S}}if(v){var C=bf(g>>>0);if(!e.hasNameForId(i,C)){var T=n(v,"."+C,void 0,i);e.insertRules(i,C,T)}a.push(C)}}return a.join(" ")},o}(),ab=/^\s*\/\/.*$/gm,ob=[":","[",".","#"];function og(o){var t,e,n,i,a=o===void 0?Ln:o,h=a.options,d=h===void 0?Ln:h,f=a.plugins,p=f===void 0?oi:f,g=new K(d),v=[],b=function(S){function C(T){if(T)try{S(T+"}")}catch(L){}}return function(T,L,k,I,O,N,U,q,Y,Z){switch(T){case 1:if(Y===0&&L.charCodeAt(0)===64)return S(L+";"),"";break;case 2:if(q===0)return L+"/*|*/";break;case 3:switch(q){case 102:case 112:return S(k[0]+L),"";default:return L+(Z===0?"/*|*/":"")}case-2:L.split("/*|*/}").forEach(C)}}}(function(S){v.push(S)}),y=function(S,C,T){return C===0&&ob.indexOf(T[e.length])!==-1||T.match(i)?S:"."+t};function A(S,C,T,L){L===void 0&&(L="&");var k=S.replace(ab,""),I=C&&T?T+" "+C+" { "+k+" }":k;return t=L,e=C,n=new RegExp("\\"+e+"\\b","g"),i=new RegExp("(\\"+e+"\\b){2,}"),g(T||!C?"":C,I)}return g.use([].concat(p,[function(S,C,T){S===2&&T.length&&T[0].lastIndexOf(e)>0&&(T[0]=T[0].replace(n,y))},b,function(S){if(S===-2){var C=v;return v=[],C}}])),A.hash=p.length?p.reduce(function(S,C){return C.name||je(15),Kr(S,C.name)},5381).toString():"",A}var yf=P.createContext(),vS=yf.Consumer,Af=P.createContext(),lg=(Af.Consumer,new qr),Ef=og();function _f(){return(0,P.useContext)(yf)||lg}function cg(){return(0,P.useContext)(Af)||Ef}function lb(o){var t=(0,P.useState)(o.stylisPlugins),e=t[0],n=t[1],i=_f(),a=(0,P.useMemo)(function(){var d=i;return o.sheet?d=o.sheet:o.target&&(d=d.reconstructWithOptions({target:o.target},!1)),o.disableCSSOMInjection&&(d=d.reconstructWithOptions({useCSSOMInjection:!1})),d},[o.disableCSSOMInjection,o.sheet,o.target]),h=(0,P.useMemo)(function(){return og({options:{prefix:!o.disableVendorPrefixes},plugins:e})},[o.disableVendorPrefixes,e]);return(0,P.useEffect)(function(){x()(e,o.stylisPlugins)||n(o.stylisPlugins)},[o.stylisPlugins]),P.createElement(yf.Provider,{value:a},P.createElement(Af.Provider,{value:h},o.children))}var hg=function(){function o(t,e){var n=this;this.inject=function(i,a){a===void 0&&(a=Ef);var h=n.name+a.hash;i.hasNameForId(n.id,h)||i.insertRules(n.id,h,a(n.rules,h,"@keyframes"))},this.toString=function(){return je(12,String(n.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=e}return o.prototype.getName=function(t){return t===void 0&&(t=Ef),this.name+t.hash},o}(),cb=/([A-Z])/,hb=/([A-Z])/g,ub=/^ms-/,db=function(o){return"-"+o.toLowerCase()};function ug(o){return cb.test(o)?o.replace(hb,db).replace(ub,"-ms-"):o}var dg=function(o){return o==null||o===!1||o===""};function Ts(o,t,e,n){if(Array.isArray(o)){for(var i,a=[],h=0,d=o.length;h<d;h+=1)(i=Ts(o[h],t,e,n))!==""&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}if(dg(o))return"";if(Fo(o))return"."+o.styledComponentId;if(li(o)){if(typeof(p=o)!="function"||p.prototype&&p.prototype.isReactComponent||!t)return o;var f=o(t);return Ts(f,t,e,n)}var p;return o instanceof hg?e?(o.inject(e,n),o.getName(n)):o:$i(o)?function g(v,b){var y,A,S=[];for(var C in v)v.hasOwnProperty(C)&&!dg(v[C])&&(Array.isArray(v[C])&&v[C].isCss||li(v[C])?S.push(ug(C)+":",v[C],";"):$i(v[C])?S.push.apply(S,g(v[C],C)):S.push(ug(C)+": "+(y=C,(A=v[C])==null||typeof A=="boolean"||A===""?"":typeof A!="number"||A===0||y in Gt||y.startsWith("--")?String(A).trim():A+"px")+";"));return b?[b+" {"].concat(S,["}"]):S}(o):o.toString()}var fg=function(o){return Array.isArray(o)&&(o.isCss=!0),o};function No(o){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return li(o)||$i(o)?fg(Ts(on(oi,[o].concat(e)))):e.length===0&&o.length===1&&typeof o[0]=="string"?o:fg(Ts(on(o,e)))}var bS=/invalid hook call/i,yS=new Set,AS=function(o,t){if(!1)var e,n,i},wf=function(o,t,e){return e===void 0&&(e=Ln),o.theme!==e.theme&&o.theme||t||e.theme},fb=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,pb=/(^-|-$)/g;function Sf(o){return o.replace(fb,"-").replace(pb,"")}var xf=function(o){return bf(rg(o)>>>0)};function Ih(o){return typeof o=="string"&&!0}var Cf=function(o){return typeof o=="function"||typeof o=="object"&&o!==null&&!Array.isArray(o)},gb=function(o){return o!=="__proto__"&&o!=="constructor"&&o!=="prototype"};function mb(o,t,e){var n=o[e];Cf(t)&&Cf(n)?pg(n,t):o[e]=t}function pg(o){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];for(var i=0,a=e;i<a.length;i++){var h=a[i];if(Cf(h))for(var d in h)gb(d)&&mb(o,h[d],d)}return o}var Ps=P.createContext(),ES=Ps.Consumer;function vb(o){var t=(0,P.useContext)(Ps),e=(0,P.useMemo)(function(){return function(n,i){if(!n)return je(14);if(li(n)){var a=n(i);return a}return Array.isArray(n)||typeof n!="object"?je(8):i?Zt({},i,{},n):n}(o.theme,t)},[o.theme,t]);return o.children?P.createElement(Ps.Provider,{value:e},o.children):null}var Tf={};function gg(o,t,e){var n=Fo(o),i=!Ih(o),a=t.attrs,h=a===void 0?oi:a,d=t.componentId,f=d===void 0?function(L,k){var I=typeof L!="string"?"sc":Sf(L);Tf[I]=(Tf[I]||0)+1;var O=I+"-"+xf("5.3.11"+I+Tf[I]);return k?k+"-"+O:O}(t.displayName,t.parentComponentId):d,p=t.displayName,g=p===void 0?function(L){return Ih(L)?"styled."+L:"Styled("+Oo(L)+")"}(o):p,v=t.displayName&&t.componentId?Sf(t.displayName)+"-"+t.componentId:t.componentId||f,b=n&&o.attrs?Array.prototype.concat(o.attrs,h).filter(Boolean):h,y=t.shouldForwardProp;n&&o.shouldForwardProp&&(y=t.shouldForwardProp?function(L,k,I){return o.shouldForwardProp(L,k,I)&&t.shouldForwardProp(L,k,I)}:o.shouldForwardProp);var A,S=new rb(e,v,n?o.componentStyle:void 0),C=S.isStatic&&h.length===0,T=function(L,k){return function(I,O,N,U){var q=I.attrs,Y=I.componentStyle,Z=I.defaultProps,H=I.foldedComponentIds,st=I.shouldForwardProp,it=I.styledComponentId,ht=I.target,ot=function(rt,M,tt){rt===void 0&&(rt=Ln);var G=Zt({},M,{theme:rt}),mt={};return tt.forEach(function(nt){var xt,pt,Tt,Bt=nt;for(xt in li(Bt)&&(Bt=Bt(G)),Bt)G[xt]=mt[xt]=xt==="className"?(pt=mt[xt],Tt=Bt[xt],pt&&Tt?pt+" "+Tt:pt||Tt):Bt[xt]}),[G,mt]}(wf(O,(0,P.useContext)(Ps),Z)||Ln,O,q),At=ot[0],V=ot[1],J=function(rt,M,tt,G){var mt=_f(),nt=cg(),xt=M?rt.generateAndInjectStyles(Ln,mt,nt):rt.generateAndInjectStyles(tt,mt,nt);return xt}(Y,U,At,void 0),$t=N,Xt=V.$as||O.$as||V.as||O.as||ht,te=Ih(Xt),$=V!==O?Zt({},O,{},V):O,z={};for(var X in $)X[0]!=="$"&&X!=="as"&&(X==="forwardedAs"?z.as=$[X]:(st?st(X,ae,Xt):!te||ae(X))&&(z[X]=$[X]));return O.style&&V.style!==O.style&&(z.style=Zt({},O.style,{},V.style)),z.className=Array.prototype.concat(H,it,J!==it?J:null,O.className,V.className).filter(Boolean).join(" "),z.ref=$t,(0,P.createElement)(Xt,z)}(A,L,k,C)};return T.displayName=g,(A=P.forwardRef(T)).attrs=b,A.componentStyle=S,A.displayName=g,A.shouldForwardProp=y,A.foldedComponentIds=n?Array.prototype.concat(o.foldedComponentIds,o.styledComponentId):oi,A.styledComponentId=v,A.target=n?o.target:o,A.withComponent=function(L){var k=t.componentId,I=function(N,U){if(N==null)return{};var q,Y,Z={},H=Object.keys(N);for(Y=0;Y<H.length;Y++)q=H[Y],U.indexOf(q)>=0||(Z[q]=N[q]);return Z}(t,["componentId"]),O=k&&k+"-"+(Ih(L)?L:Sf(Oo(L)));return gg(L,Zt({},I,{attrs:b,componentId:O}),e)},Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(L){this._foldedDefaultProps=n?pg({},o.defaultProps,L):L}}),Object.defineProperty(A,"toString",{value:function(){return"."+A.styledComponentId}}),i&&Mo()(A,o,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),A}var Pf=function(o){return function t(e,n,i){if(i===void 0&&(i=Ln),!(0,D.isValidElementType)(n))return je(1,String(n));var a=function(){return e(n,i,No.apply(void 0,arguments))};return a.withConfig=function(h){return t(e,n,Zt({},i,{},h))},a.attrs=function(h){return t(e,n,Zt({},i,{attrs:Array.prototype.concat(i.attrs,h).filter(Boolean)}))},a}(gg,o)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(o){Pf[o]=Pf(o)});var bb=function(){function o(e,n){this.rules=e,this.componentId=n,this.isStatic=ag(e),qr.registerId(this.componentId+1)}var t=o.prototype;return t.createStyles=function(e,n,i,a){var h=a(Ts(this.rules,n,i,a).join(""),""),d=this.componentId+e;i.insertRules(d,d,h)},t.removeStyles=function(e,n){n.clearRules(this.componentId+e)},t.renderStyles=function(e,n,i,a){e>2&&qr.registerId(this.componentId+e),this.removeStyles(e,i),this.createStyles(e,n,i,a)},o}();function _S(o){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];var i=No.apply(void 0,[o].concat(e)),a="sc-global-"+xf(JSON.stringify(i)),h=new bb(i,a);function d(p){var g=_f(),v=cg(),b=s(Ps),y=c(g.allocateGSInstance(a)).current;return g.server&&f(y,p,g,b,v),l(function(){if(!g.server)return f(y,p,g,b,v),function(){return h.removeStyles(y,g)}},[y,p,g,b,v]),null}function f(p,g,v,b,y){if(h.isStatic)h.renderStyles(p,pf,v,y);else{var A=Zt({},g,{theme:wf(g,b,d.defaultProps)});h.renderStyles(p,A,v,y)}}return r.memo(d)}function yb(o){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];var i=No.apply(void 0,[o].concat(e)).join(""),a=xf(i);return new hg(a,i)}var wS=function(){function o(){var e=this;this._emitSheetCSS=function(){var n=e.instance.toString();if(!n)return"";var i=ke();return"<style "+[i&&'nonce="'+i+'"',gn+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+n+"</style>"},this.getStyleTags=function(){return e.sealed?je(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return je(2);var i=((n={})[gn]="",n["data-styled-version"]="5.3.11",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),a=ke();return a&&(i.nonce=a),[P.createElement("style",Zt({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new qr({isServer:!0}),this.sealed=!1}var t=o.prototype;return t.collectStyles=function(e){return this.sealed?je(2):P.createElement(lb,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return je(3)},o}(),SS=function(o){var t=r.forwardRef(function(e,n){var i=s(Ps),a=o.defaultProps,h=wf(e,i,a);return r.createElement(o,Zt({},e,{theme:h,ref:n}))});return m(t,o),t.displayName="WithTheme("+Oo(o)+")",t},xS=function(){return s(Ps)},CS={StyleSheet:qr,masterSheet:lg},St=Pf,mg="SET_ALL_DOCUMENTS",Ab=function(o){return{type:mg,documents:o}},vg="SET_DOCUMENT_LOADING",Rf=function(o){return{type:vg,value:o}},bg="NEXT_DOCUMENT",yg=function(){return{type:bg}},Ag="PREVIOUS_DOCUMENT",Eg=function(){return{type:Ag}},_g="UPDATE_CURRENT_DOCUMENT",wg=function(o){return{type:_g,document:o}},Sg="SET_RENDERER_RECT",Eb=function(o){return{type:Sg,rect:o}},xg="SET_MAIN_CONFIG",_b=function(o){return{type:xg,config:o}},Te=function(){return Te=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Te.apply(this,arguments)},Lf={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[]},wb=function(o,t){switch(o===void 0&&(o=Lf),t.type){case mg:{var e=t.documents;return Te(Te({},o),{documents:e,currentDocument:e[0]||null})}case vg:{var n=t.value;return Te(Te({},o),{documentLoading:n})}case bg:{if(o.currentFileNo>=o.documents.length-1)return o;var i=o.currentFileNo+1;return Te(Te({},o),{currentFileNo:i,currentDocument:o.documents[i],documentLoading:!0})}case Ag:{if(o.currentFileNo<=0)return o;var a=o.currentFileNo-1;return Te(Te({},o),{currentFileNo:o.currentFileNo-1,currentDocument:o.documents[a],documentLoading:!0})}case _g:{var h=t.document;return Te(Te({},o),{currentDocument:h})}case Sg:{var d=t.rect;return Te(Te({},o),{rendererRect:d})}case xg:{var f=t.config;return Te(Te({},o),{config:f})}default:return o}},Dh=function(){return Dh=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Dh.apply(this,arguments)},Zr=(0,P.createContext)({state:Lf,dispatch:function(){return null}}),Sb=function(o){var t=o.children,e=o.documents,n=o.config,i=o.pluginRenderers,a=(0,P.useReducer)(wb,Dh(Dh({},Lf),{documents:e||[],currentDocument:e&&e.length?e[0]:void 0,config:n,pluginRenderers:i})),h=a[0],d=a[1];return(0,P.useEffect)(function(){d(Ab(e)),n&&d(_b(n))},[e]),P.createElement(Zr.Provider,{value:{state:h,dispatch:d}},t)},Qr=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},xb=No(Tg||(Tg=Qr([`
  background-color: `,`;
  color: `,`;
`],[`
  background-color: `,`;
  color: `,`;
`])),function(o){return o.theme.primary},function(o){return o.theme.text_primary}),Cb=No(Pg||(Pg=Qr([`
  background-color: `,`;
  color: `,`;
`],[`
  background-color: `,`;
  color: `,`;
`])),function(o){return o.theme.secondary},function(o){return o.theme.text_secondary}),Mh=St.button(Rg||(Rg=Qr([`
  `,`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 35px;
  height: 35px;
  padding: 0;
  margin: 0 0 0 5px;
  text-align: center;
  font-size: 18px;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  opacity: `,`;
  pointer-events: `,`;
  box-shadow: 2px 2px 3px #00000033;

  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`],[`
  `,`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 35px;
  height: 35px;
  padding: 0;
  margin: 0 0 0 5px;
  text-align: center;
  font-size: 18px;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  opacity: `,`;
  pointer-events: `,`;
  box-shadow: 2px 2px 3px #00000033;

  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`])),xb,function(o){return o.disabled?.4:1},function(o){return o.disabled?"none":"all"}),Cg=St.a(Lg||(Lg=Qr([`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  background-color: `,`;
  color: `,`;
  box-shadow: 2px 2px 3px #00000033;

  width: 35px;
  height: 35px;
  font-size: 18px;
  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`],[`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  background-color: `,`;
  color: `,`;
  box-shadow: 2px 2px 3px #00000033;

  width: 35px;
  height: 35px;
  font-size: 18px;
  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`])),function(o){return o.theme.primary},function(o){return o.theme.text_primary}),TS=St(Mh)(kg||(kg=Qr([""],[""]))),Tb=St(Mh)(Ig||(Ig=Qr([`
  `,`
`],[`
  `,`
`])),Cb),Tg,Pg,Rg,Lg,kg,Ig,Oh=function(){return Oh=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Oh.apply(this,arguments)},Pb=function(o){return P.createElement(Dg,Oh({},o))},Rb=function(o){return P.createElement(Dg,Oh({},o,{reverse:!0}))},Dg=function(o){var t=o.color,e=o.size,n=o.reverse;return P.createElement("svg",{width:e||"100%",height:e||"100%",style:{transform:"".concat(n?"rotate(180deg)":"")},id:"arrow_left",version:"1.1",viewBox:"0 0 32 32",xmlSpace:"preserve"},P.createElement("path",{clipRule:"evenodd",d:"M31.106,15H3.278l8.325-8.293  c0.391-0.391,0.391-1.024,0-1.414c-0.391-0.391-1.024-0.391-1.414,0l-9.9,9.899c-0.385,0.385-0.385,1.029,0,1.414l9.9,9.9  c0.391,0.391,1.024,0.391,1.414,0c0.391-0.391,0.391-1.024,0-1.414L3.278,17h27.828c0.552,0,1-0.448,1-1  C32.106,15.448,31.658,15,31.106,15z",fill:t||"#aaa",fillRule:"evenodd",id:"Arrow_Back"}))},Lb=function(o){var t=o.color,e=o.size;return P.createElement("svg",{width:e||"100%",height:e||"100%",version:"1.1",id:"Icons",viewBox:"0 0 32 32",xmlSpace:"preserve",style:{alignSelf:"center",justifySelf:"center"}},P.createElement("g",null,P.createElement("path",{fill:t||"#aaa",d:"M16,2c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1V3C17,2.4,16.6,2,16,2z"}),P.createElement("path",{fill:t||"#aaa",d:`M7.5,6.1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.5,6.1
		z`}),P.createElement("path",{fill:t||"#aaa",d:"M9,16c0-0.6-0.4-1-1-1H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5C8.6,17,9,16.6,9,16z"}),P.createElement("path",{fill:t||"#aaa",d:`M9.6,20.9l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4
		S10,20.6,9.6,20.9z`}),P.createElement("path",{fill:t||"#aaa",d:"M16,23c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1v-5C17,23.4,16.6,23,16,23z"}),P.createElement("path",{fill:t||"#aaa",d:`M22.4,20.9c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4
		L22.4,20.9z`}),P.createElement("path",{fill:t||"#aaa",d:"M29,15h-5c-0.6,0-1,0.4-1,1s0.4,1,1,1h5c0.6,0,1-0.4,1-1S29.6,15,29,15z"}),P.createElement("path",{fill:t||"#aaa",d:`M21.7,11.3c0.3,0,0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4
		C21.1,11.2,21.4,11.3,21.7,11.3z`})))},kf=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},kb=function(){var o=(0,P.useContext)(Zr),t=o.state,e=t.currentDocument,n=t.currentFileNo,i=t.documents,a=o.dispatch;if(i.length<=1||!e)return null;var h=e.uri,d=h.split("/");return d.length&&(h=d[d.length-1]),P.createElement(Ib,{id:"doc-nav"},P.createElement("p",{id:"doc-nav-info"},"Doc ",n+1," of ",i.length),P.createElement(Mg,{id:"doc-nav-prev",onClick:function(){return a(Eg())},disabled:n===0},P.createElement(Pb,{color:"#fff",size:"60%"})),P.createElement(Db,{id:"doc-nav-next",onClick:function(){return a(yg())},disabled:n>=i.length-1},P.createElement(Rb,{color:"#fff",size:"60%"})))},Ib=St.div(Og||(Og=kf([`
  min-width: 150px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
  margin: 0 10px;
  color: `,`;
`],[`
  min-width: 150px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
  margin: 0 10px;
  color: `,`;
`])),function(o){return o.theme.text_primary}),Mg=St(Tb)(Fg||(Fg=kf([`
  width: 30px;
  height: 30px;
  margin: 0 5px 0 10px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`],[`
  width: 30px;
  height: 30px;
  margin: 0 5px 0 10px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`]))),Db=St(Mg)(Ng||(Ng=kf([`
  margin: 0 5px;
`],[`
  margin: 0 5px;
`]))),Og,Fg,Ng,Mb=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},Ob=function(){var o,t,e=(0,P.useContext)(Zr).state,n=e.config,i=e.currentDocument;if(!i||((o=n==null?void 0:n.header)===null||o===void 0?void 0:o.disableFileName))return null;var a=i.uri||"";a=decodeURI(a),((t=n==null?void 0:n.header)===null||t===void 0?void 0:t.retainURLParams)||(a=a.split("?")[0]);var h=a.split("/");return h.length&&(a=h[h.length-1]),P.createElement(Fb,{id:"file-name","data-testid":"file-name"},a)},Fb=St.div(Bg||(Bg=Mb([`
  flex: 1;
  text-align: left;
  color: `,`;
  font-weight: bold;
  margin: 0 10px;
  overflow: hidden;
`],[`
  flex: 1;
  text-align: left;
  color: `,`;
  font-weight: bold;
  margin: 0 10px;
  overflow: hidden;
`])),function(o){return o.theme.text_primary}),Bg,Nb=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},Bb=function(){var o,t,e,n=(0,P.useContext)(Zr),i=n.state,a=n.dispatch,h=i.config;if((o=h==null?void 0:h.header)===null||o===void 0?void 0:o.disableHeader)return null;var d=(e=(t=h==null?void 0:h.header)===null||t===void 0?void 0:t.overrideComponent)===null||e===void 0?void 0:e.call(t,i,function(){return a(Eg())},function(){return a(yg())});return d||P.createElement(jb,{id:"header-bar","data-testid":"header-bar"},P.createElement(Ob,null),P.createElement(kb,null))},jb=St.div(jg||(jg=Nb([`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  z-index: 1;
  padding: 0 10px;
  background-color: `,`;
  font-size: 16px;
  min-height: 50px;

  @media (max-width: 768px) {
    min-height: 30px;
    padding: 5px;
    font-size: 10px;
  }
`],[`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  z-index: 1;
  padding: 0 10px;
  background-color: `,`;
  font-size: 16px;
  min-height: 50px;

  @media (max-width: 768px) {
    min-height: 30px;
    padding: 5px;
    font-size: 10px;
  }
`])),function(o){return o.theme.primary}),jg,Dn=function(){return Dn=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Dn.apply(this,arguments)},Ub=function(o,t,e,n){function i(a){return a instanceof e?a:new e(function(h){h(a)})}return new(e||(e=Promise))(function(a,h){function d(g){try{p(n.next(g))}catch(v){h(v)}}function f(g){try{p(n.throw(g))}catch(v){h(v)}}function p(g){g.done?a(g.value):i(g.value).then(d,f)}p((n=n.apply(o,t||[])).next())})},Hb=function(o,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,h;return h={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function d(p){return function(g){return f([p,g])}}function f(p){if(n)throw new TypeError("Generator is already executing.");for(;h&&(h=0,p[0]&&(e=0)),e;)try{if(n=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return e.label++,{value:p[1],done:!1};case 5:e.label++,i=p[1],p=[0];continue;case 7:p=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){e=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){e.label=p[1];break}if(p[0]===6&&e.label<a[1]){e.label=a[1],a=p;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(p);break}a[2]&&e.ops.pop(),e.trys.pop();continue}p=t.call(o,e)}catch(g){p=[6,g],i=0}finally{n=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Fh=function(o){var t=o.documentURI,e=o.signal,n=o.fileLoaderComplete,i=o.readerTypeFunction;return fetch(t,{signal:e}).then(function(a){return Ub(void 0,void 0,void 0,function(){var h,d;return Hb(this,function(f){switch(f.label){case 0:return[4,a.blob()];case 1:switch(h=f.sent(),d=new FileReader,d.addEventListener("loadend",function(){return n(d)}),i){case"arrayBuffer":d.readAsArrayBuffer(h);break;case"binaryString":d.readAsBinaryString(h);break;case"dataURL":d.readAsDataURL(h);break;case"text":d.readAsText(h);break;default:break}return[2]}})})}).catch(function(a){return a})},Ug=function(o){return Fh(Dn(Dn({},o),{readerTypeFunction:"arrayBuffer"}))},Hg=function(o){return Fh(Dn(Dn({},o),{readerTypeFunction:"dataURL"}))},zb=function(o){return Fh(Dn(Dn({},o),{readerTypeFunction:"text"}))},PS=function(o){return Fh(Dn(Dn({},o),{readerTypeFunction:"binaryString"}))},Gb=Hg,Vb=function(){var o=(0,P.useContext)(Zr).state,t=o.currentDocument,e=o.pluginRenderers,n=(0,P.useState)(),i=n[0],a=n[1];return(0,P.useEffect)(function(){if(!!t){if(!t.fileType){a(void 0);return}var h=[];e==null||e.map(function(f){t.fileType!==void 0&&f.fileTypes.indexOf(t.fileType)>=0&&h.push(f)});var d=h.sort(function(f,p){return p.weight-f.weight})[0];a(d&&d!==void 0?function(){return d}:null)}},[t]),{CurrentRenderer:i}},Bo=function(){return Bo=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Bo.apply(this,arguments)},$b=function(){var o=(0,P.useContext)(Zr),t=o.state,e=o.dispatch,n=t.currentFileNo,i=t.currentDocument,a=Vb().CurrentRenderer,h=(i==null?void 0:i.uri)||"";return(0,P.useEffect)(function(){if(!!i&&i.fileType===void 0){var d=new AbortController,f=d.signal;return fetch(h,{method:"HEAD",signal:f}).then(function(p){var g=p.headers.get("content-type"),v=(g==null?void 0:g.split(";"))||[],b=v.length?v[0]:void 0;e(wg(Bo(Bo({},i),{fileType:b||void 0})))}),function(){d.abort()}}},[n,h]),(0,P.useEffect)(function(){var d;if(!(!i||a===void 0)){var f=new AbortController,p=f.signal,g=function(v){if(!i||!v){e(Rf(!1));return}var b=Bo({},i);v.result!==null&&(b.fileData=v.result),e(wg(b)),e(Rf(!1))};return a===null?e(Rf(!1)):a.fileLoader!==void 0?(d=a.fileLoader)===null||d===void 0||d.call(a,{documentURI:h,signal:p,fileLoaderComplete:g}):Gb({documentURI:h,signal:p,fileLoaderComplete:g}),function(){f.abort()}}},[a]),{state:t,dispatch:e,CurrentRenderer:a}},Wb=function(){var o=(0,P.useState)({width:void 0,height:void 0}),t=o[0],e=o[1];return(0,P.useEffect)(function(){function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),function(){return window.removeEventListener("resize",n)}},[]),t},jo=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},Yb=function(){var o=$b(),t=o.state,e=o.dispatch,n=o.CurrentRenderer,i=t.documents,a=t.documentLoading,h=t.currentDocument,d=Wb(),f=(0,P.useCallback)(function(g){g&&e(Eb(g==null?void 0:g.getBoundingClientRect()))},[d]),p=function(){return i.length?a?P.createElement(qb,{id:"loading-renderer","data-testid":"loading-renderer"},P.createElement(Zb,null,P.createElement(Lb,{color:"#444",size:40}))):n?P.createElement(n,{mainState:t}):n===void 0?null:P.createElement("div",{id:"no-renderer","data-testid":"no-renderer"},"No Renderer for file type ",h==null?void 0:h.fileType,P.createElement(Qb,{id:"no-renderer-download",href:h==null?void 0:h.uri,download:h==null?void 0:h.uri},"Download File")):P.createElement("div",{id:"no-documents"})};return P.createElement(Xb,{id:"proxy-renderer",ref:f},P.createElement(p,null))},Xb=St.div(zg||(zg=jo([`
  display: flex;
  flex: 1;
  overflow-y: auto;
`],[`
  display: flex;
  flex: 1;
  overflow-y: auto;
`]))),qb=St.div(Gg||(Gg=jo([`
  display: flex;
  flex: 1;
  height: 75px;
  align-items: center;
  justify-content: center;
`],[`
  display: flex;
  flex: 1;
  height: 75px;
  align-items: center;
  justify-content: center;
`]))),Kb=yb(Vg||(Vg=jo([`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`],[`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`]))),Zb=St.div($g||($g=jo([`
  animation-name: `,`;
  animation-duration: 4s;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
`],[`
  animation-name: `,`;
  animation-duration: 4s;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
`])),Kb),Qb=St(Cg)(Wg||(Wg=jo([`
  width: 130px;
  height: 30px;
  background-color: `,`;
  @media (max-width: 768px) {
    width: 125px;
    height: 25px;
  }
`],[`
  width: 130px;
  height: 30px;
  background-color: `,`;
  @media (max-width: 768px) {
    width: 125px;
    height: 25px;
  }
`])),function(o){return o.theme.primary}),zg,Gg,Vg,$g,Wg,Yg=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},If=function(){return If=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},If.apply(this,arguments)},Df=function(o){var t=o.mainState.currentDocument,e=o.children;return t?P.createElement(Jb,If({id:"image-renderer"},o),e||P.createElement(ty,{id:"image-img",src:t.fileData})):null},Uo=Df;Df.fileTypes=[],Df.weight=0;var Jb=St.div(Xg||(Xg=Yg([`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background-color: #fff;
`],[`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background-color: #fff;
`]))),ty=St.img(qg||(qg=Yg([`
  max-width: 95%;
  max-height: 95%;
`],[`
  max-width: 95%;
  max-height: 95%;
`]))),Xg,qg,Mf=function(){return Mf=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Mf.apply(this,arguments)},Of=function(o){return P.createElement(Uo,Mf({},o))};Of.fileTypes=["bmp","image/bmp"],Of.weight=0;var ey=Of,Kg=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},Nh=function(o){var t=o.mainState.currentDocument;return(0,P.useEffect)(function(){var e=t==null?void 0:t.fileData,n=(e==null?void 0:e.replace("data:text/html;base64,",""))||"",i=window.atob(n),a=document.getElementById("html-body"),h=(a==null?void 0:a.contentWindow)&&a.contentWindow;if(!!h){var d=h.document;d.open(),d.write("".concat(i)),d.close()}},[]),P.createElement(iy,{id:"html-renderer"},P.createElement(sy,{id:"html-body",sandbox:"allow-same-origin"}))},ny=Nh;Nh.fileTypes=["htm","html","text/htm","text/html"],Nh.weight=0,Nh.fileLoader=Hg;var iy=St.div(Zg||(Zg=Kg([`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 30px;
`],[`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 30px;
`]))),sy=St.iframe(Qg||(Qg=Kg([`
  height: 100%;
  padding: 15px;
  margin: 20px 0 20px 0;
  border: 1px solid `,`;
`],[`
  height: 100%;
  padding: 15px;
  margin: 20px 0 20px 0;
  border: 1px solid `,`;
`])),function(o){return o.theme.secondary}),Zg,Qg,Ff=function(){return Ff=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Ff.apply(this,arguments)},Nf=function(o){return P.createElement(Uo,Ff({},o))};Nf.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"],Nf.weight=0;var ry=Nf,Jg=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},Jr=function(o,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return o.concat(a||Array.prototype.slice.call(t))},Bh=function(o){var t=o.mainState.currentDocument;return t?P.createElement(oy,{id:"msdoc-renderer"},P.createElement(ly,{id:"msdoc-iframe",title:"msdoc-iframe",src:"https://view.officeapps.live.com/op/embed.aspx?src=".concat(encodeURIComponent(t.uri)),frameBorder:"0"})):null},ay=Bh,ta={doc:["doc","application/msword"],docx:["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],xls:["xls","application/vnd.ms-excel"],xlsx:["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["ppt","application/vnd.ms-powerpoint"],pptx:["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"]};Bh.fileTypes=Jr(Jr(Jr(Jr(Jr(Jr([],ta.doc,!0),ta.docx,!0),ta.xls,!0),ta.xlsx,!0),ta.ppt,!0),ta.pptx,!0),Bh.weight=0,Bh.fileLoader=function(o){var t=o.fileLoaderComplete;return t()};var oy=St.div(tm||(tm=Jg([`
  width: 100%;
`],[`
  width: 100%;
`]))),ly=St.iframe(em||(em=Jg([`
  width: 100%;
  height: 100%;
  border: 0;
`],[`
  width: 100%;
  height: 100%;
  border: 0;
`]))),tm,em,cy=at(51116),jh=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},Uh=function(o){var t=o.mainState.currentDocument,e=(0,P.useState)(),n=e[0],i=e[1];if((0,P.useEffect)(function(){if(!(!t||!t.fileData)){var g=new cy.MSGReader(t.fileData).getFileData();i(g)}},[t==null?void 0:t.fileData]),(0,P.useEffect)(function(){if(!(!n||n.hasOwnProperty("error"))){var g=document.getElementById("msg-body"),v=(g==null?void 0:g.contentWindow)&&g.contentWindow;if(!!v){var b=v.document,y=n.body.replace(/(\r\n|\n|\r)/gm,"<br />");b.open(),b.write("".concat(y)),b.close()}}},[n]),!n||n.hasOwnProperty("error"))return P.createElement("span",null,n==null?void 0:n.error);var a=n,h=a.recipients,d=a.subject,f=a.senderEmail,p=a.senderName;return P.createElement(dy,{id:"msg-renderer"},P.createElement("h2",{id:"msg-subject-title",style:{marginBottom:0}},d),P.createElement(hy,{name:p,email:f}),P.createElement(py,{id:"msg-recipient"},P.createElement("h3",{id:"msg-recipient-title"},"Recipients"),P.createElement("ul",{id:"msg-recipient-ul"},h.map(function(g,v){return P.createElement("li",{key:v,id:"msg-recipient-li"},P.createElement("span",{id:"msg-recipient-name"},g.name),g.hasOwnProperty("email")&&P.createElement("span",{id:"msg-recipient-email"}," - ",g.email))}))),P.createElement(gy,{id:"msg-body",sandbox:"allow-same-origin"}))},hy=function(o){var t=o.name,e=o.email;return!t&&!e?null:P.createElement(fy,{id:"msg-sender"},P.createElement("h3",{id:"msg-sender-title"},"Sender"),t!==void 0&&P.createElement("div",{id:"msg-sender-name"},t),e!==void 0&&P.createElement("div",{id:"msg-sender-email"},e))},uy=Uh;Uh.fileTypes=["msg","application/vnd.ms-outlook"],Uh.weight=0,Uh.fileLoader=Ug;var dy=St.div(nm||(nm=jh([`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 30px;
`],[`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 30px;
`]))),fy=St.div(im||(im=jh([`
  padding: 0 15px 15px 15px;
  margin-top: 20px;
  border: 1px solid `,`;
`],[`
  padding: 0 15px 15px 15px;
  margin-top: 20px;
  border: 1px solid `,`;
`])),function(o){return o.theme.secondary}),py=St.div(sm||(sm=jh([`
  padding: 0 15px;
  margin-top: 20px;
  border: 1px solid `,`;
`],[`
  padding: 0 15px;
  margin-top: 20px;
  border: 1px solid `,`;
`])),function(o){return o.theme.secondary}),gy=St.iframe(rm||(rm=jh([`
  height: 100%;
  padding: 15px;
  margin: 20px 0 20px 0;
  border: 1px solid `,`;
`],[`
  height: 100%;
  padding: 15px;
  margin: 20px 0 20px 0;
  border: 1px solid `,`;
`])),function(o){return o.theme.secondary}),nm,im,sm,rm,ea=at(34155),am=at(48764).Buffer,Ho={};(()=>{Ho.d=(o,t)=>{for(var e in t)Ho.o(t,e)&&!Ho.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})}})(),(()=>{Ho.o=(o,t)=>Object.prototype.hasOwnProperty.call(o,t)})();var W=globalThis.pdfjsLib={};Ho.d(W,{AbortException:()=>Ls,AnnotationEditorLayer:()=>lu,AnnotationEditorParamsType:()=>gt,AnnotationEditorType:()=>Rt,AnnotationEditorUIManager:()=>Ki,AnnotationLayer:()=>pE,AnnotationMode:()=>Xi,CMapCompressionType:()=>jf,ColorPicker:()=>pp,DOMSVGFactory:()=>Wf,DrawLayer:()=>gp,FeatureTest:()=>Ue,GlobalWorkerOptions:()=>di,ImageKind:()=>zh,InvalidPDFException:()=>lm,MissingPDFException:()=>Rs,OPS:()=>mn,Outliner:()=>dp,PDFDataRangeTransport:()=>Gm,PDFDateString:()=>vm,PDFWorker:()=>Is,PasswordResponses:()=>yy,PermissionFlag:()=>by,PixelsPerInch:()=>Mn,RenderingCancelledException:()=>Yf,TextLayer:()=>Nn,UnexpectedResponseException:()=>Wh,Util:()=>et,VerbosityLevel:()=>Gh,XfaLayer:()=>Ym,build:()=>XA,createValidAbsoluteUrl:()=>wy,fetchData:()=>Zh,getDocument:()=>jA,getFilenameFromUrl:()=>My,getPdfFilenameFromUrl:()=>Oy,getXfaPageViewport:()=>Fy,isDataScheme:()=>Xf,isPdfFile:()=>qf,noContextMenu:()=>He,normalizeUnicode:()=>Ly,renderTextLayer:()=>LA,setLayerDimensions:()=>ks,shadow:()=>Dt,updateTextLayer:()=>kA,version:()=>YA});const Pe=typeof ea=="object"&&ea+""=="[object process]"&&!ea.versions.nw&&!(ea.versions.electron&&ea.type&&ea.type!=="browser"),om=[1,0,0,1,0,0],Bf=[.001,0,0,.001,0,0],my=1e7,Hh=1.35,LS=.35/Hh,ln={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Xi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},vy="pdfjs_internal_editor_",Rt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},gt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},by={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Re={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},zh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},oe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},kS={GROUP:"Group",REPLY:"R"},IS={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},DS={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},zo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},MS={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},OS={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},FS={O:"PageOpen",C:"PageClose"},Gh={ERRORS:0,WARNINGS:1,INFOS:5},jf={NONE:0,BINARY:1},mn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},yy={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Vh=Gh.WARNINGS;function Ay(o){Number.isInteger(o)&&(Vh=o)}function Ey(){return Vh}function $h(o){Vh>=Gh.INFOS&&console.log(`Info: ${o}`)}function Et(o){Vh>=Gh.WARNINGS&&console.log(`Warning: ${o}`)}function Ut(o){throw new Error(o)}function le(o,t){o||Ut(t)}function _y(o){switch(o==null?void 0:o.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function wy(o,t=null,e=null){if(!o)return null;try{if(e&&typeof o=="string"){if(e.addDefaultProtocol&&o.startsWith("www.")){const i=o.match(/\./g);(i==null?void 0:i.length)>=2&&(o=`http://${o}`)}if(e.tryConvertEncoding)try{o=Ry(o)}catch(i){}}const n=t?new URL(o,t):new URL(o);if(_y(n))return n}catch(n){}return null}function Dt(o,t,e,n=!1){return Object.defineProperty(o,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const qi=function(){function t(e,n){this.constructor===t&&Ut("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class Uf extends qi{constructor(t,e){super(t,"PasswordException");this.code=e}}class Hf extends qi{constructor(t,e){super(t,"UnknownErrorException");this.details=e}}class lm extends qi{constructor(t){super(t,"InvalidPDFException")}}class Rs extends qi{constructor(t){super(t,"MissingPDFException")}}class Wh extends qi{constructor(t,e){super(t,"UnexpectedResponseException");this.status=e}}class Sy extends qi{constructor(t){super(t,"FormatError")}}class Ls extends qi{constructor(t){super(t,"AbortException")}}function cm(o){(typeof o!="object"||(o==null?void 0:o.length)===void 0)&&Ut("Invalid argument for bytesToString");const t=o.length,e=8192;if(t<e)return String.fromCharCode.apply(null,o);const n=[];for(let i=0;i<t;i+=e){const a=Math.min(i+e,t),h=o.subarray(i,a);n.push(String.fromCharCode.apply(null,h))}return n.join("")}function Go(o){typeof o!="string"&&Ut("Invalid argument for stringToBytes");const t=o.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=o.charCodeAt(n)&255;return e}function xy(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function NS(o){return Object.keys(o).length}function zf(o){const t=Object.create(null);for(const[e,n]of o)t[e]=n;return t}function Cy(){const o=new Uint8Array(4);return o[0]=1,new Uint32Array(o.buffer,0,1)[0]===1}function Ty(){try{return new Function(""),!0}catch(o){return!1}}class Ue{static get isLittleEndian(){return Dt(this,"isLittleEndian",Cy())}static get isEvalSupported(){return Dt(this,"isEvalSupported",Ty())}static get isOffscreenCanvasSupported(){return Dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!="undefined")}static get platform(){return typeof navigator!="undefined"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Dt(this,"platform",{isMac:navigator.platform.includes("Mac")}):Dt(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return Dt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Gf=Array.from(Array(256).keys(),o=>o.toString(16).padStart(2,"0"));class et{static makeHexColor(t,e,n){return`#${Gf[t]}${Gf[e]}${Gf[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[n,i]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,a=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[i,a]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),h=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],a[0],h[0]),Math.min(n[1],i[1],a[1],h[1]),Math.max(n[0],i[0],a[0],h[0]),Math.max(n[1],i[1],a[1],h[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],h=t[2]*e[1]+t[3]*e[3],d=(n+h)/2,f=Math.sqrt(Sh(n+h,2)-4*(n*h-a*i))/2,p=d+f||1,g=d-f||1;return[Math.sqrt(p),Math.sqrt(g)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),h=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>h?null:[n,a,i,h]}static bezierBoundingBox(t,e,n,i,a,h,d,f,p){return p?(p[0]=Math.min(p[0],t,d),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,d),p[3]=Math.max(p[3],e,f)):p=[Math.min(t,d),Math.min(e,f),Math.max(t,d),Math.max(e,f)],_(this,nl,rv).call(this,t,n,a,d,e,i,h,f,3*(-t+3*(n-a)+d),6*(t-2*n+a),3*(n-t),p),_(this,nl,rv).call(this,t,n,a,d,e,i,h,f,3*(-e+3*(i-h)+f),6*(e-2*i+h),3*(i-e),p),p}}ha=new WeakSet,Ip=function(t,e,n,i,a,h,d,f,p,g){if(p<=0||p>=1)return;const v=1-p,b=p*p,y=b*p,A=v*(v*(v*t+3*p*e)+3*b*n)+y*i,S=v*(v*(v*a+3*p*h)+3*b*d)+y*f;g[0]=Math.min(g[0],A),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],S)},nl=new WeakSet,rv=function(t,e,n,i,a,h,d,f,p,g,v,b){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&_(this,ha,Ip).call(this,t,e,n,i,a,h,d,f,-v/g,b);return}const y=Sh(g,2)-4*v*p;if(y<0)return;const A=Math.sqrt(y),S=2*p;_(this,ha,Ip).call(this,t,e,n,i,a,h,d,f,(-g+A)/S,b),_(this,ha,Ip).call(this,t,e,n,i,a,h,d,f,(-g-A)/S,b)},ha.add(et),nl.add(et);const Py=null;function BS(o){if(o[0]>="\xEF"){let e;if(o[0]==="\xFE"&&o[1]==="\xFF"?(e="utf-16be",o.length%2==1&&(o=o.slice(0,-1))):o[0]==="\xFF"&&o[1]==="\xFE"?(e="utf-16le",o.length%2==1&&(o=o.slice(0,-1))):o[0]==="\xEF"&&o[1]==="\xBB"&&o[2]==="\xBF"&&(e="utf-8"),e)try{const n=new TextDecoder(e,{fatal:!0}),i=Go(o),a=n.decode(i);return a.includes("")?a.replaceAll(/\x1b[^\x1b]*(?:\x1b|$)/g,""):a}catch(n){Et(`stringToPDFString: "${n}".`)}}const t=[];for(let e=0,n=o.length;e<n;e++){const i=o.charCodeAt(e);if(i===27){for(;++e<n&&o.charCodeAt(e)!==27;);continue}const a=Py[i];t.push(a?String.fromCharCode(a):o.charAt(e))}return t.join("")}function Ry(o){return decodeURIComponent(escape(o))}function jS(o){return unescape(encodeURIComponent(o))}function US(o,t){if(o.length!==t.length)return!1;for(let e=0,n=o.length;e<n;e++)if(o[e]!==t[e])return!1;return!0}function HS(o=new Date){return[o.getUTCFullYear().toString(),(o.getUTCMonth()+1).toString().padStart(2,"0"),o.getUTCDate().toString().padStart(2,"0"),o.getUTCHours().toString().padStart(2,"0"),o.getUTCMinutes().toString().padStart(2,"0"),o.getUTCSeconds().toString().padStart(2,"0")].join("")}let Vf=null,hm=null;function Ly(o){return Vf||(Vf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,hm=new Map([["\uFB05","\u017Ft"]])),o.replaceAll(Vf,(t,e,n)=>e?e.normalize("NFKC"):hm.get(n))}function ky(){if(typeof crypto!="undefined"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const o=new Uint8Array(32);if(typeof crypto!="undefined"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(o);else for(let t=0;t<32;t++)o[t]=Math.floor(Math.random()*255);return cm(o)}const um="pdfjs_internal_id_",ci={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Yh{constructor(){this.constructor===Yh&&Ut("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,a){return"none"}destroy(t=!1){}}class Xh{constructor(){this.constructor===Xh&&Ut("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d")}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ut("Abstract method `_createCanvas` called.")}}class qh{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===qh&&Ut("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}fetch(e){return kt(this,arguments,function*({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?jf.BINARY:jf.NONE;return this._fetchData(n,i).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})})}_fetchData(t,e){Ut("Abstract method `_fetchData` called.")}}class Kh{constructor({baseUrl:t=null}){this.constructor===Kh&&Ut("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}fetch(e){return kt(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetchData(n).catch(i=>{throw new Error(`Unable to load font data at: ${n}`)})})}_fetchData(t){Ut("Abstract method `_fetchData` called.")}}class $f{constructor(){this.constructor===$f&&Ut("Cannot initialize BaseSVGFactory.")}create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ut("Abstract method `_createSVG` called.")}}const hi="http://www.w3.org/2000/svg",Au=class{};let Mn=Au;yt(Mn,"CSS",96),yt(Mn,"PDF",72),yt(Mn,"PDF_TO_CSS_UNITS",Au.CSS/Au.PDF);class Iy extends Yh{constructor({docId:t,ownerDocument:e=globalThis.document}={}){super();ge.add(this);Qi.add(this);Ji.add(this);ua.add(this);_u.add(this);il.add(this);ts.add(this);Us.add(this);Hs.add(this);sl.add(this);zs.add(this);Bs.set(this,void 0);Hn.set(this,void 0);gi.set(this,void 0);We.set(this,void 0);Eu.set(this,void 0);js.set(this,0);E(this,gi,t),E(this,We,e)}addFilter(t){var g;if(!t)return"none";let e=u(this,ge,Be).get(t);if(e)return e;const[n,i,a]=_(this,ua,Dp).call(this,t),h=t.length===1?n:`${n}${i}${a}`;if(e=u(this,ge,Be).get(h),e)return u(this,ge,Be).set(t,e),e;const d=`g_${u(this,gi)}_transfer_map_${E(this,js,(g=+u(this,js))+1),g}`,f=`url(#${d})`;u(this,ge,Be).set(t,f),u(this,ge,Be).set(h,f);const p=_(this,ts,Th).call(this,d);return _(this,Hs,tf).call(this,n,i,a,p),f}addHCMFilter(t,e){var y;const n=`${t}-${e}`,i="base";let a=u(this,Qi,xh).get(i);if((a==null?void 0:a.key)===n||(a?((y=a.filter)==null||y.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},u(this,Qi,xh).set(i,a)),!t||!e))return a.url;const h=_(this,zs,ef).call(this,t);t=et.makeHexColor(...h);const d=_(this,zs,ef).call(this,e);if(e=et.makeHexColor(...d),u(this,Ji,Ch).style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const f=new Array(256);for(let A=0;A<=255;A++){const S=A/255;f[A]=S<=.03928?S/12.92:Sh((S+.055)/1.055,2.4)}const p=f.join(","),g=`g_${u(this,gi)}_hcm_filter`,v=a.filter=_(this,ts,Th).call(this,g);_(this,Hs,tf).call(this,p,p,p,v),_(this,il,av).call(this,v);const b=(A,S)=>{const C=h[A]/255,T=d[A]/255,L=new Array(S+1);for(let k=0;k<=S;k++)L[k]=C+k/S*(T-C);return L.join(",")};return _(this,Hs,tf).call(this,b(0,5),b(1,5),b(2,5),v),a.url=`url(#${g})`,a.url}addAlphaFilter(t){var f;let e=u(this,ge,Be).get(t);if(e)return e;const[n]=_(this,ua,Dp).call(this,[t]),i=`alpha_${n}`;if(e=u(this,ge,Be).get(i),e)return u(this,ge,Be).set(t,e),e;const a=`g_${u(this,gi)}_alpha_map_${E(this,js,(f=+u(this,js))+1),f}`,h=`url(#${a})`;u(this,ge,Be).set(t,h),u(this,ge,Be).set(i,h);const d=_(this,ts,Th).call(this,a);return _(this,sl,ov).call(this,n,d),h}addLuminosityFilter(t){var f;let e=u(this,ge,Be).get(t||"luminosity");if(e)return e;let n,i;if(t?([n]=_(this,ua,Dp).call(this,[t]),i=`luminosity_${n}`):i="luminosity",e=u(this,ge,Be).get(i),e)return u(this,ge,Be).set(t,e),e;const a=`g_${u(this,gi)}_luminosity_map_${E(this,js,(f=+u(this,js))+1),f}`,h=`url(#${a})`;u(this,ge,Be).set(t,h),u(this,ge,Be).set(i,h);const d=_(this,ts,Th).call(this,a);return _(this,_u,Q_).call(this,d),t&&_(this,sl,ov).call(this,n,d),h}addHighlightHCMFilter(t,e,n,i,a){var T;const h=`${e}-${n}-${i}-${a}`;let d=u(this,Qi,xh).get(t);if((d==null?void 0:d.key)===h||(d?((T=d.filter)==null||T.remove(),d.key=h,d.url="none",d.filter=null):(d={key:h,url:"none",filter:null},u(this,Qi,xh).set(t,d)),!e||!n))return d.url;const[f,p]=[e,n].map(_(this,zs,ef).bind(this));let g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,y]=[i,a].map(_(this,zs,ef).bind(this));v<g&&([g,v,b,y]=[v,g,y,b]),u(this,Ji,Ch).style.color="";const A=(L,k,I)=>{const O=new Array(256),N=(v-g)/I,U=L/255,q=(k-L)/(255*I);let Y=0;for(let Z=0;Z<=I;Z++){const H=Math.round(g+Z*N),st=U+Z*q;for(let it=Y;it<=H;it++)O[it]=st;Y=H+1}for(let Z=Y;Z<256;Z++)O[Z]=O[Y-1];return O.join(",")},S=`g_${u(this,gi)}_hcm_${t}_filter`,C=d.filter=_(this,ts,Th).call(this,S);return _(this,il,av).call(this,C),_(this,Hs,tf).call(this,A(b[0],y[0],5),A(b[1],y[1],5),A(b[2],y[2],5),C),d.url=`url(#${S})`,d.url}destroy(t=!1){t&&u(this,Qi,xh).size!==0||(u(this,Hn)&&(u(this,Hn).parentNode.parentNode.remove(),E(this,Hn,null)),u(this,Bs)&&(u(this,Bs).clear(),E(this,Bs,null)),E(this,js,0))}}Bs=new WeakMap,Hn=new WeakMap,gi=new WeakMap,We=new WeakMap,Eu=new WeakMap,js=new WeakMap,ge=new WeakSet,Be=function(){return u(this,Bs)||E(this,Bs,new Map)},Qi=new WeakSet,xh=function(){return u(this,Eu)||E(this,Eu,new Map)},Ji=new WeakSet,Ch=function(){if(!u(this,Hn)){const t=u(this,We).createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=u(this,We).createElementNS(hi,"svg");n.setAttribute("width",0),n.setAttribute("height",0),E(this,Hn,u(this,We).createElementNS(hi,"defs")),t.append(n),n.append(u(this,Hn)),u(this,We).body.append(t)}return u(this,Hn)},ua=new WeakSet,Dp=function(t){if(t.length===1){const f=t[0],p=new Array(256);for(let v=0;v<256;v++)p[v]=f[v]/255;const g=p.join(",");return[g,g,g]}const[e,n,i]=t,a=new Array(256),h=new Array(256),d=new Array(256);for(let f=0;f<256;f++)a[f]=e[f]/255,h[f]=n[f]/255,d[f]=i[f]/255;return[a.join(","),h.join(","),d.join(",")]},_u=new WeakSet,Q_=function(t){const e=u(this,We).createElementNS(hi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)},il=new WeakSet,av=function(t){const e=u(this,We).createElementNS(hi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)},ts=new WeakSet,Th=function(t){const e=u(this,We).createElementNS(hi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),u(this,Ji,Ch).append(e),e},Us=new WeakSet,Jd=function(t,e,n){const i=u(this,We).createElementNS(hi,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)},Hs=new WeakSet,tf=function(t,e,n,i){const a=u(this,We).createElementNS(hi,"feComponentTransfer");i.append(a),_(this,Us,Jd).call(this,a,"feFuncR",t),_(this,Us,Jd).call(this,a,"feFuncG",e),_(this,Us,Jd).call(this,a,"feFuncB",n)},sl=new WeakSet,ov=function(t,e){const n=u(this,We).createElementNS(hi,"feComponentTransfer");e.append(n),_(this,Us,Jd).call(this,n,"feFuncA",t)},zs=new WeakSet,ef=function(t){return u(this,Ji,Ch).style.color=t,Kf(getComputedStyle(u(this,Ji,Ch)).getPropertyValue("color"))};class Dy extends Xh{constructor({ownerDocument:t=globalThis.document}={}){super();this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}function Zh(o,t="text"){return kt(this,null,function*(){if($o(o,document.baseURI)){const e=yield fetch(o);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",o,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})})}class dm extends qh{_fetchData(t,e){return Zh(t,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):Go(n),compressionType:e}))}}class fm extends Kh{_fetchData(t){return Zh(t,"arraybuffer").then(e=>new Uint8Array(e))}}class Wf extends $f{_createSVG(t){return document.createElementNS(hi,t)}}class Vo{constructor({viewBox:t,scale:e,rotation:n,offsetX:i=0,offsetY:a=0,dontFlip:h=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=a;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,g,v,b;switch(n%=360,n<0&&(n+=360),n){case 180:p=-1,g=0,v=0,b=1;break;case 90:p=0,g=1,v=1,b=0;break;case 270:p=0,g=-1,v=-1,b=0;break;case 0:p=1,g=0,v=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,b=-b);let y,A,S,C;p===0?(y=Math.abs(f-t[1])*e+i,A=Math.abs(d-t[0])*e+a,S=(t[3]-t[1])*e,C=(t[2]-t[0])*e):(y=Math.abs(d-t[0])*e+i,A=Math.abs(f-t[1])*e+a,S=(t[2]-t[0])*e,C=(t[3]-t[1])*e),this.transform=[p*e,g*e,v*e,b*e,y-p*e*d-v*e*f,A-g*e*d-b*e*f],this.width=S,this.height=C}get rawDims(){const{viewBox:t}=this;return Dt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new Vo({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(t,e){return et.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=et.applyTransform([t[0],t[1]],this.transform),n=et.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return et.applyInverseTransform([t,e],this.transform)}}class Yf extends qi{constructor(t,e=0){super(t,"RenderingCancelledException");this.extraDelay=e}}function Xf(o){const t=o.length;let e=0;for(;e<t&&o[e].trim()==="";)e++;return o.substring(e,e+5).toLowerCase()==="data:"}function qf(o){return typeof o=="string"&&/\.pdf$/i.test(o)}function My(o){return[o]=o.split(/[#?]/,1),o.substring(o.lastIndexOf("/")+1)}function Oy(o,t="document.pdf"){if(typeof o!="string")return t;if(Xf(o))return Et('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(o);let a=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch(h){}return a||t}class pm{constructor(){yt(this,"started",Object.create(null));yt(this,"times",[])}time(t){t in this.started&&Et(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Et(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-i}ms
`);return t.join("")}}function $o(o,t){try{const{protocol:e}=t?new URL(o,t):new URL(o);return e==="http:"||e==="https:"}catch(e){return!1}}function He(o){o.preventDefault()}function gm(o){console.log("Deprecated API usage: "+o)}let mm;class vm{static toDateObject(t){if(!t||typeof t!="string")return null;mm||(mm=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=mm.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let h=parseInt(e[4],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[5],10);d=d>=0&&d<=59?d:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let v=parseInt(e[9],10)||0;return v=v>=0&&v<=59?v:0,p==="-"?(h+=g,d+=v):p==="+"&&(h-=g,d-=v),new Date(Date.UTC(n,i,a,h,d,f))}}function Fy(o,{scale:t=1,rotation:e=0}){const{width:n,height:i}=o.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new Vo({viewBox:a,scale:t,rotation:e})}function Kf(o){if(o.startsWith("#")){const t=parseInt(o.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(t=>parseInt(t)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Et(`Not a valid color format: "${o}"`),[0,0,0])}function Ny(o){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of o.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;o.set(e,Kf(n))}t.remove()}function qt(o){const{a:t,b:e,c:n,d:i,e:a,f:h}=o.getTransform();return[t,e,n,i,a,h]}function ui(o){const{a:t,b:e,c:n,d:i,e:a,f:h}=o.getTransform().invertSelf();return[t,e,n,i,a,h]}function ks(o,t,e=!1,n=!0){if(t instanceof Vo){const{pageWidth:i,pageHeight:a}=t.rawDims,{style:h}=o,d=Ue.isCSSRoundSupported,f=`var(--scale-factor) * ${i}px`,p=`var(--scale-factor) * ${a}px`,g=d?`round(${f}, 1px)`:`calc(${f})`,v=d?`round(${p}, 1px)`:`calc(${p})`;!e||t.rotation%180==0?(h.width=g,h.height=v):(h.width=v,h.height=g)}n&&o.setAttribute("data-main-rotation",t.rotation)}const wp=class{constructor(t){Su.add(this);xu.add(this);da.add(this);Cu.add(this);rl.add(this);Gs.set(this,null);Vs.set(this,null);zn.set(this,void 0);$s.set(this,null);E(this,zn,t)}render(){const t=E(this,Gs,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",He),t.addEventListener("pointerdown",_(wp,wu,J_));const e=E(this,$s,document.createElement("div"));e.className="buttons",t.append(e);const n=u(this,zn).toolbarPosition;if(n){const{style:i}=t,a=u(this,zn)._uiManager.direction==="ltr"?1-n[0]:n[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return _(this,Cu,nw).call(this),t}hide(){var t;u(this,Gs).classList.add("hidden"),(t=u(this,Vs))==null||t.hideDropdown()}show(){u(this,Gs).classList.remove("hidden")}addAltTextButton(t){_(this,da,Mp).call(this,t),u(this,$s).prepend(t,u(this,rl,lv))}addColorPicker(t){E(this,Vs,t);const e=t.renderButton();_(this,da,Mp).call(this,e),u(this,$s).prepend(e,u(this,rl,lv))}remove(){var t;u(this,Gs).remove(),(t=u(this,Vs))==null||t.destroy(),E(this,Vs,null)}};let Zf=wp;Gs=new WeakMap,Vs=new WeakMap,zn=new WeakMap,$s=new WeakMap,wu=new WeakSet,J_=function(t){t.stopPropagation()},Su=new WeakSet,tw=function(t){u(this,zn)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},xu=new WeakSet,ew=function(t){u(this,zn)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},da=new WeakSet,Mp=function(t){t.addEventListener("focusin",_(this,Su,tw).bind(this),{capture:!0}),t.addEventListener("focusout",_(this,xu,ew).bind(this),{capture:!0}),t.addEventListener("contextmenu",He)},Cu=new WeakSet,nw=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${u(this,zn).editorType}-button`),_(this,da,Mp).call(this,t),t.addEventListener("click",e=>{u(this,zn)._uiManager.delete()}),u(this,$s).append(t)},rl=new WeakSet,lv=function(){const t=document.createElement("div");return t.className="divider",t},wu.add(Zf);class By{constructor(t){Tu.add(this);Pu.add(this);Ru.add(this);al.set(this,null);Ws.set(this,null);ol.set(this,void 0);E(this,ol,t)}show(t,e,n){const[i,a]=_(this,Pu,sw).call(this,e,n),{style:h}=u(this,Ws)||E(this,Ws,_(this,Tu,iw).call(this));t.append(u(this,Ws)),h.insetInlineEnd=`${100*i}%`,h.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Ws).remove()}}al=new WeakMap,Ws=new WeakMap,ol=new WeakMap,Tu=new WeakSet,iw=function(){const t=E(this,Ws,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",He);const e=E(this,al,document.createElement("div"));return e.className="buttons",t.append(e),_(this,Ru,rw).call(this),t},Pu=new WeakSet,sw=function(t,e){let n=0,i=0;for(const a of t){const h=a.y+a.height;if(h<n)continue;const d=a.x+(e?a.width:0);if(h>n){i=d,n=h;continue}e?d>i&&(i=d):d<i&&(i=d)}return[e?1-i:i,n]},Ru=new WeakSet,rw=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),t.addEventListener("contextmenu",He),t.addEventListener("click",()=>{u(this,ol).highlightSelection("floating_button")}),u(this,al).append(t)};function Qh(o,t,e){for(const n of e)t.addEventListener(n,o[n].bind(o))}function jy(o){return Math.round(Math.min(255,Math.max(1,255*o))).toString(16).padStart(2,"0")}class Uy{constructor(){Lu.set(this,0)}get id(){var t;return`${vy}${E(this,Lu,(t=+u(this,Lu))+1),t}`}}Lu=new WeakMap;const Sp=class{constructor(){cl.add(this);ll.set(this,ky());ku.set(this,0);hn.set(this,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d"),i=new Image;i.src=t;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Dt(this,"_isSVGFittingCanvas",a)}getFromFile(t){return kt(this,null,function*(){const{lastModified:e,name:n,size:i,type:a}=t;return _(this,cl,cv).call(this,`${e}_${n}_${i}_${a}`,t)})}getFromUrl(t){return kt(this,null,function*(){return _(this,cl,cv).call(this,t,t)})}getFromId(t){return kt(this,null,function*(){u(this,hn)||E(this,hn,new Map);const e=u(this,hn).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null})}getSvgUrl(t){const e=u(this,hn).get(t);return(e==null?void 0:e.isSvg)?e.svgUrl:null}deleteId(t){u(this,hn)||E(this,hn,new Map);const e=u(this,hn).get(t);!e||(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${u(this,ll)}_`)}};let bm=Sp;ll=new WeakMap,ku=new WeakMap,hn=new WeakMap,cl=new WeakSet,cv=function(t,e){return kt(this,null,function*(){var i;u(this,hn)||E(this,hn,new Map);let n=u(this,hn).get(t);if(n===null)return null;if(n==null?void 0:n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,ll)}_${E(this,ku,(i=+u(this,ku))+1),i}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=yield Zh(e,"blob")):a=n.file=e,a.type==="image/svg+xml"){const h=Sp._isSVGFittingCanvas,d=new FileReader,f=new Image,p=new Promise((g,v)=>{f.onload=()=>{n.bitmap=f,n.isSvg=!0,g()},d.onload=()=>kt(this,null,function*(){const b=n.svgUrl=d.result;f.src=(yield h)?`${b}#svgView(preserveAspectRatio(none))`:b}),f.onerror=d.onerror=v});d.readAsDataURL(a),yield p}else n.bitmap=yield createImageBitmap(a);n.refCounter=1}catch(a){console.error(a),n=null}return u(this,hn).set(t,n),n&&u(this,hn).set(n.id,n),n})};class Hy{constructor(t=128){me.set(this,[]);es.set(this,!1);hl.set(this,void 0);ve.set(this,-1);E(this,hl,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:h=!1,keepUndo:d=!1}){if(i&&t(),u(this,es))return;const f={cmd:t,undo:e,post:n,type:a};if(u(this,ve)===-1){u(this,me).length>0&&(u(this,me).length=0),E(this,ve,0),u(this,me).push(f);return}if(h&&u(this,me)[u(this,ve)].type===a){d&&(f.undo=u(this,me)[u(this,ve)].undo),u(this,me)[u(this,ve)]=f;return}const p=u(this,ve)+1;p===u(this,hl)?u(this,me).splice(0,1):(E(this,ve,p),p<u(this,me).length&&u(this,me).splice(p)),u(this,me).push(f)}undo(){if(u(this,ve)===-1)return;E(this,es,!0);const{undo:t,post:e}=u(this,me)[u(this,ve)];t(),e==null||e(),E(this,es,!1),E(this,ve,u(this,ve)-1)}redo(){if(u(this,ve)<u(this,me).length-1){E(this,ve,u(this,ve)+1),E(this,es,!0);const{cmd:t,post:e}=u(this,me)[u(this,ve)];t(),e==null||e(),E(this,es,!1)}}hasSomethingToUndo(){return u(this,ve)!==-1}hasSomethingToRedo(){return u(this,ve)<u(this,me).length-1}destroy(){E(this,me,null)}}me=new WeakMap,es=new WeakMap,hl=new WeakMap,ve=new WeakMap;class Wo{constructor(t){Iu.add(this);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ue.platform;for(const[n,i,a={}]of t)for(const h of n){const d=h.startsWith("mac+");e&&d?(this.callbacks.set(h.slice(4),{callback:i,options:a}),this.allKeys.add(h.split("+").at(-1))):!e&&!d&&(this.callbacks.set(h,{callback:i,options:a}),this.allKeys.add(h.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(_(this,Iu,aw).call(this,e));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:h=[],checker:d=null}}=n;d&&!d(t,e)||(i.bind(t,...h,e)(),a||(e.stopPropagation(),e.preventDefault()))}}Iu=new WeakSet,aw=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const xp=class{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Ny(t),Dt(this,"_colors",t)}convert(t){const e=Kf(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((a,h)=>a===e[h]))return xp._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?et.makeHexColor(...e):t}};let Qf=xp;yt(Qf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));const zu=class{constructor(t,e,n,i,a,h,d,f,p){ba.add(this);Mu.add(this);Ou.add(this);ya.add(this);Fu.add(this);Nu.add(this);Bu.add(this);Ll.add(this);kl.add(this);Il.add(this);Dl.add(this);Ml.add(this);Ae.add(this);Yn.add(this);ju.add(this);Uu.add(this);Ol.add(this);Hu.add(this);Zs.add(this);Fl.add(this);Je.set(this,null);ce.set(this,new Map);be.set(this,new Map);fa.set(this,null);mi.set(this,null);pa.set(this,null);bn.set(this,new Hy);ga.set(this,0);Ys.set(this,new Set);Gn.set(this,null);vi.set(this,null);Xs.set(this,new Set);ul.set(this,!1);dl.set(this,null);Vn.set(this,null);ma.set(this,null);ns.set(this,!1);$n.set(this,null);Du.set(this,new Uy);is.set(this,!1);fl.set(this,!1);qs.set(this,null);pl.set(this,null);va.set(this,null);ye.set(this,Rt.NONE);Ft.set(this,new Set);bi.set(this,null);Ks.set(this,null);gl.set(this,null);ml.set(this,this.blur.bind(this));vl.set(this,this.focus.bind(this));bl.set(this,this.copy.bind(this));yl.set(this,this.cut.bind(this));Al.set(this,this.paste.bind(this));El.set(this,this.keydown.bind(this));_l.set(this,this.keyup.bind(this));wl.set(this,this.onEditingAction.bind(this));Sl.set(this,this.onPageChanging.bind(this));xl.set(this,this.onScaleChanging.bind(this));Cl.set(this,_(this,Ou,lw).bind(this));Tl.set(this,this.onRotationChanging.bind(this));Pl.set(this,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});ss.set(this,[0,0]);Wn.set(this,null);yi.set(this,null);Rl.set(this,null);E(this,yi,t),E(this,Rl,e),E(this,fa,n),this._eventBus=i,this._eventBus._on("editingaction",u(this,wl)),this._eventBus._on("pagechanging",u(this,Sl)),this._eventBus._on("scalechanging",u(this,xl)),this._eventBus._on("rotationchanging",u(this,Tl)),_(this,Fu,cw).call(this),_(this,kl,uv).call(this),E(this,mi,a.annotationStorage),E(this,dl,a.filterFactory),E(this,Ks,h),E(this,ma,d||null),E(this,ul,f),E(this,va,p||null),this.viewParameters={realScale:Mn.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=zu.prototype,e=h=>u(h,yi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&h.hasSomethingToControl(),n=(h,{target:d})=>{if(d instanceof HTMLInputElement){const{type:f}=d;return f!=="text"&&f!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new Wo([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(h,{target:d})=>!(d instanceof HTMLButtonElement)&&u(h,yi).contains(d)&&!h.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(h,{target:d})=>!(d instanceof HTMLButtonElement)&&u(h,yi).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}destroy(){var t,e;_(this,Il,dv).call(this),_(this,Ll,hv).call(this),this._eventBus._off("editingaction",u(this,wl)),this._eventBus._off("pagechanging",u(this,Sl)),this._eventBus._off("scalechanging",u(this,xl)),this._eventBus._off("rotationchanging",u(this,Tl));for(const n of u(this,be).values())n.destroy();u(this,be).clear(),u(this,ce).clear(),u(this,Xs).clear(),E(this,Je,null),u(this,Ft).clear(),u(this,bn).destroy(),(t=u(this,fa))==null||t.destroy(),(e=u(this,$n))==null||e.hide(),E(this,$n,null),u(this,Vn)&&(clearTimeout(u(this,Vn)),E(this,Vn,null)),u(this,Wn)&&(clearTimeout(u(this,Wn)),E(this,Wn,null)),_(this,Nu,hw).call(this)}mlGuess(t){return kt(this,null,function*(){var e;return((e=u(this,va))==null?void 0:e.guess(t))||null})}get hasMLManager(){return!!u(this,va)}get hcmFilter(){return Dt(this,"hcmFilter",u(this,Ks)?u(this,dl).addHCMFilter(u(this,Ks).foreground,u(this,Ks).background):"none")}get direction(){return Dt(this,"direction",getComputedStyle(u(this,yi)).direction)}get highlightColors(){return Dt(this,"highlightColors",u(this,ma)?new Map(u(this,ma).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){E(this,pl,t)}editAltText(t){var e;(e=u(this,fa))==null||e.editAltText(this,t)}onPageChanging({pageNumber:t}){E(this,ga,t-1)}focusMainContainer(){u(this,yi).focus()}findParent(t,e){for(const n of u(this,be).values()){const{x:i,y:a,width:h,height:d}=n.div.getBoundingClientRect();if(t>=i&&t<=i+h&&e>=a&&e<=a+d)return n}return null}disableUserSelect(t=!1){u(this,Rl).classList.toggle("noUserSelect",t)}addShouldRescale(t){u(this,Xs).add(t)}removeShouldRescale(t){u(this,Xs).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Mn.PDF_TO_CSS_UNITS;for(const e of u(this,Xs))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:h}=e,d=e.toString(),p=_(this,ba,Op).call(this,e).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!!g){e.empty(),u(this,ye)===Rt.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Rt.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const v of u(this,be).values())if(v.hasTextLayer(p)){v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:h,text:d});break}}}addToAnnotationStorage(t){!t.isEmpty()&&u(this,mi)&&!u(this,mi).has(t.id)&&u(this,mi).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,u(this,ns)&&(E(this,ns,!1),_(this,ya,Fp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of u(this,Ft))if(e.div.contains(t)){E(this,qs,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!u(this,qs))return;const[t,e]=u(this,qs);E(this,qs,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0}),e.focus()}addEditListeners(){_(this,kl,uv).call(this),_(this,Dl,fv).call(this)}removeEditListeners(){_(this,Il,dv).call(this),_(this,Ml,pv).call(this)}copy(t){var n;if(t.preventDefault(),(n=u(this,Je))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of u(this,Ft)){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const h of u(this,vi))if(h.isHandlingMimeForPasting(a.type)){h.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Et(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const f of n){const p=i.deserialize(f);if(!p)return;a.push(p)}const h=()=>{for(const f of a)_(this,Ol,gv).call(this,f);_(this,Fl,mv).call(this,a)},d=()=>{for(const f of a)f.remove()};this.addCommands({cmd:h,undo:d,mustExec:!0})}catch(a){Et(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,ye)!==Rt.NONE&&!this.isEditorHandlingKeyboard&&zu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,ns)&&(E(this,ns,!1),_(this,ya,Fp).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(_(this,Bu,uw).call(this),_(this,Dl,fv).call(this),_(this,Ae,qe).call(this,{isEditing:u(this,ye)!==Rt.NONE,isEmpty:_(this,Zs,nf).call(this),hasSomethingToUndo:u(this,bn).hasSomethingToUndo(),hasSomethingToRedo:u(this,bn).hasSomethingToRedo(),hasSelectedEditor:!1})):(_(this,Ll,hv).call(this),_(this,Ml,pv).call(this),_(this,Ae,qe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!u(this,vi)){E(this,vi,t);for(const e of u(this,vi))_(this,Yn,Wr).call(this,e.defaultPropertiesToUpdate)}}getId(){return u(this,Du).id}get currentLayer(){return u(this,be).get(u(this,ga))}getLayer(t){return u(this,be).get(t)}get currentPageIndex(){return u(this,ga)}addLayer(t){u(this,be).set(t.pageIndex,t),u(this,is)?t.enable():t.disable()}removeLayer(t){u(this,be).delete(t.pageIndex)}updateMode(t,e=null,n=!1){if(u(this,ye)!==t){if(E(this,ye,t),t===Rt.NONE){this.setEditingState(!1),_(this,Uu,fw).call(this);return}this.setEditingState(!0),_(this,ju,dw).call(this),this.unselectAll();for(const i of u(this,be).values())i.updateMode(t);if(!e&&n){this.addNewEditorFromKeyboard();return}if(!!e){for(const i of u(this,ce).values())if(i.annotationElementId===e){this.setSelected(i),i.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==u(this,ye)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(!!u(this,vi)){switch(t){case gt.CREATE:this.currentLayer.addNewEditor();return;case gt.HIGHLIGHT_DEFAULT_COLOR:(n=u(this,pl))==null||n.updateColor(e);break;case gt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,gl)||E(this,gl,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of u(this,Ft))i.updateParams(t,e);for(const i of u(this,vi))i.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var a,h;for(const d of u(this,ce).values())d.editorType===t&&d.show(e);((h=(a=u(this,gl))==null?void 0:a.get(gt.HIGHLIGHT_SHOW_ALL))!=null?h:!0)!==e&&_(this,Yn,Wr).call(this,[[gt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(u(this,fl)!==t){E(this,fl,t);for(const e of u(this,be).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of u(this,ce).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return u(this,ce).get(t)}addEditor(t){u(this,ce).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(u(this,Vn)&&clearTimeout(u(this,Vn)),E(this,Vn,setTimeout(()=>{this.focusMainContainer(),E(this,Vn,null)},0))),u(this,ce).delete(t.id),this.unselect(t),(!t.annotationElementId||!u(this,Ys).has(t.annotationElementId))&&((e=u(this,mi))==null||e.remove(t.id))}addDeletedAnnotationElement(t){u(this,Ys).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return u(this,Ys).has(t)}removeDeletedAnnotationElement(t){u(this,Ys).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){u(this,Je)!==t&&(E(this,Je,t),t&&_(this,Yn,Wr).call(this,t.propertiesToUpdate))}updateUI(t){u(this,Hu,pw)===t&&_(this,Yn,Wr).call(this,t.propertiesToUpdate)}toggleSelected(t){if(u(this,Ft).has(t)){u(this,Ft).delete(t),t.unselect(),_(this,Ae,qe).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Ft).add(t),t.select(),_(this,Yn,Wr).call(this,t.propertiesToUpdate),_(this,Ae,qe).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of u(this,Ft))e!==t&&e.unselect();u(this,Ft).clear(),u(this,Ft).add(t),t.select(),_(this,Yn,Wr).call(this,t.propertiesToUpdate),_(this,Ae,qe).call(this,{hasSelectedEditor:!0})}isSelected(t){return u(this,Ft).has(t)}get firstSelectedEditor(){return u(this,Ft).values().next().value}unselect(t){t.unselect(),u(this,Ft).delete(t),_(this,Ae,qe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Ft).size!==0}get isEnterHandled(){return u(this,Ft).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){u(this,bn).undo(),_(this,Ae,qe).call(this,{hasSomethingToUndo:u(this,bn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,Zs,nf).call(this)})}redo(){u(this,bn).redo(),_(this,Ae,qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,bn).hasSomethingToRedo(),isEmpty:_(this,Zs,nf).call(this)})}addCommands(t){u(this,bn).add(t),_(this,Ae,qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,Zs,nf).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...u(this,Ft)],e=()=>{for(const i of t)i.remove()},n=()=>{for(const i of t)_(this,Ol,gv).call(this,i)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=u(this,Je))==null||t.commitOrRemove()}hasSomethingToControl(){return u(this,Je)||this.hasSelection}selectAll(){for(const t of u(this,Ft))t.commit();_(this,Fl,mv).call(this,u(this,ce).values())}unselectAll(){if(!(u(this,Je)&&(u(this,Je).commitOrRemove(),u(this,ye)!==Rt.NONE))&&!!this.hasSelection){for(const t of u(this,Ft))t.unselect();u(this,Ft).clear(),_(this,Ae,qe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,ss)[0]+=t,u(this,ss)[1]+=e;const[i,a]=u(this,ss),h=[...u(this,Ft)],d=1e3;u(this,Wn)&&clearTimeout(u(this,Wn)),E(this,Wn,setTimeout(()=>{E(this,Wn,null),u(this,ss)[0]=u(this,ss)[1]=0,this.addCommands({cmd:()=>{for(const f of h)u(this,ce).has(f.id)&&f.translateInPage(i,a)},undo:()=>{for(const f of h)u(this,ce).has(f.id)&&f.translateInPage(-i,-a)},mustExec:!1})},d));for(const f of h)f.translateInPage(t,e)}setUpDragSession(){if(!!this.hasSelection){this.disableUserSelect(!0),E(this,Gn,new Map);for(const t of u(this,Ft))u(this,Gn).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,Gn))return!1;this.disableUserSelect(!1);const t=u(this,Gn);E(this,Gn,null);let e=!1;for(const[{x:i,y:a,pageIndex:h},d]of t)d.newX=i,d.newY=a,d.newPageIndex=h,e||(e=i!==d.savedX||a!==d.savedY||h!==d.savedPageIndex);if(!e)return!1;const n=(i,a,h,d)=>{if(u(this,ce).has(i.id)){const f=u(this,be).get(d);f?i._setParentAndPosition(f,a,h):(i.pageIndex=d,i.x=a,i.y=h)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:h,newPageIndex:d}]of t)n(i,a,h,d)},undo:()=>{for(const[i,{savedX:a,savedY:h,savedPageIndex:d}]of t)n(i,a,h,d)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(!!u(this,Gn))for(const n of u(this,Gn).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||u(this,Ft).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return u(this,Je)===t}getActive(){return u(this,Je)}getMode(){return u(this,ye)}get imageManager(){return Dt(this,"imageManager",new bm)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,g=e.rangeCount;p<g;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:h}=t.getBoundingClientRect();let d;switch(t.getAttribute("data-main-rotation")){case"90":d=(p,g,v,b)=>({x:(g-i)/h,y:1-(p+v-n)/a,width:b/h,height:v/a});break;case"180":d=(p,g,v,b)=>({x:1-(p+v-n)/a,y:1-(g+b-i)/h,width:v/a,height:b/h});break;case"270":d=(p,g,v,b)=>({x:1-(g+b-i)/h,y:(p-n)/a,width:b/h,height:v/a});break;default:d=(p,g,v,b)=>({x:(p-n)/a,y:(g-i)/h,width:v/a,height:b/h});break}const f=[];for(let p=0,g=e.rangeCount;p<g;p++){const v=e.getRangeAt(p);if(!v.collapsed)for(const{x:b,y,width:A,height:S}of v.getClientRects())A===0||S===0||f.push(d(b,y,A,S))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(u(this,pa)||E(this,pa,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=u(this,pa))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=u(this,pa))==null?void 0:i.get(t.data.id);if(!e)return;const n=u(this,mi).getRawValue(e);!n||u(this,ye)===Rt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t)}};let Ki=zu;Je=new WeakMap,ce=new WeakMap,be=new WeakMap,fa=new WeakMap,mi=new WeakMap,pa=new WeakMap,bn=new WeakMap,ga=new WeakMap,Ys=new WeakMap,Gn=new WeakMap,vi=new WeakMap,Xs=new WeakMap,ul=new WeakMap,dl=new WeakMap,Vn=new WeakMap,ma=new WeakMap,ns=new WeakMap,$n=new WeakMap,Du=new WeakMap,is=new WeakMap,fl=new WeakMap,qs=new WeakMap,pl=new WeakMap,va=new WeakMap,ye=new WeakMap,Ft=new WeakMap,bi=new WeakMap,Ks=new WeakMap,gl=new WeakMap,ml=new WeakMap,vl=new WeakMap,bl=new WeakMap,yl=new WeakMap,Al=new WeakMap,El=new WeakMap,_l=new WeakMap,wl=new WeakMap,Sl=new WeakMap,xl=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,Pl=new WeakMap,ss=new WeakMap,Wn=new WeakMap,yi=new WeakMap,Rl=new WeakMap,ba=new WeakSet,Op=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Mu=new WeakSet,ow=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=_(this,ba,Op).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);!i||(u(this,$n)||E(this,$n,new By(this)),u(this,$n).show(n,i,this.direction==="ltr"))},Ou=new WeakSet,lw=function(){var a,h,d;const t=document.getSelection();if(!t||t.isCollapsed){u(this,bi)&&((a=u(this,$n))==null||a.hide(),E(this,bi,null),_(this,Ae,qe).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===u(this,bi))return;if(!_(this,ba,Op).call(this,t).closest(".textLayer")){u(this,bi)&&((h=u(this,$n))==null||h.hide(),E(this,bi,null),_(this,Ae,qe).call(this,{hasSelectedText:!1}));return}if((d=u(this,$n))==null||d.hide(),E(this,bi,e),_(this,Ae,qe).call(this,{hasSelectedText:!0}),!(u(this,ye)!==Rt.HIGHLIGHT&&u(this,ye)!==Rt.NONE)&&(u(this,ye)===Rt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,ns,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=p=>{p.type==="pointerup"&&p.button!==0||(window.removeEventListener("pointerup",f),window.removeEventListener("blur",f),p.type==="pointerup"&&_(this,ya,Fp).call(this,"main_toolbar"))};window.addEventListener("pointerup",f),window.addEventListener("blur",f)}},ya=new WeakSet,Fp=function(t=""){u(this,ye)===Rt.HIGHLIGHT?this.highlightSelection(t):u(this,ul)&&_(this,Mu,ow).call(this)},Fu=new WeakSet,cw=function(){document.addEventListener("selectionchange",u(this,Cl))},Nu=new WeakSet,hw=function(){document.removeEventListener("selectionchange",u(this,Cl))},Bu=new WeakSet,uw=function(){window.addEventListener("focus",u(this,vl)),window.addEventListener("blur",u(this,ml))},Ll=new WeakSet,hv=function(){window.removeEventListener("focus",u(this,vl)),window.removeEventListener("blur",u(this,ml))},kl=new WeakSet,uv=function(){window.addEventListener("keydown",u(this,El)),window.addEventListener("keyup",u(this,_l))},Il=new WeakSet,dv=function(){window.removeEventListener("keydown",u(this,El)),window.removeEventListener("keyup",u(this,_l))},Dl=new WeakSet,fv=function(){document.addEventListener("copy",u(this,bl)),document.addEventListener("cut",u(this,yl)),document.addEventListener("paste",u(this,Al))},Ml=new WeakSet,pv=function(){document.removeEventListener("copy",u(this,bl)),document.removeEventListener("cut",u(this,yl)),document.removeEventListener("paste",u(this,Al))},Ae=new WeakSet,qe=function(t){Object.entries(t).some(([n,i])=>u(this,Pl)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Pl),t)}),u(this,ye)===Rt.HIGHLIGHT&&t.hasSelectedEditor===!1&&_(this,Yn,Wr).call(this,[[gt.HIGHLIGHT_FREE,!0]]))},Yn=new WeakSet,Wr=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},ju=new WeakSet,dw=function(){if(!u(this,is)){E(this,is,!0);for(const t of u(this,be).values())t.enable();for(const t of u(this,ce).values())t.enable()}},Uu=new WeakSet,fw=function(){if(this.unselectAll(),u(this,is)){E(this,is,!1);for(const t of u(this,be).values())t.disable();for(const t of u(this,ce).values())t.disable()}},Ol=new WeakSet,gv=function(t){const e=u(this,be).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},Hu=new WeakSet,pw=function(){let t=null;for(t of u(this,Ft));return t},Zs=new WeakSet,nf=function(){if(u(this,ce).size===0)return!0;if(u(this,ce).size===1)for(const t of u(this,ce).values())return t.isEmpty();return!1},Fl=new WeakSet,mv=function(t){for(const e of u(this,Ft))e.unselect();u(this,Ft).clear();for(const e of t)e.isEmpty()||(u(this,Ft).add(e),e.select());_(this,Ae,qe).call(this,{hasSelectedEditor:this.hasSelection})},yt(Ki,"TRANSLATE_SMALL",1),yt(Ki,"TRANSLATE_BIG",10);const rs=class{constructor(t){Nl.add(this);Ai.set(this,"");Ei.set(this,!1);yn.set(this,null);_i.set(this,null);An.set(this,null);Aa.set(this,!1);wi.set(this,null);E(this,wi,t)}static initialize(t){rs._l10nPromise||(rs._l10nPromise=t)}render(){return kt(this,null,function*(){const t=E(this,yn,document.createElement("button"));t.className="altText";const e=yield rs._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0",t.addEventListener("contextmenu",He),t.addEventListener("pointerdown",i=>i.stopPropagation());const n=i=>{i.preventDefault(),u(this,wi)._uiManager.editAltText(u(this,wi))};return t.addEventListener("click",n,{capture:!0}),t.addEventListener("keydown",i=>{i.target===t&&i.key==="Enter"&&(E(this,Aa,!0),n(i))}),yield _(this,Nl,vv).call(this),t})}finish(){!u(this,yn)||(u(this,yn).focus({focusVisible:u(this,Aa)}),E(this,Aa,!1))}isEmpty(){return!u(this,Ai)&&!u(this,Ei)}get data(){return{altText:u(this,Ai),decorative:u(this,Ei)}}set data({altText:t,decorative:e}){u(this,Ai)===t&&u(this,Ei)===e||(E(this,Ai,t),E(this,Ei,e),_(this,Nl,vv).call(this))}toggle(t=!1){!u(this,yn)||(!t&&u(this,An)&&(clearTimeout(u(this,An)),E(this,An,null)),u(this,yn).disabled=!t)}destroy(){var t;(t=u(this,yn))==null||t.remove(),E(this,yn,null),E(this,_i,null)}};let Jh=rs;Ai=new WeakMap,Ei=new WeakMap,yn=new WeakMap,_i=new WeakMap,An=new WeakMap,Aa=new WeakMap,wi=new WeakMap,Nl=new WeakSet,vv=function(){return kt(this,null,function*(){var i;const t=u(this,yn);if(!t)return;if(!u(this,Ai)&&!u(this,Ei)){t.classList.remove("done"),(i=u(this,_i))==null||i.remove();return}t.classList.add("done"),rs._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(a=>{t.setAttribute("aria-label",a)});let e=u(this,_i);if(!e){E(this,_i,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const a=e.id=`alt-text-tooltip-${u(this,wi).id}`;t.setAttribute("aria-describedby",a);const h=100;t.addEventListener("mouseenter",()=>{E(this,An,setTimeout(()=>{E(this,An,null),u(this,_i).classList.add("show"),u(this,wi)._reportTelemetry({action:"alt_text_tooltip"})},h))}),t.addEventListener("mouseleave",()=>{var d;u(this,An)&&(clearTimeout(u(this,An)),E(this,An,null)),(d=u(this,_i))==null||d.classList.remove("show")})}e.innerText=u(this,Ei)?yield rs._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):u(this,Ai),e.parentNode||t.append(e);const n=u(this,wi).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)})},yt(Jh,"_l10nPromise",null);const Vt=class{constructor(t){Hl.add(this);Gl.add(this);Vu.add(this);$u.add(this);Vl.add(this);$l.add(this);Wl.add(this);Wu.add(this);Yu.add(this);Xu.add(this);qu.add(this);Yl.add(this);nr.add(this);En.set(this,null);Oe.set(this,null);Ea.set(this,!1);Qs.set(this,!1);Ee.set(this,null);Js.set(this,null);_a.set(this,this.focusin.bind(this));wa.set(this,this.focusout.bind(this));Le.set(this,null);Bl.set(this,"");tr.set(this,!1);as.set(this,null);jl.set(this,!1);er.set(this,!1);Si.set(this,!1);Xn.set(this,null);Sa.set(this,0);xa.set(this,0);un.set(this,null);yt(this,"_initialOptions",Object.create(null));yt(this,"_isVisible",!0);yt(this,"_uiManager",null);yt(this,"_focusEventsAllowed",!0);yt(this,"_l10nPromise",null);Ul.set(this,!1);Gu.set(this,Vt._zIndex++);this.constructor===Vt&&Ut("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:h}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,h];const[d,f]=this.parentDimensions;this.x=t.x/d,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Vt.prototype._resizeWithKeyboard,e=Ki.TRANSLATE_SMALL,n=Ki.TRANSLATE_BIG;return Dt(this,"_resizerKeyboardManager",new Wo([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Vt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new zy({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,n){if(Vt._l10nPromise||(Vt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(a=>[a,t.get(a.replaceAll(/([A-Z])/g,h=>`-${h.toLowerCase()}`))]))),n==null?void 0:n.strings)for(const a of n.strings)Vt._l10nPromise.set(a,t.get(a));if(Vt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Vt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ut("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,Ul)}set _isDraggable(t){var e;E(this,Ul,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Gu)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):_(this,nr,sf).call(this),this.parent=t}focusin(t){!this._focusEventsAllowed||(u(this,tr)?E(this,tr,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;(e==null?void 0:e.closest(`#${this.id}`))||(t.preventDefault(),((n=this.parent)==null?void 0:n.isMultipleSelection)||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[a,h]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/a,this.y=(e+i)/h,this.fixAndSetPosition()}translate(t,e){_(this,Hl,bv).call(this,this.parentDimensions,t,e)}translateInPage(t,e){u(this,as)||E(this,as,[this.x,this.y]),_(this,Hl,bv).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){u(this,as)||E(this,as,[this.x,this.y]);const[n,i]=this.parentDimensions;if(this.x+=t/n,this.y+=e/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:h}=this;const[d,f]=this.getBaseTranslation();a+=d,h+=f,this.div.style.left=`${(100*a).toFixed(2)}%`,this.div.style.top=`${(100*h).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!u(this,as)&&(u(this,as)[0]!==this.x||u(this,as)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Vt,i=n/t,a=n/e;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:i,y:a,width:h,height:d}=this;if(h*=e,d*=n,i*=e,a*=n,this._mustFixPosition)switch(t){case 0:i=Math.max(0,Math.min(e-h,i)),a=Math.max(0,Math.min(n-d,a));break;case 90:i=Math.max(0,Math.min(e-d,i)),a=Math.min(n,Math.max(h,a));break;case 180:i=Math.min(e,Math.max(h,i)),a=Math.min(n,Math.max(d,a));break;case 270:i=Math.min(e,Math.max(d,i)),a=Math.max(0,Math.min(n-h,a));break}this.x=i/=e,this.y=a/=n;const[f,p]=this.getBaseTranslation();i+=f,a+=p;const{style:g}=this.div;g.left=`${(100*i).toFixed(2)}%`,g.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){return _(Vt,zl,yv).call(Vt,t,e,this.parentRotation)}pageTranslationToScreen(t,e){return _(Vt,zl,yv).call(Vt,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this,i=e*t,a=n*t;return Ue.isCSSRoundSupported?[Math.round(i),Math.round(a)]:[i,a]}setDims(t,e){const[n,i]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,u(this,Qs)||(this.div.style.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),a=!u(this,Qs)&&e.endsWith("%");if(i&&a)return;const[h,d]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/h).toFixed(2)}%`),!u(this,Qs)&&!a&&(t.height=`${(100*parseFloat(e)/d).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=u(this,Oe))==null||t.finish()}addEditToolbar(){return kt(this,null,function*(){return u(this,Le)||u(this,er)?u(this,Le):(E(this,Le,new Zf(this)),this.div.append(u(this,Le).render()),u(this,Oe)&&u(this,Le).addAltTextButton(yield u(this,Oe).render()),u(this,Le))})}removeEditToolbar(){var t;!u(this,Le)||(u(this,Le).remove(),E(this,Le,null),(t=u(this,Oe))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return kt(this,null,function*(){u(this,Oe)||(Jh.initialize(Vt._l10nPromise),E(this,Oe,new Jh(this)),yield this.addEditToolbar())})}get altTextData(){var t;return(t=u(this,Oe))==null?void 0:t.data}set altTextData(t){!u(this,Oe)||(u(this,Oe).data=t)}hasAltText(){var t;return!((t=u(this,Oe))==null?void 0:t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,Ea)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",u(this,_a)),this.div.addEventListener("focusout",u(this,wa));const[t,e]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),Qh(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Ue.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(E(this,tr,!0),this._isDraggable){_(this,Wu,vw).call(this,t);return}_(this,Wl,wv).call(this,t)}moveInDOM(){u(this,Xn)&&clearTimeout(u(this,Xn)),E(this,Xn,setTimeout(()=>{var t;E(this,Xn,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const i=this.parentScale,[a,h]=this.pageDimensions,[d,f]=this.pageTranslation,p=t/i,g=e/i,v=this.x*a,b=this.y*h,y=this.width*a,A=this.height*h;switch(n){case 0:return[v+p+d,h-b-g-A+f,v+p+y+d,h-b-g+f];case 90:return[v+g+d,h-b+p+f,v+g+A+d,h-b+p+y+f];case 180:return[v-p-y+d,h-b+g+f,v-p+d,h-b+g+A+f];case 270:return[v-g-A+d,h-b-p-y+f,v-g+d,h-b-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,a,h]=t,d=a-n,f=h-i;switch(this.rotation){case 0:return[n,e-h,d,f];case 90:return[n,e-i,f,d];case 180:return[a,e-i,d,f];case 270:return[a,e-h,f,d];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){E(this,er,!0)}disableEditMode(){E(this,er,!1)}isInEditMode(){return u(this,er)}shouldGetKeyboardEvents(){return u(this,Si)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,e;(t=this.div)==null||t.addEventListener("focusin",u(this,_a)),(e=this.div)==null||e.addEventListener("focusout",u(this,wa))}rotate(t){}serialize(t=!1,e=null){Ut("An editor must be serializable")}static deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation;const[a,h]=i.pageDimensions,[d,f,p,g]=i.getRectInCurrentCoords(t.rect,h);return i.x=d/a,i.y=f/h,i.width=p/a,i.height=g/h,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",u(this,_a)),this.div.removeEventListener("focusout",u(this,wa)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Xn)&&(clearTimeout(u(this,Xn)),E(this,Xn,null)),_(this,nr,sf).call(this),this.removeEditToolbar(),u(this,un)){for(const t of u(this,un).values())clearTimeout(t);E(this,un,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(_(this,Vu,gw).call(this),u(this,Ee).classList.remove("hidden"),Qh(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),E(this,Js,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=u(this,Ee).children;if(!u(this,En)){E(this,En,Array.from(e));const h=_(this,Yu,bw).bind(this),d=_(this,Xu,yw).bind(this);for(const f of u(this,En)){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",h),f.addEventListener("blur",d),f.addEventListener("focus",_(this,qu,Aw).bind(this,p)),Vt._l10nPromise.get(`pdfjs-editor-resizer-label-${p}`).then(g=>f.setAttribute("aria-label",g))}}const n=u(this,En)[0];let i=0;for(const h of e){if(h===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(u(this,En).length/4);if(a!==i){if(a<i)for(let d=0;d<i-a;d++)u(this,Ee).append(u(this,Ee).firstChild);else if(a>i)for(let d=0;d<a-i;d++)u(this,Ee).firstChild.before(u(this,Ee).lastChild);let h=0;for(const d of e){const p=u(this,En)[h++].getAttribute("data-resizer-name");Vt._l10nPromise.get(`pdfjs-editor-resizer-label-${p}`).then(g=>d.setAttribute("aria-label",g))}}_(this,Yl,Sv).call(this,0),E(this,Si,!0),u(this,Ee).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){!u(this,Si)||_(this,$l,_v).call(this,u(this,Bl),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){_(this,nr,sf).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!u(this,Le)){this.addEditToolbar().then(()=>{var n,i;((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))&&((i=u(this,Le))==null||i.show())});return}(e=u(this,Le))==null||e.show()}unselect(){var t,e,n,i;(t=u(this,Ee))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),((n=this.div)==null?void 0:n.contains(document.activeElement))&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=u(this,Le))==null||i.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,jl)}set isEditing(t){E(this,jl,t),!!this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){E(this,Qs,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){u(this,un)||E(this,un,new Map);const{action:n}=t;let i=u(this,un).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),u(this,un).delete(n),u(this,un).size===0&&E(this,un,null)},Vt._telemetryTimeout),u(this,un).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),E(this,Ea,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,Ea,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};let Mt=Vt;En=new WeakMap,Oe=new WeakMap,Ea=new WeakMap,Qs=new WeakMap,Ee=new WeakMap,Js=new WeakMap,_a=new WeakMap,wa=new WeakMap,Le=new WeakMap,Bl=new WeakMap,tr=new WeakMap,as=new WeakMap,jl=new WeakMap,er=new WeakMap,Si=new WeakMap,Xn=new WeakMap,Sa=new WeakMap,xa=new WeakMap,un=new WeakMap,Ul=new WeakMap,Gu=new WeakMap,Hl=new WeakSet,bv=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this.fixAndSetPosition()},zl=new WeakSet,yv=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Gl=new WeakSet,Av=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},Vu=new WeakSet,gw=function(){if(u(this,Ee))return;E(this,Ee,document.createElement("div")),u(this,Ee).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const e of t){const n=document.createElement("div");u(this,Ee).append(n),n.classList.add("resizer",e),n.setAttribute("data-resizer-name",e),n.addEventListener("pointerdown",_(this,$u,mw).bind(this,e)),n.addEventListener("contextmenu",He),n.tabIndex=-1}this.div.prepend(u(this,Ee))},$u=new WeakSet,mw=function(t,e){var A;e.preventDefault();const{isMac:n}=Ue.platform;if(e.button!==0||e.ctrlKey&&n)return;(A=u(this,Oe))==null||A.toggle(!1);const i=_(this,$l,_v).bind(this,t),a=this._isDraggable;this._isDraggable=!1;const h={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",i,h),window.addEventListener("contextmenu",He);const d=this.x,f=this.y,p=this.width,g=this.height,v=this.parent.div.style.cursor,b=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const y=()=>{var S;this.parent.togglePointerEvents(!0),(S=u(this,Oe))==null||S.toggle(!0),this._isDraggable=a,window.removeEventListener("pointerup",y),window.removeEventListener("blur",y),window.removeEventListener("pointermove",i,h),window.removeEventListener("contextmenu",He),this.parent.div.style.cursor=v,this.div.style.cursor=b,_(this,Vl,Ev).call(this,d,f,p,g)};window.addEventListener("pointerup",y),window.addEventListener("blur",y)},Vl=new WeakSet,Ev=function(t,e,n,i){const a=this.x,h=this.y,d=this.width,f=this.height;a===t&&h===e&&d===n&&f===i||this.addCommands({cmd:()=>{this.width=d,this.height=f,this.x=a,this.y=h;const[p,g]=this.parentDimensions;this.setDims(p*d,g*f),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=i,this.x=t,this.y=e;const[p,g]=this.parentDimensions;this.setDims(p*n,g*i),this.fixAndSetPosition()},mustExec:!0})},$l=new WeakSet,_v=function(t,e){const[n,i]=this.parentDimensions,a=this.x,h=this.y,d=this.width,f=this.height,p=Vt.MIN_SIZE/n,g=Vt.MIN_SIZE/i,v=V=>Math.round(V*1e4)/1e4,b=_(this,Gl,Av).call(this,this.rotation),y=(V,J)=>[b[0]*V+b[2]*J,b[1]*V+b[3]*J],A=_(this,Gl,Av).call(this,360-this.rotation),S=(V,J)=>[A[0]*V+A[2]*J,A[1]*V+A[3]*J];let C,T,L=!1,k=!1;switch(t){case"topLeft":L=!0,C=(V,J)=>[0,0],T=(V,J)=>[V,J];break;case"topMiddle":C=(V,J)=>[V/2,0],T=(V,J)=>[V/2,J];break;case"topRight":L=!0,C=(V,J)=>[V,0],T=(V,J)=>[0,J];break;case"middleRight":k=!0,C=(V,J)=>[V,J/2],T=(V,J)=>[0,J/2];break;case"bottomRight":L=!0,C=(V,J)=>[V,J],T=(V,J)=>[0,0];break;case"bottomMiddle":C=(V,J)=>[V/2,J],T=(V,J)=>[V/2,0];break;case"bottomLeft":L=!0,C=(V,J)=>[0,J],T=(V,J)=>[V,0];break;case"middleLeft":k=!0,C=(V,J)=>[0,J/2],T=(V,J)=>[V,J/2];break}const I=C(d,f),O=T(d,f);let N=y(...O);const U=v(a+N[0]),q=v(h+N[1]);let Y=1,Z=1,[H,st]=this.screenToPageTranslation(e.movementX,e.movementY);if([H,st]=S(H/n,st/i),L){const V=Math.hypot(d,f);Y=Z=Math.max(Math.min(Math.hypot(O[0]-I[0]-H,O[1]-I[1]-st)/V,1/d,1/f),p/d,g/f)}else k?Y=Math.max(p,Math.min(1,Math.abs(O[0]-I[0]-H)))/d:Z=Math.max(g,Math.min(1,Math.abs(O[1]-I[1]-st)))/f;const it=v(d*Y),ht=v(f*Z);N=y(...T(it,ht));const ot=U-N[0],At=q-N[1];this.width=it,this.height=ht,this.x=ot,this.y=At,this.setDims(n*it,i*ht),this.fixAndSetPosition()},Wl=new WeakSet,wv=function(t){const{isMac:e}=Ue.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Wu=new WeakSet,vw=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let n,i;e&&(this.div.classList.add("moving"),n={passive:!0,capture:!0},E(this,Sa,t.clientX),E(this,xa,t.clientY),i=h=>{const{clientX:d,clientY:f}=h,[p,g]=this.screenToPageTranslation(d-u(this,Sa),f-u(this,xa));E(this,Sa,d),E(this,xa,f),this._uiManager.dragSelectedEditors(p,g)},window.addEventListener("pointermove",i,n));const a=()=>{window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",i,n)),E(this,tr,!1),this._uiManager.endDragSession()||_(this,Wl,wv).call(this,t)};window.addEventListener("pointerup",a),window.addEventListener("blur",a)},Yu=new WeakSet,bw=function(t){Vt._resizerKeyboardManager.exec(this,t)},Xu=new WeakSet,yw=function(t){var e;u(this,Si)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==u(this,Ee)&&_(this,nr,sf).call(this)},qu=new WeakSet,Aw=function(t){E(this,Bl,u(this,Si)?t:"")},Yl=new WeakSet,Sv=function(t){if(!!u(this,En))for(const e of u(this,En))e.tabIndex=t},nr=new WeakSet,sf=function(){if(E(this,Si,!1),_(this,Yl,Sv).call(this,-1),u(this,Js)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=u(this,Js);_(this,Vl,Ev).call(this,t,e,n,i),E(this,Js,null)}},zl.add(Mt),yt(Mt,"_borderLineWidth",-1),yt(Mt,"_colorManager",new Qf),yt(Mt,"_zIndex",1),yt(Mt,"_telemetryTimeout",1e3);class zy extends Mt{constructor(t){super(t);this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const ym=3285377520,cn=4294901760,On=65535;class Am{constructor(t){this.h1=t?t&4294967295:ym,this.h2=t?t&4294967295:ym}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let S=0,C=t.length;S<C;S++){const T=t.charCodeAt(S);T<=255?e[n++]=T:(e[n++]=T>>>8,e[n++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,h=new Uint32Array(e.buffer,0,i);let d=0,f=0,p=this.h1,g=this.h2;const v=3432918353,b=461845907,y=v&On,A=b&On;for(let S=0;S<i;S++)S&1?(d=h[S],d=d*v&cn|d*y&On,d=d<<15|d>>>17,d=d*b&cn|d*A&On,p^=d,p=p<<13|p>>>19,p=p*5+3864292196):(f=h[S],f=f*v&cn|f*y&On,f=f<<15|f>>>17,f=f*b&cn|f*A&On,g^=f,g=g<<13|g>>>19,g=g*5+3864292196);switch(d=0,a){case 3:d^=e[i*4+2]<<16;case 2:d^=e[i*4+1]<<8;case 1:d^=e[i*4],d=d*v&cn|d*y&On,d=d<<15|d>>>17,d=d*b&cn|d*A&On,i&1?p^=d:g^=d}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&cn|t*36045&On,e=e*4283543511&cn|((e<<16|t>>>16)*2950163797&cn)>>>16,t^=e>>>1,t=t*444984403&cn|t*60499&On,e=e*3301882366&cn|((e<<16|t>>>16)*3120437893&cn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Jf=Object.freeze({map:null,hash:"",transfer:void 0});class tp{constructor(){Ku.add(this);ir.set(this,!1);_e.set(this,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=u(this,_e).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return u(this,_e).get(t)}remove(t){if(u(this,_e).delete(t),u(this,_e).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of u(this,_e).values())if(e instanceof Mt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=u(this,_e).get(t);let i=!1;if(n!==void 0)for(const[a,h]of Object.entries(e))n[a]!==h&&(i=!0,n[a]=h);else i=!0,u(this,_e).set(t,e);i&&_(this,Ku,Ew).call(this),e instanceof Mt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return u(this,_e).has(t)}getAll(){return u(this,_e).size>0?zf(u(this,_e)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return u(this,_e).size}resetModified(){u(this,ir)&&(E(this,ir,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Em(this)}get serializable(){if(u(this,_e).size===0)return Jf;const t=new Map,e=new Am,n=[],i=Object.create(null);let a=!1;for(const[h,d]of u(this,_e)){const f=d instanceof Mt?d.serialize(!1,i):d;f&&(t.set(h,f),e.update(`${h}:${JSON.stringify(f)}`),a||(a=!!f.bitmap))}if(a)for(const h of t.values())h.bitmap&&n.push(h.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Jf}get editorStats(){var n;let t=null;const e=new Map;for(const i of u(this,_e).values()){if(!(i instanceof Mt))continue;const a=i.telemetryFinalData;if(!a)continue;const{type:h}=a;e.has(h)||e.set(h,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const d=t[h]||(t[h]=new Map);for(const[f,p]of Object.entries(a)){if(f==="type")continue;let g=d.get(f);g||(g=new Map,d.set(f,g));const v=(n=g.get(p))!=null?n:0;g.set(p,v+1)}}for(const[i,a]of e)t[i]=a.computeTelemetryFinalData(t[i]);return t}}ir=new WeakMap,_e=new WeakMap,Ku=new WeakSet,Ew=function(){u(this,ir)||(E(this,ir,!0),typeof this.onSetModified=="function"&&this.onSetModified())};class Em extends tp{constructor(t){super();Xl.set(this,void 0);const{map:e,hash:n,transfer:i}=t.serializable,a=structuredClone(e,i?{transfer:i}:null);E(this,Xl,{map:a,hash:n,transfer:i})}get print(){Ut("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,Xl)}}Xl=new WeakMap;class Gy{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){Ca.set(this,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),u(this,Ca).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(n){return kt(this,arguments,function*({systemFontInfo:t,_inspectFont:e}){if(!(!t||u(this,Ca).has(t.loadedName))){if(le(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:h}=t,d=new FontFace(i,a,h);this.addNativeFontFace(d);try{yield d.load(),u(this,Ca).add(i),e==null||e(t)}catch(f){Et(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}Ut("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(t){return kt(this,null,function*(){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){yield this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{yield n.loaded}catch(i){throw Et(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;yield new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}})}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)==null?void 0:e.fonts);return Dt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Pe||typeof navigator!="undefined"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Dt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(le(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Dt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(I,O){return I.charCodeAt(O)<<24|I.charCodeAt(O+1)<<16|I.charCodeAt(O+2)<<8|I.charCodeAt(O+3)&255}function i(I,O,N,U){const q=I.substring(0,O),Y=I.substring(O+N);return q+U+Y}let a,h;const d=this._document.createElement("canvas");d.width=1,d.height=1;const f=d.getContext("2d");let p=0;function g(I,O){if(++p>30){Et("Load test font never loaded."),O();return}if(f.font="30px "+I,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(g.bind(null,I,O))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=i(b,976,v.length,v);const A=16,S=1482184792;let C=n(b,A);for(a=0,h=v.length-3;a<h;a+=4)C=C-S+n(v,a)|0;a<v.length&&(C=C-S+n(v+"XXX",a)|0),b=i(b,A,4,xy(C));const T=`url(data:font/opentype;base64,${btoa(b)});`,L=`@font-face {font-family:"${v}";src:${T}}`;this.insertRule(L);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const I of[t.loadedName,v]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=I,k.append(O)}this._document.body.append(k),g(v,()=>{k.remove(),e.complete()})}}Ca=new WeakMap;class Vy{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=cm(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),n}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(a){Et(`getPathGenerator - ignoring character: "${a}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(a,h){};const i=[];for(let a=0,h=n.length;a<h;)switch(n[a++]){case ci.BEZIER_CURVE_TO:{const[d,f,p,g,v,b]=n.slice(a,a+6);i.push(y=>y.bezierCurveTo(d,f,p,g,v,b)),a+=6}break;case ci.MOVE_TO:{const[d,f]=n.slice(a,a+2);i.push(p=>p.moveTo(d,f)),a+=2}break;case ci.LINE_TO:{const[d,f]=n.slice(a,a+2);i.push(p=>p.lineTo(d,f)),a+=2}break;case ci.QUADRATIC_CURVE_TO:{const[d,f,p,g]=n.slice(a,a+4);i.push(v=>v.quadraticCurveTo(d,f,p,g)),a+=4}break;case ci.RESTORE:i.push(d=>d.restore());break;case ci.SAVE:i.push(d=>d.save());break;case ci.SCALE:le(i.length===2,"Scale command is only valid at the third position.");break;case ci.TRANSFORM:{const[d,f,p,g,v,b]=n.slice(a,a+6);i.push(y=>y.transform(d,f,p,g,v,b)),a+=6}break;case ci.TRANSLATE:{const[d,f]=n.slice(a,a+2);i.push(p=>p.translate(d,f)),a+=2}break}return this.compiledGlyphs[e]=function(h,d){i[0](h),i[1](h),h.scale(d,-d);for(let f=2,p=i.length;f<p;f++)i[f](h)}}}if(Pe){var ep=Promise.withResolvers(),Yo=null;(()=>kt(this,null,function*(){const t=yield import("fs"),e=yield import("http"),n=yield import("https"),i=yield import("url");let a,h;return new Map(Object.entries({fs:t,http:e,https:n,url:i,canvas:a,path2d:h}))}))().then(t=>{Yo=t,ep.resolve()},t=>{Et(`loadPackages: ${t}`),Yo=new Map,ep.resolve()})}class Fn{static get promise(){return ep.promise}static get(t){return Yo==null?void 0:Yo.get(t)}}const _m=function(o){return Fn.get("fs").promises.readFile(o).then(e=>new Uint8Array(e))};class $y extends Yh{}class Wy extends Xh{_createCanvas(t,e){return Fn.get("canvas").createCanvas(t,e)}}class Yy extends qh{_fetchData(t,e){return _m(t).then(n=>({cMapData:n,compressionType:e}))}}class Xy extends Kh{_fetchData(t){return _m(t)}}const Ie={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function np(o,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),o.clip(i)}class Xo{constructor(){this.constructor===Xo&&Ut("Cannot initialize BaseShadingPattern.")}getPattern(){Ut("Abstract method `getPattern` called.")}}class qy extends Xo{constructor(t){super();this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let a;if(i===Ie.STROKE||i===Ie.FILL){const h=e.current.getClippedPathBoundingBox(i,qt(t))||[0,0,0,0],d=Math.ceil(h[2]-h[0])||1,f=Math.ceil(h[3]-h[1])||1,p=e.cachedCanvases.getCanvas("pattern",d,f,!0),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-h[0],-h[1]),n=et.transform(n,[1,0,0,1,h[0],h[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),np(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),a=t.createPattern(p.canvas,"no-repeat");const v=new DOMMatrix(n);a.setTransform(v)}else np(t,this._bbox),a=this._createGradient(t);return a}}function ip(o,t,e,n,i,a,h,d){const f=t.coords,p=t.colors,g=o.data,v=o.width*4;let b;f[e+1]>f[n+1]&&(b=e,e=n,n=b,b=a,a=h,h=b),f[n+1]>f[i+1]&&(b=n,n=i,i=b,b=h,h=d,d=b),f[e+1]>f[n+1]&&(b=e,e=n,n=b,b=a,a=h,h=b);const y=(f[e]+t.offsetX)*t.scaleX,A=(f[e+1]+t.offsetY)*t.scaleY,S=(f[n]+t.offsetX)*t.scaleX,C=(f[n+1]+t.offsetY)*t.scaleY,T=(f[i]+t.offsetX)*t.scaleX,L=(f[i+1]+t.offsetY)*t.scaleY;if(A>=L)return;const k=p[a],I=p[a+1],O=p[a+2],N=p[h],U=p[h+1],q=p[h+2],Y=p[d],Z=p[d+1],H=p[d+2],st=Math.round(A),it=Math.round(L);let ht,ot,At,V,J,$t,Xt,te;for(let $=st;$<=it;$++){if($<C){const tt=$<A?0:(A-$)/(A-C);ht=y-(y-S)*tt,ot=k-(k-N)*tt,At=I-(I-U)*tt,V=O-(O-q)*tt}else{let tt;$>L?tt=1:C===L?tt=0:tt=(C-$)/(C-L),ht=S-(S-T)*tt,ot=N-(N-Y)*tt,At=U-(U-Z)*tt,V=q-(q-H)*tt}let z;$<A?z=0:$>L?z=1:z=(A-$)/(A-L),J=y-(y-T)*z,$t=k-(k-Y)*z,Xt=I-(I-Z)*z,te=O-(O-H)*z;const X=Math.round(Math.min(ht,J)),rt=Math.round(Math.max(ht,J));let M=v*$+X*4;for(let tt=X;tt<=rt;tt++)z=(ht-tt)/(ht-J),z<0?z=0:z>1&&(z=1),g[M++]=ot-(ot-$t)*z|0,g[M++]=At-(At-Xt)*z|0,g[M++]=V-(V-te)*z|0,g[M++]=255}}function Ky(o,t,e){const n=t.coords,i=t.colors;let a,h;switch(t.type){case"lattice":const d=t.verticesPerRow,f=Math.floor(n.length/d)-1,p=d-1;for(a=0;a<f;a++){let g=a*d;for(let v=0;v<p;v++,g++)ip(o,e,n[g],n[g+1],n[g+d],i[g],i[g+1],i[g+d]),ip(o,e,n[g+d+1],n[g+1],n[g+d],i[g+d+1],i[g+1],i[g+d])}break;case"triangles":for(a=0,h=n.length;a<h;a+=3)ip(o,e,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class Zy extends Xo{constructor(t){super();this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const i=1.1,a=3e3,h=2,d=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-d,g=Math.ceil(this._bounds[3])-f,v=Math.min(Math.ceil(Math.abs(p*t[0]*i)),a),b=Math.min(Math.ceil(Math.abs(g*t[1]*i)),a),y=p/v,A=g/b,S={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-f,scaleX:1/y,scaleY:1/A},C=v+h*2,T=b+h*2,L=n.getCanvas("mesh",C,T,!1),k=L.context,I=k.createImageData(v,b);if(e){const N=I.data;for(let U=0,q=N.length;U<q;U+=4)N[U]=e[0],N[U+1]=e[1],N[U+2]=e[2],N[U+3]=255}for(const N of this._figures)Ky(I,N,S);return k.putImageData(I,h,h),{canvas:L.canvas,offsetX:d-h*y,offsetY:f-h*A,scaleX:y,scaleY:A}}getPattern(t,e,n,i){np(t,this._bbox);let a;if(i===Ie.SHADING)a=et.singularValueDecompose2dScale(qt(t));else if(a=et.singularValueDecompose2dScale(e.baseTransform),this.matrix){const d=et.singularValueDecompose2dScale(this.matrix);a=[a[0]*d[0],a[1]*d[1]]}const h=this._createMeshCanvas(a,i===Ie.SHADING?null:this._background,e.cachedCanvases);return i!==Ie.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(h.offsetX,h.offsetY),t.scale(h.scaleX,h.scaleY),t.createPattern(h.canvas,"no-repeat")}}class Qy extends Xo{getPattern(){return"hotpink"}}function Jy(o){switch(o[0]){case"RadialAxial":return new qy(o);case"Mesh":return new Zy(o);case"Dummy":return new Qy}throw new Error(`Unknown IR type: ${o[0]}`)}const wm={COLORED:1,UNCOLORED:2},Cp=class{constructor(t,e,n,i,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t){const e=this.operatorList,n=this.bbox,i=this.xstep,a=this.ystep,h=this.paintType,d=this.tilingType,f=this.color,p=this.canvasGraphicsFactory;$h("TilingType: "+d);const g=n[0],v=n[1],b=n[2],y=n[3],A=et.singularValueDecompose2dScale(this.matrix),S=et.singularValueDecompose2dScale(this.baseTransform),C=[A[0]*S[0],A[1]*S[1]],T=this.getSizeAndScale(i,this.ctx.canvas.width,C[0]),L=this.getSizeAndScale(a,this.ctx.canvas.height,C[1]),k=t.cachedCanvases.getCanvas("pattern",T.size,L.size,!0),I=k.context,O=p.createCanvasGraphics(I);O.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(O,h,f);let N=g,U=v,q=b,Y=y;return g<0&&(N=0,q+=Math.abs(g)),v<0&&(U=0,Y+=Math.abs(v)),I.translate(-(T.scale*N),-(L.scale*U)),O.transform(T.scale,0,0,L.scale,0,0),I.save(),this.clipBbox(O,N,U,q,Y),O.baseTransform=qt(O.ctx),O.executeOperatorList(e),O.endDrawing(),{canvas:k.canvas,scaleX:T.scale,scaleY:L.scale,offsetX:N,offsetY:U}}getSizeAndScale(t,e,n){t=Math.abs(t);const i=Math.max(Cp.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=i?a=i:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,i,a){const h=i-e,d=a-n;t.ctx.rect(e,n,h,d),t.current.updateRectMinMax(qt(t.ctx),[e,n,i,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,a=t.current;switch(e){case wm.COLORED:const h=this.ctx;i.fillStyle=h.fillStyle,i.strokeStyle=h.strokeStyle,a.fillColor=h.fillStyle,a.strokeColor=h.strokeStyle;break;case wm.UNCOLORED:const d=et.makeHexColor(n[0],n[1],n[2]);i.fillStyle=d,i.strokeStyle=d,a.fillColor=d,a.strokeColor=d;break;default:throw new Sy(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,i){let a=n;i!==Ie.SHADING&&(a=et.transform(a,e.baseTransform),this.matrix&&(a=et.transform(a,this.matrix)));const h=this.createPatternCanvas(e);let d=new DOMMatrix(a);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const f=t.createPattern(h.canvas,"repeat");return f.setTransform(d),f}};let sp=Cp;yt(sp,"MAX_PATTERN_SIZE",3e3);function zS(o){switch(o.kind){case ImageKind.GRAYSCALE_1BPP:return Sm(o);case ImageKind.RGB_24BPP:return tA(o)}return null}function Sm({src:o,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:h=!1}){const d=Ue.isLittleEndian?4278190080:255,[f,p]=h?[a,d]:[d,a],g=n>>3,v=n&7,b=o.length;e=new Uint32Array(e.buffer);let y=0;for(let A=0;A<i;A++){for(const C=t+g;t<C;t++){const T=t<b?o[t]:255;e[y++]=T&128?p:f,e[y++]=T&64?p:f,e[y++]=T&32?p:f,e[y++]=T&16?p:f,e[y++]=T&8?p:f,e[y++]=T&4?p:f,e[y++]=T&2?p:f,e[y++]=T&1?p:f}if(v===0)continue;const S=t<b?o[t++]:255;for(let C=0;C<v;C++)e[y++]=S&1<<7-C?p:f}return{srcPos:t,destPos:y}}function tA({src:o,srcPos:t=0,dest:e,destPos:n=0,width:i,height:a}){let h=0;const d=o.length>>2,f=new Uint32Array(o.buffer,t,d);if(FeatureTest.isLittleEndian){for(;h<d-2;h+=3,n+=4){const p=f[h],g=f[h+1],v=f[h+2];e[n]=p|4278190080,e[n+1]=p>>>24|g<<8|4278190080,e[n+2]=g>>>16|v<<16|4278190080,e[n+3]=v>>>8|4278190080}for(let p=h*4,g=o.length;p<g;p+=3)e[n++]=o[p]|o[p+1]<<8|o[p+2]<<16|4278190080}else{for(;h<d-2;h+=3,n+=4){const p=f[h],g=f[h+1],v=f[h+2];e[n]=p|255,e[n+1]=p<<24|g>>>8|255,e[n+2]=g<<16|v>>>16|255,e[n+3]=v<<8|255}for(let p=h*4,g=o.length;p<g;p+=3)e[n++]=o[p]<<24|o[p+1]<<16|o[p+2]<<8|255}return{srcPos:t,destPos:n}}function GS(o,t){if(FeatureTest.isLittleEndian)for(let e=0,n=o.length;e<n;e++)t[e]=o[e]*65793|4278190080;else for(let e=0,n=o.length;e<n;e++)t[e]=o[e]*16843008|255}const xm=16,Cm=100,eA=15,Tm=10,Pm=1e3,ze=16;function nA(o,t){if(o._removeMirroring)throw new Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){t.save(),this.__originalSave()},o.restore=function(){t.restore(),this.__originalRestore()},o.translate=function(n,i){t.translate(n,i),this.__originalTranslate(n,i)},o.scale=function(n,i){t.scale(n,i),this.__originalScale(n,i)},o.transform=function(n,i,a,h,d,f){t.transform(n,i,a,h,d,f),this.__originalTransform(n,i,a,h,d,f)},o.setTransform=function(n,i,a,h,d,f){t.setTransform(n,i,a,h,d,f),this.__originalSetTransform(n,i,a,h,d,f)},o.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},o.rotate=function(n){t.rotate(n),this.__originalRotate(n)},o.clip=function(n){t.clip(n),this.__originalClip(n)},o.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},o.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},o.bezierCurveTo=function(e,n,i,a,h,d){t.bezierCurveTo(e,n,i,a,h,d),this.__originalBezierCurveTo(e,n,i,a,h,d)},o.rect=function(e,n,i,a){t.rect(e,n,i,a),this.__originalRect(e,n,i,a)},o.closePath=function(){t.closePath(),this.__originalClosePath()},o.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class iA{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function tu(o,t,e,n,i,a,h,d,f,p){const[g,v,b,y,A,S]=qt(o);if(v===0&&b===0){const L=h*g+A,k=Math.round(L),I=d*y+S,O=Math.round(I),N=(h+f)*g+A,U=Math.abs(Math.round(N)-k)||1,q=(d+p)*y+S,Y=Math.abs(Math.round(q)-O)||1;return o.setTransform(Math.sign(g),0,0,Math.sign(y),k,O),o.drawImage(t,e,n,i,a,0,0,U,Y),o.setTransform(g,v,b,y,A,S),[U,Y]}if(g===0&&y===0){const L=d*b+A,k=Math.round(L),I=h*v+S,O=Math.round(I),N=(d+p)*b+A,U=Math.abs(Math.round(N)-k)||1,q=(h+f)*v+S,Y=Math.abs(Math.round(q)-O)||1;return o.setTransform(0,Math.sign(v),Math.sign(b),0,k,O),o.drawImage(t,e,n,i,a,0,0,Y,U),o.setTransform(g,v,b,y,A,S),[Y,U]}o.drawImage(t,e,n,i,a,h,d,f,p);const C=Math.hypot(g,v),T=Math.hypot(b,y);return[C*f,T*p]}function sA(o){const{width:t,height:e}=o;if(t>Pm||e>Pm)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1;let h=new Uint8Array(a*(e+1)),d,f,p;const g=t+7&~7;let v=new Uint8Array(g*e),b=0;for(const T of o.data){let L=128;for(;L>0;)v[b++]=T&L?0:255,L>>=1}let y=0;for(b=0,v[b]!==0&&(h[0]=1,++y),f=1;f<t;f++)v[b]!==v[b+1]&&(h[f]=v[b]?2:1,++y),b++;for(v[b]!==0&&(h[f]=2,++y),d=1;d<e;d++){b=d*g,p=d*a,v[b-g]!==v[b]&&(h[p]=v[b]?1:8,++y);let T=(v[b]?4:0)+(v[b-g]?8:0);for(f=1;f<t;f++)T=(T>>2)+(v[b+1]?4:0)+(v[b-g+1]?8:0),i[T]&&(h[p+f]=i[T],++y),b++;if(v[b-g]!==v[b]&&(h[p+f]=v[b]?2:4,++y),y>n)return null}for(b=g*(e-1),p=d*a,v[b]!==0&&(h[p]=8,++y),f=1;f<t;f++)v[b]!==v[b+1]&&(h[p+f]=v[b]?4:8,++y),b++;if(v[b]!==0&&(h[p+f]=4,++y),y>n)return null;const A=new Int32Array([0,a,-1,0,-a,0,0,0,1]),S=new Path2D;for(d=0;y&&d<=e;d++){let T=d*a;const L=T+t;for(;T<L&&!h[T];)T++;if(T===L)continue;S.moveTo(T%a,d);const k=T;let I=h[T];do{const O=A[I];do T+=O;while(!h[T]);const N=h[T];N!==5&&N!==10?(I=N,h[T]=0):(I=N&51*I>>4,h[T]&=I>>2|I<<2),S.lineTo(T%a,T/a|0),h[T]||--y}while(k!==T);--d}return v=null,h=null,function(T){T.save(),T.scale(1/t,-1/e),T.translate(0,-e),T.fill(S),T.beginPath(),T.restore()}}class Rm{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=om,this.textMatrixScale=1,this.fontMatrix=Bf,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Re.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=et.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=et.applyTransform(e,t),i=et.applyTransform(e.slice(2),t),a=et.applyTransform([e[0],e[3]],t),h=et.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],a[0],h[0]),this.minY=Math.min(this.minY,n[1],i[1],a[1],h[1]),this.maxX=Math.max(this.maxX,n[0],i[0],a[0],h[0]),this.maxY=Math.max(this.maxY,n[1],i[1],a[1],h[1])}updateScalingPathMinMax(t,e){et.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,i,a,h,d,f,p,g){const v=et.bezierBoundingBox(e,n,i,a,h,d,f,p,g);g||this.updateRectMinMax(t,v)}getPathBoundingBox(t=Ie.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ie.STROKE){e||Ut("Stroke bounding box must include transform.");const i=et.singularValueDecompose2dScale(e),a=i[0]*this.lineWidth/2,h=i[1]*this.lineWidth/2;n[0]-=a,n[1]-=h,n[2]+=a,n[3]+=h}return n}updateClipFromPath(){const t=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===Infinity}startNewPathAndClipBox(t){this.clipBox=t,this.minX=Infinity,this.minY=Infinity,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ie.FILL,e=null){return et.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Lm(o,t){if(typeof ImageData!="undefined"&&t instanceof ImageData){o.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%ze,a=(e-i)/ze,h=i===0?a:a+1,d=o.createImageData(n,ze);let f=0,p;const g=t.data,v=d.data;let b,y,A,S;if(t.kind===zh.GRAYSCALE_1BPP){const C=g.byteLength,T=new Uint32Array(v.buffer,0,v.byteLength>>2),L=T.length,k=n+7>>3,I=4294967295,O=Ue.isLittleEndian?4278190080:255;for(b=0;b<h;b++){for(A=b<a?ze:i,p=0,y=0;y<A;y++){const N=C-f;let U=0;const q=N>k?n:N*8-7,Y=q&~7;let Z=0,H=0;for(;U<Y;U+=8)H=g[f++],T[p++]=H&128?I:O,T[p++]=H&64?I:O,T[p++]=H&32?I:O,T[p++]=H&16?I:O,T[p++]=H&8?I:O,T[p++]=H&4?I:O,T[p++]=H&2?I:O,T[p++]=H&1?I:O;for(;U<q;U++)Z===0&&(H=g[f++],Z=128),T[p++]=H&Z?I:O,Z>>=1}for(;p<L;)T[p++]=0;o.putImageData(d,0,b*ze)}}else if(t.kind===zh.RGBA_32BPP){for(y=0,S=n*ze*4,b=0;b<a;b++)v.set(g.subarray(f,f+S)),f+=S,o.putImageData(d,0,y),y+=ze;b<h&&(S=n*i*4,v.set(g.subarray(f,f+S)),o.putImageData(d,0,y))}else if(t.kind===zh.RGB_24BPP)for(A=ze,S=n*A,b=0;b<h;b++){for(b>=a&&(A=i,S=n*A),p=0,y=S;y--;)v[p++]=g[f++],v[p++]=g[f++],v[p++]=g[f++],v[p++]=255;o.putImageData(d,0,b*ze)}else throw new Error(`bad image kind: ${t.kind}`)}function km(o,t){if(t.bitmap){o.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%ze,a=(e-i)/ze,h=i===0?a:a+1,d=o.createImageData(n,ze);let f=0;const p=t.data,g=d.data;for(let v=0;v<h;v++){const b=v<a?ze:i;({srcPos:f}=Sm({src:p,srcPos:f,dest:g,width:n,height:b,nonBlackColor:0})),o.putImageData(d,0,v*ze)}}function qo(o,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)o[n]!==void 0&&(t[n]=o[n]);o.setLineDash!==void 0&&(t.setLineDash(o.getLineDash()),t.lineDashOffset=o.lineDashOffset)}function eu(o){if(o.strokeStyle=o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",o.setLineDash!==void 0&&(o.setLineDash([]),o.lineDashOffset=0),!Pe){const{filter:t}=o;t!=="none"&&t!==""&&(o.filter="none")}}function Im(o,t){if(t)return!0;const e=et.singularValueDecompose2dScale(o);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Mn.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const rA=["butt","round","square"],aA=["miter","round","bevel"],oA={},Dm={},Tp=class{constructor(t,e,n,i,a,{optionalContentConfig:h,markedContentStack:d=null},f,p){ql.add(this);Kl.add(this);this.ctx=t,this.current=new Rm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=h,this.cachedCanvases=new iA(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,h=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,h),this.ctx.fillStyle=d,n){const f=this.cachedCanvases.getCanvas("transparent",a,h);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...qt(this.compositeCtx))}this.ctx.save(),eu(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=qt(this.ctx)}executeOperatorList(t,e,n,i){const a=t.argsArray,h=t.fnArray;let d=e||0;const f=a.length;if(f===d)return d;const p=f-d>Tm&&typeof n=="function",g=p?Date.now()+eA:0;let v=0;const b=this.commonObjs,y=this.objs;let A;for(;;){if(i!==void 0&&d===i.nextBreakPoint)return i.breakIt(d,n),d;if(A=h[d],A!==mn.dependency)this[A].apply(this,a[d]);else for(const S of a[d]){const C=S.startsWith("g_")?b:y;if(!C.has(S))return C.get(S,n),d}if(d++,d===f)return d;if(p&&++v>Tm){if(Date.now()>g)return n(),d;v=0}}}endDrawing(){_(this,ql,xv).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),_(this,Kl,Cv).call(this)}_scaleImage(t,e){const n=t.width,i=t.height;let a=Math.max(Math.hypot(e[0],e[1]),1),h=Math.max(Math.hypot(e[2],e[3]),1),d=n,f=i,p="prescale1",g,v;for(;a>2&&d>1||h>2&&f>1;){let b=d,y=f;a>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),a/=d/b),h>2&&f>1&&(y=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,h/=f/y),g=this.cachedCanvases.getCanvas(p,b,y),v=g.context,v.clearRect(0,0,b,y),v.drawImage(t,0,0,d,f,0,0,b,y),t=g.canvas,d=b,f=y,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,a=this.current.fillColor,h=this.current.patternFill,d=qt(e);let f,p,g,v;if((t.bitmap||t.data)&&t.count>1){const q=t.bitmap||t.data.buffer;p=JSON.stringify(h?d:[d.slice(0,4),a]),f=this._cachedBitmapsMap.get(q),f||(f=new Map,this._cachedBitmapsMap.set(q,f));const Y=f.get(p);if(Y&&!h){const Z=Math.round(Math.min(d[0],d[2])+d[4]),H=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:Y,offsetX:Z,offsetY:H}}g=Y}g||(v=this.cachedCanvases.getCanvas("maskCanvas",n,i),km(v.context,t));let b=et.transform(d,[1/n,0,0,-1/i,0,0]);b=et.transform(b,[1,0,0,1,0,-i]);const[y,A,S,C]=et.getAxialAlignedBoundingBox([0,0,n,i],b),T=Math.round(S-y)||1,L=Math.round(C-A)||1,k=this.cachedCanvases.getCanvas("fillCanvas",T,L),I=k.context,O=y,N=A;I.translate(-O,-N),I.transform(...b),g||(g=this._scaleImage(v.canvas,ui(I)),g=g.img,f&&h&&f.set(p,g)),I.imageSmoothingEnabled=Im(qt(I),t.interpolate),tu(I,g,0,0,g.width,g.height,0,0,n,i),I.globalCompositeOperation="source-in";const U=et.transform(ui(I),[1,0,0,1,-O,-N]);return I.fillStyle=h?a.getPattern(e,this,U,Ie.FILL):a,I.fillRect(0,0,n,i),f&&!h&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,k.canvas)),{canvas:k.canvas,offsetX:Math.round(O),offsetY:Math.round(N)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=rA[t]}setLineJoin(t){this.ctx.lineJoin=aA[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const a=this.ctx;a.setTransform(...qt(this.suspendedCtx)),qo(this.suspendedCtx,a),nA(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),qo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const a=i[0],h=i[1],d=i[2]-a,f=i[3]-h;d===0||f===0||(this.genericComposeSMask(e.context,n,d,f,e.subtype,e.backdrop,e.transferMap,a,h,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,a,h,d,f,p,g,v){let b=t.canvas,y=f-g,A=p-v;if(h){if(y<0||A<0||y+n>b.width||A+i>b.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,i),T=C.context;T.drawImage(b,-y,-A),h.some(L=>L!==0)&&(T.globalCompositeOperation="destination-atop",T.fillStyle=et.makeHexColor(...h),T.fillRect(0,0,n,i),T.globalCompositeOperation="source-over"),b=C.canvas,y=A=0}else if(h.some(C=>C!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(y,A,n,i),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=et.makeHexColor(...h),t.fillRect(y,A,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&d?e.filter=this.filterFactory.addAlphaFilter(d):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(d));const S=new Path2D;S.rect(f,p,n,i),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(b,y,A,n,i,f,p,n,i),e.restore()}save(){this.inSMaskMode?(qo(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),qo(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,a,h){this.ctx.transform(t,e,n,i,a,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const i=this.ctx,a=this.current;let h=a.x,d=a.y,f,p;const g=qt(i),v=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,b=v?n.slice(0):null;for(let y=0,A=0,S=t.length;y<S;y++)switch(t[y]|0){case mn.rectangle:h=e[A++],d=e[A++];const C=e[A++],T=e[A++],L=h+C,k=d+T;i.moveTo(h,d),C===0||T===0?i.lineTo(L,k):(i.lineTo(L,d),i.lineTo(L,k),i.lineTo(h,k)),v||a.updateRectMinMax(g,[h,d,L,k]),i.closePath();break;case mn.moveTo:h=e[A++],d=e[A++],i.moveTo(h,d),v||a.updatePathMinMax(g,h,d);break;case mn.lineTo:h=e[A++],d=e[A++],i.lineTo(h,d),v||a.updatePathMinMax(g,h,d);break;case mn.curveTo:f=h,p=d,h=e[A+4],d=e[A+5],i.bezierCurveTo(e[A],e[A+1],e[A+2],e[A+3],h,d),a.updateCurvePathMinMax(g,f,p,e[A],e[A+1],e[A+2],e[A+3],h,d,b),A+=6;break;case mn.curveTo2:f=h,p=d,i.bezierCurveTo(h,d,e[A],e[A+1],e[A+2],e[A+3]),a.updateCurvePathMinMax(g,f,p,h,d,e[A],e[A+1],e[A+2],e[A+3],b),h=e[A+2],d=e[A+3],A+=4;break;case mn.curveTo3:f=h,p=d,h=e[A+2],d=e[A+3],i.bezierCurveTo(e[A],e[A+1],h,d,h,d),a.updateCurvePathMinMax(g,f,p,e[A],e[A+1],h,d,h,d,b),A+=4;break;case mn.closePath:i.closePath();break}v&&a.updateScalingPathMinMax(g,b),a.setCurrentPoint(h,d)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n==null?void 0:n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,ui(e),Ie.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let a=!1;i&&(e.save(),e.fillStyle=n.getPattern(e,this,ui(e),Ie.FILL),a=!0);const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),a&&e.restore(),t&&this.consumePath(h)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=oA}eoClip(){this.pendingClip=Dm}beginText(){this.current.textMatrix=om,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var g;const n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=n.fontMatrix||Bf,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Et("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const a=n.loadedName||"sans-serif",h=((g=n.systemFontInfo)==null?void 0:g.css)||`"${a}", ${n.fallbackName}`;let d="normal";n.black?d="900":n.bold&&(d="bold");const f=n.italic?"italic":"normal";let p=e;e<xm?p=xm:e>Cm&&(p=Cm),this.current.fontSizeScale=e/p,this.ctx.font=`${f} ${d} ${p}px ${h}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,a,h){this.current.textMatrix=[t,e,n,i,a,h],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i){const a=this.ctx,h=this.current,d=h.font,f=h.textRenderingMode,p=h.fontSize/h.fontSizeScale,g=f&Re.FILL_STROKE_MASK,v=!!(f&Re.ADD_TO_PATH_FLAG),b=h.patternFill&&!d.missingFile;let y;(d.disableFontFace||v||b)&&(y=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||b?(a.save(),a.translate(e,n),a.beginPath(),y(a,p),i&&a.setTransform(...i),(g===Re.FILL||g===Re.FILL_STROKE)&&a.fill(),(g===Re.STROKE||g===Re.FILL_STROKE)&&a.stroke(),a.restore()):((g===Re.FILL||g===Re.FILL_STROKE)&&a.fillText(t,e,n),(g===Re.STROKE||g===Re.FILL_STROKE)&&a.strokeText(t,e,n)),v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:qt(a),x:e,y:n,fontSize:p,addToPath:y})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Dt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const a=this.ctx,h=e.fontSizeScale,d=e.charSpacing,f=e.wordSpacing,p=e.fontDirection,g=e.textHScale*p,v=t.length,b=n.vertical,y=b?1:-1,A=n.defaultVMetrics,S=i*e.fontMatrix[0],C=e.textRenderingMode===Re.FILL&&!n.disableFontFace&&!e.patternFill;a.save(),a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),p>0?a.scale(g,-1):a.scale(g,1);let T;if(e.patternFill){a.save();const N=e.fillColor.getPattern(a,this,ui(a),Ie.FILL);T=qt(a),a.restore(),a.fillStyle=N}let L=e.lineWidth;const k=e.textMatrixScale;if(k===0||L===0){const N=e.textRenderingMode&Re.FILL_STROKE_MASK;(N===Re.STROKE||N===Re.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=k;if(h!==1&&(a.scale(h,h),L/=h),a.lineWidth=L,n.isInvalidPDFjsFont){const N=[];let U=0;for(const q of t)N.push(q.unicode),U+=q.width;a.fillText(N.join(""),0,0),e.x+=U*S*g,a.restore(),this.compose();return}let I=0,O;for(O=0;O<v;++O){const N=t[O];if(typeof N=="number"){I+=y*N*i/1e3;continue}let U=!1;const q=(N.isSpace?f:0)+d,Y=N.fontChar,Z=N.accent;let H,st,it=N.width;if(b){const ot=N.vmetric||A,At=-(N.vmetric?ot[1]:it*.5)*S,V=ot[2]*S;it=ot?-ot[0]:it,H=At/h,st=(I+V)/h}else H=I/h,st=0;if(n.remeasure&&it>0){const ot=a.measureText(Y).width*1e3/i*h;if(it<ot&&this.isFontSubpixelAAEnabled){const At=it/ot;U=!0,a.save(),a.scale(At,1),H/=At}else it!==ot&&(H+=(it-ot)/2e3*i/h)}if(this.contentVisible&&(N.isInFont||n.missingFile)){if(C&&!Z)a.fillText(Y,H,st);else if(this.paintChar(Y,H,st,T),Z){const ot=H+i*Z.offset.x/h,At=st-i*Z.offset.y/h;this.paintChar(Z.fontChar,ot,At,T)}}I+=b?it*S-q*p:it*S+q*p,U&&a.restore()}b?e.y-=I:e.x+=I*g,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,a=n.fontSize,h=n.fontDirection,d=i.vertical?1:-1,f=n.charSpacing,p=n.wordSpacing,g=n.textHScale*h,v=n.fontMatrix||Bf,b=t.length,y=n.textRenderingMode===Re.INVISIBLE;let A,S,C,T;if(!(y||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(g,h),A=0;A<b;++A){if(S=t[A],typeof S=="number"){T=d*S*a/1e3,this.ctx.translate(T,0),n.x+=T*g;continue}const L=(S.isSpace?p:0)+f,k=i.charProcOperatorList[S.operatorListId];if(!k){Et(`Type3 character "${S.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=S,this.save(),e.scale(a,a),e.transform(...v),this.executeOperatorList(k),this.restore()),C=et.applyTransform([S.width,0],v)[0]*a+L,e.translate(C,0),n.x+=C*g}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,a,h){this.ctx.rect(n,i,a-n,h-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],i=this.baseTransform||qt(this.ctx),a={createCanvasGraphics:h=>new Tp(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new sp(t,n,this.ctx,a,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){const i=et.makeHexColor(t,e,n);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(t,e,n){const i=et.makeHexColor(t,e,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=Jy(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,ui(e),Ie.SHADING);const i=ui(e);if(i){const{width:a,height:h}=e.canvas,[d,f,p,g]=et.getAxialAlignedBoundingBox([0,0,a,h],i);this.ctx.fillRect(d,f,p-d,g-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ut("Should not call beginInlineImage")}beginImageData(){Ut("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=qt(this.ctx),e)){const n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(qt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||$h("TODO: Support non-isolated groups."),t.knockout&&Et("Knockout groups not supported.");const n=qt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=et.getAxialAlignedBoundingBox(t.bbox,qt(e));const a=[0,0,e.canvas.width,e.canvas.height];i=et.intersect(i,a)||[0,0,0,0];const h=Math.floor(i[0]),d=Math.floor(i[1]),f=Math.max(Math.ceil(i[2])-h,1),p=Math.max(Math.ceil(i[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(g,f,p),b=v.context;b.translate(-h,-d),b.transform(...n),t.smask?this.smaskStack.push({canvas:v.canvas,context:b,offsetX:h,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(h,d),e.save()),qo(e,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=qt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const a=et.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,n,i,a){if(_(this,ql,xv).call(this),eu(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const h=e[2]-e[0],d=e[3]-e[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=h,e[3]=d;const[f,p]=et.singularValueDecompose2dScale(qt(this.ctx)),{viewportScale:g}=this,v=Math.ceil(h*this.outputScaleX*g),b=Math.ceil(d*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(v,b);const{canvas:y,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(f,0,0,-p,0,d*p),eu(this.ctx)}else eu(this.ctx),this.ctx.rect(e[0],e[1],h,d),this.ctx.clip(),this.endPath()}this.current=new Rm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),_(this,Kl,Cv).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=sA(t)),i.compiled)){i.compiled(n);return}const a=this._createMaskCanvas(t),h=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(h,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,a,h){if(!this.contentVisible)return;t=this.getObject(t.data,t);const d=this.ctx;d.save();const f=qt(d);d.transform(e,n,i,a,0,0);const p=this._createMaskCanvas(t);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let g=0,v=h.length;g<v;g+=2){const b=et.transform(f,[e,n,i,a,h[g],h[g+1]]),[y,A]=et.applyTransform([0,0],b);d.drawImage(p.canvas,y,A)}d.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const a of t){const{data:h,width:d,height:f,transform:p}=a,g=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=g.context;v.save();const b=this.getObject(h,a);km(v,b),v.globalCompositeOperation="source-in",v.fillStyle=i?n.getPattern(v,this,ui(e),Ie.FILL):n,v.fillRect(0,0,d,f),v.restore(),e.save(),e.transform(...p),e.scale(1,-1),tu(e,g.canvas,0,0,d,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Et("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){Et("Dependent image isn't ready yet");return}const h=a.width,d=a.height,f=[];for(let p=0,g=i.length;p<g;p+=2)f.push({transform:[e,0,0,n,i[p],i[p+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(a,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,i),h=a.context;return h.filter=this.current.transferMaps,h.drawImage(e,0,0),h.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;if(this.save(),!Pe){const{filter:d}=i;d!=="none"&&d!==""&&(i.filter="none")}i.scale(1/e,-1/n);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Lm(f,t),a=this.applyTransferMapsToCanvas(f)}const h=this._scaleImage(a,ui(i));i.imageSmoothingEnabled=Im(qt(i),t.interpolate),tu(i,h.img,0,0,h.paintWidth,h.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const a=t.width,h=t.height,f=this.cachedCanvases.getCanvas("inlineImage",a,h).context;Lm(f,t),i=this.applyTransferMapsToCanvas(f)}for(const a of e)n.save(),n.transform(...a.transform),n.scale(1,-1),tu(n,i,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===Dm?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=qt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:a}=this.ctx.getTransform();let h,d;if(n===0&&i===0){const f=Math.abs(e),p=Math.abs(a);if(f===p)if(t===0)h=d=1/f;else{const g=f*t;h=d=g<1?1/g:1}else if(t===0)h=1/f,d=1/p;else{const g=f*t,v=p*t;h=g<1?1/g:1,d=v<1?1/v:1}}else{const f=Math.abs(e*a-n*i),p=Math.hypot(e,n),g=Math.hypot(i,a);if(t===0)h=g/f,d=p/f;else{const v=t*f;h=g>v?g/v:1,d=p>v?p/v:1}}this._cachedScaleForStroking[0]=h,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,a]=this.getScaleForStroking();if(e.lineWidth=n||1,i===1&&a===1){e.stroke();return}const h=e.getLineDash();if(t&&e.save(),e.scale(i,a),h.length>0){const d=Math.max(i,a);e.setLineDash(h.map(f=>f/d)),e.lineDashOffset/=d}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};let Ko=Tp;ql=new WeakSet,xv=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Kl=new WeakSet,Cv=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};for(const o in mn)Ko.prototype[o]!==void 0&&(Ko.prototype[mn[o]]=Ko.prototype[o]);class di{static get workerPort(){return u(this,Zl)}static set workerPort(t){if(!(typeof Worker!="undefined"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");E(this,Zl,t)}static get workerSrc(){return u(this,Ql)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");E(this,Ql,t)}}Zl=new WeakMap,Ql=new WeakMap,Zl.set(di,null),Ql.set(di,"");const nu={UNKNOWN:0,DATA:1,ERROR:2},ie={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Qe(o){switch(o instanceof Error||typeof o=="object"&&o!==null||Ut('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new Ls(o.message);case"MissingPDFException":return new Rs(o.message);case"PasswordException":return new Uf(o.message,o.code);case"UnexpectedResponseException":return new Wh(o.message,o.status);case"UnknownErrorException":return new Hf(o.message,o.details);default:return new Hf(o.message,o.toString())}}class Zo{constructor(t,e,n){Zu.add(this);Qu.add(this);Ta.add(this);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=i=>{const a=i.data;if(a.targetName!==this.sourceName)return;if(a.stream){_(this,Qu,ww).call(this,a);return}if(a.callback){const d=a.callbackId,f=this.callbackCapabilities[d];if(!f)throw new Error(`Cannot resolve callback ${d}`);if(delete this.callbackCapabilities[d],a.callback===nu.DATA)f.resolve(a.data);else if(a.callback===nu.ERROR)f.reject(Qe(a.reason));else throw new Error("Unexpected callback case");return}const h=this.actionHandler[a.action];if(!h)throw new Error(`Unknown action from worker: ${a.action}`);if(a.callbackId){const d=this.sourceName,f=a.sourceName;new Promise(function(p){p(h(a.data))}).then(function(p){n.postMessage({sourceName:d,targetName:f,callback:nu.DATA,callbackId:a.callbackId,data:p})},function(p){n.postMessage({sourceName:d,targetName:f,callback:nu.ERROR,callbackId:a.callbackId,reason:Qe(p)})});return}if(a.streamId){_(this,Zu,_w).call(this,a);return}h(a.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(h){a.reject(h)}return a.promise}sendWithStream(t,e,n,i){const a=this.streamId++,h=this.sourceName,d=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[a]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:h,targetName:d,action:t,streamId:a,data:e,desiredSize:p.desiredSize},i),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[a].pullCall=g,f.postMessage({sourceName:h,targetName:d,stream:ie.PULL,streamId:a,desiredSize:p.desiredSize}),g.promise},cancel:p=>{le(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[a].cancelCall=g,this.streamControllers[a].isClosed=!0,f.postMessage({sourceName:h,targetName:d,stream:ie.CANCEL,streamId:a,reason:Qe(p)}),g.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Zu=new WeakSet,_w=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,h=this,d=this.actionHandler[t.action],f={enqueue(p,g=1,v){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:ie.ENQUEUE,streamId:e,chunk:p},v)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:ie.CLOSE,streamId:e}),delete h.streamSinks[e])},error(p){le(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:ie.ERROR,streamId:e,reason:Qe(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,new Promise(function(p){p(d(t.data,f))}).then(function(){a.postMessage({sourceName:n,targetName:i,stream:ie.START_COMPLETE,streamId:e,success:!0})},function(p){a.postMessage({sourceName:n,targetName:i,stream:ie.START_COMPLETE,streamId:e,reason:Qe(p)})})},Qu=new WeakSet,ww=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,h=this.streamControllers[e],d=this.streamSinks[e];switch(t.stream){case ie.START_COMPLETE:t.success?h.startCall.resolve():h.startCall.reject(Qe(t.reason));break;case ie.PULL_COMPLETE:t.success?h.pullCall.resolve():h.pullCall.reject(Qe(t.reason));break;case ie.PULL:if(!d){a.postMessage({sourceName:n,targetName:i,stream:ie.PULL_COMPLETE,streamId:e,success:!0});break}d.desiredSize<=0&&t.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=t.desiredSize,new Promise(function(f){var p;f((p=d.onPull)==null?void 0:p.call(d))}).then(function(){a.postMessage({sourceName:n,targetName:i,stream:ie.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:ie.PULL_COMPLETE,streamId:e,reason:Qe(f)})});break;case ie.ENQUEUE:if(le(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(t.chunk);break;case ie.CLOSE:if(le(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),_(this,Ta,Np).call(this,h,e);break;case ie.ERROR:le(h,"error should have stream controller"),h.controller.error(Qe(t.reason)),_(this,Ta,Np).call(this,h,e);break;case ie.CANCEL_COMPLETE:t.success?h.cancelCall.resolve():h.cancelCall.reject(Qe(t.reason)),_(this,Ta,Np).call(this,h,e);break;case ie.CANCEL:if(!d)break;new Promise(function(f){var p;f((p=d.onCancel)==null?void 0:p.call(d,Qe(t.reason)))}).then(function(){a.postMessage({sourceName:n,targetName:i,stream:ie.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:ie.CANCEL_COMPLETE,streamId:e,reason:Qe(f)})}),d.sinkCapability.reject(Qe(t.reason)),d.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Ta=new WeakSet,Np=function(t,e){return kt(this,null,function*(){var n,i,a;yield Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(a=t.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[e]})};class lA{constructor({parsedData:t,rawData:e}){sr.set(this,void 0);Jl.set(this,void 0);E(this,sr,t),E(this,Jl,e)}getRaw(){return u(this,Jl)}get(t){var e;return(e=u(this,sr).get(t))!=null?e:null}getAll(){return zf(u(this,sr))}has(t){return u(this,sr).has(t)}}sr=new WeakMap,Jl=new WeakMap;const Zi=Symbol("INTERNAL");class cA{constructor(t,{name:e,intent:n,usage:i}){tc.set(this,!1);ec.set(this,!1);nc.set(this,!1);Pa.set(this,!0);E(this,tc,!!(t&ln.DISPLAY)),E(this,ec,!!(t&ln.PRINT)),this.name=e,this.intent=n,this.usage=i}get visible(){if(u(this,nc))return u(this,Pa);if(!u(this,Pa))return!1;const{print:t,view:e}=this.usage;return u(this,tc)?(e==null?void 0:e.viewState)!=="OFF":u(this,ec)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Zi&&Ut("Internal method `_setVisible` called."),E(this,nc,n),E(this,Pa,e)}}tc=new WeakMap,ec=new WeakMap,nc=new WeakMap,Pa=new WeakMap;class hA{constructor(t,e=ln.DISPLAY){ic.add(this);os.set(this,null);Ht.set(this,new Map);Ra.set(this,null);La.set(this,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,E(this,La,t.order);for(const n of t.groups)u(this,Ht).set(n.id,new cA(e,n));if(t.baseState==="OFF")for(const n of u(this,Ht).values())n._setVisible(Zi,!1);for(const n of t.on)u(this,Ht).get(n)._setVisible(Zi,!0);for(const n of t.off)u(this,Ht).get(n)._setVisible(Zi,!1);E(this,Ra,this.getHash())}}isVisible(t){if(u(this,Ht).size===0)return!0;if(!t)return $h("Optional content group not defined."),!0;if(t.type==="OCG")return u(this,Ht).has(t.id)?u(this,Ht).get(t.id).visible:(Et(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return _(this,ic,Tv).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!u(this,Ht).has(e))return Et(`Optional content group not found: ${e}`),!0;if(u(this,Ht).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!u(this,Ht).has(e))return Et(`Optional content group not found: ${e}`),!0;if(!u(this,Ht).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!u(this,Ht).has(e))return Et(`Optional content group not found: ${e}`),!0;if(!u(this,Ht).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!u(this,Ht).has(e))return Et(`Optional content group not found: ${e}`),!0;if(u(this,Ht).get(e).visible)return!1}return!0}return Et(`Unknown optional content policy ${t.policy}.`),!0}return Et(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const n=u(this,Ht).get(t);if(!n){Et(`Optional content group not found: ${t}`);return}n._setVisible(Zi,!!e,!0),E(this,os,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=u(this,Ht).get(i);if(!!a)switch(n){case"ON":a._setVisible(Zi,!0);break;case"OFF":a._setVisible(Zi,!1);break;case"Toggle":a._setVisible(Zi,!a.visible);break}}E(this,os,null)}get hasInitialVisibility(){return u(this,Ra)===null||this.getHash()===u(this,Ra)}getOrder(){return u(this,Ht).size?u(this,La)?u(this,La).slice():[...u(this,Ht).keys()]:null}getGroups(){return u(this,Ht).size>0?zf(u(this,Ht)):null}getGroup(t){return u(this,Ht).get(t)||null}getHash(){if(u(this,os)!==null)return u(this,os);const t=new Am;for(const[e,n]of u(this,Ht))t.update(`${e}:${n.visible}`);return E(this,os,t.hexdigest())}}os=new WeakMap,Ht=new WeakMap,Ra=new WeakMap,La=new WeakMap,ic=new WeakSet,Tv=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const a=t[i];let h;if(Array.isArray(a))h=_(this,ic,Tv).call(this,a);else if(u(this,Ht).has(a))h=u(this,Ht).get(a).visible;else return Et(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return n==="And"};class uA{constructor(t,{disableRange:e=!1,disableStream:n=!1}){le(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:h,contentDispositionFilename:d}=t;if(this._queuedChunks=[],this._progressiveDone=h,this._contentDispositionFilename=d,(a==null?void 0:a.length)>0){const f=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});le(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t,e;return(e=(t=this._fullRequestReader)==null?void 0:t._loaded)!=null?e:0}_onProgress(t){var e,n,i,a;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){le(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new dA(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new fA(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class dA{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=qf(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return kt(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class fA{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return kt(this,null,function*(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function pA(o){let t=!0,e=n("filename\\*","i").exec(o);if(e){e=e[1];let g=d(e);return g=unescape(g),g=f(g),g=p(g),a(g)}if(e=h(o),e){const g=p(e);return a(g)}if(e=n("filename","i").exec(o),e){e=e[1];let g=d(e);return g=p(g),a(g)}function n(g,v){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function i(g,v){if(g){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const b=new TextDecoder(g,{fatal:!0}),y=Go(v);v=b.decode(y),t=!1}catch(b){}}return v}function a(g){return t&&/[\x80-\xff]/.test(g)&&(g=i("utf-8",g),t&&(g=i("iso-8859-1",g))),g}function h(g){const v=[];let b;const y=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=y.exec(g))!==null;){let[,S,C,T]=b;if(S=parseInt(S,10),S in v){if(S===0)break;continue}v[S]=[C,T]}const A=[];for(let S=0;S<v.length&&S in v;++S){let[C,T]=v[S];T=d(T),C&&(T=unescape(T),S===0&&(T=f(T))),A.push(T)}return A.join("")}function d(g){if(g.startsWith('"')){const v=g.slice(1).split('\\"');for(let b=0;b<v.length;++b){const y=v[b].indexOf('"');y!==-1&&(v[b]=v[b].slice(0,y),v.length=b+1),v[b]=v[b].replaceAll(/\\(.)/g,"$1")}g=v.join('"')}return g}function f(g){const v=g.indexOf("'");if(v===-1)return g;const b=g.slice(0,v),A=g.slice(v+1).replace(/^[^']*'/,"");return i(b,A)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,b,y,A){if(y==="q"||y==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),i(b,A);try{A=atob(A)}catch(S){}return i(b,A)})}return""}function rp({getResponseHeader:o,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(o("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*e)||n||!t||o("Accept-Ranges")!=="bytes"||(o("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function ap(o){const t=o("Content-Disposition");if(t){let e=pA(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(qf(e))return e}return null}function iu(o,t){return o===404||o===0&&t.startsWith("file:")?new Rs('Missing PDF "'+t+'".'):new Wh(`Unexpected server response (${o}) while retrieving PDF "${t}".`,o)}function Mm(o){return o===200||o===206}function Om(o,t,e){return{method:"GET",headers:o,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Fm(o){const t=new Headers;for(const e in o){const n=o[e];n!==void 0&&t.append(e,n)}return t}function Nm(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(Et(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class Bm{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return(e=(t=this._fullRequestReader)==null?void 0:t._loaded)!=null?e:0}getFullReader(){return le(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new gA(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new mA(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class gA{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=Fm(this._stream.httpHeaders);const n=e.url;fetch(n,Om(this._headers,this._withCredentials,this._abortController)).then(i=>{if(!Mm(i.status))throw iu(i.status,n);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=f=>i.headers.get(f),{allowRangeRequests:h,suggestedLength:d}=rp({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=ap(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ls("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return kt(this,null,function*(){var n;yield this._headersCapability.promise;const{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Nm(t),done:!1})})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class mA{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController,this._headers=Fm(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const a=i.url;fetch(a,Om(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!Mm(h.status))throw iu(h.status,a);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return kt(this,null,function*(){var n;yield this._readCapability.promise;const{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:Nm(t),done:!1})})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const op=200,lp=206;function vA(o){const t=o.response;return typeof t!="string"?t:Go(t).buffer}class bA{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const i={begin:t,end:e};for(const a in n)i[a]=n[a];return this.request(i)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const a in this.httpHeaders){const h=this.httpHeaders[a];h!==void 0&&e.setRequestHeader(a,h)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=lp):i.expectedStatus=op,e.responseType="arraybuffer",t.onError&&(e.onerror=function(a){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];!n||(i=n.onProgress)==null||i.call(n,e)}onStateChange(t,e){var f,p,g;const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){(f=n.onError)==null||f.call(n,i.status);return}const a=i.status||op;if(!(a===op&&n.expectedStatus===lp)&&a!==n.expectedStatus){(p=n.onError)==null||p.call(n,i.status);return}const d=vA(i);if(a===lp){const v=i.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(v);n.onDone({begin:parseInt(b[1],10),chunk:d})}else d?n.onDone({begin:0,chunk:d}):(g=n.onError)==null||g.call(n,i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class yA{constructor(t){this._source=t,this._manager=new bA(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return le(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new AA(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new EA(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class AA{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=h=>e.getResponseHeader(h),{allowRangeRequests:i,suggestedLength:a}=rp({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=ap(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=iu(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){return kt(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class EA{constructor(t,e,n){this._manager=t;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=iu(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}read(){return kt(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const jm=/^file:\/\/\/[a-zA-Z]:\//;function _A(o){const t=Fn.get("url"),e=t.parse(o);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(o)?t.parse(`file:///${o}`):(e.host||(e.protocol="file:"),e)}class wA{constructor(t){this.source=t,this.url=_A(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return(e=(t=this._fullRequestReader)==null?void 0:t._loaded)!=null?e:0}getFullReader(){return le(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new CA(this):new SA(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new TA(this,t,e):new xA(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Um{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return kt(this,null,function*(){var n;if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ls("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Hm{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return kt(this,null,function*(){var n;if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function su(o,t){return{protocol:o.protocol,auth:o.auth,host:o.hostname,port:o.port,path:o.path,method:"GET",headers:t}}class SA extends Um{constructor(t){super(t);const e=n=>{if(n.statusCode===404){const d=new Rs(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(n);const i=d=>this._readableStream.headers[d.toLowerCase()],{allowRangeRequests:a,suggestedLength:h}=rp({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=h||this._contentLength,this._filename=ap(i)};if(this._request=null,this._url.protocol==="http:"){const n=Fn.get("http");this._request=n.request(su(this._url,t.httpHeaders),e)}else{const n=Fn.get("https");this._request=n.request(su(this._url,t.httpHeaders),e)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class xA extends Hm{constructor(t,e,n){super(t);this._httpHeaders={};for(const a in t.httpHeaders){const h=t.httpHeaders[a];h!==void 0&&(this._httpHeaders[a]=h)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const i=a=>{if(a.statusCode===404){const h=new Rs(`Missing PDF "${this._url}".`);this._storedError=h;return}this._setReadableStream(a)};if(this._request=null,this._url.protocol==="http:"){const a=Fn.get("http");this._request=a.request(su(this._url,this._httpHeaders),i)}else{const a=Fn.get("https");this._request=a.request(su(this._url,this._httpHeaders),i)}this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class CA extends Um{constructor(t){super(t);let e=decodeURIComponent(this._url.path);jm.test(this._url.href)&&(e=e.replace(/^\//,""));const n=Fn.get("fs");n.promises.lstat(e).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(e)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Rs(`Missing PDF "${e}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class TA extends Hm{constructor(t,e,n){super(t);let i=decodeURIComponent(this._url.path);jm.test(this._url.href)&&(i=i.replace(/^\//,""));const a=Fn.get("fs");this._setReadableStream(a.createReadStream(i,{start:e,end:n-1}))}}const PA=1e5,Ge=30,RA=.8,tn=class{constructor({textContentSource:t,container:e,viewport:n}){Ju.add(this);td.add(this);uc.add(this);ls.set(this,Promise.withResolvers());Ye.set(this,null);sc.set(this,!1);rc.set(this,!!((nv=globalThis.FontInspector)==null?void 0:nv.enabled));rr.set(this,null);xi.set(this,null);ac.set(this,0);oc.set(this,0);ar.set(this,null);ka.set(this,null);Ia.set(this,0);cs.set(this,0);Da.set(this,Object.create(null));lc.set(this,[]);Ma.set(this,null);or.set(this,[]);cc.set(this,new WeakMap);hc.set(this,null);if(t instanceof ReadableStream)E(this,Ma,t);else if(typeof t=="object")E(this,Ma,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,Ye,E(this,ka,e)),E(this,cs,n.scale*(globalThis.devicePixelRatio||1)),E(this,Ia,n.rotation),E(this,xi,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:h,pageY:d}=n.rawDims;E(this,hc,[1,0,0,-1,-h,d+a]),E(this,oc,i),E(this,ac,a),ks(e,n),u(this,ls).promise.catch(()=>{}).then(()=>{u(tn,Oa).delete(this),E(this,xi,null),E(this,Da,null)})}render(){const t=()=>{u(this,ar).read().then(({value:e,done:n})=>{var i;if(n){u(this,ls).resolve();return}(i=u(this,rr))!=null||E(this,rr,e.lang),Object.assign(u(this,Da),e.styles),_(this,Ju,Sw).call(this,e.items),t()},u(this,ls).reject)};return E(this,ar,u(this,Ma).getReader()),u(tn,Oa).add(this),t(),u(this,ls).promise}update({viewport:t,onBefore:e=null}){const n=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==u(this,Ia)&&(e==null||e(),E(this,Ia,i),ks(u(this,ka),{rotation:i})),n!==u(this,cs)){e==null||e(),E(this,cs,n);const a={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:_(tn,Fa,Bp).call(tn,u(this,rr))};for(const h of u(this,or))a.properties=u(this,cc).get(h),a.div=h,_(this,uc,Pv).call(this,a)}}cancel(){var e;const t=new Ls("TextLayer task cancelled.");(e=u(this,ar))==null||e.cancel(t).catch(()=>{}),E(this,ar,null),u(this,ls).reject(t)}get textDivs(){return u(this,or)}get textContentItemsStr(){return u(this,lc)}static cleanup(){if(!(u(this,Oa).size>0)){u(this,lr).clear();for(const{canvas:t}of u(this,cr).values())t.remove();u(this,cr).clear()}}};let Nn=tn;ls=new WeakMap,Ye=new WeakMap,sc=new WeakMap,rc=new WeakMap,rr=new WeakMap,xi=new WeakMap,ac=new WeakMap,oc=new WeakMap,ar=new WeakMap,ka=new WeakMap,Ia=new WeakMap,cs=new WeakMap,Da=new WeakMap,lc=new WeakMap,Ma=new WeakMap,or=new WeakMap,cc=new WeakMap,hc=new WeakMap,lr=new WeakMap,cr=new WeakMap,Oa=new WeakMap,Ju=new WeakSet,Sw=function(t){var i;if(u(this,sc))return;(i=u(this,xi)).ctx||(i.ctx=_(tn,Fa,Bp).call(tn,u(this,rr)));const e=u(this,or),n=u(this,lc);for(const a of t){if(e.length>PA){Et("Ignoring additional textDivs for performance reasons."),E(this,sc,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const h=u(this,Ye);E(this,Ye,document.createElement("span")),u(this,Ye).classList.add("markedContent"),a.id!==null&&u(this,Ye).setAttribute("id",`${a.id}`),h.append(u(this,Ye))}else a.type==="endMarkedContent"&&E(this,Ye,u(this,Ye).parentNode);continue}n.push(a.str),_(this,td,xw).call(this,a)}},td=new WeakSet,xw=function(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};u(this,or).push(e);const i=et.transform(u(this,hc),t.transform);let a=Math.atan2(i[1],i[0]);const h=u(this,Da)[t.fontName];h.vertical&&(a+=Math.PI/2);const d=u(this,rc)&&h.fontSubstitution||h.fontFamily,f=Math.hypot(i[2],i[3]),p=f*_(tn,ed,Cw).call(tn,d,u(this,rr));let g,v;a===0?(g=i[4],v=i[5]-p):(g=i[4]+p*Math.sin(a),v=i[5]-p*Math.cos(a));const b="calc(var(--scale-factor)*",y=e.style;u(this,Ye)===u(this,ka)?(y.left=`${(100*g/u(this,oc)).toFixed(2)}%`,y.top=`${(100*v/u(this,ac)).toFixed(2)}%`):(y.left=`${b}${g.toFixed(2)}px)`,y.top=`${b}${v.toFixed(2)}px)`),y.fontSize=`${b}${f.toFixed(2)}px)`,y.fontFamily=d,n.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,u(this,rc)&&(e.dataset.fontName=h.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);S!==C&&Math.max(S,C)/Math.min(S,C)>1.5&&(A=!0)}if(A&&(n.canvasWidth=h.vertical?t.height:t.width),u(this,cc).set(e,n),u(this,xi).div=e,u(this,xi).properties=n,_(this,uc,Pv).call(this,u(this,xi)),n.hasText&&u(this,Ye).append(e),n.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),u(this,Ye).append(S)}},uc=new WeakSet,Pv=function(t){const{div:e,properties:n,ctx:i,prevFontSize:a,prevFontFamily:h}=t,{style:d}=e;let f="";if(n.canvasWidth!==0&&n.hasText){const{fontFamily:p}=d,{canvasWidth:g,fontSize:v}=n;(a!==v||h!==p)&&(i.font=`${v*u(this,cs)}px ${p}`,t.prevFontSize=v,t.prevFontFamily=p);const{width:b}=i.measureText(e.textContent);b>0&&(f=`scaleX(${g*u(this,cs)/b})`)}n.angle!==0&&(f=`rotate(${n.angle}deg) ${f}`),f.length>0&&(d.transform=f)},Fa=new WeakSet,Bp=function(t=null){let e=u(this,cr).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1}),u(this,cr).set(t,e)}return e},ed=new WeakSet,Cw=function(t,e){const n=u(this,lr).get(t);if(n)return n;const i=_(this,Fa,Bp).call(this,e),a=i.font;i.canvas.width=i.canvas.height=Ge,i.font=`${Ge}px ${t}`;const h=i.measureText("");let d=h.fontBoundingBoxAscent,f=Math.abs(h.fontBoundingBoxDescent);if(d){const v=d/(d+f);return u(this,lr).set(t,v),i.canvas.width=i.canvas.height=0,i.font=a,v}i.strokeStyle="red",i.clearRect(0,0,Ge,Ge),i.strokeText("g",0,0);let p=i.getImageData(0,0,Ge,Ge).data;f=0;for(let v=p.length-1-3;v>=0;v-=4)if(p[v]>0){f=Math.ceil(v/4/Ge);break}i.clearRect(0,0,Ge,Ge),i.strokeText("A",0,Ge),p=i.getImageData(0,0,Ge,Ge).data,d=0;for(let v=0,b=p.length;v<b;v+=4)if(p[v]>0){d=Ge-Math.floor(v/4/Ge);break}i.canvas.width=i.canvas.height=0,i.font=a;const g=d?d/(d+f):RA;return u(this,lr).set(t,g),g},Fa.add(Nn),ed.add(Nn),lr.set(Nn,new Map),cr.set(Nn,new Map),Oa.set(Nn,new Set);function LA(){gm("`renderTextLayer`, please use `TextLayer` instead.");const p=arguments[0],{textContentSource:o,container:t,viewport:e}=p,n=sv(p,["textContentSource","container","viewport"]),i=Object.keys(n);i.length>0&&Et("Ignoring `renderTextLayer` parameters: "+i.join(", "));const a=new Nn({textContentSource:o,container:t,viewport:e}),{textDivs:h,textContentItemsStr:d}=a;return{promise:a.render(),textDivs:h,textContentItemsStr:d}}function kA(){gm("`updateTextLayer`, please use `TextLayer` instead.")}class Qo{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(a){var f;if(!a)return;let h=null;const d=a.name;if(d==="#text")h=a.value;else if(Qo.shouldBuildText(d))((f=a==null?void 0:a.attributes)==null?void 0:f.textContent)?h=a.attributes.textContent:a.value&&(h=a.value);else return;if(h!==null&&e.push({str:h}),!!a.children)for(const p of a.children)i(p)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const IA=65536,DA=100,MA=5e3,OA=Pe?Wy:Dy,FA=Pe?Yy:dm,NA=Pe?$y:Iy,BA=Pe?Xy:fm;function jA(o){var X,rt;if(typeof o=="string"||o instanceof URL?o={url:o}:(o instanceof ArrayBuffer||ArrayBuffer.isView(o))&&(o={data:o}),typeof o!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!o.url&&!o.data&&!o.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new cp,{docId:e}=t,n=o.url?UA(o.url):null,i=o.data?HA(o.data):null,a=o.httpHeaders||null,h=o.withCredentials===!0,d=(X=o.password)!=null?X:null,f=o.range instanceof Gm?o.range:null,p=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:IA;let g=o.worker instanceof Is?o.worker:null;const v=o.verbosity,b=typeof o.docBaseUrl=="string"&&!Xf(o.docBaseUrl)?o.docBaseUrl:null,y=typeof o.cMapUrl=="string"?o.cMapUrl:null,A=o.cMapPacked!==!1,S=o.CMapReaderFactory||FA,C=typeof o.standardFontDataUrl=="string"?o.standardFontDataUrl:null,T=o.StandardFontDataFactory||BA,L=o.stopAtErrors!==!0,k=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,I=o.isEvalSupported!==!1,O=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!Pe,N=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,U=typeof o.disableFontFace=="boolean"?o.disableFontFace:Pe,q=o.fontExtraProperties===!0,Y=o.enableXfa===!0,Z=o.ownerDocument||globalThis.document,H=o.disableRange===!0,st=o.disableStream===!0,it=o.disableAutoFetch===!0,ht=o.pdfBug===!0,ot=f?f.length:(rt=o.length)!=null?rt:NaN,At=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!Pe&&!U,V=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:S===dm&&T===fm&&y&&C&&$o(y,document.baseURI)&&$o(C,document.baseURI),J=o.canvasFactory||new OA({ownerDocument:Z}),$t=o.filterFactory||new NA({docId:e,ownerDocument:Z}),Xt=null;Ay(v);const te={canvasFactory:J,filterFactory:$t};if(V||(te.cMapReaderFactory=new S({baseUrl:y,isCompressed:A}),te.standardFontDataFactory=new T({baseUrl:C})),!g){const M={verbosity:v,port:di.workerPort};g=M.port?Is.fromPort(M):new Is(M),t._worker=g}const $={docId:e,apiVersion:"4.3.136",data:i,password:d,disableAutoFetch:it,rangeChunkSize:p,length:ot,docBaseUrl:b,enableXfa:Y,evaluatorOptions:{maxImageSize:k,disableFontFace:U,ignoreErrors:L,isEvalSupported:I,isOffscreenCanvasSupported:O,canvasMaxAreaInBytes:N,fontExtraProperties:q,useSystemFonts:At,cMapUrl:V?y:null,standardFontDataUrl:V?C:null}},z={disableFontFace:U,fontExtraProperties:q,ownerDocument:Z,pdfBug:ht,styleElement:Xt,loadingParams:{disableAutoFetch:it,enableXfa:Y}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const M=g.messageHandler.sendWithPromise("GetDocRequest",$,i?[i.buffer]:null);let tt;return f?tt=new uA(f,{disableRange:H,disableStream:st}):i||(tt=(mt=>Pe?function(){return typeof fetch!="undefined"&&typeof Response!="undefined"&&"body"in Response.prototype}()&&$o(mt.url)?new Bm(mt):new wA(mt):$o(mt.url)?new Bm(mt):new yA(mt))({url:n,length:ot,httpHeaders:a,withCredentials:h,rangeChunkSize:p,disableRange:H,disableStream:st})),M.then(G=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const mt=new Zo(e,G,g.port),nt=new $A(mt,t,tt,z,te);t._transport=nt,mt.send("Ready",null)})}).catch(t._capability.reject),t}function UA(o){if(o instanceof URL)return o.href;try{return new URL(o,window.location).href}catch(t){if(Pe&&typeof o=="string")return o}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function HA(o){if(Pe&&typeof am!="undefined"&&o instanceof am)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return Go(o);if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="object"&&!isNaN(o==null?void 0:o.length))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function zm(o){return typeof o=="object"&&Number.isInteger(o==null?void 0:o.num)&&o.num>=0&&Number.isInteger(o==null?void 0:o.gen)&&o.gen>=0}const dc=class{constructor(){var t;this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${E(dc,nd,(t=+u(dc,nd))+1),t}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return kt(this,null,function*(){var t,e,n;this.destroyed=!0;try{((t=this._worker)==null?void 0:t.port)&&(this._worker._pendingDestroy=!0),yield(e=this._transport)==null?void 0:e.destroy()}catch(i){throw((n=this._worker)==null?void 0:n.port)&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}};let cp=dc;nd=new WeakMap,nd.set(cp,0);class Gm{constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Ut("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class zA{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class GA{constructor(t,e,n,i=!1){us.add(this);Na.add(this);hs.set(this,null);Ci.set(this,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new pm:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Vm,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new Vo({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return kt(this,null,function*(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null})}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=Xi.ENABLE,transform:a=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null}){var k,I;(k=this._stats)==null||k.time("Overall");const v=this._transport.getRenderingIntent(n,i,g),{renderingIntent:b,cacheKey:y}=v;E(this,Ci,!1),_(this,Na,jp).call(this),d||(d=this._transport.getOptionalContentConfig(b));let A=this._intentStates.get(y);A||(A=Object.create(null),this._intentStates.set(y,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const S=!!(b&ln.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(v));const C=O=>{var N;A.renderTasks.delete(T),(this._maybeCleanupAfterRender||S)&&E(this,Ci,!0),_(this,us,Ph).call(this,!S),O?(T.capability.reject(O),this._abortOperatorList({intentState:A,reason:O instanceof Error?O:new Error(O)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),((N=globalThis.Stats)==null?void 0:N.enabled)&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new hp({callback:C,params:{canvasContext:t,viewport:e,transform:a,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:p});(A.renderTasks||(A.renderTasks=new Set)).add(T);const L=T.task;return Promise.all([A.displayReadyCapability.promise,d]).then(([O,N])=>{var U;if(this.destroyed){C();return}if((U=this._stats)==null||U.time("Rendering"),!(N.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:O,optionalContentConfig:N}),T.operatorListChanged()}).catch(C),L}getOperatorList({intent:t="display",annotationMode:e=Xi.ENABLE,printAnnotationStorage:n=null}={}){var f;function i(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const a=this._transport.getRenderingIntent(t,e,n,!0);let h=this._intentStates.get(a.cacheKey);h||(h=Object.create(null),this._intentStates.set(a.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=i,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(a)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){const n=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:n,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Qo.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function a(){h.read().then(function({value:f,done:p}){var g;if(p){n(d);return}(g=d.lang)!=null||(d.lang=f.lang),Object.assign(d.styles,f.styles),d.items.push(...f.items),a()},i)}const h=e.getReader(),d={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),E(this,Ci,!1),_(this,Na,jp).call(this),Promise.all(t)}cleanup(t=!1){E(this,Ci,!0);const e=_(this,us,Ph).call(this,!1);return t&&e&&this._stats&&(this._stats=new pm),e}_startRenderPage(t,e){var i,a;const n=this._intentStates.get(e);!n||((i=this._stats)==null||i.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&_(this,us,Ph).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n}){const{map:i,transfer:a}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:i},a).getReader(),f=this._intentStates.get(e);f.streamReader=d;const p=()=>{d.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),p())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();_(this,us,Ph).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(!!t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Yf){let i=DA;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Ls(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}hs=new WeakMap,Ci=new WeakMap,us=new WeakSet,Ph=function(t=!1){if(_(this,Na,jp).call(this),!u(this,Ci)||this.destroyed)return!1;if(t)return E(this,hs,setTimeout(()=>{E(this,hs,null),_(this,us,Ph).call(this,!1)},MA)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,Ci,!1),!0},Na=new WeakSet,jp=function(){u(this,hs)&&(clearTimeout(u(this,hs)),E(this,hs,null))};class VA{constructor(){hr.set(this,new Set);id.set(this,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};u(this,id).then(()=>{for(const i of u(this,hr))i.call(this,n)})}addEventListener(t,e){u(this,hr).add(e)}removeEventListener(t,e){u(this,hr).delete(e)}terminate(){u(this,hr).clear()}}hr=new WeakMap,id=new WeakMap;const fi={isWorkerDisabled:!1,fakeWorkerId:0};Pe&&(fi.isWorkerDisabled=!0,di.workerSrc||(di.workerSrc="./pdf.worker.mjs")),fi.isSameOrigin=function(o,t){let e;try{if(e=new URL(o),!e.origin||e.origin==="null")return!1}catch(i){return!1}const n=new URL(t,e);return e.origin===n.origin},fi.createCDNWrapper=function(o){const t=`await import("${o}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};const _n=class{constructor({name:t=null,port:e=null,verbosity:n=Ey()}={}){var i;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=u(_n,ur))==null?void 0:i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(u(_n,ur)||E(_n,ur,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return Pe?Promise.all([Fn.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Zo("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!fi.isWorkerDisabled&&!u(_n,Ba,Up)){let{workerSrc:t}=_n;try{fi.isSameOrigin(window.location.href,t)||(t=fi.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Zo("main","worker",e),i=()=>{e.removeEventListener("error",a),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||i()};e.addEventListener("error",a),n.on("test",d=>{if(e.removeEventListener("error",a),this.destroyed){i();return}d?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())}),n.on("ready",d=>{if(e.removeEventListener("error",a),this.destroyed){i();return}try{h()}catch(f){this._setupFakeWorker()}});const h=()=>{const d=new Uint8Array;n.send("test",d,[d.buffer])};h();return}catch(e){$h("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){fi.isWorkerDisabled||(Et("Setting up fake worker."),fi.isWorkerDisabled=!0),_n._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new VA;this._port=e;const n=`fake${fi.fakeWorkerId++}`,i=new Zo(n+"_worker",n,e);t.setup(i,e);const a=new Zo(n,n+"_worker",e);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=u(_n,ur))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t==null?void 0:t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=u(this,ur))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new _n(t)}static get workerSrc(){if(di.workerSrc)return di.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Dt(this,"_setupFakeWorkerGlobal",(()=>kt(this,null,function*(){return u(this,Ba,Up)?u(this,Ba,Up):(yield import(this.workerSrc)).WorkerMessageHandler}))())}};let Is=_n;ur=new WeakMap,Ba=new WeakSet,Up=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch(e){return null}},Ba.add(Is),ur.set(Is,void 0);class $A{constructor(t,e,n,i,a){dr.add(this);Ti.set(this,new Map);qn.set(this,new Map);ja.set(this,new Map);Ua.set(this,new Map);Kn.set(this,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Vm,this.fontLoader=new Gy({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Dt(this,"annotationStorage",new tp)}getRenderingIntent(t,e=Xi.ENABLE,n=null,i=!1){let a=ln.DISPLAY,h=Jf;switch(t){case"any":a=ln.ANY;break;case"display":break;case"print":a=ln.PRINT;break;default:Et(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case Xi.DISABLE:a+=ln.ANNOTATIONS_DISABLE;break;case Xi.ENABLE:break;case Xi.ENABLE_FORMS:a+=ln.ANNOTATIONS_FORMS;break;case Xi.ENABLE_STORAGE:a+=ln.ANNOTATIONS_STORAGE,h=(a&ln.PRINT&&n instanceof Em?n:this.annotationStorage).serializable;break;default:Et(`getRenderingIntent - invalid annotationMode: ${e}`)}return i&&(a+=ln.OPLIST),{renderingIntent:a,cacheKey:`${a}_${h.hash}`,annotationStorageSerializable:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,Kn))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of u(this,qn).values())t.push(i._destroy());u(this,qn).clear(),u(this,ja).clear(),u(this,Ua).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Ti).clear(),this.filterFactory.destroy(),Nn.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Ls("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{le(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:h}){if(h){i.close();return}le(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("ReaderHeadersReady",n=>{const i=Promise.withResolvers(),a=this._fullReader;return a.headersReady.then(()=>{var h;(!a.isStreamingSupported||!a.isRangeSupported)&&(this._lastProgress&&((h=e.onProgress)==null||h.call(e,this._lastProgress)),a.onProgress=d=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:d.loaded,total:d.total})}),i.resolve({isStreamingSupported:a.isStreamingSupported,isRangeSupported:a.isRangeSupported,contentLength:a.contentLength})},i.reject),i.promise}),t.on("GetRangeReader",(n,i)=>{le(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:h,done:d}){if(d){i.close();return}le(h instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(h),1,[h])}).catch(h=>{i.error(h)})},i.onCancel=h=>{a.cancel(h),i.ready.catch(d=>{if(!this.destroyed)throw d})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new zA(n,this))}),t.on("DocException",function(n){let i;switch(n.name){case"PasswordException":i=new Uf(n.message,n.code);break;case"InvalidPDFException":i=new lm(n.message);break;case"MissingPDFException":i=new Rs(n.message);break;case"UnexpectedResponseException":i=new Wh(n.message,n.status);break;case"UnknownErrorException":i=new Hf(n.message,n.details);break;default:Ut("DocException - expected a valid Error.")}e._capability.reject(i)}),t.on("PasswordRequest",n=>{if(E(this,Kn,Promise.withResolvers()),e.onPassword){const i=a=>{a instanceof Error?u(this,Kn).reject(a):u(this,Kn).resolve({password:a})};try{e.onPassword(i,n.code)}catch(a){u(this,Kn).reject(a)}}else u(this,Kn).reject(new Uf(n.message,n.code));return u(this,Kn).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,qn).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,a])=>{var h;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:d,fontExtraProperties:f,pdfBug:p}=this._params;if("error"in a){const y=a.error;Et(`Error during font loading: ${y}`),this.commonObjs.resolve(n,y);break}const g=p&&((h=globalThis.FontInspector)==null?void 0:h.enabled)?(y,A)=>globalThis.FontInspector.fontAdded(y,A):null,v=new Vy(a,{disableFontFace:d,inspectFont:g});this.fontLoader.bind(v).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f&&v.data&&(v.data=null),this.commonObjs.resolve(n,v)});break;case"CopyLocalImage":const{imageRef:b}=a;le(b,"The imageRef must be defined.");for(const y of u(this,qn).values())for(const[,A]of y.objs)if((A==null?void 0:A.ref)===b)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,a,h])=>{var f;if(this.destroyed)return;const d=u(this,qn).get(i);if(!d.objs.has(n)){if(d._intentStates.size===0){(f=h==null?void 0:h.bitmap)==null||f.close();return}switch(a){case"Image":d.objs.resolve(n,h),(h==null?void 0:h.dataLen)>my&&(d._maybeCleanupAfterRender=!0);break;case"Pattern":d.objs.resolve(n,h);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n,i;this.annotationStorage.size<=0&&Et("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:(i=(n=this._fullReader)==null?void 0:n.filename)!=null?i:null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=u(this,ja).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&u(this,Ua).set(a.refStr,t);const h=new GA(e,a,this,this._params.pdfBug);return u(this,qn).set(e,h),h});return u(this,ja).set(e,i),i}getPageIndex(t){return zm(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return _(this,dr,rf).call(this,"GetFieldObjects")}hasJSActions(){return _(this,dr,rf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return _(this,dr,rf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return _(this,dr,rf).call(this,"GetOptionalContentConfig").then(e=>new hA(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=u(this,Ti).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var a,h,d,f;return{info:i[0],metadata:i[1]?new lA(i[1]):null,contentDispositionFilename:(h=(a=this._fullReader)==null?void 0:a.filename)!=null?h:null,contentLength:(f=(d=this._fullReader)==null?void 0:d.contentLength)!=null?f:null}});return u(this,Ti).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(t=!1){return kt(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(const e of u(this,qn).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),u(this,Ti).clear(),this.filterFactory.destroy(!0),Nn.cleanup()}})}cachedPageNumber(t){var n;if(!zm(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return(n=u(this,Ua).get(e))!=null?n:null}}Ti=new WeakMap,qn=new WeakMap,ja=new WeakMap,Ua=new WeakMap,Kn=new WeakMap,dr=new WeakSet,rf=function(t,e=null){const n=u(this,Ti).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return u(this,Ti).set(t,i),i};const ru=Symbol("INITIAL_DATA");class Vm{constructor(){fc.add(this);wn.set(this,Object.create(null))}get(t,e=null){if(e){const i=_(this,fc,Rv).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=u(this,wn)[t];if(!n||n.data===ru)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=u(this,wn)[t];return!!e&&e.data!==ru}resolve(t,e=null){const n=_(this,fc,Rv).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in u(this,wn)){const{data:n}=u(this,wn)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}E(this,wn,Object.create(null))}*[Symbol.iterator](){for(const t in u(this,wn)){const{data:e}=u(this,wn)[t];e!==ru&&(yield[t,e])}}}wn=new WeakMap,fc=new WeakSet,Rv=function(t){var e;return(e=u(this,wn))[t]||(e[t]=Xe(Xe({},Promise.withResolvers()),{data:ru}))};class WA{constructor(t){ds.set(this,null);E(this,ds,t),this.onContinue=null}get promise(){return u(this,ds).capability.promise}cancel(t=0){u(this,ds).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=u(this,ds).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=u(this,ds);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}ds=new WeakMap;const Ha=class{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:h,pageIndex:d,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:v=!1,pageColors:b=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=h,this._pageIndex=d,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=v,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new WA(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var d,f;if(this.cancelled)return;if(this._canvas){if(u(Ha,fr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Ha,fr).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)==null?void 0:d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:a,background:h}=this.params;this.gfx=new Ko(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(Ha,fr).delete(this._canvas),this.callback(t||new Yf(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return kt(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Ha,fr).delete(this._canvas),this.callback())))})}};let hp=Ha;fr=new WeakMap,fr.set(hp,new WeakSet);const YA="4.3.136",XA="0cec64437";function $m(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function Jo(o){return Math.max(0,Math.min(255,255*o))}class Wm{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Jo(t),[t,t,t]}static G_HTML([t]){const e=$m(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Jo)}static RGB_HTML(t){return`#${t.map($m).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[Jo(1-Math.min(1,t+i)),Jo(1-Math.min(1,n+i)),Jo(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,a=1-e,h=1-n,d=Math.min(i,a,h);return["CMYK",i,a,h,d]}}class Ym{static setupStorage(t,e,n,i,a){const h=i.getValue(e,{value:null});switch(n.name){case"textarea":if(h.value!==null&&(t.textContent=h.value),a==="print")break;t.addEventListener("input",d=>{i.setValue(e,{value:d.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(h.value===n.attributes.xfaOn?t.setAttribute("checked",!0):h.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",d=>{i.setValue(e,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(h.value!==null&&t.setAttribute("value",h.value),a==="print")break;t.addEventListener("input",d=>{i.setValue(e,{value:d.target.value})})}break;case"select":if(h.value!==null){t.setAttribute("value",h.value);for(const d of n.children)d.attributes.value===h.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}t.addEventListener("input",d=>{const f=d.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;i.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:a}){const{attributes:h}=e,d=t instanceof HTMLAnchorElement;h.type==="radio"&&(h.name=`${h.name}-${i}`);for(const[f,p]of Object.entries(h))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!d||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}d&&a.addLinkAttributes(t,h.href,h.newWindow),n&&h.dataId&&this.setupStorage(t,h.dataId,e,n)}static render(t){var v,b;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,a=t.intent||"display",h=document.createElement(i.name);i.attributes&&this.setAttributes({html:h,element:i,intent:a,linkService:n});const d=a!=="richText",f=t.div;if(f.append(h),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=y}d&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(i.children.length===0){if(i.value){const y=document.createTextNode(i.value);h.append(y),d&&Qo.shouldBuildText(i.name)&&p.push(y)}return{textDivs:p}}const g=[[i,-1,h]];for(;g.length>0;){const[y,A,S]=g.at(-1);if(A+1===y.children.length){g.pop();continue}const C=y.children[++g.at(-1)[1]];if(C===null)continue;const{name:T}=C;if(T==="#text"){const k=document.createTextNode(C.value);p.push(k),S.append(k);continue}const L=((v=C==null?void 0:C.attributes)==null?void 0:v.xmlns)?document.createElementNS(C.attributes.xmlns,T):document.createElement(T);if(S.append(L),C.attributes&&this.setAttributes({html:L,element:C,storage:e,intent:a,linkService:n}),((b=C.children)==null?void 0:b.length)>0)g.push([C,-1,L]);else if(C.value){const k=document.createTextNode(C.value);d&&Qo.shouldBuildText(T)&&p.push(k),L.append(k)}}for(const y of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const tl=1e3,qA=9,Ds=new WeakSet;function pi(o){return{width:o[2]-o[0],height:o[3]-o[1]}}class KA{static create(t){switch(t.data.annotationType){case oe.LINK:return new Xm(t);case oe.TEXT:return new ZA(t);case oe.WIDGET:switch(t.data.fieldType){case"Tx":return new QA(t);case"Btn":return t.data.radioButton?new qm(t):t.data.checkBox?new tE(t):new eE(t);case"Ch":return new nE(t);case"Sig":return new JA(t)}return new Ms(t);case oe.POPUP:return new up(t);case oe.FREETEXT:return new Km(t);case oe.LINE:return new sE(t);case oe.SQUARE:return new rE(t);case oe.CIRCLE:return new aE(t);case oe.POLYLINE:return new Zm(t);case oe.CARET:return new lE(t);case oe.INK:return new Qm(t);case oe.POLYGON:return new oE(t);case oe.HIGHLIGHT:return new cE(t);case oe.UNDERLINE:return new hE(t);case oe.SQUIGGLY:return new uE(t);case oe.STRIKEOUT:return new dE(t);case oe.STAMP:return new Jm(t);case oe.FILEATTACHMENT:return new fE(t);default:return new se(t)}}}const Pp=class{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){pc.add(this);pr.set(this,null);za.set(this,!1);Ga.set(this,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!((t==null?void 0:t.str)||(e==null?void 0:e.str)||(n==null?void 0:n.str))}get hasPopupData(){return Pp._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;u(this,pr)||E(this,pr,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&_(this,pc,Lv).call(this,e),(n=u(this,Ga))==null||n.popup.updateEdited(t)}resetEdited(){var t;!u(this,pr)||(_(this,pc,Lv).call(this,u(this,pr).rect),(t=u(this,Ga))==null||t.popup.resetEdited(),E(this,pr,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof Ms||(a.tabIndex=tl);const{style:h}=a;if(h.zIndex=this.parent.zIndex++,e.popupRef&&a.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof up){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,a),a}const{width:d,height:f}=pi(e.rect);if(!t&&e.borderStyle.width>0){h.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(S>0||C>0){const L=`calc(${S}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;h.borderRadius=L}else if(this instanceof qm){const L=`calc(${d}px * var(--scale-factor)) / calc(${f}px * var(--scale-factor))`;h.borderRadius=L}switch(e.borderStyle.style){case zo.SOLID:h.borderStyle="solid";break;case zo.DASHED:h.borderStyle="dashed";break;case zo.BEVELED:Et("Unimplemented border style: beveled");break;case zo.INSET:Et("Unimplemented border style: inset");break;case zo.UNDERLINE:h.borderBottomStyle="solid";break;default:break}const T=e.borderColor||null;T?(E(this,za,!0),h.borderColor=et.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):h.borderWidth=0}const p=et.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:v,pageX:b,pageY:y}=i.rawDims;h.left=`${100*(p[0]-b)/g}%`,h.top=`${100*(p[1]-y)/v}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(h.width=`${100*d/g}%`,h.height=`${100*f/v}%`):this.setRotation(A,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:a,height:h}=pi(this.data.rect);let d,f;t%180==0?(d=100*a/n,f=100*h/i):(d=100*h/n,f=100*a/i),e.style.width=`${d}%`,e.style.height=`${f}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const a=i.detail[e],h=a[0],d=a.slice(1);i.target.style[n]=Wm[`${h}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[n]:Wm[`${h}_rgb`](d)})};return Dt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2==1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const a=t[i]||n[i];a==null||a(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,a]of Object.entries(e)){const h=n[i];if(h){const d={detail:{[i]:a},target:t};h(d),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,a]=this.data.rect;if(t.length===1){const[,{x:S,y:C},{x:T,y:L}]=t[0];if(i===S&&a===C&&e===T&&n===L)return}const{style:h}=this.container;let d;if(u(this,za)){const{borderColor:S,borderWidth:C}=h;h.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const f=i-e,p=a-n,{svgFactory:g}=this,v=g.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const b=g.createElement("defs");v.append(b);const y=g.createElement("clipPath"),A=`clippath_${this.data.id}`;y.setAttribute("id",A),y.setAttribute("clipPathUnits","objectBoundingBox"),b.append(y);for(const[,{x:S,y:C},{x:T,y:L}]of t){const k=g.createElement("rect"),I=(T-e)/f,O=(a-C)/p,N=(S-T)/f,U=(C-L)/p;k.setAttribute("x",I),k.setAttribute("y",O),k.setAttribute("width",N),k.setAttribute("height",U),y.append(k),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${O}" width="${N}" height="${U}"/>`)}u(this,za)&&(d.push("</g></svg>')"),h.backgroundImage=d.join("")),this.container.append(v),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const n=E(this,Ga,new up({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){Ut("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:a,id:h,exportValues:d}of i){if(a===-1||h===e)continue;const f=typeof d=="string"?d:null,p=document.querySelector(`[data-element-id="${h}"]`);if(p&&!Ds.has(p)){Et(`_getElementsByName - element not allowed: ${h}`);continue}n.push({id:h,exportValue:f,domElement:p})}return n}for(const i of document.getElementsByName(t)){const{exportValue:a}=i,h=i.getAttribute("data-element-id");h!==e&&(!Ds.has(i)||n.push({id:h,exportValue:a,domElement:i}))}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};let se=Pp;pr=new WeakMap,za=new WeakMap,Ga=new WeakMap,pc=new WeakSet,Lv=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:h,pageX:d,pageY:f}}}}=this;n==null||n.splice(0,4,...t);const{width:p,height:g}=pi(t);e.left=`${100*(t[0]-d)/a}%`,e.top=`${100*(h-t[3]+f)/h}%`,i===0?(e.width=`${100*p/a}%`,e.height=`${100*g/h}%`):this.setRotation(i)};class Xm extends se{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!(e==null?void 0:e.ignoreBorder),createQuadrilaterals:!0});Pi.add(this);sd.add(this);rd.add(this);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action),i=!0):t.attachment?(_(this,sd,Tw).call(this,n,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(_(this,rd,Pw).call(this,n,t.setOCGState),i=!0):t.dest?(this._bindLink(n,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&_(this,Pi,ko).call(this)}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),_(this,Pi,ko).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const a=n.get(i);!a||(t[a]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),_(this,Pi,ko).call(this)}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),_(this,Pi,ko).call(this),!this._fieldObjects){Et('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{var g;n==null||n();const{fields:i,refs:a,include:h}=e,d=[];if(i.length!==0||a.length!==0){const v=new Set(a);for(const b of i){const y=this._fieldObjects[b]||[];for(const{id:A}of y)v.add(A)}for(const b of Object.values(this._fieldObjects))for(const y of b)v.has(y.id)===h&&d.push(y)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const f=this.annotationStorage,p=[];for(const v of d){const{id:b}=v;switch(p.push(b),v.type){case"text":{const A=v.defaultValue||"";f.setValue(b,{value:A});break}case"checkbox":case"radiobutton":{const A=v.defaultValue===v.exportValues;f.setValue(b,{value:A});break}case"combobox":case"listbox":{const A=v.defaultValue||"";f.setValue(b,{value:A});break}default:continue}const y=document.querySelector(`[data-element-id="${b}"]`);if(y){if(!Ds.has(y)){Et(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}Pi=new WeakSet,ko=function(){this.container.setAttribute("data-internal-link","")},sd=new WeakSet,Tw=function(t,e,n=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(e.content,e.filename,n),!1},_(this,Pi,ko).call(this)},rd=new WeakSet,Pw=function(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),_(this,Pi,ko).call(this)};class ZA extends se{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ms extends se{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ue.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,a){n.includes("mouse")?t.addEventListener(n,h=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(h),shift:h.shiftKey,modifier:this._getKeyModifier(h)}})}):t.addEventListener(n,h=>{var d;if(n==="blur"){if(!e.focused||!h.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}!a||(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(h)}})})}_setEventListeners(t,e,n,i){var a,h,d;for(const[f,p]of n)(p==="Action"||((a=this.data.actions)==null?void 0:a[p]))&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,i),p==="Focus"&&!((h=this.data.actions)==null?void 0:h.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((d=this.data.actions)==null?void 0:d.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":et.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||qA,a=t.style;let h;const d=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-d),g=Math.round(p/(Hh*i))||1,v=p/g;h=Math.min(i,f(v/Hh))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-d);h=Math.min(i,f(p/Hh))}a.fontSize=`calc(${h}px * var(--scale-factor))`,a.color=et.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class QA extends Ms{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const a=this.annotationStorage;for(const h of this._getElementsByName(t.name,t.id))h.domElement&&(h.domElement[e]=n),a.setValue(h.id,{[i]:n})}render(){var i,a;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const h=t.getValue(e,{value:this.data.fieldValue});let d=h.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&d.length>f&&(d=d.slice(0,f));let p=h.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:d,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p!=null?p:d,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",p!=null?p:d),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ds.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=tl,this._setRequired(n,this.data.required),f&&(n.maxLength=f),n.addEventListener("input",b=>{t.setValue(e,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",b=>{var A;const y=(A=this.data.defaultFieldValue)!=null?A:"";n.value=g.userValue=y,g.formattedValue=null});let v=b=>{const{formattedValue:y}=g;y!=null&&(b.target.value=y),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",y=>{var S;if(g.focused)return;const{target:A}=y;g.userValue&&(A.value=g.userValue),g.lastCommittedValue=A.value,g.commitKey=1,((S=this.data.actions)==null?void 0:S.Focus)||(g.focused=!0)}),n.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const A={value(S){var C;g.userValue=(C=S.detail.value)!=null?C:"",t.setValue(e,{value:g.userValue.toString()}),S.target.value=g.userValue},formattedValue(S){const{formattedValue:C}=S.detail;g.formattedValue=C,C!=null&&S.target!==document.activeElement&&(S.target.value=C),t.setValue(e,{formattedValue:C})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var k;const{charLimit:C}=S.detail,{target:T}=S;if(C===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",C);let L=g.userValue;!L||L.length<=C||(L=L.slice(0,C),T.value=g.userValue=L,t.setValue(e,{value:L}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(A,y)}),n.addEventListener("keydown",y=>{var C;g.commitKey=1;let A=-1;if(y.key==="Escape"?A=0:y.key==="Enter"&&!this.data.multiLine?A=2:y.key==="Tab"&&(g.commitKey=3),A===-1)return;const{value:S}=y.target;g.lastCommittedValue!==S&&(g.lastCommittedValue=S,g.userValue=S,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:A,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const b=v;v=null,n.addEventListener("blur",y=>{var S,C;if(!g.focused||!y.relatedTarget)return;((S=this.data.actions)==null?void 0:S.Blur)||(g.focused=!1);const{value:A}=y.target;g.userValue=A,g.lastCommittedValue!==A&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:g.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),b(y)}),((a=this.data.actions)==null?void 0:a.Keystroke)&&n.addEventListener("beforeinput",y=>{var O;g.lastCommittedValue=null;const{data:A,target:S}=y,{value:C,selectionStart:T,selectionEnd:L}=S;let k=T,I=L;switch(y.inputType){case"deleteWordBackward":{const N=C.substring(0,T).match(/\w*[^\w]*$/);N&&(k-=N[0].length);break}case"deleteWordForward":{const N=C.substring(T).match(/^[^\w]*\w*/);N&&(I+=N[0].length);break}case"deleteContentBackward":T===L&&(k-=1);break;case"deleteContentForward":T===L&&(I+=1);break}y.preventDefault(),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:A||"",willCommit:!1,selStart:k,selEnd:I}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(v&&n.addEventListener("blur",v),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/f;n.classList.add("comb"),n.style.letterSpacing=`calc(${y}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class JA extends Ms{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class tE extends Ms{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Ds.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=tl,a.addEventListener("change",h=>{const{name:d,checked:f}=h.target;for(const p of this._getElementsByName(d,n)){const g=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(n,{value:f})}),a.addEventListener("resetform",h=>{const d=e.defaultFieldValue||"Off";h.target.checked=d===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",h=>{const d={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(n,{value:f.target.checked})}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class qm extends Ms{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const h of this._getElementsByName(e.fieldName,n))t.setValue(h.id,{value:!1});const a=document.createElement("input");if(Ds.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=tl,a.addEventListener("change",h=>{const{name:d,checked:f}=h.target;for(const p of this._getElementsByName(d,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:f})}),a.addEventListener("resetform",h=>{const d=e.defaultFieldValue;h.target.checked=d!=null&&d===e.buttonValue}),this.enableScripting&&this.hasJSActions){const h=e.buttonValue;a.addEventListener("updatefromsandbox",d=>{const f={value:p=>{const g=h===p.detail.value;for(const v of this._getElementsByName(p.target.name)){const b=g&&v.id===n;v.domElement&&(v.domElement.checked=b),t.setValue(v.id,{value:b})}}};this._dispatchEventFromSandbox(f,d)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class eE extends Xm{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class nE extends Ms{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Ds.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=tl;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",g=>{const v=this.data.defaultFieldValue;for(const b of i.options)b.selected=b.value===v});for(const g of this.data.options){const v=document.createElement("option");v.textContent=g.displayValue,v.value=g.exportValue,n.value.includes(g.exportValue)&&(v.setAttribute("selected",!0),a=!1),i.append(v)}let h=null;if(a){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),i.prepend(g),h=()=>{g.remove(),i.removeEventListener("input",h),h=null},i.addEventListener("input",h)}const d=g=>{const v=g?"value":"textContent",{options:b,multiple:y}=i;return y?Array.prototype.filter.call(b,A=>A.selected).map(A=>A[v]):b.selectedIndex===-1?null:b[b.selectedIndex][v]};let f=d(!1);const p=g=>{const v=g.target.options;return Array.prototype.map.call(v,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",g=>{const v={value(b){h==null||h();const y=b.detail.value,A=new Set(Array.isArray(y)?y:[y]);for(const S of i.options)S.selected=A.has(S.value);t.setValue(e,{value:d(!0)}),f=d(!1)},multipleSelection(b){i.multiple=!0},remove(b){const y=i.options,A=b.detail.remove;y[A].selected=!1,i.remove(A),y.length>0&&Array.prototype.findIndex.call(y,C=>C.selected)===-1&&(y[0].selected=!0),t.setValue(e,{value:d(!0),items:p(b)}),f=d(!1)},clear(b){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),f=d(!1)},insert(b){const{index:y,displayValue:A,exportValue:S}=b.detail.insert,C=i.children[y],T=document.createElement("option");T.textContent=A,T.value=S,C?C.before(T):i.append(T),t.setValue(e,{value:d(!0),items:p(b)}),f=d(!1)},items(b){const{items:y}=b.detail;for(;i.length!==0;)i.remove(0);for(const A of y){const{displayValue:S,exportValue:C}=A,T=document.createElement("option");T.textContent=S,T.value=C,i.append(T)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:d(!0),items:p(b)}),f=d(!1)},indices(b){const y=new Set(b.detail.indices);for(const A of b.target.options)A.selected=y.has(A.index);t.setValue(e,{value:d(!0)}),f=d(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(v,g)}),i.addEventListener("input",g=>{var y;const v=d(!0),b=d(!1);t.setValue(e,{value:v}),g.preventDefault(),(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:b,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):i.addEventListener("input",function(g){t.setValue(e,{value:d(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class up extends se{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:se._hasPopupData(e)});this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new iE({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${um}${n}`).join(",")),this.container}}class iE{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:a,contentsObj:h,richText:d,parent:f,rect:p,parentRect:g,open:v}){Ya.add(this);yc.add(this);ld.add(this);cd.add(this);hd.add(this);ud.add(this);Xa.add(this);qa.add(this);Ac.add(this);Va.set(this,_(this,hd,kw).bind(this));ad.set(this,_(this,Ac,Iv).bind(this));od.set(this,_(this,qa,Gp).bind(this));$a.set(this,_(this,Xa,zp).bind(this));gr.set(this,null);Jt.set(this,null);Ri.set(this,null);mr.set(this,null);gc.set(this,null);mc.set(this,null);Wa.set(this,null);Li.set(this,!1);Sn.set(this,null);ki.set(this,null);vc.set(this,null);Ii.set(this,null);bc.set(this,null);vr.set(this,null);br.set(this,!1);var b;E(this,Jt,t),E(this,bc,i),E(this,Ri,h),E(this,Ii,d),E(this,mc,f),E(this,gr,e),E(this,vc,p),E(this,Wa,g),E(this,gc,n),E(this,mr,vm.toDateObject(a)),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",u(this,$a)),y.addEventListener("mouseenter",u(this,od)),y.addEventListener("mouseleave",u(this,ad)),y.classList.add("popupTriggerArea");for(const y of n)(b=y.container)==null||b.addEventListener("keydown",u(this,Va));u(this,Jt).hidden=!0,v&&_(this,Xa,zp).call(this)}render(){if(u(this,Sn))return;const t=E(this,Sn,document.createElement("div"));if(t.className="popup",u(this,gr)){const a=t.style.outlineColor=et.makeHexColor(...u(this,gr));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`;else{const h=.7;t.style.backgroundColor=et.makeHexColor(...u(this,gr).map(d=>Math.floor(h*(255-d)+d)))}}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=u(this,bc),t.append(e),u(this,mr)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),a.setAttribute("data-l10n-args",JSON.stringify({date:u(this,mr).toLocaleDateString(),time:u(this,mr).toLocaleTimeString()})),e.append(a)}const i=u(this,Ya,Hp);if(i)Ym.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(u(this,Ri));t.append(a)}u(this,Jt).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let a=0,h=i.length;a<h;++a){const d=i[a];n.append(document.createTextNode(d)),a<h-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;u(this,vr)||E(this,vr,{contentsObj:u(this,Ri),richText:u(this,Ii)}),t&&E(this,ki,null),e&&(E(this,Ii,_(this,cd,Lw).call(this,e)),E(this,Ri,null)),(n=u(this,Sn))==null||n.remove(),E(this,Sn,null)}resetEdited(){var t;!u(this,vr)||({contentsObj:this.Ri,richText:this.Ii}=u(this,vr),E(this,vr,null),(t=u(this,Sn))==null||t.remove(),E(this,Sn,null),E(this,ki,null))}forceHide(){E(this,br,this.isVisible),!!u(this,br)&&(u(this,Jt).hidden=!0)}maybeShow(){!u(this,br)||(u(this,Sn)||_(this,qa,Gp).call(this),E(this,br,!1),u(this,Jt).hidden=!1)}get isVisible(){return u(this,Jt).hidden===!1}}Va=new WeakMap,ad=new WeakMap,od=new WeakMap,$a=new WeakMap,gr=new WeakMap,Jt=new WeakMap,Ri=new WeakMap,mr=new WeakMap,gc=new WeakMap,mc=new WeakMap,Wa=new WeakMap,Li=new WeakMap,Sn=new WeakMap,ki=new WeakMap,vc=new WeakMap,Ii=new WeakMap,bc=new WeakMap,vr=new WeakMap,br=new WeakMap,Ya=new WeakSet,Hp=function(){const t=u(this,Ii),e=u(this,Ri);return(t==null?void 0:t.str)&&(!(e==null?void 0:e.str)||e.str===t.str)&&u(this,Ii).html||null},yc=new WeakSet,kv=function(){var t,e,n;return((n=(e=(t=u(this,Ya,Hp))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},ld=new WeakSet,Rw=function(){var t,e,n;return((n=(e=(t=u(this,Ya,Hp))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},cd=new WeakSet,Lw=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:u(this,ld,Rw),fontSize:u(this,yc,kv)?`calc(${u(this,yc,kv)}px * var(--scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:i});return n},hd=new WeakSet,kw=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&u(this,Li))&&_(this,Xa,zp).call(this)},ud=new WeakSet,Iw=function(){if(u(this,ki)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:a}}}=u(this,mc);let h=!!u(this,Wa),d=h?u(this,Wa):u(this,vc);for(const A of u(this,gc))if(!d||et.intersect(A.data.rect,d)!==null){d=A.data.rect,h=!0;break}const f=et.normalizeRect([d[0],t[3]-d[1]+t[1],d[2],t[3]-d[3]+t[1]]),p=5,g=h?d[2]-d[0]+p:0,v=f[0]+g,b=f[1];E(this,ki,[100*(v-i)/e,100*(b-a)/n]);const{style:y}=u(this,Jt);y.left=`${u(this,ki)[0]}%`,y.top=`${u(this,ki)[1]}%`},Xa=new WeakSet,zp=function(){E(this,Li,!u(this,Li)),u(this,Li)?(_(this,qa,Gp).call(this),u(this,Jt).addEventListener("click",u(this,$a)),u(this,Jt).addEventListener("keydown",u(this,Va))):(_(this,Ac,Iv).call(this),u(this,Jt).removeEventListener("click",u(this,$a)),u(this,Jt).removeEventListener("keydown",u(this,Va)))},qa=new WeakSet,Gp=function(){u(this,Sn)||this.render(),this.isVisible?u(this,Li)&&u(this,Jt).classList.add("focused"):(_(this,ud,Iw).call(this),u(this,Jt).hidden=!1,u(this,Jt).style.zIndex=parseInt(u(this,Jt).style.zIndex)+1e3)},Ac=new WeakSet,Iv=function(){u(this,Jt).classList.remove("focused"),!(u(this,Li)||!this.isVisible)&&(u(this,Jt).hidden=!0,u(this,Jt).style.zIndex=parseInt(u(this,Jt).style.zIndex)-1e3)};class Km extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Rt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class sE extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});Ec.set(this,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:n}=pi(t.rect),i=this.svgFactory.create(e,n,!0),a=E(this,Ec,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Ec)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ec=new WeakMap;class rE extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_c.set(this,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:n}=pi(t.rect),i=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,h=E(this,_c,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",a/2),h.setAttribute("y",a/2),h.setAttribute("width",e-a),h.setAttribute("height",n-a),h.setAttribute("stroke-width",a||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),i.append(h),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,_c)}addHighlightArea(){this.container.classList.add("highlightArea")}}_c=new WeakMap;class aE extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});wc.set(this,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:n}=pi(t.rect),i=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,h=E(this,wc,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",e/2),h.setAttribute("cy",n/2),h.setAttribute("rx",e/2-a/2),h.setAttribute("ry",n/2-a/2),h.setAttribute("stroke-width",a||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),i.append(h),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,wc)}addHighlightArea(){this.container.classList.add("highlightArea")}}wc=new WeakMap;class Zm extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});Sc.set(this,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:n}=pi(t.rect),i=this.svgFactory.create(e,n,!0);let a=[];for(const d of t.vertices){const f=d.x-t.rect[0],p=t.rect[3]-d.y;a.push(f+","+p)}a=a.join(" ");const h=E(this,Sc,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",a),h.setAttribute("stroke-width",t.borderStyle.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),i.append(h),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Sc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sc=new WeakMap;class oE extends Zm{constructor(t){super(t);this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class lE extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Qm extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});xc.set(this,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Rt.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:n}=pi(t.rect),i=this.svgFactory.create(e,n,!0);for(const a of t.inkLists){let h=[];for(const f of a){const p=f.x-t.rect[0],g=t.rect[3]-f.y;h.push(`${p},${g}`)}h=h.join(" ");const d=this.svgFactory.createElement(this.svgElementName);u(this,xc).push(d),d.setAttribute("points",h),d.setAttribute("stroke-width",t.borderStyle.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),i.append(d)}return this.container.append(i),this.container}getElementsToTriggerPopup(){return u(this,xc)}addHighlightArea(){this.container.classList.add("highlightArea")}}xc=new WeakMap;class cE extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class hE extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class uE extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class dE extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Jm extends se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class fE extends se{constructor(t){super(t,{isRenderable:!0});Tc.add(this);Cc.set(this,null);var n;const{file:e}=this.data;this.filename=e.filename,this.content=e.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",Xe({source:this},e))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",_(this,Tc,Dv).bind(this)),E(this,Cc,n);const{isMac:i}=Ue.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&_(this,Tc,Dv).call(this)}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return u(this,Cc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cc=new WeakMap,Tc=new WeakSet,Dv=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};class pE{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:h}){dd.add(this);Rc.add(this);Pc.set(this,null);yr.set(this,null);Ka.set(this,new Map);this.div=t,E(this,Pc,e),E(this,yr,n),this.page=a,this.viewport=h,this.zIndex=0,this._annotationEditorUIManager=i}render(t){return kt(this,null,function*(){var h;const{annotations:e}=t,n=this.div;ks(n,this.viewport);const i=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Wf,annotationStorage:t.annotationStorage||new tp,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const d of e){if(d.noHTML)continue;const f=d.annotationType===oe.POPUP;if(f){const v=i.get(d.id);if(!v)continue;a.elements=v}else{const{width:v,height:b}=pi(d.rect);if(v<=0||b<=0)continue}a.data=d;const p=KA.create(a);if(!p.isRenderable)continue;if(!f&&d.popupRef){const v=i.get(d.popupRef);v?v.push(p):i.set(d.popupRef,[p])}const g=p.render();d.hidden&&(g.style.visibility="hidden"),_(this,dd,Dw).call(this,g,d.id),p.annotationEditorType>0&&(u(this,Ka).set(p.data.id,p),(h=this._annotationEditorUIManager)==null||h.renderAnnotationElement(p))}_(this,Rc,Mv).call(this)})}update({viewport:t}){const e=this.div;this.viewport=t,ks(e,{rotation:t.rotation}),_(this,Rc,Mv).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Ka).values())}getEditableAnnotation(t){return u(this,Ka).get(t)}}Pc=new WeakMap,yr=new WeakMap,Ka=new WeakMap,dd=new WeakSet,Dw=function(t,e){var i;const n=t.firstChild||t;n.id=`${um}${e}`,this.div.append(t),(i=u(this,Pc))==null||i.moveElementInDOM(this.div,t,n,!1)},Rc=new WeakSet,Mv=function(){if(!u(this,yr))return;const t=this.div;for(const[e,n]of u(this,yr)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):i.append(n)}u(this,yr).clear()};const au=/\r\n?|\n/g,Nt=class extends Mt{constructor(t){super(Xe(Xe({},t),{name:"freeTextEditor"}));fd.add(this);pd.add(this);gd.add(this);Qa.add(this);to.add(this);md.add(this);vd.add(this);Lc.set(this,this.editorDivBlur.bind(this));kc.set(this,this.editorDivFocus.bind(this));Ic.set(this,this.editorDivInput.bind(this));Dc.set(this,this.editorDivKeydown.bind(this));Mc.set(this,this.editorDivPaste.bind(this));xn.set(this,void 0);en.set(this,"");Oc.set(this,`${this.id}-editor`);nn.set(this,void 0);Za.set(this,null);E(this,xn,t.color||Nt._defaultColor||Mt._defaultLineColor),E(this,nn,t.fontSize||Nt._defaultFontSize)}static get _keyboardManager(){const t=Nt.prototype,e=a=>a.isEmpty(),n=Ki.TRANSLATE_SMALL,i=Ki.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new Wo([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}static initialize(t,e){Mt.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case gt.FREETEXT_SIZE:Nt._defaultFontSize=e;break;case gt.FREETEXT_COLOR:Nt._defaultColor=e;break}}updateParams(t,e){switch(t){case gt.FREETEXT_SIZE:_(this,fd,Mw).call(this,e);break;case gt.FREETEXT_COLOR:_(this,pd,Ow).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[gt.FREETEXT_SIZE,Nt._defaultFontSize],[gt.FREETEXT_COLOR,Nt._defaultColor||Mt._defaultLineColor]]}get propertiesToUpdate(){return[[gt.FREETEXT_SIZE,u(this,nn)],[gt.FREETEXT_COLOR,u(this,xn)]]}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Nt._internalPadding*t,-(Nt._internalPadding+u(this,nn))*t]}rebuild(){!this.parent||(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(Rt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",u(this,Dc)),this.editorDiv.addEventListener("focus",u(this,kc)),this.editorDiv.addEventListener("blur",u(this,Lc)),this.editorDiv.addEventListener("input",u(this,Ic)),this.editorDiv.addEventListener("paste",u(this,Mc)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Oc)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",u(this,Dc)),this.editorDiv.removeEventListener("focus",u(this,kc)),this.editorDiv.removeEventListener("blur",u(this,Lc)),this.editorDiv.removeEventListener("input",u(this,Ic)),this.editorDiv.removeEventListener("paste",u(this,Mc)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){!this._focusEventsAllowed||(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),((t=this._initialOptions)==null?void 0:t.isCentered)&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,en),e=E(this,en,_(this,gd,Fw).call(this).trimEnd());if(t===e)return;const n=i=>{if(E(this,en,i),!i){this.remove();return}_(this,to,Wp).call(this),this._uiManager.rebuild(this),_(this,Qa,Vp).call(this)};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),_(this,Qa,Vp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Nt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Oc)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Mt._l10nPromise.get("pdfjs-free-text-default-content").then(i=>{var a;return(a=this.editorDiv)==null?void 0:a.setAttribute("default-content",i)}),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${u(this,nn)}px * var(--scale-factor))`,n.color=u(this,xn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Qh(this,this.div,["dblclick","keydown"]),this.width){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:h}=u(this,Za);let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[p,g]=this.pageDimensions,[v,b]=this.pageTranslation;let y,A;switch(this.rotation){case 0:y=t+(h[0]-v)/p,A=e+this.height-(h[1]-b)/g;break;case 90:y=t+(h[0]-v)/p,A=e-(h[1]-b)/g,[d,f]=[f,-d];break;case 180:y=t-this.width+(h[0]-v)/p,A=e-(h[1]-b)/g,[d,f]=[-d,-f];break;case 270:y=t+(h[0]-v-this.height*g)/p,A=e+(h[1]-b-this.width*p)/g,[d,f]=[-f,d];break}this.setAt(y*i,A*a,d,f)}else this.setAt(t*i,e*a,this.width*i,this.height*a);_(this,to,Wp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const i=_(Nt,Fc,Ov).call(Nt,e.getData("text")||"").replaceAll(au,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const h=a.getRangeAt(0);if(!i.includes(`
`)){h.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:d,startOffset:f}=h,p=[],g=[];if(d.nodeType===Node.TEXT_NODE){const y=d.parentElement;if(g.push(d.nodeValue.slice(f).replaceAll(au,"")),y!==this.editorDiv){let A=p;for(const S of this.editorDiv.childNodes){if(S===y){A=g;continue}A.push(_(Nt,Ja,$p).call(Nt,S))}}p.push(d.nodeValue.slice(0,f).replaceAll(au,""))}else if(d===this.editorDiv){let y=p,A=0;for(const S of this.editorDiv.childNodes)A++===f&&(y=g),y.push(_(Nt,Ja,$p).call(Nt,S))}E(this,en,`${p.join(`
`)}${i}${g.join(`
`)}`),_(this,to,Wp).call(this);const v=new Range;let b=p.reduce((y,A)=>y+A.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const A=y.nodeValue.length;if(b<=A){v.setStart(y,b),v.setEnd(y,b);break}b-=A}a.removeAllRanges(),a.addRange(v)}get contentDiv(){return this.editorDiv}static deserialize(t,e,n){let i=null;if(t instanceof Km){const{data:{defaultAppearanceData:{fontSize:h,fontColor:d},rect:f,rotation:p,id:g},textContent:v,textPosition:b,parent:{page:{pageNumber:y}}}=t;if(!v||v.length===0)return null;i=t={annotationType:Rt.FREETEXT,color:Array.from(d),fontSize:h,value:v.join(`
`),position:b,pageIndex:y-1,rect:f.slice(0),rotation:p,id:g,deleted:!1}}const a=super.deserialize(t,e,n);return E(a,nn,t.fontSize),E(a,xn,et.makeHexColor(...t.color)),E(a,en,_(Nt,Fc,Ov).call(Nt,t.value)),a.annotationElementId=t.id||null,E(a,Za,i),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const e=Nt._internalPadding*this.parentScale,n=this.getRect(e,e),i=Mt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,xn)),a={annotationType:Rt.FREETEXT,color:i,fontSize:u(this,nn),value:_(this,md,Nw).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!_(this,vd,Bw).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:n}=e;n.fontSize=`calc(${u(this,nn)}px * var(--scale-factor))`,n.color=u(this,xn),e.replaceChildren();for(const a of u(this,en).split(`
`)){const h=document.createElement("div");h.append(a?document.createTextNode(a):document.createElement("br")),e.append(h)}const i=Nt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:u(this,en)}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};let Bn=Nt;Lc=new WeakMap,kc=new WeakMap,Ic=new WeakMap,Dc=new WeakMap,Mc=new WeakMap,xn=new WeakMap,en=new WeakMap,Oc=new WeakMap,nn=new WeakMap,Za=new WeakMap,fd=new WeakSet,Mw=function(t){const e=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-u(this,nn))*this.parentScale),E(this,nn,i),_(this,Qa,Vp).call(this)},n=u(this,nn);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},pd=new WeakSet,Ow=function(t){const e=i=>{E(this,xn,this.editorDiv.style.color=i)},n=u(this,xn);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},gd=new WeakSet,Fw=function(){const t=[];this.editorDiv.normalize();for(const e of this.editorDiv.childNodes)t.push(_(Nt,Ja,$p).call(Nt,e));return t.join(`
`)},Qa=new WeakSet,Vp=function(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,h=a.style.display,d=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=h,a.classList.toggle("hidden",d)}this.rotation%180==this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()},Ja=new WeakSet,$p=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(au,"")},to=new WeakSet,Wp=function(){if(this.editorDiv.replaceChildren(),!!u(this,en))for(const t of u(this,en).split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}},md=new WeakSet,Nw=function(){return u(this,en).replaceAll("\xA0"," ")},Fc=new WeakSet,Ov=function(t){return t.replaceAll(" ","\xA0")},vd=new WeakSet,Bw=function(t){const{value:e,fontSize:n,color:i,pageIndex:a}=u(this,Za);return this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((h,d)=>h!==i[d])||t.pageIndex!==a},Ja.add(Bn),Fc.add(Bn),yt(Bn,"_freeTextDefaultContent",""),yt(Bn,"_internalPadding",0),yt(Bn,"_defaultColor",null),yt(Bn,"_defaultFontSize",10),yt(Bn,"_type","freetext"),yt(Bn,"_editorType",Rt.FREETEXT);class dp{constructor(t,e=0,n=0,i=!0){bd.add(this);eo.add(this);yd.add(this);Ad.add(this);Bc.add(this);Nc.set(this,void 0);fs.set(this,[]);Cn.set(this,[]);let a=Infinity,h=-Infinity,d=Infinity,f=-Infinity;const g=Sh(10,-4);for(const{x:T,y:L,width:k,height:I}of t){const O=Math.floor((T-e)/g)*g,N=Math.ceil((T+k+e)/g)*g,U=Math.floor((L-e)/g)*g,q=Math.ceil((L+I+e)/g)*g,Y=[O,U,q,!0],Z=[N,U,q,!1];u(this,fs).push(Y,Z),a=Math.min(a,O),h=Math.max(h,N),d=Math.min(d,U),f=Math.max(f,q)}const v=h-a+2*n,b=f-d+2*n,y=a-n,A=d-n,S=u(this,fs).at(i?-1:-2),C=[S[0],S[2]];for(const T of u(this,fs)){const[L,k,I]=T;T[0]=(L-y)/v,T[1]=(k-A)/b,T[2]=(I-A)/b}E(this,Nc,{x:y,y:A,width:v,height:b,lastPoint:C})}getOutlines(){u(this,fs).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of u(this,fs))e[3]?(t.push(..._(this,Bc,Fv).call(this,e)),_(this,yd,Uw).call(this,e)):(_(this,Ad,Hw).call(this,e),t.push(..._(this,Bc,Fv).call(this,e)));return _(this,bd,jw).call(this,t)}}Nc=new WeakMap,fs=new WeakMap,Cn=new WeakMap,bd=new WeakSet,jw=function(t){const e=[],n=new Set;for(const h of t){const[d,f,p]=h;e.push([d,f,h],[d,p,h])}e.sort((h,d)=>h[1]-d[1]||h[0]-d[0]);for(let h=0,d=e.length;h<d;h+=2){const f=e[h][2],p=e[h+1][2];f.push(p),p.push(f),n.add(f),n.add(p)}const i=[];let a;for(;n.size>0;){const h=n.values().next().value;let[d,f,p,g,v]=h;n.delete(h);let b=d,y=f;for(a=[d,p],i.push(a);;){let A;if(n.has(g))A=g;else if(n.has(v))A=v;else break;n.delete(A),[d,f,p,g,v]=A,b!==d&&(a.push(b,y,d,y===f?f:p),b=d),y=y===f?p:f}a.push(b,y)}return new gE(i,u(this,Nc))},eo=new WeakSet,Yp=function(t){const e=u(this,Cn);let n=0,i=e.length-1;for(;n<=i;){const a=n+i>>1,h=e[a][0];if(h===t)return a;h<t?n=a+1:i=a-1}return i+1},yd=new WeakSet,Uw=function([,t,e]){const n=_(this,eo,Yp).call(this,t);u(this,Cn).splice(n,0,[t,e])},Ad=new WeakSet,Hw=function([,t,e]){const n=_(this,eo,Yp).call(this,t);for(let i=n;i<u(this,Cn).length;i++){const[a,h]=u(this,Cn)[i];if(a!==t)break;if(a===t&&h===e){u(this,Cn).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,h]=u(this,Cn)[i];if(a!==t)break;if(a===t&&h===e){u(this,Cn).splice(i,1);return}}},Bc=new WeakSet,Fv=function(t){const[e,n,i]=t,a=[[e,n,i]],h=_(this,eo,Yp).call(this,i);for(let d=0;d<h;d++){const[f,p]=u(this,Cn)[d];for(let g=0,v=a.length;g<v;g++){const[,b,y]=a[g];if(!(p<=b||y<=f)){if(b>=f){if(y>p)a[g][1]=p;else{if(v===1)return[];a.splice(g,1),g--,v--}continue}a[g][2]=f,y>p&&a.push([e,p,y])}}}return a};class t0{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof fp}}class gE extends t0{constructor(t,e){super();jc.set(this,void 0);no.set(this,void 0);E(this,no,t),E(this,jc,e)}toSVGPath(){const t=[];for(const e of u(this,no)){let[n,i]=e;t.push(`M${n} ${i}`);for(let a=2;a<e.length;a+=2){const h=e[a],d=e[a+1];h===n?(t.push(`V${d}`),i=d):d===i&&(t.push(`H${h}`),n=h)}t.push("Z")}return t.join(" ")}serialize([t,e,n,i],a){const h=[],d=n-t,f=i-e;for(const p of u(this,no)){const g=new Array(p.length);for(let v=0;v<p.length;v+=2)g[v]=t+p[v]*d,g[v+1]=i-p[v+1]*f;h.push(g)}return h}get box(){return u(this,jc)}}jc=new WeakMap,no=new WeakMap;const oo=class{constructor({x:t,y:e},n,i,a,h,d=0){Gc.add(this);Zn.set(this,void 0);Di.set(this,[]);io.set(this,void 0);so.set(this,void 0);Qn.set(this,[]);Ct.set(this,new Float64Array(18));Ar.set(this,void 0);Er.set(this,void 0);Uc.set(this,void 0);Hc.set(this,void 0);ro.set(this,void 0);ao.set(this,void 0);ps.set(this,[]);E(this,Zn,n),E(this,ao,a*i),E(this,so,h),u(this,Ct).set([NaN,NaN,NaN,NaN,t,e],6),E(this,io,d),E(this,Hc,u(oo,zc)*i),E(this,Uc,u(oo,_d)*i),E(this,ro,i),u(this,ps).push(t,e)}get free(){return!0}isEmpty(){return isNaN(u(this,Ct)[8])}add({x:t,y:e}){var Y;E(this,Ar,t),E(this,Er,e);const[n,i,a,h]=u(this,Zn);let[d,f,p,g]=u(this,Ct).subarray(8,12);const v=t-p,b=e-g,y=Math.hypot(v,b);if(y<u(this,Uc))return!1;const A=y-u(this,Hc),S=A/y,C=S*v,T=S*b;let L=d,k=f;d=p,f=g,p+=C,g+=T,(Y=u(this,ps))==null||Y.push(t,e);const I=-T/A,O=C/A,N=I*u(this,ao),U=O*u(this,ao);return u(this,Ct).set(u(this,Ct).subarray(2,8),0),u(this,Ct).set([p+N,g+U],4),u(this,Ct).set(u(this,Ct).subarray(14,18),12),u(this,Ct).set([p-N,g-U],16),isNaN(u(this,Ct)[6])?(u(this,Qn).length===0&&(u(this,Ct).set([d+N,f+U],2),u(this,Qn).push(NaN,NaN,NaN,NaN,(d+N-n)/a,(f+U-i)/h),u(this,Ct).set([d-N,f-U],14),u(this,Di).push(NaN,NaN,NaN,NaN,(d-N-n)/a,(f-U-i)/h)),u(this,Ct).set([L,k,d,f,p,g],6),!this.isEmpty()):(u(this,Ct).set([L,k,d,f,p,g],6),Math.abs(Math.atan2(k-f,L-d)-Math.atan2(T,C))<Math.PI/2?([d,f,p,g]=u(this,Ct).subarray(2,6),u(this,Qn).push(NaN,NaN,NaN,NaN,((d+p)/2-n)/a,((f+g)/2-i)/h),[d,f,L,k]=u(this,Ct).subarray(14,18),u(this,Di).push(NaN,NaN,NaN,NaN,((L+d)/2-n)/a,((k+f)/2-i)/h),!0):([L,k,d,f,p,g]=u(this,Ct).subarray(0,6),u(this,Qn).push(((L+5*d)/6-n)/a,((k+5*f)/6-i)/h,((5*d+p)/6-n)/a,((5*f+g)/6-i)/h,((d+p)/2-n)/a,((f+g)/2-i)/h),[p,g,d,f,L,k]=u(this,Ct).subarray(12,18),u(this,Di).push(((L+5*d)/6-n)/a,((k+5*f)/6-i)/h,((5*d+p)/6-n)/a,((5*f+g)/6-i)/h,((d+p)/2-n)/a,((f+g)/2-i)/h),!0))}toSVGPath(){if(this.isEmpty())return"";const t=u(this,Qn),e=u(this,Di),n=u(this,Ct).subarray(4,6),i=u(this,Ct).subarray(16,18),[a,h,d,f]=u(this,Zn),[p,g,v,b]=_(this,Gc,Nv).call(this);if(isNaN(u(this,Ct)[6])&&!this.isEmpty())return`M${(u(this,Ct)[2]-a)/d} ${(u(this,Ct)[3]-h)/f} L${(u(this,Ct)[4]-a)/d} ${(u(this,Ct)[5]-h)/f} L${p} ${g} L${v} ${b} L${(u(this,Ct)[16]-a)/d} ${(u(this,Ct)[17]-h)/f} L${(u(this,Ct)[14]-a)/d} ${(u(this,Ct)[15]-h)/f} Z`;const y=[];y.push(`M${t[4]} ${t[5]}`);for(let A=6;A<t.length;A+=6)isNaN(t[A])?y.push(`L${t[A+4]} ${t[A+5]}`):y.push(`C${t[A]} ${t[A+1]} ${t[A+2]} ${t[A+3]} ${t[A+4]} ${t[A+5]}`);y.push(`L${(n[0]-a)/d} ${(n[1]-h)/f} L${p} ${g} L${v} ${b} L${(i[0]-a)/d} ${(i[1]-h)/f}`);for(let A=e.length-6;A>=6;A-=6)isNaN(e[A])?y.push(`L${e[A+4]} ${e[A+5]}`):y.push(`C${e[A]} ${e[A+1]} ${e[A+2]} ${e[A+3]} ${e[A+4]} ${e[A+5]}`);return y.push(`L${e[4]} ${e[5]} Z`),y.join(" ")}getOutlines(){var T,L;const t=u(this,Qn),e=u(this,Di),n=u(this,Ct),i=n.subarray(4,6),a=n.subarray(16,18),[h,d,f,p]=u(this,Zn),g=new Float64Array(((L=(T=u(this,ps))==null?void 0:T.length)!=null?L:0)+2);for(let k=0,I=g.length-2;k<I;k+=2)g[k]=(u(this,ps)[k]-h)/f,g[k+1]=(u(this,ps)[k+1]-d)/p;g[g.length-2]=(u(this,Ar)-h)/f,g[g.length-1]=(u(this,Er)-d)/p;const[v,b,y,A]=_(this,Gc,Nv).call(this);if(isNaN(n[6])&&!this.isEmpty()){const k=new Float64Array(36);return k.set([NaN,NaN,NaN,NaN,(n[2]-h)/f,(n[3]-d)/p,NaN,NaN,NaN,NaN,(n[4]-h)/f,(n[5]-d)/p,NaN,NaN,NaN,NaN,v,b,NaN,NaN,NaN,NaN,y,A,NaN,NaN,NaN,NaN,(n[16]-h)/f,(n[17]-d)/p,NaN,NaN,NaN,NaN,(n[14]-h)/f,(n[15]-d)/p],0),new fp(k,g,u(this,Zn),u(this,ro),u(this,io),u(this,so))}const S=new Float64Array(u(this,Qn).length+24+u(this,Di).length);let C=t.length;for(let k=0;k<C;k+=2){if(isNaN(t[k])){S[k]=S[k+1]=NaN;continue}S[k]=t[k],S[k+1]=t[k+1]}S.set([NaN,NaN,NaN,NaN,(i[0]-h)/f,(i[1]-d)/p,NaN,NaN,NaN,NaN,v,b,NaN,NaN,NaN,NaN,y,A,NaN,NaN,NaN,NaN,(a[0]-h)/f,(a[1]-d)/p],C),C+=24;for(let k=e.length-6;k>=6;k-=6)for(let I=0;I<6;I+=2){if(isNaN(e[k+I])){S[C]=S[C+1]=NaN,C+=2;continue}S[C]=e[k+I],S[C+1]=e[k+I+1],C+=2}return S.set([NaN,NaN,NaN,NaN,e[4],e[5]],C),new fp(S,g,u(this,Zn),u(this,ro),u(this,io),u(this,so))}};let na=oo;Zn=new WeakMap,Di=new WeakMap,io=new WeakMap,so=new WeakMap,Qn=new WeakMap,Ct=new WeakMap,Ar=new WeakMap,Er=new WeakMap,Uc=new WeakMap,Hc=new WeakMap,ro=new WeakMap,ao=new WeakMap,ps=new WeakMap,zc=new WeakMap,Ed=new WeakMap,_d=new WeakMap,Gc=new WeakSet,Nv=function(){const t=u(this,Ct).subarray(4,6),e=u(this,Ct).subarray(16,18),[n,i,a,h]=u(this,Zn);return[(u(this,Ar)+(t[0]-e[0])/2-n)/a,(u(this,Er)+(t[1]-e[1])/2-i)/h,(u(this,Ar)+(e[0]-t[0])/2-n)/a,(u(this,Er)+(e[1]-t[1])/2-i)/h]},zc.set(na,8),Ed.set(na,2),_d.set(na,u(oo,zc)+u(oo,Ed));class fp extends t0{constructor(t,e,n,i,a,h){super();wr.add(this);Sr.add(this);wd.add(this);lo.set(this,void 0);_r.set(this,null);Mi.set(this,void 0);Vc.set(this,void 0);sn.set(this,void 0);$c.set(this,void 0);ne.set(this,void 0);E(this,ne,t),E(this,sn,e),E(this,lo,n),E(this,$c,i),E(this,Mi,a),E(this,Vc,h),_(this,wd,zw).call(this,h);const{x:d,y:f,width:p,height:g}=u(this,_r);for(let v=0,b=t.length;v<b;v+=2)t[v]=(t[v]-d)/p,t[v+1]=(t[v+1]-f)/g;for(let v=0,b=e.length;v<b;v+=2)e[v]=(e[v]-d)/p,e[v+1]=(e[v+1]-f)/g}toSVGPath(){const t=[`M${u(this,ne)[4]} ${u(this,ne)[5]}`];for(let e=6,n=u(this,ne).length;e<n;e+=6){if(isNaN(u(this,ne)[e])){t.push(`L${u(this,ne)[e+4]} ${u(this,ne)[e+5]}`);continue}t.push(`C${u(this,ne)[e]} ${u(this,ne)[e+1]} ${u(this,ne)[e+2]} ${u(this,ne)[e+3]} ${u(this,ne)[e+4]} ${u(this,ne)[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,i],a){const h=n-t,d=i-e;let f,p;switch(a){case 0:f=_(this,wr,af).call(this,u(this,ne),t,i,h,-d),p=_(this,wr,af).call(this,u(this,sn),t,i,h,-d);break;case 90:f=_(this,Sr,of).call(this,u(this,ne),t,e,h,d),p=_(this,Sr,of).call(this,u(this,sn),t,e,h,d);break;case 180:f=_(this,wr,af).call(this,u(this,ne),n,e,-h,d),p=_(this,wr,af).call(this,u(this,sn),n,e,-h,d);break;case 270:f=_(this,Sr,of).call(this,u(this,ne),n,i,-h,-d),p=_(this,Sr,of).call(this,u(this,sn),n,i,-h,-d);break}return{outline:Array.from(f),points:[Array.from(p)]}}get box(){return u(this,_r)}getNewOutline(t,e){const{x:n,y:i,width:a,height:h}=u(this,_r),[d,f,p,g]=u(this,lo),v=a*p,b=h*g,y=n*p+d,A=i*g+f,S=new na({x:u(this,sn)[0]*v+y,y:u(this,sn)[1]*b+A},u(this,lo),u(this,$c),t,u(this,Vc),e!=null?e:u(this,Mi));for(let C=2;C<u(this,sn).length;C+=2)S.add({x:u(this,sn)[C]*v+y,y:u(this,sn)[C+1]*b+A});return S.getOutlines()}}lo=new WeakMap,_r=new WeakMap,Mi=new WeakMap,Vc=new WeakMap,sn=new WeakMap,$c=new WeakMap,ne=new WeakMap,wr=new WeakSet,af=function(t,e,n,i,a){const h=new Float64Array(t.length);for(let d=0,f=t.length;d<f;d+=2)h[d]=e+t[d]*i,h[d+1]=n+t[d+1]*a;return h},Sr=new WeakSet,of=function(t,e,n,i,a){const h=new Float64Array(t.length);for(let d=0,f=t.length;d<f;d+=2)h[d]=e+t[d+1]*i,h[d+1]=n+t[d]*a;return h},wd=new WeakSet,zw=function(t){const e=u(this,ne);let n=e[4],i=e[5],a=n,h=i,d=n,f=i,p=n,g=i;const v=t?Math.max:Math.min;for(let C=6,T=e.length;C<T;C+=6){if(isNaN(e[C]))a=Math.min(a,e[C+4]),h=Math.min(h,e[C+5]),d=Math.max(d,e[C+4]),f=Math.max(f,e[C+5]),g<e[C+5]?(p=e[C+4],g=e[C+5]):g===e[C+5]&&(p=v(p,e[C+4]));else{const L=et.bezierBoundingBox(n,i,...e.slice(C,C+6));a=Math.min(a,L[0]),h=Math.min(h,L[1]),d=Math.max(d,L[2]),f=Math.max(f,L[3]),g<L[3]?(p=L[2],g=L[3]):g===L[3]&&(p=v(p,L[2]))}n=e[C+4],i=e[C+5]}const b=a-u(this,Mi),y=h-u(this,Mi),A=d-a+2*u(this,Mi),S=f-h+2*u(this,Mi);E(this,_r,{x:b,y,width:A,height:S,lastPoint:[p,g]})};const Fi=class{constructor({editor:t=null,uiManager:e=null}){Zc.add(this);Qc.add(this);Sd.add(this);Oi.add(this);xd.add(this);Jn.add(this);Wc.set(this,_(this,Sd,Gw).bind(this));Yc.set(this,_(this,xd,Vw).bind(this));Tn.set(this,null);xr.set(this,null);co.set(this,void 0);he.set(this,null);Xc.set(this,!1);ho.set(this,!1);qc.set(this,null);Kc.set(this,void 0);gs.set(this,null);uo.set(this,void 0);var n;t?(E(this,ho,!1),E(this,uo,gt.HIGHLIGHT_COLOR),E(this,qc,t)):(E(this,ho,!0),E(this,uo,gt.HIGHLIGHT_DEFAULT_COLOR)),E(this,gs,(t==null?void 0:t._uiManager)||e),E(this,Kc,u(this,gs)._eventBus),E(this,co,(t==null?void 0:t.color)||((n=u(this,gs))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Dt(this,"_keyboardManager",new Wo([[["Escape","mac+Escape"],Fi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Fi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Fi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Fi.prototype._moveToPrevious],[["Home","mac+Home"],Fi.prototype._moveToBeginning],[["End","mac+End"],Fi.prototype._moveToEnd]]))}renderButton(){const t=E(this,Tn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0),t.addEventListener("click",_(this,Oi,Io).bind(this)),t.addEventListener("keydown",u(this,Wc));const e=E(this,xr,document.createElement("span"));return e.className="swatch",e.setAttribute("aria-hidden",!0),e.style.backgroundColor=u(this,co),t.append(e),t}renderMainDropdown(){const t=E(this,he,_(this,Zc,Bv).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===u(this,Tn)){_(this,Oi,Io).call(this,t);return}const e=t.target.getAttribute("data-color");!e||_(this,Qc,jv).call(this,e,t)}_moveToNext(t){var e,n;if(!u(this,Jn,Yr)){_(this,Oi,Io).call(this,t);return}if(t.target===u(this,Tn)){(e=u(this,he).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=u(this,he))==null?void 0:e.firstChild)||t.target===u(this,Tn)){u(this,Jn,Yr)&&this._hideDropdownFromKeyboard();return}u(this,Jn,Yr)||_(this,Oi,Io).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!u(this,Jn,Yr)){_(this,Oi,Io).call(this,t);return}(e=u(this,he).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!u(this,Jn,Yr)){_(this,Oi,Io).call(this,t);return}(e=u(this,he).lastChild)==null||e.focus()}hideDropdown(){var t;(t=u(this,he))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",u(this,Yc))}_hideDropdownFromKeyboard(){var t;if(!u(this,ho)){if(!u(this,Jn,Yr)){(t=u(this,qc))==null||t.unselect();return}this.hideDropdown(),u(this,Tn).focus({preventScroll:!0,focusVisible:u(this,Xc)})}}updateColor(t){if(u(this,xr)&&(u(this,xr).style.backgroundColor=t),!u(this,he))return;const e=u(this,gs).highlightColors.values();for(const n of u(this,he).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=u(this,Tn))==null||t.remove(),E(this,Tn,null),E(this,xr,null),(e=u(this,he))==null||e.remove(),E(this,he,null)}};let pp=Fi;Wc=new WeakMap,Yc=new WeakMap,Tn=new WeakMap,xr=new WeakMap,co=new WeakMap,he=new WeakMap,Xc=new WeakMap,ho=new WeakMap,qc=new WeakMap,Kc=new WeakMap,gs=new WeakMap,uo=new WeakMap,Zc=new WeakSet,Bv=function(){const t=document.createElement("div");t.addEventListener("contextmenu",He),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[e,n]of u(this,gs).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",n),i.title=e,i.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${e}`);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=n,i.setAttribute("aria-selected",n===u(this,co)),i.addEventListener("click",_(this,Qc,jv).bind(this,n)),t.append(i)}return t.addEventListener("keydown",u(this,Wc)),t},Qc=new WeakSet,jv=function(t,e){e.stopPropagation(),u(this,Kc).dispatch("switchannotationeditorparams",{source:this,type:u(this,uo),value:t})},Sd=new WeakSet,Gw=function(t){Fi._keyboardManager.exec(this,t)},Oi=new WeakSet,Io=function(t){if(u(this,Jn,Yr)){this.hideDropdown();return}if(E(this,Xc,t.detail===0),window.addEventListener("pointerdown",u(this,Yc)),u(this,he)){u(this,he).classList.remove("hidden");return}const e=E(this,he,_(this,Zc,Bv).call(this));u(this,Tn).append(e)},xd=new WeakSet,Vw=function(t){var e;((e=u(this,he))==null?void 0:e.contains(t.target))||this.hideDropdown()},Jn=new WeakSet,Yr=function(){return u(this,he)&&!u(this,he).classList.contains("hidden")};const Ot=class extends Mt{constructor(t){super(Xe(Xe({},t),{name:"highlightEditor"}));ih.add(this);sh.add(this);Td.add(this);Pd.add(this);Rd.add(this);rh.add(this);Rr.add(this);Ld.add(this);vo.add(this);Lr.add(this);kd.add(this);Id.add(this);fo.set(this,null);Jc.set(this,0);ms.set(this,void 0);Cr.set(this,null);po.set(this,null);dn.set(this,null);th.set(this,null);eh.set(this,0);Tr.set(this,null);Pn.set(this,null);Fe.set(this,null);rn.set(this,!1);Cd.set(this,_(this,Ld,Xw).bind(this));go.set(this,null);Pr.set(this,void 0);ue.set(this,null);mo.set(this,"");ti.set(this,void 0);nh.set(this,"");this.color=t.color||Ot._defaultColor,E(this,ti,t.thickness||Ot._defaultThickness),E(this,Pr,t.opacity||Ot._defaultOpacity),E(this,ms,t.boxes||null),E(this,nh,t.methodOfCreation||""),E(this,mo,t.text||""),this._isDraggable=!1,t.highlightId>-1?(E(this,rn,!0),_(this,sh,Hv).call(this,t),_(this,Rr,lf).call(this)):(E(this,fo,t.anchorNode),E(this,Jc,t.anchorOffset),E(this,th,t.focusNode),E(this,eh,t.focusOffset),_(this,ih,Uv).call(this),_(this,Rr,lf).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ot.prototype;return Dt(this,"_keyboardManager",new Wo([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,rn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,ti),methodOfCreation:u(this,nh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,e){var n;Mt.initialize(t,e),Ot._defaultColor||(Ot._defaultColor=((n=e.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,e){switch(t){case gt.HIGHLIGHT_DEFAULT_COLOR:Ot._defaultColor=e;break;case gt.HIGHLIGHT_THICKNESS:Ot._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return u(this,go)}updateParams(t,e){switch(t){case gt.HIGHLIGHT_COLOR:_(this,Td,$w).call(this,e);break;case gt.HIGHLIGHT_THICKNESS:_(this,Pd,Ww).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[gt.HIGHLIGHT_DEFAULT_COLOR,Ot._defaultColor],[gt.HIGHLIGHT_THICKNESS,Ot._defaultThickness]]}get propertiesToUpdate(){return[[gt.HIGHLIGHT_COLOR,this.color||Ot._defaultColor],[gt.HIGHLIGHT_THICKNESS,u(this,ti)||Ot._defaultThickness],[gt.HIGHLIGHT_FREE,u(this,rn)]]}addEditToolbar(){var t=e=>super[e];return kt(this,null,function*(){const n=yield t("addEditToolbar").call(this);return n?(this._uiManager.highlightColors&&(E(this,po,new pp({editor:this})),n.addColorPicker(u(this,po))),n):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_(this,Lr,cf).call(this))}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,_(this,Lr,cf).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){_(this,rh,zv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){!this.parent||(super.rebuild(),this.div!==null&&(_(this,Rr,lf).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var n;let e=!1;this.parent&&!t?_(this,rh,zv).call(this):t&&(_(this,Rr,lf).call(this,t),e=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),e&&this.select()}rotate(t){const{drawLayer:e}=this.parent;let n;u(this,rn)?(t=(t-this.rotation+360)%360,n=_(Ot,vs,Rh).call(Ot,u(this,Pn).box,t)):n=_(Ot,vs,Rh).call(Ot,this,t),e.rotate(u(this,Fe),t),e.rotate(u(this,ue),t),e.updateBox(u(this,Fe),n),e.updateBox(u(this,ue),_(Ot,vs,Rh).call(Ot,u(this,dn).box,t))}render(){if(this.div)return this.div;const t=super.render();u(this,mo)&&(t.setAttribute("aria-label",u(this,mo)),t.setAttribute("role","mark")),u(this,rn)?t.classList.add("free"):this.div.addEventListener("keydown",u(this,Cd));const e=E(this,Tr,document.createElement("div"));t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=u(this,Cr);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),Qh(this,u(this,Tr),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(u(this,ue),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(u(this,ue),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:_(this,vo,Xp).call(this,!0);break;case 1:case 3:_(this,vo,Xp).call(this,!1);break}}select(){var t,e;super.select(),!!u(this,ue)&&((t=this.parent)==null||t.drawLayer.removeClass(u(this,ue),"hovered"),(e=this.parent)==null||e.drawLayer.addClass(u(this,ue),"selected"))}unselect(){var t;super.unselect(),!!u(this,ue)&&((t=this.parent)==null||t.drawLayer.removeClass(u(this,ue),"selected"),u(this,rn)||_(this,vo,Xp).call(this,!1))}get _mustFixPosition(){return!u(this,rn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(u(this,Fe),t),this.parent.drawLayer.show(u(this,ue),t))}static startHighlighting(t,e,{target:n,x:i,y:a}){const{x:h,y:d,width:f,height:p}=n.getBoundingClientRect(),g=A=>{_(this,Dd,Zw).call(this,t,A)},v={capture:!0,passive:!1},b=A=>{A.preventDefault(),A.stopPropagation()},y=A=>{n.removeEventListener("pointermove",g),window.removeEventListener("blur",y),window.removeEventListener("pointerup",y),window.removeEventListener("pointerdown",b,v),window.removeEventListener("contextmenu",He),_(this,Md,Qw).call(this,t,A)};window.addEventListener("blur",y),window.addEventListener("pointerup",y),window.addEventListener("pointerdown",b,v),window.addEventListener("contextmenu",He),n.addEventListener("pointermove",g),this._freeHighlight=new na({x:i,y:a},[h,d,f,p],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,e,n){const i=super.deserialize(t,e,n),{rect:[a,h,d,f],color:p,quadPoints:g}=t;i.color=et.makeHexColor(...p),E(i,Pr,t.opacity);const[v,b]=i.pageDimensions;i.width=(d-a)/v,i.height=(f-h)/b;const y=E(i,ms,[]);for(let A=0;A<g.length;A+=8)y.push({x:(g[4]-d)/v,y:(f-(1-g[A+5]))/b,width:(g[A+2]-g[A])/v,height:(g[A+5]-g[A+1])/b});return _(i,ih,Uv).call(i),i}serialize(t=!1){if(this.isEmpty()||t)return null;const e=this.getRect(0,0),n=Mt._colorManager.convert(this.color);return{annotationType:Rt.HIGHLIGHT,color:n,opacity:u(this,Pr),thickness:u(this,ti),quadPoints:_(this,kd,qw).call(this),outlines:_(this,Id,Kw).call(this,e),pageIndex:this.pageIndex,rect:e,rotation:_(this,Lr,cf).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};let De=Ot;fo=new WeakMap,Jc=new WeakMap,ms=new WeakMap,Cr=new WeakMap,po=new WeakMap,dn=new WeakMap,th=new WeakMap,eh=new WeakMap,Tr=new WeakMap,Pn=new WeakMap,Fe=new WeakMap,rn=new WeakMap,Cd=new WeakMap,go=new WeakMap,Pr=new WeakMap,ue=new WeakMap,mo=new WeakMap,ti=new WeakMap,nh=new WeakMap,ih=new WeakSet,Uv=function(){const t=new dp(u(this,ms),.001);E(this,Pn,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=u(this,Pn).box;const e=new dp(u(this,ms),.0025,.001,this._uiManager.direction==="ltr");E(this,dn,e.getOutlines());const{lastPoint:n}=u(this,dn).box;E(this,go,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},sh=new WeakSet,Hv=function({highlightOutlines:t,highlightId:e,clipPathId:n}){E(this,Pn,t);const i=1.5;if(E(this,dn,t.getNewOutline(u(this,ti)/2+i,.0025)),e>=0)E(this,Fe,e),E(this,Cr,n),this.parent.drawLayer.finalizeLine(e,t),E(this,ue,this.parent.drawLayer.highlightOutline(u(this,dn)));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(u(this,Fe),t),this.parent.drawLayer.updateBox(u(this,Fe),_(Ot,vs,Rh).call(Ot,u(this,Pn).box,(g-this.rotation+360)%360)),this.parent.drawLayer.updateLine(u(this,ue),u(this,dn)),this.parent.drawLayer.updateBox(u(this,ue),_(Ot,vs,Rh).call(Ot,u(this,dn).box,g))}const{x:a,y:h,width:d,height:f}=t.box;switch(this.rotation){case 0:this.x=a,this.y=h,this.width=d,this.height=f;break;case 90:{const[g,v]=this.parentDimensions;this.x=h,this.y=1-a,this.width=d*v/g,this.height=f*g/v;break}case 180:this.x=1-a,this.y=1-h,this.width=d,this.height=f;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-h,this.y=a,this.width=d*v/g,this.height=f*g/v;break}}const{lastPoint:p}=u(this,dn).box;E(this,go,[(p[0]-a)/d,(p[1]-h)/f])},Td=new WeakSet,$w=function(t){const e=i=>{var a,h;this.color=i,(a=this.parent)==null||a.drawLayer.changeColor(u(this,Fe),i),(h=u(this,po))==null||h.updateColor(i)},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Pd=new WeakSet,Ww=function(t){const e=u(this,ti),n=i=>{E(this,ti,i),_(this,Rd,Yw).call(this,i)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Rd=new WeakSet,Yw=function(t){if(!u(this,rn))return;_(this,sh,Hv).call(this,{highlightOutlines:u(this,Pn).getNewOutline(t/2)}),this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)},rh=new WeakSet,zv=function(){u(this,Fe)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Fe)),E(this,Fe,null),this.parent.drawLayer.remove(u(this,ue)),E(this,ue,null))},Rr=new WeakSet,lf=function(t=this.parent){u(this,Fe)===null&&({id:this.Fe,clipPathId:this.Cr}=t.drawLayer.highlight(u(this,Pn),this.color,u(this,Pr)),E(this,ue,t.drawLayer.highlightOutline(u(this,dn))),u(this,Tr)&&(u(this,Tr).style.clipPath=u(this,Cr)))},vs=new WeakSet,Rh=function({x:t,y:e,width:n,height:i},a){switch(a){case 90:return{x:1-e-i,y:t,width:i,height:n};case 180:return{x:1-t-n,y:1-e-i,width:n,height:i};case 270:return{x:e,y:1-t-n,width:i,height:n}}return{x:t,y:e,width:n,height:i}},Ld=new WeakSet,Xw=function(t){Ot._keyboardManager.exec(this,t)},vo=new WeakSet,Xp=function(t){if(!u(this,fo))return;const e=window.getSelection();t?e.setPosition(u(this,fo),u(this,Jc)):e.setPosition(u(this,th),u(this,eh))},Lr=new WeakSet,cf=function(){return u(this,rn)?this.rotation:0},kd=new WeakSet,qw=function(){if(u(this,rn))return null;const[t,e]=this.pageDimensions,n=u(this,ms),i=new Array(n.length*8);let a=0;for(const{x:h,y:d,width:f,height:p}of n){const g=h*t,v=(1-d-p)*e;i[a]=i[a+4]=g,i[a+1]=i[a+3]=v,i[a+2]=i[a+6]=g+f*t,i[a+5]=i[a+7]=v+p*e,a+=8}return i},Id=new WeakSet,Kw=function(t){return u(this,Pn).serialize(t,_(this,Lr,cf).call(this))},Dd=new WeakSet,Zw=function(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},Md=new WeakSet,Qw=function(t,e){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},vs.add(De),Dd.add(De),Md.add(De),yt(De,"_defaultColor",null),yt(De,"_defaultOpacity",1),yt(De,"_defaultThickness",12),yt(De,"_l10nPromise"),yt(De,"_type","highlight"),yt(De,"_editorType",Rt.HIGHLIGHT),yt(De,"_freeHighlightId",-1),yt(De,"_freeHighlight",null),yt(De,"_freeHighlightClipId","");const Kt=class extends Mt{constructor(t){super(Xe(Xe({},t),{name:"inkEditor"}));Od.add(this);Fd.add(this);Nd.add(this);Bd.add(this);ch.add(this);jd.add(this);hh.add(this);Ud.add(this);Hd.add(this);zd.add(this);Gd.add(this);Vd.add(this);Bi.add(this);uh.add(this);bo.add(this);yo.add(this);ys.add(this);dh.add(this);Ao.add(this);Yd.add(this);ph.add(this);Eo.add(this);jr.add(this);kr.set(this,0);Ir.set(this,0);ah.set(this,this.canvasPointermove.bind(this));oh.set(this,this.canvasPointerleave.bind(this));lh.set(this,this.canvasPointerup.bind(this));Dr.set(this,this.canvasPointerdown.bind(this));ei.set(this,null);Ni.set(this,new Path2D);fn.set(this,!1);Mr.set(this,!1);Or.set(this,!1);Fr.set(this,null);Nr.set(this,0);Br.set(this,0);bs.set(this,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){Mt.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case gt.INK_THICKNESS:Kt._defaultThickness=e;break;case gt.INK_COLOR:Kt._defaultColor=e;break;case gt.INK_OPACITY:Kt._defaultOpacity=e/100;break}}updateParams(t,e){switch(t){case gt.INK_THICKNESS:_(this,Od,Jw).call(this,e);break;case gt.INK_COLOR:_(this,Fd,tS).call(this,e);break;case gt.INK_OPACITY:_(this,Nd,eS).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[gt.INK_THICKNESS,Kt._defaultThickness],[gt.INK_COLOR,Kt._defaultColor||Mt._defaultLineColor],[gt.INK_OPACITY,Math.round(Kt._defaultOpacity*100)]]}get propertiesToUpdate(){var t;return[[gt.INK_THICKNESS,this.thickness||Kt._defaultThickness],[gt.INK_COLOR,this.color||Kt._defaultColor||Mt._defaultLineColor],[gt.INK_OPACITY,Math.round(100*((t=this.opacity)!=null?t:Kt._defaultOpacity))]]}rebuild(){!this.parent||(super.rebuild(),this.div!==null&&(this.canvas||(_(this,bo,qp).call(this),_(this,yo,Kp).call(this)),this.isAttachedToDOM||(this.parent.add(this),_(this,ys,Lh).call(this)),_(this,jr,hf).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,u(this,ei)&&(clearTimeout(u(this,ei)),E(this,ei,null)),u(this,Fr).disconnect(),E(this,Fr,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,n=this.width*t,i=this.height*e;this.setDimensions(n,i)}enableEditMode(){u(this,fn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",u(this,Dr)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",u(this,Dr)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){u(this,fn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),E(this,fn,!0),this.div.classList.add("disabled"),_(this,jr,hf).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){!this._focusEventsAllowed||(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||u(this,fn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),_(this,jd,iS).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),_(this,hh,Vv).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),_(this,uh,$v).call(this,t)}canvasPointerleave(t){_(this,uh,$v).call(this,t)}get isResizable(){return!this.isEmpty()&&u(this,fn)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,i,a,h]=_(this,Bd,nS).call(this);if(this.setAt(n,i,0,0),this.setDims(a,h),_(this,bo,qp).call(this),this.width){const[d,f]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*f),this.setAt(t*d,e*f,this.width*d,this.height*f),E(this,Or,!0),_(this,ys,Lh).call(this),this.setDims(this.width*d,this.height*f),_(this,Bi,Do).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _(this,yo,Kp).call(this),this.div}setDimensions(t,e){const n=Math.round(t),i=Math.round(e);if(u(this,Nr)===n&&u(this,Br)===i)return;E(this,Nr,n),E(this,Br,i),this.canvas.style.visibility="hidden";const[a,h]=this.parentDimensions;this.width=t/a,this.height=e/h,this.fixAndSetPosition(),u(this,fn)&&_(this,dh,Wv).call(this,t,e),_(this,ys,Lh).call(this),_(this,Bi,Do).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,e,n){if(t instanceof Qm)return null;const i=super.deserialize(t,e,n);i.thickness=t.thickness,i.color=et.makeHexColor(...t.color),i.opacity=t.opacity;const[a,h]=i.pageDimensions,d=i.width*a,f=i.height*h,p=i.parentScale,g=t.thickness/2;E(i,fn,!0),E(i,Nr,Math.round(d)),E(i,Br,Math.round(f));const{paths:v,rect:b,rotation:y}=t;for(let{bezier:S}of v){S=_(Kt,Wd,hS).call(Kt,S,b,y);const C=[];i.paths.push(C);let T=p*(S[0]-g),L=p*(S[1]-g);for(let I=2,O=S.length;I<O;I+=6){const N=p*(S[I]-g),U=p*(S[I+1]-g),q=p*(S[I+2]-g),Y=p*(S[I+3]-g),Z=p*(S[I+4]-g),H=p*(S[I+5]-g);C.push([[T,L],[N,U],[q,Y],[Z,H]]),T=Z,L=H}const k=_(this,$d,cS).call(this,C);i.bezierPath2D.push(k)}const A=_(i,ph,Xv).call(i);return E(i,Ir,Math.max(Mt.MIN_SIZE,A[2]-A[0])),E(i,kr,Math.max(Mt.MIN_SIZE,A[3]-A[1])),_(i,dh,Wv).call(i,d,f),i}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=Mt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Rt.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:_(this,Yd,uS).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};let jn=Kt;kr=new WeakMap,Ir=new WeakMap,ah=new WeakMap,oh=new WeakMap,lh=new WeakMap,Dr=new WeakMap,ei=new WeakMap,Ni=new WeakMap,fn=new WeakMap,Mr=new WeakMap,Or=new WeakMap,Fr=new WeakMap,Nr=new WeakMap,Br=new WeakMap,bs=new WeakMap,Od=new WeakSet,Jw=function(t){const e=i=>{this.thickness=i,_(this,jr,hf).call(this)},n=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Fd=new WeakSet,tS=function(t){const e=i=>{this.color=i,_(this,Bi,Do).call(this)},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Nd=new WeakSet,eS=function(t){const e=i=>{this.opacity=i,_(this,Bi,Do).call(this)};t/=100;const n=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Bd=new WeakSet,nS=function(){const{parentRotation:t,parentDimensions:[e,n]}=this;switch(t){case 90:return[0,n,n,e];case 180:return[e,n,e,n];case 270:return[e,0,n,e];default:return[0,0,e,n]}},ch=new WeakSet,Gv=function(){const{ctx:t,color:e,opacity:n,thickness:i,parentScale:a,scaleFactor:h}=this;t.lineWidth=i*a/h,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${jy(n)}`},jd=new WeakSet,iS=function(t,e){var n;this.canvas.addEventListener("contextmenu",He),this.canvas.addEventListener("pointerleave",u(this,oh)),this.canvas.addEventListener("pointermove",u(this,ah)),this.canvas.addEventListener("pointerup",u(this,lh)),this.canvas.removeEventListener("pointerdown",u(this,Dr)),this.isEditing=!0,u(this,Or)||(E(this,Or,!0),_(this,ys,Lh).call(this),this.thickness||(this.thickness=Kt._defaultThickness),this.color||(this.color=Kt._defaultColor||Mt._defaultLineColor),(n=this.opacity)!=null||(this.opacity=Kt._defaultOpacity)),this.currentPath.push([t,e]),E(this,Mr,!1),_(this,ch,Gv).call(this),E(this,bs,()=>{_(this,zd,aS).call(this),u(this,bs)&&window.requestAnimationFrame(u(this,bs))}),window.requestAnimationFrame(u(this,bs))},hh=new WeakSet,Vv=function(t,e){const[n,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===n&&e===i)return;const a=this.currentPath;let h=u(this,Ni);if(a.push([t,e]),E(this,Mr,!0),a.length<=2){h.moveTo(...a[0]),h.lineTo(t,e);return}a.length===3&&(E(this,Ni,h=new Path2D),h.moveTo(...a[0])),_(this,Gd,oS).call(this,h,...a.at(-3),...a.at(-2),t,e)},Ud=new WeakSet,sS=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);u(this,Ni).lineTo(...t)},Hd=new WeakSet,rS=function(t,e){E(this,bs,null),t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),_(this,hh,Vv).call(this,t,e),_(this,Ud,sS).call(this);let n;if(this.currentPath.length!==1)n=_(this,Vd,lS).call(this);else{const f=[t,e];n=[[f,f.slice(),f.slice(),f]]}const i=u(this,Ni),a=this.currentPath;this.currentPath=[],E(this,Ni,new Path2D);const h=()=>{this.allRawPaths.push(a),this.paths.push(n),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(_(this,bo,qp).call(this),_(this,yo,Kp).call(this)),_(this,jr,hf).call(this))};this.addCommands({cmd:h,undo:d,mustExec:!0})},zd=new WeakSet,aS=function(){if(!u(this,Mr))return;E(this,Mr,!1);const t=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),n=e.map(g=>g[0]),i=e.map(g=>g[1]),a=Math.min(...n)-t,h=Math.max(...n)+t,d=Math.min(...i)-t,f=Math.max(...i)+t,{ctx:p}=this;p.save(),p.clearRect(0,0,this.canvas.width,this.canvas.height);for(const g of this.bezierPath2D)p.stroke(g);p.stroke(u(this,Ni)),p.restore()},Gd=new WeakSet,oS=function(t,e,n,i,a,h,d){const f=(e+i)/2,p=(n+a)/2,g=(i+h)/2,v=(a+d)/2;t.bezierCurveTo(f+2*(i-f)/3,p+2*(a-p)/3,g+2*(i-g)/3,v+2*(a-v)/3,g,v)},Vd=new WeakSet,lS=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const e=[];let n,[i,a]=t[0];for(n=1;n<t.length-2;n++){const[b,y]=t[n],[A,S]=t[n+1],C=(b+A)/2,T=(y+S)/2,L=[i+2*(b-i)/3,a+2*(y-a)/3],k=[C+2*(b-C)/3,T+2*(y-T)/3];e.push([[i,a],L,k,[C,T]]),[i,a]=[C,T]}const[h,d]=t[n],[f,p]=t[n+1],g=[i+2*(h-i)/3,a+2*(d-a)/3],v=[f+2*(h-f)/3,p+2*(d-p)/3];return e.push([[i,a],g,v,[f,p]]),e},Bi=new WeakSet,Do=function(){if(this.isEmpty()){_(this,Ao,Zp).call(this);return}_(this,ch,Gv).call(this);const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),_(this,Ao,Zp).call(this);for(const n of this.bezierPath2D)e.stroke(n)},uh=new WeakSet,$v=function(t){this.canvas.removeEventListener("pointerleave",u(this,oh)),this.canvas.removeEventListener("pointermove",u(this,ah)),this.canvas.removeEventListener("pointerup",u(this,lh)),this.canvas.addEventListener("pointerdown",u(this,Dr)),u(this,ei)&&clearTimeout(u(this,ei)),E(this,ei,setTimeout(()=>{E(this,ei,null),this.canvas.removeEventListener("contextmenu",He)},10)),_(this,Hd,rS).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},bo=new WeakSet,qp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},yo=new WeakSet,Kp=function(){E(this,Fr,new ResizeObserver(t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)})),u(this,Fr).observe(this.div)},ys=new WeakSet,Lh=function(){if(!u(this,Or))return;const[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),_(this,Ao,Zp).call(this)},dh=new WeakSet,Wv=function(t,e){const n=_(this,Eo,Qp).call(this),i=(t-n)/u(this,Ir),a=(e-n)/u(this,kr);this.scaleFactor=Math.min(i,a)},Ao=new WeakSet,Zp=function(){const t=_(this,Eo,Qp).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},$d=new WeakSet,cS=function(t){const e=new Path2D;for(let n=0,i=t.length;n<i;n++){const[a,h,d,f]=t[n];n===0&&e.moveTo(...a),e.bezierCurveTo(h[0],h[1],d[0],d[1],f[0],f[1])}return e},fh=new WeakSet,Yv=function(t,e,n){const[i,a,h,d]=e;switch(n){case 0:for(let f=0,p=t.length;f<p;f+=2)t[f]+=i,t[f+1]=d-t[f+1];break;case 90:for(let f=0,p=t.length;f<p;f+=2){const g=t[f];t[f]=t[f+1]+i,t[f+1]=g+a}break;case 180:for(let f=0,p=t.length;f<p;f+=2)t[f]=h-t[f],t[f+1]+=a;break;case 270:for(let f=0,p=t.length;f<p;f+=2){const g=t[f];t[f]=h-t[f+1],t[f+1]=d-g}break;default:throw new Error("Invalid rotation")}return t},Wd=new WeakSet,hS=function(t,e,n){const[i,a,h,d]=e;switch(n){case 0:for(let f=0,p=t.length;f<p;f+=2)t[f]-=i,t[f+1]=d-t[f+1];break;case 90:for(let f=0,p=t.length;f<p;f+=2){const g=t[f];t[f]=t[f+1]-a,t[f+1]=g-i}break;case 180:for(let f=0,p=t.length;f<p;f+=2)t[f]=h-t[f],t[f+1]-=a;break;case 270:for(let f=0,p=t.length;f<p;f+=2){const g=t[f];t[f]=d-t[f+1],t[f+1]=h-g}break;default:throw new Error("Invalid rotation")}return t},Yd=new WeakSet,uS=function(t,e,n,i){const a=[],h=this.thickness/2,d=t*e+h,f=t*n+h;for(const p of this.paths){const g=[],v=[];for(let b=0,y=p.length;b<y;b++){const[A,S,C,T]=p[b];if(A[0]===T[0]&&A[1]===T[1]&&y===1){const Z=t*A[0]+d,H=t*A[1]+f;g.push(Z,H),v.push(Z,H);break}const L=t*A[0]+d,k=t*A[1]+f,I=t*S[0]+d,O=t*S[1]+f,N=t*C[0]+d,U=t*C[1]+f,q=t*T[0]+d,Y=t*T[1]+f;b===0&&(g.push(L,k),v.push(L,k)),g.push(I,O,N,U,q,Y),v.push(I,O),b===y-1&&v.push(q,Y)}a.push({bezier:_(Kt,fh,Yv).call(Kt,g,i,this.rotation),points:_(Kt,fh,Yv).call(Kt,v,i,this.rotation)})}return a},ph=new WeakSet,Xv=function(){let t=Infinity,e=-Infinity,n=Infinity,i=-Infinity;for(const a of this.paths)for(const[h,d,f,p]of a){const g=et.bezierBoundingBox(...h,...d,...f,...p);t=Math.min(t,g[0]),n=Math.min(n,g[1]),e=Math.max(e,g[2]),i=Math.max(i,g[3])}return[t,n,e,i]},Eo=new WeakSet,Qp=function(){return u(this,fn)?Math.ceil(this.thickness*this.parentScale):0},jr=new WeakSet,hf=function(t=!1){if(this.isEmpty())return;if(!u(this,fn)){_(this,Bi,Do).call(this);return}const e=_(this,ph,Xv).call(this),n=_(this,Eo,Qp).call(this);E(this,Ir,Math.max(Mt.MIN_SIZE,e[2]-e[0])),E(this,kr,Math.max(Mt.MIN_SIZE,e[3]-e[1]));const i=Math.ceil(n+u(this,Ir)*this.scaleFactor),a=Math.ceil(n+u(this,kr)*this.scaleFactor),[h,d]=this.parentDimensions;this.width=i/h,this.height=a/d,this.setAspectRatio(i,a);const f=this.translationX,p=this.translationY;this.translationX=-e[0],this.translationY=-e[1],_(this,ys,Lh).call(this),_(this,Bi,Do).call(this),E(this,Nr,i),E(this,Br,a),this.setDims(i,a);const g=t?n/this.scaleFactor/2:0;this.translate(f-this.translationX-g,p-this.translationY-g)},$d.add(jn),fh.add(jn),Wd.add(jn),yt(jn,"_defaultColor",null),yt(jn,"_defaultOpacity",1),yt(jn,"_defaultThickness",1),yt(jn,"_type","ink"),yt(jn,"_editorType",Rt.INK);const Rp=class extends Mt{constructor(t){super(Xe(Xe({},t),{name:"stampEditor"}));Hr.add(this);zr.add(this);wo.add(this);mh.add(this);Xd.add(this);qd.add(this);vh.add(this);So.add(this);Kd.add(this);we.set(this,null);Se.set(this,null);As.set(this,null);ji.set(this,null);Es.set(this,null);_o.set(this,"");ni.set(this,null);Ur.set(this,null);ii.set(this,null);Rn.set(this,!1);gh.set(this,!1);E(this,ji,t.bitmapUrl),E(this,Es,t.bitmapFile)}static initialize(t,e){Mt.initialize(t,e)}static get supportedTypes(){return Dt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return Dt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(Rt.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,e;u(this,Se)&&(E(this,we,null),this._uiManager.imageManager.deleteId(u(this,Se)),(t=u(this,ni))==null||t.remove(),E(this,ni,null),(e=u(this,Ur))==null||e.disconnect(),E(this,Ur,null),u(this,ii)&&(clearTimeout(u(this,ii)),E(this,ii,null))),super.remove()}rebuild(){if(!this.parent){u(this,Se)&&_(this,wo,Jp).call(this);return}super.rebuild(),this.div!==null&&(u(this,Se)&&u(this,ni)===null&&_(this,wo,Jp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(u(this,As)||u(this,we)||u(this,ji)||u(this,Es)||u(this,Se))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),u(this,we)?_(this,mh,qv).call(this):_(this,wo,Jp).call(this),this.width){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i)}return this.div}getImageForAltText(){return u(this,ni)}static deserialize(t,e,n){if(t instanceof Jm)return null;const i=super.deserialize(t,e,n),{rect:a,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:p}=t;d&&n.imageManager.isValidId(d)?E(i,Se,d):E(i,ji,h),E(i,Rn,f);const[g,v]=i.pageDimensions;return i.width=(a[2]-a[0])/g,i.height=(a[3]-a[1])/v,p&&(i.altTextData=p),i}serialize(t=!1,e=null){if(this.isEmpty())return null;const n={annotationType:Rt.STAMP,bitmapId:u(this,Se),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,Rn),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=_(this,So,tg).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:i,altText:a}=this.altTextData;if(!i&&a&&(n.accessibilityData={type:"Figure",alt:a}),e===null)return n;e.stamps||(e.stamps=new Map);const h=u(this,Rn)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(u(this,Se)))e.stamps.set(u(this,Se),{area:h,serialized:n}),n.bitmap=_(this,So,tg).call(this,!1);else if(u(this,Rn)){const d=e.stamps.get(u(this,Se));h>d.area&&(d.area=h,d.serialized.bitmap.close(),d.serialized.bitmap=_(this,So,tg).call(this,!1))}return n}};let ou=Rp;we=new WeakMap,Se=new WeakMap,As=new WeakMap,ji=new WeakMap,Es=new WeakMap,_o=new WeakMap,ni=new WeakMap,Ur=new WeakMap,ii=new WeakMap,Rn=new WeakMap,gh=new WeakMap,Hr=new WeakSet,uf=function(t,e=!1){if(!t){this.remove();return}E(this,we,t.bitmap),e||(E(this,Se,t.id),E(this,Rn,t.isSvg)),t.file&&E(this,_o,t.file.name),_(this,mh,qv).call(this)},zr=new WeakSet,df=function(){E(this,As,null),this._uiManager.enableWaiting(!1),u(this,ni)&&this.div.focus()},wo=new WeakSet,Jp=function(){if(u(this,Se)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Se)).then(e=>_(this,Hr,uf).call(this,e,!0)).finally(()=>_(this,zr,df).call(this));return}if(u(this,ji)){const e=u(this,ji);E(this,ji,null),this._uiManager.enableWaiting(!0),E(this,As,this._uiManager.imageManager.getFromUrl(e).then(n=>_(this,Hr,uf).call(this,n)).finally(()=>_(this,zr,df).call(this)));return}if(u(this,Es)){const e=u(this,Es);E(this,Es,null),this._uiManager.enableWaiting(!0),E(this,As,this._uiManager.imageManager.getFromFile(e).then(n=>_(this,Hr,uf).call(this,n)).finally(()=>_(this,zr,df).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Rp.supportedTypesStr,E(this,As,new Promise(e=>{t.addEventListener("change",()=>kt(this,null,function*(){if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const n=yield this._uiManager.imageManager.getFromFile(t.files[0]);_(this,Hr,uf).call(this,n)}e()})),t.addEventListener("cancel",()=>{this.remove(),e()})}).finally(()=>_(this,zr,df).call(this))),t.click()},mh=new WeakSet,qv=function(){const{div:t}=this;let{width:e,height:n}=u(this,we);const[i,a]=this.pageDimensions,h=.75;if(this.width)e=this.width*i,n=this.height*a;else if(e>h*i||n>h*a){const g=Math.min(h*i/e,h*a/n);e*=g,n*=g}const[d,f]=this.parentDimensions;this.setDims(e*d/i,n*f/a),this._uiManager.enableWaiting(!1);const p=E(this,ni,document.createElement("canvas"));t.append(p),t.hidden=!1,_(this,vh,Kv).call(this,e,n),_(this,Kd,pS).call(this),u(this,gh)||(this.parent.addUndoableEditor(this),E(this,gh,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,_o)&&p.setAttribute("aria-label",u(this,_o))},Xd=new WeakSet,dS=function(t,e){var h;const[n,i]=this.parentDimensions;this.width=t/n,this.height=e/i,this.setDims(t,e),((h=this._initialOptions)==null?void 0:h.isCentered)?this.center():this.fixAndSetPosition(),this._initialOptions=null,u(this,ii)!==null&&clearTimeout(u(this,ii)),E(this,ii,setTimeout(()=>{E(this,ii,null),_(this,vh,Kv).call(this,t,e)},200))},qd=new WeakSet,fS=function(t,e){const{width:n,height:i}=u(this,we);let a=n,h=i,d=u(this,we);for(;a>2*t||h>2*e;){const f=a,p=h;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),h>2*e&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const g=new OffscreenCanvas(a,h);g.getContext("2d").drawImage(d,0,0,f,p,0,0,a,h),d=g.transferToImageBitmap()}return d},vh=new WeakSet,Kv=function(t,e){t=Math.ceil(t),e=Math.ceil(e);const n=u(this,ni);if(!n||n.width===t&&n.height===e)return;n.width=t,n.height=e;const i=u(this,Rn)?u(this,we):_(this,qd,fS).call(this,t,e);if(this._uiManager.hasMLManager&&!this.hasAltText()){const d=new OffscreenCanvas(t,e).getContext("2d");d.drawImage(i,0,0,i.width,i.height,0,0,t,e),this._uiManager.mlGuess({service:"image-to-text",request:{data:d.getImageData(0,0,t,e).data,width:t,height:e,channels:4}}).then(f=>{const p=(f==null?void 0:f.output)||"";this.parent&&p&&!this.hasAltText()&&(this.altTextData={altText:p,decorative:!1})})}const a=n.getContext("2d");a.filter=this._uiManager.hcmFilter,a.drawImage(i,0,0,i.width,i.height,0,0,t,e)},So=new WeakSet,tg=function(t){if(t){if(u(this,Rn)){const i=this._uiManager.imageManager.getSvgUrl(u(this,Se));if(i)return i}const e=document.createElement("canvas");return{width:e.width,height:e.height}=u(this,we),e.getContext("2d").drawImage(u(this,we),0,0),e.toDataURL()}if(u(this,Rn)){const[e,n]=this.pageDimensions,i=Math.round(this.width*e*Mn.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*Mn.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(i,a);return h.getContext("2d").drawImage(u(this,we),0,0,u(this,we).width,u(this,we).height,0,0,i,a),h.transferToImageBitmap()}return structuredClone(u(this,we))},Kd=new WeakSet,pS=function(){E(this,Ur,new ResizeObserver(t=>{const e=t[0].contentRect;e.width&&e.height&&_(this,Xd,dS).call(this,e.width,e.height)})),u(this,Ur).observe(this.div)},yt(ou,"_type","stamp"),yt(ou,"_editorType",Rt.STAMP);const Gi=class{constructor({uiManager:t,pageIndex:e,div:n,accessibilityManager:i,annotationLayer:a,drawLayer:h,textLayer:d,viewport:f,l10n:p}){Zd.add(this);bh.add(this);yh.add(this);Ah.add(this);Po.add(this);Gr.set(this,void 0);xo.set(this,!1);si.set(this,null);Vr.set(this,null);Ui.set(this,null);Hi.set(this,null);zi.set(this,null);an.set(this,new Map);_s.set(this,!1);Co.set(this,!1);To.set(this,!1);Ne.set(this,null);ft.set(this,void 0);const g=[...u(Gi,ws).values()];if(!Gi._initialized){Gi._initialized=!0;for(const v of g)v.initialize(p,t)}t.registerEditorTypes(g),E(this,ft,t),this.pageIndex=e,this.div=n,E(this,Gr,i),E(this,si,a),this.viewport=f,E(this,Ne,d),this.drawLayer=h,u(this,ft).addLayer(this)}get isEmpty(){return u(this,an).size===0}get isInvisible(){return this.isEmpty&&u(this,ft).getMode()===Rt.NONE}updateToolbar(t){u(this,ft).updateToolbar(t)}updateMode(t=u(this,ft).getMode()){switch(_(this,Po,eg).call(this),t){case Rt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Rt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Rt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of u(Gi,ws).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=u(this,Ne))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(u(this,ft).getMode()!==Rt.INK)return;if(!t){for(const n of u(this,an).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){u(this,ft).setEditingState(t)}addCommands(t){u(this,ft).addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=u(this,si))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of u(this,an).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(u(this,ft).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!u(this,si))return;const e=u(this,si).getEditableAnnotations();for(const n of e){if(n.hide(),u(this,ft).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=this.deserialize(n);!i||(this.addOrRebuild(i),i.enableEditing())}}disable(){var i;E(this,To,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const a of u(this,an).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);(i=this.getEditableAnnotation(a.annotationElementId))==null||i.show(),a.remove()}if(u(this,si)){const a=u(this,si).getEditableAnnotations();for(const h of a){const{id:d}=h.data;if(u(this,ft).isDeletedAnnotationElement(d))continue;let f=e.get(d);if(f){f.resetAnnotationElement(h),f.show(!1),h.show();continue}f=t.get(d),f&&(u(this,ft).addChangedExistingAnnotation(f),f.renderAnnotationElement(h),f.show(!1)),h.show()}}_(this,Po,eg).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of u(Gi,ws).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),E(this,To,!1)}getEditableAnnotation(t){var e;return((e=u(this,si))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){u(this,ft).getActive()!==t&&u(this,ft).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,((t=u(this,Ne))==null?void 0:t.div)&&!u(this,Hi)&&(E(this,Hi,_(this,Zd,gS).bind(this)),u(this,Ne).div.addEventListener("pointerdown",u(this,Hi)),u(this,Ne).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,((t=u(this,Ne))==null?void 0:t.div)&&u(this,Hi)&&(u(this,Ne).div.removeEventListener("pointerdown",u(this,Hi)),E(this,Hi,null),u(this,Ne).div.classList.remove("highlighting"))}enableClick(){u(this,Ui)||(E(this,Ui,this.pointerdown.bind(this)),E(this,Vr,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",u(this,Ui)),this.div.addEventListener("pointerup",u(this,Vr)))}disableClick(){!u(this,Ui)||(this.div.removeEventListener("pointerdown",u(this,Ui)),this.div.removeEventListener("pointerup",u(this,Vr)),E(this,Ui,null),E(this,Vr,null))}attach(t){u(this,an).set(t.id,t);const{annotationElementId:e}=t;e&&u(this,ft).isDeletedAnnotationElement(e)&&u(this,ft).removeDeletedAnnotationElement(t)}detach(t){var e;u(this,an).delete(t.id),(e=u(this,Gr))==null||e.removePointerInTextLayer(t.contentDiv),!u(this,To)&&t.annotationElementId&&u(this,ft).addDeletedAnnotationElement(t)}remove(t){this.detach(t),u(this,ft).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,u(this,Co)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(u(this,ft).addDeletedAnnotationElement(t.annotationElementId),Mt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),u(this,ft).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),u(this,ft).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!u(this,zi)&&(t._focusEventsAllowed=!1,E(this,zi,setTimeout(()=>{E(this,zi,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0}),e.focus())},0))),t._structTreeParentId=(n=u(this,Gr))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return u(this,ft).getId()}canCreateNewEmptyEditor(){var t;return(t=u(this,bh,Zv))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){u(this,ft).updateToolbar(t),u(this,ft).updateMode(t);const{offsetX:n,offsetY:i}=_(this,Ah,Jv).call(this),a=this.getNextId(),h=_(this,yh,Qv).call(this,Xe({parent:this,id:a,x:n,y:i,uiManager:u(this,ft),isCentered:!0},e));h&&this.add(h)}deserialize(t){var e,n;return((n=u(Gi,ws).get((e=t.annotationType)!=null?e:t.annotationEditorType))==null?void 0:n.deserialize(t,this,u(this,ft)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),a=_(this,yh,Qv).call(this,Xe({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:u(this,ft),isCentered:e},n));return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(_(this,Ah,Jv).call(this),!0)}setSelected(t){u(this,ft).setSelected(t)}toggleSelected(t){u(this,ft).toggleSelected(t)}isSelected(t){return u(this,ft).isSelected(t)}unselect(t){u(this,ft).unselect(t)}pointerup(t){const{isMac:e}=Ue.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&!!u(this,_s)){if(E(this,_s,!1),!u(this,xo)){E(this,xo,!0);return}if(u(this,ft).getMode()===Rt.STAMP){u(this,ft).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(u(this,ft).getMode()===Rt.HIGHLIGHT&&this.enableTextSelection(),u(this,_s)){E(this,_s,!1);return}const{isMac:e}=Ue.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;E(this,_s,!0);const n=u(this,ft).getActive();E(this,xo,!n||n.isEmpty())}findNewParent(t,e,n){const i=u(this,ft).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}destroy(){var t,e;((t=u(this,ft).getActive())==null?void 0:t.parent)===this&&(u(this,ft).commitOrRemove(),u(this,ft).setActiveEditor(null)),u(this,zi)&&(clearTimeout(u(this,zi)),E(this,zi,null));for(const n of u(this,an).values())(e=u(this,Gr))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,an).clear(),u(this,ft).removeLayer(this)}render({viewport:t}){this.viewport=t,ks(this.div,t);for(const e of u(this,ft).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){u(this,ft).commitOrRemove(),_(this,Po,eg).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,ks(this.div,{rotation:n}),e!==n)for(const i of u(this,an).values())i.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return u(this,ft).viewParameters.realScale}};let lu=Gi;Gr=new WeakMap,xo=new WeakMap,si=new WeakMap,Vr=new WeakMap,Ui=new WeakMap,Hi=new WeakMap,zi=new WeakMap,an=new WeakMap,_s=new WeakMap,Co=new WeakMap,To=new WeakMap,Ne=new WeakMap,ft=new WeakMap,ws=new WeakMap,Zd=new WeakSet,gS=function(t){if(u(this,ft).unselectAll(),t.target===u(this,Ne).div){const{isMac:e}=Ue.platform;if(t.button!==0||t.ctrlKey&&e)return;u(this,ft).showAllEditors("highlight",!0,!0),u(this,Ne).div.classList.add("free"),De.startHighlighting(this,u(this,ft).direction==="ltr",t),u(this,Ne).div.addEventListener("pointerup",()=>{u(this,Ne).div.classList.remove("free")},{once:!0}),t.preventDefault()}},bh=new WeakSet,Zv=function(){return u(Gi,ws).get(u(this,ft).getMode())},yh=new WeakSet,Qv=function(t){const e=u(this,bh,Zv);return e?new e.prototype.constructor(t):null},Ah=new WeakSet,Jv=function(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,t),h=Math.max(0,e),d=Math.min(window.innerWidth,t+n),f=Math.min(window.innerHeight,e+i),p=(a+d)/2-t,g=(h+f)/2-e,[v,b]=this.viewport.rotation%180==0?[p,g]:[g,p];return{offsetX:v,offsetY:b}},Po=new WeakSet,eg=function(){E(this,Co,!0);for(const t of u(this,an).values())t.isEmpty()&&t.remove();E(this,Co,!1)},yt(lu,"_initialized",!1),ws.set(lu,new Map([Bn,jn,ou,De].map(t=>[t._editorType,t])));const re=class{constructor({pageIndex:t}){wh.add(this);Qd.add(this);ri.set(this,null);Eh.set(this,0);de.set(this,new Map);Ss.set(this,new Map);this.pageIndex=t}setParent(t){if(!u(this,ri)){E(this,ri,t);return}if(u(this,ri)!==t){if(u(this,de).size>0)for(const e of u(this,de).values())e.remove(),t.append(e);E(this,ri,t)}}static get _svgFactory(){return Dt(this,"_svgFactory",new Wf)}highlight(t,e,n,i=!1){var b;const a=(E(this,Eh,(b=+u(this,Eh))+1),b),h=_(this,wh,eb).call(this,t.box);h.classList.add("highlight"),t.free&&h.classList.add("free");const d=re._svgFactory.createElement("defs");h.append(d);const f=re._svgFactory.createElement("path");d.append(f);const p=`path_p${this.pageIndex}_${a}`;f.setAttribute("id",p),f.setAttribute("d",t.toSVGPath()),i&&u(this,Ss).set(a,f);const g=_(this,Qd,mS).call(this,d,p),v=re._svgFactory.createElement("use");return h.append(v),h.setAttribute("fill",e),h.setAttribute("fill-opacity",n),v.setAttribute("href",`#${p}`),u(this,de).set(a,h),{id:a,clipPathId:`url(#${g})`}}highlightOutline(t){var g;const e=(E(this,Eh,(g=+u(this,Eh))+1),g),n=_(this,wh,eb).call(this,t.box);n.classList.add("highlightOutline");const i=re._svgFactory.createElement("defs");n.append(i);const a=re._svgFactory.createElement("path");i.append(a);const h=`path_p${this.pageIndex}_${e}`;a.setAttribute("id",h),a.setAttribute("d",t.toSVGPath()),a.setAttribute("vector-effect","non-scaling-stroke");let d;if(t.free){n.classList.add("free");const v=re._svgFactory.createElement("mask");i.append(v),d=`mask_p${this.pageIndex}_${e}`,v.setAttribute("id",d),v.setAttribute("maskUnits","objectBoundingBox");const b=re._svgFactory.createElement("rect");v.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const y=re._svgFactory.createElement("use");v.append(y),y.setAttribute("href",`#${h}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const f=re._svgFactory.createElement("use");n.append(f),f.setAttribute("href",`#${h}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return n.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),u(this,de).set(e,n),e}finalizeLine(t,e){const n=u(this,Ss).get(t);u(this,Ss).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){u(this,de).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),u(this,Ss).delete(t)}updatePath(t,e){u(this,Ss).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){_(re,_h,tb).call(re,u(this,de).get(t),e)}show(t,e){u(this,de).get(t).classList.toggle("hidden",!e)}rotate(t,e){u(this,de).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){u(this,de).get(t).setAttribute("fill",e)}changeOpacity(t,e){u(this,de).get(t).setAttribute("fill-opacity",e)}addClass(t,e){u(this,de).get(t).classList.add(e)}removeClass(t,e){u(this,de).get(t).classList.remove(e)}remove(t){u(this,ri)!==null&&(u(this,de).get(t).remove(),u(this,de).delete(t))}destroy(){E(this,ri,null);for(const t of u(this,de).values())t.remove();u(this,de).clear()}};let gp=re;ri=new WeakMap,Eh=new WeakMap,de=new WeakMap,Ss=new WeakMap,_h=new WeakSet,tb=function(t,{x:e=0,y:n=0,width:i=1,height:a=1}={}){const{style:h}=t;h.top=`${100*n}%`,h.left=`${100*e}%`,h.width=`${100*i}%`,h.height=`${100*a}%`},wh=new WeakSet,eb=function(t){const e=re._svgFactory.create(1,1,!0);return u(this,ri).append(e),e.setAttribute("aria-hidden",!0),_(re,_h,tb).call(re,e,t),e},Qd=new WeakSet,mS=function(t,e){const n=re._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=re._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),i},_h.add(gp);const VS="4.3.136",$S="0cec64437";var mE=W.AbortException,vE=W.AnnotationEditorLayer,bE=W.AnnotationEditorParamsType,yE=W.AnnotationEditorType,AE=W.AnnotationEditorUIManager,e0=W.AnnotationLayer,n0=W.AnnotationMode,EE=W.CMapCompressionType,_E=W.ColorPicker,wE=W.DOMSVGFactory,SE=W.DrawLayer,xE=W.FeatureTest,i0=W.GlobalWorkerOptions,CE=W.ImageKind,TE=W.InvalidPDFException,PE=W.MissingPDFException,RE=W.OPS,LE=W.Outliner,kE=W.PDFDataRangeTransport,IE=W.PDFDateString,DE=W.PDFWorker,ME=W.PasswordResponses,OE=W.PermissionFlag,FE=W.PixelsPerInch,NE=W.RenderingCancelledException,s0=W.TextLayer,BE=W.UnexpectedResponseException,jE=W.Util,UE=W.VerbosityLevel,HE=W.XfaLayer,zE=W.build,GE=W.createValidAbsoluteUrl,VE=W.fetchData,r0=W.getDocument,$E=W.getFilenameFromUrl,WE=W.getPdfFilenameFromUrl,YE=W.getXfaPageViewport,XE=W.isDataScheme,qE=W.isPdfFile,KE=W.noContextMenu,ZE=W.normalizeUnicode,QE=W.renderTextLayer,JE=W.setLayerDimensions,t1=W.shadow,e1=W.updateTextLayer,n1=W.version,i1=function(){return"file:///E:/works/antdpro-base-demo/node_modules/react-doc-viewer/build/utils/importMeta.js"},a0="SET_ZOOM_LEVEL",mp=function(o){return{type:a0,value:o}},o0="SET_PDF_PAGINATED",s1=function(o){return{type:o0,value:o}},l0="SET_NUM_PAGES",c0=function(o){return{type:l0,value:o}},h0="SET_CURRENT_PAGE",u0=function(o){return{type:h0,value:o}},Un=function(){return Un=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Un.apply(this,arguments)},ia={zoomLevel:1,paginated:!0,numPages:0,currentPage:1},r1=function(o,t){switch(o===void 0&&(o=ia),t.type){case a0:{var e=t.value;return Un(Un({},o),{zoomLevel:e})}case o0:{var e=t.value;return Un(Un({},o),{paginated:e})}case l0:{var e=t.value;return Un(Un({},o),{numPages:e})}case h0:{var e=t.value;return Un(Un({},o),{currentPage:e})}default:return o}},cu=function(){return cu=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},cu.apply(this,arguments)},sa=(0,P.createContext)({state:ia,dispatch:function(){return null}}),a1=function(o){var t=o.children,e=o.mainState,n=(0,P.useReducer)(r1,cu(cu({},ia),{mainState:e})),i=n[0],a=n[1];return P.createElement(sa.Provider,{value:{state:i,dispatch:a}},t)},ra=function(){return ra=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},ra.apply(this,arguments)},o1=function(o){return P.createElement(d0,ra({},o,{reverse:!0}))},l1=function(o){return P.createElement(d0,ra({},o))},d0=function(o){var t=o.color,e=o.size,n=o.reverse;return P.createElement("svg",{width:e||"100%",height:e||"100%",style:{transform:"".concat(n?"rotate(180deg)":"")},viewBox:"0 0 12 12",version:"1.1"},P.createElement("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},P.createElement("g",{id:"Rounded",transform:"translate(-548.000000, -1000.000000)"},P.createElement("g",{id:"AV",transform:"translate(100.000000, 852.000000)"},P.createElement("g",{id:"-Round-/-AV-/-skip_next",transform:"translate(442.000000, 142.000000)"},P.createElement("g",null,P.createElement("rect",{id:"Rectangle-Copy-52",x:"0",y:"0",width:"24",height:"24"}),P.createElement("path",{d:"M7.58,16.89 L13.35,12.82 C13.91,12.42 13.91,11.58 13.35,11.19 L7.58,7.11 C6.91,6.65 6,7.12 6,7.93 L6,16.07 C6,16.88 6.91,17.35 7.58,16.89 Z M16,7 L16,17 C16,17.55 16.45,18 17,18 C17.55,18 18,17.55 18,17 L18,7 C18,6.45 17.55,6 17,6 C16.45,6 16,6.45 16,7 Z",id:"icon_color",fill:t||"#aaa"})))))))},c1=function(o){var t=o.color,e=o.size,n=o.reverse;return P.createElement("svg",{width:e||"100%",height:e||"100%",style:{transform:"".concat(n?"rotate(180deg)":"")},id:"Layer_1",viewBox:"0 0 24 24"},P.createElement("path",{d:"M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z",fill:t||"#aaa"}),P.createElement("polygon",{points:"12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11",fill:t||"#aaa"}))},h1=function(o){return P.createElement(f0,ra({},o))},u1=function(o){return P.createElement(f0,ra({},o,{reverse:!0}))},f0=function(o){var t=o.color,e=o.size,n=o.reverse;return P.createElement("svg",{width:e||"100%",height:e||"100%",viewBox:"0 0 32 32",version:"1.1"},P.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},P.createElement("g",{id:"search-plus-icon",fill:t||"#aaa"},P.createElement("path",{id:"search-plus",d:n?"M 13 13 L 16 13 L 19 13 L 19 16 L 16 16 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z":"M 13 13 L 13 10 L 16 10 L 16 13 L 19 13 L 19 16 L 16 16 L 16 19 L 13 19 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z"}))))},d1=function(o){var t=o.color,e=o.size;return P.createElement("svg",{width:e||"100%",height:e||"100%",viewBox:"0 0 24 24"},P.createElement("path",{fill:t||"#aaa",d:"M9.29,13.29,4,18.59V17a1,1,0,0,0-2,0v4a1,1,0,0,0,.08.38,1,1,0,0,0,.54.54A1,1,0,0,0,3,22H7a1,1,0,0,0,0-2H5.41l5.3-5.29a1,1,0,0,0-1.42-1.42ZM5.41,4H7A1,1,0,0,0,7,2H3a1,1,0,0,0-.38.08,1,1,0,0,0-.54.54A1,1,0,0,0,2,3V7A1,1,0,0,0,4,7V5.41l5.29,5.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM21,16a1,1,0,0,0-1,1v1.59l-5.29-5.3a1,1,0,0,0-1.42,1.42L18.59,20H17a1,1,0,0,0,0,2h4a1,1,0,0,0,.38-.08,1,1,0,0,0,.54-.54A1,1,0,0,0,22,21V17A1,1,0,0,0,21,16Zm.92-13.38a1,1,0,0,0-.54-.54A1,1,0,0,0,21,2H17a1,1,0,0,0,0,2h1.59l-5.3,5.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L20,5.41V7a1,1,0,0,0,2,0V3A1,1,0,0,0,21.92,2.62Z"}))},f1=function(o){var t=o.color,e=o.size,n=o.reverse;return P.createElement("svg",{width:e||"100%",height:e||"100%",style:{transform:"".concat(n?"rotate(90deg)":"")},version:"1.1",id:"Scroll_1",viewBox:"0 0 297 297",xmlSpace:"preserve"},P.createElement("path",{fill:t||"#aaa",d:`M206.004,200.723h-31.231V96.277h31.231c0.005,0,0.014,0,0.019,0c5.289,0,9.575-4.287,9.575-9.574
  c0-2.342-0.841-4.488-2.236-6.151L156.168,3.851C154.36,1.428,151.515,0,148.492,0c-3.023,0-5.868,1.428-7.675,3.851L83.302,80.98
  c-2.166,2.902-2.507,6.779-0.883,10.017c1.624,3.236,4.936,5.28,8.559,5.28h31.231v104.445H90.978c-3.623,0-6.934,2.044-8.559,5.28
  c-1.624,3.237-1.283,7.114,0.883,10.017l57.513,77.129c1.808,2.424,4.652,3.852,7.675,3.852c3.023,0,5.868-1.428,7.676-3.852
  l57.514-77.129c2.164-2.902,2.507-6.779,0.883-10.017C212.938,202.767,209.627,200.723,206.004,200.723z`}))},hu=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},p1=function(){var o=(0,P.useContext)(sa),t=o.state,e=t.currentPage,n=t.numPages,i=o.dispatch;return P.createElement(m1,{id:"pdf-pagination"},P.createElement(p0,{id:"pdf-pagination-prev",onClick:function(){return i(u0(e-1))},disabled:e===1},P.createElement(o1,{color:"#000",size:"50%"})),P.createElement(b1,{id:"pdf-pagination-info"},"Page ",e,"/",n),P.createElement(v1,{id:"pdf-pagination-next",onClick:function(){return i(u0(e+1))},disabled:e>=n},P.createElement(l1,{color:"#000",size:"50%"})))},g1=p1,m1=St.div(g0||(g0=hu([`
  display: flex;
  align-items: center;
`],[`
  display: flex;
  align-items: center;
`]))),p0=St(Mh)(m0||(m0=hu([`
  width: 30px;
  height: 30px;
  margin: 0 5px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`],[`
  width: 30px;
  height: 30px;
  margin: 0 5px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`]))),v1=St(p0)(v0||(v0=hu([`
  margin: 0 20px 0 5px;
`],[`
  margin: 0 20px 0 5px;
`]))),b1=St.div(b0||(b0=hu([`
  color: `,`;
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`],[`
  color: `,`;
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`])),function(o){return o.theme.text_primary}),g0,m0,v0,b0,vp=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},y1=function(){var o=(0,P.useContext)(sa),t=o.state,e=t.mainState,n=t.paginated,i=t.zoomLevel,a=t.numPages,h=o.dispatch,d=(e==null?void 0:e.currentDocument)||null;return P.createElement(E1,{id:"pdf-controls"},n&&a>1&&P.createElement(g1,null),(d==null?void 0:d.fileData)&&P.createElement(_1,{id:"pdf-download",href:d==null?void 0:d.fileData,download:d==null?void 0:d.uri},P.createElement(c1,{color:"#000",size:"75%"})),P.createElement(uu,{id:"pdf-zoom-out",onMouseDown:function(){return h(mp(i-.1))}},P.createElement(u1,{color:"#000",size:"80%"})),P.createElement(uu,{id:"pdf-zoom-in",onMouseDown:function(){return h(mp(i+.1))}},P.createElement(h1,{color:"#000",size:"80%"})),P.createElement(uu,{id:"pdf-zoom-reset",onMouseDown:function(){return h(mp(ia.zoomLevel))},disabled:i===ia.zoomLevel},P.createElement(d1,{color:"#000",size:"70%"})),a>1&&P.createElement(uu,{id:"pdf-toggle-pagination",onMouseDown:function(){return h(s1(!n))}},P.createElement(f1,{color:"#000",size:"70%",reverse:n})))},A1=y1,E1=St.div(y0||(y0=vp([`
  display: flex;
  position: sticky;
  top: 0;
  left: 0;
  z-index: 1;
  justify-content: flex-end;
  padding: 8px;
  background-color: `,`;
  box-shadow: 0px 2px 3px #00000033;

  @media (max-width: 768px) {
    padding: 6px;
  }
`],[`
  display: flex;
  position: sticky;
  top: 0;
  left: 0;
  z-index: 1;
  justify-content: flex-end;
  padding: 8px;
  background-color: `,`;
  box-shadow: 0px 2px 3px #00000033;

  @media (max-width: 768px) {
    padding: 6px;
  }
`])),function(o){return o.theme.tertiary}),uu=St(Mh)(A0||(A0=vp([`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`],[`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`]))),_1=St(Cg)(E0||(E0=vp([`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`],[`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`]))),y0,A0,E0,Qt=at(85893),pe=function(o,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return o.concat(a||Array.prototype.slice.call(t))},w1=["onCopy","onCut","onPaste"],S1=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],x1=["onFocus","onBlur"],C1=["onInput","onInvalid","onReset","onSubmit"],T1=["onLoad","onError"],P1=["onKeyDown","onKeyPress","onKeyUp"],R1=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],L1=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],k1=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],I1=["onSelect"],D1=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],M1=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],O1=["onScroll"],F1=["onWheel"],N1=["onAnimationStart","onAnimationEnd","onAnimationIteration"],B1=["onTransitionEnd"],j1=["onToggle"],U1=["onChange"],H1=pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe(pe([],w1,!0),S1,!0),x1,!0),C1,!0),T1,!0),P1,!0),R1,!0),L1,!0),k1,!0),I1,!0),D1,!0),M1,!0),O1,!0),F1,!0),N1,!0),B1,!0),U1,!0),j1,!0);function _0(o,t){var e={};return H1.forEach(function(n){var i=o[n];!i||(t?e[n]=function(a){return i(a,t(n))}:e[n]=i)}),e}function el(o){var t=!1,e=new Promise(function(n,i){o.then(function(a){return!t&&n(a)}).catch(function(a){return!t&&i(a)})});return{promise:e,cancel:function(){t=!0}}}function w0(o){var t,e,n="";if(typeof o=="string"||typeof o=="number")n+=o;else if(typeof o=="object")if(Array.isArray(o)){var i=o.length;for(t=0;t<i;t++)o[t]&&(e=w0(o[t]))&&(n&&(n+=" "),n+=e)}else for(e in o)o[e]&&(n&&(n+=" "),n+=e);return n}function z1(){for(var o,t,e=0,n="",i=arguments.length;e<i;e++)(o=arguments[e])&&(t=w0(o))&&(n&&(n+=" "),n+=t);return n}var du=z1,zt=at(92600),Me=at(42473),S0=Object.prototype.hasOwnProperty;function x0(o,t,e){for(e of o.keys())if(aa(e,t))return e}function aa(o,t){var e,n,i;if(o===t)return!0;if(o&&t&&(e=o.constructor)===t.constructor){if(e===Date)return o.getTime()===t.getTime();if(e===RegExp)return o.toString()===t.toString();if(e===Array){if((n=o.length)===t.length)for(;n--&&aa(o[n],t[n]););return n===-1}if(e===Set){if(o.size!==t.size)return!1;for(n of o)if(i=n,i&&typeof i=="object"&&(i=x0(t,i),!i)||!t.has(i))return!1;return!0}if(e===Map){if(o.size!==t.size)return!1;for(n of o)if(i=n[0],i&&typeof i=="object"&&(i=x0(t,i),!i)||!aa(n[1],t.get(i)))return!1;return!0}if(e===ArrayBuffer)o=new Uint8Array(o),t=new Uint8Array(t);else if(e===DataView){if((n=o.byteLength)===t.byteLength)for(;n--&&o.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(o)){if((n=o.byteLength)===t.byteLength)for(;n--&&o[n]===t[n];);return n===-1}if(!e||typeof o=="object"){n=0;for(e in o)if(S0.call(o,e)&&++n&&!S0.call(t,e)||!(e in t)||!aa(o[e],t[e]))return!1;return Object.keys(t).length===n}}return o!==o&&t!==t}var C0=(0,P.createContext)(null);function oa({children:o,type:t}){return(0,Qt.jsx)("div",{className:`react-pdf__message react-pdf__message--${t}`,children:o})}const G1="noopener noreferrer nofollow";class V1{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return(0,zt.Z)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){(0,zt.Z)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{(0,zt.Z)(this.pdfDocument,"PDF document not loaded."),(0,zt.Z)(t,"Destination is not specified."),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{(0,zt.Z)(Array.isArray(e),`"${e}" is not a valid destination array.`);const n=e[0];new Promise(i=>{(0,zt.Z)(this.pdfDocument,"PDF document not loaded."),n instanceof Object?this.pdfDocument.getPageIndex(n).then(a=>{i(a)}).catch(()=>{(0,zt.Z)(!1,`"${n}" is not a valid page reference.`)}):typeof n=="number"?i(n):(0,zt.Z)(!1,`"${n}" is not a valid destination reference.`)}).then(i=>{const a=i+1;(0,zt.Z)(this.pdfViewer,"PDF viewer is not initialized."),(0,zt.Z)(a>=1&&a<=this.pagesCount,`"${a}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:i,pageNumber:a})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;(0,zt.Z)(this.pdfViewer,"PDF viewer is not initialized."),(0,zt.Z)(t>=1&&t<=this.pagesCount,`"${t}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||G1,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}var T0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};const fu=typeof document!="undefined",P0=fu&&window.location.protocol==="file:";function $1(o){return typeof o!="undefined"}function Os(o){return $1(o)&&o!==null}function W1(o){return typeof o=="string"}function Y1(o){return o instanceof ArrayBuffer}function X1(o){return(0,zt.Z)(fu,"isBlob can only be used in a browser environment"),o instanceof Blob}function bp(o){return W1(o)&&/^data:/.test(o)}function R0(o){(0,zt.Z)(bp(o),"Invalid data URI.");const[t="",e=""]=o.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function q1(){return fu&&window.devicePixelRatio||1}const L0="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function k0(){Me(!P0,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${L0}`)}function YS(){warning(!P0,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${L0}`)}function Fs(o){o&&o.cancel&&o.cancel()}function yp(o,t){return Object.defineProperty(o,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(o,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(o,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(o,"originalHeight",{get(){return this.view[3]},configurable:!0}),o}function K1(o){return o.name==="RenderingCancelledException"}function Z1(o){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=i=>{if(!i.target)return e(new Error("Error while reading a file."));const{error:a}=i.target;if(!a)return e(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(o)})}function Q1(o,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return o}}function la(){return(0,P.useReducer)(Q1,{value:void 0,error:void 0})}var J1=function(o,t,e,n){function i(a){return a instanceof e?a:new e(function(h){h(a)})}return new(e||(e=Promise))(function(a,h){function d(g){try{p(n.next(g))}catch(v){h(v)}}function f(g){try{p(n.throw(g))}catch(v){h(v)}}function p(g){g.done?a(g.value):i(g.value).then(d,f)}p((n=n.apply(o,t||[])).next())})},I0=function(o,t){var e={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&t.indexOf(n)<0&&(e[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(o);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(o,n[i])&&(e[n[i]]=o[n[i]]);return e};const{PDFDataRangeTransport:t_}=_t,e_=(o,t)=>{switch(t){case T0.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");o(e);break}case T0.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");o(e);break}default:}};function D0(o){return typeof o=="object"&&o!==null&&("data"in o||"range"in o||"url"in o)}var n_=(0,P.forwardRef)(function(t,e){var{children:n,className:i,error:a="Failed to load PDF file.",externalLinkRel:h,externalLinkTarget:d,file:f,inputRef:p,imageResourcesPath:g,loading:v="Loading PDF\u2026",noData:b="No PDF file specified.",onItemClick:y,onLoadError:A,onLoadProgress:S,onLoadSuccess:C,onPassword:T=e_,onSourceError:L,onSourceSuccess:k,options:I,renderMode:O,rotate:N}=t,U=I0(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[q,Y]=la(),{value:Z,error:H}=q,[st,it]=la(),{value:ht,error:ot}=st,At=(0,P.useRef)(new V1),V=(0,P.useRef)([]),J=(0,P.useRef)(void 0),$t=(0,P.useRef)(void 0);f&&f!==J.current&&D0(f)&&(Me(!aa(f,J.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),J.current=f),I&&I!==$t.current&&(Me(!aa(I,$t.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),$t.current=I);const Xt=(0,P.useRef)({scrollPageIntoView:ut=>{const{dest:dt,pageNumber:Lt,pageIndex:fe=Lt-1}=ut;if(y){y({dest:dt,pageIndex:fe,pageNumber:Lt});return}const Wt=V.current[fe];if(Wt){Wt.scrollIntoView();return}Me(!1,`An internal link leading to page ${Lt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});(0,P.useImperativeHandle)(e,()=>({linkService:At,pages:V,viewer:Xt}),[]);function te(){k&&k()}function $(){!H||(Me(!1,H.toString()),L&&L(H))}function z(){Y({type:"RESET"})}(0,P.useEffect)(z,[f,Y]);const X=(0,P.useCallback)(()=>J1(this,void 0,void 0,function*(){if(!f)return null;if(typeof f=="string")return bp(f)?{data:R0(f)}:(k0(),{url:f});if(f instanceof t_)return{range:f};if(Y1(f))return{data:f};if(fu&&X1(f))return{data:yield Z1(f)};if((0,zt.Z)(typeof f=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),(0,zt.Z)(D0(f),"Invalid parameter object: need either .data, .range or .url"),"url"in f&&typeof f.url=="string"){if(bp(f.url)){const{url:ut}=f,dt=I0(f,["url"]),Lt=R0(ut);return Object.assign({data:Lt},dt)}k0()}return f}),[f]);(0,P.useEffect)(()=>{const ut=el(X());return ut.promise.then(dt=>{Y({type:"RESOLVE",value:dt})}).catch(dt=>{Y({type:"REJECT",error:dt})}),()=>{Fs(ut)}},[X,Y]),(0,P.useEffect)(()=>{if(typeof Z!="undefined"){if(Z===!1){$();return}te()}},[Z]);function rt(){!ht||(C&&C(ht),V.current=new Array(ht.numPages),At.current.setDocument(ht))}function M(){!ot||(Me(!1,ot.toString()),A&&A(ot))}function tt(){it({type:"RESET"})}(0,P.useEffect)(tt,[it,Z]);function G(){if(!Z)return;const ut=Object.assign(Object.assign({},Z),I),dt=r0(ut);S&&(dt.onProgress=S),T&&(dt.onPassword=T);const Lt=dt;return Lt.promise.then(fe=>{it({type:"RESOLVE",value:fe})}).catch(fe=>{Lt.destroyed||it({type:"REJECT",error:fe})}),()=>{Lt.destroy()}}(0,P.useEffect)(G,[I,it,Z]),(0,P.useEffect)(()=>{if(typeof ht!="undefined"){if(ht===!1){M();return}rt()}},[ht]);function mt(){At.current.setViewer(Xt.current),At.current.setExternalLinkRel(h),At.current.setExternalLinkTarget(d)}(0,P.useEffect)(mt,[h,d]);function nt(ut,dt){V.current[ut]=dt}function xt(ut){delete V.current[ut]}const pt=(0,P.useMemo)(()=>({imageResourcesPath:g,linkService:At.current,onItemClick:y,pdf:ht,registerPage:nt,renderMode:O,rotate:N,unregisterPage:xt}),[g,y,ht,O,N]),Tt=(0,P.useMemo)(()=>_0(U,()=>ht),[U,ht]);function Bt(){return(0,Qt.jsx)(C0.Provider,{value:pt,children:n})}function vt(){return f?ht==null?(0,Qt.jsx)(oa,{type:"loading",children:typeof v=="function"?v():v}):ht===!1?(0,Qt.jsx)(oa,{type:"error",children:typeof a=="function"?a():a}):Bt():(0,Qt.jsx)(oa,{type:"no-data",children:typeof b=="function"?b():b})}return(0,Qt.jsx)("div",Object.assign({className:du("react-pdf__Document",i),ref:p,style:{["--scale-factor"]:"1"}},Tt,{children:vt()}))});function M0(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var e=o.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(a){e.forEach(function(h){typeof h=="function"?h(a):h&&(h.current=a)})}}var O0=(0,P.createContext)(null);const F0={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},i_=/^H(\d+)$/;function s_(o){return o in F0}function pu(o){return"children"in o}function N0(o){return pu(o)?o.children.length===1&&0 in o.children&&"id"in o.children[0]:!1}function r_(o){const t={};if(pu(o)){const{role:e}=o,n=e.match(i_);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(s_(e)){const i=F0[e];i&&(t.role=i)}}return t}function B0(o){const t={};if(pu(o)){if(o.alt!==void 0&&(t["aria-label"]=o.alt),o.lang!==void 0&&(t.lang=o.lang),N0(o)){const[e]=o.children;if(e){const n=B0(e);return Object.assign(Object.assign({},t),n)}}}else"id"in o&&(t["aria-owns"]=o.id);return t}function a_(o){return o?Object.assign(Object.assign({},r_(o)),B0(o)):null}function j0({className:o,node:t}){const e=(0,P.useMemo)(()=>a_(t),[t]),n=(0,P.useMemo)(()=>!pu(t)||N0(t)?null:t.children.map((i,a)=>(0,Qt.jsx)(j0,{node:i},a)),[t]);return(0,Qt.jsx)("span",Object.assign({className:o},e,{children:n}))}function gu(){return(0,P.useContext)(O0)}function o_(){const o=gu();(0,zt.Z)(o,"Unable to find Page context.");const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=o,[n,i]=la(),{value:a,error:h}=n,{customTextRenderer:d,page:f}=o;function p(){!a||e&&e(a)}function g(){!h||(Me(!1,h.toString()),t&&t(h))}function v(){i({type:"RESET"})}(0,P.useEffect)(v,[i,f]);function b(){if(d||!f)return;const y=el(f.getStructTree()),A=y;return y.promise.then(S=>{i({type:"RESOLVE",value:S})}).catch(S=>{i({type:"REJECT",error:S})}),()=>Fs(A)}return(0,P.useEffect)(b,[d,f,i]),(0,P.useEffect)(()=>{if(a!==void 0){if(a===!1){g();return}p()}},[a]),a?(0,Qt.jsx)(j0,{className:"react-pdf__Page__structTree structTree",node:a}):null}const U0=n0;function l_(o){const t=gu();(0,zt.Z)(t,"Unable to find Page context.");const e=Object.assign(Object.assign({},t),o),{_className:n,canvasBackground:i,devicePixelRatio:a=q1(),onRenderError:h,onRenderSuccess:d,page:f,renderForms:p,renderTextLayer:g,rotate:v,scale:b}=e,{canvasRef:y}=o;(0,zt.Z)(f,"Attempted to render page canvas, but no page was specified.");const A=(0,P.useRef)(null);function S(){!f||d&&d(yp(f,b))}function C(O){K1(O)||(Me(!1,O.toString()),h&&h(O))}const T=(0,P.useMemo)(()=>f.getViewport({scale:b*a,rotation:v}),[a,f,v,b]),L=(0,P.useMemo)(()=>f.getViewport({scale:b,rotation:v}),[f,v,b]);function k(){if(!f)return;f.cleanup();const{current:O}=A;if(!O)return;O.width=T.width,O.height=T.height,O.style.width=`${Math.floor(L.width)}px`,O.style.height=`${Math.floor(L.height)}px`,O.style.visibility="hidden";const N={annotationMode:p?U0.ENABLE_FORMS:U0.ENABLE,canvasContext:O.getContext("2d",{alpha:!1}),viewport:T};i&&(N.background=i);const U=f.render(N),q=U;return U.promise.then(()=>{O.style.visibility="",S()}).catch(C),()=>Fs(q)}(0,P.useEffect)(k,[i,A,a,f,p,T,L]);const I=(0,P.useCallback)(()=>{const{current:O}=A;O&&(O.width=0,O.height=0)},[A]);return(0,P.useEffect)(()=>I,[I]),(0,Qt.jsx)("canvas",{className:`${n}__canvas`,dir:"ltr",ref:M0(y,A),style:{display:"block",userSelect:"none"},children:g?(0,Qt.jsx)(o_,{}):null})}function c_(o){return"str"in o}function h_(){const o=gu();(0,zt.Z)(o,"Unable to find Page context.");const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:a,page:h,pageIndex:d,pageNumber:f,rotate:p,scale:g}=o;(0,zt.Z)(h,"Attempted to load page text content, but no page was specified.");const[v,b]=la(),{value:y,error:A}=v,S=(0,P.useRef)(null),C=(0,P.useRef)(void 0);Me(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function T(){!y||n&&n(y)}function L(){!A||(Me(!1,A.toString()),e&&e(A))}function k(){b({type:"RESET"})}(0,P.useEffect)(k,[h,b]);function I(){if(!h)return;const H=el(h.getTextContent()),st=H;return H.promise.then(it=>{b({type:"RESOLVE",value:it})}).catch(it=>{b({type:"REJECT",error:it})}),()=>Fs(st)}(0,P.useEffect)(I,[h,b]),(0,P.useEffect)(()=>{if(y!==void 0){if(y===!1){L();return}T()}},[y]);const O=(0,P.useCallback)(()=>{a&&a()},[a]),N=(0,P.useCallback)(H=>{Me(!1,H.toString()),i&&i(H)},[i]);function U(){const H=C.current;!H||H.classList.add("active")}function q(){const H=C.current;!H||H.classList.remove("active")}const Y=(0,P.useMemo)(()=>h.getViewport({scale:g,rotation:p}),[h,p,g]);function Z(){if(!h||!y)return;const{current:H}=S;if(!H)return;H.innerHTML="";const st=h.streamTextContent({includeMarkedContent:!0}),it={container:H,textContentSource:st,viewport:Y},ht=new s0(it),ot=ht;return ht.render().then(()=>{const At=document.createElement("div");At.className="endOfContent",H.append(At),C.current=At;const V=H.querySelectorAll('[role="presentation"]');if(t){let J=0;y.items.forEach(($t,Xt)=>{if(!c_($t))return;const te=V[J];if(!te)return;const $=t(Object.assign({pageIndex:d,pageNumber:f,itemIndex:Xt},$t));te.innerHTML=$,J+=$t.str&&$t.hasEOL?2:1})}O()}).catch(N),()=>Fs(ot)}return(0,P.useLayoutEffect)(Z,[t,N,O,h,d,f,y,Y]),(0,Qt.jsx)("div",{className:du("react-pdf__Page__textContent","textLayer"),onMouseUp:q,onMouseDown:U,ref:S})}function H0(){return(0,P.useContext)(C0)}function u_(){const o=H0(),t=gu();(0,zt.Z)(t,"Unable to find Page context.");const e=Object.assign(Object.assign({},o),t),{imageResourcesPath:n,linkService:i,onGetAnnotationsError:a,onGetAnnotationsSuccess:h,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:f,page:p,pdf:g,renderForms:v,rotate:b,scale:y=1}=e;(0,zt.Z)(g,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),(0,zt.Z)(p,"Attempted to load page annotations, but no page was specified."),(0,zt.Z)(i,"Attempted to load page annotations, but no linkService was specified.");const[A,S]=la(),{value:C,error:T}=A,L=(0,P.useRef)(null);Me(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function k(){!C||h&&h(C)}function I(){!T||(Me(!1,T.toString()),a&&a(T))}function O(){S({type:"RESET"})}(0,P.useEffect)(O,[S,p]);function N(){if(!p)return;const H=el(p.getAnnotations()),st=H;return H.promise.then(it=>{S({type:"RESOLVE",value:it})}).catch(it=>{S({type:"REJECT",error:it})}),()=>{Fs(st)}}(0,P.useEffect)(N,[S,p,v]),(0,P.useEffect)(()=>{if(C!==void 0){if(C===!1){I();return}k()}},[C]);function U(){f&&f()}function q(H){Me(!1,`${H}`),d&&d(H)}const Y=(0,P.useMemo)(()=>p.getViewport({scale:y,rotation:b}),[p,b,y]);function Z(){if(!g||!p||!i||!C)return;const{current:H}=L;if(!H)return;const st=Y.clone({dontFlip:!0}),it={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:H,l10n:null,page:p,viewport:st},ht={annotations:C,annotationStorage:g.annotationStorage,div:H,imageResourcesPath:n,linkService:i,page:p,renderForms:v,viewport:st};H.innerHTML="";try{new e0(it).render(ht),U()}catch(ot){q(ot)}return()=>{}}return(0,P.useEffect)(Z,[C,n,i,p,v,Y]),(0,Qt.jsx)("div",{className:du("react-pdf__Page__annotations","annotationLayer"),ref:L})}var d_=function(o,t){var e={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&t.indexOf(n)<0&&(e[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(o);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(o,n[i])&&(e[n[i]]=o[n[i]]);return e};const z0=1;function f_(o){const t=H0(),e=Object.assign(Object.assign({},t),o),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:a,canvasRef:h,children:d,className:f,customRenderer:p,customTextRenderer:g,devicePixelRatio:v,error:b="Failed to load the page.",height:y,inputRef:A,loading:S="Loading page\u2026",noData:C="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:L,onGetStructTreeError:k,onGetStructTreeSuccess:I,onGetTextError:O,onGetTextSuccess:N,onLoadError:U,onLoadSuccess:q,onRenderAnnotationLayerError:Y,onRenderAnnotationLayerSuccess:Z,onRenderError:H,onRenderSuccess:st,onRenderTextLayerError:it,onRenderTextLayerSuccess:ht,pageIndex:ot,pageNumber:At,pdf:V,registerPage:J,renderAnnotationLayer:$t=!0,renderForms:Xt=!1,renderMode:te="canvas",renderTextLayer:$=!0,rotate:z,scale:X=z0,unregisterPage:rt,width:M}=e,tt=d_(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[G,mt]=la(),{value:nt,error:xt}=G,pt=(0,P.useRef)(null);(0,zt.Z)(V,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Tt=Os(At)?At-1:ot!=null?ot:null,Bt=At!=null?At:Os(ot)?ot+1:null,vt=z!=null?z:nt?nt.rotate:null,ut=(0,P.useMemo)(()=>{if(!nt)return null;let Ro=1;const Lp=X!=null?X:z0;if(M||y){const Lo=nt.getViewport({scale:1,rotation:vt});M?Ro=M/Lo.width:y&&(Ro=y/Lo.height)}return Lp*Ro},[y,nt,vt,X,M]);function dt(){return()=>{!Os(Tt)||i&&rt&&rt(Tt)}}(0,P.useEffect)(dt,[i,V,Tt,rt]);function Lt(){if(q){if(!nt||!ut)return;q(yp(nt,ut))}if(i&&J){if(!Os(Tt)||!pt.current)return;J(Tt,pt.current)}}function fe(){!xt||(Me(!1,xt.toString()),U&&U(xt))}function Wt(){mt({type:"RESET"})}(0,P.useEffect)(Wt,[mt,V,Tt]);function pn(){if(!V||!Bt)return;const Ro=el(V.getPage(Bt)),Lp=Ro;return Ro.promise.then(Lo=>{mt({type:"RESOLVE",value:Lo})}).catch(Lo=>{mt({type:"REJECT",error:Lo})}),()=>Fs(Lp)}(0,P.useEffect)(pn,[mt,V,Tt,Bt,J]),(0,P.useEffect)(()=>{if(nt!==void 0){if(nt===!1){fe();return}Lt()}},[nt,ut]);const Vi=(0,P.useMemo)(()=>nt&&Os(Tt)&&Bt&&Os(vt)&&Os(ut)?{_className:n,canvasBackground:a,customTextRenderer:g,devicePixelRatio:v,onGetAnnotationsError:T,onGetAnnotationsSuccess:L,onGetStructTreeError:k,onGetStructTreeSuccess:I,onGetTextError:O,onGetTextSuccess:N,onRenderAnnotationLayerError:Y,onRenderAnnotationLayerSuccess:Z,onRenderError:H,onRenderSuccess:st,onRenderTextLayerError:it,onRenderTextLayerSuccess:ht,page:nt,pageIndex:Tt,pageNumber:Bt,renderForms:Xt,renderTextLayer:$,rotate:vt,scale:ut}:null,[n,a,g,v,T,L,k,I,O,N,Y,Z,H,st,it,ht,nt,Tt,Bt,Xt,$,vt,ut]),xe=(0,P.useMemo)(()=>_0(tt,()=>nt&&(ut?yp(nt,ut):void 0)),[tt,nt,ut]),lt=`${Tt}@${ut}/${vt}`;function jt(){switch(te){case"custom":return(0,zt.Z)(p,'renderMode was set to "custom", but no customRenderer was passed.'),(0,Qt.jsx)(p,{},`${lt}_custom`);case"none":return null;case"canvas":default:return(0,Qt.jsx)(l_,{canvasRef:h},`${lt}_canvas`)}}function xs(){return $?(0,Qt.jsx)(h_,{},`${lt}_text`):null}function $r(){return $t?(0,Qt.jsx)(u_,{},`${lt}_annotations`):null}function ai(){return(0,Qt.jsxs)(O0.Provider,{value:Vi,children:[jt(),xs(),$r(),d]})}function X_(){return Bt?V===null||nt===void 0||nt===null?(0,Qt.jsx)(oa,{type:"loading",children:typeof S=="function"?S():S}):V===!1||nt===!1?(0,Qt.jsx)(oa,{type:"error",children:typeof b=="function"?b():b}):ai():(0,Qt.jsx)(oa,{type:"no-data",children:typeof C=="function"?C():C})}return(0,Qt.jsx)("div",Object.assign({className:du(n,f),"data-page-number":Bt,ref:M0(A,pt),style:{["--scale-factor"]:`${ut}`,backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},xe,{children:X_()}))}var G0=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},p_=function(o){var t=o.pageNum,e=(0,P.useContext)(sa).state,n=e.mainState,i=e.paginated,a=e.zoomLevel,h=e.numPages,d=e.currentPage,f=(n==null?void 0:n.rendererRect)||null,p=t||d;return P.createElement(g_,{id:"pdf-page-wrapper",last:p>=h},!i&&P.createElement(m_,{id:"pdf-page-info"},"Page ",p,"/",h),P.createElement(f_,{pageNumber:p||d,scale:a,height:((f==null?void 0:f.height)||100)-100,width:((f==null?void 0:f.width)||100)-100}))},V0=p_,g_=St.div($0||($0=G0([`
  margin: 20px 0;
`],[`
  margin: 20px 0;
`]))),m_=St.div(W0||(W0=G0([`
  padding: 0 0 10px 10px;
  color: `,`;
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`],[`
  padding: 0 0 10px 10px;
  color: `,`;
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`])),function(o){return o.theme.text_tertiary}),$0,W0,v_=function(o){for(var t=(0,P.useContext)(sa).state.numPages,e=[],n=0;n<t;n++)e.push(P.createElement(V0,{key:n+1,pageNum:n+1}));return P.createElement(P.Fragment,null,e)},b_=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},y_=function(){var o=(0,P.useContext)(sa),t=o.state,e=t.mainState,n=t.paginated,i=o.dispatch,a=(e==null?void 0:e.currentDocument)||null;return(0,P.useEffect)(function(){i(c0(ia.numPages))},[a]),!a||a.fileData===void 0?null:P.createElement(A_,{file:a.fileData,onLoadSuccess:function(h){var d=h.numPages;return i(c0(d))},loading:P.createElement("span",null,"Loading...")},n?P.createElement(V0,null):P.createElement(v_,null))},A_=St(n_)(Y0||(Y0=b_([`
  display: flex;
  flex-direction: column;
  margin: 0 auto;
`],[`
  display: flex;
  flex-direction: column;
  margin: 0 auto;
`]))),E_=y_,Y0,__=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o};i0.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.mjs",i1()).toString();var Ap=function(o){var t=o.mainState;return P.createElement(a1,{mainState:t},P.createElement(S_,{id:"pdf-renderer","data-testid":"pdf-renderer"},P.createElement(A1,null),P.createElement(E_,null)))},w_=Ap;Ap.fileTypes=["pdf","application/pdf"],Ap.weight=0;var S_=St.div(X0||(X0=__([`
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow-y: auto;

  /* width */
  &::-webkit-scrollbar {
    `,`;
  }
  /* Track */
  &::-webkit-scrollbar-track {
    /* background: `,`; */
  }
  /* Handle */
  &::-webkit-scrollbar-thumb {
    background: `,`;
  }
  /* Handle on hover */
  &::-webkit-scrollbar-thumb:hover {
    background: `,`;
  }
`],[`
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow-y: auto;

  /* width */
  &::-webkit-scrollbar {
    `,`;
  }
  /* Track */
  &::-webkit-scrollbar-track {
    /* background: `,`; */
  }
  /* Handle */
  &::-webkit-scrollbar-thumb {
    background: `,`;
  }
  /* Handle on hover */
  &::-webkit-scrollbar-thumb:hover {
    background: `,`;
  }
`])),function(o){return o.theme.disableThemeScrollbar?"":"width: 10px"},function(o){return o.theme.secondary},function(o){return o.theme.tertiary},function(o){return o.theme.primary}),X0,x_=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},Ep=function(){return Ep=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Ep.apply(this,arguments)},C_=St(Uo)(q0||(q0=x_([`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  height: 100%;
  background-color: white;
  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),
    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);
  background-size: 20px 20px;
  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
`],[`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  height: 100%;
  background-color: white;
  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),
    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);
  background-size: 20px 20px;
  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
`]))),_p=function(o){return P.createElement(C_,Ep({},o))};_p.fileTypes=["png","image/png"],_p.weight=0;var T_=_p,q0,P_=void 0,vn=void 0,Ve=void 0,mu=[],R_=function(){var o=$e(2,0);if(o===18761)Ve=!0;else if(o===19789)Ve=!1;else throw TypeError("Invalid byte order value.");return Ve},L_=function(){if($e(2,2)!==42)throw RangeError("You forgot your towel!");return!0},k_=function(o){var t={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},e;return o in t?e=t[o]:e="Tag"+o,e},I_=function(o){var t={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"},e;return o in t&&(e=t[o]),e},D_=function(o){var t;return["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(o)!==-1?t=1:["SHORT","SSHORT"].indexOf(o)!==-1?t=2:["LONG","SLONG","FLOAT"].indexOf(o)!==-1?t=4:["RATIONAL","SRATIONAL","DOUBLE"].indexOf(o)!==-1&&(t=8),t},M_=function(o,t,e){e=e||0;var n=Math.floor(e/8),i=t+n,a=e+o,h=32-o;if(a<=0)throw RangeError("No bits requested");if(a<=8)var d=24+e,f=vn.getUint8(i,Ve);else if(a<=16)var d=16+e,f=vn.getUint16(i,Ve);else if(a<=32)var d=e,f=vn.getUint32(i,Ve);else throw RangeError("Too many bits requested");var p={bits:f<<d>>>h,byteOffset:i+Math.floor(a/8),bitOffset:a%8};return p},$e=function(o,t){if(o<=0)throw RangeError("No bytes requested");if(o<=1)return vn.getUint8(t,Ve);if(o<=2)return vn.getUint16(t,Ve);if(o<=3)return vn.getUint32(t,Ve)>>>8;if(o<=4)return vn.getUint32(t,Ve);throw RangeError("Too many bytes requested")},O_=function(o,t,e,n){var i=[],a=D_(t),h=a*e;if(h<=4){if(Ve===!1)var d=n>>>(4-a)*8;else var d=n;i.push(d)}else for(var f=0;f<e;f++){var p=a*f;if(a>=8)if(["RATIONAL","SRATIONAL"].indexOf(t)!==-1)i.push($e(4,n+p)),i.push($e(4,n+p+4));else throw TypeError("Can't handle this field type or size");else i.push($e(a,n+p))}return t==="ASCII"&&i.forEach(function(g,v,b){b[v]=String.fromCharCode(g)}),i},Ns=function(o,t){var e=Math.pow(2,8-t);return Math.floor(o*e+(e-1))},K0=function(o,t,e,n){return typeof n=="undefined"&&(n=1),"rgba("+o+", "+t+", "+e+", "+n+")"},Z0=function(o){for(var t=$e(2,o),e=[],n=o+2,i=0;i<t;n+=12,i++){var a=$e(2,n),h=$e(2,n+2),d=$e(4,n+4),f=$e(4,n+8),p=k_(a),g=I_(h),v=O_(p,g,d,f);e[p]={type:g,values:v}}mu.push(e);var b=$e(4,n);return b===0?mu:Z0(b)},F_=function(o,t){var e=t||document.createElement("canvas");if(!!o&&(vn=new DataView(o),Ve=R_(vn),!!L_(vn,Ve))){var n=$e(4,4);mu=Z0(n);var i=mu[0],a=i.ImageWidth.values[0],h=i.ImageLength.values[0];e.width=a,e.height=h;var d=[],f=i.Compression?i.Compression.values[0]:1,p=i.SamplesPerPixel.values[0],g=[],v=0,b=!1;if(i.BitsPerSample.values.forEach(function(lt,jt,xs){g[jt]={bitsPerSample:lt,hasBytesPerSample:!1,bytesPerSample:void 0},lt%8==0&&(g[jt].hasBytesPerSample=!0,g[jt].bytesPerSample=lt/8),v+=lt},P_),v%8==0){b=!0;var y=v/8}var A=i.StripOffsets.values,S=A.length;if(i.StripByteCounts)var C=i.StripByteCounts.values;else if(S===1)var C=[Math.ceil(a*h*v/8)];else throw Error("Cannot recover from missing StripByteCounts");for(var T=0;T<S;T++){var L=A[T];d[T]=[];for(var k=C[T],I=0,O=0,N=1,U=!0,q=[],Y=0,Z=0,H=0;I<k;I+=N)switch(f){case 1:for(var st=0,q=[];st<p;st++)if(g[st].hasBytesPerSample){var it=g[st].bytesPerSample*st;q.push($e(g[st].bytesPerSample,L+I+it))}else{var ht=M_(g[st].bitsPerSample,L+I,O);throw q.push(ht.bits),I=ht.byteOffset-L,O=ht.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}if(d[T].push(q),b)N=y;else throw N=0,RangeError("Cannot handle sub-byte bits per pixel");break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:break;case 7:break;case 32773:if(U){U=!1;var ot=1,At=1,V=vn.getInt8(L+I,Ve);V>=0&&V<=127?ot=V+1:V>=-127&&V<=-1?At=-V+1:U=!0}else{for(var J=$e(1,L+I),st=0;st<At;st++){if(g[Z].hasBytesPerSample)H=H<<8*Y|J,Y++,Y===g[Z].bytesPerSample&&(q.push(H),H=Y=0,Z++);else throw RangeError("Cannot handle sub-byte bits per sample");Z===p&&(d[T].push(q),q=[],Z=0)}ot--,ot===0&&(U=!0)}N=1;break;default:break}}if(e.getContext){var $t=e.getContext("2d");if($t.fillStyle=K0(255,255,255,0),i.RowsPerStrip)var Xt=i.RowsPerStrip.values[0];else var Xt=h;var te=d.length,$=h%Xt,z=$===0?Xt:$,X=Xt,rt=0,M=i.PhotometricInterpretation.values[0],tt=[],G=0;if(i.ExtraSamples&&(tt=i.ExtraSamples.values,G=tt.length),i.ColorMap)var mt=i.ColorMap.values,nt=Math.pow(2,g[0].bitsPerSample);for(var T=0;T<te;T++){T+1===te&&(X=z);for(var xt=d[T].length,pt=rt*T,Tt=0,Bt=0;Tt<X,Bt<xt;Tt++)for(var vt=0;vt<a;vt++,Bt++){var ut=d[T][Bt],dt=0,Lt=0,fe=0,Wt=1;if(G>0){for(var pn=0;pn<G;pn++)if(tt[pn]===1||tt[pn]===2){Wt=ut[3+pn]/256;break}}switch(M){case 0:if(g[0].hasBytesPerSample)var Vi=Math.pow(16,g[0].bytesPerSample*2);ut.forEach(function(jt,xs,$r){$r[xs]=Vi-jt});case 1:dt=Lt=fe=Ns(ut[0],g[0].bitsPerSample);break;case 2:dt=Ns(ut[0],g[0].bitsPerSample),Lt=Ns(ut[1],g[1].bitsPerSample),fe=Ns(ut[2],g[2].bitsPerSample);break;case 3:if(mt===void 0)throw Error("Palette image missing color map");var xe=ut[0];dt=Ns(mt[xe],16),Lt=Ns(mt[nt+xe],16),fe=Ns(mt[2*nt+xe],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",M)}$t.fillStyle=K0(dt,Lt,fe,Wt),$t.fillRect(vt,pt+Tt,1,1)}rt=X}}return e}},N_=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},vu=function(){return vu=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},vu.apply(this,arguments)},bu=function(o){var t=o.mainState.currentDocument,e=(0,P.useState)(!1),n=e[0],i=e[1],a=(0,P.useState)(!1),h=a[0],d=a[1];return(0,P.useEffect)(function(){if(!(!t||n)){var f=document.getElementById("tiff-img");try{f&&F_(t.fileData,f),i(!0)}catch(p){d(!0)}}},[]),h?P.createElement(Uo,vu({},o),P.createElement("div",null,"Your file is corrupted. Please check it on your machine.")):P.createElement(Uo,vu({},o),P.createElement(j_,{id:"tiff-img"}))};bu.fileTypes=["tif","tiff","image/tif","image/tiff"],bu.weight=0,bu.fileLoader=Ug;var B_=bu,j_=St.canvas(Q0||(Q0=N_([`
  max-width: 95%;
  max-height: 95%;
`],[`
  max-width: 95%;
  max-height: 95%;
`]))),Q0,U_=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},yu=function(o){var t=o.mainState.currentDocument;return P.createElement(z_,{id:"txt-renderer"},t==null?void 0:t.fileData)},H_=yu;yu.fileTypes=["txt","text/plain"],yu.weight=0,yu.fileLoader=zb;var z_=St.div(J0||(J0=U_([`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 30px;
`],[`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 30px;
`]))),J0,tv={primary:"#fff",secondary:"#000",tertiary:"#ffffff99",text_primary:"#000",text_secondary:"#fff",text_tertiary:"#00000044",disableThemeScrollbar:!1},G_=[ey,ny,ry,ay,uy,w_,T_,B_,H_],V_=function(o,t){return Object.defineProperty?Object.defineProperty(o,"raw",{value:t}):o.raw=t,o},ca=function(){return ca=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},ca.apply(this,arguments)},$_=function(o){var t=o.documents,e=o.theme;if(!t||t===void 0)throw new Error(`Please provide an array of documents to DocViewer.
e.g. <DocViewer documents={[ { uri: 'https://mypdf.pdf' } ]} />`);return P.createElement(Sb,ca({},o),P.createElement(vb,{theme:e?ca(ca({},tv),e):tv},P.createElement(Y_,ca({id:"react-doc-viewer","data-testid":"react-doc-viewer"},o),P.createElement(Bb,null),P.createElement(Yb,null))))},W_=$_,Y_=St.div(ev||(ev=V_([`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: #eee;
`],[`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: #eee;
`]))),ev},96774:function(Pt){Pt.exports=function(at,_t,P,D){var w=P?P.call(D,at,_t):void 0;if(w!==void 0)return!!w;if(at===_t)return!0;if(typeof at!="object"||!at||typeof _t!="object"||!_t)return!1;var x=Object.keys(at),R=Object.keys(_t);if(x.length!==R.length)return!1;for(var K=Object.prototype.hasOwnProperty.bind(_t),wt=0;wt<x.length;wt++){var Gt=x[wt];if(!K(Gt))return!1;var It=at[Gt],Ce=_t[Gt];if(w=P?P.call(D,It,Ce,Gt):void 0,w===!1||w===void 0&&It!==Ce)return!1}return!0}},51116:function(Pt,W,at){"use strict";var _t;_t={value:!0},at(96558),W.MSGReader=at(68706)},96558:function(Pt,W,at){var _t,P;(function(D,w){_t=w,P=typeof _t=="function"?_t.call(W,at,W,Pt):_t,P!==void 0&&(Pt.exports=P)})(this,function(){var D=function(w,x,R){this._byteOffset=x||0,w instanceof ArrayBuffer?this.buffer=w:typeof w=="object"?(this.dataView=w,x&&(this._byteOffset+=x)):this.buffer=new ArrayBuffer(w||1),this.position=0,this.endianness=R==null?D.LITTLE_ENDIAN:R};return D.prototype={},Uint8Array.prototype.BYTES_PER_ELEMENT===void 0&&(Uint8Array.prototype.BYTES_PER_ELEMENT=Uint8Array.BYTES_PER_ELEMENT,Int8Array.prototype.BYTES_PER_ELEMENT=Int8Array.BYTES_PER_ELEMENT,Uint8ClampedArray.prototype.BYTES_PER_ELEMENT=Uint8ClampedArray.BYTES_PER_ELEMENT,Uint16Array.prototype.BYTES_PER_ELEMENT=Uint16Array.BYTES_PER_ELEMENT,Int16Array.prototype.BYTES_PER_ELEMENT=Int16Array.BYTES_PER_ELEMENT,Uint32Array.prototype.BYTES_PER_ELEMENT=Uint32Array.BYTES_PER_ELEMENT,Int32Array.prototype.BYTES_PER_ELEMENT=Int32Array.BYTES_PER_ELEMENT,Float64Array.prototype.BYTES_PER_ELEMENT=Float64Array.BYTES_PER_ELEMENT),D.prototype.save=function(w){var x=new Blob(this.buffer),R=window.webkitURL||window.URL;if(R&&R.createObjectURL){var K=R.createObjectURL(x),wt=document.createElement("a");wt.setAttribute("href",K),wt.setAttribute("download",w),wt.click(),R.revokeObjectURL(K)}else throw"DataStream.save: Can't create object URL."},D.BIG_ENDIAN=!1,D.LITTLE_ENDIAN=!0,D.prototype._dynamicSize=!0,Object.defineProperty(D.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(w){w||this._trimAlloc(),this._dynamicSize=w}}),D.prototype._byteLength=0,Object.defineProperty(D.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(D.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(w){this._buffer=w,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(D.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(w){this._byteOffset=w,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(D.prototype,"dataView",{get:function(){return this._dataView},set:function(w){this._byteOffset=w.byteOffset,this._buffer=w.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+w.byteLength}}),D.prototype._realloc=function(w){if(!!this._dynamicSize){var x=this._byteOffset+this.position+w,R=this._buffer.byteLength;if(x<=R){x>this._byteLength&&(this._byteLength=x);return}for(R<1&&(R=1);x>R;)R*=2;var K=new ArrayBuffer(R),wt=new Uint8Array(this._buffer),Gt=new Uint8Array(K,0,wt.length);Gt.set(wt),this.buffer=K,this._byteLength=x}},D.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var w=new ArrayBuffer(this._byteLength),x=new Uint8Array(w),R=new Uint8Array(this._buffer,0,x.length);x.set(R),this.buffer=w}},D.prototype.seek=function(w){var x=Math.max(0,Math.min(this.byteLength,w));this.position=isNaN(x)||!isFinite(x)?0:x},D.prototype.isEof=function(){return this.position>=this.byteLength},D.prototype.mapInt32Array=function(w,x){this._realloc(w*4);var R=new Int32Array(this._buffer,this.byteOffset+this.position,w);return D.arrayToNative(R,x==null?this.endianness:x),this.position+=w*4,R},D.prototype.mapInt16Array=function(w,x){this._realloc(w*2);var R=new Int16Array(this._buffer,this.byteOffset+this.position,w);return D.arrayToNative(R,x==null?this.endianness:x),this.position+=w*2,R},D.prototype.mapInt8Array=function(w){this._realloc(w*1);var x=new Int8Array(this._buffer,this.byteOffset+this.position,w);return this.position+=w*1,x},D.prototype.mapUint32Array=function(w,x){this._realloc(w*4);var R=new Uint32Array(this._buffer,this.byteOffset+this.position,w);return D.arrayToNative(R,x==null?this.endianness:x),this.position+=w*4,R},D.prototype.mapUint16Array=function(w,x){this._realloc(w*2);var R=new Uint16Array(this._buffer,this.byteOffset+this.position,w);return D.arrayToNative(R,x==null?this.endianness:x),this.position+=w*2,R},D.prototype.mapUint8Array=function(w){this._realloc(w*1);var x=new Uint8Array(this._buffer,this.byteOffset+this.position,w);return this.position+=w*1,x},D.prototype.mapFloat64Array=function(w,x){this._realloc(w*8);var R=new Float64Array(this._buffer,this.byteOffset+this.position,w);return D.arrayToNative(R,x==null?this.endianness:x),this.position+=w*8,R},D.prototype.mapFloat32Array=function(w,x){this._realloc(w*4);var R=new Float32Array(this._buffer,this.byteOffset+this.position,w);return D.arrayToNative(R,x==null?this.endianness:x),this.position+=w*4,R},D.prototype.readInt32Array=function(w,x){w=w==null?this.byteLength-this.position/4:w;var R=new Int32Array(w);return D.memcpy(R.buffer,0,this.buffer,this.byteOffset+this.position,w*R.BYTES_PER_ELEMENT),D.arrayToNative(R,x==null?this.endianness:x),this.position+=R.byteLength,R},D.prototype.readInt16Array=function(w,x){w=w==null?this.byteLength-this.position/2:w;var R=new Int16Array(w);return D.memcpy(R.buffer,0,this.buffer,this.byteOffset+this.position,w*R.BYTES_PER_ELEMENT),D.arrayToNative(R,x==null?this.endianness:x),this.position+=R.byteLength,R},D.prototype.readInt8Array=function(w){w=w==null?this.byteLength-this.position:w;var x=new Int8Array(w);return D.memcpy(x.buffer,0,this.buffer,this.byteOffset+this.position,w*x.BYTES_PER_ELEMENT),this.position+=x.byteLength,x},D.prototype.readUint32Array=function(w,x){w=w==null?this.byteLength-this.position/4:w;var R=new Uint32Array(w);return D.memcpy(R.buffer,0,this.buffer,this.byteOffset+this.position,w*R.BYTES_PER_ELEMENT),D.arrayToNative(R,x==null?this.endianness:x),this.position+=R.byteLength,R},D.prototype.readUint16Array=function(w,x){w=w==null?this.byteLength-this.position/2:w;var R=new Uint16Array(w);return D.memcpy(R.buffer,0,this.buffer,this.byteOffset+this.position,w*R.BYTES_PER_ELEMENT),D.arrayToNative(R,x==null?this.endianness:x),this.position+=R.byteLength,R},D.prototype.readUint8Array=function(w){w=w==null?this.byteLength-this.position:w;var x=new Uint8Array(w);return D.memcpy(x.buffer,0,this.buffer,this.byteOffset+this.position,w*x.BYTES_PER_ELEMENT),this.position+=x.byteLength,x},D.prototype.readFloat64Array=function(w,x){w=w==null?this.byteLength-this.position/8:w;var R=new Float64Array(w);return D.memcpy(R.buffer,0,this.buffer,this.byteOffset+this.position,w*R.BYTES_PER_ELEMENT),D.arrayToNative(R,x==null?this.endianness:x),this.position+=R.byteLength,R},D.prototype.readFloat32Array=function(w,x){w=w==null?this.byteLength-this.position/4:w;var R=new Float32Array(w);return D.memcpy(R.buffer,0,this.buffer,this.byteOffset+this.position,w*R.BYTES_PER_ELEMENT),D.arrayToNative(R,x==null?this.endianness:x),this.position+=R.byteLength,R},D.prototype.writeInt32Array=function(w,x){if(this._realloc(w.length*4),w instanceof Int32Array&&this.byteOffset+this.position%w.BYTES_PER_ELEMENT==0)D.memcpy(this._buffer,this.byteOffset+this.position,w.buffer,0,w.byteLength),this.mapInt32Array(w.length,x);else for(var R=0;R<w.length;R++)this.writeInt32(w[R],x)},D.prototype.writeInt16Array=function(w,x){if(this._realloc(w.length*2),w instanceof Int16Array&&this.byteOffset+this.position%w.BYTES_PER_ELEMENT==0)D.memcpy(this._buffer,this.byteOffset+this.position,w.buffer,0,w.byteLength),this.mapInt16Array(w.length,x);else for(var R=0;R<w.length;R++)this.writeInt16(w[R],x)},D.prototype.writeInt8Array=function(w){if(this._realloc(w.length*1),w instanceof Int8Array&&this.byteOffset+this.position%w.BYTES_PER_ELEMENT==0)D.memcpy(this._buffer,this.byteOffset+this.position,w.buffer,0,w.byteLength),this.mapInt8Array(w.length);else for(var x=0;x<w.length;x++)this.writeInt8(w[x])},D.prototype.writeUint32Array=function(w,x){if(this._realloc(w.length*4),w instanceof Uint32Array&&this.byteOffset+this.position%w.BYTES_PER_ELEMENT==0)D.memcpy(this._buffer,this.byteOffset+this.position,w.buffer,0,w.byteLength),this.mapUint32Array(w.length,x);else for(var R=0;R<w.length;R++)this.writeUint32(w[R],x)},D.prototype.writeUint16Array=function(w,x){if(this._realloc(w.length*2),w instanceof Uint16Array&&this.byteOffset+this.position%w.BYTES_PER_ELEMENT==0)D.memcpy(this._buffer,this.byteOffset+this.position,w.buffer,0,w.byteLength),this.mapUint16Array(w.length,x);else for(var R=0;R<w.length;R++)this.writeUint16(w[R],x)},D.prototype.writeUint8Array=function(w){if(this._realloc(w.length*1),w instanceof Uint8Array&&this.byteOffset+this.position%w.BYTES_PER_ELEMENT==0)D.memcpy(this._buffer,this.byteOffset+this.position,w.buffer,0,w.byteLength),this.mapUint8Array(w.length);else for(var x=0;x<w.length;x++)this.writeUint8(w[x])},D.prototype.writeFloat64Array=function(w,x){if(this._realloc(w.length*8),w instanceof Float64Array&&this.byteOffset+this.position%w.BYTES_PER_ELEMENT==0)D.memcpy(this._buffer,this.byteOffset+this.position,w.buffer,0,w.byteLength),this.mapFloat64Array(w.length,x);else for(var R=0;R<w.length;R++)this.writeFloat64(w[R],x)},D.prototype.writeFloat32Array=function(w,x){if(this._realloc(w.length*4),w instanceof Float32Array&&this.byteOffset+this.position%w.BYTES_PER_ELEMENT==0)D.memcpy(this._buffer,this.byteOffset+this.position,w.buffer,0,w.byteLength),this.mapFloat32Array(w.length,x);else for(var R=0;R<w.length;R++)this.writeFloat32(w[R],x)},D.prototype.readInt32=function(w){var x=this._dataView.getInt32(this.position,w==null?this.endianness:w);return this.position+=4,x},D.prototype.readInt=function(w){return this.seek(w),this.readInt32()},D.prototype.readInt16=function(w){var x=this._dataView.getInt16(this.position,w==null?this.endianness:w);return this.position+=2,x},D.prototype.readShort=function(w){return this.seek(w),this.readInt16()},D.prototype.readInt8=function(){var w=this._dataView.getInt8(this.position);return this.position+=1,w},D.prototype.readByte=function(w){return this.seek(w),this.readInt8()},D.prototype.readUint32=function(w){var x=this._dataView.getUint32(this.position,w==null?this.endianness:w);return this.position+=4,x},D.prototype.readUint16=function(w){var x=this._dataView.getUint16(this.position,w==null?this.endianness:w);return this.position+=2,x},D.prototype.readUint8=function(){var w=this._dataView.getUint8(this.position);return this.position+=1,w},D.prototype.readFloat32=function(w){var x=this._dataView.getFloat32(this.position,w==null?this.endianness:w);return this.position+=4,x},D.prototype.readFloat64=function(w){var x=this._dataView.getFloat64(this.position,w==null?this.endianness:w);return this.position+=8,x},D.prototype.writeInt32=function(w,x){this._realloc(4),this._dataView.setInt32(this.position,w,x==null?this.endianness:x),this.position+=4},D.prototype.writeInt16=function(w,x){this._realloc(2),this._dataView.setInt16(this.position,w,x==null?this.endianness:x),this.position+=2},D.prototype.writeInt8=function(w){this._realloc(1),this._dataView.setInt8(this.position,w),this.position+=1},D.prototype.writeUint32=function(w,x){this._realloc(4),this._dataView.setUint32(this.position,w,x==null?this.endianness:x),this.position+=4},D.prototype.writeUint16=function(w,x){this._realloc(2),this._dataView.setUint16(this.position,w,x==null?this.endianness:x),this.position+=2},D.prototype.writeUint8=function(w){this._realloc(1),this._dataView.setUint8(this.position,w),this.position+=1},D.prototype.writeFloat32=function(w,x){this._realloc(4),this._dataView.setFloat32(this.position,w,x==null?this.endianness:x),this.position+=4},D.prototype.writeFloat64=function(w,x){this._realloc(8),this._dataView.setFloat64(this.position,w,x==null?this.endianness:x),this.position+=8},D.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,D.memcpy=function(w,x,R,K,wt){var Gt=new Uint8Array(w,x,wt),It=new Uint8Array(R,K,wt);Gt.set(It)},D.arrayToNative=function(w,x){return x==this.endianness?w:this.flipArrayEndianness(w)},D.nativeToEndian=function(w,x){return this.endianness==x?w:this.flipArrayEndianness(w)},D.flipArrayEndianness=function(w){for(var x=new Uint8Array(w.buffer,w.byteOffset,w.byteLength),R=0;R<w.byteLength;R+=w.BYTES_PER_ELEMENT)for(var K=R+w.BYTES_PER_ELEMENT-1,wt=R;K>wt;K--,wt++){var Gt=x[wt];x[wt]=x[K],x[K]=Gt}return w},D.createStringFromArray=function(w){for(var x="",R=0;R<w.length;R++)x+=String.fromCharCode(w[R]);return x},D.prototype.failurePosition=0,D.prototype.readStruct=function(w){for(var x={},R,K,wt,Gt=this.position,It=0;It<w.length;It+=2){if(R=w[It+1],K=this.readType(R,x),K==null)return this.failurePosition==0&&(this.failurePosition=this.position),this.position=Gt,null;x[w[It]]=K}return x},D.prototype.readUCS2String=function(w,x){return D.createStringFromArray(this.readUint16Array(w,x))},D.prototype.readStringAt=function(w,x){return this.seek(w),this.readUCS2String(x)},D.prototype.writeUCS2String=function(w,x,R){R==null&&(R=w.length);for(var K=0;K<w.length&&K<R;K++)this.writeUint16(w.charCodeAt(K),x);for(;K<R;K++)this.writeUint16(0)},D.prototype.readString=function(w,x){return x==null||x=="ASCII"?D.createStringFromArray(this.mapUint8Array(w==null?this.byteLength-this.position:w)):new TextDecoder(x).decode(this.mapUint8Array(w))},D.prototype.writeString=function(w,x,R){if(x==null||x=="ASCII")if(R!=null){var K=0,wt=Math.min(w.length,R);for(K=0;K<wt;K++)this.writeUint8(w.charCodeAt(K));for(;K<R;K++)this.writeUint8(0)}else for(var K=0;K<w.length;K++)this.writeUint8(w.charCodeAt(K));else this.writeUint8Array(new TextEncoder(x).encode(w.substring(0,R)))},D.prototype.readCString=function(w){var x=this.byteLength-this.position,R=new Uint8Array(this._buffer,this._byteOffset+this.position),K=x;w!=null&&(K=Math.min(w,x));for(var wt=0;wt<K&&R[wt]!=0;wt++);var Gt=D.createStringFromArray(this.mapUint8Array(wt));return w!=null?this.position+=K-wt:wt!=x&&(this.position+=1),Gt},D.prototype.writeCString=function(w,x){if(x!=null){var R=0,K=Math.min(w.length,x);for(R=0;R<K;R++)this.writeUint8(w.charCodeAt(R));for(;R<x;R++)this.writeUint8(0)}else{for(var R=0;R<w.length;R++)this.writeUint8(w.charCodeAt(R));this.writeUint8(0)}},D.prototype.readType=function(w,x){if(typeof w=="function")return w(this,x);if(typeof w=="object"&&!(w instanceof Array))return w.get(this,x);if(w instanceof Array&&w.length!=3)return this.readStruct(w,x);var R=null,K=null,wt="ASCII",Gt=this.position,It;if(typeof w=="string"&&/:/.test(w)){var Ce=w.split(":");w=Ce[0],It=Ce[1],x[It]!=null?K=parseInt(x[It]):K=parseInt(Ce[1])}if(typeof w=="string"&&/,/.test(w)){var Ce=w.split(",");w=Ce[0],wt=parseInt(Ce[1])}switch(w){case"uint8":R=this.readUint8();break;case"int8":R=this.readInt8();break;case"uint16":R=this.readUint16(this.endianness);break;case"int16":R=this.readInt16(this.endianness);break;case"uint32":R=this.readUint32(this.endianness);break;case"int32":R=this.readInt32(this.endianness);break;case"float32":R=this.readFloat32(this.endianness);break;case"float64":R=this.readFloat64(this.endianness);break;case"uint16be":R=this.readUint16(D.BIG_ENDIAN);break;case"int16be":R=this.readInt16(D.BIG_ENDIAN);break;case"uint32be":R=this.readUint32(D.BIG_ENDIAN);break;case"int32be":R=this.readInt32(D.BIG_ENDIAN);break;case"float32be":R=this.readFloat32(D.BIG_ENDIAN);break;case"float64be":R=this.readFloat64(D.BIG_ENDIAN);break;case"uint16le":R=this.readUint16(D.LITTLE_ENDIAN);break;case"int16le":R=this.readInt16(D.LITTLE_ENDIAN);break;case"uint32le":R=this.readUint32(D.LITTLE_ENDIAN);break;case"int32le":R=this.readInt32(D.LITTLE_ENDIAN);break;case"float32le":R=this.readFloat32(D.LITTLE_ENDIAN);break;case"float64le":R=this.readFloat64(D.LITTLE_ENDIAN);break;case"cstring":R=this.readCString(K);break;case"string":R=this.readString(K,wt);break;case"u16string":R=this.readUCS2String(K,this.endianness);break;case"u16stringle":R=this.readUCS2String(K,D.LITTLE_ENDIAN);break;case"u16stringbe":R=this.readUCS2String(K,D.BIG_ENDIAN);break;default:if(w.length==3){var ae=w[1],It=w[2],ee=0;if(typeof It=="function"?ee=It(x,this,w):typeof It=="string"&&x[It]!=null?ee=parseInt(x[It]):ee=parseInt(It),typeof ae=="string"){var Mo=ae.replace(/(le|be)$/,""),Ke=null;switch(/le$/.test(ae)?Ke=D.LITTLE_ENDIAN:/be$/.test(ae)&&(Ke=D.BIG_ENDIAN),It=="*"&&(ee=null),Mo){case"uint8":R=this.readUint8Array(ee);break;case"uint16":R=this.readUint16Array(ee,Ke);break;case"uint32":R=this.readUint32Array(ee,Ke);break;case"int8":R=this.readInt8Array(ee);break;case"int16":R=this.readInt16Array(ee,Ke);break;case"int32":R=this.readInt32Array(ee,Ke);break;case"float32":R=this.readFloat32Array(ee,Ke);break;case"float64":R=this.readFloat64Array(ee,Ke);break;case"cstring":case"utf16string":case"string":if(ee==null)for(R=[];!this.isEof();){var Zt=this.readType(ae,x);if(Zt==null)break;R.push(Zt)}else{R=new Array(ee);for(var on=0;on<ee;on++)R[on]=this.readType(ae,x)}break}}else if(It=="*")for(R=[],this.buffer;;){var $i=this.position;try{var oi=this.readType(ae,x);if(oi==null){this.position=$i;break}R.push(oi)}catch(li){this.position=$i;break}}else{R=new Array(ee);for(var on=0;on<ee;on++){var Zt=this.readType(ae,x);if(Zt==null)return null;R[on]=Zt}}break}}return K!=null&&(this.position=Gt+K),R},D.prototype.writeStruct=function(w,x){for(var R=0;R<w.length;R+=2){var K=w[R+1];this.writeType(K,x[w[R]],x)}},D.prototype.writeType=function(w,x,R){if(typeof w=="function")return w(this,x);if(typeof w=="object"&&!(w instanceof Array))return w.set(this,x,R);var K=null,wt="ASCII",Gt=this.position;if(typeof w=="string"&&/:/.test(w)){var It=w.split(":");w=It[0],K=parseInt(It[1])}if(typeof w=="string"&&/,/.test(w)){var It=w.split(",");w=It[0],wt=parseInt(It[1])}switch(w){case"uint8":this.writeUint8(x);break;case"int8":this.writeInt8(x);break;case"uint16":this.writeUint16(x,this.endianness);break;case"int16":this.writeInt16(x,this.endianness);break;case"uint32":this.writeUint32(x,this.endianness);break;case"int32":this.writeInt32(x,this.endianness);break;case"float32":this.writeFloat32(x,this.endianness);break;case"float64":this.writeFloat64(x,this.endianness);break;case"uint16be":this.writeUint16(x,D.BIG_ENDIAN);break;case"int16be":this.writeInt16(x,D.BIG_ENDIAN);break;case"uint32be":this.writeUint32(x,D.BIG_ENDIAN);break;case"int32be":this.writeInt32(x,D.BIG_ENDIAN);break;case"float32be":this.writeFloat32(x,D.BIG_ENDIAN);break;case"float64be":this.writeFloat64(x,D.BIG_ENDIAN);break;case"uint16le":this.writeUint16(x,D.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(x,D.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(x,D.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(x,D.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(x,D.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(x,D.LITTLE_ENDIAN);break;case"cstring":this.writeCString(x,K);break;case"string":this.writeString(x,wt,K);break;case"u16string":this.writeUCS2String(x,this.endianness,K);break;case"u16stringle":this.writeUCS2String(x,D.LITTLE_ENDIAN,K);break;case"u16stringbe":this.writeUCS2String(x,D.BIG_ENDIAN,K);break;default:if(w.length==3){for(var Ce=w[1],ae=0;ae<x.length;ae++)this.writeType(Ce,x[ae]);break}else{this.writeStruct(w,x);break}}K!=null&&(this.position=Gt,this._realloc(K),this.position=Gt+K)},D})},68706:function(Pt,W,at){var _t,P,D;(function(w,x){P=[at(96558)],_t=x,D=typeof _t=="function"?_t.apply(W,P):_t,D!==void 0&&(Pt.exports=D)})(this,function(w){var x={FILE_HEADER:K([208,207,17,224,161,177,26,225]),MSG:{UNUSED_BLOCK:-1,END_OF_CHAIN:-2,S_BIG_BLOCK_SIZE:512,S_BIG_BLOCK_MARK:9,L_BIG_BLOCK_SIZE:4096,L_BIG_BLOCK_MARK:12,SMALL_BLOCK_SIZE:64,BIG_BLOCK_MIN_DOC_SIZE:4096,HEADER:{PROPERTY_START_OFFSET:48,BAT_START_OFFSET:76,BAT_COUNT_OFFSET:44,SBAT_START_OFFSET:60,SBAT_COUNT_OFFSET:64,XBAT_START_OFFSET:68,XBAT_COUNT_OFFSET:72},PROP:{NO_INDEX:-1,PROPERTY_SIZE:128,NAME_SIZE_OFFSET:64,MAX_NAME_LENGTH:64/2-1,TYPE_OFFSET:66,PREVIOUS_PROPERTY_OFFSET:68,NEXT_PROPERTY_OFFSET:72,CHILD_PROPERTY_OFFSET:76,START_BLOCK_OFFSET:116,SIZE_OFFSET:120,TYPE_ENUM:{DIRECTORY:1,DOCUMENT:2,ROOT:5}},FIELD:{PREFIX:{ATTACHMENT:"__attach_version1.0",RECIPIENT:"__recip_version1.0",DOCUMENT:"__substg1."},NAME_MAPPING:{"0037":"subject","0c1a":"senderName","5d02":"senderEmail","1000":"body","007d":"headers","3703":"extension","3704":"fileNameShort","3707":"fileName","3712":"pidContentId","3001":"name","39fe":"email"},CLASS_MAPPING:{ATTACHMENT_DATA:"3701"},TYPE_MAPPING:{"001e":"string","001f":"unicode","0102":"binary"},DIR_TYPE:{INNER_MSG:"000d"}}}};function R(B,F){if(B===F)return!0;if(B==null||F==null||B.length!=F.length)return!1;for(var j=0;j<B.length;j++)if(B[j]!==F[j])return!1;return!0}function K(B){for(var F=new Array(B.length),j=0;j<B.length;j++)F[j]=B[j]<<24>>24;return F}function wt(B){return B.seek(0),R(x.FILE_HEADER,B.readInt8Array(x.FILE_HEADER.length))}function Gt(B,F){return(F+1)*B.bigBlockSize}function It(B,F,j){var Q=Gt(F,j);return B.seek(Q),B.readInt32Array(F.bigBlockLength)}function Ce(B,F,j,Q){var ct=Math.floor(j/F.bigBlockLength),bt=j%F.bigBlockLength,Yt=Q[ct];return It(B,F,Yt)[bt]}function ae(B,F,j){return Ce(B,F,j,F.batData)}function ee(B,F,j){return Ce(B,F,j,F.sbatData)}function Mo(B){var F=Ke(B);return F.batData=on(B,F),F.sbatData=$i(B,F),F.xbatCount>0&&oi(B,F),F.propertyData=Ln(B,F),F.fieldsData=ng(B,F),F}function Ke(B){var F={};return F.bigBlockSize=B.readByte(30)==x.MSG.L_BIG_BLOCK_MARK?x.MSG.L_BIG_BLOCK_SIZE:x.MSG.S_BIG_BLOCK_SIZE,F.bigBlockLength=F.bigBlockSize/4,F.xBlockLength=F.bigBlockLength-1,F.batCount=B.readInt(x.MSG.HEADER.BAT_COUNT_OFFSET),F.propertyStart=B.readInt(x.MSG.HEADER.PROPERTY_START_OFFSET),F.sbatStart=B.readInt(x.MSG.HEADER.SBAT_START_OFFSET),F.sbatCount=B.readInt(x.MSG.HEADER.SBAT_COUNT_OFFSET),F.xbatStart=B.readInt(x.MSG.HEADER.XBAT_START_OFFSET),F.xbatCount=B.readInt(x.MSG.HEADER.XBAT_COUNT_OFFSET),F}function Zt(B){var F=(x.MSG.S_BIG_BLOCK_SIZE-x.MSG.HEADER.BAT_START_OFFSET)/4;return Math.min(B.batCount,F)}function on(B,F){var j=new Array(Zt(F));B.seek(x.MSG.HEADER.BAT_START_OFFSET);for(var Q=0;Q<j.length;Q++)j[Q]=B.readInt32();return j}function $i(B,F){for(var j=[],Q=F.sbatStart,ct=0;ct<F.sbatCount&&Q!=x.MSG.END_OF_CHAIN;ct++)j.push(Q),Q=ae(B,F,Q);return j}function oi(B,F){for(var j=Zt(F),Q=F.batCount,ct=Q-j,bt=F.xbatStart,Yt=0;Yt<F.xbatCount;Yt++){var ke=It(B,F,bt);bt=ke[F.xBlockLength];for(var kn=Math.min(ct,F.xBlockLength),Ze=0;Ze<kn;Ze++){var In=ke[Ze];if(In==x.MSG.UNUSED_BLOCK||In==x.MSG.END_OF_CHAIN)break;F.batData.push(In)}ct-=kn}}function Ln(B,F){for(var j=[],Q=F.propertyStart;Q!=x.MSG.END_OF_CHAIN;)Fo(B,F,Q,j),Q=ae(B,F,Q);return gn(j,j[0]),j}function li(B,F){var j=B.readShort(F+x.MSG.PROP.NAME_SIZE_OFFSET);return j<1?"":B.readStringAt(F,j/2)}function Oo(B,F,j){return{index:F,type:B.readByte(j+x.MSG.PROP.TYPE_OFFSET),name:li(B,j),previousProperty:B.readInt(j+x.MSG.PROP.PREVIOUS_PROPERTY_OFFSET),nextProperty:B.readInt(j+x.MSG.PROP.NEXT_PROPERTY_OFFSET),childProperty:B.readInt(j+x.MSG.PROP.CHILD_PROPERTY_OFFSET),startBlock:B.readInt(j+x.MSG.PROP.START_BLOCK_OFFSET),sizeBlock:B.readInt(j+x.MSG.PROP.SIZE_OFFSET)}}function Fo(B,F,j,Q){for(var ct=F.bigBlockSize/x.MSG.PROP.PROPERTY_SIZE,bt=Gt(F,j),Yt=0;Yt<ct;Yt++){var ke=B.readByte(bt+x.MSG.PROP.TYPE_OFFSET);switch(ke){case x.MSG.PROP.TYPE_ENUM.ROOT:case x.MSG.PROP.TYPE_ENUM.DIRECTORY:case x.MSG.PROP.TYPE_ENUM.DOCUMENT:Q.push(Oo(B,Q.length,bt));break;default:Q.push(null)}bt+=x.MSG.PROP.PROPERTY_SIZE}}function gn(B,F){if(F.childProperty!=x.MSG.PROP.NO_INDEX){F.children=[];for(var j=[F.childProperty];j.length!=0;){var Q=j.shift(),ct=B[Q];ct!=null&&(F.children.push(Q),ct.type==x.MSG.PROP.TYPE_ENUM.DIRECTORY&&gn(B,ct),ct.previousProperty!=x.MSG.PROP.NO_INDEX&&j.push(ct.previousProperty),ct.nextProperty!=x.MSG.PROP.NO_INDEX&&j.push(ct.nextProperty))}}}function ng(B,F){var j={attachments:[],recipients:[]};return Wi(B,F,F.propertyData[0],j),j}function Wi(B,F,j,Q){if(j.children&&j.children.length>0)for(var ct=0;ct<j.children.length;ct++){var bt=F.propertyData[j.children[ct]];bt.type==x.MSG.PROP.TYPE_ENUM.DIRECTORY?ff(B,F,bt,Q):bt.type==x.MSG.PROP.TYPE_ENUM.DOCUMENT&&bt.name.indexOf(x.MSG.FIELD.PREFIX.DOCUMENT)==0&&pf(B,F,bt,Q)}}function ff(B,F,j,Q){if(j.name.indexOf(x.MSG.FIELD.PREFIX.ATTACHMENT)==0){var ct={};Q.attachments.push(ct),Wi(B,F,j,ct)}else if(j.name.indexOf(x.MSG.FIELD.PREFIX.RECIPIENT)==0){var bt={};Q.recipients.push(bt),Wi(B,F,j,bt)}else{var Yt=gf(j);Yt!=x.MSG.FIELD.DIR_TYPE.INNER_MSG?Wi(B,F,j,Q):Q.innerMsgContent=!0}}function pf(B,F,j,Q){var ct=j.name.substring(12).toLowerCase(),bt=ct.substring(0,4),Yt=ct.substring(4,8),ke=x.MSG.FIELD.NAME_MAPPING[bt];ke&&(Q[ke]=Cs(B,F,j,Yt)),bt==x.MSG.FIELD.CLASS_MAPPING.ATTACHMENT_DATA&&(Q.dataId=j.index,Q.contentLength=j.sizeBlock)}function gf(B){var F=B.name.substring(12).toLowerCase();return F.substring(4,8)}var kh={sbat:{extractor:function(F,j,Q,ct){var bt=Xr(F,j,Q);return bt.length==1?je(F,j,Q.startBlock,Q.sizeBlock,ct):bt.length>1?mf(F,j,Q,bt,ct):null},dataType:{string:function(F,j,Q,ct,bt){return F.seek(Q+ct),F.readString(bt)},unicode:function(F,j,Q,ct,bt){return F.seek(Q+ct),F.readUCS2String(bt/2)},binary:function(F,j,Q,ct,bt){F.seek(Q+ct);var Yt=Math.min(Math.min(j.bigBlockSize-ct,bt),x.MSG.SMALL_BLOCK_SIZE);return F.readUint8Array(Yt)}}},bat:{extractor:function(F,j,Q,ct){var bt=Gt(j,Q.startBlock);return F.seek(bt),ct(F,Q)},dataType:{string:function(F,j){return F.readString(j.sizeBlock)},unicode:function(F,j){return F.readUCS2String(j.sizeBlock/2)},binary:function(F,j){return F.readUint8Array(j.sizeBlock)}}}};function je(B,F,j,Q,ct){for(var bt=j*x.MSG.SMALL_BLOCK_SIZE,Yt=Math.floor(bt/F.bigBlockSize),ke=bt%F.bigBlockSize,kn=F.propertyData[0],Ze=kn.startBlock,In=0;In<Yt;In++)Ze=ae(B,F,Ze);var vf=Gt(F,Ze);return ct(B,F,vf,ke,Q)}function mf(B,F,j,Q,ct){for(var bt=new Int8Array(j.sizeBlock),Yt=0,ke=0;Yt<Q.length;Yt++)for(var kn=je(B,F,Q[Yt],x.MSG.SMALL_BLOCK_SIZE,kh.sbat.dataType.binary),Ze=0;Ze<kn.length;Ze++)bt[ke++]=kn[Ze];var In=new w(bt,0,w.LITTLE_ENDIAN);return ct(In,F,0,0,j.sizeBlock)}function Xr(B,F,j){for(var Q=[],ct=j.startBlock;ct!=x.MSG.END_OF_CHAIN;)Q.push(ct),ct=ee(B,F,ct);return Q}function Cs(B,F,j,Q){var ct=null,bt=j.sizeBlock<x.MSG.BIG_BLOCK_MIN_DOC_SIZE?kh.sbat:kh.bat,Yt=bt.dataType[x.MSG.FIELD.TYPE_MAPPING[Q]];return Yt&&(ct=bt.extractor(B,F,j,Yt)),ct}var Yi=function(B){this.ds=new w(B,0,w.LITTLE_ENDIAN)};return Yi.prototype={getFileData:function(){return wt(this.ds)?(this.fileData==null&&(this.fileData=Mo(this.ds)),this.fileData.fieldsData):{error:"Unsupported file type!"}},getAttachment:function(B){var F=typeof B=="number"?this.fileData.fieldsData.attachments[B]:B,j=this.fileData.propertyData[F.dataId],Q=Cs(this.ds,this.fileData,j,gf(j));return{fileName:F.fileName,content:Q}}},Yi})}}]);
