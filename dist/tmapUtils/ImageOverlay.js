T.ImageOverlay=T.Overlay.extend({options:{opacity:1,alt:""},initialize:function(t,i,e){this._url=t,this._bounds=i,T.setOptions(this,e)},onAdd:function(t){this._map=t,this._image||(this._initImage(),this._update(),this.options.opacity<1&&this._updateOpacity()),this._map.on("zoomend",this._update,this),this._map.getPanes().overlayPane.appendChild(this._image)},onRemove:function(){this._map.off("zoomend",this._update,this),this._map.getPanes().overlayPane.removeChild(this._image),this.map=null,this._image=null},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},getOpacity:function(){return this.options.opacity},setImageUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},getImageUrl:function(){return this._url},setBounds:function(t){this._bounds=t,this._bounds&&this._update()},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=this.create("img","tdt-image-layer "+(this._zoomAnimated?"tdt-zoom-animated":""));t.src=this._url,t.alt=this.options.alt},_updateOpacity:function(){var t=this._image;"opacity"in t.style?t.style.opacity=this.options.opacity:"filter"in t.style&&this._setOpacityIE(t,this.options.opacity)},_setOpacityIE:function(t,i){var e=!1,s="DXImageTransform.Microsoft.Alpha";try{e=t.filters.item(s)}catch(a){if(i===1)return}i=Math.round(i*100),e?(e.Enabled=i!==100,e.Opacity=i):t.style.filter+=" progid:"+s+"(opacity="+i+")"},create:function(t,i,e){var s=document.createElement(t);return s.className=i||"",e&&e.appendChild(s),s},_update:function(){var t=this._image,i=this._map.lngLatToLayerPoint(this._bounds.getNorthEast()),e=this._map.lngLatToLayerPoint(this._bounds.getSouthWest()),s=Math.abs(i.x-e.x),a=Math.abs(i.y-e.y);t.style.left=e.x+"px",t.style.top=i.y+"px",t.style.width=s+"px",t.style.height=a+"px"},bringToFront:function(){return this._image&&this._image.parentNode.appendChild(this._image),this},bringToBack:function(){if(this._image){var t=this._image.parentNode;t.insertBefore(this._image,t.firstChild)}return this}});
